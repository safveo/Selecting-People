<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>
            Mayflower Code Browser - Source Code
        </title>
        <link rel="stylesheet" type="text/css" href="../../../../../../js/jquery.sidebar/css/codebrowser/sidebar.css" />
        <link rel="stylesheet" type="text/css" href="../../../../../../css/global.css" />
        <link rel="stylesheet" type="text/css" href="../../../../../../css/cruisecontrol.css" />
        <link rel="stylesheet" type="text/css" href="../../../../../../css/review.css" />

        <script type="text/javascript" src="../../../../../../js/jquery-1.4.2.min.js"></script>
        <script type="text/javascript" src="../../../../../../js/jquery.sidebar/jquery-ui-1.7.2.custom.min.js"></script>
        <script type="text/javascript" src="../../../../../../js/jquery.sidebar/jquery.sidebar.js"></script>
        <script type="text/javascript" src="../../../../../../js/jquery.cluetip/lib/jquery.hoverIntent.js"></script>
        <script type="text/javascript" src="../../../../../../js/jquery.cluetip/lib/jquery.bgiframe.min.js"></script>
        <script type="text/javascript" src="../../../../../../js/jquery.cluetip/jquery.cluetip.min.js"></script>

        <script type="text/javascript" src="../../../../../../js/review.js"></script>
    </head>
    <body class="codebrowser">
        <div class="header">
            <a href="./../../../../../../index.html">Go back to index</a> |
            <a href="https://github.com/Mayflower/PHP_CodeBrowser">PHP CodeBrowser</a>
        </div>
        <hr/>
        <div id="review">
            <div class="filepath">
                FrontBundle/Resources/public/js/plugins/forms/wysihtml5/wysihtml5.min.js            </div>

            <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="code"><ol class="code"><li id="line_1" class="odd"><span class="lineNumber">&nbsp;&nbsp;1&nbsp;</span>/*<a name="line_1"></a></li>
<li id="line_2" class="even"><span class="lineNumber">&nbsp;&nbsp;2&nbsp;</span>&nbsp;wysihtml5&nbsp;v0.3.0<a name="line_2"></a></li>
<li id="line_3" class="odd"><span class="lineNumber">&nbsp;&nbsp;3&nbsp;</span>&nbsp;https://github.com/xing/wysihtml5<a name="line_3"></a></li>
<li id="line_4" class="even"><span class="lineNumber">&nbsp;&nbsp;4&nbsp;</span><a name="line_4"></a></li>
<li id="line_5" class="odd"><span class="lineNumber">&nbsp;&nbsp;5&nbsp;</span>&nbsp;Author:&nbsp;Christopher&nbsp;Blum&nbsp;(https://github.com/tiff)<a name="line_5"></a></li>
<li id="line_6" class="even"><span class="lineNumber">&nbsp;&nbsp;6&nbsp;</span><a name="line_6"></a></li>
<li id="line_7" class="odd"><span class="lineNumber">&nbsp;&nbsp;7&nbsp;</span>&nbsp;Copyright&nbsp;(C)&nbsp;2012&nbsp;XING&nbsp;AG<a name="line_7"></a></li>
<li id="line_8" class="even"><span class="lineNumber">&nbsp;&nbsp;8&nbsp;</span>&nbsp;Licensed&nbsp;under&nbsp;the&nbsp;MIT&nbsp;license&nbsp;(MIT)<a name="line_8"></a></li>
<li id="line_9" class="odd"><span class="lineNumber">&nbsp;&nbsp;9&nbsp;</span><a name="line_9"></a></li>
<li id="line_10" class="even"><span class="lineNumber">&nbsp;10&nbsp;</span>&nbsp;Rangy,&nbsp;a&nbsp;cross-browser&nbsp;JavaScript&nbsp;range&nbsp;and&nbsp;selection&nbsp;library<a name="line_10"></a></li>
<li id="line_11" class="odd"><span class="lineNumber">&nbsp;11&nbsp;</span>&nbsp;http://code.google.com/p/rangy/<a name="line_11"></a></li>
<li id="line_12" class="even"><span class="lineNumber">&nbsp;12&nbsp;</span><a name="line_12"></a></li>
<li id="line_13" class="odd"><span class="lineNumber">&nbsp;13&nbsp;</span>&nbsp;Copyright&nbsp;2011,&nbsp;Tim&nbsp;Down<a name="line_13"></a></li>
<li id="line_14" class="even"><span class="lineNumber">&nbsp;14&nbsp;</span>&nbsp;Licensed&nbsp;under&nbsp;the&nbsp;MIT&nbsp;license.<a name="line_14"></a></li>
<li id="line_15" class="odd"><span class="lineNumber">&nbsp;15&nbsp;</span>&nbsp;Version:&nbsp;1.2.2<a name="line_15"></a></li>
<li id="line_16" class="even"><span class="lineNumber">&nbsp;16&nbsp;</span>&nbsp;Build&nbsp;date:&nbsp;13&nbsp;November&nbsp;2011<a name="line_16"></a></li>
<li id="line_17" class="odd"><span class="lineNumber">&nbsp;17&nbsp;</span>*/<a name="line_17"></a></li>
<li id="line_18" class="even"><span class="lineNumber">&nbsp;18&nbsp;</span>var&nbsp;wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\ufeff",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};<a name="line_18"></a></li>
<li id="line_19" class="odd"><span class="lineNumber">&nbsp;19&nbsp;</span>window.rangy=function(){function&nbsp;b(a,b){var&nbsp;c=typeof&nbsp;a[b];return&nbsp;c==k||!!(c==h&amp;&amp;a[b])||"unknown"==c}function&nbsp;c(a,b){return!!(typeof&nbsp;a[b]==h&amp;&amp;a[b])}function&nbsp;a(a,b){return&nbsp;typeof&nbsp;a[b]!=j}function&nbsp;d(a){return&nbsp;function(b,c){for(var&nbsp;d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function&nbsp;e(a){return&nbsp;a&amp;&amp;m(a,r)&amp;&amp;x(a,q)}function&nbsp;f(a){window.alert("Rangy&nbsp;not&nbsp;supported&nbsp;in&nbsp;your&nbsp;browser.&nbsp;Reason:&nbsp;"+a);o.initialized=!0;o.supported=!1}function&nbsp;g(){if(!o.initialized){var&nbsp;a,d=!1,h=!1;b(document,"createRange")&amp;&amp;<a name="line_19"></a></li>
<li id="line_20" class="even"><span class="lineNumber">&nbsp;20&nbsp;</span>(a=document.createRange(),m(a,p)&amp;&amp;x(a,n)&amp;&amp;(d=!0),a.detach());if((a=c(document,"body")?document.body:document.getElementsByTagName("body")[0])&amp;&amp;b(a,"createTextRange"))a=a.createTextRange(),e(a)&amp;&amp;(h=!0);!d&amp;&amp;!h&amp;&amp;f("Neither&nbsp;Range&nbsp;nor&nbsp;TextRange&nbsp;are&nbsp;implemented");o.initialized=!0;o.features={implementsDomRange:d,implementsTextRange:h};d=w.concat(z);h=0;for(a=d.length;h&lt;a;++h)try{d[h](o)}catch(j){c(window,"console")&amp;&amp;b(window.console,"log")&amp;&amp;window.console.log("Init&nbsp;listener&nbsp;threw&nbsp;an&nbsp;exception.&nbsp;Continuing.",<a name="line_20"></a></li>
<li id="line_21" class="odd"><span class="lineNumber">&nbsp;21&nbsp;</span>j)}}}function&nbsp;i(a){this.name=a;this.supported=this.initialized=!1}var&nbsp;h="object",k="function",j="undefined",n="startContainer&nbsp;startOffset&nbsp;endContainer&nbsp;endOffset&nbsp;collapsed&nbsp;commonAncestorContainer&nbsp;START_TO_START&nbsp;START_TO_END&nbsp;END_TO_START&nbsp;END_TO_END".split("&nbsp;"),p="setStart&nbsp;setStartBefore&nbsp;setStartAfter&nbsp;setEnd&nbsp;setEndBefore&nbsp;setEndAfter&nbsp;collapse&nbsp;selectNode&nbsp;selectNodeContents&nbsp;compareBoundaryPoints&nbsp;deleteContents&nbsp;extractContents&nbsp;cloneContents&nbsp;insertNode&nbsp;surroundContents&nbsp;cloneRange&nbsp;toString&nbsp;detach".split("&nbsp;"),<a name="line_21"></a></li>
<li id="line_22" class="even"><span class="lineNumber">&nbsp;22&nbsp;</span>q="boundingHeight&nbsp;boundingLeft&nbsp;boundingTop&nbsp;boundingWidth&nbsp;htmlText&nbsp;text".split("&nbsp;"),r="collapse&nbsp;compareEndPoints&nbsp;duplicate&nbsp;getBookmark&nbsp;moveToBookmark&nbsp;moveToElementText&nbsp;parentElement&nbsp;pasteHTML&nbsp;select&nbsp;setEndPoint&nbsp;getBoundingClientRect".split("&nbsp;"),m=d(b),s=d(c),x=d(a),o={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:b,isHostObject:c,isHostProperty:a,areHostMethods:m,areHostObjects:s,areHostProperties:x,isTextRange:e},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};<a name="line_22"></a></li>
<li id="line_23" class="odd"><span class="lineNumber">&nbsp;23&nbsp;</span>o.fail=f;o.warn=function(a){a="Rangy&nbsp;warning:&nbsp;"+a;o.config.alertOnWarn?window.alert(a):typeof&nbsp;window.console!=j&amp;&amp;typeof&nbsp;window.console.log!=j&amp;&amp;window.console.log(a)};({}).hasOwnProperty?o.util.extend=function(a,b){for(var&nbsp;c&nbsp;in&nbsp;b)b.hasOwnProperty(c)&amp;&amp;(a[c]=b[c])}:f("hasOwnProperty&nbsp;not&nbsp;supported");var&nbsp;z=[],w=[];o.init=g;o.addInitListener=function(a){o.initialized?a(o):z.push(a)};var&nbsp;y=[];o.addCreateMissingNativeApiListener=function(a){y.push(a)};o.createMissingNativeApi=function(a){a=a||window;g();<a name="line_23"></a></li>
<li id="line_24" class="even"><span class="lineNumber">&nbsp;24&nbsp;</span>for(var&nbsp;b=0,c=y.length;b&lt;c;++b)y[b](a)};i.prototype.fail=function(a){this.initialized=!0;this.supported=!1;throw&nbsp;Error("Module&nbsp;'"+this.name+"'&nbsp;failed&nbsp;to&nbsp;load:&nbsp;"+a);};i.prototype.warn=function(a){o.warn("Module&nbsp;"+this.name+":&nbsp;"+a)};i.prototype.createError=function(a){return&nbsp;Error("Error&nbsp;in&nbsp;Rangy&nbsp;"+this.name+"&nbsp;module:&nbsp;"+a)};o.createModule=function(a,b){var&nbsp;c=new&nbsp;i(a);o.modules[a]=c;w.push(function(a){b(a,c);c.initialized=!0;c.supported=!0})};o.requireModules=function(a){for(var&nbsp;b=0,c=a.length,d,h;b&lt;<a name="line_24"></a></li>
<li id="line_25" class="odd"><span class="lineNumber">&nbsp;25&nbsp;</span>c;++b){h=a[b];d=o.modules[h];if(!d||!(d&nbsp;instanceof&nbsp;i))throw&nbsp;Error("Module&nbsp;'"+h+"'&nbsp;not&nbsp;found");if(!d.supported)throw&nbsp;Error("Module&nbsp;'"+h+"'&nbsp;not&nbsp;supported");}};var&nbsp;A=!1,s=function(){A||(A=!0,o.initialized||g())};if(typeof&nbsp;window==j)f("No&nbsp;window&nbsp;found");else&nbsp;if(typeof&nbsp;document==j)f("No&nbsp;document&nbsp;found");else&nbsp;return&nbsp;b(document,"addEventListener")&amp;&amp;document.addEventListener("DOMContentLoaded",s,!1),b(window,"addEventListener")?window.addEventListener("load",s,!1):b(window,"attachEvent")?window.attachEvent("onload",<a name="line_25"></a></li>
<li id="line_26" class="even"><span class="lineNumber">&nbsp;26&nbsp;</span>s):f("Window&nbsp;does&nbsp;not&nbsp;have&nbsp;required&nbsp;addEventListener&nbsp;or&nbsp;attachEvent&nbsp;method"),o}();<a name="line_26"></a></li>
<li id="line_27" class="odd"><span class="lineNumber">&nbsp;27&nbsp;</span>rangy.createModule("DomUtil",function(b,c){function&nbsp;a(a){for(var&nbsp;b=0;a=a.previousSibling;)b++;return&nbsp;b}function&nbsp;d(a,b){var&nbsp;c=[],d;for(d=a;d;d=d.parentNode)c.push(d);for(d=b;d;d=d.parentNode)if(m(c,d))return&nbsp;d;return&nbsp;null}function&nbsp;e(a,b,c){for(c=c?a:a.parentNode;c;){a=c.parentNode;if(a===b)return&nbsp;c;c=a}return&nbsp;null}function&nbsp;f(a){a=a.nodeType;return&nbsp;3==a||4==a||8==a}function&nbsp;g(a,b){var&nbsp;c=b.nextSibling,d=b.parentNode;c?d.insertBefore(a,c):d.appendChild(a);return&nbsp;a}function&nbsp;i(a){if(9==a.nodeType)return&nbsp;a;<a name="line_27"></a></li>
<li id="line_28" class="even"><span class="lineNumber">&nbsp;28&nbsp;</span>if(typeof&nbsp;a.ownerDocument!=p)return&nbsp;a.ownerDocument;if(typeof&nbsp;a.document!=p)return&nbsp;a.document;if(a.parentNode)return&nbsp;i(a.parentNode);throw&nbsp;Error("getDocument:&nbsp;no&nbsp;document&nbsp;found&nbsp;for&nbsp;node");}function&nbsp;h(a){return!a?"[No&nbsp;node]":f(a)?'"'+a.data+'"':1==a.nodeType?"&lt;"+a.nodeName+(a.id?'&nbsp;id="'+a.id+'"':"")+"&gt;["+a.childNodes.length+"]":a.nodeName}function&nbsp;k(a){this._next=this.root=a}function&nbsp;j(a,b){this.node=a;this.offset=b}function&nbsp;n(a){this.code=this[a];this.codeName=a;this.message="DOMException:&nbsp;"+this.codeName}<a name="line_28"></a></li>
<li id="line_29" class="odd"><span class="lineNumber">&nbsp;29&nbsp;</span>var&nbsp;p="undefined",q=b.util;q.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||c.fail("document&nbsp;missing&nbsp;a&nbsp;Node&nbsp;creation&nbsp;method");q.isHostMethod(document,"getElementsByTagName")||c.fail("document&nbsp;missing&nbsp;getElementsByTagName&nbsp;method");var&nbsp;r=document.createElement("div");q.areHostMethods(r,["insertBefore","appendChild","cloneNode"])||c.fail("Incomplete&nbsp;Element&nbsp;implementation");q.isHostProperty(r,"innerHTML")||c.fail("Element&nbsp;is&nbsp;missing&nbsp;innerHTML&nbsp;property");r=document.createTextNode("test");<a name="line_29"></a></li>
<li id="line_30" class="even"><span class="lineNumber">&nbsp;30&nbsp;</span>q.areHostMethods(r,["splitText","deleteData","insertData","appendData","cloneNode"])||c.fail("Incomplete&nbsp;Text&nbsp;Node&nbsp;implementation");var&nbsp;m=function(a,b){for(var&nbsp;c=a.length;c--;)if(a[c]===b)return!0;return!1};k.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var&nbsp;a=this._current=this._next,b;if(this._current){b=a.firstChild;if(!b)for(b=null;a!==this.root&amp;&amp;!(b=a.nextSibling);)a=a.parentNode;this._next=b}return&nbsp;this._current},detach:function(){this._current=this._next=this.root=<a name="line_30"></a></li>
<li id="line_31" class="odd"><span class="lineNumber">&nbsp;31&nbsp;</span>null}};j.prototype={equals:function(a){return&nbsp;this.node===a.node&amp;this.offset==a.offset},inspect:function(){return"[DomPosition("+h(this.node)+":"+this.offset+")]"}};n.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};n.prototype.toString=function(){return&nbsp;this.message};b.dom={arrayContains:m,isHtmlNamespace:function(a){var&nbsp;b;return&nbsp;typeof&nbsp;a.namespaceURI==p||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==<a name="line_31"></a></li>
<li id="line_32" class="even"><span class="lineNumber">&nbsp;32&nbsp;</span>b},parentElement:function(a){a=a.parentNode;return&nbsp;1==a.nodeType?a:null},getNodeIndex:a,getNodeLength:function(a){var&nbsp;b;return&nbsp;f(a)?a.length:(b=a.childNodes)?b.length:0},getCommonAncestor:d,isAncestorOf:function(a,b,c){for(b=c?b:b.parentNode;b;){if(b===a)return!0;b=b.parentNode}return!1},getClosestAncestorIn:e,isCharacterDataNode:f,insertAfter:g,splitDataNode:function(a,b){var&nbsp;c=a.cloneNode(!1);c.deleteData(0,b);a.deleteData(b,a.length-b);g(c,a);return&nbsp;c},getDocument:i,getWindow:function(a){a=i(a);<a name="line_32"></a></li>
<li id="line_33" class="odd"><span class="lineNumber">&nbsp;33&nbsp;</span>if(typeof&nbsp;a.defaultView!=p)return&nbsp;a.defaultView;if(typeof&nbsp;a.parentWindow!=p)return&nbsp;a.parentWindow;throw&nbsp;Error("Cannot&nbsp;get&nbsp;a&nbsp;window&nbsp;object&nbsp;for&nbsp;node");},getIframeWindow:function(a){if(typeof&nbsp;a.contentWindow!=p)return&nbsp;a.contentWindow;if(typeof&nbsp;a.contentDocument!=p)return&nbsp;a.contentDocument.defaultView;throw&nbsp;Error("getIframeWindow:&nbsp;No&nbsp;Window&nbsp;object&nbsp;found&nbsp;for&nbsp;iframe&nbsp;element");},getIframeDocument:function(a){if(typeof&nbsp;a.contentDocument!=p)return&nbsp;a.contentDocument;if(typeof&nbsp;a.contentWindow!=p)return&nbsp;a.contentWindow.document;<a name="line_33"></a></li>
<li id="line_34" class="even"><span class="lineNumber">&nbsp;34&nbsp;</span>throw&nbsp;Error("getIframeWindow:&nbsp;No&nbsp;Document&nbsp;object&nbsp;found&nbsp;for&nbsp;iframe&nbsp;element");},getBody:function(a){return&nbsp;q.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]},getRootContainer:function(a){for(var&nbsp;b;b=a.parentNode;)a=b;return&nbsp;a},comparePoints:function(b,c,h,j){var&nbsp;k;if(b==h)return&nbsp;c===j?0:c&lt;j?-1:1;if(k=e(h,b,!0))return&nbsp;c&lt;=a(k)?-1:1;if(k=e(b,h,!0))return&nbsp;a(k)&lt;j?-1:1;c=d(b,h);b=b===c?c:e(b,c,!0);h=h===c?c:e(h,c,!0);if(b===h)throw&nbsp;Error("comparePoints&nbsp;got&nbsp;to&nbsp;case&nbsp;4&nbsp;and&nbsp;childA&nbsp;and&nbsp;childB&nbsp;are&nbsp;the&nbsp;same!");<a name="line_34"></a></li>
<li id="line_35" class="odd"><span class="lineNumber">&nbsp;35&nbsp;</span>for(c=c.firstChild;c;){if(c===b)return-1;if(c===h)return&nbsp;1;c=c.nextSibling}throw&nbsp;Error("Should&nbsp;not&nbsp;be&nbsp;here!");},inspectNode:h,fragmentFromNodeChildren:function(a){for(var&nbsp;b=i(a).createDocumentFragment(),c;c=a.firstChild;)b.appendChild(c);return&nbsp;b},createIterator:function(a){return&nbsp;new&nbsp;k(a)},DomPosition:j};b.DOMException=n});<a name="line_35"></a></li>
<li id="line_36" class="even"><span class="lineNumber">&nbsp;36&nbsp;</span>rangy.createModule("DomRange",function(b){function&nbsp;c(a,b){return&nbsp;3!=a.nodeType&amp;&amp;(l.isAncestorOf(a,b.startContainer,!0)||l.isAncestorOf(a,b.endContainer,!0))}function&nbsp;a(a){return&nbsp;l.getDocument(a.startContainer)}function&nbsp;d(a,b,c){if(b=a._listeners[b])for(var&nbsp;d=0,h=b.length;d&lt;h;++d)b[d].call(a,{target:a,args:c})}function&nbsp;e(a){return&nbsp;new&nbsp;u(a.parentNode,l.getNodeIndex(a))}function&nbsp;f(a){return&nbsp;new&nbsp;u(a.parentNode,l.getNodeIndex(a)+1)}function&nbsp;g(a,b,c){var&nbsp;d=11==a.nodeType?a.firstChild:a;l.isCharacterDataNode(b)?<a name="line_36"></a></li>
<li id="line_37" class="odd"><span class="lineNumber">&nbsp;37&nbsp;</span>c==b.length?l.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:l.splitDataNode(b,c)):c&gt;=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]);return&nbsp;d}function&nbsp;i(b){for(var&nbsp;c,d,h=a(b.range).createDocumentFragment();d=b.next();){c=b.isPartiallySelectedSubtree();d=d.cloneNode(!c);c&amp;&amp;(c=b.getSubtreeIterator(),d.appendChild(i(c)),c.detach(!0));if(10==d.nodeType)throw&nbsp;new&nbsp;B("HIERARCHY_REQUEST_ERR");h.appendChild(d)}return&nbsp;h}function&nbsp;h(a,b,c){for(var&nbsp;d,e,c=c||{stop:!1};d=a.next();)if(a.isPartiallySelectedSubtree())if(!1===<a name="line_37"></a></li>
<li id="line_38" class="even"><span class="lineNumber">&nbsp;38&nbsp;</span>b(d)){c.stop=!0;break}else{if(d=a.getSubtreeIterator(),h(d,b,c),d.detach(!0),c.stop)break}else&nbsp;for(d=l.createIterator(d);e=d.next();)if(!1===b(e)){c.stop=!0;return}}function&nbsp;k(a){for(var&nbsp;b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),k(b),b.detach(!0)):a.remove()}function&nbsp;j(b){for(var&nbsp;c,d=a(b.range).createDocumentFragment(),h;c=b.next();){b.isPartiallySelectedSubtree()?(c=c.cloneNode(!1),h=b.getSubtreeIterator(),c.appendChild(j(h)),h.detach(!0)):b.remove();if(10==c.nodeType)throw&nbsp;new&nbsp;B("HIERARCHY_REQUEST_ERR");<a name="line_38"></a></li>
<li id="line_39" class="odd"><span class="lineNumber">&nbsp;39&nbsp;</span>d.appendChild(c)}return&nbsp;d}function&nbsp;n(a,b,c){var&nbsp;d=!(!b||!b.length),e,j=!!c;d&amp;&amp;(e=RegExp("^("+b.join("|")+")$"));var&nbsp;k=[];h(new&nbsp;q(a,!1),function(a){(!d||e.test(a.nodeType))&amp;&amp;(!j||c(a))&amp;&amp;k.push(a)});return&nbsp;k}function&nbsp;p(a){return"["+("undefined"==typeof&nbsp;a.getName?"Range":a.getName())+"("+l.inspectNode(a.startContainer)+":"+a.startOffset+",&nbsp;"+l.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function&nbsp;q(a,b){this.range=a;this.clonePartiallySelectedTextNodes=b;if(!a.collapsed){this.sc=a.startContainer;<a name="line_39"></a></li>
<li id="line_40" class="even"><span class="lineNumber">&nbsp;40&nbsp;</span>this.so=a.startOffset;this.ec=a.endContainer;this.eo=a.endOffset;var&nbsp;c=a.commonAncestorContainer;this.sc===this.ec&amp;&amp;l.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===c&amp;&amp;!l.isCharacterDataNode(this.sc)?this.sc.childNodes[this.so]:l.getClosestAncestorIn(this.sc,c,!0),this._last=this.ec===c&amp;&amp;!l.isCharacterDataNode(this.ec)?this.ec.childNodes[this.eo-1]:l.getClosestAncestorIn(this.ec,c,!0))}}function&nbsp;r(a){this.code=<a name="line_40"></a></li>
<li id="line_41" class="odd"><span class="lineNumber">&nbsp;41&nbsp;</span>this[a];this.codeName=a;this.message="RangeException:&nbsp;"+this.codeName}function&nbsp;m(a,b,c){this.nodes=n(a,b,c);this._next=this.nodes[0];this._position=0}function&nbsp;s(a){return&nbsp;function(b,c){for(var&nbsp;d,h=c?b:b.parentNode;h;){d=h.nodeType;if(l.arrayContains(a,d))return&nbsp;h;h=h.parentNode}return&nbsp;null}}function&nbsp;x(a,b){if($(a,b))throw&nbsp;new&nbsp;r("INVALID_NODE_TYPE_ERR");}function&nbsp;o(a){if(!a.startContainer)throw&nbsp;new&nbsp;B("INVALID_STATE_ERR");}function&nbsp;z(a,b){if(!l.arrayContains(b,a.nodeType))throw&nbsp;new&nbsp;r("INVALID_NODE_TYPE_ERR");<a name="line_41"></a></li>
<li id="line_42" class="even"><span class="lineNumber">&nbsp;42&nbsp;</span>}function&nbsp;w(a,b){if(0&gt;b||b&gt;(l.isCharacterDataNode(a)?a.length:a.childNodes.length))throw&nbsp;new&nbsp;B("INDEX_SIZE_ERR");}function&nbsp;y(a,b){if(O(a,!0)!==O(b,!0))throw&nbsp;new&nbsp;B("WRONG_DOCUMENT_ERR");}function&nbsp;A(a){if(aa(a,!0))throw&nbsp;new&nbsp;B("NO_MODIFICATION_ALLOWED_ERR");}function&nbsp;t(a,b){if(!a)throw&nbsp;new&nbsp;B(b);}function&nbsp;v(a){o(a);if(!l.arrayContains(G,a.startContainer.nodeType)&amp;&amp;!O(a.startContainer,!0)||!l.arrayContains(G,a.endContainer.nodeType)&amp;&amp;!O(a.endContainer,!0)||!(a.startOffset&lt;=(l.isCharacterDataNode(a.startContainer)?<a name="line_42"></a></li>
<li id="line_43" class="odd"><span class="lineNumber">&nbsp;43&nbsp;</span>a.startContainer.length:a.startContainer.childNodes.length))||!(a.endOffset&lt;=(l.isCharacterDataNode(a.endContainer)?a.endContainer.length:a.endContainer.childNodes.length)))throw&nbsp;Error("Range&nbsp;error:&nbsp;Range&nbsp;is&nbsp;no&nbsp;longer&nbsp;valid&nbsp;after&nbsp;DOM&nbsp;mutation&nbsp;("+a.inspect()+")");}function&nbsp;D(){}function&nbsp;K(a){a.START_TO_START=Q;a.START_TO_END=U;a.END_TO_END=ba;a.END_TO_START=V;a.NODE_BEFORE=W;a.NODE_AFTER=X;a.NODE_BEFORE_AND_AFTER=Y;a.NODE_INSIDE=R}function&nbsp;F(a){K(a);K(a.prototype)}function&nbsp;E(a,b){return&nbsp;function(){v(this);<a name="line_43"></a></li>
<li id="line_44" class="even"><span class="lineNumber">&nbsp;44&nbsp;</span>var&nbsp;c=this.startContainer,d=this.startOffset,e=this.commonAncestorContainer,j=new&nbsp;q(this,!0);c!==e&amp;&amp;(c=l.getClosestAncestorIn(c,e,!0),d=f(c),c=d.node,d=d.offset);h(j,A);j.reset();e=a(j);j.detach();b(this,c,d,c,d);return&nbsp;e}}function&nbsp;I(a,d,h){function&nbsp;g(a,b){return&nbsp;function(c){o(this);z(c,L);z(M(c),G);c=(a?e:f)(c);(b?i:n)(this,c.node,c.offset)}}function&nbsp;i(a,b,c){var&nbsp;h=a.endContainer,e=a.endOffset;if(b!==a.startContainer||c!==a.startOffset){if(M(b)!=M(h)||1==l.comparePoints(b,c,h,e))h=b,e=c;d(a,b,c,<a name="line_44"></a></li>
<li id="line_45" class="odd"><span class="lineNumber">&nbsp;45&nbsp;</span>h,e)}}function&nbsp;n(a,b,c){var&nbsp;h=a.startContainer,e=a.startOffset;if(b!==a.endContainer||c!==a.endOffset){if(M(b)!=M(h)||-1==l.comparePoints(b,c,h,e))h=b,e=c;d(a,h,e,b,c)}}a.prototype=new&nbsp;D;b.util.extend(a.prototype,{setStart:function(a,b){o(this);x(a,!0);w(a,b);i(this,a,b)},setEnd:function(a,b){o(this);x(a,!0);w(a,b);n(this,a,b)},setStartBefore:g(!0,!0),setStartAfter:g(!1,!0),setEndBefore:g(!0,!1),setEndAfter:g(!1,!1),collapse:function(a){v(this);a?d(this,this.startContainer,this.startOffset,this.startContainer,<a name="line_45"></a></li>
<li id="line_46" class="even"><span class="lineNumber">&nbsp;46&nbsp;</span>this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){o(this);x(a,!0);d(this,a,0,a,l.getNodeLength(a))},selectNode:function(a){o(this);x(a,!1);z(a,L);var&nbsp;b=e(a),a=f(a);d(this,b.node,b.offset,a.node,a.offset)},extractContents:E(j,d),deleteContents:E(k,d),canSurroundContents:function(){v(this);A(this.startContainer);A(this.endContainer);var&nbsp;a=new&nbsp;q(this,!0),b=a._first&amp;&amp;c(a._first,this)||a._last&amp;&amp;c(a._last,this);a.detach();return!b},<a name="line_46"></a></li>
<li id="line_47" class="odd"><span class="lineNumber">&nbsp;47&nbsp;</span>detach:function(){h(this)},splitBoundaries:function(){v(this);var&nbsp;a=this.startContainer,b=this.startOffset,c=this.endContainer,h=this.endOffset,e=a===c;l.isCharacterDataNode(c)&amp;&amp;(0&lt;h&amp;&amp;h&lt;c.length)&amp;&amp;l.splitDataNode(c,h);l.isCharacterDataNode(a)&amp;&amp;(0&lt;b&amp;&amp;b&lt;a.length)&amp;&amp;(a=l.splitDataNode(a,b),e?(h-=b,c=a):c==a.parentNode&amp;&amp;h&gt;=l.getNodeIndex(a)&amp;&amp;h++,b=0);d(this,a,b,c,h)},normalizeBoundaries:function(){v(this);var&nbsp;a=this.startContainer,b=this.startOffset,c=this.endContainer,h=this.endOffset,e=function(a){var&nbsp;b=<a name="line_47"></a></li>
<li id="line_48" class="even"><span class="lineNumber">&nbsp;48&nbsp;</span>a.nextSibling;b&amp;&amp;b.nodeType==a.nodeType&amp;&amp;(c=a,h=a.length,a.appendData(b.data),b.parentNode.removeChild(b))},j=function(d){var&nbsp;e=d.previousSibling;if(e&amp;&amp;e.nodeType==d.nodeType){a=d;var&nbsp;j=d.length;b=e.length;d.insertData(0,e.data);e.parentNode.removeChild(e);a==c?(h+=b,c=a):c==d.parentNode&amp;&amp;(e=l.getNodeIndex(d),h==e?(c=d,h=j):h&gt;e&amp;&amp;h--)}},k=!0;l.isCharacterDataNode(c)?c.length==h&amp;&amp;e(c):(0&lt;h&amp;&amp;(k=c.childNodes[h-1])&amp;&amp;l.isCharacterDataNode(k)&amp;&amp;e(k),k=!this.collapsed);k?l.isCharacterDataNode(a)?0==b&amp;&amp;j(a):<a name="line_48"></a></li>
<li id="line_49" class="odd"><span class="lineNumber">&nbsp;49&nbsp;</span>b&lt;a.childNodes.length&amp;&amp;(e=a.childNodes[b])&amp;&amp;l.isCharacterDataNode(e)&amp;&amp;j(e):(a=c,b=h);d(this,a,b,c,h)},collapseToPoint:function(a,b){o(this);x(a,!0);w(a,b);(a!==this.startContainer||b!==this.startOffset||a!==this.endContainer||b!==this.endOffset)&amp;&amp;d(this,a,b,a,b)}});F(a)}function&nbsp;N(a){a.collapsed=a.startContainer===a.endContainer&amp;&amp;a.startOffset===a.endOffset;a.commonAncestorContainer=a.collapsed?a.startContainer:l.getCommonAncestor(a.startContainer,a.endContainer)}function&nbsp;J(a,b,c,h,e){var&nbsp;j=a.startContainer!==<a name="line_49"></a></li>
<li id="line_50" class="even"><span class="lineNumber">&nbsp;50&nbsp;</span>b||a.startOffset!==c,k=a.endContainer!==h||a.endOffset!==e;a.startContainer=b;a.startOffset=c;a.endContainer=h;a.endOffset=e;N(a);d(a,"boundarychange",{startMoved:j,endMoved:k})}function&nbsp;C(a){this.startContainer=a;this.startOffset=0;this.endContainer=a;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};N(this)}b.requireModules(["DomUtil"]);var&nbsp;l=b.dom,u=l.DomPosition,B=b.DOMException;q.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=<a name="line_50"></a></li>
<li id="line_51" class="odd"><span class="lineNumber">&nbsp;51&nbsp;</span>null;this._next=this._first},hasNext:function(){return!!this._next},next:function(){var&nbsp;a=this._current=this._next;a&amp;&amp;(this._next=a!==this._last?a.nextSibling:null,l.isCharacterDataNode(a)&amp;&amp;this.clonePartiallySelectedTextNodes&amp;&amp;(a===this.ec&amp;&amp;(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&amp;&amp;(a=a.cloneNode(!0)).deleteData(0,this.so)));return&nbsp;a},remove:function(){var&nbsp;a=this._current,b,c;l.isCharacterDataNode(a)&amp;&amp;(a===this.sc||a===this.ec)?(b=a===this.sc?this.so:0,c=a===<a name="line_51"></a></li>
<li id="line_52" class="even"><span class="lineNumber">&nbsp;52&nbsp;</span>this.ec?this.eo:a.length,b!=c&amp;&amp;a.deleteData(b,c-b)):a.parentNode&amp;&amp;a.parentNode.removeChild(a)},isPartiallySelectedSubtree:function(){return&nbsp;c(this._current,this.range)},getSubtreeIterator:function(){var&nbsp;b;if(this.isSingleCharacterDataNode)b=this.range.cloneRange(),b.collapse();else{b=new&nbsp;C(a(this.range));var&nbsp;c=this._current,d=c,h=0,e=c,j=l.getNodeLength(c);l.isAncestorOf(c,this.sc,!0)&amp;&amp;(d=this.sc,h=this.so);l.isAncestorOf(c,this.ec,!0)&amp;&amp;(e=this.ec,j=this.eo);J(b,d,h,e,j)}return&nbsp;new&nbsp;q(b,this.clonePartiallySelectedTextNodes)},<a name="line_52"></a></li>
<li id="line_53" class="odd"><span class="lineNumber">&nbsp;53&nbsp;</span>detach:function(a){a&amp;&amp;this.range.detach();this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};r.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};r.prototype.toString=function(){return&nbsp;this.message};m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){this._current=this._next;this._next=this.nodes[++this._position];return&nbsp;this._current},detach:function(){this._current=this._next=this.nodes=null}};var&nbsp;L=[1,3,4,5,<a name="line_53"></a></li>
<li id="line_54" class="even"><span class="lineNumber">&nbsp;54&nbsp;</span>7,8,10],G=[2,9,11],P=[1,3,4,5,7,8,10,11],H=[1,3,4,5,7,8],M=l.getRootContainer,O=s([9,11]),aa=s([5,6,10,12]),$=s([6,10,12]),Z=document.createElement("style"),S=!1;try{Z.innerHTML="&lt;b&gt;x&lt;/b&gt;",S=3==Z.firstChild.nodeType}catch(ca){}b.features.htmlParsingConforms=S;var&nbsp;T="startContainer&nbsp;startOffset&nbsp;endContainer&nbsp;endOffset&nbsp;collapsed&nbsp;commonAncestorContainer".split("&nbsp;"),Q=0,U=1,ba=2,V=3,W=0,X=1,Y=2,R=3;D.prototype={attachListener:function(a,b){this._listeners[a].push(b)},compareBoundaryPoints:function(a,b){v(this);<a name="line_54"></a></li>
<li id="line_55" class="odd"><span class="lineNumber">&nbsp;55&nbsp;</span>y(this.startContainer,b.startContainer);var&nbsp;c=a==V||a==Q?"start":"end",d=a==U||a==Q?"start":"end";return&nbsp;l.comparePoints(this[c+"Container"],this[c+"Offset"],b[d+"Container"],b[d+"Offset"])},insertNode:function(a){v(this);z(a,P);A(this.startContainer);if(l.isAncestorOf(a,this.startContainer,!0))throw&nbsp;new&nbsp;B("HIERARCHY_REQUEST_ERR");this.setStartBefore(g(a,this.startContainer,this.startOffset))},cloneContents:function(){v(this);var&nbsp;b,c;if(this.collapsed)return&nbsp;a(this).createDocumentFragment();if(this.startContainer===<a name="line_55"></a></li>
<li id="line_56" class="even"><span class="lineNumber">&nbsp;56&nbsp;</span>this.endContainer&amp;&amp;l.isCharacterDataNode(this.startContainer))return&nbsp;b=this.startContainer.cloneNode(!0),b.data=b.data.slice(this.startOffset,this.endOffset),c=a(this).createDocumentFragment(),c.appendChild(b),c;c=new&nbsp;q(this,!0);b=i(c);c.detach();return&nbsp;b},canSurroundContents:function(){v(this);A(this.startContainer);A(this.endContainer);var&nbsp;a=new&nbsp;q(this,!0),b=a._first&amp;&amp;c(a._first,this)||a._last&amp;&amp;c(a._last,this);a.detach();return!b},surroundContents:function(a){z(a,H);if(!this.canSurroundContents())throw&nbsp;new&nbsp;r("BAD_BOUNDARYPOINTS_ERR");<a name="line_56"></a></li>
<li id="line_57" class="odd"><span class="lineNumber">&nbsp;57&nbsp;</span>var&nbsp;b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);g(a,this.startContainer,this.startOffset);a.appendChild(b);this.selectNode(a)},cloneRange:function(){v(this);for(var&nbsp;b=new&nbsp;C(a(this)),c=T.length,d;c--;)d=T[c],b[d]=this[d];return&nbsp;b},toString:function(){v(this);var&nbsp;a=this.startContainer;if(a===this.endContainer&amp;&amp;l.isCharacterDataNode(a))return&nbsp;3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var&nbsp;b=[],a=new&nbsp;q(this,!0);h(a,function(a){(3==<a name="line_57"></a></li>
<li id="line_58" class="even"><span class="lineNumber">&nbsp;58&nbsp;</span>a.nodeType||4==a.nodeType)&amp;&amp;b.push(a.data)});a.detach();return&nbsp;b.join("")},compareNode:function(a){v(this);var&nbsp;b=a.parentNode,c=l.getNodeIndex(a);if(!b)throw&nbsp;new&nbsp;B("NOT_FOUND_ERR");a=this.comparePoint(b,c);b=this.comparePoint(b,c+1);return&nbsp;0&gt;a?0&lt;b?Y:W:0&lt;b?X:R},comparePoint:function(a,b){v(this);t(a,"HIERARCHY_REQUEST_ERR");y(a,this.startContainer);return&nbsp;0&gt;l.comparePoints(a,b,this.startContainer,this.startOffset)?-1:0&lt;l.comparePoints(a,b,this.endContainer,this.endOffset)?1:0},createContextualFragment:S?<a name="line_58"></a></li>
<li id="line_59" class="odd"><span class="lineNumber">&nbsp;59&nbsp;</span>function(a){var&nbsp;b=this.startContainer,c=l.getDocument(b);if(!b)throw&nbsp;new&nbsp;B("INVALID_STATE_ERR");var&nbsp;d=null;1==b.nodeType?d=b:l.isCharacterDataNode(b)&amp;&amp;(d=l.parentElement(b));d=null===d||"HTML"==d.nodeName&amp;&amp;l.isHtmlNamespace(l.getDocument(d).documentElement)&amp;&amp;l.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1);d.innerHTML=a;return&nbsp;l.fragmentFromNodeChildren(d)}:function(b){o(this);var&nbsp;c=a(this).createElement("body");c.innerHTML=b;return&nbsp;l.fragmentFromNodeChildren(c)},toHtml:function(){v(this);<a name="line_59"></a></li>
<li id="line_60" class="even"><span class="lineNumber">&nbsp;60&nbsp;</span>var&nbsp;b=a(this).createElement("div");b.appendChild(this.cloneContents());return&nbsp;b.innerHTML},intersectsNode:function(b,c){v(this);t(b,"NOT_FOUND_ERR");if(l.getDocument(b)!==a(this))return!1;var&nbsp;d=b.parentNode,h=l.getNodeIndex(b);t(d,"NOT_FOUND_ERR");var&nbsp;e=l.comparePoints(d,h,this.endContainer,this.endOffset),d=l.comparePoints(d,h+1,this.startContainer,this.startOffset);return&nbsp;c?0&gt;=e&amp;&amp;0&lt;=d:0&gt;e&amp;&amp;0&lt;d},isPointInRange:function(a,b){v(this);t(a,"HIERARCHY_REQUEST_ERR");y(a,this.startContainer);return&nbsp;0&lt;=<a name="line_60"></a></li>
<li id="line_61" class="odd"><span class="lineNumber">&nbsp;61&nbsp;</span>l.comparePoints(a,b,this.startContainer,this.startOffset)&amp;&amp;0&gt;=l.comparePoints(a,b,this.endContainer,this.endOffset)},intersectsRange:function(b,c){v(this);if(a(b)!=a(this))throw&nbsp;new&nbsp;B("WRONG_DOCUMENT_ERR");var&nbsp;d=l.comparePoints(this.startContainer,this.startOffset,b.endContainer,b.endOffset),h=l.comparePoints(this.endContainer,this.endOffset,b.startContainer,b.startOffset);return&nbsp;c?0&gt;=d&amp;&amp;0&lt;=h:0&gt;d&amp;&amp;0&lt;h},intersection:function(a){if(this.intersectsRange(a)){var&nbsp;b=l.comparePoints(this.startContainer,<a name="line_61"></a></li>
<li id="line_62" class="even"><span class="lineNumber">&nbsp;62&nbsp;</span>this.startOffset,a.startContainer,a.startOffset),c=l.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();-1==b&amp;&amp;d.setStart(a.startContainer,a.startOffset);1==c&amp;&amp;d.setEnd(a.endContainer,a.endOffset);return&nbsp;d}return&nbsp;null},union:function(a){if(this.intersectsRange(a,!0)){var&nbsp;b=this.cloneRange();-1==l.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&amp;&amp;b.setStart(a.startContainer,a.startOffset);1==l.comparePoints(a.endContainer,<a name="line_62"></a></li>
<li id="line_63" class="odd"><span class="lineNumber">&nbsp;63&nbsp;</span>a.endOffset,this.endContainer,this.endOffset)&amp;&amp;b.setEnd(a.endContainer,a.endOffset);return&nbsp;b}throw&nbsp;new&nbsp;r("Ranges&nbsp;do&nbsp;not&nbsp;intersect");},containsNode:function(a,b){return&nbsp;b?this.intersectsNode(a,!1):this.compareNode(a)==R},containsNodeContents:function(a){return&nbsp;0&lt;=this.comparePoint(a,0)&amp;&amp;0&gt;=this.comparePoint(a,l.getNodeLength(a))},containsRange:function(a){return&nbsp;this.intersection(a).equals(a)},containsNodeText:function(a){var&nbsp;b=this.cloneRange();b.selectNode(a);var&nbsp;c=b.getNodes([3]);return&nbsp;0&lt;c.length?<a name="line_63"></a></li>
<li id="line_64" class="even"><span class="lineNumber">&nbsp;64&nbsp;</span>(b.setStart(c[0],0),a=c.pop(),b.setEnd(a,a.length),a=this.containsRange(b),b.detach(),a):this.containsNodeContents(a)},createNodeIterator:function(a,b){v(this);return&nbsp;new&nbsp;m(this,a,b)},getNodes:function(a,b){v(this);return&nbsp;n(this,a,b)},getDocument:function(){return&nbsp;a(this)},collapseBefore:function(a){o(this);this.setEndBefore(a);this.collapse(!1)},collapseAfter:function(a){o(this);this.setStartAfter(a);this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return&nbsp;C.rangesEqual(this,<a name="line_64"></a></li>
<li id="line_65" class="odd"><span class="lineNumber">&nbsp;65&nbsp;</span>a)},inspect:function(){return&nbsp;p(this)}};I(C,J,function(a){o(a);a.startContainer=a.startOffset=a.endContainer=a.endOffset=null;a.collapsed=a.commonAncestorContainer=null;d(a,"detach",null);a._listeners=null});b.rangePrototype=D.prototype;C.rangeProperties=T;C.RangeIterator=q;C.copyComparisonConstants=F;C.createPrototypeRange=I;C.inspect=p;C.getRangeDocument=a;C.rangesEqual=function(a,b){return&nbsp;a.startContainer===b.startContainer&amp;&amp;a.startOffset===b.startOffset&amp;&amp;a.endContainer===b.endContainer&amp;&amp;a.endOffset===<a name="line_65"></a></li>
<li id="line_66" class="even"><span class="lineNumber">&nbsp;66&nbsp;</span>b.endOffset};b.DomRange=C;b.RangeException=r});<a name="line_66"></a></li>
<li id="line_67" class="odd"><span class="lineNumber">&nbsp;67&nbsp;</span>rangy.createModule("WrappedRange",function(b){function&nbsp;c(a,b,c,d){var&nbsp;g=a.duplicate();g.collapse(c);var&nbsp;i=g.parentElement();e.isAncestorOf(b,i,!0)||(i=b);if(!i.canHaveHTML)return&nbsp;new&nbsp;f(i.parentNode,e.getNodeIndex(i));var&nbsp;b=e.getDocument(i).createElement("span"),r,m=c?"StartToStart":"StartToEnd";do&nbsp;i.insertBefore(b,b.previousSibling),g.moveToElementText(b);while(0&lt;(r=g.compareEndPoints(m,a))&amp;&amp;b.previousSibling);m=b.nextSibling;if(-1==r&amp;&amp;m&amp;&amp;e.isCharacterDataNode(m)){g.setEndPoint(c?"EndToStart":"EndToEnd",<a name="line_67"></a></li>
<li id="line_68" class="even"><span class="lineNumber">&nbsp;68&nbsp;</span>a);if(/[\r\n]/.test(m.data)){i=g.duplicate();c=i.text.replace(/\r\n/g,"\r").length;for(c=i.moveStart("character",c);-1==i.compareEndPoints("StartToEnd",i);)c++,i.moveStart("character",1)}else&nbsp;c=g.text.length;i=new&nbsp;f(m,c)}else&nbsp;m=(d||!c)&amp;&amp;b.previousSibling,i=(c=(d||c)&amp;&amp;b.nextSibling)&amp;&amp;e.isCharacterDataNode(c)?new&nbsp;f(c,0):m&amp;&amp;e.isCharacterDataNode(m)?new&nbsp;f(m,m.length):new&nbsp;f(i,e.getNodeIndex(b));b.parentNode.removeChild(b);return&nbsp;i}function&nbsp;a(a,b){var&nbsp;c,d,f=a.offset,g=e.getDocument(a.node),i=g.body.createTextRange(),<a name="line_68"></a></li>
<li id="line_69" class="odd"><span class="lineNumber">&nbsp;69&nbsp;</span>m=e.isCharacterDataNode(a.node);m?(c=a.node,d=c.parentNode):(c=a.node.childNodes,c=f&lt;c.length?c[f]:null,d=a.node);g=g.createElement("span");g.innerHTML="&amp;#feff;";c?d.insertBefore(g,c):d.appendChild(g);i.moveToElementText(g);i.collapse(!b);d.removeChild(g);if(m)i[b?"moveStart":"moveEnd"]("character",f);return&nbsp;i}b.requireModules(["DomUtil","DomRange"]);var&nbsp;d,e=b.dom,f=e.DomPosition,g=b.DomRange;if(b.features.implementsDomRange&amp;&amp;(!b.features.implementsTextRange||!b.config.preferTextRange))(function(){function&nbsp;a(b){for(var&nbsp;c=<a name="line_69"></a></li>
<li id="line_70" class="even"><span class="lineNumber">&nbsp;70&nbsp;</span>j.length,d;c--;)d=j[c],b[d]=b.nativeRange[d]}var&nbsp;c,j=g.rangeProperties,f;d=function(b){if(!b)throw&nbsp;Error("Range&nbsp;must&nbsp;be&nbsp;specified");this.nativeRange=b;a(this)};g.createPrototypeRange(d,function(a,b,c,d,h){var&nbsp;e=a.endContainer!==d||a.endOffset!=h;if(a.startContainer!==b||a.startOffset!=c||e)a.setEnd(d,h),a.setStart(b,c)},function(a){a.nativeRange.detach();a.detached=!0;for(var&nbsp;b=j.length,c;b--;)c=j[b],a[c]=null});c=d.prototype;c.selectNode=function(b){this.nativeRange.selectNode(b);a(this)};c.deleteContents=<a name="line_70"></a></li>
<li id="line_71" class="odd"><span class="lineNumber">&nbsp;71&nbsp;</span>function(){this.nativeRange.deleteContents();a(this)};c.extractContents=function(){var&nbsp;b=this.nativeRange.extractContents();a(this);return&nbsp;b};c.cloneContents=function(){return&nbsp;this.nativeRange.cloneContents()};c.surroundContents=function(b){this.nativeRange.surroundContents(b);a(this)};c.collapse=function(b){this.nativeRange.collapse(b);a(this)};c.cloneRange=function(){return&nbsp;new&nbsp;d(this.nativeRange.cloneRange())};c.refresh=function(){a(this)};c.toString=function(){return&nbsp;this.nativeRange.toString()};<a name="line_71"></a></li>
<li id="line_72" class="even"><span class="lineNumber">&nbsp;72&nbsp;</span>var&nbsp;i=document.createTextNode("test");e.getBody(document).appendChild(i);var&nbsp;q=document.createRange();q.setStart(i,0);q.setEnd(i,0);try{q.setStart(i,1),c.setStart=function(b,c){this.nativeRange.setStart(b,c);a(this)},c.setEnd=function(b,c){this.nativeRange.setEnd(b,c);a(this)},f=function(b){return&nbsp;function(c){this.nativeRange[b](c);a(this)}}}catch(r){c.setStart=function(b,c){try{this.nativeRange.setStart(b,c)}catch(d){this.nativeRange.setEnd(b,c),this.nativeRange.setStart(b,c)}a(this)},c.setEnd=function(b,<a name="line_72"></a></li>
<li id="line_73" class="odd"><span class="lineNumber">&nbsp;73&nbsp;</span>c){try{this.nativeRange.setEnd(b,c)}catch(d){this.nativeRange.setStart(b,c),this.nativeRange.setEnd(b,c)}a(this)},f=function(b,c){return&nbsp;function(d){try{this.nativeRange[b](d)}catch(e){this.nativeRange[c](d),this.nativeRange[b](d)}a(this)}}}c.setStartBefore=f("setStartBefore","setEndBefore");c.setStartAfter=f("setStartAfter","setEndAfter");c.setEndBefore=f("setEndBefore","setStartBefore");c.setEndAfter=f("setEndAfter","setStartAfter");q.selectNodeContents(i);c.selectNodeContents=q.startContainer==<a name="line_73"></a></li>
<li id="line_74" class="even"><span class="lineNumber">&nbsp;74&nbsp;</span>i&amp;&amp;q.endContainer==i&amp;&amp;0==q.startOffset&amp;&amp;q.endOffset==i.length?function(b){this.nativeRange.selectNodeContents(b);a(this)}:function(a){this.setStart(a,0);this.setEnd(a,g.getEndOffset(a))};q.selectNodeContents(i);q.setEnd(i,3);f=document.createRange();f.selectNodeContents(i);f.setEnd(i,4);f.setStart(i,2);c.compareBoundaryPoints=-1==q.compareBoundaryPoints(q.START_TO_END,f)&amp;1==q.compareBoundaryPoints(q.END_TO_START,f)?function(a,b){b=b.nativeRange||b;a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&amp;&amp;<a name="line_74"></a></li>
<li id="line_75" class="odd"><span class="lineNumber">&nbsp;75&nbsp;</span>(a=b.START_TO_END);return&nbsp;this.nativeRange.compareBoundaryPoints(a,b)}:function(a,b){return&nbsp;this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)};b.util.isHostMethod(q,"createContextualFragment")&amp;&amp;(c.createContextualFragment=function(a){return&nbsp;this.nativeRange.createContextualFragment(a)});e.getBody(document).removeChild(i);q.detach();f.detach()})(),b.createNativeRange=function(a){a=a||document;return&nbsp;a.createRange()};else&nbsp;if(b.features.implementsTextRange){d=function(a){this.textRange=a;this.refresh()};<a name="line_75"></a></li>
<li id="line_76" class="even"><span class="lineNumber">&nbsp;76&nbsp;</span>d.prototype=new&nbsp;g(document);d.prototype.refresh=function(){var&nbsp;a,b,d=this.textRange;a=d.parentElement();var&nbsp;f=d.duplicate();f.collapse(!0);b=f.parentElement();f=d.duplicate();f.collapse(!1);d=f.parentElement();b=b==d?b:e.getCommonAncestor(b,d);b=b==a?b:e.getCommonAncestor(a,b);0==this.textRange.compareEndPoints("StartToEnd",this.textRange)?b=a=c(this.textRange,b,!0,!0):(a=c(this.textRange,b,!0,!1),b=c(this.textRange,b,!1,!1));this.setStart(a.node,a.offset);this.setEnd(b.node,b.offset)};g.copyComparisonConstants(d);<a name="line_76"></a></li>
<li id="line_77" class="odd"><span class="lineNumber">&nbsp;77&nbsp;</span>var&nbsp;i=function(){return&nbsp;this}();"undefined"==typeof&nbsp;i.Range&amp;&amp;(i.Range=d);b.createNativeRange=function(a){a=a||document;return&nbsp;a.body.createTextRange()}}b.features.implementsTextRange&amp;&amp;(d.rangeToTextRange=function(b){if(b.collapsed)return&nbsp;a(new&nbsp;f(b.startContainer,b.startOffset),!0);var&nbsp;c=a(new&nbsp;f(b.startContainer,b.startOffset),!0),d=a(new&nbsp;f(b.endContainer,b.endOffset),!1),b=e.getDocument(b.startContainer).body.createTextRange();b.setEndPoint("StartToStart",c);b.setEndPoint("EndToEnd",d);return&nbsp;b});<a name="line_77"></a></li>
<li id="line_78" class="even"><span class="lineNumber">&nbsp;78&nbsp;</span>d.prototype.getName=function(){return"WrappedRange"};b.WrappedRange=d;b.createRange=function(a){a=a||document;return&nbsp;new&nbsp;d(b.createNativeRange(a))};b.createRangyRange=function(a){a=a||document;return&nbsp;new&nbsp;g(a)};b.createIframeRange=function(a){return&nbsp;b.createRange(e.getIframeDocument(a))};b.createIframeRangyRange=function(a){return&nbsp;b.createRangyRange(e.getIframeDocument(a))};b.addCreateMissingNativeApiListener(function(a){a=a.document;if(typeof&nbsp;a.createRange=="undefined")a.createRange=function(){return&nbsp;b.createRange(this)};<a name="line_78"></a></li>
<li id="line_79" class="odd"><span class="lineNumber">&nbsp;79&nbsp;</span>a=a=null})});<a name="line_79"></a></li>
<li id="line_80" class="even"><span class="lineNumber">&nbsp;80&nbsp;</span>rangy.createModule("WrappedSelection",function(b,c){function&nbsp;a(a){return(a||window).getSelection()}function&nbsp;d(a){return(a||window).document.selection}function&nbsp;e(a,b,c){var&nbsp;d=c?"end":"start",c=c?"start":"end";a.anchorNode=b[d+"Container"];a.anchorOffset=b[d+"Offset"];a.focusNode=b[c+"Container"];a.focusOffset=b[c+"Offset"]}function&nbsp;f(a){a.anchorNode=a.focusNode=null;a.anchorOffset=a.focusOffset=0;a.rangeCount=0;a.isCollapsed=!0;a._ranges.length=0}function&nbsp;g(a){var&nbsp;c;a&nbsp;instanceof&nbsp;x?(c=a._selectionNativeRange,<a name="line_80"></a></li>
<li id="line_81" class="odd"><span class="lineNumber">&nbsp;81&nbsp;</span>c||(c=b.createNativeRange(m.getDocument(a.startContainer)),c.setEnd(a.endContainer,a.endOffset),c.setStart(a.startContainer,a.startOffset),a._selectionNativeRange=c,a.attachListener("detach",function(){this._selectionNativeRange=null}))):a&nbsp;instanceof&nbsp;o?c=a.nativeRange:b.features.implementsDomRange&amp;&amp;a&nbsp;instanceof&nbsp;m.getWindow(a.startContainer).Range&amp;&amp;(c=a);return&nbsp;c}function&nbsp;i(a){var&nbsp;b=a.getNodes(),c;a:if(!b.length||1!=b[0].nodeType)c=!1;else{c=1;for(var&nbsp;d=b.length;c&lt;d;++c)if(!m.isAncestorOf(b[0],b[c])){c=<a name="line_81"></a></li>
<li id="line_82" class="even"><span class="lineNumber">&nbsp;82&nbsp;</span>!1;break&nbsp;a}c=!0}if(!c)throw&nbsp;Error("getSingleElementFromRange:&nbsp;range&nbsp;"+a.inspect()+"&nbsp;did&nbsp;not&nbsp;consist&nbsp;of&nbsp;a&nbsp;single&nbsp;element");return&nbsp;b[0]}function&nbsp;h(a,b){var&nbsp;c=new&nbsp;o(b);a._ranges=[c];e(a,c,!1);a.rangeCount=1;a.isCollapsed=c.collapsed}function&nbsp;k(a){a._ranges.length=0;if("None"==a.docSelection.type)f(a);else{var&nbsp;c=a.docSelection.createRange();if(c&amp;&amp;"undefined"!=typeof&nbsp;c.text)h(a,c);else{a.rangeCount=c.length;for(var&nbsp;d,j=m.getDocument(c.item(0)),k=0;k&lt;a.rangeCount;++k)d=b.createRange(j),d.selectNode(c.item(k)),<a name="line_82"></a></li>
<li id="line_83" class="odd"><span class="lineNumber">&nbsp;83&nbsp;</span>a._ranges.push(d);a.isCollapsed=1==a.rangeCount&amp;&amp;a._ranges[0].collapsed;e(a,a._ranges[a.rangeCount-1],!1)}}}function&nbsp;j(a,b){for(var&nbsp;c=a.docSelection.createRange(),d=i(b),e=m.getDocument(c.item(0)),e=m.getBody(e).createControlRange(),h=0,j=c.length;h&lt;j;++h)e.add(c.item(h));try{e.add(d)}catch(f){throw&nbsp;Error("addRange():&nbsp;Element&nbsp;within&nbsp;the&nbsp;specified&nbsp;Range&nbsp;could&nbsp;not&nbsp;be&nbsp;added&nbsp;to&nbsp;control&nbsp;selection&nbsp;(does&nbsp;it&nbsp;have&nbsp;layout?)");}e.select();k(a)}function&nbsp;n(a,b,c){this.nativeSelection=a;this.docSelection=b;this._ranges=<a name="line_83"></a></li>
<li id="line_84" class="even"><span class="lineNumber">&nbsp;84&nbsp;</span>[];this.win=c;this.refresh()}function&nbsp;p(a,b){for(var&nbsp;c=m.getDocument(b[0].startContainer),c=m.getBody(c).createControlRange(),d=0,e;d&lt;rangeCount;++d){e=i(b[d]);try{c.add(e)}catch(h){throw&nbsp;Error("setRanges():&nbsp;Element&nbsp;within&nbsp;the&nbsp;one&nbsp;of&nbsp;the&nbsp;specified&nbsp;Ranges&nbsp;could&nbsp;not&nbsp;be&nbsp;added&nbsp;to&nbsp;control&nbsp;selection&nbsp;(does&nbsp;it&nbsp;have&nbsp;layout?)");}}c.select();k(a)}function&nbsp;q(a,b){if(a.anchorNode&amp;&amp;m.getDocument(a.anchorNode)!==m.getDocument(b))throw&nbsp;new&nbsp;z("WRONG_DOCUMENT_ERR");}function&nbsp;r(a){var&nbsp;b=[],c=new&nbsp;w(a.anchorNode,a.anchorOffset),<a name="line_84"></a></li>
<li id="line_85" class="odd"><span class="lineNumber">&nbsp;85&nbsp;</span>d=new&nbsp;w(a.focusNode,a.focusOffset),e="function"==typeof&nbsp;a.getName?a.getName():"Selection";if("undefined"!=typeof&nbsp;a.rangeCount)for(var&nbsp;h=0,j=a.rangeCount;h&lt;j;++h)b[h]=x.inspect(a.getRangeAt(h));return"["+e+"(Ranges:&nbsp;"+b.join(",&nbsp;")+")(anchor:&nbsp;"+c.inspect()+",&nbsp;focus:&nbsp;"+d.inspect()+"]"}b.requireModules(["DomUtil","DomRange","WrappedRange"]);b.config.checkSelectionRanges=!0;var&nbsp;m=b.dom,s=b.util,x=b.DomRange,o=b.WrappedRange,z=b.DOMException,w=m.DomPosition,y,A,t=b.util.isHostMethod(window,"getSelection"),<a name="line_85"></a></li>
<li id="line_86" class="even"><span class="lineNumber">&nbsp;86&nbsp;</span>v=b.util.isHostObject(document,"selection"),D=v&amp;&amp;(!t||b.config.preferTextRange);D?(y=d,b.isSelectionValid=function(a){var&nbsp;a=(a||window).document,b=a.selection;return"None"!=b.type||m.getDocument(b.createRange().parentElement())==a}):t?(y=a,b.isSelectionValid=function(){return!0}):c.fail("Neither&nbsp;document.selection&nbsp;or&nbsp;window.getSelection()&nbsp;detected.");b.getNativeSelection=y;var&nbsp;t=y(),K=b.createNativeRange(document),F=m.getBody(document),E=s.areHostObjects(t,s.areHostProperties(t,["anchorOffset","focusOffset"]));<a name="line_86"></a></li>
<li id="line_87" class="odd"><span class="lineNumber">&nbsp;87&nbsp;</span>b.features.selectionHasAnchorAndFocus=E;var&nbsp;I=s.isHostMethod(t,"extend");b.features.selectionHasExtend=I;var&nbsp;N="number"==typeof&nbsp;t.rangeCount;b.features.selectionHasRangeCount=N;var&nbsp;J=!1,C=!0;s.areHostMethods(t,["addRange","getRangeAt","removeAllRanges"])&amp;&amp;("number"==typeof&nbsp;t.rangeCount&amp;&amp;b.features.implementsDomRange)&amp;&amp;function(){var&nbsp;a=document.createElement("iframe");F.appendChild(a);var&nbsp;b=m.getIframeDocument(a);b.open();b.write("&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;12&lt;/body&gt;&lt;/html&gt;");b.close();var&nbsp;c=m.getIframeWindow(a).getSelection(),<a name="line_87"></a></li>
<li id="line_88" class="even"><span class="lineNumber">&nbsp;88&nbsp;</span>d=b.documentElement.lastChild.firstChild,b=b.createRange();b.setStart(d,1);b.collapse(true);c.addRange(b);C=c.rangeCount==1;c.removeAllRanges();var&nbsp;e=b.cloneRange();b.setStart(d,0);e.setEnd(d,2);c.addRange(b);c.addRange(e);J=c.rangeCount==2;b.detach();e.detach();F.removeChild(a)}();b.features.selectionSupportsMultipleRanges=J;b.features.collapsedNonEditableSelectionsSupported=C;var&nbsp;l=!1,u;F&amp;&amp;s.isHostMethod(F,"createControlRange")&amp;&amp;(u=F.createControlRange(),s.areHostProperties(u,["item","add"])&amp;&amp;(l=<a name="line_88"></a></li>
<li id="line_89" class="odd"><span class="lineNumber">&nbsp;89&nbsp;</span>!0));b.features.implementsControlRange=l;A=E?function(a){return&nbsp;a.anchorNode===a.focusNode&amp;&amp;a.anchorOffset===a.focusOffset}:function(a){return&nbsp;a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:false};var&nbsp;B;s.isHostMethod(t,"getRangeAt")?B=function(a,b){try{return&nbsp;a.getRangeAt(b)}catch(c){return&nbsp;null}}:E&amp;&amp;(B=function(a){var&nbsp;c=m.getDocument(a.anchorNode),c=b.createRange(c);c.setStart(a.anchorNode,a.anchorOffset);c.setEnd(a.focusNode,a.focusOffset);if(c.collapsed!==this.isCollapsed){c.setStart(a.focusNode,<a name="line_89"></a></li>
<li id="line_90" class="even"><span class="lineNumber">&nbsp;90&nbsp;</span>a.focusOffset);c.setEnd(a.anchorNode,a.anchorOffset)}return&nbsp;c});b.getSelection=function(a){var&nbsp;a=a||window,b=a._rangySelection,c=y(a),e=v?d(a):null;if(b){b.nativeSelection=c;b.docSelection=e;b.refresh(a)}else{b=new&nbsp;n(c,e,a);a._rangySelection=b}return&nbsp;b};b.getIframeSelection=function(a){return&nbsp;b.getSelection(m.getIframeWindow(a))};u=n.prototype;if(!D&amp;&amp;E&amp;&amp;s.areHostMethods(t,["removeAllRanges","addRange"])){u.removeAllRanges=function(){this.nativeSelection.removeAllRanges();f(this)};var&nbsp;L=function(a,<a name="line_90"></a></li>
<li id="line_91" class="odd"><span class="lineNumber">&nbsp;91&nbsp;</span>c){var&nbsp;d=x.getRangeDocument(c),d=b.createRange(d);d.collapseToPoint(c.endContainer,c.endOffset);a.nativeSelection.addRange(g(d));a.nativeSelection.extend(c.startContainer,c.startOffset);a.refresh()};u.addRange=N?function(a,c){if(l&amp;&amp;v&amp;&amp;this.docSelection.type=="Control")j(this,a);else&nbsp;if(c&amp;&amp;I)L(this,a);else{var&nbsp;d;if(J)d=this.rangeCount;else{this.removeAllRanges();d=0}this.nativeSelection.addRange(g(a));this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==d+1){if(b.config.checkSelectionRanges)(d=<a name="line_91"></a></li>
<li id="line_92" class="even"><span class="lineNumber">&nbsp;92&nbsp;</span>B(this.nativeSelection,this.rangeCount-1))&amp;&amp;!x.rangesEqual(d,a)&amp;&amp;(a=new&nbsp;o(d));this._ranges[this.rangeCount-1]=a;e(this,a,H(this.nativeSelection));this.isCollapsed=A(this)}else&nbsp;this.refresh()}}:function(a,b){if(b&amp;&amp;I)L(this,a);else{this.nativeSelection.addRange(g(a));this.refresh()}};u.setRanges=function(a){if(l&amp;&amp;a.length&gt;1)p(this,a);else{this.removeAllRanges();for(var&nbsp;b=0,c=a.length;b&lt;c;++b)this.addRange(a[b])}}}else&nbsp;if(s.isHostMethod(t,"empty")&amp;&amp;s.isHostMethod(K,"select")&amp;&amp;l&amp;&amp;D)u.removeAllRanges=<a name="line_92"></a></li>
<li id="line_93" class="odd"><span class="lineNumber">&nbsp;93&nbsp;</span>function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var&nbsp;a;if(this.anchorNode)a=m.getDocument(this.anchorNode);else&nbsp;if(this.docSelection.type=="Control"){var&nbsp;b=this.docSelection.createRange();b.length&amp;&amp;(a=m.getDocument(b.item(0)).body.createTextRange())}if(a){a.body.createTextRange().select();this.docSelection.empty()}}}catch(c){}f(this)},u.addRange=function(a){if(this.docSelection.type=="Control")j(this,a);else{o.rangeToTextRange(a).select();this._ranges[0]=a;this.rangeCount=<a name="line_93"></a></li>
<li id="line_94" class="even"><span class="lineNumber">&nbsp;94&nbsp;</span>1;this.isCollapsed=this._ranges[0].collapsed;e(this,a,false)}},u.setRanges=function(a){this.removeAllRanges();var&nbsp;b=a.length;b&gt;1?p(this,a):b&amp;&amp;this.addRange(a[0])};else&nbsp;return&nbsp;c.fail("No&nbsp;means&nbsp;of&nbsp;selecting&nbsp;a&nbsp;Range&nbsp;or&nbsp;TextRange&nbsp;was&nbsp;found"),!1;u.getRangeAt=function(a){if(a&lt;0||a&gt;=this.rangeCount)throw&nbsp;new&nbsp;z("INDEX_SIZE_ERR");return&nbsp;this._ranges[a]};var&nbsp;G;if(D)G=function(a){var&nbsp;c;if(b.isSelectionValid(a.win))c=a.docSelection.createRange();else{c=m.getBody(a.win.document).createTextRange();c.collapse(true)}a.docSelection.type==<a name="line_94"></a></li>
<li id="line_95" class="odd"><span class="lineNumber">&nbsp;95&nbsp;</span>"Control"?k(a):c&amp;&amp;typeof&nbsp;c.text!="undefined"?h(a,c):f(a)};else&nbsp;if(s.isHostMethod(t,"getRangeAt")&amp;&amp;"number"==typeof&nbsp;t.rangeCount)G=function(a){if(l&amp;&amp;v&amp;&amp;a.docSelection.type=="Control")k(a);else{a._ranges.length=a.rangeCount=a.nativeSelection.rangeCount;if(a.rangeCount){for(var&nbsp;c=0,d=a.rangeCount;c&lt;d;++c)a._ranges[c]=new&nbsp;b.WrappedRange(a.nativeSelection.getRangeAt(c));e(a,a._ranges[a.rangeCount-1],H(a.nativeSelection));a.isCollapsed=A(a)}else&nbsp;f(a)}};else&nbsp;if(E&amp;&amp;"boolean"==typeof&nbsp;t.isCollapsed&amp;&amp;"boolean"==<a name="line_95"></a></li>
<li id="line_96" class="even"><span class="lineNumber">&nbsp;96&nbsp;</span>typeof&nbsp;K.collapsed&amp;&amp;b.features.implementsDomRange)G=function(a){var&nbsp;b;b=a.nativeSelection;if(b.anchorNode){b=B(b,0);a._ranges=[b];a.rangeCount=1;b=a.nativeSelection;a.anchorNode=b.anchorNode;a.anchorOffset=b.anchorOffset;a.focusNode=b.focusNode;a.focusOffset=b.focusOffset;a.isCollapsed=A(a)}else&nbsp;f(a)};else&nbsp;return&nbsp;c.fail("No&nbsp;means&nbsp;of&nbsp;obtaining&nbsp;a&nbsp;Range&nbsp;or&nbsp;TextRange&nbsp;from&nbsp;the&nbsp;user's&nbsp;selection&nbsp;was&nbsp;found"),!1;u.refresh=function(a){var&nbsp;b=a?this._ranges.slice(0):null;G(this);if(a){a=b.length;if(a!=this._ranges.length)return&nbsp;false;<a name="line_96"></a></li>
<li id="line_97" class="odd"><span class="lineNumber">&nbsp;97&nbsp;</span>for(;a--;)if(!x.rangesEqual(b[a],this._ranges[a]))return&nbsp;false;return&nbsp;true}};var&nbsp;P=function(a,b){var&nbsp;c=a.getAllRanges(),d=false;a.removeAllRanges();for(var&nbsp;e=0,h=c.length;e&lt;h;++e)d||b!==c[e]?a.addRange(c[e]):d=true;a.rangeCount||f(a)};u.removeRange=l?function(a){if(this.docSelection.type=="Control"){for(var&nbsp;b=this.docSelection.createRange(),a=i(a),c=m.getDocument(b.item(0)),c=m.getBody(c).createControlRange(),d,e=false,h=0,j=b.length;h&lt;j;++h){d=b.item(h);d!==a||e?c.add(b.item(h)):e=true}c.select();<a name="line_97"></a></li>
<li id="line_98" class="even"><span class="lineNumber">&nbsp;98&nbsp;</span>k(this)}else&nbsp;P(this,a)}:function(a){P(this,a)};var&nbsp;H;!D&amp;&amp;E&amp;&amp;b.features.implementsDomRange?(H=function(a){var&nbsp;b=false;a.anchorNode&amp;&amp;(b=m.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)==1);return&nbsp;b},u.isBackwards=function(){return&nbsp;H(this)}):H=u.isBackwards=function(){return&nbsp;false};u.toString=function(){for(var&nbsp;a=[],b=0,c=this.rangeCount;b&lt;c;++b)a[b]=""+this._ranges[b];return&nbsp;a.join("")};u.collapse=function(a,c){q(this,a);var&nbsp;d=b.createRange(m.getDocument(a));d.collapseToPoint(a,<a name="line_98"></a></li>
<li id="line_99" class="odd"><span class="lineNumber">&nbsp;99&nbsp;</span>c);this.removeAllRanges();this.addRange(d);this.isCollapsed=true};u.collapseToStart=function(){if(this.rangeCount){var&nbsp;a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)}else&nbsp;throw&nbsp;new&nbsp;z("INVALID_STATE_ERR");};u.collapseToEnd=function(){if(this.rangeCount){var&nbsp;a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)}else&nbsp;throw&nbsp;new&nbsp;z("INVALID_STATE_ERR");};u.selectAllChildren=function(a){q(this,a);var&nbsp;c=b.createRange(m.getDocument(a));c.selectNodeContents(a);this.removeAllRanges();<a name="line_99"></a></li>
<li id="line_100" class="even"><span class="lineNumber">100&nbsp;</span>this.addRange(c)};u.deleteFromDocument=function(){if(l&amp;&amp;v&amp;&amp;this.docSelection.type=="Control"){for(var&nbsp;a=this.docSelection.createRange(),b;a.length;){b=a.item(0);a.remove(b);b.parentNode.removeChild(b)}this.refresh()}else&nbsp;if(this.rangeCount){a=this.getAllRanges();this.removeAllRanges();b=0;for(var&nbsp;c=a.length;b&lt;c;++b)a[b].deleteContents();this.addRange(a[c-1])}};u.getAllRanges=function(){return&nbsp;this._ranges.slice(0)};u.setSingleRange=function(a){this.setRanges([a])};u.containsNode=function(a,b){for(var&nbsp;c=<a name="line_100"></a></li>
<li id="line_101" class="odd"><span class="lineNumber">101&nbsp;</span>0,d=this._ranges.length;c&lt;d;++c)if(this._ranges[c].containsNode(a,b))return&nbsp;true;return&nbsp;false};u.toHtml=function(){var&nbsp;a="";if(this.rangeCount){for(var&nbsp;a=x.getRangeDocument(this._ranges[0]).createElement("div"),b=0,c=this._ranges.length;b&lt;c;++b)a.appendChild(this._ranges[b].cloneContents());a=a.innerHTML}return&nbsp;a};u.getName=function(){return"WrappedSelection"};u.inspect=function(){return&nbsp;r(this)};u.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null};n.inspect=<a name="line_101"></a></li>
<li id="line_102" class="even"><span class="lineNumber">102&nbsp;</span>r;b.Selection=n;b.selectionPrototype=u;b.addCreateMissingNativeApiListener(function(a){if(typeof&nbsp;a.getSelection=="undefined")a.getSelection=function(){return&nbsp;b.getSelection(this)};a=null})});var&nbsp;Base=function(){};<a name="line_102"></a></li>
<li id="line_103" class="odd"><span class="lineNumber">103&nbsp;</span>Base.extend=function(b,c){var&nbsp;a=Base.prototype.extend;Base._prototyping=!0;var&nbsp;d=new&nbsp;this;a.call(d,b);d.base=function(){};delete&nbsp;Base._prototyping;var&nbsp;e=d.constructor,f=d.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==f)this._constructing=!0,e.apply(this,arguments),delete&nbsp;this._constructing;else&nbsp;if(null!=arguments[0])return(arguments[0].extend||a).call(arguments[0],d)};f.ancestor=this;f.extend=this.extend;f.forEach=this.forEach;f.implement=this.implement;f.prototype=<a name="line_103"></a></li>
<li id="line_104" class="even"><span class="lineNumber">104&nbsp;</span>d;f.toString=this.toString;f.valueOf=function(a){return"object"==a?f:e.valueOf()};a.call(f,c);"function"==typeof&nbsp;f.init&amp;&amp;f.init();return&nbsp;f};<a name="line_104"></a></li>
<li id="line_105" class="odd"><span class="lineNumber">105&nbsp;</span>Base.prototype={extend:function(b,c){if(1&lt;arguments.length){var&nbsp;a=this[b];if(a&amp;&amp;"function"==typeof&nbsp;c&amp;&amp;(!a.valueOf||a.valueOf()!=c.valueOf())&amp;&amp;/\bbase\b/.test(c)){var&nbsp;d=c.valueOf(),c=function(){var&nbsp;b=this.base||Base.prototype.base;this.base=a;var&nbsp;c=d.apply(this,arguments);this.base=b;return&nbsp;c};c.valueOf=function(a){return"object"==a?c:d};c.toString=Base.toString}this[b]=c}else&nbsp;if(b){var&nbsp;e=Base.prototype.extend;!Base._prototyping&amp;&amp;"function"!=typeof&nbsp;this&amp;&amp;(e=this.extend||e);for(var&nbsp;f={toSource:null},<a name="line_105"></a></li>
<li id="line_106" class="even"><span class="lineNumber">106&nbsp;</span>g=["constructor","toString","valueOf"],i=Base._prototyping?0:1;h=g[i++];)b[h]!=f[h]&amp;&amp;e.call(this,h,b[h]);for(var&nbsp;h&nbsp;in&nbsp;b)f[h]||e.call(this,h,b[h])}return&nbsp;this}};<a name="line_106"></a></li>
<li id="line_107" class="odd"><span class="lineNumber">107&nbsp;</span>Base=Base.extend({constructor:function(b){this.extend(b)}},{ancestor:Object,version:"1.1",forEach:function(b,c,a){for(var&nbsp;d&nbsp;in&nbsp;b)void&nbsp;0===this.prototype[d]&amp;&amp;c.call(a,b[d],d,b)},implement:function(){for(var&nbsp;b=0;b&lt;arguments.length;b++)if("function"==typeof&nbsp;arguments[b])arguments[b](this.prototype);else&nbsp;this.prototype.extend(arguments[b]);return&nbsp;this},toString:function(){return""+this.valueOf()}});<a name="line_107"></a></li>
<li id="line_108" class="even"><span class="lineNumber">108&nbsp;</span>wysihtml5.browser=function(){var&nbsp;b=navigator.userAgent,c=document.createElement("div"),a=-1!==b.indexOf("MSIE")&amp;&amp;-1===b.indexOf("Opera"),d=-1!==b.indexOf("Gecko")&amp;&amp;-1===b.indexOf("KHTML"),e=-1!==b.indexOf("AppleWebKit/"),f=-1!==b.indexOf("Chrome/"),g=-1!==b.indexOf("Opera/");return{USER_AGENT:b,supported:function(){var&nbsp;a=this.USER_AGENT.toLowerCase(),b="contentEditable"in&nbsp;c,d=document.execCommand&amp;&amp;document.queryCommandSupported&amp;&amp;document.queryCommandState,e=document.querySelector&amp;&amp;document.querySelectorAll,<a name="line_108"></a></li>
<li id="line_109" class="odd"><span class="lineNumber">109&nbsp;</span>a=this.isIos()&amp;&amp;5&gt;(/ipad|iphone|ipod/.test(a)&amp;&amp;a.match(/&nbsp;os&nbsp;(\d+).+?&nbsp;like&nbsp;mac&nbsp;os&nbsp;x/)||[,0])[1]||-1!==a.indexOf("opera&nbsp;mobi")||-1!==a.indexOf("hpwos/");return&nbsp;b&amp;&amp;d&amp;&amp;e&amp;&amp;!a},isTouchDevice:function(){return&nbsp;this.supportsEvent("touchmove")},isIos:function(){var&nbsp;a=this.USER_AGENT.toLowerCase();return-1!==a.indexOf("webkit")&amp;&amp;-1!==a.indexOf("mobile")},supportsSandboxedIframes:function(){return&nbsp;a},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in&nbsp;document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!d},<a name="line_109"></a></li>
<li id="line_110" class="even"><span class="lineNumber">110&nbsp;</span>hasCurrentStyleProperty:function(){return"currentStyle"in&nbsp;c},insertsLineBreaksOnReturn:function(){return&nbsp;d},supportsPlaceholderAttributeOn:function(a){return"placeholder"in&nbsp;a},supportsEvent:function(a){var&nbsp;b;if(!(b="on"+a&nbsp;in&nbsp;c))c.setAttribute("on"+a,"return;"),b="function"===typeof&nbsp;c["on"+a];return&nbsp;b},supportsEventsInIframeCorrectly:function(){return!g},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return&nbsp;e||d},supportsDataTransfer:function(){try{return&nbsp;e&amp;&amp;(window.Clipboard||window.DataTransfer).prototype.getData}catch(a){return!1}},<a name="line_110"></a></li>
<li id="line_111" class="odd"><span class="lineNumber">111&nbsp;</span>supportsHTML5Tags:function(a){a=a.createElement("div");a.innerHTML="&lt;article&gt;foo&lt;/article&gt;";return"&lt;article&gt;foo&lt;/article&gt;"===a.innerHTML.toLowerCase()},supportsCommand:function(){var&nbsp;b={formatBlock:a,insertUnorderedList:a||g||e,insertOrderedList:a||g||e},c={insertHTML:d};return&nbsp;function(a,d){if(!b[d]){try{return&nbsp;a.queryCommandSupported(d)}catch(e){}try{return&nbsp;a.queryCommandEnabled(d)}catch(f){return!!c[d]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return&nbsp;a},canDisableAutoLinking:function(){return&nbsp;this.supportsCommand(document,<a name="line_111"></a></li>
<li id="line_112" class="even"><span class="lineNumber">112&nbsp;</span>"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return&nbsp;d||g||e},supportsGetAttributeCorrectly:function(){return"1"!=document.createElement("td").getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return&nbsp;d||a||g},clearsListsInContentEditableCorrectly:function(){return&nbsp;d||a||e},autoScrollsToCaret:function(){return!e},autoClosesUnclosedTags:function(){var&nbsp;a=c.cloneNode(!1),b;a.innerHTML="&lt;p&gt;&lt;div&gt;&lt;/div&gt;";a=a.innerHTML.toLowerCase();b="&lt;p&gt;&lt;/p&gt;&lt;div&gt;&lt;/div&gt;"===a||"&lt;p&gt;&lt;div&gt;&lt;/div&gt;&lt;/p&gt;"===<a name="line_112"></a></li>
<li id="line_113" class="odd"><span class="lineNumber">113&nbsp;</span>a;this.autoClosesUnclosedTags=function(){return&nbsp;b};return&nbsp;b},supportsNativeGetElementsByClassName:function(){return-1!==(""+document.getElementsByClassName).indexOf("[native&nbsp;code]")},supportsSelectionModify:function(){return"getSelection"in&nbsp;window&amp;&amp;"modify"in&nbsp;window.getSelection()},supportsClassList:function(){return"classList"in&nbsp;c},needsSpaceAfterLineBreak:function(){return&nbsp;g},supportsSpeechApiOn:function(a){return&nbsp;11&lt;=(b.match(/Chrome\/(\d+)/)||[,0])[1]&amp;&amp;("onwebkitspeechchange"in&nbsp;a||"speech"in&nbsp;a)},<a name="line_113"></a></li>
<li id="line_114" class="even"><span class="lineNumber">114&nbsp;</span>crashesWhenDefineProperty:function(b){return&nbsp;a&amp;&amp;("XMLHttpRequest"===b||"XDomainRequest"===b)},doesAsyncFocus:function(){return&nbsp;a},hasProblemsSettingCaretAfterImg:function(){return&nbsp;a},hasUndoInContextMenu:function(){return&nbsp;d||f||g}}}();<a name="line_114"></a></li>
<li id="line_115" class="odd"><span class="lineNumber">115&nbsp;</span>wysihtml5.lang.array=function(b){return{contains:function(c){if(b.indexOf)return-1!==b.indexOf(c);for(var&nbsp;a=0,d=b.length;a&lt;d;a++)if(b[a]===c)return!0;return!1},without:function(c){for(var&nbsp;c=wysihtml5.lang.array(c),a=[],d=0,e=b.length;d&lt;e;d++)c.contains(b[d])||a.push(b[d]);return&nbsp;a},get:function(){for(var&nbsp;c=0,a=b.length,d=[];c&lt;a;c++)d.push(b[c]);return&nbsp;d}}};<a name="line_115"></a></li>
<li id="line_116" class="even"><span class="lineNumber">116&nbsp;</span>wysihtml5.lang.Dispatcher=Base.extend({observe:function(b,c){this.events=this.events||{};this.events[b]=this.events[b]||[];this.events[b].push(c);return&nbsp;this},on:function(){return&nbsp;this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(b,c){this.events=this.events||{};for(var&nbsp;a=this.events[b]||[],d=0;d&lt;a.length;d++)a[d].call(this,c);return&nbsp;this},stopObserving:function(b,c){this.events=this.events||{};var&nbsp;a=0,d,e;if(b){d=this.events[b]||[];for(e=[];a&lt;d.length;a++)d[a]!==c&amp;&amp;c&amp;&amp;<a name="line_116"></a></li>
<li id="line_117" class="odd"><span class="lineNumber">117&nbsp;</span>e.push(d[a]);this.events[b]=e}else&nbsp;this.events={};return&nbsp;this}});wysihtml5.lang.object=function(b){return{merge:function(c){for(var&nbsp;a&nbsp;in&nbsp;c)b[a]=c[a];return&nbsp;this},get:function(){return&nbsp;b},clone:function(){var&nbsp;c={},a;for(a&nbsp;in&nbsp;b)c[a]=b[a];return&nbsp;c},isArray:function(){return"[object&nbsp;Array]"===Object.prototype.toString.call(b)}}};<a name="line_117"></a></li>
<li id="line_118" class="even"><span class="lineNumber">118&nbsp;</span>(function(){var&nbsp;b=/^\s+/,c=/\s+$/;wysihtml5.lang.string=function(a){a=""+a;return{trim:function(){return&nbsp;a.replace(b,"").replace(c,"")},interpolate:function(b){for(var&nbsp;c&nbsp;in&nbsp;b)a=this.replace("#{"+c+"}").by(b[c]);return&nbsp;a},replace:function(b){return{by:function(c){return&nbsp;a.split(b).join(c)}}}}}})();<a name="line_118"></a></li>
<li id="line_119" class="odd"><span class="lineNumber">119&nbsp;</span>(function(b){function&nbsp;c(a){return&nbsp;a.replace(e,function(a,b){var&nbsp;c=(b.match(f)||[])[1]||"",d=i[c],b=b.replace(f,"");b.split(d).length&gt;b.split(c).length&amp;&amp;(b+=c,c="");var&nbsp;e=d=b;b.length&gt;g&amp;&amp;(e=e.substr(0,g)+"...");"www."===d.substr(0,4)&amp;&amp;(d="http://"+d);return'&lt;a&nbsp;href="'+d+'"&gt;'+e+"&lt;/a&gt;"+c})}function&nbsp;a(h){if(!d.contains(h.nodeName))if(h.nodeType===b.TEXT_NODE&amp;&amp;h.data.match(e)){var&nbsp;f=h.parentNode,j;j=f.ownerDocument;var&nbsp;g=j._wysihtml5_tempElement;g||(g=j._wysihtml5_tempElement=j.createElement("div"));j=<a name="line_119"></a></li>
<li id="line_120" class="even"><span class="lineNumber">120&nbsp;</span>g;j.innerHTML="&lt;span&gt;&lt;/span&gt;"+c(h.data);for(j.removeChild(j.firstChild);j.firstChild;)f.insertBefore(j.firstChild,h);f.removeChild(h)}else{f=b.lang.array(h.childNodes).get();j=f.length;for(g=0;g&lt;j;g++)a(f[g]);return&nbsp;h}}var&nbsp;d=b.lang.array("CODE&nbsp;PRE&nbsp;A&nbsp;SCRIPT&nbsp;HEAD&nbsp;TITLE&nbsp;STYLE".split("&nbsp;")),e=/((https?:\/\/|www\.)[^\s&lt;]{3,})/gi,f=/([^\w\/\-](,?))$/i,g=100,i={")":"(","]":"[","}":"{"};b.dom.autoLink=function(b){var&nbsp;c;a:{c=b;for(var&nbsp;e;c.parentNode;){c=c.parentNode;e=c.nodeName;if(d.contains(e)){c=!0;break&nbsp;a}if("body"===<a name="line_120"></a></li>
<li id="line_121" class="odd"><span class="lineNumber">121&nbsp;</span>e)break}c=!1}if(c)return&nbsp;b;b===b.ownerDocument.documentElement&amp;&amp;(b=b.ownerDocument.body);return&nbsp;a(b)};b.dom.autoLink.URL_REG_EXP=e})(wysihtml5);<a name="line_121"></a></li>
<li id="line_122" class="even"><span class="lineNumber">122&nbsp;</span>(function(b){var&nbsp;c=b.browser.supportsClassList(),a=b.dom;a.addClass=function(b,e){if(c)return&nbsp;b.classList.add(e);a.hasClass(b,e)||(b.className+="&nbsp;"+e)};a.removeClass=function(a,b){if(c)return&nbsp;a.classList.remove(b);a.className=a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"&nbsp;")};a.hasClass=function(a,b){if(c)return&nbsp;a.classList.contains(b);var&nbsp;f=a.className;return&nbsp;0&lt;f.length&amp;&amp;(f==b||RegExp("(^|\\s)"+b+"(\\s|$)").test(f))}})(wysihtml5);<a name="line_122"></a></li>
<li id="line_123" class="odd"><span class="lineNumber">123&nbsp;</span>wysihtml5.dom.contains=function(){var&nbsp;b=document.documentElement;if(b.contains)return&nbsp;function(b,a){a.nodeType!==wysihtml5.ELEMENT_NODE&amp;&amp;(a=a.parentNode);return&nbsp;b!==a&amp;&amp;b.contains(a)};if(b.compareDocumentPosition)return&nbsp;function(b,a){return!!(b.compareDocumentPosition(a)&amp;16)}}();<a name="line_123"></a></li>
<li id="line_124" class="even"><span class="lineNumber">124&nbsp;</span>wysihtml5.dom.convertToList=function(){function&nbsp;b(b,a){var&nbsp;d=b.createElement("li");a.appendChild(d);return&nbsp;d}return&nbsp;function(c,a){if("UL"===c.nodeName||"OL"===c.nodeName||"MENU"===c.nodeName)return&nbsp;c;var&nbsp;d=c.ownerDocument,e=d.createElement(a),f=c.querySelectorAll("br"),g=f.length,i,h,k,j,n;for(n=0;n&lt;g;n++)for(i=f[n];(h=i.parentNode)&amp;&amp;h!==c&amp;&amp;h.lastChild===i;){if("block"===wysihtml5.dom.getStyle("display").from(h)){h.removeChild(i);break}wysihtml5.dom.insert(i).after(i.parentNode)}f=wysihtml5.lang.array(c.childNodes).get();<a name="line_124"></a></li>
<li id="line_125" class="odd"><span class="lineNumber">125&nbsp;</span>g=f.length;for(n=0;n&lt;g;n++)j=j||b(d,e),i=f[n],h="block"===wysihtml5.dom.getStyle("display").from(i),k="BR"===i.nodeName,h?(j=j.firstChild?b(d,e):j,j.appendChild(i),j=null):k?j=j.firstChild?null:j:j.appendChild(i);c.parentNode.replaceChild(e,c);return&nbsp;e}}();wysihtml5.dom.copyAttributes=function(b){return{from:function(c){return{to:function(a){for(var&nbsp;d,e=0,f=b.length;e&lt;f;e++)d=b[e],"undefined"!==typeof&nbsp;c[d]&amp;&amp;""!==c[d]&amp;&amp;(a[d]=c[d]);return{andTo:arguments.callee}}}}}};<a name="line_125"></a></li>
<li id="line_126" class="even"><span class="lineNumber">126&nbsp;</span>(function(b){var&nbsp;c=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],a=function(a){var&nbsp;e;a:for(var&nbsp;f=0,g=c.length;f&lt;g;f++)if("border-box"===b.getStyle(c[f]).from(a)){e=c[f];break&nbsp;a}return&nbsp;e?parseInt(b.getStyle("width").from(a),10)&lt;a.offsetWidth:!1};b.copyStyles=function(d){return{from:function(e){a(e)&amp;&amp;(d=wysihtml5.lang.array(d).without(c));for(var&nbsp;f="",g=d.length,i=0,h;i&lt;g;i++)h=d[i],f+=h+":"+b.getStyle(h).from(e)+";";return{to:function(a){b.setStyles(f).on(a);return{andTo:arguments.callee}}}}}}})(wysihtml5.dom);<a name="line_126"></a></li>
<li id="line_127" class="odd"><span class="lineNumber">127&nbsp;</span>(function(b){b.dom.delegate=function(c,a,d,e){return&nbsp;b.dom.observe(c,d,function(d){for(var&nbsp;g=d.target,i=b.lang.array(c.querySelectorAll(a));g&amp;&amp;g!==c;){if(i.contains(g)){e.call(g,d);break}g=g.parentNode}})}})(wysihtml5);<a name="line_127"></a></li>
<li id="line_128" class="even"><span class="lineNumber">128&nbsp;</span>wysihtml5.dom.getAsDom=function(){var&nbsp;b="abbr&nbsp;article&nbsp;aside&nbsp;audio&nbsp;bdi&nbsp;canvas&nbsp;command&nbsp;datalist&nbsp;details&nbsp;figcaption&nbsp;figure&nbsp;footer&nbsp;header&nbsp;hgroup&nbsp;keygen&nbsp;mark&nbsp;meter&nbsp;nav&nbsp;output&nbsp;progress&nbsp;rp&nbsp;rt&nbsp;ruby&nbsp;svg&nbsp;section&nbsp;source&nbsp;summary&nbsp;time&nbsp;track&nbsp;video&nbsp;wbr".split("&nbsp;");return&nbsp;function(c,a){var&nbsp;a=a||document,d;if("object"===typeof&nbsp;c&amp;&amp;c.nodeType)d=a.createElement("div"),d.appendChild(c);else&nbsp;if(wysihtml5.browser.supportsHTML5Tags(a))d=a.createElement("div"),d.innerHTML=c;else{d=a;if(!d._wysihtml5_supportsHTML5Tags){for(var&nbsp;e=<a name="line_128"></a></li>
<li id="line_129" class="odd"><span class="lineNumber">129&nbsp;</span>0,f=b.length;e&lt;f;e++)d.createElement(b[e]);d._wysihtml5_supportsHTML5Tags=!0}d=a;e=d.createElement("div");e.style.display="none";d.body.appendChild(e);try{e.innerHTML=c}catch(g){}d.body.removeChild(e);d=e}return&nbsp;d}}();<a name="line_129"></a></li>
<li id="line_130" class="even"><span class="lineNumber">130&nbsp;</span>wysihtml5.dom.getParentElement=function(){function&nbsp;b(b,a){return!a||!a.length?!0:"string"===typeof&nbsp;a?b===a:wysihtml5.lang.array(a).contains(b)}return&nbsp;function(c,a,d){d=d||50;if(a.className||a.classRegExp){a:{for(var&nbsp;e=a.nodeName,f=a.className,a=a.classRegExp;d--&amp;&amp;c&amp;&amp;"BODY"!==c.nodeName;){var&nbsp;g;if(g=c.nodeType===wysihtml5.ELEMENT_NODE)if(g=b(c.nodeName,e)){g=f;var&nbsp;i=(c.className||"").match(a)||[];g=!g?!!i.length:i[i.length-1]===g}if(g)break&nbsp;a;c=c.parentNode}c=null}return&nbsp;c}a:{e=a.nodeName;for(f=d;f--&amp;&amp;<a name="line_130"></a></li>
<li id="line_131" class="odd"><span class="lineNumber">131&nbsp;</span>c&amp;&amp;"BODY"!==c.nodeName;){if(b(c.nodeName,e))break&nbsp;a;c=c.parentNode}c=null}return&nbsp;c}}();<a name="line_131"></a></li>
<li id="line_132" class="even"><span class="lineNumber">132&nbsp;</span>wysihtml5.dom.getStyle=function(){function&nbsp;b(b){return&nbsp;b.replace(a,function(a){return&nbsp;a.charAt(1).toUpperCase()})}var&nbsp;c={"float":"styleFloat"in&nbsp;document.createElement("div").style?"styleFloat":"cssFloat"},a=/\-[a-z]/g;return&nbsp;function(a){return{from:function(e){if(e.nodeType===wysihtml5.ELEMENT_NODE){var&nbsp;f=e.ownerDocument,g=c[a]||b(a),i=e.style,h=e.currentStyle,k=i[g];if(k)return&nbsp;k;if(h)try{return&nbsp;h[g]}catch(j){}var&nbsp;g=f.defaultView||f.parentWindow,f=("height"===a||"width"===a)&amp;&amp;"TEXTAREA"===e.nodeName,<a name="line_132"></a></li>
<li id="line_133" class="odd"><span class="lineNumber">133&nbsp;</span>n;if(g.getComputedStyle)return&nbsp;f&amp;&amp;(n=i.overflow,i.overflow="hidden"),e=g.getComputedStyle(e,null).getPropertyValue(a),f&amp;&amp;(i.overflow=n||""),e}}}}}();wysihtml5.dom.hasElementWithTagName=function(){var&nbsp;b={},c=1;return&nbsp;function(a,d){var&nbsp;e=(a._wysihtml5_identifier||(a._wysihtml5_identifier=c++))+":"+d,f=b[e];f||(f=b[e]=a.getElementsByTagName(d));return&nbsp;0&lt;f.length}}();<a name="line_133"></a></li>
<li id="line_134" class="even"><span class="lineNumber">134&nbsp;</span>(function(b){var&nbsp;c={},a=1;b.dom.hasElementWithClassName=function(d,e){if(!b.browser.supportsNativeGetElementsByClassName())return!!d.querySelector("."+e);var&nbsp;f=(d._wysihtml5_identifier||(d._wysihtml5_identifier=a++))+":"+e,g=c[f];g||(g=c[f]=d.getElementsByClassName(e));return&nbsp;0&lt;g.length}})(wysihtml5);wysihtml5.dom.insert=function(b){return{after:function(c){c.parentNode.insertBefore(b,c.nextSibling)},before:function(c){c.parentNode.insertBefore(b,c)},into:function(c){c.appendChild(b)}}};<a name="line_134"></a></li>
<li id="line_135" class="odd"><span class="lineNumber">135&nbsp;</span>wysihtml5.dom.insertCSS=function(b){b=b.join("\n");return{into:function(c){var&nbsp;a=c.head||c.getElementsByTagName("head")[0],d=c.createElement("style");d.type="text/css";d.styleSheet?d.styleSheet.cssText=b:d.appendChild(c.createTextNode(b));a&amp;&amp;a.appendChild(d)}}};<a name="line_135"></a></li>
<li id="line_136" class="even"><span class="lineNumber">136&nbsp;</span>wysihtml5.dom.observe=function(b,c,a){for(var&nbsp;c="string"===typeof&nbsp;c?[c]:c,d,e,f=0,g=c.length;f&lt;g;f++)e=c[f],b.addEventListener?b.addEventListener(e,a,!1):(d=function(c){"target"in&nbsp;c||(c.target=c.srcElement);c.preventDefault=c.preventDefault||function(){this.returnValue=false};c.stopPropagation=c.stopPropagation||function(){this.cancelBubble=true};a.call(b,c)},b.attachEvent("on"+e,d));return{stop:function(){for(var&nbsp;e,h=0,f=c.length;h&lt;f;h++)e=c[h],b.removeEventListener?b.removeEventListener(e,a,!1):<a name="line_136"></a></li>
<li id="line_137" class="odd"><span class="lineNumber">137&nbsp;</span>b.detachEvent("on"+e,d)}}};<a name="line_137"></a></li>
<li id="line_138" class="even"><span class="lineNumber">138&nbsp;</span>wysihtml5.dom.parse=function(){function&nbsp;b(c,e){var&nbsp;h=c.childNodes,f=h.length,g;g=a[c.nodeType];var&nbsp;k=0;g=g&amp;&amp;g(c);if(!g)return&nbsp;null;for(k=0;k&lt;f;k++)(newChild=b(h[k],e))&amp;&amp;g.appendChild(newChild);return&nbsp;e&amp;&amp;1&gt;=g.childNodes.length&amp;&amp;g.nodeName.toLowerCase()===d&amp;&amp;!g.attributes.length?g.firstChild:g}function&nbsp;c(a,b){var&nbsp;b=b.toLowerCase(),c;if(c="IMG"==a.nodeName)if(c="src"==b){var&nbsp;d;try{d=a.complete&amp;&amp;!a.mozMatchesSelector(":-moz-broken")}catch(e){a.complete&amp;&amp;"complete"===a.readyState&amp;&amp;(d=!0)}c=!0===d}return&nbsp;c?<a name="line_138"></a></li>
<li id="line_139" class="odd"><span class="lineNumber">139&nbsp;</span>a.src:i&amp;&amp;"outerHTML"in&nbsp;a?-1!=a.outerHTML.toLowerCase().indexOf("&nbsp;"+b+"=")?a.getAttribute(b):null:a.getAttribute(b)}var&nbsp;a={1:function(a){var&nbsp;b,f,i=g.tags;f=a.nodeName.toLowerCase();b=a.scopeName;if(a._wysihtml5)return&nbsp;null;a._wysihtml5=1;if("wysihtml5-temp"===a.className)return&nbsp;null;b&amp;&amp;"HTML"!=b&amp;&amp;(f=b+":"+f);"outerHTML"in&nbsp;a&amp;&amp;!wysihtml5.browser.autoClosesUnclosedTags()&amp;&amp;("P"===a.nodeName&amp;&amp;"&lt;/p&gt;"!==a.outerHTML.slice(-4).toLowerCase())&amp;&amp;(f="div");if(f&nbsp;in&nbsp;i){b=i[f];if(!b||b.remove)return&nbsp;null;b="string"===<a name="line_139"></a></li>
<li id="line_140" class="even"><span class="lineNumber">140&nbsp;</span>typeof&nbsp;b?{rename_tag:b}:b}else&nbsp;if(a.firstChild)b={rename_tag:d};else&nbsp;return&nbsp;null;f=a.ownerDocument.createElement(b.rename_tag||f);var&nbsp;i={},r=b.set_class,m=b.add_class,s=b.set_attributes,x=b.check_attributes,o=g.classes,z=0,w=[];b=[];var&nbsp;y=[],A=[],t;s&amp;&amp;(i=wysihtml5.lang.object(s).clone());if(x)for(t&nbsp;in&nbsp;x)if(s=h[x[t]])s=s(c(a,t)),"string"===typeof&nbsp;s&amp;&amp;(i[t]=s);r&amp;&amp;w.push(r);if(m)for(t&nbsp;in&nbsp;m)if(s=k[m[t]])r=s(c(a,t)),"string"===typeof&nbsp;r&amp;&amp;w.push(r);o["_wysihtml5-temp-placeholder"]=1;(A=a.getAttribute("class"))&amp;&amp;<a name="line_140"></a></li>
<li id="line_141" class="odd"><span class="lineNumber">141&nbsp;</span>(w=w.concat(A.split(e)));for(m=w.length;z&lt;m;z++)a=w[z],o[a]&amp;&amp;b.push(a);for(o=b.length;o--;)a=b[o],wysihtml5.lang.array(y).contains(a)||y.unshift(a);y.length&amp;&amp;(i["class"]=y.join("&nbsp;"));for(t&nbsp;in&nbsp;i)try{f.setAttribute(t,i[t])}catch(v){}i.src&amp;&amp;("undefined"!==typeof&nbsp;i.width&amp;&amp;f.setAttribute("width",i.width),"undefined"!==typeof&nbsp;i.height&amp;&amp;f.setAttribute("height",i.height));return&nbsp;f},3:function(a){return&nbsp;a.ownerDocument.createTextNode(a.data)}},d="span",e=/\s+/,f={tags:{},classes:{}},g={},i=!wysihtml5.browser.supportsGetAttributeCorrectly(),<a name="line_141"></a></li>
<li id="line_142" class="even"><span class="lineNumber">142&nbsp;</span>h={url:function(){var&nbsp;a=/^https?:\/\//i;return&nbsp;function(b){return!b||!b.match(a)?null:b.replace(a,function(a){return&nbsp;a.toLowerCase()})}}(),alt:function(){var&nbsp;a=/[^&nbsp;a-z0-9_\-]/gi;return&nbsp;function(b){return!b?"":b.replace(a,"")}}(),numbers:function(){var&nbsp;a=/\D/g;return&nbsp;function(b){return(b=(b||"").replace(a,""))||null}}()},k={align_img:function(){var&nbsp;a={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return&nbsp;function(b){return&nbsp;a[(""+b).toLowerCase()]}}(),align_text:function(){var&nbsp;a={left:"wysiwyg-text-align-left",<a name="line_142"></a></li>
<li id="line_143" class="odd"><span class="lineNumber">143&nbsp;</span>right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return&nbsp;function(b){return&nbsp;a[(""+b).toLowerCase()]}}(),clear_br:function(){var&nbsp;a={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return&nbsp;function(b){return&nbsp;a[(""+b).toLowerCase()]}}(),size_font:function(){var&nbsp;a={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",<a name="line_143"></a></li>
<li id="line_144" class="even"><span class="lineNumber">144&nbsp;</span>6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return&nbsp;function(b){return&nbsp;a[(""+b).charAt(0)]}}()};return&nbsp;function(a,c,d,e){wysihtml5.lang.object(g).merge(f).merge(c).get();for(var&nbsp;d=d||a.ownerDocument||document,c=d.createDocumentFragment(),h="string"===typeof&nbsp;a,a=h?wysihtml5.dom.getAsDom(a,d):a;a.firstChild;)d=a.firstChild,a.removeChild(d),(d=b(d,e))&amp;&amp;c.appendChild(d);a.innerHTML="";a.appendChild(c);return&nbsp;h?wysihtml5.quirks.getCorrectInnerHTML(a):<a name="line_144"></a></li>
<li id="line_145" class="odd"><span class="lineNumber">145&nbsp;</span>a}}();wysihtml5.dom.removeEmptyTextNodes=function(b){for(var&nbsp;c=wysihtml5.lang.array(b.childNodes).get(),a=c.length,d=0;d&lt;a;d++)b=c[d],b.nodeType===wysihtml5.TEXT_NODE&amp;&amp;""===b.data&amp;&amp;b.parentNode.removeChild(b)};wysihtml5.dom.renameElement=function(b,c){for(var&nbsp;a=b.ownerDocument.createElement(c),d;d=b.firstChild;)a.appendChild(d);wysihtml5.dom.copyAttributes(["align","className"]).from(b).to(a);b.parentNode.replaceChild(a,b);return&nbsp;a};<a name="line_145"></a></li>
<li id="line_146" class="even"><span class="lineNumber">146&nbsp;</span>wysihtml5.dom.replaceWithChildNodes=function(b){if(b.parentNode)if(b.firstChild){for(var&nbsp;c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);b.parentNode.replaceChild(c,b)}else&nbsp;b.parentNode.removeChild(b)};<a name="line_146"></a></li>
<li id="line_147" class="odd"><span class="lineNumber">147&nbsp;</span>(function(b){function&nbsp;c(a){var&nbsp;b=a.ownerDocument.createElement("br");a.appendChild(b)}b.resolveList=function(a){if(!("MENU"!==a.nodeName&amp;&amp;"UL"!==a.nodeName&amp;&amp;"OL"!==a.nodeName)){var&nbsp;d=a.ownerDocument.createDocumentFragment(),e=a.previousElementSibling||a.previousSibling,f,g,i;for(e&amp;&amp;"block"!==b.getStyle("display").from(e)&amp;&amp;c(d);i=a.firstChild;){for(f=i.lastChild;e=i.firstChild;)g=(g=e===f)&amp;&amp;"block"!==b.getStyle("display").from(e)&amp;&amp;"BR"!==e.nodeName,d.appendChild(e),g&amp;&amp;c(d);i.parentNode.removeChild(i)}a.parentNode.replaceChild(d,<a name="line_147"></a></li>
<li id="line_148" class="even"><span class="lineNumber">148&nbsp;</span>a)}}})(wysihtml5.dom);<a name="line_148"></a></li>
<li id="line_149" class="odd"><span class="lineNumber">149&nbsp;</span>(function(b){var&nbsp;c=document,a="parent&nbsp;top&nbsp;opener&nbsp;frameElement&nbsp;frames&nbsp;localStorage&nbsp;globalStorage&nbsp;sessionStorage&nbsp;indexedDB".split("&nbsp;"),d="open&nbsp;close&nbsp;openDialog&nbsp;showModalDialog&nbsp;alert&nbsp;confirm&nbsp;prompt&nbsp;openDatabase&nbsp;postMessage&nbsp;XMLHttpRequest&nbsp;XDomainRequest".split("&nbsp;"),e=["referrer","write","open","close"];b.dom.Sandbox=Base.extend({constructor:function(a,c){this.callback=a||b.EMPTY_FUNCTION;this.config=b.lang.object({}).merge(c).get();this.iframe=this._createIframe()},insertInto:function(a){"string"===typeof&nbsp;a&amp;&amp;<a name="line_149"></a></li>
<li id="line_150" class="even"><span class="lineNumber">150&nbsp;</span>(a=c.getElementById(a));a.appendChild(this.iframe)},getIframe:function(){return&nbsp;this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var&nbsp;a=this.getIframe();a.parentNode.removeChild(a)},_readyError:function(){throw&nbsp;Error("wysihtml5.Sandbox:&nbsp;Sandbox&nbsp;iframe&nbsp;isn't&nbsp;loaded&nbsp;yet");},_createIframe:function(){var&nbsp;a=this,d=c.createElement("iframe");d.className="wysihtml5-sandbox";b.dom.setAttributes({security:"restricted",allowtransparency:"true",<a name="line_150"></a></li>
<li id="line_151" class="odd"><span class="lineNumber">151&nbsp;</span>frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(d);b.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&amp;&amp;(d.src="javascript:'&lt;html&gt;&lt;/html&gt;'");d.onload=function(){d.onreadystatechange=d.onload=null;a._onLoadIframe(d)};d.onreadystatechange=function(){if(/loaded|complete/.test(d.readyState)){d.onreadystatechange=d.onload=null;a._onLoadIframe(d)}};return&nbsp;d},_onLoadIframe:function(f){if(b.dom.contains(c.documentElement,f)){var&nbsp;g=this,i=f.contentWindow,h=f.contentWindow.document,k=<a name="line_151"></a></li>
<li id="line_152" class="even"><span class="lineNumber">152&nbsp;</span>this._getHtml({charset:c.characterSet||c.charset||"utf-8",stylesheets:this.config.stylesheets});h.open("text/html","replace");h.write(k);h.close();this.getWindow=function(){return&nbsp;f.contentWindow};this.getDocument=function(){return&nbsp;f.contentWindow.document};i.onerror=function(a,b,c){throw&nbsp;Error("wysihtml5.Sandbox:&nbsp;"+a,b,c);};if(!b.browser.supportsSandboxedIframes()){var&nbsp;j,k=0;for(j=a.length;k&lt;j;k++)this._unset(i,a[k]);k=0;for(j=d.length;k&lt;j;k++)this._unset(i,d[k],b.EMPTY_FUNCTION);k=0;for(j=e.length;k&lt;<a name="line_152"></a></li>
<li id="line_153" class="odd"><span class="lineNumber">153&nbsp;</span>j;k++)this._unset(h,e[k]);this._unset(h,"cookie","",!0)}this.loaded=!0;setTimeout(function(){g.callback(g)},0)}},_getHtml:function(a){var&nbsp;c=a.stylesheets,d="",e=0,k;if(c="string"===typeof&nbsp;c?[c]:c)for(k=c.length;e&lt;k;e++)d+='&lt;link&nbsp;rel="stylesheet"&nbsp;href="'+c[e]+'"&gt;';a.stylesheets=d;return&nbsp;b.lang.string('&lt;!DOCTYPE&nbsp;html&gt;&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;charset="#{charset}"&gt;#{stylesheets}&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;').interpolate(a)},_unset:function(a,c,d,e){try{a[c]=d}catch(k){}try{a.__defineGetter__(c,function(){return&nbsp;d})}catch(j){}if(e)try{a.__defineSetter__(c,<a name="line_153"></a></li>
<li id="line_154" class="even"><span class="lineNumber">154&nbsp;</span>function(){})}catch(n){}if(!b.browser.crashesWhenDefineProperty(c))try{var&nbsp;p={get:function(){return&nbsp;d}};e&amp;&amp;(p.set=function(){});Object.defineProperty(a,c,p)}catch(q){}}})})(wysihtml5);(function(){var&nbsp;b={className:"class"};wysihtml5.dom.setAttributes=function(c){return{on:function(a){for(var&nbsp;d&nbsp;in&nbsp;c)a.setAttribute(b[d]||d,c[d])}}}})();<a name="line_154"></a></li>
<li id="line_155" class="odd"><span class="lineNumber">155&nbsp;</span>wysihtml5.dom.setStyles=function(b){return{on:function(c){c=c.style;if("string"===typeof&nbsp;b)c.cssText+=";"+b;else&nbsp;for(var&nbsp;a&nbsp;in&nbsp;b)"float"===a?(c.cssFloat=b[a],c.styleFloat=b[a]):c[a]=b[a]}}};<a name="line_155"></a></li>
<li id="line_156" class="even"><span class="lineNumber">156&nbsp;</span>(function(b){b.simulatePlaceholder=function(c,a,d){var&nbsp;e=function(){a.hasPlaceholderSet()&amp;&amp;a.clear();b.removeClass(a.element,"placeholder")},f=function(){a.isEmpty()&amp;&amp;(a.setValue(d),b.addClass(a.element,"placeholder"))};c.observe("set_placeholder",f).observe("unset_placeholder",e).observe("focus:composer",e).observe("paste:composer",e).observe("blur:composer",f);f()}})(wysihtml5.dom);<a name="line_156"></a></li>
<li id="line_157" class="odd"><span class="lineNumber">157&nbsp;</span>(function(b){var&nbsp;c=document.documentElement;"textContent"in&nbsp;c?(b.setTextContent=function(a,b){a.textContent=b},b.getTextContent=function(a){return&nbsp;a.textContent}):"innerText"in&nbsp;c?(b.setTextContent=function(a,b){a.innerText=b},b.getTextContent=function(a){return&nbsp;a.innerText}):(b.setTextContent=function(a,b){a.nodeValue=b},b.getTextContent=function(a){return&nbsp;a.nodeValue})})(wysihtml5.dom);<a name="line_157"></a></li>
<li id="line_158" class="even"><span class="lineNumber">158&nbsp;</span>wysihtml5.quirks.cleanPastedHTML=function(){var&nbsp;b={"a&nbsp;u":wysihtml5.dom.replaceWithChildNodes};return&nbsp;function(c,a,d){var&nbsp;a=a||b,d=d||c.ownerDocument||document,e="string"===typeof&nbsp;c,f,g,i,h=0,c=e?wysihtml5.dom.getAsDom(c,d):c;for(i&nbsp;in&nbsp;a){f=c.querySelectorAll(i);d=a[i];for(g=f.length;h&lt;g;h++)d(f[h])}return&nbsp;e?c.innerHTML:c}}();<a name="line_158"></a></li>
<li id="line_159" class="odd"><span class="lineNumber">159&nbsp;</span>(function(b){var&nbsp;c=b.dom;b.quirks.ensureProperClearing=function(){var&nbsp;a=function(){var&nbsp;a=this;setTimeout(function(){var&nbsp;b=a.innerHTML.toLowerCase();if("&lt;p&gt;&amp;nbsp;&lt;/p&gt;"==b||"&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;"==b)a.innerHTML=""},0)};return&nbsp;function(b){c.observe(b.element,["cut","keydown"],a)}}();b.quirks.ensureProperClearingOfLists=function(){var&nbsp;a=["OL","UL","MENU"];return&nbsp;function(d){c.observe(d.element,"keydown",function(e){if(e.keyCode===b.BACKSPACE_KEY){var&nbsp;f=d.selection.getSelectedNode(),e=d.element;<a name="line_159"></a></li>
<li id="line_160" class="even"><span class="lineNumber">160&nbsp;</span>e.firstChild&amp;&amp;b.lang.array(a).contains(e.firstChild.nodeName)&amp;&amp;(f=c.getParentElement(f,{nodeName:a}))&amp;&amp;f==e.firstChild&amp;&amp;1&gt;=f.childNodes.length&amp;&amp;(f.firstChild?""===f.firstChild.innerHTML:1)&amp;&amp;f.parentNode.removeChild(f)}})}}()})(wysihtml5);<a name="line_160"></a></li>
<li id="line_161" class="odd"><span class="lineNumber">161&nbsp;</span>(function(b){b.quirks.getCorrectInnerHTML=function(c){var&nbsp;a=c.innerHTML;if(-1===a.indexOf("%7E"))return&nbsp;a;var&nbsp;c=c.querySelectorAll("[href*='~'],&nbsp;[src*='~']"),d,e,f,g;g=0;for(f=c.length;g&lt;f;g++)d=c[g].href||c[g].src,e=b.lang.string(d).replace("~").by("%7E"),a=b.lang.string(a).replace(e).by(d);return&nbsp;a}})(wysihtml5);<a name="line_161"></a></li>
<li id="line_162" class="even"><span class="lineNumber">162&nbsp;</span>(function(b){var&nbsp;c=b.dom,a="LI&nbsp;P&nbsp;H1&nbsp;H2&nbsp;H3&nbsp;H4&nbsp;H5&nbsp;H6".split("&nbsp;"),d=["UL","OL","MENU"];b.quirks.insertLineBreakOnReturn=function(e){function&nbsp;f(a){if(a=c.getParentElement(a,{nodeName:["P","DIV"]},2)){var&nbsp;d=document.createTextNode(b.INVISIBLE_SPACE);c.insert(d).before(a);c.replaceWithChildNodes(a);e.selection.selectNode(d)}}c.observe(e.element.ownerDocument,"keydown",function(g){var&nbsp;i=g.keyCode;if(!(g.shiftKey||i!==b.ENTER_KEY&amp;&amp;i!==b.BACKSPACE_KEY)){var&nbsp;h=e.selection.getSelectedNode();(h=c.getParentElement(h,<a name="line_162"></a></li>
<li id="line_163" class="odd"><span class="lineNumber">163&nbsp;</span>{nodeName:a},4))?"LI"===h.nodeName&amp;&amp;(i===b.ENTER_KEY||i===b.BACKSPACE_KEY)?setTimeout(function(){var&nbsp;a=e.selection.getSelectedNode(),b;a&amp;&amp;((b=c.getParentElement(a,{nodeName:d},2))||f(a))},0):h.nodeName.match(/H[1-6]/)&amp;&amp;i===b.ENTER_KEY&amp;&amp;setTimeout(function(){f(e.selection.getSelectedNode())},0):i===b.ENTER_KEY&amp;&amp;!b.browser.insertsLineBreaksOnReturn()&amp;&amp;(e.commands.exec("insertLineBreak"),g.preventDefault())}})}})(wysihtml5);<a name="line_163"></a></li>
<li id="line_164" class="even"><span class="lineNumber">164&nbsp;</span>(function(b){b.quirks.redraw=function(c){b.dom.addClass(c,"wysihtml5-quirks-redraw");b.dom.removeClass(c,"wysihtml5-quirks-redraw");try{var&nbsp;a=c.ownerDocument;a.execCommand("italic",!1,null);a.execCommand("italic",!1,null)}catch(d){}}})(wysihtml5);<a name="line_164"></a></li>
<li id="line_165" class="odd"><span class="lineNumber">165&nbsp;</span>(function(b){var&nbsp;c=b.dom;b.Selection=Base.extend({constructor:function(a){window.rangy.init();this.editor=a;this.composer=a.composer;this.doc=this.composer.doc},getBookmark:function(){var&nbsp;a=this.getRange();return&nbsp;a&amp;&amp;a.cloneRange()},setBookmark:function(a){a&amp;&amp;this.setSelection(a)},setBefore:function(a){var&nbsp;b=rangy.createRange(this.doc);b.setStartBefore(a);b.setEndBefore(a);return&nbsp;this.setSelection(b)},setAfter:function(a){var&nbsp;b=rangy.createRange(this.doc);b.setStartAfter(a);b.setEndAfter(a);return&nbsp;this.setSelection(b)},<a name="line_165"></a></li>
<li id="line_166" class="even"><span class="lineNumber">166&nbsp;</span>selectNode:function(a){var&nbsp;d=rangy.createRange(this.doc),e=a.nodeType===b.ELEMENT_NODE,f="canHaveHTML"in&nbsp;a?a.canHaveHTML:"IMG"!==a.nodeName,g=e?a.innerHTML:a.data,g=""===g||g===b.INVISIBLE_SPACE,i=c.getStyle("display").from(a),i="block"===i||"list-item"===i;if(g&amp;&amp;e&amp;&amp;f)try{a.innerHTML=b.INVISIBLE_SPACE}catch(h){}f?d.selectNodeContents(a):d.selectNode(a);f&amp;&amp;g&amp;&amp;e?d.collapse(i):f&amp;&amp;g&amp;&amp;(d.setStartAfter(a),d.setEndAfter(a));this.setSelection(d)},getSelectedNode:function(a){if(a&amp;&amp;this.doc.selection&amp;&amp;"Control"===<a name="line_166"></a></li>
<li id="line_167" class="odd"><span class="lineNumber">167&nbsp;</span>this.doc.selection.type&amp;&amp;(a=this.doc.selection.createRange())&amp;&amp;a.length)return&nbsp;a.item(0);a=this.getSelection(this.doc);return&nbsp;a.focusNode===a.anchorNode?a.focusNode:(a=this.getRange(this.doc))?a.commonAncestorContainer:this.doc.body},executeAndRestore:function(a,c){var&nbsp;e=this.doc.body,f=c&amp;&amp;e.scrollTop,g=c&amp;&amp;e.scrollLeft,i='&lt;span&nbsp;class="_wysihtml5-temp-placeholder"&gt;'+b.INVISIBLE_SPACE+"&lt;/span&gt;",h=this.getRange(this.doc);if(h){i=h.createContextualFragment(i);h.insertNode(i);try{a(h.startContainer,h.endContainer)}catch(k){setTimeout(function(){throw&nbsp;k;<a name="line_167"></a></li>
<li id="line_168" class="even"><span class="lineNumber">168&nbsp;</span>},0)}(caretPlaceholder=this.doc.querySelector("._wysihtml5-temp-placeholder"))?(h=rangy.createRange(this.doc),h.selectNode(caretPlaceholder),h.deleteContents(),this.setSelection(h)):e.focus();c&amp;&amp;(e.scrollTop=f,e.scrollLeft=g);try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(j){}}else&nbsp;a(e,e)},executeAndRestoreSimple:function(a){var&nbsp;b,c,f=this.getRange(),g=this.doc.body,i;if(f){b=f.getNodes([3]);g=b[0]||f.startContainer;i=b[b.length-1]||f.endContainer;b=g===f.startContainer?f.startOffset:<a name="line_168"></a></li>
<li id="line_169" class="odd"><span class="lineNumber">169&nbsp;</span>0;c=i===f.endContainer?f.endOffset:i.length;try{a(f.startContainer,f.endContainer)}catch(h){setTimeout(function(){throw&nbsp;h;},0)}a=rangy.createRange(this.doc);try{a.setStart(g,b)}catch(k){}try{a.setEnd(i,c)}catch(j){}try{this.setSelection(a)}catch(n){}}else&nbsp;a(g,g)},insertHTML:function(a){var&nbsp;a=rangy.createRange(this.doc).createContextualFragment(a),b=a.lastChild;this.insertNode(a);b&amp;&amp;this.setAfter(b)},insertNode:function(a){var&nbsp;b=this.getRange();b&amp;&amp;b.insertNode(a)},surround:function(a){var&nbsp;b=this.getRange();<a name="line_169"></a></li>
<li id="line_170" class="even"><span class="lineNumber">170&nbsp;</span>if(b)try{b.surroundContents(a),this.selectNode(a)}catch(c){a.appendChild(b.extractContents()),b.insertNode(a)}},scrollIntoView:function(){var&nbsp;a=this.doc,c=a.documentElement.scrollHeight&gt;a.documentElement.offsetHeight,e;if(!(e=a._wysihtml5ScrollIntoViewElement))e=a.createElement("span"),e.innerHTML=b.INVISIBLE_SPACE;e=a._wysihtml5ScrollIntoViewElement=e;if(c){this.insertNode(e);var&nbsp;c=e,f=0;if(c.parentNode){do&nbsp;f+=c.offsetTop||0,c=c.offsetParent;while(c)}c=f;e.parentNode.removeChild(e);c&gt;a.body.scrollTop&amp;&amp;<a name="line_170"></a></li>
<li id="line_171" class="odd"><span class="lineNumber">171&nbsp;</span>(a.body.scrollTop=c)}},selectLine:function(){b.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&amp;&amp;this._selectLine_MSIE()},_selectLine_W3C:function(){var&nbsp;a=this.doc.defaultView.getSelection();a.modify("extend","left","lineboundary");a.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var&nbsp;a=this.doc.selection.createRange(),b=a.boundingTop,c=this.doc.body.scrollWidth,f;if(a.moveToPoint){0===b&amp;&amp;(f=this.doc.createElement("span"),this.insertNode(f),b=f.offsetTop,<a name="line_171"></a></li>
<li id="line_172" class="even"><span class="lineNumber">172&nbsp;</span>f.parentNode.removeChild(f));b+=1;for(f=-10;f&lt;c;f+=2)try{a.moveToPoint(f,b);break}catch(g){}for(f=this.doc.selection.createRange();0&lt;=c;c--)try{f.moveToPoint(c,b);break}catch(i){}a.setEndPoint("EndToEnd",f);a.select()}},getText:function(){var&nbsp;a=this.getSelection();return&nbsp;a?a.toString():""},getNodes:function(a,b){var&nbsp;c=this.getRange();return&nbsp;c?c.getNodes([a],b):[]},getRange:function(){var&nbsp;a=this.getSelection();return&nbsp;a&amp;&amp;a.rangeCount&amp;&amp;a.getRangeAt(0)},getSelection:function(){return&nbsp;rangy.getSelection(this.doc.defaultView||<a name="line_172"></a></li>
<li id="line_173" class="odd"><span class="lineNumber">173&nbsp;</span>this.doc.parentWindow)},setSelection:function(a){return&nbsp;rangy.getSelection(this.doc.defaultView||this.doc.parentWindow).setSingleRange(a)}})})(wysihtml5);<a name="line_173"></a></li>
<li id="line_174" class="even"><span class="lineNumber">174&nbsp;</span>(function(b,c){function&nbsp;a(a,b){return&nbsp;c.dom.isCharacterDataNode(a)?0==b?!!a.previousSibling:b==a.length?!!a.nextSibling:!0:0&lt;b&amp;&amp;b&lt;a.childNodes.length}function&nbsp;d(a,b,e){var&nbsp;f;c.dom.isCharacterDataNode(b)&amp;&amp;(0==e?(e=c.dom.getNodeIndex(b),b=b.parentNode):e==b.length?(e=c.dom.getNodeIndex(b)+1,b=b.parentNode):f=c.dom.splitDataNode(b,e));if(!f){f=b.cloneNode(!1);f.id&amp;&amp;f.removeAttribute("id");for(var&nbsp;g;g=b.childNodes[e];)f.appendChild(g);c.dom.insertAfter(f,b)}return&nbsp;b==a?f:d(a,f.parentNode,c.dom.getNodeIndex(f))}<a name="line_174"></a></li>
<li id="line_175" class="odd"><span class="lineNumber">175&nbsp;</span>function&nbsp;e(a){this.firstTextNode=(this.isElementMerge=a.nodeType==b.ELEMENT_NODE)?a.lastChild:a;this.textNodes=[this.firstTextNode]}function&nbsp;f(a,b,c,d){this.tagNames=a||[g];this.cssClass=b||"";this.similarClassRegExp=c;this.normalize=d;this.applyToAnyTagName=!1}var&nbsp;g="span",i=/\s+/g;e.prototype={doMerge:function(){for(var&nbsp;a=[],b,c,d=0,e=this.textNodes.length;d&lt;e;++d)b=this.textNodes[d],c=b.parentNode,a[d]=b.data,d&amp;&amp;(c.removeChild(b),c.hasChildNodes()||c.parentNode.removeChild(c));return&nbsp;this.firstTextNode.data=<a name="line_175"></a></li>
<li id="line_176" class="even"><span class="lineNumber">176&nbsp;</span>a=a.join("")},getLength:function(){for(var&nbsp;a=this.textNodes.length,b=0;a--;)b+=this.textNodes[a].length;return&nbsp;b},toString:function(){for(var&nbsp;a=[],b=0,c=this.textNodes.length;b&lt;c;++b)a[b]="'"+this.textNodes[b].data+"'";return"[Merge("+a.join(",")+")]"}};f.prototype={getAncestorWithClass:function(a){for(var&nbsp;d;a;){if(this.cssClass)if(d=this.cssClass,a.className){var&nbsp;e=a.className.match(this.similarClassRegExp)||[];d=e[e.length-1]===d}else&nbsp;d=!1;else&nbsp;d=!0;if(a.nodeType==b.ELEMENT_NODE&amp;&amp;c.dom.arrayContains(this.tagNames,<a name="line_176"></a></li>
<li id="line_177" class="odd"><span class="lineNumber">177&nbsp;</span>a.tagName.toLowerCase())&amp;&amp;d)return&nbsp;a;a=a.parentNode}return!1},postApply:function(a,b){for(var&nbsp;c=a[0],d=a[a.length-1],f=[],g,i=c,m=d,s=0,x=d.length,o,z,w=0,y=a.length;w&lt;y;++w)if(o=a[w],z=this.getAdjacentMergeableTextNode(o.parentNode,!1)){if(g||(g=new&nbsp;e(z),f.push(g)),g.textNodes.push(o),o===c&amp;&amp;(i=g.firstTextNode,s=i.length),o===d)m=g.firstTextNode,x=g.getLength()}else&nbsp;g=null;if(c=this.getAdjacentMergeableTextNode(d.parentNode,!0))g||(g=new&nbsp;e(d),f.push(g)),g.textNodes.push(c);if(f.length){w=0;for(y=<a name="line_177"></a></li>
<li id="line_178" class="even"><span class="lineNumber">178&nbsp;</span>f.length;w&lt;y;++w)f[w].doMerge();b.setStart(i,s);b.setEnd(m,x)}},getAdjacentMergeableTextNode:function(a,c){var&nbsp;d=a.nodeType==b.TEXT_NODE,e=d?a.parentNode:a,f=c?"nextSibling":"previousSibling";if(d){if((d=a[f])&amp;&amp;d.nodeType==b.TEXT_NODE)return&nbsp;d}else&nbsp;if((d=e[f])&amp;&amp;this.areElementsMergeable(a,d))return&nbsp;d[c?"firstChild":"lastChild"];return&nbsp;null},areElementsMergeable:function(a,b){var&nbsp;d;if(d=c.dom.arrayContains(this.tagNames,(a.tagName||"").toLowerCase()))if(d=c.dom.arrayContains(this.tagNames,(b.tagName||<a name="line_178"></a></li>
<li id="line_179" class="odd"><span class="lineNumber">179&nbsp;</span>"").toLowerCase()))if(d=a.className.replace(i,"&nbsp;")==b.className.replace(i,"&nbsp;"))a:if(a.attributes.length!=b.attributes.length)d=!1;else{d=0;for(var&nbsp;e=a.attributes.length,f,g;d&lt;e;++d)if(f=a.attributes[d],g=f.name,"class"!=g&amp;&amp;(g=b.attributes.getNamedItem(g),f.specified!=g.specified||f.specified&amp;&amp;f.nodeValue!==g.nodeValue)){d=!1;break&nbsp;a}d=!0}return&nbsp;d},createContainer:function(a){a=a.createElement(this.tagNames[0]);this.cssClass&amp;&amp;(a.className=this.cssClass);return&nbsp;a},applyToTextNode:function(a){var&nbsp;b=<a name="line_179"></a></li>
<li id="line_180" class="even"><span class="lineNumber">180&nbsp;</span>a.parentNode;1==b.childNodes.length&amp;&amp;c.dom.arrayContains(this.tagNames,b.tagName.toLowerCase())?this.cssClass&amp;&amp;(a=this.cssClass,b.className?(b.className&amp;&amp;(b.className=b.className.replace(this.similarClassRegExp,"")),b.className+="&nbsp;"+a):b.className=a):(b=this.createContainer(c.dom.getDocument(a)),a.parentNode.insertBefore(b,a),b.appendChild(a))},isRemovable:function(a){return&nbsp;c.dom.arrayContains(this.tagNames,a.tagName.toLowerCase())&amp;&amp;b.lang.string(a.className).trim()==this.cssClass},undoToTextNode:function(b,<a name="line_180"></a></li>
<li id="line_181" class="odd"><span class="lineNumber">181&nbsp;</span>c,e){c.containsNode(e)||(b=c.cloneRange(),b.selectNode(e),b.isPointInRange(c.endContainer,c.endOffset)&amp;&amp;a(c.endContainer,c.endOffset)&amp;&amp;(d(e,c.endContainer,c.endOffset),c.setEndAfter(e)),b.isPointInRange(c.startContainer,c.startOffset)&amp;&amp;a(c.startContainer,c.startOffset)&amp;&amp;(e=d(e,c.startContainer,c.startOffset)));this.similarClassRegExp&amp;&amp;e.className&amp;&amp;(e.className=e.className.replace(this.similarClassRegExp,""));if(this.isRemovable(e)){c=e;for(e=c.parentNode;c.firstChild;)e.insertBefore(c.firstChild,<a name="line_181"></a></li>
<li id="line_182" class="even"><span class="lineNumber">182&nbsp;</span>c);e.removeChild(c)}},applyToRange:function(a){var&nbsp;c=a.getNodes([b.TEXT_NODE]);if(!c.length)try{var&nbsp;d=this.createContainer(a.endContainer.ownerDocument);a.surroundContents(d);this.selectNode(a,d);return}catch(e){}a.splitBoundaries();c=a.getNodes([b.TEXT_NODE]);if(c.length){for(var&nbsp;f=0,g=c.length;f&lt;g;++f)d=c[f],this.getAncestorWithClass(d)||this.applyToTextNode(d);a.setStart(c[0],0);d=c[c.length-1];a.setEnd(d,d.length);this.normalize&amp;&amp;this.postApply(c,a)}},undoToRange:function(a){var&nbsp;c=a.getNodes([b.TEXT_NODE]),<a name="line_182"></a></li>
<li id="line_183" class="odd"><span class="lineNumber">183&nbsp;</span>d,e;c.length?(a.splitBoundaries(),c=a.getNodes([b.TEXT_NODE])):(c=a.endContainer.ownerDocument.createTextNode(b.INVISIBLE_SPACE),a.insertNode(c),a.selectNode(c),c=[c]);for(var&nbsp;f=0,g=c.length;f&lt;g;++f)d=c[f],(e=this.getAncestorWithClass(d))&amp;&amp;this.undoToTextNode(d,a,e);1==g?this.selectNode(a,c[0]):(a.setStart(c[0],0),d=c[c.length-1],a.setEnd(d,d.length),this.normalize&amp;&amp;this.postApply(c,a))},selectNode:function(a,c){var&nbsp;d=c.nodeType===b.ELEMENT_NODE,e="canHaveHTML"in&nbsp;c?c.canHaveHTML:!0,f=d?c.innerHTML:<a name="line_183"></a></li>
<li id="line_184" class="even"><span class="lineNumber">184&nbsp;</span>c.data;if((f=""===f||f===b.INVISIBLE_SPACE)&amp;&amp;d&amp;&amp;e)try{c.innerHTML=b.INVISIBLE_SPACE}catch(g){}a.selectNodeContents(c);f&amp;&amp;d?a.collapse(!1):f&amp;&amp;(a.setStartAfter(c),a.setEndAfter(c))},getTextSelectedByRange:function(a,b){var&nbsp;c=b.cloneRange();c.selectNodeContents(a);var&nbsp;d=c.intersection(b),d=d?d.toString():"";c.detach();return&nbsp;d},isAppliedToRange:function(a){var&nbsp;c=[],d,e=a.getNodes([b.TEXT_NODE]);if(!e.length)return(d=this.getAncestorWithClass(a.startContainer))?[d]:!1;for(var&nbsp;f=0,g=e.length,i;f&lt;g;++f){i=<a name="line_184"></a></li>
<li id="line_185" class="odd"><span class="lineNumber">185&nbsp;</span>this.getTextSelectedByRange(e[f],a);d=this.getAncestorWithClass(e[f]);if(""!=i&amp;&amp;!d)return!1;c.push(d)}return&nbsp;c},toggleRange:function(a){this.isAppliedToRange(a)?this.undoToRange(a):this.applyToRange(a)}};b.selection.HTMLApplier=f})(wysihtml5,rangy);<a name="line_185"></a></li>
<li id="line_186" class="even"><span class="lineNumber">186&nbsp;</span>wysihtml5.Commands=Base.extend({constructor:function(b){this.editor=b;this.composer=b.composer;this.doc=this.composer.doc},support:function(b){return&nbsp;wysihtml5.browser.supportsCommand(this.doc,b)},exec:function(b,c){var&nbsp;a=wysihtml5.commands[b],d=wysihtml5.lang.array(arguments).get(),e=a&amp;&amp;a.exec,f=null;this.editor.fire("beforecommand:composer");if(e)d.unshift(this.composer),f=e.apply(a,d);else&nbsp;try{f=this.doc.execCommand(b,!1,c)}catch(g){}this.editor.fire("aftercommand:composer");return&nbsp;f},state:function(b,<a name="line_186"></a></li>
<li id="line_187" class="odd"><span class="lineNumber">187&nbsp;</span>c){var&nbsp;a=wysihtml5.commands[b],d=wysihtml5.lang.array(arguments).get(),e=a&amp;&amp;a.state;if(e)return&nbsp;d.unshift(this.composer),e.apply(a,d);try{return&nbsp;this.doc.queryCommandState(b)}catch(f){return!1}},value:function(b){var&nbsp;c=wysihtml5.commands[b],a=c&amp;&amp;c.value;if(a)return&nbsp;a.call(c,this.composer,b);try{return&nbsp;this.doc.queryCommandValue(b)}catch(d){return&nbsp;null}}});<a name="line_187"></a></li>
<li id="line_188" class="even"><span class="lineNumber">188&nbsp;</span>(function(b){b.commands.bold={exec:function(c,a){return&nbsp;b.commands.formatInline.exec(c,a,"b")},state:function(c,a){return&nbsp;b.commands.formatInline.state(c,a,"b")},value:function(){}}})(wysihtml5);<a name="line_188"></a></li>
<li id="line_189" class="odd"><span class="lineNumber">189&nbsp;</span>(function(b){function&nbsp;c(c,g){var&nbsp;i=c.doc,h="_wysihtml5-temp-"+&nbsp;+new&nbsp;Date,k=0,j,n,p;b.commands.formatInline.exec(c,a,d,h,/non-matching-class/g);j=i.querySelectorAll(d+"."+h);for(h=j.length;k&lt;h;k++)for(p&nbsp;in&nbsp;n=j[k],n.removeAttribute("class"),g)n.setAttribute(p,g[p]);k=n;1===h&amp;&amp;(p=e.getTextContent(n),h=!!n.querySelector("*"),p=""===p||p===b.INVISIBLE_SPACE,!h&amp;&amp;p&amp;&amp;(e.setTextContent(n,g.text||n.href),i=i.createTextNode("&nbsp;"),c.selection.setAfter(n),c.selection.insertNode(i),k=i));c.selection.setAfter(k)}<a name="line_189"></a></li>
<li id="line_190" class="even"><span class="lineNumber">190&nbsp;</span>var&nbsp;a,d="A",e=b.dom;b.commands.createLink={exec:function(a,b,d){var&nbsp;h=this.state(a,b);h?a.selection.executeAndRestore(function(){for(var&nbsp;a=h.length,b=0,c,d,f;b&lt;a;b++)c=h[b],d=e.getParentElement(c,{nodeName:"code"}),f=e.getTextContent(c),f.match(e.autoLink.URL_REG_EXP)&amp;&amp;!d?e.renameElement(c,"code"):e.replaceWithChildNodes(c)}):(d="object"===typeof&nbsp;d?d:{href:d},c(a,d))},state:function(a,c){return&nbsp;b.commands.formatInline.state(a,c,"A")},value:function(){return&nbsp;a}}})(wysihtml5);<a name="line_190"></a></li>
<li id="line_191" class="odd"><span class="lineNumber">191&nbsp;</span>(function(b){var&nbsp;c=/wysiwyg-font-size-[a-z\-]+/g;b.commands.fontSize={exec:function(a,d,e){return&nbsp;b.commands.formatInline.exec(a,d,"span","wysiwyg-font-size-"+e,c)},state:function(a,d,e){return&nbsp;b.commands.formatInline.state(a,d,"span","wysiwyg-font-size-"+e,c)},value:function(){}}})(wysihtml5);<a name="line_191"></a></li>
<li id="line_192" class="even"><span class="lineNumber">192&nbsp;</span>(function(b){var&nbsp;c=/wysiwyg-color-[a-z]+/g;b.commands.foreColor={exec:function(a,d,e){return&nbsp;b.commands.formatInline.exec(a,d,"span","wysiwyg-color-"+e,c)},state:function(a,d,e){return&nbsp;b.commands.formatInline.state(a,d,"span","wysiwyg-color-"+e,c)},value:function(){}}})(wysihtml5);<a name="line_192"></a></li>
<li id="line_193" class="odd"><span class="lineNumber">193&nbsp;</span>(function(b){function&nbsp;c(a){for(a=a.previousSibling;a&amp;&amp;a.nodeType===b.TEXT_NODE&amp;&amp;!b.lang.string(a.data).trim();)a=a.previousSibling;return&nbsp;a}function&nbsp;a(a){for(a=a.nextSibling;a&amp;&amp;a.nodeType===b.TEXT_NODE&amp;&amp;!b.lang.string(a.data).trim();)a=a.nextSibling;return&nbsp;a}function&nbsp;d(a){return"BR"===a.nodeName||"block"===g.getStyle("display").from(a)?!0:!1}function&nbsp;e(a,c,d,e){if(e)var&nbsp;f=g.observe(a,"DOMNodeInserted",function(a){var&nbsp;a=a.target,c;a.nodeType===b.ELEMENT_NODE&amp;&amp;(c=g.getStyle("display").from(a),"inline"!==<a name="line_193"></a></li>
<li id="line_194" class="even"><span class="lineNumber">194&nbsp;</span>c.substr(0,6)&amp;&amp;(a.className+="&nbsp;"+e))});a.execCommand(c,!1,d);f&amp;&amp;f.stop()}function&nbsp;f(b,d){b.selection.selectLine();b.selection.surround(d);var&nbsp;e=a(d),f=c(d);e&amp;&amp;"BR"===e.nodeName&amp;&amp;e.parentNode.removeChild(e);f&amp;&amp;"BR"===f.nodeName&amp;&amp;f.parentNode.removeChild(f);(e=d.lastChild)&amp;&amp;"BR"===e.nodeName&amp;&amp;e.parentNode.removeChild(e);b.selection.selectNode(d)}var&nbsp;g=b.dom,i="H1&nbsp;H2&nbsp;H3&nbsp;H4&nbsp;H5&nbsp;H6&nbsp;P&nbsp;BLOCKQUOTE&nbsp;DIV".split("&nbsp;");b.commands.formatBlock={exec:function(h,k,j,n,p){var&nbsp;q=h.doc,r=this.state(h,k,j,n,p),m,j="string"===<a name="line_194"></a></li>
<li id="line_195" class="odd"><span class="lineNumber">195&nbsp;</span>typeof&nbsp;j?j.toUpperCase():j;if(r)h.selection.executeAndRestoreSimple(function(){p&amp;&amp;(r.className=r.className.replace(p,""));var&nbsp;e=!!b.lang.string(r.className).trim();if(!e&amp;&amp;r.nodeName===(j||"DIV")){var&nbsp;e=r,f=e.ownerDocument,h=a(e),i=c(e);h&amp;&amp;!d(h)&amp;&amp;e.parentNode.insertBefore(f.createElement("br"),h);i&amp;&amp;!d(i)&amp;&amp;e.parentNode.insertBefore(f.createElement("br"),e);g.replaceWithChildNodes(r)}else&nbsp;e&amp;&amp;g.renameElement(r,"DIV")});else{if(null===j||b.lang.array(i).contains(j))if(m=h.selection.getSelectedNode(),<a name="line_195"></a></li>
<li id="line_196" class="even"><span class="lineNumber">196&nbsp;</span>r=g.getParentElement(m,{nodeName:i})){h.selection.executeAndRestoreSimple(function(){j&amp;&amp;(r=g.renameElement(r,j));if(n){var&nbsp;a=r;a.className?(a.className=a.className.replace(p,""),a.className+="&nbsp;"+n):a.className=n}});return}h.commands.support(k)?e(q,k,j||"DIV",n):(r=q.createElement(j||"DIV"),n&amp;&amp;(r.className=n),f(h,r))}},state:function(a,b,c,d,e){c="string"===typeof&nbsp;c?c.toUpperCase():c;a=a.selection.getSelectedNode();return&nbsp;g.getParentElement(a,{nodeName:c,className:d,classRegExp:e})},value:function(){}}})(wysihtml5);<a name="line_196"></a></li>
<li id="line_197" class="odd"><span class="lineNumber">197&nbsp;</span>(function(b){function&nbsp;c(c,f,g){var&nbsp;i=c+":"+f;if(!d[i]){var&nbsp;h=d,k=b.selection.HTMLApplier,j=a[c],c=j?[c.toLowerCase(),j.toLowerCase()]:[c.toLowerCase()];h[i]=new&nbsp;k(c,f,g,!0)}return&nbsp;d[i]}var&nbsp;a={strong:"b",em:"i",b:"strong",i:"em"},d={};b.commands.formatInline={exec:function(a,b,d,i,h){b=a.selection.getRange();if(!b)return!1;c(d,i,h).toggleRange(b);a.selection.setSelection(b)},state:function(d,f,g,i,h){var&nbsp;f=d.doc,k=a[g]||g;if(!b.dom.hasElementWithTagName(f,g)&amp;&amp;!b.dom.hasElementWithTagName(f,k)||i&amp;&amp;<a name="line_197"></a></li>
<li id="line_198" class="even"><span class="lineNumber">198&nbsp;</span>!b.dom.hasElementWithClassName(f,i))return!1;d=d.selection.getRange();return!d?!1:c(g,i,h).isAppliedToRange(d)},value:function(){}}})(wysihtml5);(function(b){b.commands.insertHTML={exec:function(b,a,d){b.commands.support(a)?b.doc.execCommand(a,!1,d):b.selection.insertHTML(d)},state:function(){return!1},value:function(){}}})(wysihtml5);<a name="line_198"></a></li>
<li id="line_199" class="odd"><span class="lineNumber">199&nbsp;</span>(function(b){b.commands.insertImage={exec:function(c,a,d){var&nbsp;d="object"===typeof&nbsp;d?d:{src:d},e=c.doc,a=this.state(c),f;if(a)c.selection.setBefore(a),d=a.parentNode,d.removeChild(a),b.dom.removeEmptyTextNodes(d),"A"===d.nodeName&amp;&amp;!d.firstChild&amp;&amp;(c.selection.setAfter(d),d.parentNode.removeChild(d)),b.quirks.redraw(c.element);else{a=e.createElement("IMG");for(f&nbsp;in&nbsp;d)a[f]=d[f];c.selection.insertNode(a);b.browser.hasProblemsSettingCaretAfterImg()?(d=e.createTextNode(b.INVISIBLE_SPACE),c.selection.insertNode(d),<a name="line_199"></a></li>
<li id="line_200" class="even"><span class="lineNumber">200&nbsp;</span>c.selection.setAfter(d)):c.selection.setAfter(a)}},state:function(c){var&nbsp;a;if(!b.dom.hasElementWithTagName(c.doc,"IMG"))return!1;a=c.selection.getSelectedNode();if(!a)return!1;if("IMG"===a.nodeName)return&nbsp;a;if(a.nodeType!==b.ELEMENT_NODE)return!1;a=c.selection.getText();if(a=b.lang.string(a).trim())return!1;c=c.selection.getNodes(b.ELEMENT_NODE,function(a){return"IMG"===a.nodeName});return&nbsp;1!==c.length?!1:c[0]},value:function(b){return(b=this.state(b))&amp;&amp;b.src}}})(wysihtml5);<a name="line_200"></a></li>
<li id="line_201" class="odd"><span class="lineNumber">201&nbsp;</span>(function(b){var&nbsp;c="&lt;br&gt;"+(b.browser.needsSpaceAfterLineBreak()?"&nbsp;":"");b.commands.insertLineBreak={exec:function(a,d){a.commands.support(d)?(a.doc.execCommand(d,!1,null),b.browser.autoScrollsToCaret()||a.selection.scrollIntoView()):a.commands.exec("insertHTML",c)},state:function(){return!1},value:function(){}}})(wysihtml5);<a name="line_201"></a></li>
<li id="line_202" class="even"><span class="lineNumber">202&nbsp;</span>(function(b){b.commands.insertOrderedList={exec:function(c,a){var&nbsp;d=c.doc,e=c.selection.getSelectedNode(),f=b.dom.getParentElement(e,{nodeName:"OL"}),g=b.dom.getParentElement(e,{nodeName:"UL"}),e="_wysihtml5-temp-"+(new&nbsp;Date).getTime(),i;c.commands.support(a)?d.execCommand(a,!1,null):f?c.selection.executeAndRestoreSimple(function(){b.dom.resolveList(f)}):g?c.selection.executeAndRestoreSimple(function(){b.dom.renameElement(g,"ol")}):(c.commands.exec("formatBlock","div",e),i=d.querySelector("."+e),<a name="line_202"></a></li>
<li id="line_203" class="odd"><span class="lineNumber">203&nbsp;</span>d=""===i.innerHTML||i.innerHTML===b.INVISIBLE_SPACE,c.selection.executeAndRestoreSimple(function(){f=b.dom.convertToList(i,"ol")}),d&amp;&amp;c.selection.selectNode(f.querySelector("li")))},state:function(c){c=c.selection.getSelectedNode();return&nbsp;b.dom.getParentElement(c,{nodeName:"OL"})},value:function(){}}})(wysihtml5);<a name="line_203"></a></li>
<li id="line_204" class="even"><span class="lineNumber">204&nbsp;</span>(function(b){b.commands.insertUnorderedList={exec:function(c,a){var&nbsp;d=c.doc,e=c.selection.getSelectedNode(),f=b.dom.getParentElement(e,{nodeName:"UL"}),g=b.dom.getParentElement(e,{nodeName:"OL"}),e="_wysihtml5-temp-"+(new&nbsp;Date).getTime(),i;c.commands.support(a)?d.execCommand(a,!1,null):f?c.selection.executeAndRestoreSimple(function(){b.dom.resolveList(f)}):g?c.selection.executeAndRestoreSimple(function(){b.dom.renameElement(g,"ul")}):(c.commands.exec("formatBlock","div",e),i=d.querySelector("."+e),<a name="line_204"></a></li>
<li id="line_205" class="odd"><span class="lineNumber">205&nbsp;</span>d=""===i.innerHTML||i.innerHTML===b.INVISIBLE_SPACE,c.selection.executeAndRestoreSimple(function(){f=b.dom.convertToList(i,"ul")}),d&amp;&amp;c.selection.selectNode(f.querySelector("li")))},state:function(c){c=c.selection.getSelectedNode();return&nbsp;b.dom.getParentElement(c,{nodeName:"UL"})},value:function(){}}})(wysihtml5);(function(b){b.commands.italic={exec:function(c,a){return&nbsp;b.commands.formatInline.exec(c,a,"i")},state:function(c,a){return&nbsp;b.commands.formatInline.state(c,a,"i")},value:function(){}}})(wysihtml5);<a name="line_205"></a></li>
<li id="line_206" class="even"><span class="lineNumber">206&nbsp;</span>(function(b){var&nbsp;c=/wysiwyg-text-align-[a-z]+/g;b.commands.justifyCenter={exec:function(a){return&nbsp;b.commands.formatBlock.exec(a,"formatBlock",null,"wysiwyg-text-align-center",c)},state:function(a){return&nbsp;b.commands.formatBlock.state(a,"formatBlock",null,"wysiwyg-text-align-center",c)},value:function(){}}})(wysihtml5);<a name="line_206"></a></li>
<li id="line_207" class="odd"><span class="lineNumber">207&nbsp;</span>(function(b){var&nbsp;c=/wysiwyg-text-align-[a-z]+/g;b.commands.justifyLeft={exec:function(a){return&nbsp;b.commands.formatBlock.exec(a,"formatBlock",null,"wysiwyg-text-align-left",c)},state:function(a){return&nbsp;b.commands.formatBlock.state(a,"formatBlock",null,"wysiwyg-text-align-left",c)},value:function(){}}})(wysihtml5);<a name="line_207"></a></li>
<li id="line_208" class="even"><span class="lineNumber">208&nbsp;</span>(function(b){var&nbsp;c=/wysiwyg-text-align-[a-z]+/g;b.commands.justifyRight={exec:function(a){return&nbsp;b.commands.formatBlock.exec(a,"formatBlock",null,"wysiwyg-text-align-right",c)},state:function(a){return&nbsp;b.commands.formatBlock.state(a,"formatBlock",null,"wysiwyg-text-align-right",c)},value:function(){}}})(wysihtml5);(function(b){b.commands.underline={exec:function(c,a){return&nbsp;b.commands.formatInline.exec(c,a,"u")},state:function(c,a){return&nbsp;b.commands.formatInline.state(c,a,"u")},value:function(){}}})(wysihtml5);<a name="line_208"></a></li>
<li id="line_209" class="odd"><span class="lineNumber">209&nbsp;</span>(function(b){var&nbsp;c='&lt;span&nbsp;id="_wysihtml5-undo"&nbsp;class="_wysihtml5-temp"&gt;'+b.INVISIBLE_SPACE+"&lt;/span&gt;",a='&lt;span&nbsp;id="_wysihtml5-redo"&nbsp;class="_wysihtml5-temp"&gt;'+b.INVISIBLE_SPACE+"&lt;/span&gt;",d=b.dom;b.UndoManager=b.lang.Dispatcher.extend({constructor:function(a){this.editor=a;this.composer=a.composer;this.element=this.composer.element;this.history=[this.composer.getValue()];this.position=1;this.composer.commands.support("insertHTML")&amp;&amp;this._observe()},_observe:function(){var&nbsp;e=this,f=this.composer.sandbox.getDocument(),<a name="line_209"></a></li>
<li id="line_210" class="even"><span class="lineNumber">210&nbsp;</span>g;d.observe(this.element,"keydown",function(a){if(!(a.altKey||!a.ctrlKey&amp;&amp;!a.metaKey)){var&nbsp;b=a.keyCode,c=90===b&amp;&amp;a.shiftKey||89===b;90===b&amp;&amp;!a.shiftKey?(e.undo(),a.preventDefault()):c&amp;&amp;(e.redo(),a.preventDefault())}});d.observe(this.element,"keydown",function(a){a=a.keyCode;a!==g&amp;&amp;(g=a,(8===a||46===a)&amp;&amp;e.transact())});if(b.browser.hasUndoInContextMenu()){var&nbsp;i,h,k=function(){for(var&nbsp;a;a=f.querySelector("._wysihtml5-temp");)a.parentNode.removeChild(a);clearInterval(i)};d.observe(this.element,"contextmenu",<a name="line_210"></a></li>
<li id="line_211" class="odd"><span class="lineNumber">211&nbsp;</span>function(){k();e.composer.selection.executeAndRestoreSimple(function(){e.element.lastChild&amp;&amp;e.composer.selection.setAfter(e.element.lastChild);f.execCommand("insertHTML",!1,c);f.execCommand("insertHTML",!1,a);f.execCommand("undo",!1,null)});i=setInterval(function(){f.getElementById("_wysihtml5-redo")?(k(),e.redo()):f.getElementById("_wysihtml5-undo")||(k(),e.undo())},400);h||(h=!0,d.observe(document,"mousedown",k),d.observe(f,["mousedown","paste","cut","copy"],k))})}this.editor.observe("newword:composer",<a name="line_211"></a></li>
<li id="line_212" class="even"><span class="lineNumber">212&nbsp;</span>function(){e.transact()}).observe("beforecommand:composer",function(){e.transact()})},transact:function(){var&nbsp;a=this.history[this.position-1],b=this.composer.getValue();if(b!=a){if(40&lt;(this.history.length=this.position))this.history.shift(),this.position--;this.position++;this.history.push(b)}},undo:function(){this.transact();1&gt;=this.position||(this.set(this.history[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.position&gt;=this.history.length||(this.set(this.history[++this.position-<a name="line_212"></a></li>
<li id="line_213" class="odd"><span class="lineNumber">213&nbsp;</span>1]),this.editor.fire("redo:composer"))},set:function(a){this.composer.setValue(a);this.editor.focus(!0)}})})(wysihtml5);<a name="line_213"></a></li>
<li id="line_214" class="even"><span class="lineNumber">214&nbsp;</span>wysihtml5.views.View=Base.extend({constructor:function(b,c,a){this.parent=b;this.element=c;this.config=a;this._observeViewChange()},_observeViewChange:function(){var&nbsp;b=this;this.parent.observe("beforeload",function(){b.parent.observe("change_view",function(c){c===b.name?(b.parent.currentView=b,b.show(),setTimeout(function(){b.focus()},0)):b.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(b){}},hide:function(){this.element.style.display=<a name="line_214"></a></li>
<li id="line_215" class="odd"><span class="lineNumber">215&nbsp;</span>"none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}});<a name="line_215"></a></li>
<li id="line_216" class="even"><span class="lineNumber">216&nbsp;</span>(function(b){var&nbsp;c=b.dom,a=b.browser;b.views.Composer=b.views.View.extend({name:"composer",CARET_HACK:"&lt;br&gt;",constructor:function(a,b,c){this.base(a,b,c);this.textarea=this.parent.textarea;this._initSandbox()},clear:function(){this.element.innerHTML=a.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(a){var&nbsp;c=this.isEmpty()?"":b.quirks.getCorrectInnerHTML(this.element);a&amp;&amp;(c=this.parent.parse(c));return&nbsp;c=b.lang.string(c).replace(b.INVISIBLE_SPACE).by("")},setValue:function(a,<a name="line_216"></a></li>
<li id="line_217" class="odd"><span class="lineNumber">217&nbsp;</span>b){b&amp;&amp;(a=this.parent.parse(a));this.element.innerHTML=a},show:function(){this.iframe.style.display=this._displayStyle||"";this.disable();this.enable()},hide:function(){this._displayStyle=c.getStyle("display").from(this.iframe);"none"===this._displayStyle&amp;&amp;(this._displayStyle=null);this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable");this.base()},enable:function(){this.element.setAttribute("contentEditable","true");this.base()},focus:function(a){b.browser.doesAsyncFocus()&amp;&amp;<a name="line_217"></a></li>
<li id="line_218" class="even"><span class="lineNumber">218&nbsp;</span>this.hasPlaceholderSet()&amp;&amp;this.clear();this.base();var&nbsp;c=this.element.lastChild;a&amp;&amp;c&amp;&amp;("BR"===c.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return&nbsp;c.getTextContent(this.element)},hasPlaceholderSet:function(){return&nbsp;this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var&nbsp;a=this.element.innerHTML;return""===a||a===this.CARET_HACK||this.hasPlaceholderSet()||""===this.getTextContent()&amp;&amp;<a name="line_218"></a></li>
<li id="line_219" class="odd"><span class="lineNumber">219&nbsp;</span>!this.element.querySelector("blockquote,&nbsp;ul,&nbsp;ol,&nbsp;img,&nbsp;embed,&nbsp;object,&nbsp;table,&nbsp;iframe,&nbsp;svg,&nbsp;video,&nbsp;audio,&nbsp;button,&nbsp;input,&nbsp;select,&nbsp;textarea")},_initSandbox:function(){var&nbsp;a=this;this.sandbox=new&nbsp;c.Sandbox(function(){a._create()},{stylesheets:this.config.stylesheets});this.iframe=this.sandbox.getIframe();var&nbsp;b=document.createElement("input");b.type="hidden";b.name="_wysihtml5_mode";b.value=1;var&nbsp;f=this.textarea.element;c.insert(this.iframe).after(f);c.insert(b).after(f)},_create:function(){var&nbsp;d=this;this.doc=<a name="line_219"></a></li>
<li id="line_220" class="even"><span class="lineNumber">220&nbsp;</span>this.sandbox.getDocument();this.element=this.doc.body;this.textarea=this.parent.textarea;this.element.innerHTML=this.textarea.getValue(!0);this.enable();this.selection=new&nbsp;b.Selection(this.parent);this.commands=new&nbsp;b.Commands(this.parent);c.copyAttributes("className&nbsp;spellcheck&nbsp;title&nbsp;lang&nbsp;dir&nbsp;accessKey".split("&nbsp;")).from(this.textarea.element).to(this.element);c.addClass(this.element,this.config.composerClassName);this.config.style&amp;&amp;this.style();this.observe();var&nbsp;e=this.config.name;e&amp;&amp;(c.addClass(this.element,<a name="line_220"></a></li>
<li id="line_221" class="odd"><span class="lineNumber">221&nbsp;</span>e),c.addClass(this.iframe,e));(e="string"===typeof&nbsp;this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder"))&amp;&amp;c.simulatePlaceholder(this.parent,this,e);this.commands.exec("styleWithCSS",!1);this._initAutoLinking();this._initObjectResizing();this._initUndoManager();(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&amp;&amp;setTimeout(function(){d.focus()},100);b.quirks.insertLineBreakOnReturn(this);a.clearsContentEditableCorrectly()||<a name="line_221"></a></li>
<li id="line_222" class="even"><span class="lineNumber">222&nbsp;</span>b.quirks.ensureProperClearing(this);a.clearsListsInContentEditableCorrectly()||b.quirks.ensureProperClearingOfLists(this);this.initSync&amp;&amp;this.config.sync&amp;&amp;this.initSync();this.textarea.hide();this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var&nbsp;d=this,e=a.canDisableAutoLinking(),f=a.doesAutoLinkingInContentEditable();e&amp;&amp;this.commands.exec("autoUrlDetect",!1);if(this.config.autoLink){(!f||f&amp;&amp;e)&amp;&amp;this.parent.observe("newword:composer",function(){d.selection.executeAndRestore(function(a,<a name="line_222"></a></li>
<li id="line_223" class="odd"><span class="lineNumber">223&nbsp;</span>b){c.autoLink(b.parentNode)})});var&nbsp;g=this.sandbox.getDocument().getElementsByTagName("a"),i=c.autoLink.URL_REG_EXP,h=function(a){a=b.lang.string(c.getTextContent(a)).trim();"www."===a.substr(0,4)&amp;&amp;(a="http://"+a);return&nbsp;a};c.observe(this.element,"keydown",function(a){if(g.length){var&nbsp;a=d.selection.getSelectedNode(a.target.ownerDocument),b=c.getParentElement(a,{nodeName:"A"},4),e;b&amp;&amp;(e=h(b),setTimeout(function(){var&nbsp;a=h(b);a!==e&amp;&amp;a.match(i)&amp;&amp;b.setAttribute("href",a)},0))}})}},_initObjectResizing:function(){var&nbsp;d=<a name="line_223"></a></li>
<li id="line_224" class="even"><span class="lineNumber">224&nbsp;</span>["width","height"],e=d.length,f=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing);this.config.allowObjectResizing?a.supportsEvent("resizeend")&amp;&amp;c.observe(f,"resizeend",function(a){for(var&nbsp;a=a.target||a.srcElement,c=a.style,h=0,k;h&lt;e;h++)k=d[h],c[k]&amp;&amp;(a.setAttribute(k,parseInt(c[k],10)),c[k]="");b.quirks.redraw(f)}):a.supportsEvent("resizestart")&amp;&amp;c.observe(f,"resizestart",function(a){a.preventDefault()})},_initUndoManager:function(){new&nbsp;b.UndoManager(this.parent)}})})(wysihtml5);<a name="line_224"></a></li>
<li id="line_225" class="odd"><span class="lineNumber">225&nbsp;</span>(function(b){var&nbsp;c=b.dom,a=document,d=window,e=a.createElement("div"),f="background-color&nbsp;color&nbsp;cursor&nbsp;font-family&nbsp;font-size&nbsp;font-style&nbsp;font-variant&nbsp;font-weight&nbsp;line-height&nbsp;letter-spacing&nbsp;text-align&nbsp;text-decoration&nbsp;text-indent&nbsp;text-rendering&nbsp;word-break&nbsp;word-wrap&nbsp;word-spacing".split("&nbsp;"),g="background-color&nbsp;border-collapse&nbsp;border-bottom-color&nbsp;border-bottom-style&nbsp;border-bottom-width&nbsp;border-left-color&nbsp;border-left-style&nbsp;border-left-width&nbsp;border-right-color&nbsp;border-right-style&nbsp;border-right-width&nbsp;border-top-color&nbsp;border-top-style&nbsp;border-top-width&nbsp;clear&nbsp;display&nbsp;float&nbsp;margin-bottom&nbsp;margin-left&nbsp;margin-right&nbsp;margin-top&nbsp;outline-color&nbsp;outline-offset&nbsp;outline-width&nbsp;outline-style&nbsp;padding-left&nbsp;padding-right&nbsp;padding-top&nbsp;padding-bottom&nbsp;position&nbsp;top&nbsp;left&nbsp;right&nbsp;bottom&nbsp;z-index&nbsp;vertical-align&nbsp;text-align&nbsp;-webkit-box-sizing&nbsp;-moz-box-sizing&nbsp;-ms-box-sizing&nbsp;box-sizing&nbsp;-webkit-box-shadow&nbsp;-moz-box-shadow&nbsp;-ms-box-shadow&nbsp;box-shadow&nbsp;-webkit-border-top-right-radius&nbsp;-moz-border-radius-topright&nbsp;border-top-right-radius&nbsp;-webkit-border-bottom-right-radius&nbsp;-moz-border-radius-bottomright&nbsp;border-bottom-right-radius&nbsp;-webkit-border-bottom-left-radius&nbsp;-moz-border-radius-bottomleft&nbsp;border-bottom-left-radius&nbsp;-webkit-border-top-left-radius&nbsp;-moz-border-radius-topleft&nbsp;border-top-left-radius&nbsp;width&nbsp;height".split("&nbsp;"),<a name="line_225"></a></li>
<li id="line_226" class="even"><span class="lineNumber">226&nbsp;</span>i="width&nbsp;height&nbsp;top&nbsp;left&nbsp;right&nbsp;bottom".split("&nbsp;"),h=["html&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;height:&nbsp;100%;&nbsp;}","body&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;min-height:&nbsp;100%;&nbsp;padding:&nbsp;0;&nbsp;margin:&nbsp;0;&nbsp;margin-top:&nbsp;-1px;&nbsp;padding-top:&nbsp;1px;&nbsp;}","._wysihtml5-temp&nbsp;{&nbsp;display:&nbsp;none;&nbsp;}",b.browser.isGecko?"body.placeholder&nbsp;{&nbsp;color:&nbsp;graytext&nbsp;!important;&nbsp;}":"body.placeholder&nbsp;{&nbsp;color:&nbsp;#a9a9a9&nbsp;!important;&nbsp;}","body[disabled]&nbsp;&nbsp;&nbsp;{&nbsp;background-color:&nbsp;#eee&nbsp;!important;&nbsp;color:&nbsp;#999&nbsp;!important;&nbsp;cursor:&nbsp;default&nbsp;!important;&nbsp;}","img:-moz-broken&nbsp;&nbsp;{&nbsp;-moz-force-broken-image-icon:&nbsp;1;&nbsp;height:&nbsp;24px;&nbsp;width:&nbsp;24px;&nbsp;}"],<a name="line_226"></a></li>
<li id="line_227" class="odd"><span class="lineNumber">227&nbsp;</span>k=function(b){if(b.setActive)try{b.setActive()}catch(e){}else{var&nbsp;f=b.style,h=a.documentElement.scrollTop||a.body.scrollTop,g=a.documentElement.scrollLeft||a.body.scrollLeft,f={position:f.position,top:f.top,left:f.left,WebkitUserSelect:f.WebkitUserSelect};c.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(b);b.focus();c.setStyles(f).on(b);d.scrollTo&amp;&amp;d.scrollTo(g,h)}};b.views.Composer.prototype.style=function(){var&nbsp;j=this,n=a.querySelector(":focus"),p=this.textarea.element,<a name="line_227"></a></li>
<li id="line_228" class="even"><span class="lineNumber">228&nbsp;</span>q=p.hasAttribute("placeholder"),r=q&amp;&amp;p.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||e.cloneNode(!1);this.blurStylesHost=this.blurStylesHost||e.cloneNode(!1);q&amp;&amp;p.removeAttribute("placeholder");p===n&amp;&amp;p.blur();c.copyStyles(g).from(p).to(this.iframe).andTo(this.blurStylesHost);c.copyStyles(f).from(p).to(this.element).andTo(this.blurStylesHost);c.insertCSS(h).into(this.element.ownerDocument);k(p);c.copyStyles(g).from(p).to(this.focusStylesHost);c.copyStyles(f).from(p).to(this.focusStylesHost);<a name="line_228"></a></li>
<li id="line_229" class="odd"><span class="lineNumber">229&nbsp;</span>var&nbsp;m=b.lang.array(g).without(["display"]);n?n.focus():p.blur();q&amp;&amp;p.setAttribute("placeholder",r);if(!b.browser.hasCurrentStyleProperty())var&nbsp;s=c.observe(d,"resize",function(){if(c.contains(document.documentElement,j.iframe)){var&nbsp;a=c.getStyle("display").from(p),b=c.getStyle("display").from(j.iframe);p.style.display="";j.iframe.style.display="none";c.copyStyles(i).from(p).to(j.iframe).andTo(j.focusStylesHost).andTo(j.blurStylesHost);j.iframe.style.display=b;p.style.display=a}else&nbsp;s.stop()});this.parent.observe("focus:composer",<a name="line_229"></a></li>
<li id="line_230" class="even"><span class="lineNumber">230&nbsp;</span>function(){c.copyStyles(m).from(j.focusStylesHost).to(j.iframe);c.copyStyles(f).from(j.focusStylesHost).to(j.element)});this.parent.observe("blur:composer",function(){c.copyStyles(m).from(j.blurStylesHost).to(j.iframe);c.copyStyles(f).from(j.blurStylesHost).to(j.element)});return&nbsp;this}})(wysihtml5);<a name="line_230"></a></li>
<li id="line_231" class="odd"><span class="lineNumber">231&nbsp;</span>(function(b){var&nbsp;c=b.dom,a=b.browser,d={66:"bold",73:"italic",85:"underline"};b.views.Composer.prototype.observe=function(){var&nbsp;e=this,f=this.getValue(),g=this.sandbox.getIframe(),i=this.element,h=a.supportsEventsInIframeCorrectly()?i:this.sandbox.getWindow(),k=a.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];c.observe(g,"DOMNodeRemoved",function(){clearInterval(j);e.parent.fire("destroy:composer")});var&nbsp;j=setInterval(function(){c.contains(document.documentElement,g)||(clearInterval(j),<a name="line_231"></a></li>
<li id="line_232" class="even"><span class="lineNumber">232&nbsp;</span>e.parent.fire("destroy:composer"))},250);c.observe(h,"focus",function(){e.parent.fire("focus").fire("focus:composer");setTimeout(function(){f=e.getValue()},0)});c.observe(h,"blur",function(){f!==e.getValue()&amp;&amp;e.parent.fire("change").fire("change:composer");e.parent.fire("blur").fire("blur:composer")});b.browser.isIos()&amp;&amp;c.observe(i,"blur",function(){var&nbsp;a=i.ownerDocument.createElement("input"),b=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.scrollLeft||document.body.scrollLeft;<a name="line_232"></a></li>
<li id="line_233" class="odd"><span class="lineNumber">233&nbsp;</span>try{e.selection.insertNode(a)}catch(d){i.appendChild(a)}a.focus();a.parentNode.removeChild(a);window.scrollTo(c,b)});c.observe(i,"dragenter",function(){e.parent.fire("unset_placeholder")});a.firesOnDropOnlyWhenOnDragOverIsCancelled()&amp;&amp;c.observe(i,["dragover","dragenter"],function(a){a.preventDefault()});c.observe(i,k,function(b){var&nbsp;c=b.dataTransfer,d;c&amp;&amp;a.supportsDataTransfer()&amp;&amp;(d=c.getData("text/html")||c.getData("text/plain"));d?(i.focus(),e.commands.exec("insertHTML",d),e.parent.fire("paste").fire("paste:composer"),<a name="line_233"></a></li>
<li id="line_234" class="even"><span class="lineNumber">234&nbsp;</span>b.stopPropagation(),b.preventDefault()):setTimeout(function(){e.parent.fire("paste").fire("paste:composer")},0)});c.observe(i,"keyup",function(a){a=a.keyCode;(a===b.SPACE_KEY||a===b.ENTER_KEY)&amp;&amp;e.parent.fire("newword:composer")});this.parent.observe("paste:composer",function(){setTimeout(function(){e.parent.fire("newword:composer")},0)});a.canSelectImagesInContentEditable()||c.observe(i,"mousedown",function(a){var&nbsp;b=a.target;"IMG"===b.nodeName&amp;&amp;(e.selection.selectNode(b),a.preventDefault())});c.observe(i,<a name="line_234"></a></li>
<li id="line_235" class="odd"><span class="lineNumber">235&nbsp;</span>"keydown",function(a){var&nbsp;b=d[a.keyCode];if((a.ctrlKey||a.metaKey)&amp;&amp;!a.altKey&amp;&amp;b)e.commands.exec(b),a.preventDefault()});c.observe(i,"keydown",function(a){var&nbsp;c=e.selection.getSelectedNode(!0),d=a.keyCode;if(c&amp;&amp;"IMG"===c.nodeName&amp;&amp;(d===b.BACKSPACE_KEY||d===b.DELETE_KEY))d=c.parentNode,d.removeChild(c),"A"===d.nodeName&amp;&amp;!d.firstChild&amp;&amp;d.parentNode.removeChild(d),setTimeout(function(){b.quirks.redraw(i)},0),a.preventDefault()});var&nbsp;n={IMG:"Image:&nbsp;",A:"Link:&nbsp;"};c.observe(i,"mouseover",function(a){var&nbsp;a=<a name="line_235"></a></li>
<li id="line_236" class="even"><span class="lineNumber">236&nbsp;</span>a.target,b=a.nodeName;!("A"!==b&amp;&amp;"IMG"!==b)&amp;&amp;!a.hasAttribute("title")&amp;&amp;(b=n[b]+(a.getAttribute("href")||a.getAttribute("src")),a.setAttribute("title",b))})}})(wysihtml5);<a name="line_236"></a></li>
<li id="line_237" class="odd"><span class="lineNumber">237&nbsp;</span>(function(b){b.views.Synchronizer=Base.extend({constructor:function(b,a,d){this.editor=b;this.textarea=a;this.composer=d;this._observe()},fromComposerToTextarea:function(c){this.textarea.setValue(b.lang.string(this.composer.getValue()).trim(),c)},fromTextareaToComposer:function(b){var&nbsp;a=this.textarea.getValue();a?this.composer.setValue(a,b):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(b){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(b):this.fromComposerToTextarea(b)},<a name="line_237"></a></li>
<li id="line_238" class="even"><span class="lineNumber">238&nbsp;</span>_observe:function(){var&nbsp;c,a=this,d=this.textarea.element.form,e=function(){c=setInterval(function(){a.fromComposerToTextarea()},400)},f=function(){clearInterval(c);c=null};e();d&amp;&amp;(b.dom.observe(d,"submit",function(){a.sync(!0)}),b.dom.observe(d,"reset",function(){setTimeout(function(){a.fromTextareaToComposer()},0)}));this.editor.observe("change_view",function(b){if(b==="composer"&amp;&amp;!c){a.fromTextareaToComposer(true);e()}else&nbsp;if(b==="textarea"){a.fromComposerToTextarea(true);f()}});this.editor.observe("destroy:composer",<a name="line_238"></a></li>
<li id="line_239" class="odd"><span class="lineNumber">239&nbsp;</span>f)}})})(wysihtml5);<a name="line_239"></a></li>
<li id="line_240" class="even"><span class="lineNumber">240&nbsp;</span>wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(b,c,a){this.base(b,c,a);this._observe()},clear:function(){this.element.value=""},getValue:function(b){var&nbsp;c=this.isEmpty()?"":this.element.value;b&amp;&amp;(c=this.parent.parse(c));return&nbsp;c},setValue:function(b,c){c&amp;&amp;(b=this.parent.parse(b));this.element.value=b},hasPlaceholderSet:function(){var&nbsp;b=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),c=this.element.getAttribute("placeholder")||null,a=this.element.value;<a name="line_240"></a></li>
<li id="line_241" class="odd"><span class="lineNumber">241&nbsp;</span>return&nbsp;b&amp;&amp;!a||a===c},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var&nbsp;b=this.element,c=this.parent,a={focusin:"focus",focusout:"blur"},d=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];c.observe("beforeload",function(){wysihtml5.dom.observe(b,d,function(b){b=a[b.type]||b.type;c.fire(b).fire(b+":textarea")});wysihtml5.dom.observe(b,["paste","drop"],function(){setTimeout(function(){c.fire("paste").fire("paste:textarea")},<a name="line_241"></a></li>
<li id="line_242" class="even"><span class="lineNumber">242&nbsp;</span>0)})})}});<a name="line_242"></a></li>
<li id="line_243" class="odd"><span class="lineNumber">243&nbsp;</span>(function(b){var&nbsp;c=b.dom;b.toolbar.Dialog=b.lang.Dispatcher.extend({constructor:function(a,b){this.link=a;this.container=b},_observe:function(){if(!this._observed){var&nbsp;a=this,d=function(b){var&nbsp;c=a._serialize();c==a.elementToChange?a.fire("edit",c):a.fire("save",c);a.hide();b.preventDefault();b.stopPropagation()};c.observe(a.link,"click",function(){c.hasClass(a.link,"wysihtml5-command-dialog-opened")&amp;&amp;setTimeout(function(){a.hide()},0)});c.observe(this.container,"keydown",function(c){var&nbsp;e=c.keyCode;<a name="line_243"></a></li>
<li id="line_244" class="even"><span class="lineNumber">244&nbsp;</span>e===b.ENTER_KEY&amp;&amp;d(c);e===b.ESCAPE_KEY&amp;&amp;a.hide()});c.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",d);c.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(b){a.fire("cancel");a.hide();b.preventDefault();b.stopPropagation()});for(var&nbsp;e=this.container.querySelectorAll("input,&nbsp;select,&nbsp;textarea"),f=0,g=e.length,i=function(){clearInterval(a.interval)};f&lt;g;f++)c.observe(e[f],"change",i);this._observed=!0}},_serialize:function(){for(var&nbsp;a=this.elementToChange||<a name="line_244"></a></li>
<li id="line_245" class="odd"><span class="lineNumber">245&nbsp;</span>{},b=this.container.querySelectorAll("[data-wysihtml5-dialog-field]"),c=b.length,f=0;f&lt;c;f++)a[b[f].getAttribute("data-wysihtml5-dialog-field")]=b[f].value;return&nbsp;a},_interpolate:function(a){for(var&nbsp;b,c,f=document.querySelector(":focus"),g=this.container.querySelectorAll("[data-wysihtml5-dialog-field]"),i=g.length,h=0;h&lt;i;h++)b=g[h],b!==f&amp;&amp;!(a&amp;&amp;"hidden"===b.type)&amp;&amp;(c=b.getAttribute("data-wysihtml5-dialog-field"),c=this.elementToChange?this.elementToChange[c]||"":b.defaultValue,b.value=c)},show:function(a){var&nbsp;b=<a name="line_245"></a></li>
<li id="line_246" class="even"><span class="lineNumber">246&nbsp;</span>this,e=this.container.querySelector("input,&nbsp;select,&nbsp;textarea");this.elementToChange=a;this._observe();this._interpolate();a&amp;&amp;(this.interval=setInterval(function(){b._interpolate(!0)},500));c.addClass(this.link,"wysihtml5-command-dialog-opened");this.container.style.display="";this.fire("show");if(e&amp;&amp;!a)try{e.focus()}catch(f){}},hide:function(){clearInterval(this.interval);this.elementToChange=null;c.removeClass(this.link,"wysihtml5-command-dialog-opened");this.container.style.display="none";this.fire("hide")}})})(wysihtml5);<a name="line_246"></a></li>
<li id="line_247" class="odd"><span class="lineNumber">247&nbsp;</span>(function(b){var&nbsp;c=b.dom,a={position:"relative"},d={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},e={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},f={"x-webkit-speech":"",speech:""};b.toolbar.Speech=function(g,i){var&nbsp;h=document.createElement("input");if(b.browser.supportsSpeechApiOn(h)){var&nbsp;k=document.createElement("div");b.lang.object(d).merge({width:i.offsetWidth+"px",height:i.offsetHeight+<a name="line_247"></a></li>
<li id="line_248" class="even"><span class="lineNumber">248&nbsp;</span>"px"});c.insert(h).into(k);c.insert(k).into(i);c.setStyles(e).on(h);c.setAttributes(f).on(h);c.setStyles(d).on(k);c.setStyles(a).on(i);c.observe(h,"onwebkitspeechchange"in&nbsp;h?"webkitspeechchange":"speechchange",function(){g.execCommand("insertText",h.value);h.value=""});c.observe(h,"click",function(a){c.hasClass(i,"wysihtml5-command-disabled")&amp;&amp;a.preventDefault();a.stopPropagation()})}else&nbsp;i.style.display="none"}})(wysihtml5);<a name="line_248"></a></li>
<li id="line_249" class="odd"><span class="lineNumber">249&nbsp;</span>(function(b){var&nbsp;c=b.dom;b.toolbar.Toolbar=Base.extend({constructor:function(a,c){this.editor=a;this.container="string"===typeof&nbsp;c?document.getElementById(c):c;this.composer=a.composer;this._getLinks("command");this._getLinks("action");this._observe();this.show();for(var&nbsp;e=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),f=e.length,g=0;g&lt;f;g++)new&nbsp;b.toolbar.Speech(this,e[g])},_getLinks:function(a){for(var&nbsp;c=this[a+"Links"]=b.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+<a name="line_249"></a></li>
<li id="line_250" class="even"><span class="lineNumber">250&nbsp;</span>a+"]")).get(),e=c.length,f=0,g=this[a+"Mapping"]={},i,h,k,j,n;f&lt;e;f++)i=c[f],k=i.getAttribute("data-wysihtml5-"+a),j=i.getAttribute("data-wysihtml5-"+a+"-value"),h=this.container.querySelector("[data-wysihtml5-"+a+"-group='"+k+"']"),n=this._getDialog(i,k),g[k+":"+j]={link:i,group:h,name:k,value:j,dialog:n,state:!1}},_getDialog:function(a,c){var&nbsp;e=this,f=this.container.querySelector("[data-wysihtml5-dialog='"+c+"']"),g,i;f&amp;&amp;(g=new&nbsp;b.toolbar.Dialog(a,f),g.observe("show",function(){i=e.composer.selection.getBookmark();<a name="line_250"></a></li>
<li id="line_251" class="odd"><span class="lineNumber">251&nbsp;</span>e.editor.fire("show:dialog",{command:c,dialogContainer:f,commandLink:a})}),g.observe("save",function(b){i&amp;&amp;e.composer.selection.setBookmark(i);e._execCommand(c,b);e.editor.fire("save:dialog",{command:c,dialogContainer:f,commandLink:a})}),g.observe("cancel",function(){e.editor.focus(!1);e.editor.fire("cancel:dialog",{command:c,dialogContainer:f,commandLink:a})}));return&nbsp;g},execCommand:function(a,b){if(!this.commandsDisabled){var&nbsp;c=this.commandMapping[a+":"+b];c&amp;&amp;c.dialog&amp;&amp;!c.state?c.dialog.show():<a name="line_251"></a></li>
<li id="line_252" class="even"><span class="lineNumber">252&nbsp;</span>this._execCommand(a,b)}},_execCommand:function(a,b){this.editor.focus(!1);this.composer.commands.exec(a,b);this._updateLinkStates()},execAction:function(a){var&nbsp;b=this.editor;switch(a){case&nbsp;"change_view":b.currentView===b.textarea?b.fire("change_view","composer"):b.fire("change_view","textarea")}},_observe:function(){for(var&nbsp;a=this,b=this.editor,e=this.container,f=this.commandLinks.concat(this.actionLinks),g=f.length,i=0;i&lt;g;i++)c.setAttributes({href:"javascript:;",unselectable:"on"}).on(f[i]);c.delegate(e,<a name="line_252"></a></li>
<li id="line_253" class="odd"><span class="lineNumber">253&nbsp;</span>"[data-wysihtml5-command]","mousedown",function(a){a.preventDefault()});c.delegate(e,"[data-wysihtml5-command]","click",function(b){var&nbsp;c=this.getAttribute("data-wysihtml5-command"),d=this.getAttribute("data-wysihtml5-command-value");a.execCommand(c,d);b.preventDefault()});c.delegate(e,"[data-wysihtml5-action]","click",function(b){var&nbsp;c=this.getAttribute("data-wysihtml5-action");a.execAction(c);b.preventDefault()});b.observe("focus:composer",function(){a.bookmark=null;clearInterval(a.interval);a.interval=<a name="line_253"></a></li>
<li id="line_254" class="even"><span class="lineNumber">254&nbsp;</span>setInterval(function(){a._updateLinkStates()},500)});b.observe("blur:composer",function(){clearInterval(a.interval)});b.observe("destroy:composer",function(){clearInterval(a.interval)});b.observe("change_view",function(b){setTimeout(function(){a.commandsDisabled="composer"!==b;a._updateLinkStates();a.commandsDisabled?c.addClass(e,"wysihtml5-commands-disabled"):c.removeClass(e,"wysihtml5-commands-disabled")},0)})},_updateLinkStates:function(){var&nbsp;a=this.commandMapping,d=this.actionMapping,e,f,g;for(e&nbsp;in&nbsp;a)if(g=<a name="line_254"></a></li>
<li id="line_255" class="odd"><span class="lineNumber">255&nbsp;</span>a[e],this.commandsDisabled?(f=!1,c.removeClass(g.link,"wysihtml5-command-active"),g.group&amp;&amp;c.removeClass(g.group,"wysihtml5-command-active"),g.dialog&amp;&amp;g.dialog.hide()):(f=this.composer.commands.state(g.name,g.value),b.lang.object(f).isArray()&amp;&amp;(f=1===f.length?f[0]:!0),c.removeClass(g.link,"wysihtml5-command-disabled"),g.group&amp;&amp;c.removeClass(g.group,"wysihtml5-command-disabled")),g.state!==f)(g.state=f)?(c.addClass(g.link,"wysihtml5-command-active"),g.group&amp;&amp;c.addClass(g.group,"wysihtml5-command-active"),<a name="line_255"></a></li>
<li id="line_256" class="even"><span class="lineNumber">256&nbsp;</span>g.dialog&amp;&amp;("object"===typeof&nbsp;f?g.dialog.show(f):g.dialog.hide())):(c.removeClass(g.link,"wysihtml5-command-active"),g.group&amp;&amp;c.removeClass(g.group,"wysihtml5-command-active"),g.dialog&amp;&amp;g.dialog.hide());for(e&nbsp;in&nbsp;d)a=d[e],"change_view"===a.name&amp;&amp;(a.state=this.editor.currentView===this.editor.textarea,a.state?c.addClass(a.link,"wysihtml5-action-active"):c.removeClass(a.link,"wysihtml5-action-active"))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})})(wysihtml5);<a name="line_256"></a></li>
<li id="line_257" class="odd"><span class="lineNumber">257&nbsp;</span>(function(b){var&nbsp;c={name:void&nbsp;0,style:!0,toolbar:void&nbsp;0,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:b.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:void&nbsp;0,allowObjectResizing:!0,supportTouchDevices:!0};b.Editor=b.lang.Dispatcher.extend({constructor:function(a,d){this.textareaElement="string"===typeof&nbsp;a?document.getElementById(a):a;this.config=b.lang.object({}).merge(c).merge(d).get();this.currentView=<a name="line_257"></a></li>
<li id="line_258" class="even"><span class="lineNumber">258&nbsp;</span>this.textarea=new&nbsp;b.views.Textarea(this,this.textareaElement,this.config);this._isCompatible=b.browser.supported();if(!this._isCompatible||!this.config.supportTouchDevices&amp;&amp;b.browser.isTouchDevice()){var&nbsp;e=this;setTimeout(function(){e.fire("beforeload").fire("load")},0)}else{b.dom.addClass(document.body,this.config.bodyClassName);this.currentView=this.composer=new&nbsp;b.views.Composer(this,this.textareaElement,this.config);"function"===typeof&nbsp;this.config.parser&amp;&amp;this._initParser();this.observe("beforeload",<a name="line_258"></a></li>
<li id="line_259" class="odd"><span class="lineNumber">259&nbsp;</span>function(){this.synchronizer=new&nbsp;b.views.Synchronizer(this,this.textarea,this.composer);this.config.toolbar&amp;&amp;(this.toolbar=new&nbsp;b.toolbar.Toolbar(this,this.config.toolbar))});try{console.log("Heya!&nbsp;This&nbsp;page&nbsp;is&nbsp;using&nbsp;wysihtml5&nbsp;for&nbsp;rich&nbsp;text&nbsp;editing.&nbsp;Check&nbsp;out&nbsp;https://github.com/xing/wysihtml5")}catch(f){}}},isCompatible:function(){return&nbsp;this._isCompatible},clear:function(){this.currentView.clear();return&nbsp;this},getValue:function(a){return&nbsp;this.currentView.getValue(a)},setValue:function(a,b){if(!a)return&nbsp;this.clear();<a name="line_259"></a></li>
<li id="line_260" class="even"><span class="lineNumber">260&nbsp;</span>this.currentView.setValue(a,b);return&nbsp;this},focus:function(a){this.currentView.focus(a);return&nbsp;this},disable:function(){this.currentView.disable();return&nbsp;this},enable:function(){this.currentView.enable();return&nbsp;this},isEmpty:function(){return&nbsp;this.currentView.isEmpty()},hasPlaceholderSet:function(){return&nbsp;this.currentView.hasPlaceholderSet()},parse:function(a){var&nbsp;c=this.config.parser(a,this.config.parserRules,this.composer.sandbox.getDocument(),!0);"object"===typeof&nbsp;a&amp;&amp;b.quirks.redraw(a);return&nbsp;c},<a name="line_260"></a></li>
<li id="line_261" class="odd"><span class="lineNumber">261&nbsp;</span>_initParser:function(){this.observe("paste:composer",function(){var&nbsp;a=this;a.composer.selection.executeAndRestore(function(){b.quirks.cleanPastedHTML(a.composer.element);a.parse(a.composer.element)},!0)});this.observe("paste:textarea",function(){this.textarea.setValue(this.parse(this.textarea.getValue()))})}})})(wysihtml5);<a name="line_261"></a></li></ol></div></body></html>
                    </div>
    </body>
</html>
