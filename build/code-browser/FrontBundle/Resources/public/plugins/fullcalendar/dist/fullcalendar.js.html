<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>
            Mayflower Code Browser - Source Code
        </title>
        <link rel="stylesheet" type="text/css" href="../../../../../js/jquery.sidebar/css/codebrowser/sidebar.css" />
        <link rel="stylesheet" type="text/css" href="../../../../../css/global.css" />
        <link rel="stylesheet" type="text/css" href="../../../../../css/cruisecontrol.css" />
        <link rel="stylesheet" type="text/css" href="../../../../../css/review.css" />

        <script type="text/javascript" src="../../../../../js/jquery-1.4.2.min.js"></script>
        <script type="text/javascript" src="../../../../../js/jquery.sidebar/jquery-ui-1.7.2.custom.min.js"></script>
        <script type="text/javascript" src="../../../../../js/jquery.sidebar/jquery.sidebar.js"></script>
        <script type="text/javascript" src="../../../../../js/jquery.cluetip/lib/jquery.hoverIntent.js"></script>
        <script type="text/javascript" src="../../../../../js/jquery.cluetip/lib/jquery.bgiframe.min.js"></script>
        <script type="text/javascript" src="../../../../../js/jquery.cluetip/jquery.cluetip.min.js"></script>

        <script type="text/javascript" src="../../../../../js/review.js"></script>
    </head>
    <body class="codebrowser">
        <div class="header">
            <a href="./../../../../../index.html">Go back to index</a> |
            <a href="https://github.com/Mayflower/PHP_CodeBrowser">PHP CodeBrowser</a>
        </div>
        <hr/>
        <div id="review">
            <div class="filepath">
                FrontBundle/Resources/public/plugins/fullcalendar/dist/fullcalendar.js            </div>

            <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="code"><ol class="code"><li id="line_1" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;</span>/*!<a name="line_1"></a></li>
<li id="line_2" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;</span>&nbsp;*&nbsp;FullCalendar&nbsp;v2.3.2<a name="line_2"></a></li>
<li id="line_3" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;</span>&nbsp;*&nbsp;Docs&nbsp;&amp;&nbsp;License:&nbsp;http://fullcalendar.io/<a name="line_3"></a></li>
<li id="line_4" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;</span>&nbsp;*&nbsp;(c)&nbsp;2015&nbsp;Adam&nbsp;Shaw<a name="line_4"></a></li>
<li id="line_5" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;</span>&nbsp;*/<a name="line_5"></a></li>
<li id="line_6" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;</span><a name="line_6"></a></li>
<li id="line_7" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;</span>(function(factory)&nbsp;{<a name="line_7"></a></li>
<li id="line_8" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;&nbsp;8&nbsp;</span>	if&nbsp;(typeof&nbsp;define&nbsp;===&nbsp;'function'&nbsp;&amp;&amp;&nbsp;define.amd)&nbsp;{<a name="line_8"></a></li>
<li id="line_9" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;&nbsp;9&nbsp;</span>		define([&nbsp;'jquery',&nbsp;'moment'&nbsp;],&nbsp;factory);<a name="line_9"></a></li>
<li id="line_10" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;10&nbsp;</span>	}<a name="line_10"></a></li>
<li id="line_11" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;11&nbsp;</span>	else&nbsp;if&nbsp;(typeof&nbsp;exports&nbsp;===&nbsp;'object')&nbsp;{&nbsp;//&nbsp;Node/CommonJS<a name="line_11"></a></li>
<li id="line_12" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;12&nbsp;</span>		module.exports&nbsp;=&nbsp;factory(require('jquery'),&nbsp;require('moment'));<a name="line_12"></a></li>
<li id="line_13" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;13&nbsp;</span>	}<a name="line_13"></a></li>
<li id="line_14" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;14&nbsp;</span>	else&nbsp;{<a name="line_14"></a></li>
<li id="line_15" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;15&nbsp;</span>		factory(jQuery,&nbsp;moment);<a name="line_15"></a></li>
<li id="line_16" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;16&nbsp;</span>	}<a name="line_16"></a></li>
<li id="line_17" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;17&nbsp;</span>})(function($,&nbsp;moment)&nbsp;{<a name="line_17"></a></li>
<li id="line_18" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;18&nbsp;</span><a name="line_18"></a></li>
<li id="line_19" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;19&nbsp;</span>;;<a name="line_19"></a></li>
<li id="line_20" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;20&nbsp;</span><a name="line_20"></a></li>
<li id="line_21" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;21&nbsp;</span>var&nbsp;fc&nbsp;=&nbsp;$.fullCalendar&nbsp;=&nbsp;{&nbsp;version:&nbsp;"2.3.2"&nbsp;};<a name="line_21"></a></li>
<li id="line_22" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;22&nbsp;</span>var&nbsp;fcViews&nbsp;=&nbsp;fc.views&nbsp;=&nbsp;{};<a name="line_22"></a></li>
<li id="line_23" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;23&nbsp;</span><a name="line_23"></a></li>
<li id="line_24" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;24&nbsp;</span><a name="line_24"></a></li>
<li id="line_25" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;25&nbsp;</span>$.fn.fullCalendar&nbsp;=&nbsp;function(options)&nbsp;{<a name="line_25"></a></li>
<li id="line_26" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;26&nbsp;</span>	var&nbsp;args&nbsp;=&nbsp;Array.prototype.slice.call(arguments,&nbsp;1);&nbsp;//&nbsp;for&nbsp;a&nbsp;possible&nbsp;method&nbsp;call<a name="line_26"></a></li>
<li id="line_27" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;27&nbsp;</span>	var&nbsp;res&nbsp;=&nbsp;this;&nbsp;//&nbsp;what&nbsp;this&nbsp;function&nbsp;will&nbsp;return&nbsp;(this&nbsp;jQuery&nbsp;object&nbsp;by&nbsp;default)<a name="line_27"></a></li>
<li id="line_28" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;28&nbsp;</span><a name="line_28"></a></li>
<li id="line_29" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;29&nbsp;</span>	this.each(function(i,&nbsp;_element)&nbsp;{&nbsp;//&nbsp;loop&nbsp;each&nbsp;DOM&nbsp;element&nbsp;involved<a name="line_29"></a></li>
<li id="line_30" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;30&nbsp;</span>		var&nbsp;element&nbsp;=&nbsp;$(_element);<a name="line_30"></a></li>
<li id="line_31" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;31&nbsp;</span>		var&nbsp;calendar&nbsp;=&nbsp;element.data('fullCalendar');&nbsp;//&nbsp;get&nbsp;the&nbsp;existing&nbsp;calendar&nbsp;object&nbsp;(if&nbsp;any)<a name="line_31"></a></li>
<li id="line_32" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;32&nbsp;</span>		var&nbsp;singleRes;&nbsp;//&nbsp;the&nbsp;returned&nbsp;value&nbsp;of&nbsp;this&nbsp;single&nbsp;method&nbsp;call<a name="line_32"></a></li>
<li id="line_33" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;33&nbsp;</span><a name="line_33"></a></li>
<li id="line_34" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;34&nbsp;</span>		//&nbsp;a&nbsp;method&nbsp;call<a name="line_34"></a></li>
<li id="line_35" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;35&nbsp;</span>		if&nbsp;(typeof&nbsp;options&nbsp;===&nbsp;'string')&nbsp;{<a name="line_35"></a></li>
<li id="line_36" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;36&nbsp;</span>			if&nbsp;(calendar&nbsp;&amp;&amp;&nbsp;$.isFunction(calendar[options]))&nbsp;{<a name="line_36"></a></li>
<li id="line_37" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;37&nbsp;</span>				singleRes&nbsp;=&nbsp;calendar[options].apply(calendar,&nbsp;args);<a name="line_37"></a></li>
<li id="line_38" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;38&nbsp;</span>				if&nbsp;(!i)&nbsp;{<a name="line_38"></a></li>
<li id="line_39" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;39&nbsp;</span>					res&nbsp;=&nbsp;singleRes;&nbsp;//&nbsp;record&nbsp;the&nbsp;first&nbsp;method&nbsp;call&nbsp;result<a name="line_39"></a></li>
<li id="line_40" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;40&nbsp;</span>				}<a name="line_40"></a></li>
<li id="line_41" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;41&nbsp;</span>				if&nbsp;(options&nbsp;===&nbsp;'destroy')&nbsp;{&nbsp;//&nbsp;for&nbsp;the&nbsp;destroy&nbsp;method,&nbsp;must&nbsp;remove&nbsp;Calendar&nbsp;object&nbsp;data<a name="line_41"></a></li>
<li id="line_42" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;42&nbsp;</span>					element.removeData('fullCalendar');<a name="line_42"></a></li>
<li id="line_43" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;43&nbsp;</span>				}<a name="line_43"></a></li>
<li id="line_44" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;44&nbsp;</span>			}<a name="line_44"></a></li>
<li id="line_45" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;45&nbsp;</span>		}<a name="line_45"></a></li>
<li id="line_46" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;46&nbsp;</span>		//&nbsp;a&nbsp;new&nbsp;calendar&nbsp;initialization<a name="line_46"></a></li>
<li id="line_47" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;47&nbsp;</span>		else&nbsp;if&nbsp;(!calendar)&nbsp;{&nbsp;//&nbsp;don't&nbsp;initialize&nbsp;twice<a name="line_47"></a></li>
<li id="line_48" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;48&nbsp;</span>			calendar&nbsp;=&nbsp;new&nbsp;Calendar(element,&nbsp;options);<a name="line_48"></a></li>
<li id="line_49" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;49&nbsp;</span>			element.data('fullCalendar',&nbsp;calendar);<a name="line_49"></a></li>
<li id="line_50" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;50&nbsp;</span>			calendar.render();<a name="line_50"></a></li>
<li id="line_51" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;51&nbsp;</span>		}<a name="line_51"></a></li>
<li id="line_52" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;52&nbsp;</span>	});<a name="line_52"></a></li>
<li id="line_53" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;53&nbsp;</span>	<a name="line_53"></a></li>
<li id="line_54" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;54&nbsp;</span>	return&nbsp;res;<a name="line_54"></a></li>
<li id="line_55" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;55&nbsp;</span>};<a name="line_55"></a></li>
<li id="line_56" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;56&nbsp;</span><a name="line_56"></a></li>
<li id="line_57" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;57&nbsp;</span><a name="line_57"></a></li>
<li id="line_58" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;58&nbsp;</span>var&nbsp;complexOptions&nbsp;=&nbsp;[&nbsp;//&nbsp;names&nbsp;of&nbsp;options&nbsp;that&nbsp;are&nbsp;objects&nbsp;whose&nbsp;properties&nbsp;should&nbsp;be&nbsp;combined<a name="line_58"></a></li>
<li id="line_59" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;59&nbsp;</span>	'header',<a name="line_59"></a></li>
<li id="line_60" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;60&nbsp;</span>	'buttonText',<a name="line_60"></a></li>
<li id="line_61" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;61&nbsp;</span>	'buttonIcons',<a name="line_61"></a></li>
<li id="line_62" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;62&nbsp;</span>	'themeButtonIcons'<a name="line_62"></a></li>
<li id="line_63" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;63&nbsp;</span>];<a name="line_63"></a></li>
<li id="line_64" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;64&nbsp;</span><a name="line_64"></a></li>
<li id="line_65" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;65&nbsp;</span><a name="line_65"></a></li>
<li id="line_66" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;66&nbsp;</span>//&nbsp;Merges&nbsp;an&nbsp;array&nbsp;of&nbsp;option&nbsp;objects&nbsp;into&nbsp;a&nbsp;single&nbsp;object<a name="line_66"></a></li>
<li id="line_67" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;67&nbsp;</span>function&nbsp;mergeOptions(optionObjs)&nbsp;{<a name="line_67"></a></li>
<li id="line_68" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;68&nbsp;</span>	return&nbsp;mergeProps(optionObjs,&nbsp;complexOptions);<a name="line_68"></a></li>
<li id="line_69" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;69&nbsp;</span>}<a name="line_69"></a></li>
<li id="line_70" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;70&nbsp;</span><a name="line_70"></a></li>
<li id="line_71" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;71&nbsp;</span><a name="line_71"></a></li>
<li id="line_72" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;72&nbsp;</span>//&nbsp;Given&nbsp;options&nbsp;specified&nbsp;for&nbsp;the&nbsp;calendar's&nbsp;constructor,&nbsp;massages&nbsp;any&nbsp;legacy&nbsp;options&nbsp;into&nbsp;a&nbsp;non-legacy&nbsp;form.<a name="line_72"></a></li>
<li id="line_73" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;73&nbsp;</span>//&nbsp;Converts&nbsp;View-Option-Hashes&nbsp;into&nbsp;the&nbsp;View-Specific-Options&nbsp;format.<a name="line_73"></a></li>
<li id="line_74" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;74&nbsp;</span>function&nbsp;massageOverrides(input)&nbsp;{<a name="line_74"></a></li>
<li id="line_75" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;75&nbsp;</span>	var&nbsp;overrides&nbsp;=&nbsp;{&nbsp;views:&nbsp;input.views&nbsp;||&nbsp;{}&nbsp;};&nbsp;//&nbsp;the&nbsp;output.&nbsp;ensure&nbsp;a&nbsp;`views`&nbsp;hash<a name="line_75"></a></li>
<li id="line_76" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;76&nbsp;</span>	var&nbsp;subObj;<a name="line_76"></a></li>
<li id="line_77" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;77&nbsp;</span><a name="line_77"></a></li>
<li id="line_78" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;78&nbsp;</span>	//&nbsp;iterate&nbsp;through&nbsp;all&nbsp;option&nbsp;override&nbsp;properties&nbsp;(except&nbsp;`views`)<a name="line_78"></a></li>
<li id="line_79" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;79&nbsp;</span>	$.each(input,&nbsp;function(name,&nbsp;val)&nbsp;{<a name="line_79"></a></li>
<li id="line_80" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;80&nbsp;</span>		if&nbsp;(name&nbsp;!=&nbsp;'views')&nbsp;{<a name="line_80"></a></li>
<li id="line_81" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;81&nbsp;</span><a name="line_81"></a></li>
<li id="line_82" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;82&nbsp;</span>			//&nbsp;could&nbsp;the&nbsp;value&nbsp;be&nbsp;a&nbsp;legacy&nbsp;View-Option-Hash?<a name="line_82"></a></li>
<li id="line_83" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;83&nbsp;</span>			if&nbsp;(<a name="line_83"></a></li>
<li id="line_84" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;84&nbsp;</span>				$.isPlainObject(val)&nbsp;&amp;&amp;<a name="line_84"></a></li>
<li id="line_85" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;85&nbsp;</span>				!/(time|duration|interval)$/i.test(name)&nbsp;&amp;&amp;&nbsp;//&nbsp;exclude&nbsp;duration&nbsp;options.&nbsp;might&nbsp;be&nbsp;given&nbsp;as&nbsp;objects<a name="line_85"></a></li>
<li id="line_86" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;86&nbsp;</span>				$.inArray(name,&nbsp;complexOptions)&nbsp;==&nbsp;-1&nbsp;//&nbsp;complex&nbsp;options&nbsp;aren't&nbsp;allowed&nbsp;to&nbsp;be&nbsp;View-Option-Hashes<a name="line_86"></a></li>
<li id="line_87" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;87&nbsp;</span>			)&nbsp;{<a name="line_87"></a></li>
<li id="line_88" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;88&nbsp;</span>				subObj&nbsp;=&nbsp;null;<a name="line_88"></a></li>
<li id="line_89" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;89&nbsp;</span><a name="line_89"></a></li>
<li id="line_90" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;90&nbsp;</span>				//&nbsp;iterate&nbsp;through&nbsp;the&nbsp;properties&nbsp;of&nbsp;this&nbsp;possible&nbsp;View-Option-Hash&nbsp;value<a name="line_90"></a></li>
<li id="line_91" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;91&nbsp;</span>				$.each(val,&nbsp;function(subName,&nbsp;subVal)&nbsp;{<a name="line_91"></a></li>
<li id="line_92" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;92&nbsp;</span><a name="line_92"></a></li>
<li id="line_93" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;93&nbsp;</span>					//&nbsp;is&nbsp;the&nbsp;property&nbsp;targeting&nbsp;a&nbsp;view?<a name="line_93"></a></li>
<li id="line_94" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;94&nbsp;</span>					if&nbsp;(/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(subName))&nbsp;{<a name="line_94"></a></li>
<li id="line_95" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;95&nbsp;</span>						if&nbsp;(!overrides.views[subName])&nbsp;{&nbsp;//&nbsp;ensure&nbsp;the&nbsp;view-target&nbsp;entry&nbsp;exists<a name="line_95"></a></li>
<li id="line_96" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;96&nbsp;</span>							overrides.views[subName]&nbsp;=&nbsp;{};<a name="line_96"></a></li>
<li id="line_97" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;97&nbsp;</span>						}<a name="line_97"></a></li>
<li id="line_98" class="even"><span class="lineNumber">&nbsp;&nbsp;&nbsp;98&nbsp;</span>						overrides.views[subName][name]&nbsp;=&nbsp;subVal;&nbsp;//&nbsp;record&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;`views`&nbsp;object<a name="line_98"></a></li>
<li id="line_99" class="odd"><span class="lineNumber">&nbsp;&nbsp;&nbsp;99&nbsp;</span>					}<a name="line_99"></a></li>
<li id="line_100" class="even"><span class="lineNumber">&nbsp;&nbsp;100&nbsp;</span>					else&nbsp;{&nbsp;//&nbsp;a&nbsp;non-View-Option-Hash&nbsp;property<a name="line_100"></a></li>
<li id="line_101" class="odd"><span class="lineNumber">&nbsp;&nbsp;101&nbsp;</span>						if&nbsp;(!subObj)&nbsp;{<a name="line_101"></a></li>
<li id="line_102" class="even"><span class="lineNumber">&nbsp;&nbsp;102&nbsp;</span>							subObj&nbsp;=&nbsp;{};<a name="line_102"></a></li>
<li id="line_103" class="odd"><span class="lineNumber">&nbsp;&nbsp;103&nbsp;</span>						}<a name="line_103"></a></li>
<li id="line_104" class="even"><span class="lineNumber">&nbsp;&nbsp;104&nbsp;</span>						subObj[subName]&nbsp;=&nbsp;subVal;&nbsp;//&nbsp;accumulate&nbsp;these&nbsp;unrelated&nbsp;values&nbsp;for&nbsp;later<a name="line_104"></a></li>
<li id="line_105" class="odd"><span class="lineNumber">&nbsp;&nbsp;105&nbsp;</span>					}<a name="line_105"></a></li>
<li id="line_106" class="even"><span class="lineNumber">&nbsp;&nbsp;106&nbsp;</span>				});<a name="line_106"></a></li>
<li id="line_107" class="odd"><span class="lineNumber">&nbsp;&nbsp;107&nbsp;</span><a name="line_107"></a></li>
<li id="line_108" class="even"><span class="lineNumber">&nbsp;&nbsp;108&nbsp;</span>				if&nbsp;(subObj)&nbsp;{&nbsp;//&nbsp;non-View-Option-Hash&nbsp;properties?&nbsp;transfer&nbsp;them&nbsp;as-is<a name="line_108"></a></li>
<li id="line_109" class="odd"><span class="lineNumber">&nbsp;&nbsp;109&nbsp;</span>					overrides[name]&nbsp;=&nbsp;subObj;<a name="line_109"></a></li>
<li id="line_110" class="even"><span class="lineNumber">&nbsp;&nbsp;110&nbsp;</span>				}<a name="line_110"></a></li>
<li id="line_111" class="odd"><span class="lineNumber">&nbsp;&nbsp;111&nbsp;</span>			}<a name="line_111"></a></li>
<li id="line_112" class="even"><span class="lineNumber">&nbsp;&nbsp;112&nbsp;</span>			else&nbsp;{<a name="line_112"></a></li>
<li id="line_113" class="odd"><span class="lineNumber">&nbsp;&nbsp;113&nbsp;</span>				overrides[name]&nbsp;=&nbsp;val;&nbsp;//&nbsp;transfer&nbsp;normal&nbsp;options&nbsp;as-is<a name="line_113"></a></li>
<li id="line_114" class="even"><span class="lineNumber">&nbsp;&nbsp;114&nbsp;</span>			}<a name="line_114"></a></li>
<li id="line_115" class="odd"><span class="lineNumber">&nbsp;&nbsp;115&nbsp;</span>		}<a name="line_115"></a></li>
<li id="line_116" class="even"><span class="lineNumber">&nbsp;&nbsp;116&nbsp;</span>	});<a name="line_116"></a></li>
<li id="line_117" class="odd"><span class="lineNumber">&nbsp;&nbsp;117&nbsp;</span><a name="line_117"></a></li>
<li id="line_118" class="even"><span class="lineNumber">&nbsp;&nbsp;118&nbsp;</span>	return&nbsp;overrides;<a name="line_118"></a></li>
<li id="line_119" class="odd"><span class="lineNumber">&nbsp;&nbsp;119&nbsp;</span>}<a name="line_119"></a></li>
<li id="line_120" class="even"><span class="lineNumber">&nbsp;&nbsp;120&nbsp;</span><a name="line_120"></a></li>
<li id="line_121" class="odd"><span class="lineNumber">&nbsp;&nbsp;121&nbsp;</span>;;<a name="line_121"></a></li>
<li id="line_122" class="even"><span class="lineNumber">&nbsp;&nbsp;122&nbsp;</span><a name="line_122"></a></li>
<li id="line_123" class="odd"><span class="lineNumber">&nbsp;&nbsp;123&nbsp;</span>//&nbsp;exports<a name="line_123"></a></li>
<li id="line_124" class="even"><span class="lineNumber">&nbsp;&nbsp;124&nbsp;</span>fc.intersectionToSeg&nbsp;=&nbsp;intersectionToSeg;<a name="line_124"></a></li>
<li id="line_125" class="odd"><span class="lineNumber">&nbsp;&nbsp;125&nbsp;</span>fc.applyAll&nbsp;=&nbsp;applyAll;<a name="line_125"></a></li>
<li id="line_126" class="even"><span class="lineNumber">&nbsp;&nbsp;126&nbsp;</span>fc.debounce&nbsp;=&nbsp;debounce;<a name="line_126"></a></li>
<li id="line_127" class="odd"><span class="lineNumber">&nbsp;&nbsp;127&nbsp;</span>fc.isInt&nbsp;=&nbsp;isInt;<a name="line_127"></a></li>
<li id="line_128" class="even"><span class="lineNumber">&nbsp;&nbsp;128&nbsp;</span>fc.htmlEscape&nbsp;=&nbsp;htmlEscape;<a name="line_128"></a></li>
<li id="line_129" class="odd"><span class="lineNumber">&nbsp;&nbsp;129&nbsp;</span>fc.cssToStr&nbsp;=&nbsp;cssToStr;<a name="line_129"></a></li>
<li id="line_130" class="even"><span class="lineNumber">&nbsp;&nbsp;130&nbsp;</span>fc.proxy&nbsp;=&nbsp;proxy;<a name="line_130"></a></li>
<li id="line_131" class="odd"><span class="lineNumber">&nbsp;&nbsp;131&nbsp;</span>fc.capitaliseFirstLetter&nbsp;=&nbsp;capitaliseFirstLetter;<a name="line_131"></a></li>
<li id="line_132" class="even"><span class="lineNumber">&nbsp;&nbsp;132&nbsp;</span><a name="line_132"></a></li>
<li id="line_133" class="odd"><span class="lineNumber">&nbsp;&nbsp;133&nbsp;</span><a name="line_133"></a></li>
<li id="line_134" class="even"><span class="lineNumber">&nbsp;&nbsp;134&nbsp;</span>/*&nbsp;FullCalendar-specific&nbsp;DOM&nbsp;Utilities<a name="line_134"></a></li>
<li id="line_135" class="odd"><span class="lineNumber">&nbsp;&nbsp;135&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_135"></a></li>
<li id="line_136" class="even"><span class="lineNumber">&nbsp;&nbsp;136&nbsp;</span><a name="line_136"></a></li>
<li id="line_137" class="odd"><span class="lineNumber">&nbsp;&nbsp;137&nbsp;</span><a name="line_137"></a></li>
<li id="line_138" class="even"><span class="lineNumber">&nbsp;&nbsp;138&nbsp;</span>//&nbsp;Given&nbsp;the&nbsp;scrollbar&nbsp;widths&nbsp;of&nbsp;some&nbsp;other&nbsp;container,&nbsp;create&nbsp;borders/margins&nbsp;on&nbsp;rowEls&nbsp;in&nbsp;order&nbsp;to&nbsp;match&nbsp;the&nbsp;left<a name="line_138"></a></li>
<li id="line_139" class="odd"><span class="lineNumber">&nbsp;&nbsp;139&nbsp;</span>//&nbsp;and&nbsp;right&nbsp;space&nbsp;that&nbsp;was&nbsp;offset&nbsp;by&nbsp;the&nbsp;scrollbars.&nbsp;A&nbsp;1-pixel&nbsp;border&nbsp;first,&nbsp;then&nbsp;margin&nbsp;beyond&nbsp;that.<a name="line_139"></a></li>
<li id="line_140" class="even"><span class="lineNumber">&nbsp;&nbsp;140&nbsp;</span>function&nbsp;compensateScroll(rowEls,&nbsp;scrollbarWidths)&nbsp;{<a name="line_140"></a></li>
<li id="line_141" class="odd"><span class="lineNumber">&nbsp;&nbsp;141&nbsp;</span>	if&nbsp;(scrollbarWidths.left)&nbsp;{<a name="line_141"></a></li>
<li id="line_142" class="even"><span class="lineNumber">&nbsp;&nbsp;142&nbsp;</span>		rowEls.css({<a name="line_142"></a></li>
<li id="line_143" class="odd"><span class="lineNumber">&nbsp;&nbsp;143&nbsp;</span>			'border-left-width':&nbsp;1,<a name="line_143"></a></li>
<li id="line_144" class="even"><span class="lineNumber">&nbsp;&nbsp;144&nbsp;</span>			'margin-left':&nbsp;scrollbarWidths.left&nbsp;-&nbsp;1<a name="line_144"></a></li>
<li id="line_145" class="odd"><span class="lineNumber">&nbsp;&nbsp;145&nbsp;</span>		});<a name="line_145"></a></li>
<li id="line_146" class="even"><span class="lineNumber">&nbsp;&nbsp;146&nbsp;</span>	}<a name="line_146"></a></li>
<li id="line_147" class="odd"><span class="lineNumber">&nbsp;&nbsp;147&nbsp;</span>	if&nbsp;(scrollbarWidths.right)&nbsp;{<a name="line_147"></a></li>
<li id="line_148" class="even"><span class="lineNumber">&nbsp;&nbsp;148&nbsp;</span>		rowEls.css({<a name="line_148"></a></li>
<li id="line_149" class="odd"><span class="lineNumber">&nbsp;&nbsp;149&nbsp;</span>			'border-right-width':&nbsp;1,<a name="line_149"></a></li>
<li id="line_150" class="even"><span class="lineNumber">&nbsp;&nbsp;150&nbsp;</span>			'margin-right':&nbsp;scrollbarWidths.right&nbsp;-&nbsp;1<a name="line_150"></a></li>
<li id="line_151" class="odd"><span class="lineNumber">&nbsp;&nbsp;151&nbsp;</span>		});<a name="line_151"></a></li>
<li id="line_152" class="even"><span class="lineNumber">&nbsp;&nbsp;152&nbsp;</span>	}<a name="line_152"></a></li>
<li id="line_153" class="odd"><span class="lineNumber">&nbsp;&nbsp;153&nbsp;</span>}<a name="line_153"></a></li>
<li id="line_154" class="even"><span class="lineNumber">&nbsp;&nbsp;154&nbsp;</span><a name="line_154"></a></li>
<li id="line_155" class="odd"><span class="lineNumber">&nbsp;&nbsp;155&nbsp;</span><a name="line_155"></a></li>
<li id="line_156" class="even"><span class="lineNumber">&nbsp;&nbsp;156&nbsp;</span>//&nbsp;Undoes&nbsp;compensateScroll&nbsp;and&nbsp;restores&nbsp;all&nbsp;borders/margins<a name="line_156"></a></li>
<li id="line_157" class="odd"><span class="lineNumber">&nbsp;&nbsp;157&nbsp;</span>function&nbsp;uncompensateScroll(rowEls)&nbsp;{<a name="line_157"></a></li>
<li id="line_158" class="even"><span class="lineNumber">&nbsp;&nbsp;158&nbsp;</span>	rowEls.css({<a name="line_158"></a></li>
<li id="line_159" class="odd"><span class="lineNumber">&nbsp;&nbsp;159&nbsp;</span>		'margin-left':&nbsp;'',<a name="line_159"></a></li>
<li id="line_160" class="even"><span class="lineNumber">&nbsp;&nbsp;160&nbsp;</span>		'margin-right':&nbsp;'',<a name="line_160"></a></li>
<li id="line_161" class="odd"><span class="lineNumber">&nbsp;&nbsp;161&nbsp;</span>		'border-left-width':&nbsp;'',<a name="line_161"></a></li>
<li id="line_162" class="even"><span class="lineNumber">&nbsp;&nbsp;162&nbsp;</span>		'border-right-width':&nbsp;''<a name="line_162"></a></li>
<li id="line_163" class="odd"><span class="lineNumber">&nbsp;&nbsp;163&nbsp;</span>	});<a name="line_163"></a></li>
<li id="line_164" class="even"><span class="lineNumber">&nbsp;&nbsp;164&nbsp;</span>}<a name="line_164"></a></li>
<li id="line_165" class="odd"><span class="lineNumber">&nbsp;&nbsp;165&nbsp;</span><a name="line_165"></a></li>
<li id="line_166" class="even"><span class="lineNumber">&nbsp;&nbsp;166&nbsp;</span><a name="line_166"></a></li>
<li id="line_167" class="odd"><span class="lineNumber">&nbsp;&nbsp;167&nbsp;</span>//&nbsp;Make&nbsp;the&nbsp;mouse&nbsp;cursor&nbsp;express&nbsp;that&nbsp;an&nbsp;event&nbsp;is&nbsp;not&nbsp;allowed&nbsp;in&nbsp;the&nbsp;current&nbsp;area<a name="line_167"></a></li>
<li id="line_168" class="even"><span class="lineNumber">&nbsp;&nbsp;168&nbsp;</span>function&nbsp;disableCursor()&nbsp;{<a name="line_168"></a></li>
<li id="line_169" class="odd"><span class="lineNumber">&nbsp;&nbsp;169&nbsp;</span>	$('body').addClass('fc-not-allowed');<a name="line_169"></a></li>
<li id="line_170" class="even"><span class="lineNumber">&nbsp;&nbsp;170&nbsp;</span>}<a name="line_170"></a></li>
<li id="line_171" class="odd"><span class="lineNumber">&nbsp;&nbsp;171&nbsp;</span><a name="line_171"></a></li>
<li id="line_172" class="even"><span class="lineNumber">&nbsp;&nbsp;172&nbsp;</span><a name="line_172"></a></li>
<li id="line_173" class="odd"><span class="lineNumber">&nbsp;&nbsp;173&nbsp;</span>//&nbsp;Returns&nbsp;the&nbsp;mouse&nbsp;cursor&nbsp;to&nbsp;its&nbsp;original&nbsp;look<a name="line_173"></a></li>
<li id="line_174" class="even"><span class="lineNumber">&nbsp;&nbsp;174&nbsp;</span>function&nbsp;enableCursor()&nbsp;{<a name="line_174"></a></li>
<li id="line_175" class="odd"><span class="lineNumber">&nbsp;&nbsp;175&nbsp;</span>	$('body').removeClass('fc-not-allowed');<a name="line_175"></a></li>
<li id="line_176" class="even"><span class="lineNumber">&nbsp;&nbsp;176&nbsp;</span>}<a name="line_176"></a></li>
<li id="line_177" class="odd"><span class="lineNumber">&nbsp;&nbsp;177&nbsp;</span><a name="line_177"></a></li>
<li id="line_178" class="even"><span class="lineNumber">&nbsp;&nbsp;178&nbsp;</span><a name="line_178"></a></li>
<li id="line_179" class="odd"><span class="lineNumber">&nbsp;&nbsp;179&nbsp;</span>//&nbsp;Given&nbsp;a&nbsp;total&nbsp;available&nbsp;height&nbsp;to&nbsp;fill,&nbsp;have&nbsp;`els`&nbsp;(essentially&nbsp;child&nbsp;rows)&nbsp;expand&nbsp;to&nbsp;accomodate.<a name="line_179"></a></li>
<li id="line_180" class="even"><span class="lineNumber">&nbsp;&nbsp;180&nbsp;</span>//&nbsp;By&nbsp;default,&nbsp;all&nbsp;elements&nbsp;that&nbsp;are&nbsp;shorter&nbsp;than&nbsp;the&nbsp;recommended&nbsp;height&nbsp;are&nbsp;expanded&nbsp;uniformly,&nbsp;not&nbsp;considering<a name="line_180"></a></li>
<li id="line_181" class="odd"><span class="lineNumber">&nbsp;&nbsp;181&nbsp;</span>//&nbsp;any&nbsp;other&nbsp;els&nbsp;that&nbsp;are&nbsp;already&nbsp;too&nbsp;tall.&nbsp;if&nbsp;`shouldRedistribute`&nbsp;is&nbsp;on,&nbsp;it&nbsp;considers&nbsp;these&nbsp;tall&nbsp;rows&nbsp;and&nbsp;<a name="line_181"></a></li>
<li id="line_182" class="even"><span class="lineNumber">&nbsp;&nbsp;182&nbsp;</span>//&nbsp;reduces&nbsp;the&nbsp;available&nbsp;height.<a name="line_182"></a></li>
<li id="line_183" class="odd"><span class="lineNumber">&nbsp;&nbsp;183&nbsp;</span>function&nbsp;distributeHeight(els,&nbsp;availableHeight,&nbsp;shouldRedistribute)&nbsp;{<a name="line_183"></a></li>
<li id="line_184" class="even"><span class="lineNumber">&nbsp;&nbsp;184&nbsp;</span><a name="line_184"></a></li>
<li id="line_185" class="odd"><span class="lineNumber">&nbsp;&nbsp;185&nbsp;</span>	//&nbsp;*FLOORING&nbsp;NOTE*:&nbsp;we&nbsp;floor&nbsp;in&nbsp;certain&nbsp;places&nbsp;because&nbsp;zoom&nbsp;can&nbsp;give&nbsp;inaccurate&nbsp;floating-point&nbsp;dimensions,<a name="line_185"></a></li>
<li id="line_186" class="even"><span class="lineNumber">&nbsp;&nbsp;186&nbsp;</span>	//&nbsp;and&nbsp;it&nbsp;is&nbsp;better&nbsp;to&nbsp;be&nbsp;shorter&nbsp;than&nbsp;taller,&nbsp;to&nbsp;avoid&nbsp;creating&nbsp;unnecessary&nbsp;scrollbars.<a name="line_186"></a></li>
<li id="line_187" class="odd"><span class="lineNumber">&nbsp;&nbsp;187&nbsp;</span><a name="line_187"></a></li>
<li id="line_188" class="even"><span class="lineNumber">&nbsp;&nbsp;188&nbsp;</span>	var&nbsp;minOffset1&nbsp;=&nbsp;Math.floor(availableHeight&nbsp;/&nbsp;els.length);&nbsp;//&nbsp;for&nbsp;non-last&nbsp;element<a name="line_188"></a></li>
<li id="line_189" class="odd"><span class="lineNumber">&nbsp;&nbsp;189&nbsp;</span>	var&nbsp;minOffset2&nbsp;=&nbsp;Math.floor(availableHeight&nbsp;-&nbsp;minOffset1&nbsp;*&nbsp;(els.length&nbsp;-&nbsp;1));&nbsp;//&nbsp;for&nbsp;last&nbsp;element&nbsp;*FLOORING&nbsp;NOTE*<a name="line_189"></a></li>
<li id="line_190" class="even"><span class="lineNumber">&nbsp;&nbsp;190&nbsp;</span>	var&nbsp;flexEls&nbsp;=&nbsp;[];&nbsp;//&nbsp;elements&nbsp;that&nbsp;are&nbsp;allowed&nbsp;to&nbsp;expand.&nbsp;array&nbsp;of&nbsp;DOM&nbsp;nodes<a name="line_190"></a></li>
<li id="line_191" class="odd"><span class="lineNumber">&nbsp;&nbsp;191&nbsp;</span>	var&nbsp;flexOffsets&nbsp;=&nbsp;[];&nbsp;//&nbsp;amount&nbsp;of&nbsp;vertical&nbsp;space&nbsp;it&nbsp;takes&nbsp;up<a name="line_191"></a></li>
<li id="line_192" class="even"><span class="lineNumber">&nbsp;&nbsp;192&nbsp;</span>	var&nbsp;flexHeights&nbsp;=&nbsp;[];&nbsp;//&nbsp;actual&nbsp;css&nbsp;height<a name="line_192"></a></li>
<li id="line_193" class="odd"><span class="lineNumber">&nbsp;&nbsp;193&nbsp;</span>	var&nbsp;usedHeight&nbsp;=&nbsp;0;<a name="line_193"></a></li>
<li id="line_194" class="even"><span class="lineNumber">&nbsp;&nbsp;194&nbsp;</span><a name="line_194"></a></li>
<li id="line_195" class="odd"><span class="lineNumber">&nbsp;&nbsp;195&nbsp;</span>	undistributeHeight(els);&nbsp;//&nbsp;give&nbsp;all&nbsp;elements&nbsp;their&nbsp;natural&nbsp;height<a name="line_195"></a></li>
<li id="line_196" class="even"><span class="lineNumber">&nbsp;&nbsp;196&nbsp;</span><a name="line_196"></a></li>
<li id="line_197" class="odd"><span class="lineNumber">&nbsp;&nbsp;197&nbsp;</span>	//&nbsp;find&nbsp;elements&nbsp;that&nbsp;are&nbsp;below&nbsp;the&nbsp;recommended&nbsp;height&nbsp;(expandable).<a name="line_197"></a></li>
<li id="line_198" class="even"><span class="lineNumber">&nbsp;&nbsp;198&nbsp;</span>	//&nbsp;important&nbsp;to&nbsp;query&nbsp;for&nbsp;heights&nbsp;in&nbsp;a&nbsp;single&nbsp;first&nbsp;pass&nbsp;(to&nbsp;avoid&nbsp;reflow&nbsp;oscillation).<a name="line_198"></a></li>
<li id="line_199" class="odd"><span class="lineNumber">&nbsp;&nbsp;199&nbsp;</span>	els.each(function(i,&nbsp;el)&nbsp;{<a name="line_199"></a></li>
<li id="line_200" class="even"><span class="lineNumber">&nbsp;&nbsp;200&nbsp;</span>		var&nbsp;minOffset&nbsp;=&nbsp;i&nbsp;===&nbsp;els.length&nbsp;-&nbsp;1&nbsp;?&nbsp;minOffset2&nbsp;:&nbsp;minOffset1;<a name="line_200"></a></li>
<li id="line_201" class="odd"><span class="lineNumber">&nbsp;&nbsp;201&nbsp;</span>		var&nbsp;naturalOffset&nbsp;=&nbsp;$(el).outerHeight(true);<a name="line_201"></a></li>
<li id="line_202" class="even"><span class="lineNumber">&nbsp;&nbsp;202&nbsp;</span><a name="line_202"></a></li>
<li id="line_203" class="odd"><span class="lineNumber">&nbsp;&nbsp;203&nbsp;</span>		if&nbsp;(naturalOffset&nbsp;&lt;&nbsp;minOffset)&nbsp;{<a name="line_203"></a></li>
<li id="line_204" class="even"><span class="lineNumber">&nbsp;&nbsp;204&nbsp;</span>			flexEls.push(el);<a name="line_204"></a></li>
<li id="line_205" class="odd"><span class="lineNumber">&nbsp;&nbsp;205&nbsp;</span>			flexOffsets.push(naturalOffset);<a name="line_205"></a></li>
<li id="line_206" class="even"><span class="lineNumber">&nbsp;&nbsp;206&nbsp;</span>			flexHeights.push($(el).height());<a name="line_206"></a></li>
<li id="line_207" class="odd"><span class="lineNumber">&nbsp;&nbsp;207&nbsp;</span>		}<a name="line_207"></a></li>
<li id="line_208" class="even"><span class="lineNumber">&nbsp;&nbsp;208&nbsp;</span>		else&nbsp;{<a name="line_208"></a></li>
<li id="line_209" class="odd"><span class="lineNumber">&nbsp;&nbsp;209&nbsp;</span>			//&nbsp;this&nbsp;element&nbsp;stretches&nbsp;past&nbsp;recommended&nbsp;height&nbsp;(non-expandable).&nbsp;mark&nbsp;the&nbsp;space&nbsp;as&nbsp;occupied.<a name="line_209"></a></li>
<li id="line_210" class="even"><span class="lineNumber">&nbsp;&nbsp;210&nbsp;</span>			usedHeight&nbsp;+=&nbsp;naturalOffset;<a name="line_210"></a></li>
<li id="line_211" class="odd"><span class="lineNumber">&nbsp;&nbsp;211&nbsp;</span>		}<a name="line_211"></a></li>
<li id="line_212" class="even"><span class="lineNumber">&nbsp;&nbsp;212&nbsp;</span>	});<a name="line_212"></a></li>
<li id="line_213" class="odd"><span class="lineNumber">&nbsp;&nbsp;213&nbsp;</span><a name="line_213"></a></li>
<li id="line_214" class="even"><span class="lineNumber">&nbsp;&nbsp;214&nbsp;</span>	//&nbsp;readjust&nbsp;the&nbsp;recommended&nbsp;height&nbsp;to&nbsp;only&nbsp;consider&nbsp;the&nbsp;height&nbsp;available&nbsp;to&nbsp;non-maxed-out&nbsp;rows.<a name="line_214"></a></li>
<li id="line_215" class="odd"><span class="lineNumber">&nbsp;&nbsp;215&nbsp;</span>	if&nbsp;(shouldRedistribute)&nbsp;{<a name="line_215"></a></li>
<li id="line_216" class="even"><span class="lineNumber">&nbsp;&nbsp;216&nbsp;</span>		availableHeight&nbsp;-=&nbsp;usedHeight;<a name="line_216"></a></li>
<li id="line_217" class="odd"><span class="lineNumber">&nbsp;&nbsp;217&nbsp;</span>		minOffset1&nbsp;=&nbsp;Math.floor(availableHeight&nbsp;/&nbsp;flexEls.length);<a name="line_217"></a></li>
<li id="line_218" class="even"><span class="lineNumber">&nbsp;&nbsp;218&nbsp;</span>		minOffset2&nbsp;=&nbsp;Math.floor(availableHeight&nbsp;-&nbsp;minOffset1&nbsp;*&nbsp;(flexEls.length&nbsp;-&nbsp;1));&nbsp;//&nbsp;*FLOORING&nbsp;NOTE*<a name="line_218"></a></li>
<li id="line_219" class="odd"><span class="lineNumber">&nbsp;&nbsp;219&nbsp;</span>	}<a name="line_219"></a></li>
<li id="line_220" class="even"><span class="lineNumber">&nbsp;&nbsp;220&nbsp;</span><a name="line_220"></a></li>
<li id="line_221" class="odd"><span class="lineNumber">&nbsp;&nbsp;221&nbsp;</span>	//&nbsp;assign&nbsp;heights&nbsp;to&nbsp;all&nbsp;expandable&nbsp;elements<a name="line_221"></a></li>
<li id="line_222" class="even"><span class="lineNumber">&nbsp;&nbsp;222&nbsp;</span>	$(flexEls).each(function(i,&nbsp;el)&nbsp;{<a name="line_222"></a></li>
<li id="line_223" class="odd"><span class="lineNumber">&nbsp;&nbsp;223&nbsp;</span>		var&nbsp;minOffset&nbsp;=&nbsp;i&nbsp;===&nbsp;flexEls.length&nbsp;-&nbsp;1&nbsp;?&nbsp;minOffset2&nbsp;:&nbsp;minOffset1;<a name="line_223"></a></li>
<li id="line_224" class="even"><span class="lineNumber">&nbsp;&nbsp;224&nbsp;</span>		var&nbsp;naturalOffset&nbsp;=&nbsp;flexOffsets[i];<a name="line_224"></a></li>
<li id="line_225" class="odd"><span class="lineNumber">&nbsp;&nbsp;225&nbsp;</span>		var&nbsp;naturalHeight&nbsp;=&nbsp;flexHeights[i];<a name="line_225"></a></li>
<li id="line_226" class="even"><span class="lineNumber">&nbsp;&nbsp;226&nbsp;</span>		var&nbsp;newHeight&nbsp;=&nbsp;minOffset&nbsp;-&nbsp;(naturalOffset&nbsp;-&nbsp;naturalHeight);&nbsp;//&nbsp;subtract&nbsp;the&nbsp;margin/padding<a name="line_226"></a></li>
<li id="line_227" class="odd"><span class="lineNumber">&nbsp;&nbsp;227&nbsp;</span><a name="line_227"></a></li>
<li id="line_228" class="even"><span class="lineNumber">&nbsp;&nbsp;228&nbsp;</span>		if&nbsp;(naturalOffset&nbsp;&lt;&nbsp;minOffset)&nbsp;{&nbsp;//&nbsp;we&nbsp;check&nbsp;this&nbsp;again&nbsp;because&nbsp;redistribution&nbsp;might&nbsp;have&nbsp;changed&nbsp;things<a name="line_228"></a></li>
<li id="line_229" class="odd"><span class="lineNumber">&nbsp;&nbsp;229&nbsp;</span>			$(el).height(newHeight);<a name="line_229"></a></li>
<li id="line_230" class="even"><span class="lineNumber">&nbsp;&nbsp;230&nbsp;</span>		}<a name="line_230"></a></li>
<li id="line_231" class="odd"><span class="lineNumber">&nbsp;&nbsp;231&nbsp;</span>	});<a name="line_231"></a></li>
<li id="line_232" class="even"><span class="lineNumber">&nbsp;&nbsp;232&nbsp;</span>}<a name="line_232"></a></li>
<li id="line_233" class="odd"><span class="lineNumber">&nbsp;&nbsp;233&nbsp;</span><a name="line_233"></a></li>
<li id="line_234" class="even"><span class="lineNumber">&nbsp;&nbsp;234&nbsp;</span><a name="line_234"></a></li>
<li id="line_235" class="odd"><span class="lineNumber">&nbsp;&nbsp;235&nbsp;</span>//&nbsp;Undoes&nbsp;distrubuteHeight,&nbsp;restoring&nbsp;all&nbsp;els&nbsp;to&nbsp;their&nbsp;natural&nbsp;height<a name="line_235"></a></li>
<li id="line_236" class="even"><span class="lineNumber">&nbsp;&nbsp;236&nbsp;</span>function&nbsp;undistributeHeight(els)&nbsp;{<a name="line_236"></a></li>
<li id="line_237" class="odd"><span class="lineNumber">&nbsp;&nbsp;237&nbsp;</span>	els.height('');<a name="line_237"></a></li>
<li id="line_238" class="even"><span class="lineNumber">&nbsp;&nbsp;238&nbsp;</span>}<a name="line_238"></a></li>
<li id="line_239" class="odd"><span class="lineNumber">&nbsp;&nbsp;239&nbsp;</span><a name="line_239"></a></li>
<li id="line_240" class="even"><span class="lineNumber">&nbsp;&nbsp;240&nbsp;</span><a name="line_240"></a></li>
<li id="line_241" class="odd"><span class="lineNumber">&nbsp;&nbsp;241&nbsp;</span>//&nbsp;Given&nbsp;`els`,&nbsp;a&nbsp;jQuery&nbsp;set&nbsp;of&nbsp;&lt;td&gt;&nbsp;cells,&nbsp;find&nbsp;the&nbsp;cell&nbsp;with&nbsp;the&nbsp;largest&nbsp;natural&nbsp;width&nbsp;and&nbsp;set&nbsp;the&nbsp;widths&nbsp;of&nbsp;all&nbsp;the<a name="line_241"></a></li>
<li id="line_242" class="even"><span class="lineNumber">&nbsp;&nbsp;242&nbsp;</span>//&nbsp;cells&nbsp;to&nbsp;be&nbsp;that&nbsp;width.<a name="line_242"></a></li>
<li id="line_243" class="odd"><span class="lineNumber">&nbsp;&nbsp;243&nbsp;</span>//&nbsp;PREREQUISITE:&nbsp;if&nbsp;you&nbsp;want&nbsp;a&nbsp;cell&nbsp;to&nbsp;take&nbsp;up&nbsp;width,&nbsp;it&nbsp;needs&nbsp;to&nbsp;have&nbsp;a&nbsp;single&nbsp;inner&nbsp;element&nbsp;w/&nbsp;display:inline<a name="line_243"></a></li>
<li id="line_244" class="even"><span class="lineNumber">&nbsp;&nbsp;244&nbsp;</span>function&nbsp;matchCellWidths(els)&nbsp;{<a name="line_244"></a></li>
<li id="line_245" class="odd"><span class="lineNumber">&nbsp;&nbsp;245&nbsp;</span>	var&nbsp;maxInnerWidth&nbsp;=&nbsp;0;<a name="line_245"></a></li>
<li id="line_246" class="even"><span class="lineNumber">&nbsp;&nbsp;246&nbsp;</span><a name="line_246"></a></li>
<li id="line_247" class="odd"><span class="lineNumber">&nbsp;&nbsp;247&nbsp;</span>	els.find('&gt;&nbsp;*').each(function(i,&nbsp;innerEl)&nbsp;{<a name="line_247"></a></li>
<li id="line_248" class="even"><span class="lineNumber">&nbsp;&nbsp;248&nbsp;</span>		var&nbsp;innerWidth&nbsp;=&nbsp;$(innerEl).outerWidth();<a name="line_248"></a></li>
<li id="line_249" class="odd"><span class="lineNumber">&nbsp;&nbsp;249&nbsp;</span>		if&nbsp;(innerWidth&nbsp;&gt;&nbsp;maxInnerWidth)&nbsp;{<a name="line_249"></a></li>
<li id="line_250" class="even"><span class="lineNumber">&nbsp;&nbsp;250&nbsp;</span>			maxInnerWidth&nbsp;=&nbsp;innerWidth;<a name="line_250"></a></li>
<li id="line_251" class="odd"><span class="lineNumber">&nbsp;&nbsp;251&nbsp;</span>		}<a name="line_251"></a></li>
<li id="line_252" class="even"><span class="lineNumber">&nbsp;&nbsp;252&nbsp;</span>	});<a name="line_252"></a></li>
<li id="line_253" class="odd"><span class="lineNumber">&nbsp;&nbsp;253&nbsp;</span><a name="line_253"></a></li>
<li id="line_254" class="even"><span class="lineNumber">&nbsp;&nbsp;254&nbsp;</span>	maxInnerWidth++;&nbsp;//&nbsp;sometimes&nbsp;not&nbsp;accurate&nbsp;of&nbsp;width&nbsp;the&nbsp;text&nbsp;needs&nbsp;to&nbsp;stay&nbsp;on&nbsp;one&nbsp;line.&nbsp;insurance<a name="line_254"></a></li>
<li id="line_255" class="odd"><span class="lineNumber">&nbsp;&nbsp;255&nbsp;</span><a name="line_255"></a></li>
<li id="line_256" class="even"><span class="lineNumber">&nbsp;&nbsp;256&nbsp;</span>	els.width(maxInnerWidth);<a name="line_256"></a></li>
<li id="line_257" class="odd"><span class="lineNumber">&nbsp;&nbsp;257&nbsp;</span><a name="line_257"></a></li>
<li id="line_258" class="even"><span class="lineNumber">&nbsp;&nbsp;258&nbsp;</span>	return&nbsp;maxInnerWidth;<a name="line_258"></a></li>
<li id="line_259" class="odd"><span class="lineNumber">&nbsp;&nbsp;259&nbsp;</span>}<a name="line_259"></a></li>
<li id="line_260" class="even"><span class="lineNumber">&nbsp;&nbsp;260&nbsp;</span><a name="line_260"></a></li>
<li id="line_261" class="odd"><span class="lineNumber">&nbsp;&nbsp;261&nbsp;</span><a name="line_261"></a></li>
<li id="line_262" class="even"><span class="lineNumber">&nbsp;&nbsp;262&nbsp;</span>//&nbsp;Turns&nbsp;a&nbsp;container&nbsp;element&nbsp;into&nbsp;a&nbsp;scroller&nbsp;if&nbsp;its&nbsp;contents&nbsp;is&nbsp;taller&nbsp;than&nbsp;the&nbsp;allotted&nbsp;height.<a name="line_262"></a></li>
<li id="line_263" class="odd"><span class="lineNumber">&nbsp;&nbsp;263&nbsp;</span>//&nbsp;Returns&nbsp;true&nbsp;if&nbsp;the&nbsp;element&nbsp;is&nbsp;now&nbsp;a&nbsp;scroller,&nbsp;false&nbsp;otherwise.<a name="line_263"></a></li>
<li id="line_264" class="even"><span class="lineNumber">&nbsp;&nbsp;264&nbsp;</span>//&nbsp;NOTE:&nbsp;this&nbsp;method&nbsp;is&nbsp;best&nbsp;because&nbsp;it&nbsp;takes&nbsp;weird&nbsp;zooming&nbsp;dimensions&nbsp;into&nbsp;account<a name="line_264"></a></li>
<li id="line_265" class="odd"><span class="lineNumber">&nbsp;&nbsp;265&nbsp;</span>function&nbsp;setPotentialScroller(containerEl,&nbsp;height)&nbsp;{<a name="line_265"></a></li>
<li id="line_266" class="even"><span class="lineNumber">&nbsp;&nbsp;266&nbsp;</span>	containerEl.height(height).addClass('fc-scroller');<a name="line_266"></a></li>
<li id="line_267" class="odd"><span class="lineNumber">&nbsp;&nbsp;267&nbsp;</span><a name="line_267"></a></li>
<li id="line_268" class="even"><span class="lineNumber">&nbsp;&nbsp;268&nbsp;</span>	//&nbsp;are&nbsp;scrollbars&nbsp;needed?<a name="line_268"></a></li>
<li id="line_269" class="odd"><span class="lineNumber">&nbsp;&nbsp;269&nbsp;</span>	if&nbsp;(containerEl[0].scrollHeight&nbsp;-&nbsp;1&nbsp;&gt;&nbsp;containerEl[0].clientHeight)&nbsp;{&nbsp;//&nbsp;!!!&nbsp;-1&nbsp;because&nbsp;IE&nbsp;is&nbsp;often&nbsp;off-by-one&nbsp;:(<a name="line_269"></a></li>
<li id="line_270" class="even"><span class="lineNumber">&nbsp;&nbsp;270&nbsp;</span>		return&nbsp;true;<a name="line_270"></a></li>
<li id="line_271" class="odd"><span class="lineNumber">&nbsp;&nbsp;271&nbsp;</span>	}<a name="line_271"></a></li>
<li id="line_272" class="even"><span class="lineNumber">&nbsp;&nbsp;272&nbsp;</span><a name="line_272"></a></li>
<li id="line_273" class="odd"><span class="lineNumber">&nbsp;&nbsp;273&nbsp;</span>	unsetScroller(containerEl);&nbsp;//&nbsp;undo<a name="line_273"></a></li>
<li id="line_274" class="even"><span class="lineNumber">&nbsp;&nbsp;274&nbsp;</span>	return&nbsp;false;<a name="line_274"></a></li>
<li id="line_275" class="odd"><span class="lineNumber">&nbsp;&nbsp;275&nbsp;</span>}<a name="line_275"></a></li>
<li id="line_276" class="even"><span class="lineNumber">&nbsp;&nbsp;276&nbsp;</span><a name="line_276"></a></li>
<li id="line_277" class="odd"><span class="lineNumber">&nbsp;&nbsp;277&nbsp;</span><a name="line_277"></a></li>
<li id="line_278" class="even"><span class="lineNumber">&nbsp;&nbsp;278&nbsp;</span>//&nbsp;Takes&nbsp;an&nbsp;element&nbsp;that&nbsp;might&nbsp;have&nbsp;been&nbsp;a&nbsp;scroller,&nbsp;and&nbsp;turns&nbsp;it&nbsp;back&nbsp;into&nbsp;a&nbsp;normal&nbsp;element.<a name="line_278"></a></li>
<li id="line_279" class="odd"><span class="lineNumber">&nbsp;&nbsp;279&nbsp;</span>function&nbsp;unsetScroller(containerEl)&nbsp;{<a name="line_279"></a></li>
<li id="line_280" class="even"><span class="lineNumber">&nbsp;&nbsp;280&nbsp;</span>	containerEl.height('').removeClass('fc-scroller');<a name="line_280"></a></li>
<li id="line_281" class="odd"><span class="lineNumber">&nbsp;&nbsp;281&nbsp;</span>}<a name="line_281"></a></li>
<li id="line_282" class="even"><span class="lineNumber">&nbsp;&nbsp;282&nbsp;</span><a name="line_282"></a></li>
<li id="line_283" class="odd"><span class="lineNumber">&nbsp;&nbsp;283&nbsp;</span><a name="line_283"></a></li>
<li id="line_284" class="even"><span class="lineNumber">&nbsp;&nbsp;284&nbsp;</span>/*&nbsp;General&nbsp;DOM&nbsp;Utilities<a name="line_284"></a></li>
<li id="line_285" class="odd"><span class="lineNumber">&nbsp;&nbsp;285&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_285"></a></li>
<li id="line_286" class="even"><span class="lineNumber">&nbsp;&nbsp;286&nbsp;</span><a name="line_286"></a></li>
<li id="line_287" class="odd"><span class="lineNumber">&nbsp;&nbsp;287&nbsp;</span>fc.getClientRect&nbsp;=&nbsp;getClientRect;<a name="line_287"></a></li>
<li id="line_288" class="even"><span class="lineNumber">&nbsp;&nbsp;288&nbsp;</span>fc.getContentRect&nbsp;=&nbsp;getContentRect;<a name="line_288"></a></li>
<li id="line_289" class="odd"><span class="lineNumber">&nbsp;&nbsp;289&nbsp;</span>fc.getScrollbarWidths&nbsp;=&nbsp;getScrollbarWidths;<a name="line_289"></a></li>
<li id="line_290" class="even"><span class="lineNumber">&nbsp;&nbsp;290&nbsp;</span><a name="line_290"></a></li>
<li id="line_291" class="odd"><span class="lineNumber">&nbsp;&nbsp;291&nbsp;</span><a name="line_291"></a></li>
<li id="line_292" class="even"><span class="lineNumber">&nbsp;&nbsp;292&nbsp;</span>//&nbsp;borrowed&nbsp;from&nbsp;https://github.com/jquery/jquery-ui/blob/1.11.0/ui/core.js#L51<a name="line_292"></a></li>
<li id="line_293" class="odd"><span class="lineNumber">&nbsp;&nbsp;293&nbsp;</span>function&nbsp;getScrollParent(el)&nbsp;{<a name="line_293"></a></li>
<li id="line_294" class="even"><span class="lineNumber">&nbsp;&nbsp;294&nbsp;</span>	var&nbsp;position&nbsp;=&nbsp;el.css('position'),<a name="line_294"></a></li>
<li id="line_295" class="odd"><span class="lineNumber">&nbsp;&nbsp;295&nbsp;</span>		scrollParent&nbsp;=&nbsp;el.parents().filter(function()&nbsp;{<a name="line_295"></a></li>
<li id="line_296" class="even"><span class="lineNumber">&nbsp;&nbsp;296&nbsp;</span>			var&nbsp;parent&nbsp;=&nbsp;$(this);<a name="line_296"></a></li>
<li id="line_297" class="odd"><span class="lineNumber">&nbsp;&nbsp;297&nbsp;</span>			return&nbsp;(/(auto|scroll)/).test(<a name="line_297"></a></li>
<li id="line_298" class="even"><span class="lineNumber">&nbsp;&nbsp;298&nbsp;</span>				parent.css('overflow')&nbsp;+&nbsp;parent.css('overflow-y')&nbsp;+&nbsp;parent.css('overflow-x')<a name="line_298"></a></li>
<li id="line_299" class="odd"><span class="lineNumber">&nbsp;&nbsp;299&nbsp;</span>			);<a name="line_299"></a></li>
<li id="line_300" class="even"><span class="lineNumber">&nbsp;&nbsp;300&nbsp;</span>		}).eq(0);<a name="line_300"></a></li>
<li id="line_301" class="odd"><span class="lineNumber">&nbsp;&nbsp;301&nbsp;</span><a name="line_301"></a></li>
<li id="line_302" class="even"><span class="lineNumber">&nbsp;&nbsp;302&nbsp;</span>	return&nbsp;position&nbsp;===&nbsp;'fixed'&nbsp;||&nbsp;!scrollParent.length&nbsp;?&nbsp;$(el[0].ownerDocument&nbsp;||&nbsp;document)&nbsp;:&nbsp;scrollParent;<a name="line_302"></a></li>
<li id="line_303" class="odd"><span class="lineNumber">&nbsp;&nbsp;303&nbsp;</span>}<a name="line_303"></a></li>
<li id="line_304" class="even"><span class="lineNumber">&nbsp;&nbsp;304&nbsp;</span><a name="line_304"></a></li>
<li id="line_305" class="odd"><span class="lineNumber">&nbsp;&nbsp;305&nbsp;</span><a name="line_305"></a></li>
<li id="line_306" class="even"><span class="lineNumber">&nbsp;&nbsp;306&nbsp;</span>//&nbsp;Queries&nbsp;the&nbsp;outer&nbsp;bounding&nbsp;area&nbsp;of&nbsp;a&nbsp;jQuery&nbsp;element.<a name="line_306"></a></li>
<li id="line_307" class="odd"><span class="lineNumber">&nbsp;&nbsp;307&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;rectangle&nbsp;with&nbsp;absolute&nbsp;coordinates:&nbsp;left,&nbsp;right&nbsp;(exclusive),&nbsp;top,&nbsp;bottom&nbsp;(exclusive).<a name="line_307"></a></li>
<li id="line_308" class="even"><span class="lineNumber">&nbsp;&nbsp;308&nbsp;</span>function&nbsp;getOuterRect(el)&nbsp;{<a name="line_308"></a></li>
<li id="line_309" class="odd"><span class="lineNumber">&nbsp;&nbsp;309&nbsp;</span>	var&nbsp;offset&nbsp;=&nbsp;el.offset();<a name="line_309"></a></li>
<li id="line_310" class="even"><span class="lineNumber">&nbsp;&nbsp;310&nbsp;</span><a name="line_310"></a></li>
<li id="line_311" class="odd"><span class="lineNumber">&nbsp;&nbsp;311&nbsp;</span>	return&nbsp;{<a name="line_311"></a></li>
<li id="line_312" class="even"><span class="lineNumber">&nbsp;&nbsp;312&nbsp;</span>		left:&nbsp;offset.left,<a name="line_312"></a></li>
<li id="line_313" class="odd"><span class="lineNumber">&nbsp;&nbsp;313&nbsp;</span>		right:&nbsp;offset.left&nbsp;+&nbsp;el.outerWidth(),<a name="line_313"></a></li>
<li id="line_314" class="even"><span class="lineNumber">&nbsp;&nbsp;314&nbsp;</span>		top:&nbsp;offset.top,<a name="line_314"></a></li>
<li id="line_315" class="odd"><span class="lineNumber">&nbsp;&nbsp;315&nbsp;</span>		bottom:&nbsp;offset.top&nbsp;+&nbsp;el.outerHeight()<a name="line_315"></a></li>
<li id="line_316" class="even"><span class="lineNumber">&nbsp;&nbsp;316&nbsp;</span>	};<a name="line_316"></a></li>
<li id="line_317" class="odd"><span class="lineNumber">&nbsp;&nbsp;317&nbsp;</span>}<a name="line_317"></a></li>
<li id="line_318" class="even"><span class="lineNumber">&nbsp;&nbsp;318&nbsp;</span><a name="line_318"></a></li>
<li id="line_319" class="odd"><span class="lineNumber">&nbsp;&nbsp;319&nbsp;</span><a name="line_319"></a></li>
<li id="line_320" class="even"><span class="lineNumber">&nbsp;&nbsp;320&nbsp;</span>//&nbsp;Queries&nbsp;the&nbsp;area&nbsp;within&nbsp;the&nbsp;margin/border/scrollbars&nbsp;of&nbsp;a&nbsp;jQuery&nbsp;element.&nbsp;Does&nbsp;not&nbsp;go&nbsp;within&nbsp;the&nbsp;padding.<a name="line_320"></a></li>
<li id="line_321" class="odd"><span class="lineNumber">&nbsp;&nbsp;321&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;rectangle&nbsp;with&nbsp;absolute&nbsp;coordinates:&nbsp;left,&nbsp;right&nbsp;(exclusive),&nbsp;top,&nbsp;bottom&nbsp;(exclusive).<a name="line_321"></a></li>
<li id="line_322" class="even"><span class="lineNumber">&nbsp;&nbsp;322&nbsp;</span>//&nbsp;NOTE:&nbsp;should&nbsp;use&nbsp;clientLeft/clientTop,&nbsp;but&nbsp;very&nbsp;unreliable&nbsp;cross-browser.<a name="line_322"></a></li>
<li id="line_323" class="odd"><span class="lineNumber">&nbsp;&nbsp;323&nbsp;</span>function&nbsp;getClientRect(el)&nbsp;{<a name="line_323"></a></li>
<li id="line_324" class="even"><span class="lineNumber">&nbsp;&nbsp;324&nbsp;</span>	var&nbsp;offset&nbsp;=&nbsp;el.offset();<a name="line_324"></a></li>
<li id="line_325" class="odd"><span class="lineNumber">&nbsp;&nbsp;325&nbsp;</span>	var&nbsp;scrollbarWidths&nbsp;=&nbsp;getScrollbarWidths(el);<a name="line_325"></a></li>
<li id="line_326" class="even"><span class="lineNumber">&nbsp;&nbsp;326&nbsp;</span>	var&nbsp;left&nbsp;=&nbsp;offset.left&nbsp;+&nbsp;getCssFloat(el,&nbsp;'border-left-width')&nbsp;+&nbsp;scrollbarWidths.left;<a name="line_326"></a></li>
<li id="line_327" class="odd"><span class="lineNumber">&nbsp;&nbsp;327&nbsp;</span>	var&nbsp;top&nbsp;=&nbsp;offset.top&nbsp;+&nbsp;getCssFloat(el,&nbsp;'border-top-width')&nbsp;+&nbsp;scrollbarWidths.top;<a name="line_327"></a></li>
<li id="line_328" class="even"><span class="lineNumber">&nbsp;&nbsp;328&nbsp;</span><a name="line_328"></a></li>
<li id="line_329" class="odd"><span class="lineNumber">&nbsp;&nbsp;329&nbsp;</span>	return&nbsp;{<a name="line_329"></a></li>
<li id="line_330" class="even"><span class="lineNumber">&nbsp;&nbsp;330&nbsp;</span>		left:&nbsp;left,<a name="line_330"></a></li>
<li id="line_331" class="odd"><span class="lineNumber">&nbsp;&nbsp;331&nbsp;</span>		right:&nbsp;left&nbsp;+&nbsp;el[0].clientWidth,&nbsp;//&nbsp;clientWidth&nbsp;includes&nbsp;padding&nbsp;but&nbsp;NOT&nbsp;scrollbars<a name="line_331"></a></li>
<li id="line_332" class="even"><span class="lineNumber">&nbsp;&nbsp;332&nbsp;</span>		top:&nbsp;top,<a name="line_332"></a></li>
<li id="line_333" class="odd"><span class="lineNumber">&nbsp;&nbsp;333&nbsp;</span>		bottom:&nbsp;top&nbsp;+&nbsp;el[0].clientHeight&nbsp;//&nbsp;clientHeight&nbsp;includes&nbsp;padding&nbsp;but&nbsp;NOT&nbsp;scrollbars<a name="line_333"></a></li>
<li id="line_334" class="even"><span class="lineNumber">&nbsp;&nbsp;334&nbsp;</span>	};<a name="line_334"></a></li>
<li id="line_335" class="odd"><span class="lineNumber">&nbsp;&nbsp;335&nbsp;</span>}<a name="line_335"></a></li>
<li id="line_336" class="even"><span class="lineNumber">&nbsp;&nbsp;336&nbsp;</span><a name="line_336"></a></li>
<li id="line_337" class="odd"><span class="lineNumber">&nbsp;&nbsp;337&nbsp;</span><a name="line_337"></a></li>
<li id="line_338" class="even"><span class="lineNumber">&nbsp;&nbsp;338&nbsp;</span>//&nbsp;Queries&nbsp;the&nbsp;area&nbsp;within&nbsp;the&nbsp;margin/border/padding&nbsp;of&nbsp;a&nbsp;jQuery&nbsp;element.&nbsp;Assumed&nbsp;not&nbsp;to&nbsp;have&nbsp;scrollbars.<a name="line_338"></a></li>
<li id="line_339" class="odd"><span class="lineNumber">&nbsp;&nbsp;339&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;rectangle&nbsp;with&nbsp;absolute&nbsp;coordinates:&nbsp;left,&nbsp;right&nbsp;(exclusive),&nbsp;top,&nbsp;bottom&nbsp;(exclusive).<a name="line_339"></a></li>
<li id="line_340" class="even"><span class="lineNumber">&nbsp;&nbsp;340&nbsp;</span>function&nbsp;getContentRect(el)&nbsp;{<a name="line_340"></a></li>
<li id="line_341" class="odd"><span class="lineNumber">&nbsp;&nbsp;341&nbsp;</span>	var&nbsp;offset&nbsp;=&nbsp;el.offset();&nbsp;//&nbsp;just&nbsp;outside&nbsp;of&nbsp;border,&nbsp;margin&nbsp;not&nbsp;included<a name="line_341"></a></li>
<li id="line_342" class="even"><span class="lineNumber">&nbsp;&nbsp;342&nbsp;</span>	var&nbsp;left&nbsp;=&nbsp;offset.left&nbsp;+&nbsp;getCssFloat(el,&nbsp;'border-left-width')&nbsp;+&nbsp;getCssFloat(el,&nbsp;'padding-left');<a name="line_342"></a></li>
<li id="line_343" class="odd"><span class="lineNumber">&nbsp;&nbsp;343&nbsp;</span>	var&nbsp;top&nbsp;=&nbsp;offset.top&nbsp;+&nbsp;getCssFloat(el,&nbsp;'border-top-width')&nbsp;+&nbsp;getCssFloat(el,&nbsp;'padding-top');<a name="line_343"></a></li>
<li id="line_344" class="even"><span class="lineNumber">&nbsp;&nbsp;344&nbsp;</span><a name="line_344"></a></li>
<li id="line_345" class="odd"><span class="lineNumber">&nbsp;&nbsp;345&nbsp;</span>	return&nbsp;{<a name="line_345"></a></li>
<li id="line_346" class="even"><span class="lineNumber">&nbsp;&nbsp;346&nbsp;</span>		left:&nbsp;left,<a name="line_346"></a></li>
<li id="line_347" class="odd"><span class="lineNumber">&nbsp;&nbsp;347&nbsp;</span>		right:&nbsp;left&nbsp;+&nbsp;el.width(),<a name="line_347"></a></li>
<li id="line_348" class="even"><span class="lineNumber">&nbsp;&nbsp;348&nbsp;</span>		top:&nbsp;top,<a name="line_348"></a></li>
<li id="line_349" class="odd"><span class="lineNumber">&nbsp;&nbsp;349&nbsp;</span>		bottom:&nbsp;top&nbsp;+&nbsp;el.height()<a name="line_349"></a></li>
<li id="line_350" class="even"><span class="lineNumber">&nbsp;&nbsp;350&nbsp;</span>	};<a name="line_350"></a></li>
<li id="line_351" class="odd"><span class="lineNumber">&nbsp;&nbsp;351&nbsp;</span>}<a name="line_351"></a></li>
<li id="line_352" class="even"><span class="lineNumber">&nbsp;&nbsp;352&nbsp;</span><a name="line_352"></a></li>
<li id="line_353" class="odd"><span class="lineNumber">&nbsp;&nbsp;353&nbsp;</span><a name="line_353"></a></li>
<li id="line_354" class="even"><span class="lineNumber">&nbsp;&nbsp;354&nbsp;</span>//&nbsp;Returns&nbsp;the&nbsp;computed&nbsp;left/right/top/bottom&nbsp;scrollbar&nbsp;widths&nbsp;for&nbsp;the&nbsp;given&nbsp;jQuery&nbsp;element.<a name="line_354"></a></li>
<li id="line_355" class="odd"><span class="lineNumber">&nbsp;&nbsp;355&nbsp;</span>//&nbsp;NOTE:&nbsp;should&nbsp;use&nbsp;clientLeft/clientTop,&nbsp;but&nbsp;very&nbsp;unreliable&nbsp;cross-browser.<a name="line_355"></a></li>
<li id="line_356" class="even"><span class="lineNumber">&nbsp;&nbsp;356&nbsp;</span>function&nbsp;getScrollbarWidths(el)&nbsp;{<a name="line_356"></a></li>
<li id="line_357" class="odd"><span class="lineNumber">&nbsp;&nbsp;357&nbsp;</span>	var&nbsp;leftRightWidth&nbsp;=&nbsp;el.innerWidth()&nbsp;-&nbsp;el[0].clientWidth;&nbsp;//&nbsp;the&nbsp;paddings&nbsp;cancel&nbsp;out,&nbsp;leaving&nbsp;the&nbsp;scrollbars<a name="line_357"></a></li>
<li id="line_358" class="even"><span class="lineNumber">&nbsp;&nbsp;358&nbsp;</span>	var&nbsp;widths&nbsp;=&nbsp;{<a name="line_358"></a></li>
<li id="line_359" class="odd"><span class="lineNumber">&nbsp;&nbsp;359&nbsp;</span>		left:&nbsp;0,<a name="line_359"></a></li>
<li id="line_360" class="even"><span class="lineNumber">&nbsp;&nbsp;360&nbsp;</span>		right:&nbsp;0,<a name="line_360"></a></li>
<li id="line_361" class="odd"><span class="lineNumber">&nbsp;&nbsp;361&nbsp;</span>		top:&nbsp;0,<a name="line_361"></a></li>
<li id="line_362" class="even"><span class="lineNumber">&nbsp;&nbsp;362&nbsp;</span>		bottom:&nbsp;el.innerHeight()&nbsp;-&nbsp;el[0].clientHeight&nbsp;//&nbsp;the&nbsp;paddings&nbsp;cancel&nbsp;out,&nbsp;leaving&nbsp;the&nbsp;bottom&nbsp;scrollbar<a name="line_362"></a></li>
<li id="line_363" class="odd"><span class="lineNumber">&nbsp;&nbsp;363&nbsp;</span>	};<a name="line_363"></a></li>
<li id="line_364" class="even"><span class="lineNumber">&nbsp;&nbsp;364&nbsp;</span><a name="line_364"></a></li>
<li id="line_365" class="odd"><span class="lineNumber">&nbsp;&nbsp;365&nbsp;</span>	if&nbsp;(getIsLeftRtlScrollbars()&nbsp;&amp;&amp;&nbsp;el.css('direction')&nbsp;==&nbsp;'rtl')&nbsp;{&nbsp;//&nbsp;is&nbsp;the&nbsp;scrollbar&nbsp;on&nbsp;the&nbsp;left&nbsp;side?<a name="line_365"></a></li>
<li id="line_366" class="even"><span class="lineNumber">&nbsp;&nbsp;366&nbsp;</span>		widths.left&nbsp;=&nbsp;leftRightWidth;<a name="line_366"></a></li>
<li id="line_367" class="odd"><span class="lineNumber">&nbsp;&nbsp;367&nbsp;</span>	}<a name="line_367"></a></li>
<li id="line_368" class="even"><span class="lineNumber">&nbsp;&nbsp;368&nbsp;</span>	else&nbsp;{<a name="line_368"></a></li>
<li id="line_369" class="odd"><span class="lineNumber">&nbsp;&nbsp;369&nbsp;</span>		widths.right&nbsp;=&nbsp;leftRightWidth;<a name="line_369"></a></li>
<li id="line_370" class="even"><span class="lineNumber">&nbsp;&nbsp;370&nbsp;</span>	}<a name="line_370"></a></li>
<li id="line_371" class="odd"><span class="lineNumber">&nbsp;&nbsp;371&nbsp;</span><a name="line_371"></a></li>
<li id="line_372" class="even"><span class="lineNumber">&nbsp;&nbsp;372&nbsp;</span>	return&nbsp;widths;<a name="line_372"></a></li>
<li id="line_373" class="odd"><span class="lineNumber">&nbsp;&nbsp;373&nbsp;</span>}<a name="line_373"></a></li>
<li id="line_374" class="even"><span class="lineNumber">&nbsp;&nbsp;374&nbsp;</span><a name="line_374"></a></li>
<li id="line_375" class="odd"><span class="lineNumber">&nbsp;&nbsp;375&nbsp;</span><a name="line_375"></a></li>
<li id="line_376" class="even"><span class="lineNumber">&nbsp;&nbsp;376&nbsp;</span>//&nbsp;Logic&nbsp;for&nbsp;determining&nbsp;if,&nbsp;when&nbsp;the&nbsp;element&nbsp;is&nbsp;right-to-left,&nbsp;the&nbsp;scrollbar&nbsp;appears&nbsp;on&nbsp;the&nbsp;left&nbsp;side<a name="line_376"></a></li>
<li id="line_377" class="odd"><span class="lineNumber">&nbsp;&nbsp;377&nbsp;</span><a name="line_377"></a></li>
<li id="line_378" class="even"><span class="lineNumber">&nbsp;&nbsp;378&nbsp;</span>var&nbsp;_isLeftRtlScrollbars&nbsp;=&nbsp;null;<a name="line_378"></a></li>
<li id="line_379" class="odd"><span class="lineNumber">&nbsp;&nbsp;379&nbsp;</span><a name="line_379"></a></li>
<li id="line_380" class="even"><span class="lineNumber">&nbsp;&nbsp;380&nbsp;</span>function&nbsp;getIsLeftRtlScrollbars()&nbsp;{&nbsp;//&nbsp;responsible&nbsp;for&nbsp;caching&nbsp;the&nbsp;computation<a name="line_380"></a></li>
<li id="line_381" class="odd"><span class="lineNumber">&nbsp;&nbsp;381&nbsp;</span>	if&nbsp;(_isLeftRtlScrollbars&nbsp;===&nbsp;null)&nbsp;{<a name="line_381"></a></li>
<li id="line_382" class="even"><span class="lineNumber">&nbsp;&nbsp;382&nbsp;</span>		_isLeftRtlScrollbars&nbsp;=&nbsp;computeIsLeftRtlScrollbars();<a name="line_382"></a></li>
<li id="line_383" class="odd"><span class="lineNumber">&nbsp;&nbsp;383&nbsp;</span>	}<a name="line_383"></a></li>
<li id="line_384" class="even"><span class="lineNumber">&nbsp;&nbsp;384&nbsp;</span>	return&nbsp;_isLeftRtlScrollbars;<a name="line_384"></a></li>
<li id="line_385" class="odd"><span class="lineNumber">&nbsp;&nbsp;385&nbsp;</span>}<a name="line_385"></a></li>
<li id="line_386" class="even"><span class="lineNumber">&nbsp;&nbsp;386&nbsp;</span><a name="line_386"></a></li>
<li id="line_387" class="odd"><span class="lineNumber">&nbsp;&nbsp;387&nbsp;</span>function&nbsp;computeIsLeftRtlScrollbars()&nbsp;{&nbsp;//&nbsp;creates&nbsp;an&nbsp;offscreen&nbsp;test&nbsp;element,&nbsp;then&nbsp;removes&nbsp;it<a name="line_387"></a></li>
<li id="line_388" class="even"><span class="lineNumber">&nbsp;&nbsp;388&nbsp;</span>	var&nbsp;el&nbsp;=&nbsp;$('&lt;div&gt;&lt;div/&gt;&lt;/div&gt;')<a name="line_388"></a></li>
<li id="line_389" class="odd"><span class="lineNumber">&nbsp;&nbsp;389&nbsp;</span>		.css({<a name="line_389"></a></li>
<li id="line_390" class="even"><span class="lineNumber">&nbsp;&nbsp;390&nbsp;</span>			position:&nbsp;'absolute',<a name="line_390"></a></li>
<li id="line_391" class="odd"><span class="lineNumber">&nbsp;&nbsp;391&nbsp;</span>			top:&nbsp;-1000,<a name="line_391"></a></li>
<li id="line_392" class="even"><span class="lineNumber">&nbsp;&nbsp;392&nbsp;</span>			left:&nbsp;0,<a name="line_392"></a></li>
<li id="line_393" class="odd"><span class="lineNumber">&nbsp;&nbsp;393&nbsp;</span>			border:&nbsp;0,<a name="line_393"></a></li>
<li id="line_394" class="even"><span class="lineNumber">&nbsp;&nbsp;394&nbsp;</span>			padding:&nbsp;0,<a name="line_394"></a></li>
<li id="line_395" class="odd"><span class="lineNumber">&nbsp;&nbsp;395&nbsp;</span>			overflow:&nbsp;'scroll',<a name="line_395"></a></li>
<li id="line_396" class="even"><span class="lineNumber">&nbsp;&nbsp;396&nbsp;</span>			direction:&nbsp;'rtl'<a name="line_396"></a></li>
<li id="line_397" class="odd"><span class="lineNumber">&nbsp;&nbsp;397&nbsp;</span>		})<a name="line_397"></a></li>
<li id="line_398" class="even"><span class="lineNumber">&nbsp;&nbsp;398&nbsp;</span>		.appendTo('body');<a name="line_398"></a></li>
<li id="line_399" class="odd"><span class="lineNumber">&nbsp;&nbsp;399&nbsp;</span>	var&nbsp;innerEl&nbsp;=&nbsp;el.children();<a name="line_399"></a></li>
<li id="line_400" class="even"><span class="lineNumber">&nbsp;&nbsp;400&nbsp;</span>	var&nbsp;res&nbsp;=&nbsp;innerEl.offset().left&nbsp;&gt;&nbsp;el.offset().left;&nbsp;//&nbsp;is&nbsp;the&nbsp;inner&nbsp;div&nbsp;shifted&nbsp;to&nbsp;accommodate&nbsp;a&nbsp;left&nbsp;scrollbar?<a name="line_400"></a></li>
<li id="line_401" class="odd"><span class="lineNumber">&nbsp;&nbsp;401&nbsp;</span>	el.remove();<a name="line_401"></a></li>
<li id="line_402" class="even"><span class="lineNumber">&nbsp;&nbsp;402&nbsp;</span>	return&nbsp;res;<a name="line_402"></a></li>
<li id="line_403" class="odd"><span class="lineNumber">&nbsp;&nbsp;403&nbsp;</span>}<a name="line_403"></a></li>
<li id="line_404" class="even"><span class="lineNumber">&nbsp;&nbsp;404&nbsp;</span><a name="line_404"></a></li>
<li id="line_405" class="odd"><span class="lineNumber">&nbsp;&nbsp;405&nbsp;</span><a name="line_405"></a></li>
<li id="line_406" class="even"><span class="lineNumber">&nbsp;&nbsp;406&nbsp;</span>//&nbsp;Retrieves&nbsp;a&nbsp;jQuery&nbsp;element's&nbsp;computed&nbsp;CSS&nbsp;value&nbsp;as&nbsp;a&nbsp;floating-point&nbsp;number.<a name="line_406"></a></li>
<li id="line_407" class="odd"><span class="lineNumber">&nbsp;&nbsp;407&nbsp;</span>//&nbsp;If&nbsp;the&nbsp;queried&nbsp;value&nbsp;is&nbsp;non-numeric&nbsp;(ex:&nbsp;IE&nbsp;can&nbsp;return&nbsp;"medium"&nbsp;for&nbsp;border&nbsp;width),&nbsp;will&nbsp;just&nbsp;return&nbsp;zero.<a name="line_407"></a></li>
<li id="line_408" class="even"><span class="lineNumber">&nbsp;&nbsp;408&nbsp;</span>function&nbsp;getCssFloat(el,&nbsp;prop)&nbsp;{<a name="line_408"></a></li>
<li id="line_409" class="odd"><span class="lineNumber">&nbsp;&nbsp;409&nbsp;</span>	return&nbsp;parseFloat(el.css(prop))&nbsp;||&nbsp;0;<a name="line_409"></a></li>
<li id="line_410" class="even"><span class="lineNumber">&nbsp;&nbsp;410&nbsp;</span>}<a name="line_410"></a></li>
<li id="line_411" class="odd"><span class="lineNumber">&nbsp;&nbsp;411&nbsp;</span><a name="line_411"></a></li>
<li id="line_412" class="even"><span class="lineNumber">&nbsp;&nbsp;412&nbsp;</span><a name="line_412"></a></li>
<li id="line_413" class="odd"><span class="lineNumber">&nbsp;&nbsp;413&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;boolean&nbsp;whether&nbsp;this&nbsp;was&nbsp;a&nbsp;left&nbsp;mouse&nbsp;click&nbsp;and&nbsp;no&nbsp;ctrl&nbsp;key&nbsp;(which&nbsp;means&nbsp;right&nbsp;click&nbsp;on&nbsp;Mac)<a name="line_413"></a></li>
<li id="line_414" class="even"><span class="lineNumber">&nbsp;&nbsp;414&nbsp;</span>function&nbsp;isPrimaryMouseButton(ev)&nbsp;{<a name="line_414"></a></li>
<li id="line_415" class="odd"><span class="lineNumber">&nbsp;&nbsp;415&nbsp;</span>	return&nbsp;ev.which&nbsp;==&nbsp;1&nbsp;&amp;&amp;&nbsp;!ev.ctrlKey;<a name="line_415"></a></li>
<li id="line_416" class="even"><span class="lineNumber">&nbsp;&nbsp;416&nbsp;</span>}<a name="line_416"></a></li>
<li id="line_417" class="odd"><span class="lineNumber">&nbsp;&nbsp;417&nbsp;</span><a name="line_417"></a></li>
<li id="line_418" class="even"><span class="lineNumber">&nbsp;&nbsp;418&nbsp;</span><a name="line_418"></a></li>
<li id="line_419" class="odd"><span class="lineNumber">&nbsp;&nbsp;419&nbsp;</span>/*&nbsp;Geometry<a name="line_419"></a></li>
<li id="line_420" class="even"><span class="lineNumber">&nbsp;&nbsp;420&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_420"></a></li>
<li id="line_421" class="odd"><span class="lineNumber">&nbsp;&nbsp;421&nbsp;</span><a name="line_421"></a></li>
<li id="line_422" class="even"><span class="lineNumber">&nbsp;&nbsp;422&nbsp;</span><a name="line_422"></a></li>
<li id="line_423" class="odd"><span class="lineNumber">&nbsp;&nbsp;423&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;new&nbsp;rectangle&nbsp;that&nbsp;is&nbsp;the&nbsp;intersection&nbsp;of&nbsp;the&nbsp;two&nbsp;rectangles.&nbsp;If&nbsp;they&nbsp;don't&nbsp;intersect,&nbsp;returns&nbsp;false<a name="line_423"></a></li>
<li id="line_424" class="even"><span class="lineNumber">&nbsp;&nbsp;424&nbsp;</span>function&nbsp;intersectRects(rect1,&nbsp;rect2)&nbsp;{<a name="line_424"></a></li>
<li id="line_425" class="odd"><span class="lineNumber">&nbsp;&nbsp;425&nbsp;</span>	var&nbsp;res&nbsp;=&nbsp;{<a name="line_425"></a></li>
<li id="line_426" class="even"><span class="lineNumber">&nbsp;&nbsp;426&nbsp;</span>		left:&nbsp;Math.max(rect1.left,&nbsp;rect2.left),<a name="line_426"></a></li>
<li id="line_427" class="odd"><span class="lineNumber">&nbsp;&nbsp;427&nbsp;</span>		right:&nbsp;Math.min(rect1.right,&nbsp;rect2.right),<a name="line_427"></a></li>
<li id="line_428" class="even"><span class="lineNumber">&nbsp;&nbsp;428&nbsp;</span>		top:&nbsp;Math.max(rect1.top,&nbsp;rect2.top),<a name="line_428"></a></li>
<li id="line_429" class="odd"><span class="lineNumber">&nbsp;&nbsp;429&nbsp;</span>		bottom:&nbsp;Math.min(rect1.bottom,&nbsp;rect2.bottom)<a name="line_429"></a></li>
<li id="line_430" class="even"><span class="lineNumber">&nbsp;&nbsp;430&nbsp;</span>	};<a name="line_430"></a></li>
<li id="line_431" class="odd"><span class="lineNumber">&nbsp;&nbsp;431&nbsp;</span><a name="line_431"></a></li>
<li id="line_432" class="even"><span class="lineNumber">&nbsp;&nbsp;432&nbsp;</span>	if&nbsp;(res.left&nbsp;&lt;&nbsp;res.right&nbsp;&amp;&amp;&nbsp;res.top&nbsp;&lt;&nbsp;res.bottom)&nbsp;{<a name="line_432"></a></li>
<li id="line_433" class="odd"><span class="lineNumber">&nbsp;&nbsp;433&nbsp;</span>		return&nbsp;res;<a name="line_433"></a></li>
<li id="line_434" class="even"><span class="lineNumber">&nbsp;&nbsp;434&nbsp;</span>	}<a name="line_434"></a></li>
<li id="line_435" class="odd"><span class="lineNumber">&nbsp;&nbsp;435&nbsp;</span>	return&nbsp;false;<a name="line_435"></a></li>
<li id="line_436" class="even"><span class="lineNumber">&nbsp;&nbsp;436&nbsp;</span>}<a name="line_436"></a></li>
<li id="line_437" class="odd"><span class="lineNumber">&nbsp;&nbsp;437&nbsp;</span><a name="line_437"></a></li>
<li id="line_438" class="even"><span class="lineNumber">&nbsp;&nbsp;438&nbsp;</span><a name="line_438"></a></li>
<li id="line_439" class="odd"><span class="lineNumber">&nbsp;&nbsp;439&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;new&nbsp;point&nbsp;that&nbsp;will&nbsp;have&nbsp;been&nbsp;moved&nbsp;to&nbsp;reside&nbsp;within&nbsp;the&nbsp;given&nbsp;rectangle<a name="line_439"></a></li>
<li id="line_440" class="even"><span class="lineNumber">&nbsp;&nbsp;440&nbsp;</span>function&nbsp;constrainPoint(point,&nbsp;rect)&nbsp;{<a name="line_440"></a></li>
<li id="line_441" class="odd"><span class="lineNumber">&nbsp;&nbsp;441&nbsp;</span>	return&nbsp;{<a name="line_441"></a></li>
<li id="line_442" class="even"><span class="lineNumber">&nbsp;&nbsp;442&nbsp;</span>		left:&nbsp;Math.min(Math.max(point.left,&nbsp;rect.left),&nbsp;rect.right),<a name="line_442"></a></li>
<li id="line_443" class="odd"><span class="lineNumber">&nbsp;&nbsp;443&nbsp;</span>		top:&nbsp;Math.min(Math.max(point.top,&nbsp;rect.top),&nbsp;rect.bottom)<a name="line_443"></a></li>
<li id="line_444" class="even"><span class="lineNumber">&nbsp;&nbsp;444&nbsp;</span>	};<a name="line_444"></a></li>
<li id="line_445" class="odd"><span class="lineNumber">&nbsp;&nbsp;445&nbsp;</span>}<a name="line_445"></a></li>
<li id="line_446" class="even"><span class="lineNumber">&nbsp;&nbsp;446&nbsp;</span><a name="line_446"></a></li>
<li id="line_447" class="odd"><span class="lineNumber">&nbsp;&nbsp;447&nbsp;</span><a name="line_447"></a></li>
<li id="line_448" class="even"><span class="lineNumber">&nbsp;&nbsp;448&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;point&nbsp;that&nbsp;is&nbsp;the&nbsp;center&nbsp;of&nbsp;the&nbsp;given&nbsp;rectangle<a name="line_448"></a></li>
<li id="line_449" class="odd"><span class="lineNumber">&nbsp;&nbsp;449&nbsp;</span>function&nbsp;getRectCenter(rect)&nbsp;{<a name="line_449"></a></li>
<li id="line_450" class="even"><span class="lineNumber">&nbsp;&nbsp;450&nbsp;</span>	return&nbsp;{<a name="line_450"></a></li>
<li id="line_451" class="odd"><span class="lineNumber">&nbsp;&nbsp;451&nbsp;</span>		left:&nbsp;(rect.left&nbsp;+&nbsp;rect.right)&nbsp;/&nbsp;2,<a name="line_451"></a></li>
<li id="line_452" class="even"><span class="lineNumber">&nbsp;&nbsp;452&nbsp;</span>		top:&nbsp;(rect.top&nbsp;+&nbsp;rect.bottom)&nbsp;/&nbsp;2<a name="line_452"></a></li>
<li id="line_453" class="odd"><span class="lineNumber">&nbsp;&nbsp;453&nbsp;</span>	};<a name="line_453"></a></li>
<li id="line_454" class="even"><span class="lineNumber">&nbsp;&nbsp;454&nbsp;</span>}<a name="line_454"></a></li>
<li id="line_455" class="odd"><span class="lineNumber">&nbsp;&nbsp;455&nbsp;</span><a name="line_455"></a></li>
<li id="line_456" class="even"><span class="lineNumber">&nbsp;&nbsp;456&nbsp;</span><a name="line_456"></a></li>
<li id="line_457" class="odd"><span class="lineNumber">&nbsp;&nbsp;457&nbsp;</span>//&nbsp;Subtracts&nbsp;point2's&nbsp;coordinates&nbsp;from&nbsp;point1's&nbsp;coordinates,&nbsp;returning&nbsp;a&nbsp;delta<a name="line_457"></a></li>
<li id="line_458" class="even"><span class="lineNumber">&nbsp;&nbsp;458&nbsp;</span>function&nbsp;diffPoints(point1,&nbsp;point2)&nbsp;{<a name="line_458"></a></li>
<li id="line_459" class="odd"><span class="lineNumber">&nbsp;&nbsp;459&nbsp;</span>	return&nbsp;{<a name="line_459"></a></li>
<li id="line_460" class="even"><span class="lineNumber">&nbsp;&nbsp;460&nbsp;</span>		left:&nbsp;point1.left&nbsp;-&nbsp;point2.left,<a name="line_460"></a></li>
<li id="line_461" class="odd"><span class="lineNumber">&nbsp;&nbsp;461&nbsp;</span>		top:&nbsp;point1.top&nbsp;-&nbsp;point2.top<a name="line_461"></a></li>
<li id="line_462" class="even"><span class="lineNumber">&nbsp;&nbsp;462&nbsp;</span>	};<a name="line_462"></a></li>
<li id="line_463" class="odd"><span class="lineNumber">&nbsp;&nbsp;463&nbsp;</span>}<a name="line_463"></a></li>
<li id="line_464" class="even"><span class="lineNumber">&nbsp;&nbsp;464&nbsp;</span><a name="line_464"></a></li>
<li id="line_465" class="odd"><span class="lineNumber">&nbsp;&nbsp;465&nbsp;</span><a name="line_465"></a></li>
<li id="line_466" class="even"><span class="lineNumber">&nbsp;&nbsp;466&nbsp;</span>/*&nbsp;FullCalendar-specific&nbsp;Misc&nbsp;Utilities<a name="line_466"></a></li>
<li id="line_467" class="odd"><span class="lineNumber">&nbsp;&nbsp;467&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_467"></a></li>
<li id="line_468" class="even"><span class="lineNumber">&nbsp;&nbsp;468&nbsp;</span><a name="line_468"></a></li>
<li id="line_469" class="odd"><span class="lineNumber">&nbsp;&nbsp;469&nbsp;</span><a name="line_469"></a></li>
<li id="line_470" class="even"><span class="lineNumber">&nbsp;&nbsp;470&nbsp;</span>//&nbsp;Creates&nbsp;a&nbsp;basic&nbsp;segment&nbsp;with&nbsp;the&nbsp;intersection&nbsp;of&nbsp;the&nbsp;two&nbsp;ranges.&nbsp;Returns&nbsp;undefined&nbsp;if&nbsp;no&nbsp;intersection.<a name="line_470"></a></li>
<li id="line_471" class="odd"><span class="lineNumber">&nbsp;&nbsp;471&nbsp;</span>//&nbsp;Expects&nbsp;all&nbsp;dates&nbsp;to&nbsp;be&nbsp;normalized&nbsp;to&nbsp;the&nbsp;same&nbsp;timezone&nbsp;beforehand.<a name="line_471"></a></li>
<li id="line_472" class="even"><span class="lineNumber">&nbsp;&nbsp;472&nbsp;</span>//&nbsp;TODO:&nbsp;move&nbsp;to&nbsp;date&nbsp;section?<a name="line_472"></a></li>
<li id="line_473" class="odd"><span class="lineNumber">&nbsp;&nbsp;473&nbsp;</span>function&nbsp;intersectionToSeg(subjectRange,&nbsp;constraintRange)&nbsp;{<a name="line_473"></a></li>
<li id="line_474" class="even"><span class="lineNumber">&nbsp;&nbsp;474&nbsp;</span>	var&nbsp;subjectStart&nbsp;=&nbsp;subjectRange.start;<a name="line_474"></a></li>
<li id="line_475" class="odd"><span class="lineNumber">&nbsp;&nbsp;475&nbsp;</span>	var&nbsp;subjectEnd&nbsp;=&nbsp;subjectRange.end;<a name="line_475"></a></li>
<li id="line_476" class="even"><span class="lineNumber">&nbsp;&nbsp;476&nbsp;</span>	var&nbsp;constraintStart&nbsp;=&nbsp;constraintRange.start;<a name="line_476"></a></li>
<li id="line_477" class="odd"><span class="lineNumber">&nbsp;&nbsp;477&nbsp;</span>	var&nbsp;constraintEnd&nbsp;=&nbsp;constraintRange.end;<a name="line_477"></a></li>
<li id="line_478" class="even"><span class="lineNumber">&nbsp;&nbsp;478&nbsp;</span>	var&nbsp;segStart,&nbsp;segEnd;<a name="line_478"></a></li>
<li id="line_479" class="odd"><span class="lineNumber">&nbsp;&nbsp;479&nbsp;</span>	var&nbsp;isStart,&nbsp;isEnd;<a name="line_479"></a></li>
<li id="line_480" class="even"><span class="lineNumber">&nbsp;&nbsp;480&nbsp;</span><a name="line_480"></a></li>
<li id="line_481" class="odd"><span class="lineNumber">&nbsp;&nbsp;481&nbsp;</span>	if&nbsp;(subjectEnd&nbsp;&gt;&nbsp;constraintStart&nbsp;&amp;&amp;&nbsp;subjectStart&nbsp;&lt;&nbsp;constraintEnd)&nbsp;{&nbsp;//&nbsp;in&nbsp;bounds&nbsp;at&nbsp;all?<a name="line_481"></a></li>
<li id="line_482" class="even"><span class="lineNumber">&nbsp;&nbsp;482&nbsp;</span><a name="line_482"></a></li>
<li id="line_483" class="odd"><span class="lineNumber">&nbsp;&nbsp;483&nbsp;</span>		if&nbsp;(subjectStart&nbsp;&gt;=&nbsp;constraintStart)&nbsp;{<a name="line_483"></a></li>
<li id="line_484" class="even"><span class="lineNumber">&nbsp;&nbsp;484&nbsp;</span>			segStart&nbsp;=&nbsp;subjectStart.clone();<a name="line_484"></a></li>
<li id="line_485" class="odd"><span class="lineNumber">&nbsp;&nbsp;485&nbsp;</span>			isStart&nbsp;=&nbsp;true;<a name="line_485"></a></li>
<li id="line_486" class="even"><span class="lineNumber">&nbsp;&nbsp;486&nbsp;</span>		}<a name="line_486"></a></li>
<li id="line_487" class="odd"><span class="lineNumber">&nbsp;&nbsp;487&nbsp;</span>		else&nbsp;{<a name="line_487"></a></li>
<li id="line_488" class="even"><span class="lineNumber">&nbsp;&nbsp;488&nbsp;</span>			segStart&nbsp;=&nbsp;constraintStart.clone();<a name="line_488"></a></li>
<li id="line_489" class="odd"><span class="lineNumber">&nbsp;&nbsp;489&nbsp;</span>			isStart&nbsp;=&nbsp;&nbsp;false;<a name="line_489"></a></li>
<li id="line_490" class="even"><span class="lineNumber">&nbsp;&nbsp;490&nbsp;</span>		}<a name="line_490"></a></li>
<li id="line_491" class="odd"><span class="lineNumber">&nbsp;&nbsp;491&nbsp;</span><a name="line_491"></a></li>
<li id="line_492" class="even"><span class="lineNumber">&nbsp;&nbsp;492&nbsp;</span>		if&nbsp;(subjectEnd&nbsp;&lt;=&nbsp;constraintEnd)&nbsp;{<a name="line_492"></a></li>
<li id="line_493" class="odd"><span class="lineNumber">&nbsp;&nbsp;493&nbsp;</span>			segEnd&nbsp;=&nbsp;subjectEnd.clone();<a name="line_493"></a></li>
<li id="line_494" class="even"><span class="lineNumber">&nbsp;&nbsp;494&nbsp;</span>			isEnd&nbsp;=&nbsp;true;<a name="line_494"></a></li>
<li id="line_495" class="odd"><span class="lineNumber">&nbsp;&nbsp;495&nbsp;</span>		}<a name="line_495"></a></li>
<li id="line_496" class="even"><span class="lineNumber">&nbsp;&nbsp;496&nbsp;</span>		else&nbsp;{<a name="line_496"></a></li>
<li id="line_497" class="odd"><span class="lineNumber">&nbsp;&nbsp;497&nbsp;</span>			segEnd&nbsp;=&nbsp;constraintEnd.clone();<a name="line_497"></a></li>
<li id="line_498" class="even"><span class="lineNumber">&nbsp;&nbsp;498&nbsp;</span>			isEnd&nbsp;=&nbsp;false;<a name="line_498"></a></li>
<li id="line_499" class="odd"><span class="lineNumber">&nbsp;&nbsp;499&nbsp;</span>		}<a name="line_499"></a></li>
<li id="line_500" class="even"><span class="lineNumber">&nbsp;&nbsp;500&nbsp;</span><a name="line_500"></a></li>
<li id="line_501" class="odd"><span class="lineNumber">&nbsp;&nbsp;501&nbsp;</span>		return&nbsp;{<a name="line_501"></a></li>
<li id="line_502" class="even"><span class="lineNumber">&nbsp;&nbsp;502&nbsp;</span>			start:&nbsp;segStart,<a name="line_502"></a></li>
<li id="line_503" class="odd"><span class="lineNumber">&nbsp;&nbsp;503&nbsp;</span>			end:&nbsp;segEnd,<a name="line_503"></a></li>
<li id="line_504" class="even"><span class="lineNumber">&nbsp;&nbsp;504&nbsp;</span>			isStart:&nbsp;isStart,<a name="line_504"></a></li>
<li id="line_505" class="odd"><span class="lineNumber">&nbsp;&nbsp;505&nbsp;</span>			isEnd:&nbsp;isEnd<a name="line_505"></a></li>
<li id="line_506" class="even"><span class="lineNumber">&nbsp;&nbsp;506&nbsp;</span>		};<a name="line_506"></a></li>
<li id="line_507" class="odd"><span class="lineNumber">&nbsp;&nbsp;507&nbsp;</span>	}<a name="line_507"></a></li>
<li id="line_508" class="even"><span class="lineNumber">&nbsp;&nbsp;508&nbsp;</span>}<a name="line_508"></a></li>
<li id="line_509" class="odd"><span class="lineNumber">&nbsp;&nbsp;509&nbsp;</span><a name="line_509"></a></li>
<li id="line_510" class="even"><span class="lineNumber">&nbsp;&nbsp;510&nbsp;</span><a name="line_510"></a></li>
<li id="line_511" class="odd"><span class="lineNumber">&nbsp;&nbsp;511&nbsp;</span>/*&nbsp;Date&nbsp;Utilities<a name="line_511"></a></li>
<li id="line_512" class="even"><span class="lineNumber">&nbsp;&nbsp;512&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_512"></a></li>
<li id="line_513" class="odd"><span class="lineNumber">&nbsp;&nbsp;513&nbsp;</span><a name="line_513"></a></li>
<li id="line_514" class="even"><span class="lineNumber">&nbsp;&nbsp;514&nbsp;</span>fc.computeIntervalUnit&nbsp;=&nbsp;computeIntervalUnit;<a name="line_514"></a></li>
<li id="line_515" class="odd"><span class="lineNumber">&nbsp;&nbsp;515&nbsp;</span>fc.durationHasTime&nbsp;=&nbsp;durationHasTime;<a name="line_515"></a></li>
<li id="line_516" class="even"><span class="lineNumber">&nbsp;&nbsp;516&nbsp;</span><a name="line_516"></a></li>
<li id="line_517" class="odd"><span class="lineNumber">&nbsp;&nbsp;517&nbsp;</span>var&nbsp;dayIDs&nbsp;=&nbsp;[&nbsp;'sun',&nbsp;'mon',&nbsp;'tue',&nbsp;'wed',&nbsp;'thu',&nbsp;'fri',&nbsp;'sat'&nbsp;];<a name="line_517"></a></li>
<li id="line_518" class="even"><span class="lineNumber">&nbsp;&nbsp;518&nbsp;</span>var&nbsp;intervalUnits&nbsp;=&nbsp;[&nbsp;'year',&nbsp;'month',&nbsp;'week',&nbsp;'day',&nbsp;'hour',&nbsp;'minute',&nbsp;'second',&nbsp;'millisecond'&nbsp;];<a name="line_518"></a></li>
<li id="line_519" class="odd"><span class="lineNumber">&nbsp;&nbsp;519&nbsp;</span><a name="line_519"></a></li>
<li id="line_520" class="even"><span class="lineNumber">&nbsp;&nbsp;520&nbsp;</span><a name="line_520"></a></li>
<li id="line_521" class="odd"><span class="lineNumber">&nbsp;&nbsp;521&nbsp;</span>//&nbsp;Diffs&nbsp;the&nbsp;two&nbsp;moments&nbsp;into&nbsp;a&nbsp;Duration&nbsp;where&nbsp;full-days&nbsp;are&nbsp;recorded&nbsp;first,&nbsp;then&nbsp;the&nbsp;remaining&nbsp;time.<a name="line_521"></a></li>
<li id="line_522" class="even"><span class="lineNumber">&nbsp;&nbsp;522&nbsp;</span>//&nbsp;Moments&nbsp;will&nbsp;have&nbsp;their&nbsp;timezones&nbsp;normalized.<a name="line_522"></a></li>
<li id="line_523" class="odd"><span class="lineNumber">&nbsp;&nbsp;523&nbsp;</span>function&nbsp;diffDayTime(a,&nbsp;b)&nbsp;{<a name="line_523"></a></li>
<li id="line_524" class="even"><span class="lineNumber">&nbsp;&nbsp;524&nbsp;</span>	return&nbsp;moment.duration({<a name="line_524"></a></li>
<li id="line_525" class="odd"><span class="lineNumber">&nbsp;&nbsp;525&nbsp;</span>		days:&nbsp;a.clone().stripTime().diff(b.clone().stripTime(),&nbsp;'days'),<a name="line_525"></a></li>
<li id="line_526" class="even"><span class="lineNumber">&nbsp;&nbsp;526&nbsp;</span>		ms:&nbsp;a.time()&nbsp;-&nbsp;b.time()&nbsp;//&nbsp;time-of-day&nbsp;from&nbsp;day&nbsp;start.&nbsp;disregards&nbsp;timezone<a name="line_526"></a></li>
<li id="line_527" class="odd"><span class="lineNumber">&nbsp;&nbsp;527&nbsp;</span>	});<a name="line_527"></a></li>
<li id="line_528" class="even"><span class="lineNumber">&nbsp;&nbsp;528&nbsp;</span>}<a name="line_528"></a></li>
<li id="line_529" class="odd"><span class="lineNumber">&nbsp;&nbsp;529&nbsp;</span><a name="line_529"></a></li>
<li id="line_530" class="even"><span class="lineNumber">&nbsp;&nbsp;530&nbsp;</span><a name="line_530"></a></li>
<li id="line_531" class="odd"><span class="lineNumber">&nbsp;&nbsp;531&nbsp;</span>//&nbsp;Diffs&nbsp;the&nbsp;two&nbsp;moments&nbsp;via&nbsp;their&nbsp;start-of-day&nbsp;(regardless&nbsp;of&nbsp;timezone).&nbsp;Produces&nbsp;whole-day&nbsp;durations.<a name="line_531"></a></li>
<li id="line_532" class="even"><span class="lineNumber">&nbsp;&nbsp;532&nbsp;</span>function&nbsp;diffDay(a,&nbsp;b)&nbsp;{<a name="line_532"></a></li>
<li id="line_533" class="odd"><span class="lineNumber">&nbsp;&nbsp;533&nbsp;</span>	return&nbsp;moment.duration({<a name="line_533"></a></li>
<li id="line_534" class="even"><span class="lineNumber">&nbsp;&nbsp;534&nbsp;</span>		days:&nbsp;a.clone().stripTime().diff(b.clone().stripTime(),&nbsp;'days')<a name="line_534"></a></li>
<li id="line_535" class="odd"><span class="lineNumber">&nbsp;&nbsp;535&nbsp;</span>	});<a name="line_535"></a></li>
<li id="line_536" class="even"><span class="lineNumber">&nbsp;&nbsp;536&nbsp;</span>}<a name="line_536"></a></li>
<li id="line_537" class="odd"><span class="lineNumber">&nbsp;&nbsp;537&nbsp;</span><a name="line_537"></a></li>
<li id="line_538" class="even"><span class="lineNumber">&nbsp;&nbsp;538&nbsp;</span><a name="line_538"></a></li>
<li id="line_539" class="odd"><span class="lineNumber">&nbsp;&nbsp;539&nbsp;</span>//&nbsp;Diffs&nbsp;two&nbsp;moments,&nbsp;producing&nbsp;a&nbsp;duration,&nbsp;made&nbsp;of&nbsp;a&nbsp;whole-unit-increment&nbsp;of&nbsp;the&nbsp;given&nbsp;unit.&nbsp;Uses&nbsp;rounding.<a name="line_539"></a></li>
<li id="line_540" class="even"><span class="lineNumber">&nbsp;&nbsp;540&nbsp;</span>function&nbsp;diffByUnit(a,&nbsp;b,&nbsp;unit)&nbsp;{<a name="line_540"></a></li>
<li id="line_541" class="odd"><span class="lineNumber">&nbsp;&nbsp;541&nbsp;</span>	return&nbsp;moment.duration(<a name="line_541"></a></li>
<li id="line_542" class="even"><span class="lineNumber">&nbsp;&nbsp;542&nbsp;</span>		Math.round(a.diff(b,&nbsp;unit,&nbsp;true)),&nbsp;//&nbsp;returnFloat=true<a name="line_542"></a></li>
<li id="line_543" class="odd"><span class="lineNumber">&nbsp;&nbsp;543&nbsp;</span>		unit<a name="line_543"></a></li>
<li id="line_544" class="even"><span class="lineNumber">&nbsp;&nbsp;544&nbsp;</span>	);<a name="line_544"></a></li>
<li id="line_545" class="odd"><span class="lineNumber">&nbsp;&nbsp;545&nbsp;</span>}<a name="line_545"></a></li>
<li id="line_546" class="even"><span class="lineNumber">&nbsp;&nbsp;546&nbsp;</span><a name="line_546"></a></li>
<li id="line_547" class="odd"><span class="lineNumber">&nbsp;&nbsp;547&nbsp;</span><a name="line_547"></a></li>
<li id="line_548" class="even"><span class="lineNumber">&nbsp;&nbsp;548&nbsp;</span>//&nbsp;Computes&nbsp;the&nbsp;unit&nbsp;name&nbsp;of&nbsp;the&nbsp;largest&nbsp;whole-unit&nbsp;period&nbsp;of&nbsp;time.<a name="line_548"></a></li>
<li id="line_549" class="odd"><span class="lineNumber">&nbsp;&nbsp;549&nbsp;</span>//&nbsp;For&nbsp;example,&nbsp;48&nbsp;hours&nbsp;will&nbsp;be&nbsp;"days"&nbsp;whereas&nbsp;49&nbsp;hours&nbsp;will&nbsp;be&nbsp;"hours".<a name="line_549"></a></li>
<li id="line_550" class="even"><span class="lineNumber">&nbsp;&nbsp;550&nbsp;</span>//&nbsp;Accepts&nbsp;start/end,&nbsp;a&nbsp;range&nbsp;object,&nbsp;or&nbsp;an&nbsp;original&nbsp;duration&nbsp;object.<a name="line_550"></a></li>
<li id="line_551" class="odd"><span class="lineNumber">&nbsp;&nbsp;551&nbsp;</span>function&nbsp;computeIntervalUnit(start,&nbsp;end)&nbsp;{<a name="line_551"></a></li>
<li id="line_552" class="even"><span class="lineNumber">&nbsp;&nbsp;552&nbsp;</span>	var&nbsp;i,&nbsp;unit;<a name="line_552"></a></li>
<li id="line_553" class="odd"><span class="lineNumber">&nbsp;&nbsp;553&nbsp;</span>	var&nbsp;val;<a name="line_553"></a></li>
<li id="line_554" class="even"><span class="lineNumber">&nbsp;&nbsp;554&nbsp;</span><a name="line_554"></a></li>
<li id="line_555" class="odd"><span class="lineNumber">&nbsp;&nbsp;555&nbsp;</span>	for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;intervalUnits.length;&nbsp;i++)&nbsp;{<a name="line_555"></a></li>
<li id="line_556" class="even"><span class="lineNumber">&nbsp;&nbsp;556&nbsp;</span>		unit&nbsp;=&nbsp;intervalUnits[i];<a name="line_556"></a></li>
<li id="line_557" class="odd"><span class="lineNumber">&nbsp;&nbsp;557&nbsp;</span>		val&nbsp;=&nbsp;computeRangeAs(unit,&nbsp;start,&nbsp;end);<a name="line_557"></a></li>
<li id="line_558" class="even"><span class="lineNumber">&nbsp;&nbsp;558&nbsp;</span><a name="line_558"></a></li>
<li id="line_559" class="odd"><span class="lineNumber">&nbsp;&nbsp;559&nbsp;</span>		if&nbsp;(val&nbsp;&gt;=&nbsp;1&nbsp;&amp;&amp;&nbsp;isInt(val))&nbsp;{<a name="line_559"></a></li>
<li id="line_560" class="even"><span class="lineNumber">&nbsp;&nbsp;560&nbsp;</span>			break;<a name="line_560"></a></li>
<li id="line_561" class="odd"><span class="lineNumber">&nbsp;&nbsp;561&nbsp;</span>		}<a name="line_561"></a></li>
<li id="line_562" class="even"><span class="lineNumber">&nbsp;&nbsp;562&nbsp;</span>	}<a name="line_562"></a></li>
<li id="line_563" class="odd"><span class="lineNumber">&nbsp;&nbsp;563&nbsp;</span><a name="line_563"></a></li>
<li id="line_564" class="even"><span class="lineNumber">&nbsp;&nbsp;564&nbsp;</span>	return&nbsp;unit;&nbsp;//&nbsp;will&nbsp;be&nbsp;"milliseconds"&nbsp;if&nbsp;nothing&nbsp;else&nbsp;matches<a name="line_564"></a></li>
<li id="line_565" class="odd"><span class="lineNumber">&nbsp;&nbsp;565&nbsp;</span>}<a name="line_565"></a></li>
<li id="line_566" class="even"><span class="lineNumber">&nbsp;&nbsp;566&nbsp;</span><a name="line_566"></a></li>
<li id="line_567" class="odd"><span class="lineNumber">&nbsp;&nbsp;567&nbsp;</span><a name="line_567"></a></li>
<li id="line_568" class="even"><span class="lineNumber">&nbsp;&nbsp;568&nbsp;</span>//&nbsp;Computes&nbsp;the&nbsp;number&nbsp;of&nbsp;units&nbsp;(like&nbsp;"hours")&nbsp;in&nbsp;the&nbsp;given&nbsp;range.<a name="line_568"></a></li>
<li id="line_569" class="odd"><span class="lineNumber">&nbsp;&nbsp;569&nbsp;</span>//&nbsp;Range&nbsp;can&nbsp;be&nbsp;a&nbsp;{start,end}&nbsp;object,&nbsp;separate&nbsp;start/end&nbsp;args,&nbsp;or&nbsp;a&nbsp;Duration.<a name="line_569"></a></li>
<li id="line_570" class="even"><span class="lineNumber">&nbsp;&nbsp;570&nbsp;</span>//&nbsp;Results&nbsp;are&nbsp;based&nbsp;on&nbsp;Moment's&nbsp;.as()&nbsp;and&nbsp;.diff()&nbsp;methods,&nbsp;so&nbsp;results&nbsp;can&nbsp;depend&nbsp;on&nbsp;internal&nbsp;handling<a name="line_570"></a></li>
<li id="line_571" class="odd"><span class="lineNumber">&nbsp;&nbsp;571&nbsp;</span>//&nbsp;of&nbsp;month-diffing&nbsp;logic&nbsp;(which&nbsp;tends&nbsp;to&nbsp;vary&nbsp;from&nbsp;version&nbsp;to&nbsp;version).<a name="line_571"></a></li>
<li id="line_572" class="even"><span class="lineNumber">&nbsp;&nbsp;572&nbsp;</span>function&nbsp;computeRangeAs(unit,&nbsp;start,&nbsp;end)&nbsp;{<a name="line_572"></a></li>
<li id="line_573" class="odd"><span class="lineNumber">&nbsp;&nbsp;573&nbsp;</span><a name="line_573"></a></li>
<li id="line_574" class="even"><span class="lineNumber">&nbsp;&nbsp;574&nbsp;</span>	if&nbsp;(end&nbsp;!=&nbsp;null)&nbsp;{&nbsp;//&nbsp;given&nbsp;start,&nbsp;end<a name="line_574"></a></li>
<li id="line_575" class="odd"><span class="lineNumber">&nbsp;&nbsp;575&nbsp;</span>		return&nbsp;end.diff(start,&nbsp;unit,&nbsp;true);<a name="line_575"></a></li>
<li id="line_576" class="even"><span class="lineNumber">&nbsp;&nbsp;576&nbsp;</span>	}<a name="line_576"></a></li>
<li id="line_577" class="odd"><span class="lineNumber">&nbsp;&nbsp;577&nbsp;</span>	else&nbsp;if&nbsp;(moment.isDuration(start))&nbsp;{&nbsp;//&nbsp;given&nbsp;duration<a name="line_577"></a></li>
<li id="line_578" class="even"><span class="lineNumber">&nbsp;&nbsp;578&nbsp;</span>		return&nbsp;start.as(unit);<a name="line_578"></a></li>
<li id="line_579" class="odd"><span class="lineNumber">&nbsp;&nbsp;579&nbsp;</span>	}<a name="line_579"></a></li>
<li id="line_580" class="even"><span class="lineNumber">&nbsp;&nbsp;580&nbsp;</span>	else&nbsp;{&nbsp;//&nbsp;given&nbsp;{&nbsp;start,&nbsp;end&nbsp;}&nbsp;range&nbsp;object<a name="line_580"></a></li>
<li id="line_581" class="odd"><span class="lineNumber">&nbsp;&nbsp;581&nbsp;</span>		return&nbsp;start.end.diff(start.start,&nbsp;unit,&nbsp;true);<a name="line_581"></a></li>
<li id="line_582" class="even"><span class="lineNumber">&nbsp;&nbsp;582&nbsp;</span>	}<a name="line_582"></a></li>
<li id="line_583" class="odd"><span class="lineNumber">&nbsp;&nbsp;583&nbsp;</span>}<a name="line_583"></a></li>
<li id="line_584" class="even"><span class="lineNumber">&nbsp;&nbsp;584&nbsp;</span><a name="line_584"></a></li>
<li id="line_585" class="odd"><span class="lineNumber">&nbsp;&nbsp;585&nbsp;</span><a name="line_585"></a></li>
<li id="line_586" class="even"><span class="lineNumber">&nbsp;&nbsp;586&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;boolean&nbsp;about&nbsp;whether&nbsp;the&nbsp;given&nbsp;duration&nbsp;has&nbsp;any&nbsp;time&nbsp;parts&nbsp;(hours/minutes/seconds/ms)<a name="line_586"></a></li>
<li id="line_587" class="odd"><span class="lineNumber">&nbsp;&nbsp;587&nbsp;</span>function&nbsp;durationHasTime(dur)&nbsp;{<a name="line_587"></a></li>
<li id="line_588" class="even"><span class="lineNumber">&nbsp;&nbsp;588&nbsp;</span>	return&nbsp;Boolean(dur.hours()&nbsp;||&nbsp;dur.minutes()&nbsp;||&nbsp;dur.seconds()&nbsp;||&nbsp;dur.milliseconds());<a name="line_588"></a></li>
<li id="line_589" class="odd"><span class="lineNumber">&nbsp;&nbsp;589&nbsp;</span>}<a name="line_589"></a></li>
<li id="line_590" class="even"><span class="lineNumber">&nbsp;&nbsp;590&nbsp;</span><a name="line_590"></a></li>
<li id="line_591" class="odd"><span class="lineNumber">&nbsp;&nbsp;591&nbsp;</span><a name="line_591"></a></li>
<li id="line_592" class="even"><span class="lineNumber">&nbsp;&nbsp;592&nbsp;</span>function&nbsp;isNativeDate(input)&nbsp;{<a name="line_592"></a></li>
<li id="line_593" class="odd"><span class="lineNumber">&nbsp;&nbsp;593&nbsp;</span>	return&nbsp;&nbsp;Object.prototype.toString.call(input)&nbsp;===&nbsp;'[object&nbsp;Date]'&nbsp;||&nbsp;input&nbsp;instanceof&nbsp;Date;<a name="line_593"></a></li>
<li id="line_594" class="even"><span class="lineNumber">&nbsp;&nbsp;594&nbsp;</span>}<a name="line_594"></a></li>
<li id="line_595" class="odd"><span class="lineNumber">&nbsp;&nbsp;595&nbsp;</span><a name="line_595"></a></li>
<li id="line_596" class="even"><span class="lineNumber">&nbsp;&nbsp;596&nbsp;</span><a name="line_596"></a></li>
<li id="line_597" class="odd"><span class="lineNumber">&nbsp;&nbsp;597&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;boolean&nbsp;about&nbsp;whether&nbsp;the&nbsp;given&nbsp;input&nbsp;is&nbsp;a&nbsp;time&nbsp;string,&nbsp;like&nbsp;"06:40:00"&nbsp;or&nbsp;"06:00"<a name="line_597"></a></li>
<li id="line_598" class="even"><span class="lineNumber">&nbsp;&nbsp;598&nbsp;</span>function&nbsp;isTimeString(str)&nbsp;{<a name="line_598"></a></li>
<li id="line_599" class="odd"><span class="lineNumber">&nbsp;&nbsp;599&nbsp;</span>	return&nbsp;/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(str);<a name="line_599"></a></li>
<li id="line_600" class="even"><span class="lineNumber">&nbsp;&nbsp;600&nbsp;</span>}<a name="line_600"></a></li>
<li id="line_601" class="odd"><span class="lineNumber">&nbsp;&nbsp;601&nbsp;</span><a name="line_601"></a></li>
<li id="line_602" class="even"><span class="lineNumber">&nbsp;&nbsp;602&nbsp;</span><a name="line_602"></a></li>
<li id="line_603" class="odd"><span class="lineNumber">&nbsp;&nbsp;603&nbsp;</span>/*&nbsp;General&nbsp;Utilities<a name="line_603"></a></li>
<li id="line_604" class="even"><span class="lineNumber">&nbsp;&nbsp;604&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_604"></a></li>
<li id="line_605" class="odd"><span class="lineNumber">&nbsp;&nbsp;605&nbsp;</span><a name="line_605"></a></li>
<li id="line_606" class="even"><span class="lineNumber">&nbsp;&nbsp;606&nbsp;</span>var&nbsp;hasOwnPropMethod&nbsp;=&nbsp;{}.hasOwnProperty;<a name="line_606"></a></li>
<li id="line_607" class="odd"><span class="lineNumber">&nbsp;&nbsp;607&nbsp;</span><a name="line_607"></a></li>
<li id="line_608" class="even"><span class="lineNumber">&nbsp;&nbsp;608&nbsp;</span><a name="line_608"></a></li>
<li id="line_609" class="odd"><span class="lineNumber">&nbsp;&nbsp;609&nbsp;</span>//&nbsp;Merges&nbsp;an&nbsp;array&nbsp;of&nbsp;objects&nbsp;into&nbsp;a&nbsp;single&nbsp;object.<a name="line_609"></a></li>
<li id="line_610" class="even"><span class="lineNumber">&nbsp;&nbsp;610&nbsp;</span>//&nbsp;The&nbsp;second&nbsp;argument&nbsp;allows&nbsp;for&nbsp;an&nbsp;array&nbsp;of&nbsp;property&nbsp;names&nbsp;who's&nbsp;object&nbsp;values&nbsp;will&nbsp;be&nbsp;merged&nbsp;together.<a name="line_610"></a></li>
<li id="line_611" class="odd"><span class="lineNumber">&nbsp;&nbsp;611&nbsp;</span>function&nbsp;mergeProps(propObjs,&nbsp;complexProps)&nbsp;{<a name="line_611"></a></li>
<li id="line_612" class="even"><span class="lineNumber">&nbsp;&nbsp;612&nbsp;</span>	var&nbsp;dest&nbsp;=&nbsp;{};<a name="line_612"></a></li>
<li id="line_613" class="odd"><span class="lineNumber">&nbsp;&nbsp;613&nbsp;</span>	var&nbsp;i,&nbsp;name;<a name="line_613"></a></li>
<li id="line_614" class="even"><span class="lineNumber">&nbsp;&nbsp;614&nbsp;</span>	var&nbsp;complexObjs;<a name="line_614"></a></li>
<li id="line_615" class="odd"><span class="lineNumber">&nbsp;&nbsp;615&nbsp;</span>	var&nbsp;j,&nbsp;val;<a name="line_615"></a></li>
<li id="line_616" class="even"><span class="lineNumber">&nbsp;&nbsp;616&nbsp;</span>	var&nbsp;props;<a name="line_616"></a></li>
<li id="line_617" class="odd"><span class="lineNumber">&nbsp;&nbsp;617&nbsp;</span><a name="line_617"></a></li>
<li id="line_618" class="even"><span class="lineNumber">&nbsp;&nbsp;618&nbsp;</span>	if&nbsp;(complexProps)&nbsp;{<a name="line_618"></a></li>
<li id="line_619" class="odd"><span class="lineNumber">&nbsp;&nbsp;619&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;complexProps.length;&nbsp;i++)&nbsp;{<a name="line_619"></a></li>
<li id="line_620" class="even"><span class="lineNumber">&nbsp;&nbsp;620&nbsp;</span>			name&nbsp;=&nbsp;complexProps[i];<a name="line_620"></a></li>
<li id="line_621" class="odd"><span class="lineNumber">&nbsp;&nbsp;621&nbsp;</span>			complexObjs&nbsp;=&nbsp;[];<a name="line_621"></a></li>
<li id="line_622" class="even"><span class="lineNumber">&nbsp;&nbsp;622&nbsp;</span><a name="line_622"></a></li>
<li id="line_623" class="odd"><span class="lineNumber">&nbsp;&nbsp;623&nbsp;</span>			//&nbsp;collect&nbsp;the&nbsp;trailing&nbsp;object&nbsp;values,&nbsp;stopping&nbsp;when&nbsp;a&nbsp;non-object&nbsp;is&nbsp;discovered<a name="line_623"></a></li>
<li id="line_624" class="even"><span class="lineNumber">&nbsp;&nbsp;624&nbsp;</span>			for&nbsp;(j&nbsp;=&nbsp;propObjs.length&nbsp;-&nbsp;1;&nbsp;j&nbsp;&gt;=&nbsp;0;&nbsp;j--)&nbsp;{<a name="line_624"></a></li>
<li id="line_625" class="odd"><span class="lineNumber">&nbsp;&nbsp;625&nbsp;</span>				val&nbsp;=&nbsp;propObjs[j][name];<a name="line_625"></a></li>
<li id="line_626" class="even"><span class="lineNumber">&nbsp;&nbsp;626&nbsp;</span><a name="line_626"></a></li>
<li id="line_627" class="odd"><span class="lineNumber">&nbsp;&nbsp;627&nbsp;</span>				if&nbsp;(typeof&nbsp;val&nbsp;===&nbsp;'object')&nbsp;{<a name="line_627"></a></li>
<li id="line_628" class="even"><span class="lineNumber">&nbsp;&nbsp;628&nbsp;</span>					complexObjs.unshift(val);<a name="line_628"></a></li>
<li id="line_629" class="odd"><span class="lineNumber">&nbsp;&nbsp;629&nbsp;</span>				}<a name="line_629"></a></li>
<li id="line_630" class="even"><span class="lineNumber">&nbsp;&nbsp;630&nbsp;</span>				else&nbsp;if&nbsp;(val&nbsp;!==&nbsp;undefined)&nbsp;{<a name="line_630"></a></li>
<li id="line_631" class="odd"><span class="lineNumber">&nbsp;&nbsp;631&nbsp;</span>					dest[name]&nbsp;=&nbsp;val;&nbsp;//&nbsp;if&nbsp;there&nbsp;were&nbsp;no&nbsp;objects,&nbsp;this&nbsp;value&nbsp;will&nbsp;be&nbsp;used<a name="line_631"></a></li>
<li id="line_632" class="even"><span class="lineNumber">&nbsp;&nbsp;632&nbsp;</span>					break;<a name="line_632"></a></li>
<li id="line_633" class="odd"><span class="lineNumber">&nbsp;&nbsp;633&nbsp;</span>				}<a name="line_633"></a></li>
<li id="line_634" class="even"><span class="lineNumber">&nbsp;&nbsp;634&nbsp;</span>			}<a name="line_634"></a></li>
<li id="line_635" class="odd"><span class="lineNumber">&nbsp;&nbsp;635&nbsp;</span><a name="line_635"></a></li>
<li id="line_636" class="even"><span class="lineNumber">&nbsp;&nbsp;636&nbsp;</span>			//&nbsp;if&nbsp;the&nbsp;trailing&nbsp;values&nbsp;were&nbsp;objects,&nbsp;use&nbsp;the&nbsp;merged&nbsp;value<a name="line_636"></a></li>
<li id="line_637" class="odd"><span class="lineNumber">&nbsp;&nbsp;637&nbsp;</span>			if&nbsp;(complexObjs.length)&nbsp;{<a name="line_637"></a></li>
<li id="line_638" class="even"><span class="lineNumber">&nbsp;&nbsp;638&nbsp;</span>				dest[name]&nbsp;=&nbsp;mergeProps(complexObjs);<a name="line_638"></a></li>
<li id="line_639" class="odd"><span class="lineNumber">&nbsp;&nbsp;639&nbsp;</span>			}<a name="line_639"></a></li>
<li id="line_640" class="even"><span class="lineNumber">&nbsp;&nbsp;640&nbsp;</span>		}<a name="line_640"></a></li>
<li id="line_641" class="odd"><span class="lineNumber">&nbsp;&nbsp;641&nbsp;</span>	}<a name="line_641"></a></li>
<li id="line_642" class="even"><span class="lineNumber">&nbsp;&nbsp;642&nbsp;</span><a name="line_642"></a></li>
<li id="line_643" class="odd"><span class="lineNumber">&nbsp;&nbsp;643&nbsp;</span>	//&nbsp;copy&nbsp;values&nbsp;into&nbsp;the&nbsp;destination,&nbsp;going&nbsp;from&nbsp;last&nbsp;to&nbsp;first<a name="line_643"></a></li>
<li id="line_644" class="even"><span class="lineNumber">&nbsp;&nbsp;644&nbsp;</span>	for&nbsp;(i&nbsp;=&nbsp;propObjs.length&nbsp;-&nbsp;1;&nbsp;i&nbsp;&gt;=&nbsp;0;&nbsp;i--)&nbsp;{<a name="line_644"></a></li>
<li id="line_645" class="odd"><span class="lineNumber">&nbsp;&nbsp;645&nbsp;</span>		props&nbsp;=&nbsp;propObjs[i];<a name="line_645"></a></li>
<li id="line_646" class="even"><span class="lineNumber">&nbsp;&nbsp;646&nbsp;</span><a name="line_646"></a></li>
<li id="line_647" class="odd"><span class="lineNumber">&nbsp;&nbsp;647&nbsp;</span>		for&nbsp;(name&nbsp;in&nbsp;props)&nbsp;{<a name="line_647"></a></li>
<li id="line_648" class="even"><span class="lineNumber">&nbsp;&nbsp;648&nbsp;</span>			if&nbsp;(!(name&nbsp;in&nbsp;dest))&nbsp;{&nbsp;//&nbsp;if&nbsp;already&nbsp;assigned&nbsp;by&nbsp;previous&nbsp;props&nbsp;or&nbsp;complex&nbsp;props,&nbsp;don't&nbsp;reassign<a name="line_648"></a></li>
<li id="line_649" class="odd"><span class="lineNumber">&nbsp;&nbsp;649&nbsp;</span>				dest[name]&nbsp;=&nbsp;props[name];<a name="line_649"></a></li>
<li id="line_650" class="even"><span class="lineNumber">&nbsp;&nbsp;650&nbsp;</span>			}<a name="line_650"></a></li>
<li id="line_651" class="odd"><span class="lineNumber">&nbsp;&nbsp;651&nbsp;</span>		}<a name="line_651"></a></li>
<li id="line_652" class="even"><span class="lineNumber">&nbsp;&nbsp;652&nbsp;</span>	}<a name="line_652"></a></li>
<li id="line_653" class="odd"><span class="lineNumber">&nbsp;&nbsp;653&nbsp;</span><a name="line_653"></a></li>
<li id="line_654" class="even"><span class="lineNumber">&nbsp;&nbsp;654&nbsp;</span>	return&nbsp;dest;<a name="line_654"></a></li>
<li id="line_655" class="odd"><span class="lineNumber">&nbsp;&nbsp;655&nbsp;</span>}<a name="line_655"></a></li>
<li id="line_656" class="even"><span class="lineNumber">&nbsp;&nbsp;656&nbsp;</span><a name="line_656"></a></li>
<li id="line_657" class="odd"><span class="lineNumber">&nbsp;&nbsp;657&nbsp;</span><a name="line_657"></a></li>
<li id="line_658" class="even"><span class="lineNumber">&nbsp;&nbsp;658&nbsp;</span>//&nbsp;Create&nbsp;an&nbsp;object&nbsp;that&nbsp;has&nbsp;the&nbsp;given&nbsp;prototype.&nbsp;Just&nbsp;like&nbsp;Object.create<a name="line_658"></a></li>
<li id="line_659" class="odd"><span class="lineNumber">&nbsp;&nbsp;659&nbsp;</span>function&nbsp;createObject(proto)&nbsp;{<a name="line_659"></a></li>
<li id="line_660" class="even"><span class="lineNumber">&nbsp;&nbsp;660&nbsp;</span>	var&nbsp;f&nbsp;=&nbsp;function()&nbsp;{};<a name="line_660"></a></li>
<li id="line_661" class="odd"><span class="lineNumber">&nbsp;&nbsp;661&nbsp;</span>	f.prototype&nbsp;=&nbsp;proto;<a name="line_661"></a></li>
<li id="line_662" class="even"><span class="lineNumber">&nbsp;&nbsp;662&nbsp;</span>	return&nbsp;new&nbsp;f();<a name="line_662"></a></li>
<li id="line_663" class="odd"><span class="lineNumber">&nbsp;&nbsp;663&nbsp;</span>}<a name="line_663"></a></li>
<li id="line_664" class="even"><span class="lineNumber">&nbsp;&nbsp;664&nbsp;</span><a name="line_664"></a></li>
<li id="line_665" class="odd"><span class="lineNumber">&nbsp;&nbsp;665&nbsp;</span><a name="line_665"></a></li>
<li id="line_666" class="even"><span class="lineNumber">&nbsp;&nbsp;666&nbsp;</span>function&nbsp;copyOwnProps(src,&nbsp;dest)&nbsp;{<a name="line_666"></a></li>
<li id="line_667" class="odd"><span class="lineNumber">&nbsp;&nbsp;667&nbsp;</span>	for&nbsp;(var&nbsp;name&nbsp;in&nbsp;src)&nbsp;{<a name="line_667"></a></li>
<li id="line_668" class="even"><span class="lineNumber">&nbsp;&nbsp;668&nbsp;</span>		if&nbsp;(hasOwnProp(src,&nbsp;name))&nbsp;{<a name="line_668"></a></li>
<li id="line_669" class="odd"><span class="lineNumber">&nbsp;&nbsp;669&nbsp;</span>			dest[name]&nbsp;=&nbsp;src[name];<a name="line_669"></a></li>
<li id="line_670" class="even"><span class="lineNumber">&nbsp;&nbsp;670&nbsp;</span>		}<a name="line_670"></a></li>
<li id="line_671" class="odd"><span class="lineNumber">&nbsp;&nbsp;671&nbsp;</span>	}<a name="line_671"></a></li>
<li id="line_672" class="even"><span class="lineNumber">&nbsp;&nbsp;672&nbsp;</span>}<a name="line_672"></a></li>
<li id="line_673" class="odd"><span class="lineNumber">&nbsp;&nbsp;673&nbsp;</span><a name="line_673"></a></li>
<li id="line_674" class="even"><span class="lineNumber">&nbsp;&nbsp;674&nbsp;</span><a name="line_674"></a></li>
<li id="line_675" class="odd"><span class="lineNumber">&nbsp;&nbsp;675&nbsp;</span>//&nbsp;Copies&nbsp;over&nbsp;certain&nbsp;methods&nbsp;with&nbsp;the&nbsp;same&nbsp;names&nbsp;as&nbsp;Object.prototype&nbsp;methods.&nbsp;Overcomes&nbsp;an&nbsp;IE&lt;=8&nbsp;bug:<a name="line_675"></a></li>
<li id="line_676" class="even"><span class="lineNumber">&nbsp;&nbsp;676&nbsp;</span>//&nbsp;https://developer.mozilla.org/en-US/docs/ECMAScript_DontEnum_attribute#JScript_DontEnum_Bug<a name="line_676"></a></li>
<li id="line_677" class="odd"><span class="lineNumber">&nbsp;&nbsp;677&nbsp;</span>function&nbsp;copyNativeMethods(src,&nbsp;dest)&nbsp;{<a name="line_677"></a></li>
<li id="line_678" class="even"><span class="lineNumber">&nbsp;&nbsp;678&nbsp;</span>	var&nbsp;names&nbsp;=&nbsp;[&nbsp;'constructor',&nbsp;'toString',&nbsp;'valueOf'&nbsp;];<a name="line_678"></a></li>
<li id="line_679" class="odd"><span class="lineNumber">&nbsp;&nbsp;679&nbsp;</span>	var&nbsp;i,&nbsp;name;<a name="line_679"></a></li>
<li id="line_680" class="even"><span class="lineNumber">&nbsp;&nbsp;680&nbsp;</span><a name="line_680"></a></li>
<li id="line_681" class="odd"><span class="lineNumber">&nbsp;&nbsp;681&nbsp;</span>	for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;names.length;&nbsp;i++)&nbsp;{<a name="line_681"></a></li>
<li id="line_682" class="even"><span class="lineNumber">&nbsp;&nbsp;682&nbsp;</span>		name&nbsp;=&nbsp;names[i];<a name="line_682"></a></li>
<li id="line_683" class="odd"><span class="lineNumber">&nbsp;&nbsp;683&nbsp;</span><a name="line_683"></a></li>
<li id="line_684" class="even"><span class="lineNumber">&nbsp;&nbsp;684&nbsp;</span>		if&nbsp;(src[name]&nbsp;!==&nbsp;Object.prototype[name])&nbsp;{<a name="line_684"></a></li>
<li id="line_685" class="odd"><span class="lineNumber">&nbsp;&nbsp;685&nbsp;</span>			dest[name]&nbsp;=&nbsp;src[name];<a name="line_685"></a></li>
<li id="line_686" class="even"><span class="lineNumber">&nbsp;&nbsp;686&nbsp;</span>		}<a name="line_686"></a></li>
<li id="line_687" class="odd"><span class="lineNumber">&nbsp;&nbsp;687&nbsp;</span>	}<a name="line_687"></a></li>
<li id="line_688" class="even"><span class="lineNumber">&nbsp;&nbsp;688&nbsp;</span>}<a name="line_688"></a></li>
<li id="line_689" class="odd"><span class="lineNumber">&nbsp;&nbsp;689&nbsp;</span><a name="line_689"></a></li>
<li id="line_690" class="even"><span class="lineNumber">&nbsp;&nbsp;690&nbsp;</span><a name="line_690"></a></li>
<li id="line_691" class="odd"><span class="lineNumber">&nbsp;&nbsp;691&nbsp;</span>function&nbsp;hasOwnProp(obj,&nbsp;name)&nbsp;{<a name="line_691"></a></li>
<li id="line_692" class="even"><span class="lineNumber">&nbsp;&nbsp;692&nbsp;</span>	return&nbsp;hasOwnPropMethod.call(obj,&nbsp;name);<a name="line_692"></a></li>
<li id="line_693" class="odd"><span class="lineNumber">&nbsp;&nbsp;693&nbsp;</span>}<a name="line_693"></a></li>
<li id="line_694" class="even"><span class="lineNumber">&nbsp;&nbsp;694&nbsp;</span><a name="line_694"></a></li>
<li id="line_695" class="odd"><span class="lineNumber">&nbsp;&nbsp;695&nbsp;</span><a name="line_695"></a></li>
<li id="line_696" class="even"><span class="lineNumber">&nbsp;&nbsp;696&nbsp;</span>//&nbsp;Is&nbsp;the&nbsp;given&nbsp;value&nbsp;a&nbsp;non-object&nbsp;non-function&nbsp;value?<a name="line_696"></a></li>
<li id="line_697" class="odd"><span class="lineNumber">&nbsp;&nbsp;697&nbsp;</span>function&nbsp;isAtomic(val)&nbsp;{<a name="line_697"></a></li>
<li id="line_698" class="even"><span class="lineNumber">&nbsp;&nbsp;698&nbsp;</span>	return&nbsp;/undefined|null|boolean|number|string/.test($.type(val));<a name="line_698"></a></li>
<li id="line_699" class="odd"><span class="lineNumber">&nbsp;&nbsp;699&nbsp;</span>}<a name="line_699"></a></li>
<li id="line_700" class="even"><span class="lineNumber">&nbsp;&nbsp;700&nbsp;</span><a name="line_700"></a></li>
<li id="line_701" class="odd"><span class="lineNumber">&nbsp;&nbsp;701&nbsp;</span><a name="line_701"></a></li>
<li id="line_702" class="even"><span class="lineNumber">&nbsp;&nbsp;702&nbsp;</span>function&nbsp;applyAll(functions,&nbsp;thisObj,&nbsp;args)&nbsp;{<a name="line_702"></a></li>
<li id="line_703" class="odd"><span class="lineNumber">&nbsp;&nbsp;703&nbsp;</span>	if&nbsp;($.isFunction(functions))&nbsp;{<a name="line_703"></a></li>
<li id="line_704" class="even"><span class="lineNumber">&nbsp;&nbsp;704&nbsp;</span>		functions&nbsp;=&nbsp;[&nbsp;functions&nbsp;];<a name="line_704"></a></li>
<li id="line_705" class="odd"><span class="lineNumber">&nbsp;&nbsp;705&nbsp;</span>	}<a name="line_705"></a></li>
<li id="line_706" class="even"><span class="lineNumber">&nbsp;&nbsp;706&nbsp;</span>	if&nbsp;(functions)&nbsp;{<a name="line_706"></a></li>
<li id="line_707" class="odd"><span class="lineNumber">&nbsp;&nbsp;707&nbsp;</span>		var&nbsp;i;<a name="line_707"></a></li>
<li id="line_708" class="even"><span class="lineNumber">&nbsp;&nbsp;708&nbsp;</span>		var&nbsp;ret;<a name="line_708"></a></li>
<li id="line_709" class="odd"><span class="lineNumber">&nbsp;&nbsp;709&nbsp;</span>		for&nbsp;(i=0;&nbsp;i&lt;functions.length;&nbsp;i++)&nbsp;{<a name="line_709"></a></li>
<li id="line_710" class="even"><span class="lineNumber">&nbsp;&nbsp;710&nbsp;</span>			ret&nbsp;=&nbsp;functions[i].apply(thisObj,&nbsp;args)&nbsp;||&nbsp;ret;<a name="line_710"></a></li>
<li id="line_711" class="odd"><span class="lineNumber">&nbsp;&nbsp;711&nbsp;</span>		}<a name="line_711"></a></li>
<li id="line_712" class="even"><span class="lineNumber">&nbsp;&nbsp;712&nbsp;</span>		return&nbsp;ret;<a name="line_712"></a></li>
<li id="line_713" class="odd"><span class="lineNumber">&nbsp;&nbsp;713&nbsp;</span>	}<a name="line_713"></a></li>
<li id="line_714" class="even"><span class="lineNumber">&nbsp;&nbsp;714&nbsp;</span>}<a name="line_714"></a></li>
<li id="line_715" class="odd"><span class="lineNumber">&nbsp;&nbsp;715&nbsp;</span><a name="line_715"></a></li>
<li id="line_716" class="even"><span class="lineNumber">&nbsp;&nbsp;716&nbsp;</span><a name="line_716"></a></li>
<li id="line_717" class="odd"><span class="lineNumber">&nbsp;&nbsp;717&nbsp;</span>function&nbsp;firstDefined()&nbsp;{<a name="line_717"></a></li>
<li id="line_718" class="even"><span class="lineNumber">&nbsp;&nbsp;718&nbsp;</span>	for&nbsp;(var&nbsp;i=0;&nbsp;i&lt;arguments.length;&nbsp;i++)&nbsp;{<a name="line_718"></a></li>
<li id="line_719" class="odd"><span class="lineNumber">&nbsp;&nbsp;719&nbsp;</span>		if&nbsp;(arguments[i]&nbsp;!==&nbsp;undefined)&nbsp;{<a name="line_719"></a></li>
<li id="line_720" class="even"><span class="lineNumber">&nbsp;&nbsp;720&nbsp;</span>			return&nbsp;arguments[i];<a name="line_720"></a></li>
<li id="line_721" class="odd"><span class="lineNumber">&nbsp;&nbsp;721&nbsp;</span>		}<a name="line_721"></a></li>
<li id="line_722" class="even"><span class="lineNumber">&nbsp;&nbsp;722&nbsp;</span>	}<a name="line_722"></a></li>
<li id="line_723" class="odd"><span class="lineNumber">&nbsp;&nbsp;723&nbsp;</span>}<a name="line_723"></a></li>
<li id="line_724" class="even"><span class="lineNumber">&nbsp;&nbsp;724&nbsp;</span><a name="line_724"></a></li>
<li id="line_725" class="odd"><span class="lineNumber">&nbsp;&nbsp;725&nbsp;</span><a name="line_725"></a></li>
<li id="line_726" class="even"><span class="lineNumber">&nbsp;&nbsp;726&nbsp;</span>function&nbsp;htmlEscape(s)&nbsp;{<a name="line_726"></a></li>
<li id="line_727" class="odd"><span class="lineNumber">&nbsp;&nbsp;727&nbsp;</span>	return&nbsp;(s&nbsp;+&nbsp;'').replace(/&amp;/g,&nbsp;'&amp;amp;')<a name="line_727"></a></li>
<li id="line_728" class="even"><span class="lineNumber">&nbsp;&nbsp;728&nbsp;</span>		.replace(/&lt;/g,&nbsp;'&amp;lt;')<a name="line_728"></a></li>
<li id="line_729" class="odd"><span class="lineNumber">&nbsp;&nbsp;729&nbsp;</span>		.replace(/&gt;/g,&nbsp;'&amp;gt;')<a name="line_729"></a></li>
<li id="line_730" class="even"><span class="lineNumber">&nbsp;&nbsp;730&nbsp;</span>		.replace(/'/g,&nbsp;'&amp;#039;')<a name="line_730"></a></li>
<li id="line_731" class="odd"><span class="lineNumber">&nbsp;&nbsp;731&nbsp;</span>		.replace(/"/g,&nbsp;'&amp;quot;')<a name="line_731"></a></li>
<li id="line_732" class="even"><span class="lineNumber">&nbsp;&nbsp;732&nbsp;</span>		.replace(/\n/g,&nbsp;'&lt;br&nbsp;/&gt;');<a name="line_732"></a></li>
<li id="line_733" class="odd"><span class="lineNumber">&nbsp;&nbsp;733&nbsp;</span>}<a name="line_733"></a></li>
<li id="line_734" class="even"><span class="lineNumber">&nbsp;&nbsp;734&nbsp;</span><a name="line_734"></a></li>
<li id="line_735" class="odd"><span class="lineNumber">&nbsp;&nbsp;735&nbsp;</span><a name="line_735"></a></li>
<li id="line_736" class="even"><span class="lineNumber">&nbsp;&nbsp;736&nbsp;</span>function&nbsp;stripHtmlEntities(text)&nbsp;{<a name="line_736"></a></li>
<li id="line_737" class="odd"><span class="lineNumber">&nbsp;&nbsp;737&nbsp;</span>	return&nbsp;text.replace(/&amp;.*?;/g,&nbsp;'');<a name="line_737"></a></li>
<li id="line_738" class="even"><span class="lineNumber">&nbsp;&nbsp;738&nbsp;</span>}<a name="line_738"></a></li>
<li id="line_739" class="odd"><span class="lineNumber">&nbsp;&nbsp;739&nbsp;</span><a name="line_739"></a></li>
<li id="line_740" class="even"><span class="lineNumber">&nbsp;&nbsp;740&nbsp;</span><a name="line_740"></a></li>
<li id="line_741" class="odd"><span class="lineNumber">&nbsp;&nbsp;741&nbsp;</span>//&nbsp;Given&nbsp;a&nbsp;hash&nbsp;of&nbsp;CSS&nbsp;properties,&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;CSS.<a name="line_741"></a></li>
<li id="line_742" class="even"><span class="lineNumber">&nbsp;&nbsp;742&nbsp;</span>//&nbsp;Uses&nbsp;property&nbsp;names&nbsp;as-is&nbsp;(no&nbsp;camel-case&nbsp;conversion).&nbsp;Will&nbsp;not&nbsp;make&nbsp;statements&nbsp;for&nbsp;null/undefined&nbsp;values.<a name="line_742"></a></li>
<li id="line_743" class="odd"><span class="lineNumber">&nbsp;&nbsp;743&nbsp;</span>function&nbsp;cssToStr(cssProps)&nbsp;{<a name="line_743"></a></li>
<li id="line_744" class="even"><span class="lineNumber">&nbsp;&nbsp;744&nbsp;</span>	var&nbsp;statements&nbsp;=&nbsp;[];<a name="line_744"></a></li>
<li id="line_745" class="odd"><span class="lineNumber">&nbsp;&nbsp;745&nbsp;</span><a name="line_745"></a></li>
<li id="line_746" class="even"><span class="lineNumber">&nbsp;&nbsp;746&nbsp;</span>	$.each(cssProps,&nbsp;function(name,&nbsp;val)&nbsp;{<a name="line_746"></a></li>
<li id="line_747" class="odd"><span class="lineNumber">&nbsp;&nbsp;747&nbsp;</span>		if&nbsp;(val&nbsp;!=&nbsp;null)&nbsp;{<a name="line_747"></a></li>
<li id="line_748" class="even"><span class="lineNumber">&nbsp;&nbsp;748&nbsp;</span>			statements.push(name&nbsp;+&nbsp;':'&nbsp;+&nbsp;val);<a name="line_748"></a></li>
<li id="line_749" class="odd"><span class="lineNumber">&nbsp;&nbsp;749&nbsp;</span>		}<a name="line_749"></a></li>
<li id="line_750" class="even"><span class="lineNumber">&nbsp;&nbsp;750&nbsp;</span>	});<a name="line_750"></a></li>
<li id="line_751" class="odd"><span class="lineNumber">&nbsp;&nbsp;751&nbsp;</span><a name="line_751"></a></li>
<li id="line_752" class="even"><span class="lineNumber">&nbsp;&nbsp;752&nbsp;</span>	return&nbsp;statements.join(';');<a name="line_752"></a></li>
<li id="line_753" class="odd"><span class="lineNumber">&nbsp;&nbsp;753&nbsp;</span>}<a name="line_753"></a></li>
<li id="line_754" class="even"><span class="lineNumber">&nbsp;&nbsp;754&nbsp;</span><a name="line_754"></a></li>
<li id="line_755" class="odd"><span class="lineNumber">&nbsp;&nbsp;755&nbsp;</span><a name="line_755"></a></li>
<li id="line_756" class="even"><span class="lineNumber">&nbsp;&nbsp;756&nbsp;</span>function&nbsp;capitaliseFirstLetter(str)&nbsp;{<a name="line_756"></a></li>
<li id="line_757" class="odd"><span class="lineNumber">&nbsp;&nbsp;757&nbsp;</span>	return&nbsp;str.charAt(0).toUpperCase()&nbsp;+&nbsp;str.slice(1);<a name="line_757"></a></li>
<li id="line_758" class="even"><span class="lineNumber">&nbsp;&nbsp;758&nbsp;</span>}<a name="line_758"></a></li>
<li id="line_759" class="odd"><span class="lineNumber">&nbsp;&nbsp;759&nbsp;</span><a name="line_759"></a></li>
<li id="line_760" class="even"><span class="lineNumber">&nbsp;&nbsp;760&nbsp;</span><a name="line_760"></a></li>
<li id="line_761" class="odd"><span class="lineNumber">&nbsp;&nbsp;761&nbsp;</span>function&nbsp;compareNumbers(a,&nbsp;b)&nbsp;{&nbsp;//&nbsp;for&nbsp;.sort()<a name="line_761"></a></li>
<li id="line_762" class="even"><span class="lineNumber">&nbsp;&nbsp;762&nbsp;</span>	return&nbsp;a&nbsp;-&nbsp;b;<a name="line_762"></a></li>
<li id="line_763" class="odd"><span class="lineNumber">&nbsp;&nbsp;763&nbsp;</span>}<a name="line_763"></a></li>
<li id="line_764" class="even"><span class="lineNumber">&nbsp;&nbsp;764&nbsp;</span><a name="line_764"></a></li>
<li id="line_765" class="odd"><span class="lineNumber">&nbsp;&nbsp;765&nbsp;</span><a name="line_765"></a></li>
<li id="line_766" class="even"><span class="lineNumber">&nbsp;&nbsp;766&nbsp;</span>function&nbsp;isInt(n)&nbsp;{<a name="line_766"></a></li>
<li id="line_767" class="odd"><span class="lineNumber">&nbsp;&nbsp;767&nbsp;</span>	return&nbsp;n&nbsp;%&nbsp;1&nbsp;===&nbsp;0;<a name="line_767"></a></li>
<li id="line_768" class="even"><span class="lineNumber">&nbsp;&nbsp;768&nbsp;</span>}<a name="line_768"></a></li>
<li id="line_769" class="odd"><span class="lineNumber">&nbsp;&nbsp;769&nbsp;</span><a name="line_769"></a></li>
<li id="line_770" class="even"><span class="lineNumber">&nbsp;&nbsp;770&nbsp;</span><a name="line_770"></a></li>
<li id="line_771" class="odd"><span class="lineNumber">&nbsp;&nbsp;771&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;method&nbsp;bound&nbsp;to&nbsp;the&nbsp;given&nbsp;object&nbsp;context.<a name="line_771"></a></li>
<li id="line_772" class="even"><span class="lineNumber">&nbsp;&nbsp;772&nbsp;</span>//&nbsp;Just&nbsp;like&nbsp;one&nbsp;of&nbsp;the&nbsp;jQuery.proxy&nbsp;signatures,&nbsp;but&nbsp;without&nbsp;the&nbsp;undesired&nbsp;behavior&nbsp;of&nbsp;treating&nbsp;the&nbsp;same&nbsp;method&nbsp;with<a name="line_772"></a></li>
<li id="line_773" class="odd"><span class="lineNumber">&nbsp;&nbsp;773&nbsp;</span>//&nbsp;different&nbsp;contexts&nbsp;as&nbsp;identical&nbsp;when&nbsp;binding/unbinding&nbsp;events.<a name="line_773"></a></li>
<li id="line_774" class="even"><span class="lineNumber">&nbsp;&nbsp;774&nbsp;</span>function&nbsp;proxy(obj,&nbsp;methodName)&nbsp;{<a name="line_774"></a></li>
<li id="line_775" class="odd"><span class="lineNumber">&nbsp;&nbsp;775&nbsp;</span>	var&nbsp;method&nbsp;=&nbsp;obj[methodName];<a name="line_775"></a></li>
<li id="line_776" class="even"><span class="lineNumber">&nbsp;&nbsp;776&nbsp;</span><a name="line_776"></a></li>
<li id="line_777" class="odd"><span class="lineNumber">&nbsp;&nbsp;777&nbsp;</span>	return&nbsp;function()&nbsp;{<a name="line_777"></a></li>
<li id="line_778" class="even"><span class="lineNumber">&nbsp;&nbsp;778&nbsp;</span>		return&nbsp;method.apply(obj,&nbsp;arguments);<a name="line_778"></a></li>
<li id="line_779" class="odd"><span class="lineNumber">&nbsp;&nbsp;779&nbsp;</span>	};<a name="line_779"></a></li>
<li id="line_780" class="even"><span class="lineNumber">&nbsp;&nbsp;780&nbsp;</span>}<a name="line_780"></a></li>
<li id="line_781" class="odd"><span class="lineNumber">&nbsp;&nbsp;781&nbsp;</span><a name="line_781"></a></li>
<li id="line_782" class="even"><span class="lineNumber">&nbsp;&nbsp;782&nbsp;</span><a name="line_782"></a></li>
<li id="line_783" class="odd"><span class="lineNumber">&nbsp;&nbsp;783&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;function,&nbsp;that,&nbsp;as&nbsp;long&nbsp;as&nbsp;it&nbsp;continues&nbsp;to&nbsp;be&nbsp;invoked,&nbsp;will&nbsp;not<a name="line_783"></a></li>
<li id="line_784" class="even"><span class="lineNumber">&nbsp;&nbsp;784&nbsp;</span>//&nbsp;be&nbsp;triggered.&nbsp;The&nbsp;function&nbsp;will&nbsp;be&nbsp;called&nbsp;after&nbsp;it&nbsp;stops&nbsp;being&nbsp;called&nbsp;for<a name="line_784"></a></li>
<li id="line_785" class="odd"><span class="lineNumber">&nbsp;&nbsp;785&nbsp;</span>//&nbsp;N&nbsp;milliseconds.<a name="line_785"></a></li>
<li id="line_786" class="even"><span class="lineNumber">&nbsp;&nbsp;786&nbsp;</span>//&nbsp;https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L714<a name="line_786"></a></li>
<li id="line_787" class="odd"><span class="lineNumber">&nbsp;&nbsp;787&nbsp;</span>function&nbsp;debounce(func,&nbsp;wait)&nbsp;{<a name="line_787"></a></li>
<li id="line_788" class="even"><span class="lineNumber">&nbsp;&nbsp;788&nbsp;</span>	var&nbsp;timeoutId;<a name="line_788"></a></li>
<li id="line_789" class="odd"><span class="lineNumber">&nbsp;&nbsp;789&nbsp;</span>	var&nbsp;args;<a name="line_789"></a></li>
<li id="line_790" class="even"><span class="lineNumber">&nbsp;&nbsp;790&nbsp;</span>	var&nbsp;context;<a name="line_790"></a></li>
<li id="line_791" class="odd"><span class="lineNumber">&nbsp;&nbsp;791&nbsp;</span>	var&nbsp;timestamp;&nbsp;//&nbsp;of&nbsp;most&nbsp;recent&nbsp;call<a name="line_791"></a></li>
<li id="line_792" class="even"><span class="lineNumber">&nbsp;&nbsp;792&nbsp;</span>	var&nbsp;later&nbsp;=&nbsp;function()&nbsp;{<a name="line_792"></a></li>
<li id="line_793" class="odd"><span class="lineNumber">&nbsp;&nbsp;793&nbsp;</span>		var&nbsp;last&nbsp;=&nbsp;+new&nbsp;Date()&nbsp;-&nbsp;timestamp;<a name="line_793"></a></li>
<li id="line_794" class="even"><span class="lineNumber">&nbsp;&nbsp;794&nbsp;</span>		if&nbsp;(last&nbsp;&lt;&nbsp;wait&nbsp;&amp;&amp;&nbsp;last&nbsp;&gt;&nbsp;0)&nbsp;{<a name="line_794"></a></li>
<li id="line_795" class="odd"><span class="lineNumber">&nbsp;&nbsp;795&nbsp;</span>			timeoutId&nbsp;=&nbsp;setTimeout(later,&nbsp;wait&nbsp;-&nbsp;last);<a name="line_795"></a></li>
<li id="line_796" class="even"><span class="lineNumber">&nbsp;&nbsp;796&nbsp;</span>		}<a name="line_796"></a></li>
<li id="line_797" class="odd"><span class="lineNumber">&nbsp;&nbsp;797&nbsp;</span>		else&nbsp;{<a name="line_797"></a></li>
<li id="line_798" class="even"><span class="lineNumber">&nbsp;&nbsp;798&nbsp;</span>			timeoutId&nbsp;=&nbsp;null;<a name="line_798"></a></li>
<li id="line_799" class="odd"><span class="lineNumber">&nbsp;&nbsp;799&nbsp;</span>			func.apply(context,&nbsp;args);<a name="line_799"></a></li>
<li id="line_800" class="even"><span class="lineNumber">&nbsp;&nbsp;800&nbsp;</span>			if&nbsp;(!timeoutId)&nbsp;{<a name="line_800"></a></li>
<li id="line_801" class="odd"><span class="lineNumber">&nbsp;&nbsp;801&nbsp;</span>				context&nbsp;=&nbsp;args&nbsp;=&nbsp;null;<a name="line_801"></a></li>
<li id="line_802" class="even"><span class="lineNumber">&nbsp;&nbsp;802&nbsp;</span>			}<a name="line_802"></a></li>
<li id="line_803" class="odd"><span class="lineNumber">&nbsp;&nbsp;803&nbsp;</span>		}<a name="line_803"></a></li>
<li id="line_804" class="even"><span class="lineNumber">&nbsp;&nbsp;804&nbsp;</span>	};<a name="line_804"></a></li>
<li id="line_805" class="odd"><span class="lineNumber">&nbsp;&nbsp;805&nbsp;</span><a name="line_805"></a></li>
<li id="line_806" class="even"><span class="lineNumber">&nbsp;&nbsp;806&nbsp;</span>	return&nbsp;function()&nbsp;{<a name="line_806"></a></li>
<li id="line_807" class="odd"><span class="lineNumber">&nbsp;&nbsp;807&nbsp;</span>		context&nbsp;=&nbsp;this;<a name="line_807"></a></li>
<li id="line_808" class="even"><span class="lineNumber">&nbsp;&nbsp;808&nbsp;</span>		args&nbsp;=&nbsp;arguments;<a name="line_808"></a></li>
<li id="line_809" class="odd"><span class="lineNumber">&nbsp;&nbsp;809&nbsp;</span>		timestamp&nbsp;=&nbsp;+new&nbsp;Date();<a name="line_809"></a></li>
<li id="line_810" class="even"><span class="lineNumber">&nbsp;&nbsp;810&nbsp;</span>		if&nbsp;(!timeoutId)&nbsp;{<a name="line_810"></a></li>
<li id="line_811" class="odd"><span class="lineNumber">&nbsp;&nbsp;811&nbsp;</span>			timeoutId&nbsp;=&nbsp;setTimeout(later,&nbsp;wait);<a name="line_811"></a></li>
<li id="line_812" class="even"><span class="lineNumber">&nbsp;&nbsp;812&nbsp;</span>		}<a name="line_812"></a></li>
<li id="line_813" class="odd"><span class="lineNumber">&nbsp;&nbsp;813&nbsp;</span>	};<a name="line_813"></a></li>
<li id="line_814" class="even"><span class="lineNumber">&nbsp;&nbsp;814&nbsp;</span>}<a name="line_814"></a></li>
<li id="line_815" class="odd"><span class="lineNumber">&nbsp;&nbsp;815&nbsp;</span><a name="line_815"></a></li>
<li id="line_816" class="even"><span class="lineNumber">&nbsp;&nbsp;816&nbsp;</span>;;<a name="line_816"></a></li>
<li id="line_817" class="odd"><span class="lineNumber">&nbsp;&nbsp;817&nbsp;</span><a name="line_817"></a></li>
<li id="line_818" class="even"><span class="lineNumber">&nbsp;&nbsp;818&nbsp;</span>var&nbsp;ambigDateOfMonthRegex&nbsp;=&nbsp;/^\s*\d{4}-\d\d$/;<a name="line_818"></a></li>
<li id="line_819" class="odd"><span class="lineNumber">&nbsp;&nbsp;819&nbsp;</span>var&nbsp;ambigTimeOrZoneRegex&nbsp;=<a name="line_819"></a></li>
<li id="line_820" class="even"><span class="lineNumber">&nbsp;&nbsp;820&nbsp;</span>	/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T|&nbsp;)(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;<a name="line_820"></a></li>
<li id="line_821" class="odd"><span class="lineNumber">&nbsp;&nbsp;821&nbsp;</span>var&nbsp;newMomentProto&nbsp;=&nbsp;moment.fn;&nbsp;//&nbsp;where&nbsp;we&nbsp;will&nbsp;attach&nbsp;our&nbsp;new&nbsp;methods<a name="line_821"></a></li>
<li id="line_822" class="even"><span class="lineNumber">&nbsp;&nbsp;822&nbsp;</span>var&nbsp;oldMomentProto&nbsp;=&nbsp;$.extend({},&nbsp;newMomentProto);&nbsp;//&nbsp;copy&nbsp;of&nbsp;original&nbsp;moment&nbsp;methods<a name="line_822"></a></li>
<li id="line_823" class="odd"><span class="lineNumber">&nbsp;&nbsp;823&nbsp;</span>var&nbsp;allowValueOptimization;<a name="line_823"></a></li>
<li id="line_824" class="even"><span class="lineNumber">&nbsp;&nbsp;824&nbsp;</span>var&nbsp;setUTCValues;&nbsp;//&nbsp;function&nbsp;defined&nbsp;below<a name="line_824"></a></li>
<li id="line_825" class="odd"><span class="lineNumber">&nbsp;&nbsp;825&nbsp;</span>var&nbsp;setLocalValues;&nbsp;//&nbsp;function&nbsp;defined&nbsp;below<a name="line_825"></a></li>
<li id="line_826" class="even"><span class="lineNumber">&nbsp;&nbsp;826&nbsp;</span><a name="line_826"></a></li>
<li id="line_827" class="odd"><span class="lineNumber">&nbsp;&nbsp;827&nbsp;</span><a name="line_827"></a></li>
<li id="line_828" class="even"><span class="lineNumber">&nbsp;&nbsp;828&nbsp;</span>//&nbsp;Creating<a name="line_828"></a></li>
<li id="line_829" class="odd"><span class="lineNumber">&nbsp;&nbsp;829&nbsp;</span>//&nbsp;-------------------------------------------------------------------------------------------------<a name="line_829"></a></li>
<li id="line_830" class="even"><span class="lineNumber">&nbsp;&nbsp;830&nbsp;</span><a name="line_830"></a></li>
<li id="line_831" class="odd"><span class="lineNumber">&nbsp;&nbsp;831&nbsp;</span>//&nbsp;Creates&nbsp;a&nbsp;new&nbsp;moment,&nbsp;similar&nbsp;to&nbsp;the&nbsp;vanilla&nbsp;moment(...)&nbsp;constructor,&nbsp;but&nbsp;with<a name="line_831"></a></li>
<li id="line_832" class="even"><span class="lineNumber">&nbsp;&nbsp;832&nbsp;</span>//&nbsp;extra&nbsp;features&nbsp;(ambiguous&nbsp;time,&nbsp;enhanced&nbsp;formatting).&nbsp;When&nbsp;given&nbsp;an&nbsp;existing&nbsp;moment,<a name="line_832"></a></li>
<li id="line_833" class="odd"><span class="lineNumber">&nbsp;&nbsp;833&nbsp;</span>//&nbsp;it&nbsp;will&nbsp;function&nbsp;as&nbsp;a&nbsp;clone&nbsp;(and&nbsp;retain&nbsp;the&nbsp;zone&nbsp;of&nbsp;the&nbsp;moment).&nbsp;Anything&nbsp;else&nbsp;will<a name="line_833"></a></li>
<li id="line_834" class="even"><span class="lineNumber">&nbsp;&nbsp;834&nbsp;</span>//&nbsp;result&nbsp;in&nbsp;a&nbsp;moment&nbsp;in&nbsp;the&nbsp;local&nbsp;zone.<a name="line_834"></a></li>
<li id="line_835" class="odd"><span class="lineNumber">&nbsp;&nbsp;835&nbsp;</span>fc.moment&nbsp;=&nbsp;function()&nbsp;{<a name="line_835"></a></li>
<li id="line_836" class="even"><span class="lineNumber">&nbsp;&nbsp;836&nbsp;</span>	return&nbsp;makeMoment(arguments);<a name="line_836"></a></li>
<li id="line_837" class="odd"><span class="lineNumber">&nbsp;&nbsp;837&nbsp;</span>};<a name="line_837"></a></li>
<li id="line_838" class="even"><span class="lineNumber">&nbsp;&nbsp;838&nbsp;</span><a name="line_838"></a></li>
<li id="line_839" class="odd"><span class="lineNumber">&nbsp;&nbsp;839&nbsp;</span>//&nbsp;Sames&nbsp;as&nbsp;fc.moment,&nbsp;but&nbsp;forces&nbsp;the&nbsp;resulting&nbsp;moment&nbsp;to&nbsp;be&nbsp;in&nbsp;the&nbsp;UTC&nbsp;timezone.<a name="line_839"></a></li>
<li id="line_840" class="even"><span class="lineNumber">&nbsp;&nbsp;840&nbsp;</span>fc.moment.utc&nbsp;=&nbsp;function()&nbsp;{<a name="line_840"></a></li>
<li id="line_841" class="odd"><span class="lineNumber">&nbsp;&nbsp;841&nbsp;</span>	var&nbsp;mom&nbsp;=&nbsp;makeMoment(arguments,&nbsp;true);<a name="line_841"></a></li>
<li id="line_842" class="even"><span class="lineNumber">&nbsp;&nbsp;842&nbsp;</span><a name="line_842"></a></li>
<li id="line_843" class="odd"><span class="lineNumber">&nbsp;&nbsp;843&nbsp;</span>	//&nbsp;Force&nbsp;it&nbsp;into&nbsp;UTC&nbsp;because&nbsp;makeMoment&nbsp;doesn't&nbsp;guarantee&nbsp;it<a name="line_843"></a></li>
<li id="line_844" class="even"><span class="lineNumber">&nbsp;&nbsp;844&nbsp;</span>	//&nbsp;(if&nbsp;given&nbsp;a&nbsp;pre-existing&nbsp;moment&nbsp;for&nbsp;example)<a name="line_844"></a></li>
<li id="line_845" class="odd"><span class="lineNumber">&nbsp;&nbsp;845&nbsp;</span>	if&nbsp;(mom.hasTime())&nbsp;{&nbsp;//&nbsp;don't&nbsp;give&nbsp;ambiguously-timed&nbsp;moments&nbsp;a&nbsp;UTC&nbsp;zone<a name="line_845"></a></li>
<li id="line_846" class="even"><span class="lineNumber">&nbsp;&nbsp;846&nbsp;</span>		mom.utc();<a name="line_846"></a></li>
<li id="line_847" class="odd"><span class="lineNumber">&nbsp;&nbsp;847&nbsp;</span>	}<a name="line_847"></a></li>
<li id="line_848" class="even"><span class="lineNumber">&nbsp;&nbsp;848&nbsp;</span><a name="line_848"></a></li>
<li id="line_849" class="odd"><span class="lineNumber">&nbsp;&nbsp;849&nbsp;</span>	return&nbsp;mom;<a name="line_849"></a></li>
<li id="line_850" class="even"><span class="lineNumber">&nbsp;&nbsp;850&nbsp;</span>};<a name="line_850"></a></li>
<li id="line_851" class="odd"><span class="lineNumber">&nbsp;&nbsp;851&nbsp;</span><a name="line_851"></a></li>
<li id="line_852" class="even"><span class="lineNumber">&nbsp;&nbsp;852&nbsp;</span>//&nbsp;Same&nbsp;as&nbsp;fc.moment,&nbsp;but&nbsp;when&nbsp;given&nbsp;an&nbsp;ISO8601&nbsp;string,&nbsp;the&nbsp;timezone&nbsp;offset&nbsp;is&nbsp;preserved.<a name="line_852"></a></li>
<li id="line_853" class="odd"><span class="lineNumber">&nbsp;&nbsp;853&nbsp;</span>//&nbsp;ISO8601&nbsp;strings&nbsp;with&nbsp;no&nbsp;timezone&nbsp;offset&nbsp;will&nbsp;become&nbsp;ambiguously&nbsp;zoned.<a name="line_853"></a></li>
<li id="line_854" class="even"><span class="lineNumber">&nbsp;&nbsp;854&nbsp;</span>fc.moment.parseZone&nbsp;=&nbsp;function()&nbsp;{<a name="line_854"></a></li>
<li id="line_855" class="odd"><span class="lineNumber">&nbsp;&nbsp;855&nbsp;</span>	return&nbsp;makeMoment(arguments,&nbsp;true,&nbsp;true);<a name="line_855"></a></li>
<li id="line_856" class="even"><span class="lineNumber">&nbsp;&nbsp;856&nbsp;</span>};<a name="line_856"></a></li>
<li id="line_857" class="odd"><span class="lineNumber">&nbsp;&nbsp;857&nbsp;</span><a name="line_857"></a></li>
<li id="line_858" class="even"><span class="lineNumber">&nbsp;&nbsp;858&nbsp;</span>//&nbsp;Builds&nbsp;an&nbsp;enhanced&nbsp;moment&nbsp;from&nbsp;args.&nbsp;When&nbsp;given&nbsp;an&nbsp;existing&nbsp;moment,&nbsp;it&nbsp;clones.&nbsp;When&nbsp;given&nbsp;a<a name="line_858"></a></li>
<li id="line_859" class="odd"><span class="lineNumber">&nbsp;&nbsp;859&nbsp;</span>//&nbsp;native&nbsp;Date,&nbsp;or&nbsp;called&nbsp;with&nbsp;no&nbsp;arguments&nbsp;(the&nbsp;current&nbsp;time),&nbsp;the&nbsp;resulting&nbsp;moment&nbsp;will&nbsp;be&nbsp;local.<a name="line_859"></a></li>
<li id="line_860" class="even"><span class="lineNumber">&nbsp;&nbsp;860&nbsp;</span>//&nbsp;Anything&nbsp;else&nbsp;needs&nbsp;to&nbsp;be&nbsp;"parsed"&nbsp;(a&nbsp;string&nbsp;or&nbsp;an&nbsp;array),&nbsp;and&nbsp;will&nbsp;be&nbsp;affected&nbsp;by:<a name="line_860"></a></li>
<li id="line_861" class="odd"><span class="lineNumber">&nbsp;&nbsp;861&nbsp;</span>//&nbsp;&nbsp;&nbsp;&nbsp;parseAsUTC&nbsp;-&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;zone&nbsp;information,&nbsp;should&nbsp;we&nbsp;parse&nbsp;the&nbsp;input&nbsp;in&nbsp;UTC?<a name="line_861"></a></li>
<li id="line_862" class="even"><span class="lineNumber">&nbsp;&nbsp;862&nbsp;</span>//&nbsp;&nbsp;&nbsp;&nbsp;parseZone&nbsp;-&nbsp;if&nbsp;there&nbsp;is&nbsp;zone&nbsp;information,&nbsp;should&nbsp;we&nbsp;force&nbsp;the&nbsp;zone&nbsp;of&nbsp;the&nbsp;moment?<a name="line_862"></a></li>
<li id="line_863" class="odd"><span class="lineNumber">&nbsp;&nbsp;863&nbsp;</span>function&nbsp;makeMoment(args,&nbsp;parseAsUTC,&nbsp;parseZone)&nbsp;{<a name="line_863"></a></li>
<li id="line_864" class="even"><span class="lineNumber">&nbsp;&nbsp;864&nbsp;</span>	var&nbsp;input&nbsp;=&nbsp;args[0];<a name="line_864"></a></li>
<li id="line_865" class="odd"><span class="lineNumber">&nbsp;&nbsp;865&nbsp;</span>	var&nbsp;isSingleString&nbsp;=&nbsp;args.length&nbsp;==&nbsp;1&nbsp;&amp;&amp;&nbsp;typeof&nbsp;input&nbsp;===&nbsp;'string';<a name="line_865"></a></li>
<li id="line_866" class="even"><span class="lineNumber">&nbsp;&nbsp;866&nbsp;</span>	var&nbsp;isAmbigTime;<a name="line_866"></a></li>
<li id="line_867" class="odd"><span class="lineNumber">&nbsp;&nbsp;867&nbsp;</span>	var&nbsp;isAmbigZone;<a name="line_867"></a></li>
<li id="line_868" class="even"><span class="lineNumber">&nbsp;&nbsp;868&nbsp;</span>	var&nbsp;ambigMatch;<a name="line_868"></a></li>
<li id="line_869" class="odd"><span class="lineNumber">&nbsp;&nbsp;869&nbsp;</span>	var&nbsp;mom;<a name="line_869"></a></li>
<li id="line_870" class="even"><span class="lineNumber">&nbsp;&nbsp;870&nbsp;</span><a name="line_870"></a></li>
<li id="line_871" class="odd"><span class="lineNumber">&nbsp;&nbsp;871&nbsp;</span>	if&nbsp;(moment.isMoment(input))&nbsp;{<a name="line_871"></a></li>
<li id="line_872" class="even"><span class="lineNumber">&nbsp;&nbsp;872&nbsp;</span>		mom&nbsp;=&nbsp;moment.apply(null,&nbsp;args);&nbsp;//&nbsp;clone&nbsp;it<a name="line_872"></a></li>
<li id="line_873" class="odd"><span class="lineNumber">&nbsp;&nbsp;873&nbsp;</span>		transferAmbigs(input,&nbsp;mom);&nbsp;//&nbsp;the&nbsp;ambig&nbsp;flags&nbsp;weren't&nbsp;transfered&nbsp;with&nbsp;the&nbsp;clone<a name="line_873"></a></li>
<li id="line_874" class="even"><span class="lineNumber">&nbsp;&nbsp;874&nbsp;</span>	}<a name="line_874"></a></li>
<li id="line_875" class="odd"><span class="lineNumber">&nbsp;&nbsp;875&nbsp;</span>	else&nbsp;if&nbsp;(isNativeDate(input)&nbsp;||&nbsp;input&nbsp;===&nbsp;undefined)&nbsp;{<a name="line_875"></a></li>
<li id="line_876" class="even"><span class="lineNumber">&nbsp;&nbsp;876&nbsp;</span>		mom&nbsp;=&nbsp;moment.apply(null,&nbsp;args);&nbsp;//&nbsp;will&nbsp;be&nbsp;local<a name="line_876"></a></li>
<li id="line_877" class="odd"><span class="lineNumber">&nbsp;&nbsp;877&nbsp;</span>	}<a name="line_877"></a></li>
<li id="line_878" class="even"><span class="lineNumber">&nbsp;&nbsp;878&nbsp;</span>	else&nbsp;{&nbsp;//&nbsp;"parsing"&nbsp;is&nbsp;required<a name="line_878"></a></li>
<li id="line_879" class="odd"><span class="lineNumber">&nbsp;&nbsp;879&nbsp;</span>		isAmbigTime&nbsp;=&nbsp;false;<a name="line_879"></a></li>
<li id="line_880" class="even"><span class="lineNumber">&nbsp;&nbsp;880&nbsp;</span>		isAmbigZone&nbsp;=&nbsp;false;<a name="line_880"></a></li>
<li id="line_881" class="odd"><span class="lineNumber">&nbsp;&nbsp;881&nbsp;</span><a name="line_881"></a></li>
<li id="line_882" class="even"><span class="lineNumber">&nbsp;&nbsp;882&nbsp;</span>		if&nbsp;(isSingleString)&nbsp;{<a name="line_882"></a></li>
<li id="line_883" class="odd"><span class="lineNumber">&nbsp;&nbsp;883&nbsp;</span>			if&nbsp;(ambigDateOfMonthRegex.test(input))&nbsp;{<a name="line_883"></a></li>
<li id="line_884" class="even"><span class="lineNumber">&nbsp;&nbsp;884&nbsp;</span>				//&nbsp;accept&nbsp;strings&nbsp;like&nbsp;'2014-05',&nbsp;but&nbsp;convert&nbsp;to&nbsp;the&nbsp;first&nbsp;of&nbsp;the&nbsp;month<a name="line_884"></a></li>
<li id="line_885" class="odd"><span class="lineNumber">&nbsp;&nbsp;885&nbsp;</span>				input&nbsp;+=&nbsp;'-01';<a name="line_885"></a></li>
<li id="line_886" class="even"><span class="lineNumber">&nbsp;&nbsp;886&nbsp;</span>				args&nbsp;=&nbsp;[&nbsp;input&nbsp;];&nbsp;//&nbsp;for&nbsp;when&nbsp;we&nbsp;pass&nbsp;it&nbsp;on&nbsp;to&nbsp;moment's&nbsp;constructor<a name="line_886"></a></li>
<li id="line_887" class="odd"><span class="lineNumber">&nbsp;&nbsp;887&nbsp;</span>				isAmbigTime&nbsp;=&nbsp;true;<a name="line_887"></a></li>
<li id="line_888" class="even"><span class="lineNumber">&nbsp;&nbsp;888&nbsp;</span>				isAmbigZone&nbsp;=&nbsp;true;<a name="line_888"></a></li>
<li id="line_889" class="odd"><span class="lineNumber">&nbsp;&nbsp;889&nbsp;</span>			}<a name="line_889"></a></li>
<li id="line_890" class="even"><span class="lineNumber">&nbsp;&nbsp;890&nbsp;</span>			else&nbsp;if&nbsp;((ambigMatch&nbsp;=&nbsp;ambigTimeOrZoneRegex.exec(input)))&nbsp;{<a name="line_890"></a></li>
<li id="line_891" class="odd"><span class="lineNumber">&nbsp;&nbsp;891&nbsp;</span>				isAmbigTime&nbsp;=&nbsp;!ambigMatch[5];&nbsp;//&nbsp;no&nbsp;time&nbsp;part?<a name="line_891"></a></li>
<li id="line_892" class="even"><span class="lineNumber">&nbsp;&nbsp;892&nbsp;</span>				isAmbigZone&nbsp;=&nbsp;true;<a name="line_892"></a></li>
<li id="line_893" class="odd"><span class="lineNumber">&nbsp;&nbsp;893&nbsp;</span>			}<a name="line_893"></a></li>
<li id="line_894" class="even"><span class="lineNumber">&nbsp;&nbsp;894&nbsp;</span>		}<a name="line_894"></a></li>
<li id="line_895" class="odd"><span class="lineNumber">&nbsp;&nbsp;895&nbsp;</span>		else&nbsp;if&nbsp;($.isArray(input))&nbsp;{<a name="line_895"></a></li>
<li id="line_896" class="even"><span class="lineNumber">&nbsp;&nbsp;896&nbsp;</span>			//&nbsp;arrays&nbsp;have&nbsp;no&nbsp;timezone&nbsp;information,&nbsp;so&nbsp;assume&nbsp;ambiguous&nbsp;zone<a name="line_896"></a></li>
<li id="line_897" class="odd"><span class="lineNumber">&nbsp;&nbsp;897&nbsp;</span>			isAmbigZone&nbsp;=&nbsp;true;<a name="line_897"></a></li>
<li id="line_898" class="even"><span class="lineNumber">&nbsp;&nbsp;898&nbsp;</span>		}<a name="line_898"></a></li>
<li id="line_899" class="odd"><span class="lineNumber">&nbsp;&nbsp;899&nbsp;</span>		//&nbsp;otherwise,&nbsp;probably&nbsp;a&nbsp;string&nbsp;with&nbsp;a&nbsp;format<a name="line_899"></a></li>
<li id="line_900" class="even"><span class="lineNumber">&nbsp;&nbsp;900&nbsp;</span><a name="line_900"></a></li>
<li id="line_901" class="odd"><span class="lineNumber">&nbsp;&nbsp;901&nbsp;</span>		if&nbsp;(parseAsUTC&nbsp;||&nbsp;isAmbigTime)&nbsp;{<a name="line_901"></a></li>
<li id="line_902" class="even"><span class="lineNumber">&nbsp;&nbsp;902&nbsp;</span>			mom&nbsp;=&nbsp;moment.utc.apply(moment,&nbsp;args);<a name="line_902"></a></li>
<li id="line_903" class="odd"><span class="lineNumber">&nbsp;&nbsp;903&nbsp;</span>		}<a name="line_903"></a></li>
<li id="line_904" class="even"><span class="lineNumber">&nbsp;&nbsp;904&nbsp;</span>		else&nbsp;{<a name="line_904"></a></li>
<li id="line_905" class="odd"><span class="lineNumber">&nbsp;&nbsp;905&nbsp;</span>			mom&nbsp;=&nbsp;moment.apply(null,&nbsp;args);<a name="line_905"></a></li>
<li id="line_906" class="even"><span class="lineNumber">&nbsp;&nbsp;906&nbsp;</span>		}<a name="line_906"></a></li>
<li id="line_907" class="odd"><span class="lineNumber">&nbsp;&nbsp;907&nbsp;</span><a name="line_907"></a></li>
<li id="line_908" class="even"><span class="lineNumber">&nbsp;&nbsp;908&nbsp;</span>		if&nbsp;(isAmbigTime)&nbsp;{<a name="line_908"></a></li>
<li id="line_909" class="odd"><span class="lineNumber">&nbsp;&nbsp;909&nbsp;</span>			mom._ambigTime&nbsp;=&nbsp;true;<a name="line_909"></a></li>
<li id="line_910" class="even"><span class="lineNumber">&nbsp;&nbsp;910&nbsp;</span>			mom._ambigZone&nbsp;=&nbsp;true;&nbsp;//&nbsp;ambiguous&nbsp;time&nbsp;always&nbsp;means&nbsp;ambiguous&nbsp;zone<a name="line_910"></a></li>
<li id="line_911" class="odd"><span class="lineNumber">&nbsp;&nbsp;911&nbsp;</span>		}<a name="line_911"></a></li>
<li id="line_912" class="even"><span class="lineNumber">&nbsp;&nbsp;912&nbsp;</span>		else&nbsp;if&nbsp;(parseZone)&nbsp;{&nbsp;//&nbsp;let's&nbsp;record&nbsp;the&nbsp;inputted&nbsp;zone&nbsp;somehow<a name="line_912"></a></li>
<li id="line_913" class="odd"><span class="lineNumber">&nbsp;&nbsp;913&nbsp;</span>			if&nbsp;(isAmbigZone)&nbsp;{<a name="line_913"></a></li>
<li id="line_914" class="even"><span class="lineNumber">&nbsp;&nbsp;914&nbsp;</span>				mom._ambigZone&nbsp;=&nbsp;true;<a name="line_914"></a></li>
<li id="line_915" class="odd"><span class="lineNumber">&nbsp;&nbsp;915&nbsp;</span>			}<a name="line_915"></a></li>
<li id="line_916" class="even"><span class="lineNumber">&nbsp;&nbsp;916&nbsp;</span>			else&nbsp;if&nbsp;(isSingleString)&nbsp;{<a name="line_916"></a></li>
<li id="line_917" class="odd"><span class="lineNumber">&nbsp;&nbsp;917&nbsp;</span>				if&nbsp;(mom.utcOffset)&nbsp;{<a name="line_917"></a></li>
<li id="line_918" class="even"><span class="lineNumber">&nbsp;&nbsp;918&nbsp;</span>					mom.utcOffset(input);&nbsp;//&nbsp;if&nbsp;not&nbsp;a&nbsp;valid&nbsp;zone,&nbsp;will&nbsp;assign&nbsp;UTC<a name="line_918"></a></li>
<li id="line_919" class="odd"><span class="lineNumber">&nbsp;&nbsp;919&nbsp;</span>				}<a name="line_919"></a></li>
<li id="line_920" class="even"><span class="lineNumber">&nbsp;&nbsp;920&nbsp;</span>				else&nbsp;{<a name="line_920"></a></li>
<li id="line_921" class="odd"><span class="lineNumber">&nbsp;&nbsp;921&nbsp;</span>					mom.zone(input);&nbsp;//&nbsp;for&nbsp;moment-pre-2.9<a name="line_921"></a></li>
<li id="line_922" class="even"><span class="lineNumber">&nbsp;&nbsp;922&nbsp;</span>				}<a name="line_922"></a></li>
<li id="line_923" class="odd"><span class="lineNumber">&nbsp;&nbsp;923&nbsp;</span>			}<a name="line_923"></a></li>
<li id="line_924" class="even"><span class="lineNumber">&nbsp;&nbsp;924&nbsp;</span>		}<a name="line_924"></a></li>
<li id="line_925" class="odd"><span class="lineNumber">&nbsp;&nbsp;925&nbsp;</span>	}<a name="line_925"></a></li>
<li id="line_926" class="even"><span class="lineNumber">&nbsp;&nbsp;926&nbsp;</span><a name="line_926"></a></li>
<li id="line_927" class="odd"><span class="lineNumber">&nbsp;&nbsp;927&nbsp;</span>	mom._fullCalendar&nbsp;=&nbsp;true;&nbsp;//&nbsp;flag&nbsp;for&nbsp;extended&nbsp;functionality<a name="line_927"></a></li>
<li id="line_928" class="even"><span class="lineNumber">&nbsp;&nbsp;928&nbsp;</span><a name="line_928"></a></li>
<li id="line_929" class="odd"><span class="lineNumber">&nbsp;&nbsp;929&nbsp;</span>	return&nbsp;mom;<a name="line_929"></a></li>
<li id="line_930" class="even"><span class="lineNumber">&nbsp;&nbsp;930&nbsp;</span>}<a name="line_930"></a></li>
<li id="line_931" class="odd"><span class="lineNumber">&nbsp;&nbsp;931&nbsp;</span><a name="line_931"></a></li>
<li id="line_932" class="even"><span class="lineNumber">&nbsp;&nbsp;932&nbsp;</span><a name="line_932"></a></li>
<li id="line_933" class="odd"><span class="lineNumber">&nbsp;&nbsp;933&nbsp;</span>//&nbsp;A&nbsp;clone&nbsp;method&nbsp;that&nbsp;works&nbsp;with&nbsp;the&nbsp;flags&nbsp;related&nbsp;to&nbsp;our&nbsp;enhanced&nbsp;functionality.<a name="line_933"></a></li>
<li id="line_934" class="even"><span class="lineNumber">&nbsp;&nbsp;934&nbsp;</span>//&nbsp;In&nbsp;the&nbsp;future,&nbsp;use&nbsp;moment.momentProperties<a name="line_934"></a></li>
<li id="line_935" class="odd"><span class="lineNumber">&nbsp;&nbsp;935&nbsp;</span>newMomentProto.clone&nbsp;=&nbsp;function()&nbsp;{<a name="line_935"></a></li>
<li id="line_936" class="even"><span class="lineNumber">&nbsp;&nbsp;936&nbsp;</span>	var&nbsp;mom&nbsp;=&nbsp;oldMomentProto.clone.apply(this,&nbsp;arguments);<a name="line_936"></a></li>
<li id="line_937" class="odd"><span class="lineNumber">&nbsp;&nbsp;937&nbsp;</span><a name="line_937"></a></li>
<li id="line_938" class="even"><span class="lineNumber">&nbsp;&nbsp;938&nbsp;</span>	//&nbsp;these&nbsp;flags&nbsp;weren't&nbsp;transfered&nbsp;with&nbsp;the&nbsp;clone<a name="line_938"></a></li>
<li id="line_939" class="odd"><span class="lineNumber">&nbsp;&nbsp;939&nbsp;</span>	transferAmbigs(this,&nbsp;mom);<a name="line_939"></a></li>
<li id="line_940" class="even"><span class="lineNumber">&nbsp;&nbsp;940&nbsp;</span>	if&nbsp;(this._fullCalendar)&nbsp;{<a name="line_940"></a></li>
<li id="line_941" class="odd"><span class="lineNumber">&nbsp;&nbsp;941&nbsp;</span>		mom._fullCalendar&nbsp;=&nbsp;true;<a name="line_941"></a></li>
<li id="line_942" class="even"><span class="lineNumber">&nbsp;&nbsp;942&nbsp;</span>	}<a name="line_942"></a></li>
<li id="line_943" class="odd"><span class="lineNumber">&nbsp;&nbsp;943&nbsp;</span><a name="line_943"></a></li>
<li id="line_944" class="even"><span class="lineNumber">&nbsp;&nbsp;944&nbsp;</span>	return&nbsp;mom;<a name="line_944"></a></li>
<li id="line_945" class="odd"><span class="lineNumber">&nbsp;&nbsp;945&nbsp;</span>};<a name="line_945"></a></li>
<li id="line_946" class="even"><span class="lineNumber">&nbsp;&nbsp;946&nbsp;</span><a name="line_946"></a></li>
<li id="line_947" class="odd"><span class="lineNumber">&nbsp;&nbsp;947&nbsp;</span><a name="line_947"></a></li>
<li id="line_948" class="even"><span class="lineNumber">&nbsp;&nbsp;948&nbsp;</span>//&nbsp;Week&nbsp;Number<a name="line_948"></a></li>
<li id="line_949" class="odd"><span class="lineNumber">&nbsp;&nbsp;949&nbsp;</span>//&nbsp;-------------------------------------------------------------------------------------------------<a name="line_949"></a></li>
<li id="line_950" class="even"><span class="lineNumber">&nbsp;&nbsp;950&nbsp;</span><a name="line_950"></a></li>
<li id="line_951" class="odd"><span class="lineNumber">&nbsp;&nbsp;951&nbsp;</span><a name="line_951"></a></li>
<li id="line_952" class="even"><span class="lineNumber">&nbsp;&nbsp;952&nbsp;</span>//&nbsp;Returns&nbsp;the&nbsp;week&nbsp;number,&nbsp;considering&nbsp;the&nbsp;locale's&nbsp;custom&nbsp;week&nbsp;number&nbsp;calcuation<a name="line_952"></a></li>
<li id="line_953" class="odd"><span class="lineNumber">&nbsp;&nbsp;953&nbsp;</span>//&nbsp;`weeks`&nbsp;is&nbsp;an&nbsp;alias&nbsp;for&nbsp;`week`<a name="line_953"></a></li>
<li id="line_954" class="even"><span class="lineNumber">&nbsp;&nbsp;954&nbsp;</span>newMomentProto.week&nbsp;=&nbsp;newMomentProto.weeks&nbsp;=&nbsp;function(input)&nbsp;{<a name="line_954"></a></li>
<li id="line_955" class="odd"><span class="lineNumber">&nbsp;&nbsp;955&nbsp;</span>	var&nbsp;weekCalc&nbsp;=&nbsp;(this._locale&nbsp;||&nbsp;this._lang)&nbsp;//&nbsp;works&nbsp;pre-moment-2.8<a name="line_955"></a></li>
<li id="line_956" class="even"><span class="lineNumber">&nbsp;&nbsp;956&nbsp;</span>		._fullCalendar_weekCalc;<a name="line_956"></a></li>
<li id="line_957" class="odd"><span class="lineNumber">&nbsp;&nbsp;957&nbsp;</span><a name="line_957"></a></li>
<li id="line_958" class="even"><span class="lineNumber">&nbsp;&nbsp;958&nbsp;</span>	if&nbsp;(input&nbsp;==&nbsp;null&nbsp;&amp;&amp;&nbsp;typeof&nbsp;weekCalc&nbsp;===&nbsp;'function')&nbsp;{&nbsp;//&nbsp;custom&nbsp;function&nbsp;only&nbsp;works&nbsp;for&nbsp;getter<a name="line_958"></a></li>
<li id="line_959" class="odd"><span class="lineNumber">&nbsp;&nbsp;959&nbsp;</span>		return&nbsp;weekCalc(this);<a name="line_959"></a></li>
<li id="line_960" class="even"><span class="lineNumber">&nbsp;&nbsp;960&nbsp;</span>	}<a name="line_960"></a></li>
<li id="line_961" class="odd"><span class="lineNumber">&nbsp;&nbsp;961&nbsp;</span>	else&nbsp;if&nbsp;(weekCalc&nbsp;===&nbsp;'ISO')&nbsp;{<a name="line_961"></a></li>
<li id="line_962" class="even"><span class="lineNumber">&nbsp;&nbsp;962&nbsp;</span>		return&nbsp;oldMomentProto.isoWeek.apply(this,&nbsp;arguments);&nbsp;//&nbsp;ISO&nbsp;getter/setter<a name="line_962"></a></li>
<li id="line_963" class="odd"><span class="lineNumber">&nbsp;&nbsp;963&nbsp;</span>	}<a name="line_963"></a></li>
<li id="line_964" class="even"><span class="lineNumber">&nbsp;&nbsp;964&nbsp;</span><a name="line_964"></a></li>
<li id="line_965" class="odd"><span class="lineNumber">&nbsp;&nbsp;965&nbsp;</span>	return&nbsp;oldMomentProto.week.apply(this,&nbsp;arguments);&nbsp;//&nbsp;local&nbsp;getter/setter<a name="line_965"></a></li>
<li id="line_966" class="even"><span class="lineNumber">&nbsp;&nbsp;966&nbsp;</span>};<a name="line_966"></a></li>
<li id="line_967" class="odd"><span class="lineNumber">&nbsp;&nbsp;967&nbsp;</span><a name="line_967"></a></li>
<li id="line_968" class="even"><span class="lineNumber">&nbsp;&nbsp;968&nbsp;</span><a name="line_968"></a></li>
<li id="line_969" class="odd"><span class="lineNumber">&nbsp;&nbsp;969&nbsp;</span>//&nbsp;Time-of-day<a name="line_969"></a></li>
<li id="line_970" class="even"><span class="lineNumber">&nbsp;&nbsp;970&nbsp;</span>//&nbsp;-------------------------------------------------------------------------------------------------<a name="line_970"></a></li>
<li id="line_971" class="odd"><span class="lineNumber">&nbsp;&nbsp;971&nbsp;</span><a name="line_971"></a></li>
<li id="line_972" class="even"><span class="lineNumber">&nbsp;&nbsp;972&nbsp;</span>//&nbsp;GETTER<a name="line_972"></a></li>
<li id="line_973" class="odd"><span class="lineNumber">&nbsp;&nbsp;973&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;Duration&nbsp;with&nbsp;the&nbsp;hours/minutes/seconds/ms&nbsp;values&nbsp;of&nbsp;the&nbsp;moment.<a name="line_973"></a></li>
<li id="line_974" class="even"><span class="lineNumber">&nbsp;&nbsp;974&nbsp;</span>//&nbsp;If&nbsp;the&nbsp;moment&nbsp;has&nbsp;an&nbsp;ambiguous&nbsp;time,&nbsp;a&nbsp;duration&nbsp;of&nbsp;00:00&nbsp;will&nbsp;be&nbsp;returned.<a name="line_974"></a></li>
<li id="line_975" class="odd"><span class="lineNumber">&nbsp;&nbsp;975&nbsp;</span>//<a name="line_975"></a></li>
<li id="line_976" class="even"><span class="lineNumber">&nbsp;&nbsp;976&nbsp;</span>//&nbsp;SETTER<a name="line_976"></a></li>
<li id="line_977" class="odd"><span class="lineNumber">&nbsp;&nbsp;977&nbsp;</span>//&nbsp;You&nbsp;can&nbsp;supply&nbsp;a&nbsp;Duration,&nbsp;a&nbsp;Moment,&nbsp;or&nbsp;a&nbsp;Duration-like&nbsp;argument.<a name="line_977"></a></li>
<li id="line_978" class="even"><span class="lineNumber">&nbsp;&nbsp;978&nbsp;</span>//&nbsp;When&nbsp;setting&nbsp;the&nbsp;time,&nbsp;and&nbsp;the&nbsp;moment&nbsp;has&nbsp;an&nbsp;ambiguous&nbsp;time,&nbsp;it&nbsp;then&nbsp;becomes&nbsp;unambiguous.<a name="line_978"></a></li>
<li id="line_979" class="odd"><span class="lineNumber">&nbsp;&nbsp;979&nbsp;</span>newMomentProto.time&nbsp;=&nbsp;function(time)&nbsp;{<a name="line_979"></a></li>
<li id="line_980" class="even"><span class="lineNumber">&nbsp;&nbsp;980&nbsp;</span><a name="line_980"></a></li>
<li id="line_981" class="odd"><span class="lineNumber">&nbsp;&nbsp;981&nbsp;</span>	//&nbsp;Fallback&nbsp;to&nbsp;the&nbsp;original&nbsp;method&nbsp;(if&nbsp;there&nbsp;is&nbsp;one)&nbsp;if&nbsp;this&nbsp;moment&nbsp;wasn't&nbsp;created&nbsp;via&nbsp;FullCalendar.<a name="line_981"></a></li>
<li id="line_982" class="even"><span class="lineNumber">&nbsp;&nbsp;982&nbsp;</span>	//&nbsp;`time`&nbsp;is&nbsp;a&nbsp;generic&nbsp;enough&nbsp;method&nbsp;name&nbsp;where&nbsp;this&nbsp;precaution&nbsp;is&nbsp;necessary&nbsp;to&nbsp;avoid&nbsp;collisions&nbsp;w/&nbsp;other&nbsp;plugins.<a name="line_982"></a></li>
<li id="line_983" class="odd"><span class="lineNumber">&nbsp;&nbsp;983&nbsp;</span>	if&nbsp;(!this._fullCalendar)&nbsp;{<a name="line_983"></a></li>
<li id="line_984" class="even"><span class="lineNumber">&nbsp;&nbsp;984&nbsp;</span>		return&nbsp;oldMomentProto.time.apply(this,&nbsp;arguments);<a name="line_984"></a></li>
<li id="line_985" class="odd"><span class="lineNumber">&nbsp;&nbsp;985&nbsp;</span>	}<a name="line_985"></a></li>
<li id="line_986" class="even"><span class="lineNumber">&nbsp;&nbsp;986&nbsp;</span><a name="line_986"></a></li>
<li id="line_987" class="odd"><span class="lineNumber">&nbsp;&nbsp;987&nbsp;</span>	if&nbsp;(time&nbsp;==&nbsp;null)&nbsp;{&nbsp;//&nbsp;getter<a name="line_987"></a></li>
<li id="line_988" class="even"><span class="lineNumber">&nbsp;&nbsp;988&nbsp;</span>		return&nbsp;moment.duration({<a name="line_988"></a></li>
<li id="line_989" class="odd"><span class="lineNumber">&nbsp;&nbsp;989&nbsp;</span>			hours:&nbsp;this.hours(),<a name="line_989"></a></li>
<li id="line_990" class="even"><span class="lineNumber">&nbsp;&nbsp;990&nbsp;</span>			minutes:&nbsp;this.minutes(),<a name="line_990"></a></li>
<li id="line_991" class="odd"><span class="lineNumber">&nbsp;&nbsp;991&nbsp;</span>			seconds:&nbsp;this.seconds(),<a name="line_991"></a></li>
<li id="line_992" class="even"><span class="lineNumber">&nbsp;&nbsp;992&nbsp;</span>			milliseconds:&nbsp;this.milliseconds()<a name="line_992"></a></li>
<li id="line_993" class="odd"><span class="lineNumber">&nbsp;&nbsp;993&nbsp;</span>		});<a name="line_993"></a></li>
<li id="line_994" class="even"><span class="lineNumber">&nbsp;&nbsp;994&nbsp;</span>	}<a name="line_994"></a></li>
<li id="line_995" class="odd"><span class="lineNumber">&nbsp;&nbsp;995&nbsp;</span>	else&nbsp;{&nbsp;//&nbsp;setter<a name="line_995"></a></li>
<li id="line_996" class="even"><span class="lineNumber">&nbsp;&nbsp;996&nbsp;</span><a name="line_996"></a></li>
<li id="line_997" class="odd"><span class="lineNumber">&nbsp;&nbsp;997&nbsp;</span>		this._ambigTime&nbsp;=&nbsp;false;&nbsp;//&nbsp;mark&nbsp;that&nbsp;the&nbsp;moment&nbsp;now&nbsp;has&nbsp;a&nbsp;time<a name="line_997"></a></li>
<li id="line_998" class="even"><span class="lineNumber">&nbsp;&nbsp;998&nbsp;</span><a name="line_998"></a></li>
<li id="line_999" class="odd"><span class="lineNumber">&nbsp;&nbsp;999&nbsp;</span>		if&nbsp;(!moment.isDuration(time)&nbsp;&amp;&amp;&nbsp;!moment.isMoment(time))&nbsp;{<a name="line_999"></a></li>
<li id="line_1000" class="even"><span class="lineNumber">&nbsp;1000&nbsp;</span>			time&nbsp;=&nbsp;moment.duration(time);<a name="line_1000"></a></li>
<li id="line_1001" class="odd"><span class="lineNumber">&nbsp;1001&nbsp;</span>		}<a name="line_1001"></a></li>
<li id="line_1002" class="even"><span class="lineNumber">&nbsp;1002&nbsp;</span><a name="line_1002"></a></li>
<li id="line_1003" class="odd"><span class="lineNumber">&nbsp;1003&nbsp;</span>		//&nbsp;The&nbsp;day&nbsp;value&nbsp;should&nbsp;cause&nbsp;overflow&nbsp;(so&nbsp;24&nbsp;hours&nbsp;becomes&nbsp;00:00:00&nbsp;of&nbsp;next&nbsp;day).<a name="line_1003"></a></li>
<li id="line_1004" class="even"><span class="lineNumber">&nbsp;1004&nbsp;</span>		//&nbsp;Only&nbsp;for&nbsp;Duration&nbsp;times,&nbsp;not&nbsp;Moment&nbsp;times.<a name="line_1004"></a></li>
<li id="line_1005" class="odd"><span class="lineNumber">&nbsp;1005&nbsp;</span>		var&nbsp;dayHours&nbsp;=&nbsp;0;<a name="line_1005"></a></li>
<li id="line_1006" class="even"><span class="lineNumber">&nbsp;1006&nbsp;</span>		if&nbsp;(moment.isDuration(time))&nbsp;{<a name="line_1006"></a></li>
<li id="line_1007" class="odd"><span class="lineNumber">&nbsp;1007&nbsp;</span>			dayHours&nbsp;=&nbsp;Math.floor(time.asDays())&nbsp;*&nbsp;24;<a name="line_1007"></a></li>
<li id="line_1008" class="even"><span class="lineNumber">&nbsp;1008&nbsp;</span>		}<a name="line_1008"></a></li>
<li id="line_1009" class="odd"><span class="lineNumber">&nbsp;1009&nbsp;</span><a name="line_1009"></a></li>
<li id="line_1010" class="even"><span class="lineNumber">&nbsp;1010&nbsp;</span>		//&nbsp;We&nbsp;need&nbsp;to&nbsp;set&nbsp;the&nbsp;individual&nbsp;fields.<a name="line_1010"></a></li>
<li id="line_1011" class="odd"><span class="lineNumber">&nbsp;1011&nbsp;</span>		//&nbsp;Can't&nbsp;use&nbsp;startOf('day')&nbsp;then&nbsp;add&nbsp;duration.&nbsp;In&nbsp;case&nbsp;of&nbsp;DST&nbsp;at&nbsp;start&nbsp;of&nbsp;day.<a name="line_1011"></a></li>
<li id="line_1012" class="even"><span class="lineNumber">&nbsp;1012&nbsp;</span>		return&nbsp;this.hours(dayHours&nbsp;+&nbsp;time.hours())<a name="line_1012"></a></li>
<li id="line_1013" class="odd"><span class="lineNumber">&nbsp;1013&nbsp;</span>			.minutes(time.minutes())<a name="line_1013"></a></li>
<li id="line_1014" class="even"><span class="lineNumber">&nbsp;1014&nbsp;</span>			.seconds(time.seconds())<a name="line_1014"></a></li>
<li id="line_1015" class="odd"><span class="lineNumber">&nbsp;1015&nbsp;</span>			.milliseconds(time.milliseconds());<a name="line_1015"></a></li>
<li id="line_1016" class="even"><span class="lineNumber">&nbsp;1016&nbsp;</span>	}<a name="line_1016"></a></li>
<li id="line_1017" class="odd"><span class="lineNumber">&nbsp;1017&nbsp;</span>};<a name="line_1017"></a></li>
<li id="line_1018" class="even"><span class="lineNumber">&nbsp;1018&nbsp;</span><a name="line_1018"></a></li>
<li id="line_1019" class="odd"><span class="lineNumber">&nbsp;1019&nbsp;</span>//&nbsp;Converts&nbsp;the&nbsp;moment&nbsp;to&nbsp;UTC,&nbsp;stripping&nbsp;out&nbsp;its&nbsp;time-of-day&nbsp;and&nbsp;timezone&nbsp;offset,<a name="line_1019"></a></li>
<li id="line_1020" class="even"><span class="lineNumber">&nbsp;1020&nbsp;</span>//&nbsp;but&nbsp;preserving&nbsp;its&nbsp;YMD.&nbsp;A&nbsp;moment&nbsp;with&nbsp;a&nbsp;stripped&nbsp;time&nbsp;will&nbsp;display&nbsp;no&nbsp;time<a name="line_1020"></a></li>
<li id="line_1021" class="odd"><span class="lineNumber">&nbsp;1021&nbsp;</span>//&nbsp;nor&nbsp;timezone&nbsp;offset&nbsp;when&nbsp;.format()&nbsp;is&nbsp;called.<a name="line_1021"></a></li>
<li id="line_1022" class="even"><span class="lineNumber">&nbsp;1022&nbsp;</span>newMomentProto.stripTime&nbsp;=&nbsp;function()&nbsp;{<a name="line_1022"></a></li>
<li id="line_1023" class="odd"><span class="lineNumber">&nbsp;1023&nbsp;</span>	var&nbsp;a;<a name="line_1023"></a></li>
<li id="line_1024" class="even"><span class="lineNumber">&nbsp;1024&nbsp;</span><a name="line_1024"></a></li>
<li id="line_1025" class="odd"><span class="lineNumber">&nbsp;1025&nbsp;</span>	if&nbsp;(!this._ambigTime)&nbsp;{<a name="line_1025"></a></li>
<li id="line_1026" class="even"><span class="lineNumber">&nbsp;1026&nbsp;</span><a name="line_1026"></a></li>
<li id="line_1027" class="odd"><span class="lineNumber">&nbsp;1027&nbsp;</span>		//&nbsp;get&nbsp;the&nbsp;values&nbsp;before&nbsp;any&nbsp;conversion&nbsp;happens<a name="line_1027"></a></li>
<li id="line_1028" class="even"><span class="lineNumber">&nbsp;1028&nbsp;</span>		a&nbsp;=&nbsp;this.toArray();&nbsp;//&nbsp;array&nbsp;of&nbsp;y/m/d/h/m/s/ms<a name="line_1028"></a></li>
<li id="line_1029" class="odd"><span class="lineNumber">&nbsp;1029&nbsp;</span><a name="line_1029"></a></li>
<li id="line_1030" class="even"><span class="lineNumber">&nbsp;1030&nbsp;</span>		//&nbsp;TODO:&nbsp;use&nbsp;keepLocalTime&nbsp;in&nbsp;the&nbsp;future<a name="line_1030"></a></li>
<li id="line_1031" class="odd"><span class="lineNumber">&nbsp;1031&nbsp;</span>		this.utc();&nbsp;//&nbsp;set&nbsp;the&nbsp;internal&nbsp;UTC&nbsp;flag&nbsp;(will&nbsp;clear&nbsp;the&nbsp;ambig&nbsp;flags)<a name="line_1031"></a></li>
<li id="line_1032" class="even"><span class="lineNumber">&nbsp;1032&nbsp;</span>		setUTCValues(this,&nbsp;a.slice(0,&nbsp;3));&nbsp;//&nbsp;set&nbsp;the&nbsp;year/month/date.&nbsp;time&nbsp;will&nbsp;be&nbsp;zero<a name="line_1032"></a></li>
<li id="line_1033" class="odd"><span class="lineNumber">&nbsp;1033&nbsp;</span><a name="line_1033"></a></li>
<li id="line_1034" class="even"><span class="lineNumber">&nbsp;1034&nbsp;</span>		//&nbsp;Mark&nbsp;the&nbsp;time&nbsp;as&nbsp;ambiguous.&nbsp;This&nbsp;needs&nbsp;to&nbsp;happen&nbsp;after&nbsp;the&nbsp;.utc()&nbsp;call,&nbsp;which&nbsp;might&nbsp;call&nbsp;.utcOffset(),<a name="line_1034"></a></li>
<li id="line_1035" class="odd"><span class="lineNumber">&nbsp;1035&nbsp;</span>		//&nbsp;which&nbsp;clears&nbsp;all&nbsp;ambig&nbsp;flags.&nbsp;Same&nbsp;with&nbsp;setUTCValues&nbsp;with&nbsp;moment-timezone.<a name="line_1035"></a></li>
<li id="line_1036" class="even"><span class="lineNumber">&nbsp;1036&nbsp;</span>		this._ambigTime&nbsp;=&nbsp;true;<a name="line_1036"></a></li>
<li id="line_1037" class="odd"><span class="lineNumber">&nbsp;1037&nbsp;</span>		this._ambigZone&nbsp;=&nbsp;true;&nbsp;//&nbsp;if&nbsp;ambiguous&nbsp;time,&nbsp;also&nbsp;ambiguous&nbsp;timezone&nbsp;offset<a name="line_1037"></a></li>
<li id="line_1038" class="even"><span class="lineNumber">&nbsp;1038&nbsp;</span>	}<a name="line_1038"></a></li>
<li id="line_1039" class="odd"><span class="lineNumber">&nbsp;1039&nbsp;</span><a name="line_1039"></a></li>
<li id="line_1040" class="even"><span class="lineNumber">&nbsp;1040&nbsp;</span>	return&nbsp;this;&nbsp;//&nbsp;for&nbsp;chaining<a name="line_1040"></a></li>
<li id="line_1041" class="odd"><span class="lineNumber">&nbsp;1041&nbsp;</span>};<a name="line_1041"></a></li>
<li id="line_1042" class="even"><span class="lineNumber">&nbsp;1042&nbsp;</span><a name="line_1042"></a></li>
<li id="line_1043" class="odd"><span class="lineNumber">&nbsp;1043&nbsp;</span>//&nbsp;Returns&nbsp;if&nbsp;the&nbsp;moment&nbsp;has&nbsp;a&nbsp;non-ambiguous&nbsp;time&nbsp;(boolean)<a name="line_1043"></a></li>
<li id="line_1044" class="even"><span class="lineNumber">&nbsp;1044&nbsp;</span>newMomentProto.hasTime&nbsp;=&nbsp;function()&nbsp;{<a name="line_1044"></a></li>
<li id="line_1045" class="odd"><span class="lineNumber">&nbsp;1045&nbsp;</span>	return&nbsp;!this._ambigTime;<a name="line_1045"></a></li>
<li id="line_1046" class="even"><span class="lineNumber">&nbsp;1046&nbsp;</span>};<a name="line_1046"></a></li>
<li id="line_1047" class="odd"><span class="lineNumber">&nbsp;1047&nbsp;</span><a name="line_1047"></a></li>
<li id="line_1048" class="even"><span class="lineNumber">&nbsp;1048&nbsp;</span><a name="line_1048"></a></li>
<li id="line_1049" class="odd"><span class="lineNumber">&nbsp;1049&nbsp;</span>//&nbsp;Timezone<a name="line_1049"></a></li>
<li id="line_1050" class="even"><span class="lineNumber">&nbsp;1050&nbsp;</span>//&nbsp;-------------------------------------------------------------------------------------------------<a name="line_1050"></a></li>
<li id="line_1051" class="odd"><span class="lineNumber">&nbsp;1051&nbsp;</span><a name="line_1051"></a></li>
<li id="line_1052" class="even"><span class="lineNumber">&nbsp;1052&nbsp;</span>//&nbsp;Converts&nbsp;the&nbsp;moment&nbsp;to&nbsp;UTC,&nbsp;stripping&nbsp;out&nbsp;its&nbsp;timezone&nbsp;offset,&nbsp;but&nbsp;preserving&nbsp;its<a name="line_1052"></a></li>
<li id="line_1053" class="odd"><span class="lineNumber">&nbsp;1053&nbsp;</span>//&nbsp;YMD&nbsp;and&nbsp;time-of-day.&nbsp;A&nbsp;moment&nbsp;with&nbsp;a&nbsp;stripped&nbsp;timezone&nbsp;offset&nbsp;will&nbsp;display&nbsp;no<a name="line_1053"></a></li>
<li id="line_1054" class="even"><span class="lineNumber">&nbsp;1054&nbsp;</span>//&nbsp;timezone&nbsp;offset&nbsp;when&nbsp;.format()&nbsp;is&nbsp;called.<a name="line_1054"></a></li>
<li id="line_1055" class="odd"><span class="lineNumber">&nbsp;1055&nbsp;</span>//&nbsp;TODO:&nbsp;look&nbsp;into&nbsp;Moment's&nbsp;keepLocalTime&nbsp;functionality<a name="line_1055"></a></li>
<li id="line_1056" class="even"><span class="lineNumber">&nbsp;1056&nbsp;</span>newMomentProto.stripZone&nbsp;=&nbsp;function()&nbsp;{<a name="line_1056"></a></li>
<li id="line_1057" class="odd"><span class="lineNumber">&nbsp;1057&nbsp;</span>	var&nbsp;a,&nbsp;wasAmbigTime;<a name="line_1057"></a></li>
<li id="line_1058" class="even"><span class="lineNumber">&nbsp;1058&nbsp;</span><a name="line_1058"></a></li>
<li id="line_1059" class="odd"><span class="lineNumber">&nbsp;1059&nbsp;</span>	if&nbsp;(!this._ambigZone)&nbsp;{<a name="line_1059"></a></li>
<li id="line_1060" class="even"><span class="lineNumber">&nbsp;1060&nbsp;</span><a name="line_1060"></a></li>
<li id="line_1061" class="odd"><span class="lineNumber">&nbsp;1061&nbsp;</span>		//&nbsp;get&nbsp;the&nbsp;values&nbsp;before&nbsp;any&nbsp;conversion&nbsp;happens<a name="line_1061"></a></li>
<li id="line_1062" class="even"><span class="lineNumber">&nbsp;1062&nbsp;</span>		a&nbsp;=&nbsp;this.toArray();&nbsp;//&nbsp;array&nbsp;of&nbsp;y/m/d/h/m/s/ms<a name="line_1062"></a></li>
<li id="line_1063" class="odd"><span class="lineNumber">&nbsp;1063&nbsp;</span>		wasAmbigTime&nbsp;=&nbsp;this._ambigTime;<a name="line_1063"></a></li>
<li id="line_1064" class="even"><span class="lineNumber">&nbsp;1064&nbsp;</span><a name="line_1064"></a></li>
<li id="line_1065" class="odd"><span class="lineNumber">&nbsp;1065&nbsp;</span>		this.utc();&nbsp;//&nbsp;set&nbsp;the&nbsp;internal&nbsp;UTC&nbsp;flag&nbsp;(might&nbsp;clear&nbsp;the&nbsp;ambig&nbsp;flags,&nbsp;depending&nbsp;on&nbsp;Moment&nbsp;internals)<a name="line_1065"></a></li>
<li id="line_1066" class="even"><span class="lineNumber">&nbsp;1066&nbsp;</span>		setUTCValues(this,&nbsp;a);&nbsp;//&nbsp;will&nbsp;set&nbsp;the&nbsp;year/month/date/hours/minutes/seconds/ms<a name="line_1066"></a></li>
<li id="line_1067" class="odd"><span class="lineNumber">&nbsp;1067&nbsp;</span><a name="line_1067"></a></li>
<li id="line_1068" class="even"><span class="lineNumber">&nbsp;1068&nbsp;</span>		//&nbsp;the&nbsp;above&nbsp;call&nbsp;to&nbsp;.utc()/.utcOffset()&nbsp;unfortunately&nbsp;might&nbsp;clear&nbsp;the&nbsp;ambig&nbsp;flags,&nbsp;so&nbsp;restore<a name="line_1068"></a></li>
<li id="line_1069" class="odd"><span class="lineNumber">&nbsp;1069&nbsp;</span>		this._ambigTime&nbsp;=&nbsp;wasAmbigTime&nbsp;||&nbsp;false;<a name="line_1069"></a></li>
<li id="line_1070" class="even"><span class="lineNumber">&nbsp;1070&nbsp;</span><a name="line_1070"></a></li>
<li id="line_1071" class="odd"><span class="lineNumber">&nbsp;1071&nbsp;</span>		//&nbsp;Mark&nbsp;the&nbsp;zone&nbsp;as&nbsp;ambiguous.&nbsp;This&nbsp;needs&nbsp;to&nbsp;happen&nbsp;after&nbsp;the&nbsp;.utc()&nbsp;call,&nbsp;which&nbsp;might&nbsp;call&nbsp;.utcOffset(),<a name="line_1071"></a></li>
<li id="line_1072" class="even"><span class="lineNumber">&nbsp;1072&nbsp;</span>		//&nbsp;which&nbsp;clears&nbsp;the&nbsp;ambig&nbsp;flags.&nbsp;Same&nbsp;with&nbsp;setUTCValues&nbsp;with&nbsp;moment-timezone.<a name="line_1072"></a></li>
<li id="line_1073" class="odd"><span class="lineNumber">&nbsp;1073&nbsp;</span>		this._ambigZone&nbsp;=&nbsp;true;<a name="line_1073"></a></li>
<li id="line_1074" class="even"><span class="lineNumber">&nbsp;1074&nbsp;</span>	}<a name="line_1074"></a></li>
<li id="line_1075" class="odd"><span class="lineNumber">&nbsp;1075&nbsp;</span><a name="line_1075"></a></li>
<li id="line_1076" class="even"><span class="lineNumber">&nbsp;1076&nbsp;</span>	return&nbsp;this;&nbsp;//&nbsp;for&nbsp;chaining<a name="line_1076"></a></li>
<li id="line_1077" class="odd"><span class="lineNumber">&nbsp;1077&nbsp;</span>};<a name="line_1077"></a></li>
<li id="line_1078" class="even"><span class="lineNumber">&nbsp;1078&nbsp;</span><a name="line_1078"></a></li>
<li id="line_1079" class="odd"><span class="lineNumber">&nbsp;1079&nbsp;</span>//&nbsp;Returns&nbsp;of&nbsp;the&nbsp;moment&nbsp;has&nbsp;a&nbsp;non-ambiguous&nbsp;timezone&nbsp;offset&nbsp;(boolean)<a name="line_1079"></a></li>
<li id="line_1080" class="even"><span class="lineNumber">&nbsp;1080&nbsp;</span>newMomentProto.hasZone&nbsp;=&nbsp;function()&nbsp;{<a name="line_1080"></a></li>
<li id="line_1081" class="odd"><span class="lineNumber">&nbsp;1081&nbsp;</span>	return&nbsp;!this._ambigZone;<a name="line_1081"></a></li>
<li id="line_1082" class="even"><span class="lineNumber">&nbsp;1082&nbsp;</span>};<a name="line_1082"></a></li>
<li id="line_1083" class="odd"><span class="lineNumber">&nbsp;1083&nbsp;</span><a name="line_1083"></a></li>
<li id="line_1084" class="even"><span class="lineNumber">&nbsp;1084&nbsp;</span><a name="line_1084"></a></li>
<li id="line_1085" class="odd"><span class="lineNumber">&nbsp;1085&nbsp;</span>//&nbsp;this&nbsp;method&nbsp;implicitly&nbsp;marks&nbsp;a&nbsp;zone<a name="line_1085"></a></li>
<li id="line_1086" class="even"><span class="lineNumber">&nbsp;1086&nbsp;</span>newMomentProto.local&nbsp;=&nbsp;function()&nbsp;{<a name="line_1086"></a></li>
<li id="line_1087" class="odd"><span class="lineNumber">&nbsp;1087&nbsp;</span>	var&nbsp;a&nbsp;=&nbsp;this.toArray();&nbsp;//&nbsp;year,month,date,hours,minutes,seconds,ms&nbsp;as&nbsp;an&nbsp;array<a name="line_1087"></a></li>
<li id="line_1088" class="even"><span class="lineNumber">&nbsp;1088&nbsp;</span>	var&nbsp;wasAmbigZone&nbsp;=&nbsp;this._ambigZone;<a name="line_1088"></a></li>
<li id="line_1089" class="odd"><span class="lineNumber">&nbsp;1089&nbsp;</span><a name="line_1089"></a></li>
<li id="line_1090" class="even"><span class="lineNumber">&nbsp;1090&nbsp;</span>	oldMomentProto.local.apply(this,&nbsp;arguments);<a name="line_1090"></a></li>
<li id="line_1091" class="odd"><span class="lineNumber">&nbsp;1091&nbsp;</span><a name="line_1091"></a></li>
<li id="line_1092" class="even"><span class="lineNumber">&nbsp;1092&nbsp;</span>	//&nbsp;ensure&nbsp;non-ambiguous<a name="line_1092"></a></li>
<li id="line_1093" class="odd"><span class="lineNumber">&nbsp;1093&nbsp;</span>	//&nbsp;this&nbsp;probably&nbsp;already&nbsp;happened&nbsp;via&nbsp;local()&nbsp;-&gt;&nbsp;utcOffset(),&nbsp;but&nbsp;don't&nbsp;rely&nbsp;on&nbsp;Moment's&nbsp;internals<a name="line_1093"></a></li>
<li id="line_1094" class="even"><span class="lineNumber">&nbsp;1094&nbsp;</span>	this._ambigTime&nbsp;=&nbsp;false;<a name="line_1094"></a></li>
<li id="line_1095" class="odd"><span class="lineNumber">&nbsp;1095&nbsp;</span>	this._ambigZone&nbsp;=&nbsp;false;<a name="line_1095"></a></li>
<li id="line_1096" class="even"><span class="lineNumber">&nbsp;1096&nbsp;</span><a name="line_1096"></a></li>
<li id="line_1097" class="odd"><span class="lineNumber">&nbsp;1097&nbsp;</span>	if&nbsp;(wasAmbigZone)&nbsp;{<a name="line_1097"></a></li>
<li id="line_1098" class="even"><span class="lineNumber">&nbsp;1098&nbsp;</span>		//&nbsp;If&nbsp;the&nbsp;moment&nbsp;was&nbsp;ambiguously&nbsp;zoned,&nbsp;the&nbsp;date&nbsp;fields&nbsp;were&nbsp;stored&nbsp;as&nbsp;UTC.<a name="line_1098"></a></li>
<li id="line_1099" class="odd"><span class="lineNumber">&nbsp;1099&nbsp;</span>		//&nbsp;We&nbsp;want&nbsp;to&nbsp;preserve&nbsp;these,&nbsp;but&nbsp;in&nbsp;local&nbsp;time.<a name="line_1099"></a></li>
<li id="line_1100" class="even"><span class="lineNumber">&nbsp;1100&nbsp;</span>		//&nbsp;TODO:&nbsp;look&nbsp;into&nbsp;Moment's&nbsp;keepLocalTime&nbsp;functionality<a name="line_1100"></a></li>
<li id="line_1101" class="odd"><span class="lineNumber">&nbsp;1101&nbsp;</span>		setLocalValues(this,&nbsp;a);<a name="line_1101"></a></li>
<li id="line_1102" class="even"><span class="lineNumber">&nbsp;1102&nbsp;</span>	}<a name="line_1102"></a></li>
<li id="line_1103" class="odd"><span class="lineNumber">&nbsp;1103&nbsp;</span><a name="line_1103"></a></li>
<li id="line_1104" class="even"><span class="lineNumber">&nbsp;1104&nbsp;</span>	return&nbsp;this;&nbsp;//&nbsp;for&nbsp;chaining<a name="line_1104"></a></li>
<li id="line_1105" class="odd"><span class="lineNumber">&nbsp;1105&nbsp;</span>};<a name="line_1105"></a></li>
<li id="line_1106" class="even"><span class="lineNumber">&nbsp;1106&nbsp;</span><a name="line_1106"></a></li>
<li id="line_1107" class="odd"><span class="lineNumber">&nbsp;1107&nbsp;</span><a name="line_1107"></a></li>
<li id="line_1108" class="even"><span class="lineNumber">&nbsp;1108&nbsp;</span>//&nbsp;implicitly&nbsp;marks&nbsp;a&nbsp;zone<a name="line_1108"></a></li>
<li id="line_1109" class="odd"><span class="lineNumber">&nbsp;1109&nbsp;</span>newMomentProto.utc&nbsp;=&nbsp;function()&nbsp;{<a name="line_1109"></a></li>
<li id="line_1110" class="even"><span class="lineNumber">&nbsp;1110&nbsp;</span>	oldMomentProto.utc.apply(this,&nbsp;arguments);<a name="line_1110"></a></li>
<li id="line_1111" class="odd"><span class="lineNumber">&nbsp;1111&nbsp;</span><a name="line_1111"></a></li>
<li id="line_1112" class="even"><span class="lineNumber">&nbsp;1112&nbsp;</span>	//&nbsp;ensure&nbsp;non-ambiguous<a name="line_1112"></a></li>
<li id="line_1113" class="odd"><span class="lineNumber">&nbsp;1113&nbsp;</span>	//&nbsp;this&nbsp;probably&nbsp;already&nbsp;happened&nbsp;via&nbsp;utc()&nbsp;-&gt;&nbsp;utcOffset(),&nbsp;but&nbsp;don't&nbsp;rely&nbsp;on&nbsp;Moment's&nbsp;internals<a name="line_1113"></a></li>
<li id="line_1114" class="even"><span class="lineNumber">&nbsp;1114&nbsp;</span>	this._ambigTime&nbsp;=&nbsp;false;<a name="line_1114"></a></li>
<li id="line_1115" class="odd"><span class="lineNumber">&nbsp;1115&nbsp;</span>	this._ambigZone&nbsp;=&nbsp;false;<a name="line_1115"></a></li>
<li id="line_1116" class="even"><span class="lineNumber">&nbsp;1116&nbsp;</span><a name="line_1116"></a></li>
<li id="line_1117" class="odd"><span class="lineNumber">&nbsp;1117&nbsp;</span>	return&nbsp;this;<a name="line_1117"></a></li>
<li id="line_1118" class="even"><span class="lineNumber">&nbsp;1118&nbsp;</span>};<a name="line_1118"></a></li>
<li id="line_1119" class="odd"><span class="lineNumber">&nbsp;1119&nbsp;</span><a name="line_1119"></a></li>
<li id="line_1120" class="even"><span class="lineNumber">&nbsp;1120&nbsp;</span><a name="line_1120"></a></li>
<li id="line_1121" class="odd"><span class="lineNumber">&nbsp;1121&nbsp;</span>//&nbsp;methods&nbsp;for&nbsp;arbitrarily&nbsp;manipulating&nbsp;timezone&nbsp;offset.<a name="line_1121"></a></li>
<li id="line_1122" class="even"><span class="lineNumber">&nbsp;1122&nbsp;</span>//&nbsp;should&nbsp;clear&nbsp;time/zone&nbsp;ambiguity&nbsp;when&nbsp;called.<a name="line_1122"></a></li>
<li id="line_1123" class="odd"><span class="lineNumber">&nbsp;1123&nbsp;</span>$.each([<a name="line_1123"></a></li>
<li id="line_1124" class="even"><span class="lineNumber">&nbsp;1124&nbsp;</span>	'zone',&nbsp;//&nbsp;only&nbsp;in&nbsp;moment-pre-2.9.&nbsp;deprecated&nbsp;afterwards<a name="line_1124"></a></li>
<li id="line_1125" class="odd"><span class="lineNumber">&nbsp;1125&nbsp;</span>	'utcOffset'<a name="line_1125"></a></li>
<li id="line_1126" class="even"><span class="lineNumber">&nbsp;1126&nbsp;</span>],&nbsp;function(i,&nbsp;name)&nbsp;{<a name="line_1126"></a></li>
<li id="line_1127" class="odd"><span class="lineNumber">&nbsp;1127&nbsp;</span>	if&nbsp;(oldMomentProto[name])&nbsp;{&nbsp;//&nbsp;original&nbsp;method&nbsp;exists?<a name="line_1127"></a></li>
<li id="line_1128" class="even"><span class="lineNumber">&nbsp;1128&nbsp;</span><a name="line_1128"></a></li>
<li id="line_1129" class="odd"><span class="lineNumber">&nbsp;1129&nbsp;</span>		//&nbsp;this&nbsp;method&nbsp;implicitly&nbsp;marks&nbsp;a&nbsp;zone&nbsp;(will&nbsp;probably&nbsp;get&nbsp;called&nbsp;upon&nbsp;.utc()&nbsp;and&nbsp;.local())<a name="line_1129"></a></li>
<li id="line_1130" class="even"><span class="lineNumber">&nbsp;1130&nbsp;</span>		newMomentProto[name]&nbsp;=&nbsp;function(tzo)&nbsp;{<a name="line_1130"></a></li>
<li id="line_1131" class="odd"><span class="lineNumber">&nbsp;1131&nbsp;</span><a name="line_1131"></a></li>
<li id="line_1132" class="even"><span class="lineNumber">&nbsp;1132&nbsp;</span>			if&nbsp;(tzo&nbsp;!=&nbsp;null)&nbsp;{&nbsp;//&nbsp;setter<a name="line_1132"></a></li>
<li id="line_1133" class="odd"><span class="lineNumber">&nbsp;1133&nbsp;</span>				//&nbsp;these&nbsp;assignments&nbsp;needs&nbsp;to&nbsp;happen&nbsp;before&nbsp;the&nbsp;original&nbsp;zone&nbsp;method&nbsp;is&nbsp;called.<a name="line_1133"></a></li>
<li id="line_1134" class="even"><span class="lineNumber">&nbsp;1134&nbsp;</span>				//&nbsp;I&nbsp;forget&nbsp;why,&nbsp;something&nbsp;to&nbsp;do&nbsp;with&nbsp;a&nbsp;browser&nbsp;crash.<a name="line_1134"></a></li>
<li id="line_1135" class="odd"><span class="lineNumber">&nbsp;1135&nbsp;</span>				this._ambigTime&nbsp;=&nbsp;false;<a name="line_1135"></a></li>
<li id="line_1136" class="even"><span class="lineNumber">&nbsp;1136&nbsp;</span>				this._ambigZone&nbsp;=&nbsp;false;<a name="line_1136"></a></li>
<li id="line_1137" class="odd"><span class="lineNumber">&nbsp;1137&nbsp;</span>			}<a name="line_1137"></a></li>
<li id="line_1138" class="even"><span class="lineNumber">&nbsp;1138&nbsp;</span><a name="line_1138"></a></li>
<li id="line_1139" class="odd"><span class="lineNumber">&nbsp;1139&nbsp;</span>			return&nbsp;oldMomentProto[name].apply(this,&nbsp;arguments);<a name="line_1139"></a></li>
<li id="line_1140" class="even"><span class="lineNumber">&nbsp;1140&nbsp;</span>		};<a name="line_1140"></a></li>
<li id="line_1141" class="odd"><span class="lineNumber">&nbsp;1141&nbsp;</span>	}<a name="line_1141"></a></li>
<li id="line_1142" class="even"><span class="lineNumber">&nbsp;1142&nbsp;</span>});<a name="line_1142"></a></li>
<li id="line_1143" class="odd"><span class="lineNumber">&nbsp;1143&nbsp;</span><a name="line_1143"></a></li>
<li id="line_1144" class="even"><span class="lineNumber">&nbsp;1144&nbsp;</span><a name="line_1144"></a></li>
<li id="line_1145" class="odd"><span class="lineNumber">&nbsp;1145&nbsp;</span>//&nbsp;Formatting<a name="line_1145"></a></li>
<li id="line_1146" class="even"><span class="lineNumber">&nbsp;1146&nbsp;</span>//&nbsp;-------------------------------------------------------------------------------------------------<a name="line_1146"></a></li>
<li id="line_1147" class="odd"><span class="lineNumber">&nbsp;1147&nbsp;</span><a name="line_1147"></a></li>
<li id="line_1148" class="even"><span class="lineNumber">&nbsp;1148&nbsp;</span>newMomentProto.format&nbsp;=&nbsp;function()&nbsp;{<a name="line_1148"></a></li>
<li id="line_1149" class="odd"><span class="lineNumber">&nbsp;1149&nbsp;</span>	if&nbsp;(this._fullCalendar&nbsp;&amp;&amp;&nbsp;arguments[0])&nbsp;{&nbsp;//&nbsp;an&nbsp;enhanced&nbsp;moment?&nbsp;and&nbsp;a&nbsp;format&nbsp;string&nbsp;provided?<a name="line_1149"></a></li>
<li id="line_1150" class="even"><span class="lineNumber">&nbsp;1150&nbsp;</span>		return&nbsp;formatDate(this,&nbsp;arguments[0]);&nbsp;//&nbsp;our&nbsp;extended&nbsp;formatting<a name="line_1150"></a></li>
<li id="line_1151" class="odd"><span class="lineNumber">&nbsp;1151&nbsp;</span>	}<a name="line_1151"></a></li>
<li id="line_1152" class="even"><span class="lineNumber">&nbsp;1152&nbsp;</span>	if&nbsp;(this._ambigTime)&nbsp;{<a name="line_1152"></a></li>
<li id="line_1153" class="odd"><span class="lineNumber">&nbsp;1153&nbsp;</span>		return&nbsp;oldMomentFormat(this,&nbsp;'YYYY-MM-DD');<a name="line_1153"></a></li>
<li id="line_1154" class="even"><span class="lineNumber">&nbsp;1154&nbsp;</span>	}<a name="line_1154"></a></li>
<li id="line_1155" class="odd"><span class="lineNumber">&nbsp;1155&nbsp;</span>	if&nbsp;(this._ambigZone)&nbsp;{<a name="line_1155"></a></li>
<li id="line_1156" class="even"><span class="lineNumber">&nbsp;1156&nbsp;</span>		return&nbsp;oldMomentFormat(this,&nbsp;'YYYY-MM-DD[T]HH:mm:ss');<a name="line_1156"></a></li>
<li id="line_1157" class="odd"><span class="lineNumber">&nbsp;1157&nbsp;</span>	}<a name="line_1157"></a></li>
<li id="line_1158" class="even"><span class="lineNumber">&nbsp;1158&nbsp;</span>	return&nbsp;oldMomentProto.format.apply(this,&nbsp;arguments);<a name="line_1158"></a></li>
<li id="line_1159" class="odd"><span class="lineNumber">&nbsp;1159&nbsp;</span>};<a name="line_1159"></a></li>
<li id="line_1160" class="even"><span class="lineNumber">&nbsp;1160&nbsp;</span><a name="line_1160"></a></li>
<li id="line_1161" class="odd"><span class="lineNumber">&nbsp;1161&nbsp;</span>newMomentProto.toISOString&nbsp;=&nbsp;function()&nbsp;{<a name="line_1161"></a></li>
<li id="line_1162" class="even"><span class="lineNumber">&nbsp;1162&nbsp;</span>	if&nbsp;(this._ambigTime)&nbsp;{<a name="line_1162"></a></li>
<li id="line_1163" class="odd"><span class="lineNumber">&nbsp;1163&nbsp;</span>		return&nbsp;oldMomentFormat(this,&nbsp;'YYYY-MM-DD');<a name="line_1163"></a></li>
<li id="line_1164" class="even"><span class="lineNumber">&nbsp;1164&nbsp;</span>	}<a name="line_1164"></a></li>
<li id="line_1165" class="odd"><span class="lineNumber">&nbsp;1165&nbsp;</span>	if&nbsp;(this._ambigZone)&nbsp;{<a name="line_1165"></a></li>
<li id="line_1166" class="even"><span class="lineNumber">&nbsp;1166&nbsp;</span>		return&nbsp;oldMomentFormat(this,&nbsp;'YYYY-MM-DD[T]HH:mm:ss');<a name="line_1166"></a></li>
<li id="line_1167" class="odd"><span class="lineNumber">&nbsp;1167&nbsp;</span>	}<a name="line_1167"></a></li>
<li id="line_1168" class="even"><span class="lineNumber">&nbsp;1168&nbsp;</span>	return&nbsp;oldMomentProto.toISOString.apply(this,&nbsp;arguments);<a name="line_1168"></a></li>
<li id="line_1169" class="odd"><span class="lineNumber">&nbsp;1169&nbsp;</span>};<a name="line_1169"></a></li>
<li id="line_1170" class="even"><span class="lineNumber">&nbsp;1170&nbsp;</span><a name="line_1170"></a></li>
<li id="line_1171" class="odd"><span class="lineNumber">&nbsp;1171&nbsp;</span><a name="line_1171"></a></li>
<li id="line_1172" class="even"><span class="lineNumber">&nbsp;1172&nbsp;</span>//&nbsp;Querying<a name="line_1172"></a></li>
<li id="line_1173" class="odd"><span class="lineNumber">&nbsp;1173&nbsp;</span>//&nbsp;-------------------------------------------------------------------------------------------------<a name="line_1173"></a></li>
<li id="line_1174" class="even"><span class="lineNumber">&nbsp;1174&nbsp;</span><a name="line_1174"></a></li>
<li id="line_1175" class="odd"><span class="lineNumber">&nbsp;1175&nbsp;</span>//&nbsp;Is&nbsp;the&nbsp;moment&nbsp;within&nbsp;the&nbsp;specified&nbsp;range?&nbsp;`end`&nbsp;is&nbsp;exclusive.<a name="line_1175"></a></li>
<li id="line_1176" class="even"><span class="lineNumber">&nbsp;1176&nbsp;</span>//&nbsp;FYI,&nbsp;this&nbsp;method&nbsp;is&nbsp;not&nbsp;a&nbsp;standard&nbsp;Moment&nbsp;method,&nbsp;so&nbsp;always&nbsp;do&nbsp;our&nbsp;enhanced&nbsp;logic.<a name="line_1176"></a></li>
<li id="line_1177" class="odd"><span class="lineNumber">&nbsp;1177&nbsp;</span>newMomentProto.isWithin&nbsp;=&nbsp;function(start,&nbsp;end)&nbsp;{<a name="line_1177"></a></li>
<li id="line_1178" class="even"><span class="lineNumber">&nbsp;1178&nbsp;</span>	var&nbsp;a&nbsp;=&nbsp;commonlyAmbiguate([&nbsp;this,&nbsp;start,&nbsp;end&nbsp;]);<a name="line_1178"></a></li>
<li id="line_1179" class="odd"><span class="lineNumber">&nbsp;1179&nbsp;</span>	return&nbsp;a[0]&nbsp;&gt;=&nbsp;a[1]&nbsp;&amp;&amp;&nbsp;a[0]&nbsp;&lt;&nbsp;a[2];<a name="line_1179"></a></li>
<li id="line_1180" class="even"><span class="lineNumber">&nbsp;1180&nbsp;</span>};<a name="line_1180"></a></li>
<li id="line_1181" class="odd"><span class="lineNumber">&nbsp;1181&nbsp;</span><a name="line_1181"></a></li>
<li id="line_1182" class="even"><span class="lineNumber">&nbsp;1182&nbsp;</span>//&nbsp;When&nbsp;isSame&nbsp;is&nbsp;called&nbsp;with&nbsp;units,&nbsp;timezone&nbsp;ambiguity&nbsp;is&nbsp;normalized&nbsp;before&nbsp;the&nbsp;comparison&nbsp;happens.<a name="line_1182"></a></li>
<li id="line_1183" class="odd"><span class="lineNumber">&nbsp;1183&nbsp;</span>//&nbsp;If&nbsp;no&nbsp;units&nbsp;specified,&nbsp;the&nbsp;two&nbsp;moments&nbsp;must&nbsp;be&nbsp;identically&nbsp;the&nbsp;same,&nbsp;with&nbsp;matching&nbsp;ambig&nbsp;flags.<a name="line_1183"></a></li>
<li id="line_1184" class="even"><span class="lineNumber">&nbsp;1184&nbsp;</span>newMomentProto.isSame&nbsp;=&nbsp;function(input,&nbsp;units)&nbsp;{<a name="line_1184"></a></li>
<li id="line_1185" class="odd"><span class="lineNumber">&nbsp;1185&nbsp;</span>	var&nbsp;a;<a name="line_1185"></a></li>
<li id="line_1186" class="even"><span class="lineNumber">&nbsp;1186&nbsp;</span><a name="line_1186"></a></li>
<li id="line_1187" class="odd"><span class="lineNumber">&nbsp;1187&nbsp;</span>	//&nbsp;only&nbsp;do&nbsp;custom&nbsp;logic&nbsp;if&nbsp;this&nbsp;is&nbsp;an&nbsp;enhanced&nbsp;moment<a name="line_1187"></a></li>
<li id="line_1188" class="even"><span class="lineNumber">&nbsp;1188&nbsp;</span>	if&nbsp;(!this._fullCalendar)&nbsp;{<a name="line_1188"></a></li>
<li id="line_1189" class="odd"><span class="lineNumber">&nbsp;1189&nbsp;</span>		return&nbsp;oldMomentProto.isSame.apply(this,&nbsp;arguments);<a name="line_1189"></a></li>
<li id="line_1190" class="even"><span class="lineNumber">&nbsp;1190&nbsp;</span>	}<a name="line_1190"></a></li>
<li id="line_1191" class="odd"><span class="lineNumber">&nbsp;1191&nbsp;</span><a name="line_1191"></a></li>
<li id="line_1192" class="even"><span class="lineNumber">&nbsp;1192&nbsp;</span>	if&nbsp;(units)&nbsp;{<a name="line_1192"></a></li>
<li id="line_1193" class="odd"><span class="lineNumber">&nbsp;1193&nbsp;</span>		a&nbsp;=&nbsp;commonlyAmbiguate([&nbsp;this,&nbsp;input&nbsp;],&nbsp;true);&nbsp;//&nbsp;normalize&nbsp;timezones&nbsp;but&nbsp;don't&nbsp;erase&nbsp;times<a name="line_1193"></a></li>
<li id="line_1194" class="even"><span class="lineNumber">&nbsp;1194&nbsp;</span>		return&nbsp;oldMomentProto.isSame.call(a[0],&nbsp;a[1],&nbsp;units);<a name="line_1194"></a></li>
<li id="line_1195" class="odd"><span class="lineNumber">&nbsp;1195&nbsp;</span>	}<a name="line_1195"></a></li>
<li id="line_1196" class="even"><span class="lineNumber">&nbsp;1196&nbsp;</span>	else&nbsp;{<a name="line_1196"></a></li>
<li id="line_1197" class="odd"><span class="lineNumber">&nbsp;1197&nbsp;</span>		input&nbsp;=&nbsp;fc.moment.parseZone(input);&nbsp;//&nbsp;normalize&nbsp;input<a name="line_1197"></a></li>
<li id="line_1198" class="even"><span class="lineNumber">&nbsp;1198&nbsp;</span>		return&nbsp;oldMomentProto.isSame.call(this,&nbsp;input)&nbsp;&amp;&amp;<a name="line_1198"></a></li>
<li id="line_1199" class="odd"><span class="lineNumber">&nbsp;1199&nbsp;</span>			Boolean(this._ambigTime)&nbsp;===&nbsp;Boolean(input._ambigTime)&nbsp;&amp;&amp;<a name="line_1199"></a></li>
<li id="line_1200" class="even"><span class="lineNumber">&nbsp;1200&nbsp;</span>			Boolean(this._ambigZone)&nbsp;===&nbsp;Boolean(input._ambigZone);<a name="line_1200"></a></li>
<li id="line_1201" class="odd"><span class="lineNumber">&nbsp;1201&nbsp;</span>	}<a name="line_1201"></a></li>
<li id="line_1202" class="even"><span class="lineNumber">&nbsp;1202&nbsp;</span>};<a name="line_1202"></a></li>
<li id="line_1203" class="odd"><span class="lineNumber">&nbsp;1203&nbsp;</span><a name="line_1203"></a></li>
<li id="line_1204" class="even"><span class="lineNumber">&nbsp;1204&nbsp;</span>//&nbsp;Make&nbsp;these&nbsp;query&nbsp;methods&nbsp;work&nbsp;with&nbsp;ambiguous&nbsp;moments<a name="line_1204"></a></li>
<li id="line_1205" class="odd"><span class="lineNumber">&nbsp;1205&nbsp;</span>$.each([<a name="line_1205"></a></li>
<li id="line_1206" class="even"><span class="lineNumber">&nbsp;1206&nbsp;</span>	'isBefore',<a name="line_1206"></a></li>
<li id="line_1207" class="odd"><span class="lineNumber">&nbsp;1207&nbsp;</span>	'isAfter'<a name="line_1207"></a></li>
<li id="line_1208" class="even"><span class="lineNumber">&nbsp;1208&nbsp;</span>],&nbsp;function(i,&nbsp;methodName)&nbsp;{<a name="line_1208"></a></li>
<li id="line_1209" class="odd"><span class="lineNumber">&nbsp;1209&nbsp;</span>	newMomentProto[methodName]&nbsp;=&nbsp;function(input,&nbsp;units)&nbsp;{<a name="line_1209"></a></li>
<li id="line_1210" class="even"><span class="lineNumber">&nbsp;1210&nbsp;</span>		var&nbsp;a;<a name="line_1210"></a></li>
<li id="line_1211" class="odd"><span class="lineNumber">&nbsp;1211&nbsp;</span><a name="line_1211"></a></li>
<li id="line_1212" class="even"><span class="lineNumber">&nbsp;1212&nbsp;</span>		//&nbsp;only&nbsp;do&nbsp;custom&nbsp;logic&nbsp;if&nbsp;this&nbsp;is&nbsp;an&nbsp;enhanced&nbsp;moment<a name="line_1212"></a></li>
<li id="line_1213" class="odd"><span class="lineNumber">&nbsp;1213&nbsp;</span>		if&nbsp;(!this._fullCalendar)&nbsp;{<a name="line_1213"></a></li>
<li id="line_1214" class="even"><span class="lineNumber">&nbsp;1214&nbsp;</span>			return&nbsp;oldMomentProto[methodName].apply(this,&nbsp;arguments);<a name="line_1214"></a></li>
<li id="line_1215" class="odd"><span class="lineNumber">&nbsp;1215&nbsp;</span>		}<a name="line_1215"></a></li>
<li id="line_1216" class="even"><span class="lineNumber">&nbsp;1216&nbsp;</span><a name="line_1216"></a></li>
<li id="line_1217" class="odd"><span class="lineNumber">&nbsp;1217&nbsp;</span>		a&nbsp;=&nbsp;commonlyAmbiguate([&nbsp;this,&nbsp;input&nbsp;]);<a name="line_1217"></a></li>
<li id="line_1218" class="even"><span class="lineNumber">&nbsp;1218&nbsp;</span>		return&nbsp;oldMomentProto[methodName].call(a[0],&nbsp;a[1],&nbsp;units);<a name="line_1218"></a></li>
<li id="line_1219" class="odd"><span class="lineNumber">&nbsp;1219&nbsp;</span>	};<a name="line_1219"></a></li>
<li id="line_1220" class="even"><span class="lineNumber">&nbsp;1220&nbsp;</span>});<a name="line_1220"></a></li>
<li id="line_1221" class="odd"><span class="lineNumber">&nbsp;1221&nbsp;</span><a name="line_1221"></a></li>
<li id="line_1222" class="even"><span class="lineNumber">&nbsp;1222&nbsp;</span><a name="line_1222"></a></li>
<li id="line_1223" class="odd"><span class="lineNumber">&nbsp;1223&nbsp;</span>//&nbsp;Misc&nbsp;Internals<a name="line_1223"></a></li>
<li id="line_1224" class="even"><span class="lineNumber">&nbsp;1224&nbsp;</span>//&nbsp;-------------------------------------------------------------------------------------------------<a name="line_1224"></a></li>
<li id="line_1225" class="odd"><span class="lineNumber">&nbsp;1225&nbsp;</span><a name="line_1225"></a></li>
<li id="line_1226" class="even"><span class="lineNumber">&nbsp;1226&nbsp;</span>//&nbsp;given&nbsp;an&nbsp;array&nbsp;of&nbsp;moment-like&nbsp;inputs,&nbsp;return&nbsp;a&nbsp;parallel&nbsp;array&nbsp;w/&nbsp;moments&nbsp;similarly&nbsp;ambiguated.<a name="line_1226"></a></li>
<li id="line_1227" class="odd"><span class="lineNumber">&nbsp;1227&nbsp;</span>//&nbsp;for&nbsp;example,&nbsp;of&nbsp;one&nbsp;moment&nbsp;has&nbsp;ambig&nbsp;time,&nbsp;but&nbsp;not&nbsp;others,&nbsp;all&nbsp;moments&nbsp;will&nbsp;have&nbsp;their&nbsp;time&nbsp;stripped.<a name="line_1227"></a></li>
<li id="line_1228" class="even"><span class="lineNumber">&nbsp;1228&nbsp;</span>//&nbsp;set&nbsp;`preserveTime`&nbsp;to&nbsp;`true`&nbsp;to&nbsp;keep&nbsp;times,&nbsp;but&nbsp;only&nbsp;normalize&nbsp;zone&nbsp;ambiguity.<a name="line_1228"></a></li>
<li id="line_1229" class="odd"><span class="lineNumber">&nbsp;1229&nbsp;</span>//&nbsp;returns&nbsp;the&nbsp;original&nbsp;moments&nbsp;if&nbsp;no&nbsp;modifications&nbsp;are&nbsp;necessary.<a name="line_1229"></a></li>
<li id="line_1230" class="even"><span class="lineNumber">&nbsp;1230&nbsp;</span>function&nbsp;commonlyAmbiguate(inputs,&nbsp;preserveTime)&nbsp;{<a name="line_1230"></a></li>
<li id="line_1231" class="odd"><span class="lineNumber">&nbsp;1231&nbsp;</span>	var&nbsp;anyAmbigTime&nbsp;=&nbsp;false;<a name="line_1231"></a></li>
<li id="line_1232" class="even"><span class="lineNumber">&nbsp;1232&nbsp;</span>	var&nbsp;anyAmbigZone&nbsp;=&nbsp;false;<a name="line_1232"></a></li>
<li id="line_1233" class="odd"><span class="lineNumber">&nbsp;1233&nbsp;</span>	var&nbsp;len&nbsp;=&nbsp;inputs.length;<a name="line_1233"></a></li>
<li id="line_1234" class="even"><span class="lineNumber">&nbsp;1234&nbsp;</span>	var&nbsp;moms&nbsp;=&nbsp;[];<a name="line_1234"></a></li>
<li id="line_1235" class="odd"><span class="lineNumber">&nbsp;1235&nbsp;</span>	var&nbsp;i,&nbsp;mom;<a name="line_1235"></a></li>
<li id="line_1236" class="even"><span class="lineNumber">&nbsp;1236&nbsp;</span><a name="line_1236"></a></li>
<li id="line_1237" class="odd"><span class="lineNumber">&nbsp;1237&nbsp;</span>	//&nbsp;parse&nbsp;inputs&nbsp;into&nbsp;real&nbsp;moments&nbsp;and&nbsp;query&nbsp;their&nbsp;ambig&nbsp;flags<a name="line_1237"></a></li>
<li id="line_1238" class="even"><span class="lineNumber">&nbsp;1238&nbsp;</span>	for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;len;&nbsp;i++)&nbsp;{<a name="line_1238"></a></li>
<li id="line_1239" class="odd"><span class="lineNumber">&nbsp;1239&nbsp;</span>		mom&nbsp;=&nbsp;inputs[i];<a name="line_1239"></a></li>
<li id="line_1240" class="even"><span class="lineNumber">&nbsp;1240&nbsp;</span>		if&nbsp;(!moment.isMoment(mom))&nbsp;{<a name="line_1240"></a></li>
<li id="line_1241" class="odd"><span class="lineNumber">&nbsp;1241&nbsp;</span>			mom&nbsp;=&nbsp;fc.moment.parseZone(mom);<a name="line_1241"></a></li>
<li id="line_1242" class="even"><span class="lineNumber">&nbsp;1242&nbsp;</span>		}<a name="line_1242"></a></li>
<li id="line_1243" class="odd"><span class="lineNumber">&nbsp;1243&nbsp;</span>		anyAmbigTime&nbsp;=&nbsp;anyAmbigTime&nbsp;||&nbsp;mom._ambigTime;<a name="line_1243"></a></li>
<li id="line_1244" class="even"><span class="lineNumber">&nbsp;1244&nbsp;</span>		anyAmbigZone&nbsp;=&nbsp;anyAmbigZone&nbsp;||&nbsp;mom._ambigZone;<a name="line_1244"></a></li>
<li id="line_1245" class="odd"><span class="lineNumber">&nbsp;1245&nbsp;</span>		moms.push(mom);<a name="line_1245"></a></li>
<li id="line_1246" class="even"><span class="lineNumber">&nbsp;1246&nbsp;</span>	}<a name="line_1246"></a></li>
<li id="line_1247" class="odd"><span class="lineNumber">&nbsp;1247&nbsp;</span><a name="line_1247"></a></li>
<li id="line_1248" class="even"><span class="lineNumber">&nbsp;1248&nbsp;</span>	//&nbsp;strip&nbsp;each&nbsp;moment&nbsp;down&nbsp;to&nbsp;lowest&nbsp;common&nbsp;ambiguity<a name="line_1248"></a></li>
<li id="line_1249" class="odd"><span class="lineNumber">&nbsp;1249&nbsp;</span>	//&nbsp;use&nbsp;clones&nbsp;to&nbsp;avoid&nbsp;modifying&nbsp;the&nbsp;original&nbsp;moments<a name="line_1249"></a></li>
<li id="line_1250" class="even"><span class="lineNumber">&nbsp;1250&nbsp;</span>	for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;len;&nbsp;i++)&nbsp;{<a name="line_1250"></a></li>
<li id="line_1251" class="odd"><span class="lineNumber">&nbsp;1251&nbsp;</span>		mom&nbsp;=&nbsp;moms[i];<a name="line_1251"></a></li>
<li id="line_1252" class="even"><span class="lineNumber">&nbsp;1252&nbsp;</span>		if&nbsp;(!preserveTime&nbsp;&amp;&amp;&nbsp;anyAmbigTime&nbsp;&amp;&amp;&nbsp;!mom._ambigTime)&nbsp;{<a name="line_1252"></a></li>
<li id="line_1253" class="odd"><span class="lineNumber">&nbsp;1253&nbsp;</span>			moms[i]&nbsp;=&nbsp;mom.clone().stripTime();<a name="line_1253"></a></li>
<li id="line_1254" class="even"><span class="lineNumber">&nbsp;1254&nbsp;</span>		}<a name="line_1254"></a></li>
<li id="line_1255" class="odd"><span class="lineNumber">&nbsp;1255&nbsp;</span>		else&nbsp;if&nbsp;(anyAmbigZone&nbsp;&amp;&amp;&nbsp;!mom._ambigZone)&nbsp;{<a name="line_1255"></a></li>
<li id="line_1256" class="even"><span class="lineNumber">&nbsp;1256&nbsp;</span>			moms[i]&nbsp;=&nbsp;mom.clone().stripZone();<a name="line_1256"></a></li>
<li id="line_1257" class="odd"><span class="lineNumber">&nbsp;1257&nbsp;</span>		}<a name="line_1257"></a></li>
<li id="line_1258" class="even"><span class="lineNumber">&nbsp;1258&nbsp;</span>	}<a name="line_1258"></a></li>
<li id="line_1259" class="odd"><span class="lineNumber">&nbsp;1259&nbsp;</span><a name="line_1259"></a></li>
<li id="line_1260" class="even"><span class="lineNumber">&nbsp;1260&nbsp;</span>	return&nbsp;moms;<a name="line_1260"></a></li>
<li id="line_1261" class="odd"><span class="lineNumber">&nbsp;1261&nbsp;</span>}<a name="line_1261"></a></li>
<li id="line_1262" class="even"><span class="lineNumber">&nbsp;1262&nbsp;</span><a name="line_1262"></a></li>
<li id="line_1263" class="odd"><span class="lineNumber">&nbsp;1263&nbsp;</span>//&nbsp;Transfers&nbsp;all&nbsp;the&nbsp;flags&nbsp;related&nbsp;to&nbsp;ambiguous&nbsp;time/zone&nbsp;from&nbsp;the&nbsp;`src`&nbsp;moment&nbsp;to&nbsp;the&nbsp;`dest`&nbsp;moment<a name="line_1263"></a></li>
<li id="line_1264" class="even"><span class="lineNumber">&nbsp;1264&nbsp;</span>//&nbsp;TODO:&nbsp;look&nbsp;into&nbsp;moment.momentProperties&nbsp;for&nbsp;this.<a name="line_1264"></a></li>
<li id="line_1265" class="odd"><span class="lineNumber">&nbsp;1265&nbsp;</span>function&nbsp;transferAmbigs(src,&nbsp;dest)&nbsp;{<a name="line_1265"></a></li>
<li id="line_1266" class="even"><span class="lineNumber">&nbsp;1266&nbsp;</span>	if&nbsp;(src._ambigTime)&nbsp;{<a name="line_1266"></a></li>
<li id="line_1267" class="odd"><span class="lineNumber">&nbsp;1267&nbsp;</span>		dest._ambigTime&nbsp;=&nbsp;true;<a name="line_1267"></a></li>
<li id="line_1268" class="even"><span class="lineNumber">&nbsp;1268&nbsp;</span>	}<a name="line_1268"></a></li>
<li id="line_1269" class="odd"><span class="lineNumber">&nbsp;1269&nbsp;</span>	else&nbsp;if&nbsp;(dest._ambigTime)&nbsp;{<a name="line_1269"></a></li>
<li id="line_1270" class="even"><span class="lineNumber">&nbsp;1270&nbsp;</span>		dest._ambigTime&nbsp;=&nbsp;false;<a name="line_1270"></a></li>
<li id="line_1271" class="odd"><span class="lineNumber">&nbsp;1271&nbsp;</span>	}<a name="line_1271"></a></li>
<li id="line_1272" class="even"><span class="lineNumber">&nbsp;1272&nbsp;</span><a name="line_1272"></a></li>
<li id="line_1273" class="odd"><span class="lineNumber">&nbsp;1273&nbsp;</span>	if&nbsp;(src._ambigZone)&nbsp;{<a name="line_1273"></a></li>
<li id="line_1274" class="even"><span class="lineNumber">&nbsp;1274&nbsp;</span>		dest._ambigZone&nbsp;=&nbsp;true;<a name="line_1274"></a></li>
<li id="line_1275" class="odd"><span class="lineNumber">&nbsp;1275&nbsp;</span>	}<a name="line_1275"></a></li>
<li id="line_1276" class="even"><span class="lineNumber">&nbsp;1276&nbsp;</span>	else&nbsp;if&nbsp;(dest._ambigZone)&nbsp;{<a name="line_1276"></a></li>
<li id="line_1277" class="odd"><span class="lineNumber">&nbsp;1277&nbsp;</span>		dest._ambigZone&nbsp;=&nbsp;false;<a name="line_1277"></a></li>
<li id="line_1278" class="even"><span class="lineNumber">&nbsp;1278&nbsp;</span>	}<a name="line_1278"></a></li>
<li id="line_1279" class="odd"><span class="lineNumber">&nbsp;1279&nbsp;</span>}<a name="line_1279"></a></li>
<li id="line_1280" class="even"><span class="lineNumber">&nbsp;1280&nbsp;</span><a name="line_1280"></a></li>
<li id="line_1281" class="odd"><span class="lineNumber">&nbsp;1281&nbsp;</span><a name="line_1281"></a></li>
<li id="line_1282" class="even"><span class="lineNumber">&nbsp;1282&nbsp;</span>//&nbsp;Sets&nbsp;the&nbsp;year/month/date/etc&nbsp;values&nbsp;of&nbsp;the&nbsp;moment&nbsp;from&nbsp;the&nbsp;given&nbsp;array.<a name="line_1282"></a></li>
<li id="line_1283" class="odd"><span class="lineNumber">&nbsp;1283&nbsp;</span>//&nbsp;Inefficient&nbsp;because&nbsp;it&nbsp;calls&nbsp;each&nbsp;individual&nbsp;setter.<a name="line_1283"></a></li>
<li id="line_1284" class="even"><span class="lineNumber">&nbsp;1284&nbsp;</span>function&nbsp;setMomentValues(mom,&nbsp;a)&nbsp;{<a name="line_1284"></a></li>
<li id="line_1285" class="odd"><span class="lineNumber">&nbsp;1285&nbsp;</span>	mom.year(a[0]&nbsp;||&nbsp;0)<a name="line_1285"></a></li>
<li id="line_1286" class="even"><span class="lineNumber">&nbsp;1286&nbsp;</span>		.month(a[1]&nbsp;||&nbsp;0)<a name="line_1286"></a></li>
<li id="line_1287" class="odd"><span class="lineNumber">&nbsp;1287&nbsp;</span>		.date(a[2]&nbsp;||&nbsp;0)<a name="line_1287"></a></li>
<li id="line_1288" class="even"><span class="lineNumber">&nbsp;1288&nbsp;</span>		.hours(a[3]&nbsp;||&nbsp;0)<a name="line_1288"></a></li>
<li id="line_1289" class="odd"><span class="lineNumber">&nbsp;1289&nbsp;</span>		.minutes(a[4]&nbsp;||&nbsp;0)<a name="line_1289"></a></li>
<li id="line_1290" class="even"><span class="lineNumber">&nbsp;1290&nbsp;</span>		.seconds(a[5]&nbsp;||&nbsp;0)<a name="line_1290"></a></li>
<li id="line_1291" class="odd"><span class="lineNumber">&nbsp;1291&nbsp;</span>		.milliseconds(a[6]&nbsp;||&nbsp;0);<a name="line_1291"></a></li>
<li id="line_1292" class="even"><span class="lineNumber">&nbsp;1292&nbsp;</span>}<a name="line_1292"></a></li>
<li id="line_1293" class="odd"><span class="lineNumber">&nbsp;1293&nbsp;</span><a name="line_1293"></a></li>
<li id="line_1294" class="even"><span class="lineNumber">&nbsp;1294&nbsp;</span>//&nbsp;Can&nbsp;we&nbsp;set&nbsp;the&nbsp;moment's&nbsp;internal&nbsp;date&nbsp;directly?<a name="line_1294"></a></li>
<li id="line_1295" class="odd"><span class="lineNumber">&nbsp;1295&nbsp;</span>allowValueOptimization&nbsp;=&nbsp;'_d'&nbsp;in&nbsp;moment()&nbsp;&amp;&amp;&nbsp;'updateOffset'&nbsp;in&nbsp;moment;<a name="line_1295"></a></li>
<li id="line_1296" class="even"><span class="lineNumber">&nbsp;1296&nbsp;</span><a name="line_1296"></a></li>
<li id="line_1297" class="odd"><span class="lineNumber">&nbsp;1297&nbsp;</span>//&nbsp;Utility&nbsp;function.&nbsp;Accepts&nbsp;a&nbsp;moment&nbsp;and&nbsp;an&nbsp;array&nbsp;of&nbsp;the&nbsp;UTC&nbsp;year/month/date/etc&nbsp;values&nbsp;to&nbsp;set.<a name="line_1297"></a></li>
<li id="line_1298" class="even"><span class="lineNumber">&nbsp;1298&nbsp;</span>//&nbsp;Assumes&nbsp;the&nbsp;given&nbsp;moment&nbsp;is&nbsp;already&nbsp;in&nbsp;UTC&nbsp;mode.<a name="line_1298"></a></li>
<li id="line_1299" class="odd"><span class="lineNumber">&nbsp;1299&nbsp;</span>setUTCValues&nbsp;=&nbsp;allowValueOptimization&nbsp;?&nbsp;function(mom,&nbsp;a)&nbsp;{<a name="line_1299"></a></li>
<li id="line_1300" class="even"><span class="lineNumber">&nbsp;1300&nbsp;</span>	//&nbsp;simlate&nbsp;what&nbsp;moment's&nbsp;accessors&nbsp;do<a name="line_1300"></a></li>
<li id="line_1301" class="odd"><span class="lineNumber">&nbsp;1301&nbsp;</span>	mom._d.setTime(Date.UTC.apply(Date,&nbsp;a));<a name="line_1301"></a></li>
<li id="line_1302" class="even"><span class="lineNumber">&nbsp;1302&nbsp;</span>	moment.updateOffset(mom,&nbsp;false);&nbsp;//&nbsp;keepTime=false<a name="line_1302"></a></li>
<li id="line_1303" class="odd"><span class="lineNumber">&nbsp;1303&nbsp;</span>}&nbsp;:&nbsp;setMomentValues;<a name="line_1303"></a></li>
<li id="line_1304" class="even"><span class="lineNumber">&nbsp;1304&nbsp;</span><a name="line_1304"></a></li>
<li id="line_1305" class="odd"><span class="lineNumber">&nbsp;1305&nbsp;</span>//&nbsp;Utility&nbsp;function.&nbsp;Accepts&nbsp;a&nbsp;moment&nbsp;and&nbsp;an&nbsp;array&nbsp;of&nbsp;the&nbsp;local&nbsp;year/month/date/etc&nbsp;values&nbsp;to&nbsp;set.<a name="line_1305"></a></li>
<li id="line_1306" class="even"><span class="lineNumber">&nbsp;1306&nbsp;</span>//&nbsp;Assumes&nbsp;the&nbsp;given&nbsp;moment&nbsp;is&nbsp;already&nbsp;in&nbsp;local&nbsp;mode.<a name="line_1306"></a></li>
<li id="line_1307" class="odd"><span class="lineNumber">&nbsp;1307&nbsp;</span>setLocalValues&nbsp;=&nbsp;allowValueOptimization&nbsp;?&nbsp;function(mom,&nbsp;a)&nbsp;{<a name="line_1307"></a></li>
<li id="line_1308" class="even"><span class="lineNumber">&nbsp;1308&nbsp;</span>	//&nbsp;simlate&nbsp;what&nbsp;moment's&nbsp;accessors&nbsp;do<a name="line_1308"></a></li>
<li id="line_1309" class="odd"><span class="lineNumber">&nbsp;1309&nbsp;</span>	mom._d.setTime(+new&nbsp;Date(&nbsp;//&nbsp;FYI,&nbsp;there&nbsp;is&nbsp;now&nbsp;way&nbsp;to&nbsp;apply&nbsp;an&nbsp;array&nbsp;of&nbsp;args&nbsp;to&nbsp;a&nbsp;constructor<a name="line_1309"></a></li>
<li id="line_1310" class="even"><span class="lineNumber">&nbsp;1310&nbsp;</span>		a[0]&nbsp;||&nbsp;0,<a name="line_1310"></a></li>
<li id="line_1311" class="odd"><span class="lineNumber">&nbsp;1311&nbsp;</span>		a[1]&nbsp;||&nbsp;0,<a name="line_1311"></a></li>
<li id="line_1312" class="even"><span class="lineNumber">&nbsp;1312&nbsp;</span>		a[2]&nbsp;||&nbsp;0,<a name="line_1312"></a></li>
<li id="line_1313" class="odd"><span class="lineNumber">&nbsp;1313&nbsp;</span>		a[3]&nbsp;||&nbsp;0,<a name="line_1313"></a></li>
<li id="line_1314" class="even"><span class="lineNumber">&nbsp;1314&nbsp;</span>		a[4]&nbsp;||&nbsp;0,<a name="line_1314"></a></li>
<li id="line_1315" class="odd"><span class="lineNumber">&nbsp;1315&nbsp;</span>		a[5]&nbsp;||&nbsp;0,<a name="line_1315"></a></li>
<li id="line_1316" class="even"><span class="lineNumber">&nbsp;1316&nbsp;</span>		a[6]&nbsp;||&nbsp;0<a name="line_1316"></a></li>
<li id="line_1317" class="odd"><span class="lineNumber">&nbsp;1317&nbsp;</span>	));<a name="line_1317"></a></li>
<li id="line_1318" class="even"><span class="lineNumber">&nbsp;1318&nbsp;</span>	moment.updateOffset(mom,&nbsp;false);&nbsp;//&nbsp;keepTime=false<a name="line_1318"></a></li>
<li id="line_1319" class="odd"><span class="lineNumber">&nbsp;1319&nbsp;</span>}&nbsp;:&nbsp;setMomentValues;<a name="line_1319"></a></li>
<li id="line_1320" class="even"><span class="lineNumber">&nbsp;1320&nbsp;</span><a name="line_1320"></a></li>
<li id="line_1321" class="odd"><span class="lineNumber">&nbsp;1321&nbsp;</span>;;<a name="line_1321"></a></li>
<li id="line_1322" class="even"><span class="lineNumber">&nbsp;1322&nbsp;</span><a name="line_1322"></a></li>
<li id="line_1323" class="odd"><span class="lineNumber">&nbsp;1323&nbsp;</span>//&nbsp;Single&nbsp;Date&nbsp;Formatting<a name="line_1323"></a></li>
<li id="line_1324" class="even"><span class="lineNumber">&nbsp;1324&nbsp;</span>//&nbsp;-------------------------------------------------------------------------------------------------<a name="line_1324"></a></li>
<li id="line_1325" class="odd"><span class="lineNumber">&nbsp;1325&nbsp;</span><a name="line_1325"></a></li>
<li id="line_1326" class="even"><span class="lineNumber">&nbsp;1326&nbsp;</span><a name="line_1326"></a></li>
<li id="line_1327" class="odd"><span class="lineNumber">&nbsp;1327&nbsp;</span>//&nbsp;call&nbsp;this&nbsp;if&nbsp;you&nbsp;want&nbsp;Moment's&nbsp;original&nbsp;format&nbsp;method&nbsp;to&nbsp;be&nbsp;used<a name="line_1327"></a></li>
<li id="line_1328" class="even"><span class="lineNumber">&nbsp;1328&nbsp;</span>function&nbsp;oldMomentFormat(mom,&nbsp;formatStr)&nbsp;{<a name="line_1328"></a></li>
<li id="line_1329" class="odd"><span class="lineNumber">&nbsp;1329&nbsp;</span>	return&nbsp;oldMomentProto.format.call(mom,&nbsp;formatStr);&nbsp;//&nbsp;oldMomentProto&nbsp;defined&nbsp;in&nbsp;moment-ext.js<a name="line_1329"></a></li>
<li id="line_1330" class="even"><span class="lineNumber">&nbsp;1330&nbsp;</span>}<a name="line_1330"></a></li>
<li id="line_1331" class="odd"><span class="lineNumber">&nbsp;1331&nbsp;</span><a name="line_1331"></a></li>
<li id="line_1332" class="even"><span class="lineNumber">&nbsp;1332&nbsp;</span><a name="line_1332"></a></li>
<li id="line_1333" class="odd"><span class="lineNumber">&nbsp;1333&nbsp;</span>//&nbsp;Formats&nbsp;`date`&nbsp;with&nbsp;a&nbsp;Moment&nbsp;formatting&nbsp;string,&nbsp;but&nbsp;allow&nbsp;our&nbsp;non-zero&nbsp;areas&nbsp;and<a name="line_1333"></a></li>
<li id="line_1334" class="even"><span class="lineNumber">&nbsp;1334&nbsp;</span>//&nbsp;additional&nbsp;token.<a name="line_1334"></a></li>
<li id="line_1335" class="odd"><span class="lineNumber">&nbsp;1335&nbsp;</span>function&nbsp;formatDate(date,&nbsp;formatStr)&nbsp;{<a name="line_1335"></a></li>
<li id="line_1336" class="even"><span class="lineNumber">&nbsp;1336&nbsp;</span>	return&nbsp;formatDateWithChunks(date,&nbsp;getFormatStringChunks(formatStr));<a name="line_1336"></a></li>
<li id="line_1337" class="odd"><span class="lineNumber">&nbsp;1337&nbsp;</span>}<a name="line_1337"></a></li>
<li id="line_1338" class="even"><span class="lineNumber">&nbsp;1338&nbsp;</span><a name="line_1338"></a></li>
<li id="line_1339" class="odd"><span class="lineNumber">&nbsp;1339&nbsp;</span><a name="line_1339"></a></li>
<li id="line_1340" class="even"><span class="lineNumber">&nbsp;1340&nbsp;</span>function&nbsp;formatDateWithChunks(date,&nbsp;chunks)&nbsp;{<a name="line_1340"></a></li>
<li id="line_1341" class="odd"><span class="lineNumber">&nbsp;1341&nbsp;</span>	var&nbsp;s&nbsp;=&nbsp;'';<a name="line_1341"></a></li>
<li id="line_1342" class="even"><span class="lineNumber">&nbsp;1342&nbsp;</span>	var&nbsp;i;<a name="line_1342"></a></li>
<li id="line_1343" class="odd"><span class="lineNumber">&nbsp;1343&nbsp;</span><a name="line_1343"></a></li>
<li id="line_1344" class="even"><span class="lineNumber">&nbsp;1344&nbsp;</span>	for&nbsp;(i=0;&nbsp;i&lt;chunks.length;&nbsp;i++)&nbsp;{<a name="line_1344"></a></li>
<li id="line_1345" class="odd"><span class="lineNumber">&nbsp;1345&nbsp;</span>		s&nbsp;+=&nbsp;formatDateWithChunk(date,&nbsp;chunks[i]);<a name="line_1345"></a></li>
<li id="line_1346" class="even"><span class="lineNumber">&nbsp;1346&nbsp;</span>	}<a name="line_1346"></a></li>
<li id="line_1347" class="odd"><span class="lineNumber">&nbsp;1347&nbsp;</span><a name="line_1347"></a></li>
<li id="line_1348" class="even"><span class="lineNumber">&nbsp;1348&nbsp;</span>	return&nbsp;s;<a name="line_1348"></a></li>
<li id="line_1349" class="odd"><span class="lineNumber">&nbsp;1349&nbsp;</span>}<a name="line_1349"></a></li>
<li id="line_1350" class="even"><span class="lineNumber">&nbsp;1350&nbsp;</span><a name="line_1350"></a></li>
<li id="line_1351" class="odd"><span class="lineNumber">&nbsp;1351&nbsp;</span><a name="line_1351"></a></li>
<li id="line_1352" class="even"><span class="lineNumber">&nbsp;1352&nbsp;</span>//&nbsp;addition&nbsp;formatting&nbsp;tokens&nbsp;we&nbsp;want&nbsp;recognized<a name="line_1352"></a></li>
<li id="line_1353" class="odd"><span class="lineNumber">&nbsp;1353&nbsp;</span>var&nbsp;tokenOverrides&nbsp;=&nbsp;{<a name="line_1353"></a></li>
<li id="line_1354" class="even"><span class="lineNumber">&nbsp;1354&nbsp;</span>	t:&nbsp;function(date)&nbsp;{&nbsp;//&nbsp;"a"&nbsp;or&nbsp;"p"<a name="line_1354"></a></li>
<li id="line_1355" class="odd"><span class="lineNumber">&nbsp;1355&nbsp;</span>		return&nbsp;oldMomentFormat(date,&nbsp;'a').charAt(0);<a name="line_1355"></a></li>
<li id="line_1356" class="even"><span class="lineNumber">&nbsp;1356&nbsp;</span>	},<a name="line_1356"></a></li>
<li id="line_1357" class="odd"><span class="lineNumber">&nbsp;1357&nbsp;</span>	T:&nbsp;function(date)&nbsp;{&nbsp;//&nbsp;"A"&nbsp;or&nbsp;"P"<a name="line_1357"></a></li>
<li id="line_1358" class="even"><span class="lineNumber">&nbsp;1358&nbsp;</span>		return&nbsp;oldMomentFormat(date,&nbsp;'A').charAt(0);<a name="line_1358"></a></li>
<li id="line_1359" class="odd"><span class="lineNumber">&nbsp;1359&nbsp;</span>	}<a name="line_1359"></a></li>
<li id="line_1360" class="even"><span class="lineNumber">&nbsp;1360&nbsp;</span>};<a name="line_1360"></a></li>
<li id="line_1361" class="odd"><span class="lineNumber">&nbsp;1361&nbsp;</span><a name="line_1361"></a></li>
<li id="line_1362" class="even"><span class="lineNumber">&nbsp;1362&nbsp;</span><a name="line_1362"></a></li>
<li id="line_1363" class="odd"><span class="lineNumber">&nbsp;1363&nbsp;</span>function&nbsp;formatDateWithChunk(date,&nbsp;chunk)&nbsp;{<a name="line_1363"></a></li>
<li id="line_1364" class="even"><span class="lineNumber">&nbsp;1364&nbsp;</span>	var&nbsp;token;<a name="line_1364"></a></li>
<li id="line_1365" class="odd"><span class="lineNumber">&nbsp;1365&nbsp;</span>	var&nbsp;maybeStr;<a name="line_1365"></a></li>
<li id="line_1366" class="even"><span class="lineNumber">&nbsp;1366&nbsp;</span><a name="line_1366"></a></li>
<li id="line_1367" class="odd"><span class="lineNumber">&nbsp;1367&nbsp;</span>	if&nbsp;(typeof&nbsp;chunk&nbsp;===&nbsp;'string')&nbsp;{&nbsp;//&nbsp;a&nbsp;literal&nbsp;string<a name="line_1367"></a></li>
<li id="line_1368" class="even"><span class="lineNumber">&nbsp;1368&nbsp;</span>		return&nbsp;chunk;<a name="line_1368"></a></li>
<li id="line_1369" class="odd"><span class="lineNumber">&nbsp;1369&nbsp;</span>	}<a name="line_1369"></a></li>
<li id="line_1370" class="even"><span class="lineNumber">&nbsp;1370&nbsp;</span>	else&nbsp;if&nbsp;((token&nbsp;=&nbsp;chunk.token))&nbsp;{&nbsp;//&nbsp;a&nbsp;token,&nbsp;like&nbsp;"YYYY"<a name="line_1370"></a></li>
<li id="line_1371" class="odd"><span class="lineNumber">&nbsp;1371&nbsp;</span>		if&nbsp;(tokenOverrides[token])&nbsp;{<a name="line_1371"></a></li>
<li id="line_1372" class="even"><span class="lineNumber">&nbsp;1372&nbsp;</span>			return&nbsp;tokenOverrides[token](date);&nbsp;//&nbsp;use&nbsp;our&nbsp;custom&nbsp;token<a name="line_1372"></a></li>
<li id="line_1373" class="odd"><span class="lineNumber">&nbsp;1373&nbsp;</span>		}<a name="line_1373"></a></li>
<li id="line_1374" class="even"><span class="lineNumber">&nbsp;1374&nbsp;</span>		return&nbsp;oldMomentFormat(date,&nbsp;token);<a name="line_1374"></a></li>
<li id="line_1375" class="odd"><span class="lineNumber">&nbsp;1375&nbsp;</span>	}<a name="line_1375"></a></li>
<li id="line_1376" class="even"><span class="lineNumber">&nbsp;1376&nbsp;</span>	else&nbsp;if&nbsp;(chunk.maybe)&nbsp;{&nbsp;//&nbsp;a&nbsp;grouping&nbsp;of&nbsp;other&nbsp;chunks&nbsp;that&nbsp;must&nbsp;be&nbsp;non-zero<a name="line_1376"></a></li>
<li id="line_1377" class="odd"><span class="lineNumber">&nbsp;1377&nbsp;</span>		maybeStr&nbsp;=&nbsp;formatDateWithChunks(date,&nbsp;chunk.maybe);<a name="line_1377"></a></li>
<li id="line_1378" class="even"><span class="lineNumber">&nbsp;1378&nbsp;</span>		if&nbsp;(maybeStr.match(/[1-9]/))&nbsp;{<a name="line_1378"></a></li>
<li id="line_1379" class="odd"><span class="lineNumber">&nbsp;1379&nbsp;</span>			return&nbsp;maybeStr;<a name="line_1379"></a></li>
<li id="line_1380" class="even"><span class="lineNumber">&nbsp;1380&nbsp;</span>		}<a name="line_1380"></a></li>
<li id="line_1381" class="odd"><span class="lineNumber">&nbsp;1381&nbsp;</span>	}<a name="line_1381"></a></li>
<li id="line_1382" class="even"><span class="lineNumber">&nbsp;1382&nbsp;</span><a name="line_1382"></a></li>
<li id="line_1383" class="odd"><span class="lineNumber">&nbsp;1383&nbsp;</span>	return&nbsp;'';<a name="line_1383"></a></li>
<li id="line_1384" class="even"><span class="lineNumber">&nbsp;1384&nbsp;</span>}<a name="line_1384"></a></li>
<li id="line_1385" class="odd"><span class="lineNumber">&nbsp;1385&nbsp;</span><a name="line_1385"></a></li>
<li id="line_1386" class="even"><span class="lineNumber">&nbsp;1386&nbsp;</span><a name="line_1386"></a></li>
<li id="line_1387" class="odd"><span class="lineNumber">&nbsp;1387&nbsp;</span>//&nbsp;Date&nbsp;Range&nbsp;Formatting<a name="line_1387"></a></li>
<li id="line_1388" class="even"><span class="lineNumber">&nbsp;1388&nbsp;</span>//&nbsp;-------------------------------------------------------------------------------------------------<a name="line_1388"></a></li>
<li id="line_1389" class="odd"><span class="lineNumber">&nbsp;1389&nbsp;</span>//&nbsp;TODO:&nbsp;make&nbsp;it&nbsp;work&nbsp;with&nbsp;timezone&nbsp;offset<a name="line_1389"></a></li>
<li id="line_1390" class="even"><span class="lineNumber">&nbsp;1390&nbsp;</span><a name="line_1390"></a></li>
<li id="line_1391" class="odd"><span class="lineNumber">&nbsp;1391&nbsp;</span>//&nbsp;Using&nbsp;a&nbsp;formatting&nbsp;string&nbsp;meant&nbsp;for&nbsp;a&nbsp;single&nbsp;date,&nbsp;generate&nbsp;a&nbsp;range&nbsp;string,&nbsp;like<a name="line_1391"></a></li>
<li id="line_1392" class="even"><span class="lineNumber">&nbsp;1392&nbsp;</span>//&nbsp;"Sep&nbsp;2&nbsp;-&nbsp;9&nbsp;2013",&nbsp;that&nbsp;intelligently&nbsp;inserts&nbsp;a&nbsp;separator&nbsp;where&nbsp;the&nbsp;dates&nbsp;differ.<a name="line_1392"></a></li>
<li id="line_1393" class="odd"><span class="lineNumber">&nbsp;1393&nbsp;</span>//&nbsp;If&nbsp;the&nbsp;dates&nbsp;are&nbsp;the&nbsp;same&nbsp;as&nbsp;far&nbsp;as&nbsp;the&nbsp;format&nbsp;string&nbsp;is&nbsp;concerned,&nbsp;just&nbsp;return&nbsp;a&nbsp;single<a name="line_1393"></a></li>
<li id="line_1394" class="even"><span class="lineNumber">&nbsp;1394&nbsp;</span>//&nbsp;rendering&nbsp;of&nbsp;one&nbsp;date,&nbsp;without&nbsp;any&nbsp;separator.<a name="line_1394"></a></li>
<li id="line_1395" class="odd"><span class="lineNumber">&nbsp;1395&nbsp;</span>function&nbsp;formatRange(date1,&nbsp;date2,&nbsp;formatStr,&nbsp;separator,&nbsp;isRTL)&nbsp;{<a name="line_1395"></a></li>
<li id="line_1396" class="even"><span class="lineNumber">&nbsp;1396&nbsp;</span>	var&nbsp;localeData;<a name="line_1396"></a></li>
<li id="line_1397" class="odd"><span class="lineNumber">&nbsp;1397&nbsp;</span><a name="line_1397"></a></li>
<li id="line_1398" class="even"><span class="lineNumber">&nbsp;1398&nbsp;</span>	date1&nbsp;=&nbsp;fc.moment.parseZone(date1);<a name="line_1398"></a></li>
<li id="line_1399" class="odd"><span class="lineNumber">&nbsp;1399&nbsp;</span>	date2&nbsp;=&nbsp;fc.moment.parseZone(date2);<a name="line_1399"></a></li>
<li id="line_1400" class="even"><span class="lineNumber">&nbsp;1400&nbsp;</span><a name="line_1400"></a></li>
<li id="line_1401" class="odd"><span class="lineNumber">&nbsp;1401&nbsp;</span>	localeData&nbsp;=&nbsp;(date1.localeData&nbsp;||&nbsp;date1.lang).call(date1);&nbsp;//&nbsp;works&nbsp;with&nbsp;moment-pre-2.8<a name="line_1401"></a></li>
<li id="line_1402" class="even"><span class="lineNumber">&nbsp;1402&nbsp;</span><a name="line_1402"></a></li>
<li id="line_1403" class="odd"><span class="lineNumber">&nbsp;1403&nbsp;</span>	//&nbsp;Expand&nbsp;localized&nbsp;format&nbsp;strings,&nbsp;like&nbsp;"LL"&nbsp;-&gt;&nbsp;"MMMM&nbsp;D&nbsp;YYYY"<a name="line_1403"></a></li>
<li id="line_1404" class="even"><span class="lineNumber">&nbsp;1404&nbsp;</span>	formatStr&nbsp;=&nbsp;localeData.longDateFormat(formatStr)&nbsp;||&nbsp;formatStr;<a name="line_1404"></a></li>
<li id="line_1405" class="odd"><span class="lineNumber">&nbsp;1405&nbsp;</span>	//&nbsp;BTW,&nbsp;this&nbsp;is&nbsp;not&nbsp;important&nbsp;for&nbsp;`formatDate`&nbsp;because&nbsp;it&nbsp;is&nbsp;impossible&nbsp;to&nbsp;put&nbsp;custom&nbsp;tokens<a name="line_1405"></a></li>
<li id="line_1406" class="even"><span class="lineNumber">&nbsp;1406&nbsp;</span>	//&nbsp;or&nbsp;non-zero&nbsp;areas&nbsp;in&nbsp;Moment's&nbsp;localized&nbsp;format&nbsp;strings.<a name="line_1406"></a></li>
<li id="line_1407" class="odd"><span class="lineNumber">&nbsp;1407&nbsp;</span><a name="line_1407"></a></li>
<li id="line_1408" class="even"><span class="lineNumber">&nbsp;1408&nbsp;</span>	separator&nbsp;=&nbsp;separator&nbsp;||&nbsp;'&nbsp;-&nbsp;';<a name="line_1408"></a></li>
<li id="line_1409" class="odd"><span class="lineNumber">&nbsp;1409&nbsp;</span><a name="line_1409"></a></li>
<li id="line_1410" class="even"><span class="lineNumber">&nbsp;1410&nbsp;</span>	return&nbsp;formatRangeWithChunks(<a name="line_1410"></a></li>
<li id="line_1411" class="odd"><span class="lineNumber">&nbsp;1411&nbsp;</span>		date1,<a name="line_1411"></a></li>
<li id="line_1412" class="even"><span class="lineNumber">&nbsp;1412&nbsp;</span>		date2,<a name="line_1412"></a></li>
<li id="line_1413" class="odd"><span class="lineNumber">&nbsp;1413&nbsp;</span>		getFormatStringChunks(formatStr),<a name="line_1413"></a></li>
<li id="line_1414" class="even"><span class="lineNumber">&nbsp;1414&nbsp;</span>		separator,<a name="line_1414"></a></li>
<li id="line_1415" class="odd"><span class="lineNumber">&nbsp;1415&nbsp;</span>		isRTL<a name="line_1415"></a></li>
<li id="line_1416" class="even"><span class="lineNumber">&nbsp;1416&nbsp;</span>	);<a name="line_1416"></a></li>
<li id="line_1417" class="odd"><span class="lineNumber">&nbsp;1417&nbsp;</span>}<a name="line_1417"></a></li>
<li id="line_1418" class="even"><span class="lineNumber">&nbsp;1418&nbsp;</span>fc.formatRange&nbsp;=&nbsp;formatRange;&nbsp;//&nbsp;expose<a name="line_1418"></a></li>
<li id="line_1419" class="odd"><span class="lineNumber">&nbsp;1419&nbsp;</span><a name="line_1419"></a></li>
<li id="line_1420" class="even"><span class="lineNumber">&nbsp;1420&nbsp;</span><a name="line_1420"></a></li>
<li id="line_1421" class="odd"><span class="lineNumber">&nbsp;1421&nbsp;</span>function&nbsp;formatRangeWithChunks(date1,&nbsp;date2,&nbsp;chunks,&nbsp;separator,&nbsp;isRTL)&nbsp;{<a name="line_1421"></a></li>
<li id="line_1422" class="even"><span class="lineNumber">&nbsp;1422&nbsp;</span>	var&nbsp;chunkStr;&nbsp;//&nbsp;the&nbsp;rendering&nbsp;of&nbsp;the&nbsp;chunk<a name="line_1422"></a></li>
<li id="line_1423" class="odd"><span class="lineNumber">&nbsp;1423&nbsp;</span>	var&nbsp;leftI;<a name="line_1423"></a></li>
<li id="line_1424" class="even"><span class="lineNumber">&nbsp;1424&nbsp;</span>	var&nbsp;leftStr&nbsp;=&nbsp;'';<a name="line_1424"></a></li>
<li id="line_1425" class="odd"><span class="lineNumber">&nbsp;1425&nbsp;</span>	var&nbsp;rightI;<a name="line_1425"></a></li>
<li id="line_1426" class="even"><span class="lineNumber">&nbsp;1426&nbsp;</span>	var&nbsp;rightStr&nbsp;=&nbsp;'';<a name="line_1426"></a></li>
<li id="line_1427" class="odd"><span class="lineNumber">&nbsp;1427&nbsp;</span>	var&nbsp;middleI;<a name="line_1427"></a></li>
<li id="line_1428" class="even"><span class="lineNumber">&nbsp;1428&nbsp;</span>	var&nbsp;middleStr1&nbsp;=&nbsp;'';<a name="line_1428"></a></li>
<li id="line_1429" class="odd"><span class="lineNumber">&nbsp;1429&nbsp;</span>	var&nbsp;middleStr2&nbsp;=&nbsp;'';<a name="line_1429"></a></li>
<li id="line_1430" class="even"><span class="lineNumber">&nbsp;1430&nbsp;</span>	var&nbsp;middleStr&nbsp;=&nbsp;'';<a name="line_1430"></a></li>
<li id="line_1431" class="odd"><span class="lineNumber">&nbsp;1431&nbsp;</span><a name="line_1431"></a></li>
<li id="line_1432" class="even"><span class="lineNumber">&nbsp;1432&nbsp;</span>	//&nbsp;Start&nbsp;at&nbsp;the&nbsp;leftmost&nbsp;side&nbsp;of&nbsp;the&nbsp;formatting&nbsp;string&nbsp;and&nbsp;continue&nbsp;until&nbsp;you&nbsp;hit&nbsp;a&nbsp;token<a name="line_1432"></a></li>
<li id="line_1433" class="odd"><span class="lineNumber">&nbsp;1433&nbsp;</span>	//&nbsp;that&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;between&nbsp;dates.<a name="line_1433"></a></li>
<li id="line_1434" class="even"><span class="lineNumber">&nbsp;1434&nbsp;</span>	for&nbsp;(leftI=0;&nbsp;leftI&lt;chunks.length;&nbsp;leftI++)&nbsp;{<a name="line_1434"></a></li>
<li id="line_1435" class="odd"><span class="lineNumber">&nbsp;1435&nbsp;</span>		chunkStr&nbsp;=&nbsp;formatSimilarChunk(date1,&nbsp;date2,&nbsp;chunks[leftI]);<a name="line_1435"></a></li>
<li id="line_1436" class="even"><span class="lineNumber">&nbsp;1436&nbsp;</span>		if&nbsp;(chunkStr&nbsp;===&nbsp;false)&nbsp;{<a name="line_1436"></a></li>
<li id="line_1437" class="odd"><span class="lineNumber">&nbsp;1437&nbsp;</span>			break;<a name="line_1437"></a></li>
<li id="line_1438" class="even"><span class="lineNumber">&nbsp;1438&nbsp;</span>		}<a name="line_1438"></a></li>
<li id="line_1439" class="odd"><span class="lineNumber">&nbsp;1439&nbsp;</span>		leftStr&nbsp;+=&nbsp;chunkStr;<a name="line_1439"></a></li>
<li id="line_1440" class="even"><span class="lineNumber">&nbsp;1440&nbsp;</span>	}<a name="line_1440"></a></li>
<li id="line_1441" class="odd"><span class="lineNumber">&nbsp;1441&nbsp;</span><a name="line_1441"></a></li>
<li id="line_1442" class="even"><span class="lineNumber">&nbsp;1442&nbsp;</span>	//&nbsp;Similarly,&nbsp;start&nbsp;at&nbsp;the&nbsp;rightmost&nbsp;side&nbsp;of&nbsp;the&nbsp;formatting&nbsp;string&nbsp;and&nbsp;move&nbsp;left<a name="line_1442"></a></li>
<li id="line_1443" class="odd"><span class="lineNumber">&nbsp;1443&nbsp;</span>	for&nbsp;(rightI=chunks.length-1;&nbsp;rightI&gt;leftI;&nbsp;rightI--)&nbsp;{<a name="line_1443"></a></li>
<li id="line_1444" class="even"><span class="lineNumber">&nbsp;1444&nbsp;</span>		chunkStr&nbsp;=&nbsp;formatSimilarChunk(date1,&nbsp;date2,&nbsp;chunks[rightI]);<a name="line_1444"></a></li>
<li id="line_1445" class="odd"><span class="lineNumber">&nbsp;1445&nbsp;</span>		if&nbsp;(chunkStr&nbsp;===&nbsp;false)&nbsp;{<a name="line_1445"></a></li>
<li id="line_1446" class="even"><span class="lineNumber">&nbsp;1446&nbsp;</span>			break;<a name="line_1446"></a></li>
<li id="line_1447" class="odd"><span class="lineNumber">&nbsp;1447&nbsp;</span>		}<a name="line_1447"></a></li>
<li id="line_1448" class="even"><span class="lineNumber">&nbsp;1448&nbsp;</span>		rightStr&nbsp;=&nbsp;chunkStr&nbsp;+&nbsp;rightStr;<a name="line_1448"></a></li>
<li id="line_1449" class="odd"><span class="lineNumber">&nbsp;1449&nbsp;</span>	}<a name="line_1449"></a></li>
<li id="line_1450" class="even"><span class="lineNumber">&nbsp;1450&nbsp;</span><a name="line_1450"></a></li>
<li id="line_1451" class="odd"><span class="lineNumber">&nbsp;1451&nbsp;</span>	//&nbsp;The&nbsp;area&nbsp;in&nbsp;the&nbsp;middle&nbsp;is&nbsp;different&nbsp;for&nbsp;both&nbsp;of&nbsp;the&nbsp;dates.<a name="line_1451"></a></li>
<li id="line_1452" class="even"><span class="lineNumber">&nbsp;1452&nbsp;</span>	//&nbsp;Collect&nbsp;them&nbsp;distinctly&nbsp;so&nbsp;we&nbsp;can&nbsp;jam&nbsp;them&nbsp;together&nbsp;later.<a name="line_1452"></a></li>
<li id="line_1453" class="odd"><span class="lineNumber">&nbsp;1453&nbsp;</span>	for&nbsp;(middleI=leftI;&nbsp;middleI&lt;=rightI;&nbsp;middleI++)&nbsp;{<a name="line_1453"></a></li>
<li id="line_1454" class="even"><span class="lineNumber">&nbsp;1454&nbsp;</span>		middleStr1&nbsp;+=&nbsp;formatDateWithChunk(date1,&nbsp;chunks[middleI]);<a name="line_1454"></a></li>
<li id="line_1455" class="odd"><span class="lineNumber">&nbsp;1455&nbsp;</span>		middleStr2&nbsp;+=&nbsp;formatDateWithChunk(date2,&nbsp;chunks[middleI]);<a name="line_1455"></a></li>
<li id="line_1456" class="even"><span class="lineNumber">&nbsp;1456&nbsp;</span>	}<a name="line_1456"></a></li>
<li id="line_1457" class="odd"><span class="lineNumber">&nbsp;1457&nbsp;</span><a name="line_1457"></a></li>
<li id="line_1458" class="even"><span class="lineNumber">&nbsp;1458&nbsp;</span>	if&nbsp;(middleStr1&nbsp;||&nbsp;middleStr2)&nbsp;{<a name="line_1458"></a></li>
<li id="line_1459" class="odd"><span class="lineNumber">&nbsp;1459&nbsp;</span>		if&nbsp;(isRTL)&nbsp;{<a name="line_1459"></a></li>
<li id="line_1460" class="even"><span class="lineNumber">&nbsp;1460&nbsp;</span>			middleStr&nbsp;=&nbsp;middleStr2&nbsp;+&nbsp;separator&nbsp;+&nbsp;middleStr1;<a name="line_1460"></a></li>
<li id="line_1461" class="odd"><span class="lineNumber">&nbsp;1461&nbsp;</span>		}<a name="line_1461"></a></li>
<li id="line_1462" class="even"><span class="lineNumber">&nbsp;1462&nbsp;</span>		else&nbsp;{<a name="line_1462"></a></li>
<li id="line_1463" class="odd"><span class="lineNumber">&nbsp;1463&nbsp;</span>			middleStr&nbsp;=&nbsp;middleStr1&nbsp;+&nbsp;separator&nbsp;+&nbsp;middleStr2;<a name="line_1463"></a></li>
<li id="line_1464" class="even"><span class="lineNumber">&nbsp;1464&nbsp;</span>		}<a name="line_1464"></a></li>
<li id="line_1465" class="odd"><span class="lineNumber">&nbsp;1465&nbsp;</span>	}<a name="line_1465"></a></li>
<li id="line_1466" class="even"><span class="lineNumber">&nbsp;1466&nbsp;</span><a name="line_1466"></a></li>
<li id="line_1467" class="odd"><span class="lineNumber">&nbsp;1467&nbsp;</span>	return&nbsp;leftStr&nbsp;+&nbsp;middleStr&nbsp;+&nbsp;rightStr;<a name="line_1467"></a></li>
<li id="line_1468" class="even"><span class="lineNumber">&nbsp;1468&nbsp;</span>}<a name="line_1468"></a></li>
<li id="line_1469" class="odd"><span class="lineNumber">&nbsp;1469&nbsp;</span><a name="line_1469"></a></li>
<li id="line_1470" class="even"><span class="lineNumber">&nbsp;1470&nbsp;</span><a name="line_1470"></a></li>
<li id="line_1471" class="odd"><span class="lineNumber">&nbsp;1471&nbsp;</span>var&nbsp;similarUnitMap&nbsp;=&nbsp;{<a name="line_1471"></a></li>
<li id="line_1472" class="even"><span class="lineNumber">&nbsp;1472&nbsp;</span>	Y:&nbsp;'year',<a name="line_1472"></a></li>
<li id="line_1473" class="odd"><span class="lineNumber">&nbsp;1473&nbsp;</span>	M:&nbsp;'month',<a name="line_1473"></a></li>
<li id="line_1474" class="even"><span class="lineNumber">&nbsp;1474&nbsp;</span>	D:&nbsp;'day',&nbsp;//&nbsp;day&nbsp;of&nbsp;month<a name="line_1474"></a></li>
<li id="line_1475" class="odd"><span class="lineNumber">&nbsp;1475&nbsp;</span>	d:&nbsp;'day',&nbsp;//&nbsp;day&nbsp;of&nbsp;week<a name="line_1475"></a></li>
<li id="line_1476" class="even"><span class="lineNumber">&nbsp;1476&nbsp;</span>	//&nbsp;prevents&nbsp;a&nbsp;separator&nbsp;between&nbsp;anything&nbsp;time-related...<a name="line_1476"></a></li>
<li id="line_1477" class="odd"><span class="lineNumber">&nbsp;1477&nbsp;</span>	A:&nbsp;'second',&nbsp;//&nbsp;AM/PM<a name="line_1477"></a></li>
<li id="line_1478" class="even"><span class="lineNumber">&nbsp;1478&nbsp;</span>	a:&nbsp;'second',&nbsp;//&nbsp;am/pm<a name="line_1478"></a></li>
<li id="line_1479" class="odd"><span class="lineNumber">&nbsp;1479&nbsp;</span>	T:&nbsp;'second',&nbsp;//&nbsp;A/P<a name="line_1479"></a></li>
<li id="line_1480" class="even"><span class="lineNumber">&nbsp;1480&nbsp;</span>	t:&nbsp;'second',&nbsp;//&nbsp;a/p<a name="line_1480"></a></li>
<li id="line_1481" class="odd"><span class="lineNumber">&nbsp;1481&nbsp;</span>	H:&nbsp;'second',&nbsp;//&nbsp;hour&nbsp;(24)<a name="line_1481"></a></li>
<li id="line_1482" class="even"><span class="lineNumber">&nbsp;1482&nbsp;</span>	h:&nbsp;'second',&nbsp;//&nbsp;hour&nbsp;(12)<a name="line_1482"></a></li>
<li id="line_1483" class="odd"><span class="lineNumber">&nbsp;1483&nbsp;</span>	m:&nbsp;'second',&nbsp;//&nbsp;minute<a name="line_1483"></a></li>
<li id="line_1484" class="even"><span class="lineNumber">&nbsp;1484&nbsp;</span>	s:&nbsp;'second'&nbsp;//&nbsp;second<a name="line_1484"></a></li>
<li id="line_1485" class="odd"><span class="lineNumber">&nbsp;1485&nbsp;</span>};<a name="line_1485"></a></li>
<li id="line_1486" class="even"><span class="lineNumber">&nbsp;1486&nbsp;</span>//&nbsp;TODO:&nbsp;week&nbsp;maybe?<a name="line_1486"></a></li>
<li id="line_1487" class="odd"><span class="lineNumber">&nbsp;1487&nbsp;</span><a name="line_1487"></a></li>
<li id="line_1488" class="even"><span class="lineNumber">&nbsp;1488&nbsp;</span><a name="line_1488"></a></li>
<li id="line_1489" class="odd"><span class="lineNumber">&nbsp;1489&nbsp;</span>//&nbsp;Given&nbsp;a&nbsp;formatting&nbsp;chunk,&nbsp;and&nbsp;given&nbsp;that&nbsp;both&nbsp;dates&nbsp;are&nbsp;similar&nbsp;in&nbsp;the&nbsp;regard&nbsp;the<a name="line_1489"></a></li>
<li id="line_1490" class="even"><span class="lineNumber">&nbsp;1490&nbsp;</span>//&nbsp;formatting&nbsp;chunk&nbsp;is&nbsp;concerned,&nbsp;format&nbsp;date1&nbsp;against&nbsp;`chunk`.&nbsp;Otherwise,&nbsp;return&nbsp;`false`.<a name="line_1490"></a></li>
<li id="line_1491" class="odd"><span class="lineNumber">&nbsp;1491&nbsp;</span>function&nbsp;formatSimilarChunk(date1,&nbsp;date2,&nbsp;chunk)&nbsp;{<a name="line_1491"></a></li>
<li id="line_1492" class="even"><span class="lineNumber">&nbsp;1492&nbsp;</span>	var&nbsp;token;<a name="line_1492"></a></li>
<li id="line_1493" class="odd"><span class="lineNumber">&nbsp;1493&nbsp;</span>	var&nbsp;unit;<a name="line_1493"></a></li>
<li id="line_1494" class="even"><span class="lineNumber">&nbsp;1494&nbsp;</span><a name="line_1494"></a></li>
<li id="line_1495" class="odd"><span class="lineNumber">&nbsp;1495&nbsp;</span>	if&nbsp;(typeof&nbsp;chunk&nbsp;===&nbsp;'string')&nbsp;{&nbsp;//&nbsp;a&nbsp;literal&nbsp;string<a name="line_1495"></a></li>
<li id="line_1496" class="even"><span class="lineNumber">&nbsp;1496&nbsp;</span>		return&nbsp;chunk;<a name="line_1496"></a></li>
<li id="line_1497" class="odd"><span class="lineNumber">&nbsp;1497&nbsp;</span>	}<a name="line_1497"></a></li>
<li id="line_1498" class="even"><span class="lineNumber">&nbsp;1498&nbsp;</span>	else&nbsp;if&nbsp;((token&nbsp;=&nbsp;chunk.token))&nbsp;{<a name="line_1498"></a></li>
<li id="line_1499" class="odd"><span class="lineNumber">&nbsp;1499&nbsp;</span>		unit&nbsp;=&nbsp;similarUnitMap[token.charAt(0)];<a name="line_1499"></a></li>
<li id="line_1500" class="even"><span class="lineNumber">&nbsp;1500&nbsp;</span>		//&nbsp;are&nbsp;the&nbsp;dates&nbsp;the&nbsp;same&nbsp;for&nbsp;this&nbsp;unit&nbsp;of&nbsp;measurement?<a name="line_1500"></a></li>
<li id="line_1501" class="odd"><span class="lineNumber">&nbsp;1501&nbsp;</span>		if&nbsp;(unit&nbsp;&amp;&amp;&nbsp;date1.isSame(date2,&nbsp;unit))&nbsp;{<a name="line_1501"></a></li>
<li id="line_1502" class="even"><span class="lineNumber">&nbsp;1502&nbsp;</span>			return&nbsp;oldMomentFormat(date1,&nbsp;token);&nbsp;//&nbsp;would&nbsp;be&nbsp;the&nbsp;same&nbsp;if&nbsp;we&nbsp;used&nbsp;`date2`<a name="line_1502"></a></li>
<li id="line_1503" class="odd"><span class="lineNumber">&nbsp;1503&nbsp;</span>			//&nbsp;BTW,&nbsp;don't&nbsp;support&nbsp;custom&nbsp;tokens<a name="line_1503"></a></li>
<li id="line_1504" class="even"><span class="lineNumber">&nbsp;1504&nbsp;</span>		}<a name="line_1504"></a></li>
<li id="line_1505" class="odd"><span class="lineNumber">&nbsp;1505&nbsp;</span>	}<a name="line_1505"></a></li>
<li id="line_1506" class="even"><span class="lineNumber">&nbsp;1506&nbsp;</span><a name="line_1506"></a></li>
<li id="line_1507" class="odd"><span class="lineNumber">&nbsp;1507&nbsp;</span>	return&nbsp;false;&nbsp;//&nbsp;the&nbsp;chunk&nbsp;is&nbsp;NOT&nbsp;the&nbsp;same&nbsp;for&nbsp;the&nbsp;two&nbsp;dates<a name="line_1507"></a></li>
<li id="line_1508" class="even"><span class="lineNumber">&nbsp;1508&nbsp;</span>	//&nbsp;BTW,&nbsp;don't&nbsp;support&nbsp;splitting&nbsp;on&nbsp;non-zero&nbsp;areas<a name="line_1508"></a></li>
<li id="line_1509" class="odd"><span class="lineNumber">&nbsp;1509&nbsp;</span>}<a name="line_1509"></a></li>
<li id="line_1510" class="even"><span class="lineNumber">&nbsp;1510&nbsp;</span><a name="line_1510"></a></li>
<li id="line_1511" class="odd"><span class="lineNumber">&nbsp;1511&nbsp;</span><a name="line_1511"></a></li>
<li id="line_1512" class="even"><span class="lineNumber">&nbsp;1512&nbsp;</span>//&nbsp;Chunking&nbsp;Utils<a name="line_1512"></a></li>
<li id="line_1513" class="odd"><span class="lineNumber">&nbsp;1513&nbsp;</span>//&nbsp;-------------------------------------------------------------------------------------------------<a name="line_1513"></a></li>
<li id="line_1514" class="even"><span class="lineNumber">&nbsp;1514&nbsp;</span><a name="line_1514"></a></li>
<li id="line_1515" class="odd"><span class="lineNumber">&nbsp;1515&nbsp;</span><a name="line_1515"></a></li>
<li id="line_1516" class="even"><span class="lineNumber">&nbsp;1516&nbsp;</span>var&nbsp;formatStringChunkCache&nbsp;=&nbsp;{};<a name="line_1516"></a></li>
<li id="line_1517" class="odd"><span class="lineNumber">&nbsp;1517&nbsp;</span><a name="line_1517"></a></li>
<li id="line_1518" class="even"><span class="lineNumber">&nbsp;1518&nbsp;</span><a name="line_1518"></a></li>
<li id="line_1519" class="odd"><span class="lineNumber">&nbsp;1519&nbsp;</span>function&nbsp;getFormatStringChunks(formatStr)&nbsp;{<a name="line_1519"></a></li>
<li id="line_1520" class="even"><span class="lineNumber">&nbsp;1520&nbsp;</span>	if&nbsp;(formatStr&nbsp;in&nbsp;formatStringChunkCache)&nbsp;{<a name="line_1520"></a></li>
<li id="line_1521" class="odd"><span class="lineNumber">&nbsp;1521&nbsp;</span>		return&nbsp;formatStringChunkCache[formatStr];<a name="line_1521"></a></li>
<li id="line_1522" class="even"><span class="lineNumber">&nbsp;1522&nbsp;</span>	}<a name="line_1522"></a></li>
<li id="line_1523" class="odd"><span class="lineNumber">&nbsp;1523&nbsp;</span>	return&nbsp;(formatStringChunkCache[formatStr]&nbsp;=&nbsp;chunkFormatString(formatStr));<a name="line_1523"></a></li>
<li id="line_1524" class="even"><span class="lineNumber">&nbsp;1524&nbsp;</span>}<a name="line_1524"></a></li>
<li id="line_1525" class="odd"><span class="lineNumber">&nbsp;1525&nbsp;</span><a name="line_1525"></a></li>
<li id="line_1526" class="even"><span class="lineNumber">&nbsp;1526&nbsp;</span><a name="line_1526"></a></li>
<li id="line_1527" class="odd"><span class="lineNumber">&nbsp;1527&nbsp;</span>//&nbsp;Break&nbsp;the&nbsp;formatting&nbsp;string&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;chunks<a name="line_1527"></a></li>
<li id="line_1528" class="even"><span class="lineNumber">&nbsp;1528&nbsp;</span>function&nbsp;chunkFormatString(formatStr)&nbsp;{<a name="line_1528"></a></li>
<li id="line_1529" class="odd"><span class="lineNumber">&nbsp;1529&nbsp;</span>	var&nbsp;chunks&nbsp;=&nbsp;[];<a name="line_1529"></a></li>
<li id="line_1530" class="even"><span class="lineNumber">&nbsp;1530&nbsp;</span>	var&nbsp;chunker&nbsp;=&nbsp;/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;&nbsp;//&nbsp;TODO:&nbsp;more&nbsp;descrimination<a name="line_1530"></a></li>
<li id="line_1531" class="odd"><span class="lineNumber">&nbsp;1531&nbsp;</span>	var&nbsp;match;<a name="line_1531"></a></li>
<li id="line_1532" class="even"><span class="lineNumber">&nbsp;1532&nbsp;</span><a name="line_1532"></a></li>
<li id="line_1533" class="odd"><span class="lineNumber">&nbsp;1533&nbsp;</span>	while&nbsp;((match&nbsp;=&nbsp;chunker.exec(formatStr)))&nbsp;{<a name="line_1533"></a></li>
<li id="line_1534" class="even"><span class="lineNumber">&nbsp;1534&nbsp;</span>		if&nbsp;(match[1])&nbsp;{&nbsp;//&nbsp;a&nbsp;literal&nbsp;string&nbsp;inside&nbsp;[&nbsp;...&nbsp;]<a name="line_1534"></a></li>
<li id="line_1535" class="odd"><span class="lineNumber">&nbsp;1535&nbsp;</span>			chunks.push(match[1]);<a name="line_1535"></a></li>
<li id="line_1536" class="even"><span class="lineNumber">&nbsp;1536&nbsp;</span>		}<a name="line_1536"></a></li>
<li id="line_1537" class="odd"><span class="lineNumber">&nbsp;1537&nbsp;</span>		else&nbsp;if&nbsp;(match[2])&nbsp;{&nbsp;//&nbsp;non-zero&nbsp;formatting&nbsp;inside&nbsp;(&nbsp;...&nbsp;)<a name="line_1537"></a></li>
<li id="line_1538" class="even"><span class="lineNumber">&nbsp;1538&nbsp;</span>			chunks.push({&nbsp;maybe:&nbsp;chunkFormatString(match[2])&nbsp;});<a name="line_1538"></a></li>
<li id="line_1539" class="odd"><span class="lineNumber">&nbsp;1539&nbsp;</span>		}<a name="line_1539"></a></li>
<li id="line_1540" class="even"><span class="lineNumber">&nbsp;1540&nbsp;</span>		else&nbsp;if&nbsp;(match[3])&nbsp;{&nbsp;//&nbsp;a&nbsp;formatting&nbsp;token<a name="line_1540"></a></li>
<li id="line_1541" class="odd"><span class="lineNumber">&nbsp;1541&nbsp;</span>			chunks.push({&nbsp;token:&nbsp;match[3]&nbsp;});<a name="line_1541"></a></li>
<li id="line_1542" class="even"><span class="lineNumber">&nbsp;1542&nbsp;</span>		}<a name="line_1542"></a></li>
<li id="line_1543" class="odd"><span class="lineNumber">&nbsp;1543&nbsp;</span>		else&nbsp;if&nbsp;(match[5])&nbsp;{&nbsp;//&nbsp;an&nbsp;unenclosed&nbsp;literal&nbsp;string<a name="line_1543"></a></li>
<li id="line_1544" class="even"><span class="lineNumber">&nbsp;1544&nbsp;</span>			chunks.push(match[5]);<a name="line_1544"></a></li>
<li id="line_1545" class="odd"><span class="lineNumber">&nbsp;1545&nbsp;</span>		}<a name="line_1545"></a></li>
<li id="line_1546" class="even"><span class="lineNumber">&nbsp;1546&nbsp;</span>	}<a name="line_1546"></a></li>
<li id="line_1547" class="odd"><span class="lineNumber">&nbsp;1547&nbsp;</span><a name="line_1547"></a></li>
<li id="line_1548" class="even"><span class="lineNumber">&nbsp;1548&nbsp;</span>	return&nbsp;chunks;<a name="line_1548"></a></li>
<li id="line_1549" class="odd"><span class="lineNumber">&nbsp;1549&nbsp;</span>}<a name="line_1549"></a></li>
<li id="line_1550" class="even"><span class="lineNumber">&nbsp;1550&nbsp;</span><a name="line_1550"></a></li>
<li id="line_1551" class="odd"><span class="lineNumber">&nbsp;1551&nbsp;</span>;;<a name="line_1551"></a></li>
<li id="line_1552" class="even"><span class="lineNumber">&nbsp;1552&nbsp;</span><a name="line_1552"></a></li>
<li id="line_1553" class="odd"><span class="lineNumber">&nbsp;1553&nbsp;</span>fc.Class&nbsp;=&nbsp;Class;&nbsp;//&nbsp;export<a name="line_1553"></a></li>
<li id="line_1554" class="even"><span class="lineNumber">&nbsp;1554&nbsp;</span><a name="line_1554"></a></li>
<li id="line_1555" class="odd"><span class="lineNumber">&nbsp;1555&nbsp;</span>//&nbsp;class&nbsp;that&nbsp;all&nbsp;other&nbsp;classes&nbsp;will&nbsp;inherit&nbsp;from<a name="line_1555"></a></li>
<li id="line_1556" class="even"><span class="lineNumber">&nbsp;1556&nbsp;</span>function&nbsp;Class()&nbsp;{&nbsp;}<a name="line_1556"></a></li>
<li id="line_1557" class="odd"><span class="lineNumber">&nbsp;1557&nbsp;</span><a name="line_1557"></a></li>
<li id="line_1558" class="even"><span class="lineNumber">&nbsp;1558&nbsp;</span>//&nbsp;called&nbsp;upon&nbsp;a&nbsp;class&nbsp;to&nbsp;create&nbsp;a&nbsp;subclass<a name="line_1558"></a></li>
<li id="line_1559" class="odd"><span class="lineNumber">&nbsp;1559&nbsp;</span>Class.extend&nbsp;=&nbsp;function(members)&nbsp;{<a name="line_1559"></a></li>
<li id="line_1560" class="even"><span class="lineNumber">&nbsp;1560&nbsp;</span>	var&nbsp;superClass&nbsp;=&nbsp;this;<a name="line_1560"></a></li>
<li id="line_1561" class="odd"><span class="lineNumber">&nbsp;1561&nbsp;</span>	var&nbsp;subClass;<a name="line_1561"></a></li>
<li id="line_1562" class="even"><span class="lineNumber">&nbsp;1562&nbsp;</span><a name="line_1562"></a></li>
<li id="line_1563" class="odd"><span class="lineNumber">&nbsp;1563&nbsp;</span>	members&nbsp;=&nbsp;members&nbsp;||&nbsp;{};<a name="line_1563"></a></li>
<li id="line_1564" class="even"><span class="lineNumber">&nbsp;1564&nbsp;</span><a name="line_1564"></a></li>
<li id="line_1565" class="odd"><span class="lineNumber">&nbsp;1565&nbsp;</span>	//&nbsp;ensure&nbsp;a&nbsp;constructor&nbsp;for&nbsp;the&nbsp;subclass,&nbsp;forwarding&nbsp;all&nbsp;arguments&nbsp;to&nbsp;the&nbsp;super-constructor&nbsp;if&nbsp;it&nbsp;doesn't&nbsp;exist<a name="line_1565"></a></li>
<li id="line_1566" class="even"><span class="lineNumber">&nbsp;1566&nbsp;</span>	if&nbsp;(hasOwnProp(members,&nbsp;'constructor'))&nbsp;{<a name="line_1566"></a></li>
<li id="line_1567" class="odd"><span class="lineNumber">&nbsp;1567&nbsp;</span>		subClass&nbsp;=&nbsp;members.constructor;<a name="line_1567"></a></li>
<li id="line_1568" class="even"><span class="lineNumber">&nbsp;1568&nbsp;</span>	}<a name="line_1568"></a></li>
<li id="line_1569" class="odd"><span class="lineNumber">&nbsp;1569&nbsp;</span>	if&nbsp;(typeof&nbsp;subClass&nbsp;!==&nbsp;'function')&nbsp;{<a name="line_1569"></a></li>
<li id="line_1570" class="even"><span class="lineNumber">&nbsp;1570&nbsp;</span>		subClass&nbsp;=&nbsp;members.constructor&nbsp;=&nbsp;function()&nbsp;{<a name="line_1570"></a></li>
<li id="line_1571" class="odd"><span class="lineNumber">&nbsp;1571&nbsp;</span>			superClass.apply(this,&nbsp;arguments);<a name="line_1571"></a></li>
<li id="line_1572" class="even"><span class="lineNumber">&nbsp;1572&nbsp;</span>		};<a name="line_1572"></a></li>
<li id="line_1573" class="odd"><span class="lineNumber">&nbsp;1573&nbsp;</span>	}<a name="line_1573"></a></li>
<li id="line_1574" class="even"><span class="lineNumber">&nbsp;1574&nbsp;</span><a name="line_1574"></a></li>
<li id="line_1575" class="odd"><span class="lineNumber">&nbsp;1575&nbsp;</span>	//&nbsp;build&nbsp;the&nbsp;base&nbsp;prototype&nbsp;for&nbsp;the&nbsp;subclass,&nbsp;which&nbsp;is&nbsp;an&nbsp;new&nbsp;object&nbsp;chained&nbsp;to&nbsp;the&nbsp;superclass's&nbsp;prototype<a name="line_1575"></a></li>
<li id="line_1576" class="even"><span class="lineNumber">&nbsp;1576&nbsp;</span>	subClass.prototype&nbsp;=&nbsp;createObject(superClass.prototype);<a name="line_1576"></a></li>
<li id="line_1577" class="odd"><span class="lineNumber">&nbsp;1577&nbsp;</span><a name="line_1577"></a></li>
<li id="line_1578" class="even"><span class="lineNumber">&nbsp;1578&nbsp;</span>	//&nbsp;copy&nbsp;each&nbsp;member&nbsp;variable/method&nbsp;onto&nbsp;the&nbsp;the&nbsp;subclass's&nbsp;prototype<a name="line_1578"></a></li>
<li id="line_1579" class="odd"><span class="lineNumber">&nbsp;1579&nbsp;</span>	copyOwnProps(members,&nbsp;subClass.prototype);<a name="line_1579"></a></li>
<li id="line_1580" class="even"><span class="lineNumber">&nbsp;1580&nbsp;</span>	copyNativeMethods(members,&nbsp;subClass.prototype);&nbsp;//&nbsp;hack&nbsp;for&nbsp;IE8<a name="line_1580"></a></li>
<li id="line_1581" class="odd"><span class="lineNumber">&nbsp;1581&nbsp;</span><a name="line_1581"></a></li>
<li id="line_1582" class="even"><span class="lineNumber">&nbsp;1582&nbsp;</span>	//&nbsp;copy&nbsp;over&nbsp;all&nbsp;class&nbsp;variables/methods&nbsp;to&nbsp;the&nbsp;subclass,&nbsp;such&nbsp;as&nbsp;`extend`&nbsp;and&nbsp;`mixin`<a name="line_1582"></a></li>
<li id="line_1583" class="odd"><span class="lineNumber">&nbsp;1583&nbsp;</span>	copyOwnProps(superClass,&nbsp;subClass);<a name="line_1583"></a></li>
<li id="line_1584" class="even"><span class="lineNumber">&nbsp;1584&nbsp;</span><a name="line_1584"></a></li>
<li id="line_1585" class="odd"><span class="lineNumber">&nbsp;1585&nbsp;</span>	return&nbsp;subClass;<a name="line_1585"></a></li>
<li id="line_1586" class="even"><span class="lineNumber">&nbsp;1586&nbsp;</span>};<a name="line_1586"></a></li>
<li id="line_1587" class="odd"><span class="lineNumber">&nbsp;1587&nbsp;</span><a name="line_1587"></a></li>
<li id="line_1588" class="even"><span class="lineNumber">&nbsp;1588&nbsp;</span>//&nbsp;adds&nbsp;new&nbsp;member&nbsp;variables/methods&nbsp;to&nbsp;the&nbsp;class's&nbsp;prototype.<a name="line_1588"></a></li>
<li id="line_1589" class="odd"><span class="lineNumber">&nbsp;1589&nbsp;</span>//&nbsp;can&nbsp;be&nbsp;called&nbsp;with&nbsp;another&nbsp;class,&nbsp;or&nbsp;a&nbsp;plain&nbsp;object&nbsp;hash&nbsp;containing&nbsp;new&nbsp;members.<a name="line_1589"></a></li>
<li id="line_1590" class="even"><span class="lineNumber">&nbsp;1590&nbsp;</span>Class.mixin&nbsp;=&nbsp;function(members)&nbsp;{<a name="line_1590"></a></li>
<li id="line_1591" class="odd"><span class="lineNumber">&nbsp;1591&nbsp;</span>	copyOwnProps(members.prototype&nbsp;||&nbsp;members,&nbsp;this.prototype);&nbsp;//&nbsp;TODO:&nbsp;copyNativeMethods?<a name="line_1591"></a></li>
<li id="line_1592" class="even"><span class="lineNumber">&nbsp;1592&nbsp;</span>};<a name="line_1592"></a></li>
<li id="line_1593" class="odd"><span class="lineNumber">&nbsp;1593&nbsp;</span>;;<a name="line_1593"></a></li>
<li id="line_1594" class="even"><span class="lineNumber">&nbsp;1594&nbsp;</span><a name="line_1594"></a></li>
<li id="line_1595" class="odd"><span class="lineNumber">&nbsp;1595&nbsp;</span>/*&nbsp;A&nbsp;rectangular&nbsp;panel&nbsp;that&nbsp;is&nbsp;absolutely&nbsp;positioned&nbsp;over&nbsp;other&nbsp;content<a name="line_1595"></a></li>
<li id="line_1596" class="even"><span class="lineNumber">&nbsp;1596&nbsp;</span>------------------------------------------------------------------------------------------------------------------------<a name="line_1596"></a></li>
<li id="line_1597" class="odd"><span class="lineNumber">&nbsp;1597&nbsp;</span>Options:<a name="line_1597"></a></li>
<li id="line_1598" class="even"><span class="lineNumber">&nbsp;1598&nbsp;</span>	-&nbsp;className&nbsp;(string)<a name="line_1598"></a></li>
<li id="line_1599" class="odd"><span class="lineNumber">&nbsp;1599&nbsp;</span>	-&nbsp;content&nbsp;(HTML&nbsp;string&nbsp;or&nbsp;jQuery&nbsp;element&nbsp;set)<a name="line_1599"></a></li>
<li id="line_1600" class="even"><span class="lineNumber">&nbsp;1600&nbsp;</span>	-&nbsp;parentEl<a name="line_1600"></a></li>
<li id="line_1601" class="odd"><span class="lineNumber">&nbsp;1601&nbsp;</span>	-&nbsp;top<a name="line_1601"></a></li>
<li id="line_1602" class="even"><span class="lineNumber">&nbsp;1602&nbsp;</span>	-&nbsp;left<a name="line_1602"></a></li>
<li id="line_1603" class="odd"><span class="lineNumber">&nbsp;1603&nbsp;</span>	-&nbsp;right&nbsp;(the&nbsp;x&nbsp;coord&nbsp;of&nbsp;where&nbsp;the&nbsp;right&nbsp;edge&nbsp;should&nbsp;be.&nbsp;not&nbsp;a&nbsp;"CSS"&nbsp;right)<a name="line_1603"></a></li>
<li id="line_1604" class="even"><span class="lineNumber">&nbsp;1604&nbsp;</span>	-&nbsp;autoHide&nbsp;(boolean)<a name="line_1604"></a></li>
<li id="line_1605" class="odd"><span class="lineNumber">&nbsp;1605&nbsp;</span>	-&nbsp;show&nbsp;(callback)<a name="line_1605"></a></li>
<li id="line_1606" class="even"><span class="lineNumber">&nbsp;1606&nbsp;</span>	-&nbsp;hide&nbsp;(callback)<a name="line_1606"></a></li>
<li id="line_1607" class="odd"><span class="lineNumber">&nbsp;1607&nbsp;</span>*/<a name="line_1607"></a></li>
<li id="line_1608" class="even"><span class="lineNumber">&nbsp;1608&nbsp;</span><a name="line_1608"></a></li>
<li id="line_1609" class="odd"><span class="lineNumber">&nbsp;1609&nbsp;</span>var&nbsp;Popover&nbsp;=&nbsp;Class.extend({<a name="line_1609"></a></li>
<li id="line_1610" class="even"><span class="lineNumber">&nbsp;1610&nbsp;</span><a name="line_1610"></a></li>
<li id="line_1611" class="odd"><span class="lineNumber">&nbsp;1611&nbsp;</span>	isHidden:&nbsp;true,<a name="line_1611"></a></li>
<li id="line_1612" class="even"><span class="lineNumber">&nbsp;1612&nbsp;</span>	options:&nbsp;null,<a name="line_1612"></a></li>
<li id="line_1613" class="odd"><span class="lineNumber">&nbsp;1613&nbsp;</span>	el:&nbsp;null,&nbsp;//&nbsp;the&nbsp;container&nbsp;element&nbsp;for&nbsp;the&nbsp;popover.&nbsp;generated&nbsp;by&nbsp;this&nbsp;object<a name="line_1613"></a></li>
<li id="line_1614" class="even"><span class="lineNumber">&nbsp;1614&nbsp;</span>	documentMousedownProxy:&nbsp;null,&nbsp;//&nbsp;document&nbsp;mousedown&nbsp;handler&nbsp;bound&nbsp;to&nbsp;`this`<a name="line_1614"></a></li>
<li id="line_1615" class="odd"><span class="lineNumber">&nbsp;1615&nbsp;</span>	margin:&nbsp;10,&nbsp;//&nbsp;the&nbsp;space&nbsp;required&nbsp;between&nbsp;the&nbsp;popover&nbsp;and&nbsp;the&nbsp;edges&nbsp;of&nbsp;the&nbsp;scroll&nbsp;container<a name="line_1615"></a></li>
<li id="line_1616" class="even"><span class="lineNumber">&nbsp;1616&nbsp;</span><a name="line_1616"></a></li>
<li id="line_1617" class="odd"><span class="lineNumber">&nbsp;1617&nbsp;</span><a name="line_1617"></a></li>
<li id="line_1618" class="even"><span class="lineNumber">&nbsp;1618&nbsp;</span>	constructor:&nbsp;function(options)&nbsp;{<a name="line_1618"></a></li>
<li id="line_1619" class="odd"><span class="lineNumber">&nbsp;1619&nbsp;</span>		this.options&nbsp;=&nbsp;options&nbsp;||&nbsp;{};<a name="line_1619"></a></li>
<li id="line_1620" class="even"><span class="lineNumber">&nbsp;1620&nbsp;</span>	},<a name="line_1620"></a></li>
<li id="line_1621" class="odd"><span class="lineNumber">&nbsp;1621&nbsp;</span><a name="line_1621"></a></li>
<li id="line_1622" class="even"><span class="lineNumber">&nbsp;1622&nbsp;</span><a name="line_1622"></a></li>
<li id="line_1623" class="odd"><span class="lineNumber">&nbsp;1623&nbsp;</span>	//&nbsp;Shows&nbsp;the&nbsp;popover&nbsp;on&nbsp;the&nbsp;specified&nbsp;position.&nbsp;Renders&nbsp;it&nbsp;if&nbsp;not&nbsp;already<a name="line_1623"></a></li>
<li id="line_1624" class="even"><span class="lineNumber">&nbsp;1624&nbsp;</span>	show:&nbsp;function()&nbsp;{<a name="line_1624"></a></li>
<li id="line_1625" class="odd"><span class="lineNumber">&nbsp;1625&nbsp;</span>		if&nbsp;(this.isHidden)&nbsp;{<a name="line_1625"></a></li>
<li id="line_1626" class="even"><span class="lineNumber">&nbsp;1626&nbsp;</span>			if&nbsp;(!this.el)&nbsp;{<a name="line_1626"></a></li>
<li id="line_1627" class="odd"><span class="lineNumber">&nbsp;1627&nbsp;</span>				this.render();<a name="line_1627"></a></li>
<li id="line_1628" class="even"><span class="lineNumber">&nbsp;1628&nbsp;</span>			}<a name="line_1628"></a></li>
<li id="line_1629" class="odd"><span class="lineNumber">&nbsp;1629&nbsp;</span>			this.el.show();<a name="line_1629"></a></li>
<li id="line_1630" class="even"><span class="lineNumber">&nbsp;1630&nbsp;</span>			this.position();<a name="line_1630"></a></li>
<li id="line_1631" class="odd"><span class="lineNumber">&nbsp;1631&nbsp;</span>			this.isHidden&nbsp;=&nbsp;false;<a name="line_1631"></a></li>
<li id="line_1632" class="even"><span class="lineNumber">&nbsp;1632&nbsp;</span>			this.trigger('show');<a name="line_1632"></a></li>
<li id="line_1633" class="odd"><span class="lineNumber">&nbsp;1633&nbsp;</span>		}<a name="line_1633"></a></li>
<li id="line_1634" class="even"><span class="lineNumber">&nbsp;1634&nbsp;</span>	},<a name="line_1634"></a></li>
<li id="line_1635" class="odd"><span class="lineNumber">&nbsp;1635&nbsp;</span><a name="line_1635"></a></li>
<li id="line_1636" class="even"><span class="lineNumber">&nbsp;1636&nbsp;</span><a name="line_1636"></a></li>
<li id="line_1637" class="odd"><span class="lineNumber">&nbsp;1637&nbsp;</span>	//&nbsp;Hides&nbsp;the&nbsp;popover,&nbsp;through&nbsp;CSS,&nbsp;but&nbsp;does&nbsp;not&nbsp;remove&nbsp;it&nbsp;from&nbsp;the&nbsp;DOM<a name="line_1637"></a></li>
<li id="line_1638" class="even"><span class="lineNumber">&nbsp;1638&nbsp;</span>	hide:&nbsp;function()&nbsp;{<a name="line_1638"></a></li>
<li id="line_1639" class="odd"><span class="lineNumber">&nbsp;1639&nbsp;</span>		if&nbsp;(!this.isHidden)&nbsp;{<a name="line_1639"></a></li>
<li id="line_1640" class="even"><span class="lineNumber">&nbsp;1640&nbsp;</span>			this.el.hide();<a name="line_1640"></a></li>
<li id="line_1641" class="odd"><span class="lineNumber">&nbsp;1641&nbsp;</span>			this.isHidden&nbsp;=&nbsp;true;<a name="line_1641"></a></li>
<li id="line_1642" class="even"><span class="lineNumber">&nbsp;1642&nbsp;</span>			this.trigger('hide');<a name="line_1642"></a></li>
<li id="line_1643" class="odd"><span class="lineNumber">&nbsp;1643&nbsp;</span>		}<a name="line_1643"></a></li>
<li id="line_1644" class="even"><span class="lineNumber">&nbsp;1644&nbsp;</span>	},<a name="line_1644"></a></li>
<li id="line_1645" class="odd"><span class="lineNumber">&nbsp;1645&nbsp;</span><a name="line_1645"></a></li>
<li id="line_1646" class="even"><span class="lineNumber">&nbsp;1646&nbsp;</span><a name="line_1646"></a></li>
<li id="line_1647" class="odd"><span class="lineNumber">&nbsp;1647&nbsp;</span>	//&nbsp;Creates&nbsp;`this.el`&nbsp;and&nbsp;renders&nbsp;content&nbsp;inside&nbsp;of&nbsp;it<a name="line_1647"></a></li>
<li id="line_1648" class="even"><span class="lineNumber">&nbsp;1648&nbsp;</span>	render:&nbsp;function()&nbsp;{<a name="line_1648"></a></li>
<li id="line_1649" class="odd"><span class="lineNumber">&nbsp;1649&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_1649"></a></li>
<li id="line_1650" class="even"><span class="lineNumber">&nbsp;1650&nbsp;</span>		var&nbsp;options&nbsp;=&nbsp;this.options;<a name="line_1650"></a></li>
<li id="line_1651" class="odd"><span class="lineNumber">&nbsp;1651&nbsp;</span><a name="line_1651"></a></li>
<li id="line_1652" class="even"><span class="lineNumber">&nbsp;1652&nbsp;</span>		this.el&nbsp;=&nbsp;$('&lt;div&nbsp;class="fc-popover"/&gt;')<a name="line_1652"></a></li>
<li id="line_1653" class="odd"><span class="lineNumber">&nbsp;1653&nbsp;</span>			.addClass(options.className&nbsp;||&nbsp;'')<a name="line_1653"></a></li>
<li id="line_1654" class="even"><span class="lineNumber">&nbsp;1654&nbsp;</span>			.css({<a name="line_1654"></a></li>
<li id="line_1655" class="odd"><span class="lineNumber">&nbsp;1655&nbsp;</span>				//&nbsp;position&nbsp;initially&nbsp;to&nbsp;the&nbsp;top&nbsp;left&nbsp;to&nbsp;avoid&nbsp;creating&nbsp;scrollbars<a name="line_1655"></a></li>
<li id="line_1656" class="even"><span class="lineNumber">&nbsp;1656&nbsp;</span>				top:&nbsp;0,<a name="line_1656"></a></li>
<li id="line_1657" class="odd"><span class="lineNumber">&nbsp;1657&nbsp;</span>				left:&nbsp;0<a name="line_1657"></a></li>
<li id="line_1658" class="even"><span class="lineNumber">&nbsp;1658&nbsp;</span>			})<a name="line_1658"></a></li>
<li id="line_1659" class="odd"><span class="lineNumber">&nbsp;1659&nbsp;</span>			.append(options.content)<a name="line_1659"></a></li>
<li id="line_1660" class="even"><span class="lineNumber">&nbsp;1660&nbsp;</span>			.appendTo(options.parentEl);<a name="line_1660"></a></li>
<li id="line_1661" class="odd"><span class="lineNumber">&nbsp;1661&nbsp;</span><a name="line_1661"></a></li>
<li id="line_1662" class="even"><span class="lineNumber">&nbsp;1662&nbsp;</span>		//&nbsp;when&nbsp;a&nbsp;click&nbsp;happens&nbsp;on&nbsp;anything&nbsp;inside&nbsp;with&nbsp;a&nbsp;'fc-close'&nbsp;className,&nbsp;hide&nbsp;the&nbsp;popover<a name="line_1662"></a></li>
<li id="line_1663" class="odd"><span class="lineNumber">&nbsp;1663&nbsp;</span>		this.el.on('click',&nbsp;'.fc-close',&nbsp;function()&nbsp;{<a name="line_1663"></a></li>
<li id="line_1664" class="even"><span class="lineNumber">&nbsp;1664&nbsp;</span>			_this.hide();<a name="line_1664"></a></li>
<li id="line_1665" class="odd"><span class="lineNumber">&nbsp;1665&nbsp;</span>		});<a name="line_1665"></a></li>
<li id="line_1666" class="even"><span class="lineNumber">&nbsp;1666&nbsp;</span><a name="line_1666"></a></li>
<li id="line_1667" class="odd"><span class="lineNumber">&nbsp;1667&nbsp;</span>		if&nbsp;(options.autoHide)&nbsp;{<a name="line_1667"></a></li>
<li id="line_1668" class="even"><span class="lineNumber">&nbsp;1668&nbsp;</span>			$(document).on('mousedown',&nbsp;this.documentMousedownProxy&nbsp;=&nbsp;proxy(this,&nbsp;'documentMousedown'));<a name="line_1668"></a></li>
<li id="line_1669" class="odd"><span class="lineNumber">&nbsp;1669&nbsp;</span>		}<a name="line_1669"></a></li>
<li id="line_1670" class="even"><span class="lineNumber">&nbsp;1670&nbsp;</span>	},<a name="line_1670"></a></li>
<li id="line_1671" class="odd"><span class="lineNumber">&nbsp;1671&nbsp;</span><a name="line_1671"></a></li>
<li id="line_1672" class="even"><span class="lineNumber">&nbsp;1672&nbsp;</span><a name="line_1672"></a></li>
<li id="line_1673" class="odd"><span class="lineNumber">&nbsp;1673&nbsp;</span>	//&nbsp;Triggered&nbsp;when&nbsp;the&nbsp;user&nbsp;clicks&nbsp;*anywhere*&nbsp;in&nbsp;the&nbsp;document,&nbsp;for&nbsp;the&nbsp;autoHide&nbsp;feature<a name="line_1673"></a></li>
<li id="line_1674" class="even"><span class="lineNumber">&nbsp;1674&nbsp;</span>	documentMousedown:&nbsp;function(ev)&nbsp;{<a name="line_1674"></a></li>
<li id="line_1675" class="odd"><span class="lineNumber">&nbsp;1675&nbsp;</span>		//&nbsp;only&nbsp;hide&nbsp;the&nbsp;popover&nbsp;if&nbsp;the&nbsp;click&nbsp;happened&nbsp;outside&nbsp;the&nbsp;popover<a name="line_1675"></a></li>
<li id="line_1676" class="even"><span class="lineNumber">&nbsp;1676&nbsp;</span>		if&nbsp;(this.el&nbsp;&amp;&amp;&nbsp;!$(ev.target).closest(this.el).length)&nbsp;{<a name="line_1676"></a></li>
<li id="line_1677" class="odd"><span class="lineNumber">&nbsp;1677&nbsp;</span>			this.hide();<a name="line_1677"></a></li>
<li id="line_1678" class="even"><span class="lineNumber">&nbsp;1678&nbsp;</span>		}<a name="line_1678"></a></li>
<li id="line_1679" class="odd"><span class="lineNumber">&nbsp;1679&nbsp;</span>	},<a name="line_1679"></a></li>
<li id="line_1680" class="even"><span class="lineNumber">&nbsp;1680&nbsp;</span><a name="line_1680"></a></li>
<li id="line_1681" class="odd"><span class="lineNumber">&nbsp;1681&nbsp;</span><a name="line_1681"></a></li>
<li id="line_1682" class="even"><span class="lineNumber">&nbsp;1682&nbsp;</span>	//&nbsp;Hides&nbsp;and&nbsp;unregisters&nbsp;any&nbsp;handlers<a name="line_1682"></a></li>
<li id="line_1683" class="odd"><span class="lineNumber">&nbsp;1683&nbsp;</span>	removeElement:&nbsp;function()&nbsp;{<a name="line_1683"></a></li>
<li id="line_1684" class="even"><span class="lineNumber">&nbsp;1684&nbsp;</span>		this.hide();<a name="line_1684"></a></li>
<li id="line_1685" class="odd"><span class="lineNumber">&nbsp;1685&nbsp;</span><a name="line_1685"></a></li>
<li id="line_1686" class="even"><span class="lineNumber">&nbsp;1686&nbsp;</span>		if&nbsp;(this.el)&nbsp;{<a name="line_1686"></a></li>
<li id="line_1687" class="odd"><span class="lineNumber">&nbsp;1687&nbsp;</span>			this.el.remove();<a name="line_1687"></a></li>
<li id="line_1688" class="even"><span class="lineNumber">&nbsp;1688&nbsp;</span>			this.el&nbsp;=&nbsp;null;<a name="line_1688"></a></li>
<li id="line_1689" class="odd"><span class="lineNumber">&nbsp;1689&nbsp;</span>		}<a name="line_1689"></a></li>
<li id="line_1690" class="even"><span class="lineNumber">&nbsp;1690&nbsp;</span><a name="line_1690"></a></li>
<li id="line_1691" class="odd"><span class="lineNumber">&nbsp;1691&nbsp;</span>		$(document).off('mousedown',&nbsp;this.documentMousedownProxy);<a name="line_1691"></a></li>
<li id="line_1692" class="even"><span class="lineNumber">&nbsp;1692&nbsp;</span>	},<a name="line_1692"></a></li>
<li id="line_1693" class="odd"><span class="lineNumber">&nbsp;1693&nbsp;</span><a name="line_1693"></a></li>
<li id="line_1694" class="even"><span class="lineNumber">&nbsp;1694&nbsp;</span><a name="line_1694"></a></li>
<li id="line_1695" class="odd"><span class="lineNumber">&nbsp;1695&nbsp;</span>	//&nbsp;Positions&nbsp;the&nbsp;popover&nbsp;optimally,&nbsp;using&nbsp;the&nbsp;top/left/right&nbsp;options<a name="line_1695"></a></li>
<li id="line_1696" class="even"><span class="lineNumber">&nbsp;1696&nbsp;</span>	position:&nbsp;function()&nbsp;{<a name="line_1696"></a></li>
<li id="line_1697" class="odd"><span class="lineNumber">&nbsp;1697&nbsp;</span>		var&nbsp;options&nbsp;=&nbsp;this.options;<a name="line_1697"></a></li>
<li id="line_1698" class="even"><span class="lineNumber">&nbsp;1698&nbsp;</span>		var&nbsp;origin&nbsp;=&nbsp;this.el.offsetParent().offset();<a name="line_1698"></a></li>
<li id="line_1699" class="odd"><span class="lineNumber">&nbsp;1699&nbsp;</span>		var&nbsp;width&nbsp;=&nbsp;this.el.outerWidth();<a name="line_1699"></a></li>
<li id="line_1700" class="even"><span class="lineNumber">&nbsp;1700&nbsp;</span>		var&nbsp;height&nbsp;=&nbsp;this.el.outerHeight();<a name="line_1700"></a></li>
<li id="line_1701" class="odd"><span class="lineNumber">&nbsp;1701&nbsp;</span>		var&nbsp;windowEl&nbsp;=&nbsp;$(window);<a name="line_1701"></a></li>
<li id="line_1702" class="even"><span class="lineNumber">&nbsp;1702&nbsp;</span>		var&nbsp;viewportEl&nbsp;=&nbsp;getScrollParent(this.el);<a name="line_1702"></a></li>
<li id="line_1703" class="odd"><span class="lineNumber">&nbsp;1703&nbsp;</span>		var&nbsp;viewportTop;<a name="line_1703"></a></li>
<li id="line_1704" class="even"><span class="lineNumber">&nbsp;1704&nbsp;</span>		var&nbsp;viewportLeft;<a name="line_1704"></a></li>
<li id="line_1705" class="odd"><span class="lineNumber">&nbsp;1705&nbsp;</span>		var&nbsp;viewportOffset;<a name="line_1705"></a></li>
<li id="line_1706" class="even"><span class="lineNumber">&nbsp;1706&nbsp;</span>		var&nbsp;top;&nbsp;//&nbsp;the&nbsp;"position"&nbsp;(not&nbsp;"offset")&nbsp;values&nbsp;for&nbsp;the&nbsp;popover<a name="line_1706"></a></li>
<li id="line_1707" class="odd"><span class="lineNumber">&nbsp;1707&nbsp;</span>		var&nbsp;left;&nbsp;//<a name="line_1707"></a></li>
<li id="line_1708" class="even"><span class="lineNumber">&nbsp;1708&nbsp;</span><a name="line_1708"></a></li>
<li id="line_1709" class="odd"><span class="lineNumber">&nbsp;1709&nbsp;</span>		//&nbsp;compute&nbsp;top&nbsp;and&nbsp;left<a name="line_1709"></a></li>
<li id="line_1710" class="even"><span class="lineNumber">&nbsp;1710&nbsp;</span>		top&nbsp;=&nbsp;options.top&nbsp;||&nbsp;0;<a name="line_1710"></a></li>
<li id="line_1711" class="odd"><span class="lineNumber">&nbsp;1711&nbsp;</span>		if&nbsp;(options.left&nbsp;!==&nbsp;undefined)&nbsp;{<a name="line_1711"></a></li>
<li id="line_1712" class="even"><span class="lineNumber">&nbsp;1712&nbsp;</span>			left&nbsp;=&nbsp;options.left;<a name="line_1712"></a></li>
<li id="line_1713" class="odd"><span class="lineNumber">&nbsp;1713&nbsp;</span>		}<a name="line_1713"></a></li>
<li id="line_1714" class="even"><span class="lineNumber">&nbsp;1714&nbsp;</span>		else&nbsp;if&nbsp;(options.right&nbsp;!==&nbsp;undefined)&nbsp;{<a name="line_1714"></a></li>
<li id="line_1715" class="odd"><span class="lineNumber">&nbsp;1715&nbsp;</span>			left&nbsp;=&nbsp;options.right&nbsp;-&nbsp;width;&nbsp;//&nbsp;derive&nbsp;the&nbsp;left&nbsp;value&nbsp;from&nbsp;the&nbsp;right&nbsp;value<a name="line_1715"></a></li>
<li id="line_1716" class="even"><span class="lineNumber">&nbsp;1716&nbsp;</span>		}<a name="line_1716"></a></li>
<li id="line_1717" class="odd"><span class="lineNumber">&nbsp;1717&nbsp;</span>		else&nbsp;{<a name="line_1717"></a></li>
<li id="line_1718" class="even"><span class="lineNumber">&nbsp;1718&nbsp;</span>			left&nbsp;=&nbsp;0;<a name="line_1718"></a></li>
<li id="line_1719" class="odd"><span class="lineNumber">&nbsp;1719&nbsp;</span>		}<a name="line_1719"></a></li>
<li id="line_1720" class="even"><span class="lineNumber">&nbsp;1720&nbsp;</span><a name="line_1720"></a></li>
<li id="line_1721" class="odd"><span class="lineNumber">&nbsp;1721&nbsp;</span>		if&nbsp;(viewportEl.is(window)&nbsp;||&nbsp;viewportEl.is(document))&nbsp;{&nbsp;//&nbsp;normalize&nbsp;getScrollParent's&nbsp;result<a name="line_1721"></a></li>
<li id="line_1722" class="even"><span class="lineNumber">&nbsp;1722&nbsp;</span>			viewportEl&nbsp;=&nbsp;windowEl;<a name="line_1722"></a></li>
<li id="line_1723" class="odd"><span class="lineNumber">&nbsp;1723&nbsp;</span>			viewportTop&nbsp;=&nbsp;0;&nbsp;//&nbsp;the&nbsp;window&nbsp;is&nbsp;always&nbsp;at&nbsp;the&nbsp;top&nbsp;left<a name="line_1723"></a></li>
<li id="line_1724" class="even"><span class="lineNumber">&nbsp;1724&nbsp;</span>			viewportLeft&nbsp;=&nbsp;0;&nbsp;//&nbsp;(and&nbsp;.offset()&nbsp;won't&nbsp;work&nbsp;if&nbsp;called&nbsp;here)<a name="line_1724"></a></li>
<li id="line_1725" class="odd"><span class="lineNumber">&nbsp;1725&nbsp;</span>		}<a name="line_1725"></a></li>
<li id="line_1726" class="even"><span class="lineNumber">&nbsp;1726&nbsp;</span>		else&nbsp;{<a name="line_1726"></a></li>
<li id="line_1727" class="odd"><span class="lineNumber">&nbsp;1727&nbsp;</span>			viewportOffset&nbsp;=&nbsp;viewportEl.offset();<a name="line_1727"></a></li>
<li id="line_1728" class="even"><span class="lineNumber">&nbsp;1728&nbsp;</span>			viewportTop&nbsp;=&nbsp;viewportOffset.top;<a name="line_1728"></a></li>
<li id="line_1729" class="odd"><span class="lineNumber">&nbsp;1729&nbsp;</span>			viewportLeft&nbsp;=&nbsp;viewportOffset.left;<a name="line_1729"></a></li>
<li id="line_1730" class="even"><span class="lineNumber">&nbsp;1730&nbsp;</span>		}<a name="line_1730"></a></li>
<li id="line_1731" class="odd"><span class="lineNumber">&nbsp;1731&nbsp;</span><a name="line_1731"></a></li>
<li id="line_1732" class="even"><span class="lineNumber">&nbsp;1732&nbsp;</span>		//&nbsp;if&nbsp;the&nbsp;window&nbsp;is&nbsp;scrolled,&nbsp;it&nbsp;causes&nbsp;the&nbsp;visible&nbsp;area&nbsp;to&nbsp;be&nbsp;further&nbsp;down<a name="line_1732"></a></li>
<li id="line_1733" class="odd"><span class="lineNumber">&nbsp;1733&nbsp;</span>		viewportTop&nbsp;+=&nbsp;windowEl.scrollTop();<a name="line_1733"></a></li>
<li id="line_1734" class="even"><span class="lineNumber">&nbsp;1734&nbsp;</span>		viewportLeft&nbsp;+=&nbsp;windowEl.scrollLeft();<a name="line_1734"></a></li>
<li id="line_1735" class="odd"><span class="lineNumber">&nbsp;1735&nbsp;</span><a name="line_1735"></a></li>
<li id="line_1736" class="even"><span class="lineNumber">&nbsp;1736&nbsp;</span>		//&nbsp;constrain&nbsp;to&nbsp;the&nbsp;view&nbsp;port.&nbsp;if&nbsp;constrained&nbsp;by&nbsp;two&nbsp;edges,&nbsp;give&nbsp;precedence&nbsp;to&nbsp;top/left<a name="line_1736"></a></li>
<li id="line_1737" class="odd"><span class="lineNumber">&nbsp;1737&nbsp;</span>		if&nbsp;(options.viewportConstrain&nbsp;!==&nbsp;false)&nbsp;{<a name="line_1737"></a></li>
<li id="line_1738" class="even"><span class="lineNumber">&nbsp;1738&nbsp;</span>			top&nbsp;=&nbsp;Math.min(top,&nbsp;viewportTop&nbsp;+&nbsp;viewportEl.outerHeight()&nbsp;-&nbsp;height&nbsp;-&nbsp;this.margin);<a name="line_1738"></a></li>
<li id="line_1739" class="odd"><span class="lineNumber">&nbsp;1739&nbsp;</span>			top&nbsp;=&nbsp;Math.max(top,&nbsp;viewportTop&nbsp;+&nbsp;this.margin);<a name="line_1739"></a></li>
<li id="line_1740" class="even"><span class="lineNumber">&nbsp;1740&nbsp;</span>			left&nbsp;=&nbsp;Math.min(left,&nbsp;viewportLeft&nbsp;+&nbsp;viewportEl.outerWidth()&nbsp;-&nbsp;width&nbsp;-&nbsp;this.margin);<a name="line_1740"></a></li>
<li id="line_1741" class="odd"><span class="lineNumber">&nbsp;1741&nbsp;</span>			left&nbsp;=&nbsp;Math.max(left,&nbsp;viewportLeft&nbsp;+&nbsp;this.margin);<a name="line_1741"></a></li>
<li id="line_1742" class="even"><span class="lineNumber">&nbsp;1742&nbsp;</span>		}<a name="line_1742"></a></li>
<li id="line_1743" class="odd"><span class="lineNumber">&nbsp;1743&nbsp;</span><a name="line_1743"></a></li>
<li id="line_1744" class="even"><span class="lineNumber">&nbsp;1744&nbsp;</span>		this.el.css({<a name="line_1744"></a></li>
<li id="line_1745" class="odd"><span class="lineNumber">&nbsp;1745&nbsp;</span>			top:&nbsp;top&nbsp;-&nbsp;origin.top,<a name="line_1745"></a></li>
<li id="line_1746" class="even"><span class="lineNumber">&nbsp;1746&nbsp;</span>			left:&nbsp;left&nbsp;-&nbsp;origin.left<a name="line_1746"></a></li>
<li id="line_1747" class="odd"><span class="lineNumber">&nbsp;1747&nbsp;</span>		});<a name="line_1747"></a></li>
<li id="line_1748" class="even"><span class="lineNumber">&nbsp;1748&nbsp;</span>	},<a name="line_1748"></a></li>
<li id="line_1749" class="odd"><span class="lineNumber">&nbsp;1749&nbsp;</span><a name="line_1749"></a></li>
<li id="line_1750" class="even"><span class="lineNumber">&nbsp;1750&nbsp;</span><a name="line_1750"></a></li>
<li id="line_1751" class="odd"><span class="lineNumber">&nbsp;1751&nbsp;</span>	//&nbsp;Triggers&nbsp;a&nbsp;callback.&nbsp;Calls&nbsp;a&nbsp;function&nbsp;in&nbsp;the&nbsp;option&nbsp;hash&nbsp;of&nbsp;the&nbsp;same&nbsp;name.<a name="line_1751"></a></li>
<li id="line_1752" class="even"><span class="lineNumber">&nbsp;1752&nbsp;</span>	//&nbsp;Arguments&nbsp;beyond&nbsp;the&nbsp;first&nbsp;`name`&nbsp;are&nbsp;forwarded&nbsp;on.<a name="line_1752"></a></li>
<li id="line_1753" class="odd"><span class="lineNumber">&nbsp;1753&nbsp;</span>	//&nbsp;TODO:&nbsp;better&nbsp;code&nbsp;reuse&nbsp;for&nbsp;this.&nbsp;Repeat&nbsp;code<a name="line_1753"></a></li>
<li id="line_1754" class="even"><span class="lineNumber">&nbsp;1754&nbsp;</span>	trigger:&nbsp;function(name)&nbsp;{<a name="line_1754"></a></li>
<li id="line_1755" class="odd"><span class="lineNumber">&nbsp;1755&nbsp;</span>		if&nbsp;(this.options[name])&nbsp;{<a name="line_1755"></a></li>
<li id="line_1756" class="even"><span class="lineNumber">&nbsp;1756&nbsp;</span>			this.options[name].apply(this,&nbsp;Array.prototype.slice.call(arguments,&nbsp;1));<a name="line_1756"></a></li>
<li id="line_1757" class="odd"><span class="lineNumber">&nbsp;1757&nbsp;</span>		}<a name="line_1757"></a></li>
<li id="line_1758" class="even"><span class="lineNumber">&nbsp;1758&nbsp;</span>	}<a name="line_1758"></a></li>
<li id="line_1759" class="odd"><span class="lineNumber">&nbsp;1759&nbsp;</span><a name="line_1759"></a></li>
<li id="line_1760" class="even"><span class="lineNumber">&nbsp;1760&nbsp;</span>});<a name="line_1760"></a></li>
<li id="line_1761" class="odd"><span class="lineNumber">&nbsp;1761&nbsp;</span><a name="line_1761"></a></li>
<li id="line_1762" class="even"><span class="lineNumber">&nbsp;1762&nbsp;</span>;;<a name="line_1762"></a></li>
<li id="line_1763" class="odd"><span class="lineNumber">&nbsp;1763&nbsp;</span><a name="line_1763"></a></li>
<li id="line_1764" class="even"><span class="lineNumber">&nbsp;1764&nbsp;</span>/*&nbsp;A&nbsp;"coordinate&nbsp;map"&nbsp;converts&nbsp;pixel&nbsp;coordinates&nbsp;into&nbsp;an&nbsp;associated&nbsp;cell,&nbsp;which&nbsp;has&nbsp;an&nbsp;associated&nbsp;date<a name="line_1764"></a></li>
<li id="line_1765" class="odd"><span class="lineNumber">&nbsp;1765&nbsp;</span>------------------------------------------------------------------------------------------------------------------------<a name="line_1765"></a></li>
<li id="line_1766" class="even"><span class="lineNumber">&nbsp;1766&nbsp;</span>Common&nbsp;interface:<a name="line_1766"></a></li>
<li id="line_1767" class="odd"><span class="lineNumber">&nbsp;1767&nbsp;</span><a name="line_1767"></a></li>
<li id="line_1768" class="even"><span class="lineNumber">&nbsp;1768&nbsp;</span>	CoordMap.prototype&nbsp;=&nbsp;{<a name="line_1768"></a></li>
<li id="line_1769" class="odd"><span class="lineNumber">&nbsp;1769&nbsp;</span>		build:&nbsp;function()&nbsp;{},<a name="line_1769"></a></li>
<li id="line_1770" class="even"><span class="lineNumber">&nbsp;1770&nbsp;</span>		getCell:&nbsp;function(x,&nbsp;y)&nbsp;{}<a name="line_1770"></a></li>
<li id="line_1771" class="odd"><span class="lineNumber">&nbsp;1771&nbsp;</span>	};<a name="line_1771"></a></li>
<li id="line_1772" class="even"><span class="lineNumber">&nbsp;1772&nbsp;</span><a name="line_1772"></a></li>
<li id="line_1773" class="odd"><span class="lineNumber">&nbsp;1773&nbsp;</span>*/<a name="line_1773"></a></li>
<li id="line_1774" class="even"><span class="lineNumber">&nbsp;1774&nbsp;</span><a name="line_1774"></a></li>
<li id="line_1775" class="odd"><span class="lineNumber">&nbsp;1775&nbsp;</span>/*&nbsp;Coordinate&nbsp;map&nbsp;for&nbsp;a&nbsp;grid&nbsp;component<a name="line_1775"></a></li>
<li id="line_1776" class="even"><span class="lineNumber">&nbsp;1776&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_1776"></a></li>
<li id="line_1777" class="odd"><span class="lineNumber">&nbsp;1777&nbsp;</span><a name="line_1777"></a></li>
<li id="line_1778" class="even"><span class="lineNumber">&nbsp;1778&nbsp;</span>var&nbsp;GridCoordMap&nbsp;=&nbsp;Class.extend({<a name="line_1778"></a></li>
<li id="line_1779" class="odd"><span class="lineNumber">&nbsp;1779&nbsp;</span><a name="line_1779"></a></li>
<li id="line_1780" class="even"><span class="lineNumber">&nbsp;1780&nbsp;</span>	grid:&nbsp;null,&nbsp;//&nbsp;reference&nbsp;to&nbsp;the&nbsp;Grid<a name="line_1780"></a></li>
<li id="line_1781" class="odd"><span class="lineNumber">&nbsp;1781&nbsp;</span>	rowCoords:&nbsp;null,&nbsp;//&nbsp;array&nbsp;of&nbsp;{top,bottom}&nbsp;objects<a name="line_1781"></a></li>
<li id="line_1782" class="even"><span class="lineNumber">&nbsp;1782&nbsp;</span>	colCoords:&nbsp;null,&nbsp;//&nbsp;array&nbsp;of&nbsp;{left,right}&nbsp;objects<a name="line_1782"></a></li>
<li id="line_1783" class="odd"><span class="lineNumber">&nbsp;1783&nbsp;</span><a name="line_1783"></a></li>
<li id="line_1784" class="even"><span class="lineNumber">&nbsp;1784&nbsp;</span>	containerEl:&nbsp;null,&nbsp;//&nbsp;container&nbsp;element&nbsp;that&nbsp;all&nbsp;coordinates&nbsp;are&nbsp;constrained&nbsp;to.&nbsp;optionally&nbsp;assigned<a name="line_1784"></a></li>
<li id="line_1785" class="odd"><span class="lineNumber">&nbsp;1785&nbsp;</span>	bounds:&nbsp;null,<a name="line_1785"></a></li>
<li id="line_1786" class="even"><span class="lineNumber">&nbsp;1786&nbsp;</span><a name="line_1786"></a></li>
<li id="line_1787" class="odd"><span class="lineNumber">&nbsp;1787&nbsp;</span><a name="line_1787"></a></li>
<li id="line_1788" class="even"><span class="lineNumber">&nbsp;1788&nbsp;</span>	constructor:&nbsp;function(grid)&nbsp;{<a name="line_1788"></a></li>
<li id="line_1789" class="odd"><span class="lineNumber">&nbsp;1789&nbsp;</span>		this.grid&nbsp;=&nbsp;grid;<a name="line_1789"></a></li>
<li id="line_1790" class="even"><span class="lineNumber">&nbsp;1790&nbsp;</span>	},<a name="line_1790"></a></li>
<li id="line_1791" class="odd"><span class="lineNumber">&nbsp;1791&nbsp;</span><a name="line_1791"></a></li>
<li id="line_1792" class="even"><span class="lineNumber">&nbsp;1792&nbsp;</span><a name="line_1792"></a></li>
<li id="line_1793" class="odd"><span class="lineNumber">&nbsp;1793&nbsp;</span>	//&nbsp;Queries&nbsp;the&nbsp;grid&nbsp;for&nbsp;the&nbsp;coordinates&nbsp;of&nbsp;all&nbsp;the&nbsp;cells<a name="line_1793"></a></li>
<li id="line_1794" class="even"><span class="lineNumber">&nbsp;1794&nbsp;</span>	build:&nbsp;function()&nbsp;{<a name="line_1794"></a></li>
<li id="line_1795" class="odd"><span class="lineNumber">&nbsp;1795&nbsp;</span>		this.grid.build();<a name="line_1795"></a></li>
<li id="line_1796" class="even"><span class="lineNumber">&nbsp;1796&nbsp;</span>		this.rowCoords&nbsp;=&nbsp;this.grid.computeRowCoords();<a name="line_1796"></a></li>
<li id="line_1797" class="odd"><span class="lineNumber">&nbsp;1797&nbsp;</span>		this.colCoords&nbsp;=&nbsp;this.grid.computeColCoords();<a name="line_1797"></a></li>
<li id="line_1798" class="even"><span class="lineNumber">&nbsp;1798&nbsp;</span>		this.computeBounds();<a name="line_1798"></a></li>
<li id="line_1799" class="odd"><span class="lineNumber">&nbsp;1799&nbsp;</span>	},<a name="line_1799"></a></li>
<li id="line_1800" class="even"><span class="lineNumber">&nbsp;1800&nbsp;</span><a name="line_1800"></a></li>
<li id="line_1801" class="odd"><span class="lineNumber">&nbsp;1801&nbsp;</span><a name="line_1801"></a></li>
<li id="line_1802" class="even"><span class="lineNumber">&nbsp;1802&nbsp;</span>	//&nbsp;Clears&nbsp;the&nbsp;coordinates&nbsp;data&nbsp;to&nbsp;free&nbsp;up&nbsp;memory<a name="line_1802"></a></li>
<li id="line_1803" class="odd"><span class="lineNumber">&nbsp;1803&nbsp;</span>	clear:&nbsp;function()&nbsp;{<a name="line_1803"></a></li>
<li id="line_1804" class="even"><span class="lineNumber">&nbsp;1804&nbsp;</span>		this.grid.clear();<a name="line_1804"></a></li>
<li id="line_1805" class="odd"><span class="lineNumber">&nbsp;1805&nbsp;</span>		this.rowCoords&nbsp;=&nbsp;null;<a name="line_1805"></a></li>
<li id="line_1806" class="even"><span class="lineNumber">&nbsp;1806&nbsp;</span>		this.colCoords&nbsp;=&nbsp;null;<a name="line_1806"></a></li>
<li id="line_1807" class="odd"><span class="lineNumber">&nbsp;1807&nbsp;</span>	},<a name="line_1807"></a></li>
<li id="line_1808" class="even"><span class="lineNumber">&nbsp;1808&nbsp;</span><a name="line_1808"></a></li>
<li id="line_1809" class="odd"><span class="lineNumber">&nbsp;1809&nbsp;</span><a name="line_1809"></a></li>
<li id="line_1810" class="even"><span class="lineNumber">&nbsp;1810&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;coordinate&nbsp;of&nbsp;the&nbsp;document,&nbsp;gets&nbsp;the&nbsp;associated&nbsp;cell.&nbsp;If&nbsp;no&nbsp;cell&nbsp;is&nbsp;underneath,&nbsp;returns&nbsp;null<a name="line_1810"></a></li>
<li id="line_1811" class="odd"><span class="lineNumber">&nbsp;1811&nbsp;</span>	getCell:&nbsp;function(x,&nbsp;y)&nbsp;{<a name="line_1811"></a></li>
<li id="line_1812" class="even"><span class="lineNumber">&nbsp;1812&nbsp;</span>		var&nbsp;rowCoords&nbsp;=&nbsp;this.rowCoords;<a name="line_1812"></a></li>
<li id="line_1813" class="odd"><span class="lineNumber">&nbsp;1813&nbsp;</span>		var&nbsp;rowCnt&nbsp;=&nbsp;rowCoords.length;<a name="line_1813"></a></li>
<li id="line_1814" class="even"><span class="lineNumber">&nbsp;1814&nbsp;</span>		var&nbsp;colCoords&nbsp;=&nbsp;this.colCoords;<a name="line_1814"></a></li>
<li id="line_1815" class="odd"><span class="lineNumber">&nbsp;1815&nbsp;</span>		var&nbsp;colCnt&nbsp;=&nbsp;colCoords.length;<a name="line_1815"></a></li>
<li id="line_1816" class="even"><span class="lineNumber">&nbsp;1816&nbsp;</span>		var&nbsp;hitRow&nbsp;=&nbsp;null;<a name="line_1816"></a></li>
<li id="line_1817" class="odd"><span class="lineNumber">&nbsp;1817&nbsp;</span>		var&nbsp;hitCol&nbsp;=&nbsp;null;<a name="line_1817"></a></li>
<li id="line_1818" class="even"><span class="lineNumber">&nbsp;1818&nbsp;</span>		var&nbsp;i,&nbsp;coords;<a name="line_1818"></a></li>
<li id="line_1819" class="odd"><span class="lineNumber">&nbsp;1819&nbsp;</span>		var&nbsp;cell;<a name="line_1819"></a></li>
<li id="line_1820" class="even"><span class="lineNumber">&nbsp;1820&nbsp;</span><a name="line_1820"></a></li>
<li id="line_1821" class="odd"><span class="lineNumber">&nbsp;1821&nbsp;</span>		if&nbsp;(this.inBounds(x,&nbsp;y))&nbsp;{<a name="line_1821"></a></li>
<li id="line_1822" class="even"><span class="lineNumber">&nbsp;1822&nbsp;</span><a name="line_1822"></a></li>
<li id="line_1823" class="odd"><span class="lineNumber">&nbsp;1823&nbsp;</span>			for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;rowCnt;&nbsp;i++)&nbsp;{<a name="line_1823"></a></li>
<li id="line_1824" class="even"><span class="lineNumber">&nbsp;1824&nbsp;</span>				coords&nbsp;=&nbsp;rowCoords[i];<a name="line_1824"></a></li>
<li id="line_1825" class="odd"><span class="lineNumber">&nbsp;1825&nbsp;</span>				if&nbsp;(y&nbsp;&gt;=&nbsp;coords.top&nbsp;&amp;&amp;&nbsp;y&nbsp;&lt;&nbsp;coords.bottom)&nbsp;{<a name="line_1825"></a></li>
<li id="line_1826" class="even"><span class="lineNumber">&nbsp;1826&nbsp;</span>					hitRow&nbsp;=&nbsp;i;<a name="line_1826"></a></li>
<li id="line_1827" class="odd"><span class="lineNumber">&nbsp;1827&nbsp;</span>					break;<a name="line_1827"></a></li>
<li id="line_1828" class="even"><span class="lineNumber">&nbsp;1828&nbsp;</span>				}<a name="line_1828"></a></li>
<li id="line_1829" class="odd"><span class="lineNumber">&nbsp;1829&nbsp;</span>			}<a name="line_1829"></a></li>
<li id="line_1830" class="even"><span class="lineNumber">&nbsp;1830&nbsp;</span><a name="line_1830"></a></li>
<li id="line_1831" class="odd"><span class="lineNumber">&nbsp;1831&nbsp;</span>			for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;colCnt;&nbsp;i++)&nbsp;{<a name="line_1831"></a></li>
<li id="line_1832" class="even"><span class="lineNumber">&nbsp;1832&nbsp;</span>				coords&nbsp;=&nbsp;colCoords[i];<a name="line_1832"></a></li>
<li id="line_1833" class="odd"><span class="lineNumber">&nbsp;1833&nbsp;</span>				if&nbsp;(x&nbsp;&gt;=&nbsp;coords.left&nbsp;&amp;&amp;&nbsp;x&nbsp;&lt;&nbsp;coords.right)&nbsp;{<a name="line_1833"></a></li>
<li id="line_1834" class="even"><span class="lineNumber">&nbsp;1834&nbsp;</span>					hitCol&nbsp;=&nbsp;i;<a name="line_1834"></a></li>
<li id="line_1835" class="odd"><span class="lineNumber">&nbsp;1835&nbsp;</span>					break;<a name="line_1835"></a></li>
<li id="line_1836" class="even"><span class="lineNumber">&nbsp;1836&nbsp;</span>				}<a name="line_1836"></a></li>
<li id="line_1837" class="odd"><span class="lineNumber">&nbsp;1837&nbsp;</span>			}<a name="line_1837"></a></li>
<li id="line_1838" class="even"><span class="lineNumber">&nbsp;1838&nbsp;</span><a name="line_1838"></a></li>
<li id="line_1839" class="odd"><span class="lineNumber">&nbsp;1839&nbsp;</span>			if&nbsp;(hitRow&nbsp;!==&nbsp;null&nbsp;&amp;&amp;&nbsp;hitCol&nbsp;!==&nbsp;null)&nbsp;{<a name="line_1839"></a></li>
<li id="line_1840" class="even"><span class="lineNumber">&nbsp;1840&nbsp;</span><a name="line_1840"></a></li>
<li id="line_1841" class="odd"><span class="lineNumber">&nbsp;1841&nbsp;</span>				cell&nbsp;=&nbsp;this.grid.getCell(hitRow,&nbsp;hitCol);&nbsp;//&nbsp;expected&nbsp;to&nbsp;return&nbsp;a&nbsp;fresh&nbsp;object&nbsp;we&nbsp;can&nbsp;modify<a name="line_1841"></a></li>
<li id="line_1842" class="even"><span class="lineNumber">&nbsp;1842&nbsp;</span>				cell.grid&nbsp;=&nbsp;this.grid;&nbsp;//&nbsp;for&nbsp;CellDragListener's&nbsp;isCellsEqual.&nbsp;dragging&nbsp;between&nbsp;grids<a name="line_1842"></a></li>
<li id="line_1843" class="odd"><span class="lineNumber">&nbsp;1843&nbsp;</span><a name="line_1843"></a></li>
<li id="line_1844" class="even"><span class="lineNumber">&nbsp;1844&nbsp;</span>				//&nbsp;make&nbsp;the&nbsp;coordinates&nbsp;available&nbsp;on&nbsp;the&nbsp;cell&nbsp;object<a name="line_1844"></a></li>
<li id="line_1845" class="odd"><span class="lineNumber">&nbsp;1845&nbsp;</span>				$.extend(cell,&nbsp;rowCoords[hitRow],&nbsp;colCoords[hitCol]);<a name="line_1845"></a></li>
<li id="line_1846" class="even"><span class="lineNumber">&nbsp;1846&nbsp;</span><a name="line_1846"></a></li>
<li id="line_1847" class="odd"><span class="lineNumber">&nbsp;1847&nbsp;</span>				return&nbsp;cell;<a name="line_1847"></a></li>
<li id="line_1848" class="even"><span class="lineNumber">&nbsp;1848&nbsp;</span>			}<a name="line_1848"></a></li>
<li id="line_1849" class="odd"><span class="lineNumber">&nbsp;1849&nbsp;</span>		}<a name="line_1849"></a></li>
<li id="line_1850" class="even"><span class="lineNumber">&nbsp;1850&nbsp;</span><a name="line_1850"></a></li>
<li id="line_1851" class="odd"><span class="lineNumber">&nbsp;1851&nbsp;</span>		return&nbsp;null;<a name="line_1851"></a></li>
<li id="line_1852" class="even"><span class="lineNumber">&nbsp;1852&nbsp;</span>	},<a name="line_1852"></a></li>
<li id="line_1853" class="odd"><span class="lineNumber">&nbsp;1853&nbsp;</span><a name="line_1853"></a></li>
<li id="line_1854" class="even"><span class="lineNumber">&nbsp;1854&nbsp;</span><a name="line_1854"></a></li>
<li id="line_1855" class="odd"><span class="lineNumber">&nbsp;1855&nbsp;</span>	//&nbsp;If&nbsp;there&nbsp;is&nbsp;a&nbsp;containerEl,&nbsp;compute&nbsp;the&nbsp;bounds&nbsp;into&nbsp;min/max&nbsp;values<a name="line_1855"></a></li>
<li id="line_1856" class="even"><span class="lineNumber">&nbsp;1856&nbsp;</span>	computeBounds:&nbsp;function()&nbsp;{<a name="line_1856"></a></li>
<li id="line_1857" class="odd"><span class="lineNumber">&nbsp;1857&nbsp;</span>		this.bounds&nbsp;=&nbsp;this.containerEl&nbsp;?<a name="line_1857"></a></li>
<li id="line_1858" class="even"><span class="lineNumber">&nbsp;1858&nbsp;</span>			getClientRect(this.containerEl)&nbsp;:&nbsp;//&nbsp;area&nbsp;within&nbsp;scrollbars<a name="line_1858"></a></li>
<li id="line_1859" class="odd"><span class="lineNumber">&nbsp;1859&nbsp;</span>			null;<a name="line_1859"></a></li>
<li id="line_1860" class="even"><span class="lineNumber">&nbsp;1860&nbsp;</span>	},<a name="line_1860"></a></li>
<li id="line_1861" class="odd"><span class="lineNumber">&nbsp;1861&nbsp;</span><a name="line_1861"></a></li>
<li id="line_1862" class="even"><span class="lineNumber">&nbsp;1862&nbsp;</span><a name="line_1862"></a></li>
<li id="line_1863" class="odd"><span class="lineNumber">&nbsp;1863&nbsp;</span>	//&nbsp;Determines&nbsp;if&nbsp;the&nbsp;given&nbsp;coordinates&nbsp;are&nbsp;in&nbsp;bounds.&nbsp;If&nbsp;no&nbsp;`containerEl`,&nbsp;always&nbsp;true<a name="line_1863"></a></li>
<li id="line_1864" class="even"><span class="lineNumber">&nbsp;1864&nbsp;</span>	inBounds:&nbsp;function(x,&nbsp;y)&nbsp;{<a name="line_1864"></a></li>
<li id="line_1865" class="odd"><span class="lineNumber">&nbsp;1865&nbsp;</span>		var&nbsp;bounds&nbsp;=&nbsp;this.bounds;<a name="line_1865"></a></li>
<li id="line_1866" class="even"><span class="lineNumber">&nbsp;1866&nbsp;</span><a name="line_1866"></a></li>
<li id="line_1867" class="odd"><span class="lineNumber">&nbsp;1867&nbsp;</span>		if&nbsp;(bounds)&nbsp;{<a name="line_1867"></a></li>
<li id="line_1868" class="even"><span class="lineNumber">&nbsp;1868&nbsp;</span>			return&nbsp;x&nbsp;&gt;=&nbsp;bounds.left&nbsp;&amp;&amp;&nbsp;x&nbsp;&lt;&nbsp;bounds.right&nbsp;&amp;&amp;&nbsp;y&nbsp;&gt;=&nbsp;bounds.top&nbsp;&amp;&amp;&nbsp;y&nbsp;&lt;&nbsp;bounds.bottom;<a name="line_1868"></a></li>
<li id="line_1869" class="odd"><span class="lineNumber">&nbsp;1869&nbsp;</span>		}<a name="line_1869"></a></li>
<li id="line_1870" class="even"><span class="lineNumber">&nbsp;1870&nbsp;</span><a name="line_1870"></a></li>
<li id="line_1871" class="odd"><span class="lineNumber">&nbsp;1871&nbsp;</span>		return&nbsp;true;<a name="line_1871"></a></li>
<li id="line_1872" class="even"><span class="lineNumber">&nbsp;1872&nbsp;</span>	}<a name="line_1872"></a></li>
<li id="line_1873" class="odd"><span class="lineNumber">&nbsp;1873&nbsp;</span><a name="line_1873"></a></li>
<li id="line_1874" class="even"><span class="lineNumber">&nbsp;1874&nbsp;</span>});<a name="line_1874"></a></li>
<li id="line_1875" class="odd"><span class="lineNumber">&nbsp;1875&nbsp;</span><a name="line_1875"></a></li>
<li id="line_1876" class="even"><span class="lineNumber">&nbsp;1876&nbsp;</span><a name="line_1876"></a></li>
<li id="line_1877" class="odd"><span class="lineNumber">&nbsp;1877&nbsp;</span>/*&nbsp;Coordinate&nbsp;map&nbsp;that&nbsp;is&nbsp;a&nbsp;combination&nbsp;of&nbsp;multiple&nbsp;other&nbsp;coordinate&nbsp;maps<a name="line_1877"></a></li>
<li id="line_1878" class="even"><span class="lineNumber">&nbsp;1878&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_1878"></a></li>
<li id="line_1879" class="odd"><span class="lineNumber">&nbsp;1879&nbsp;</span><a name="line_1879"></a></li>
<li id="line_1880" class="even"><span class="lineNumber">&nbsp;1880&nbsp;</span>var&nbsp;ComboCoordMap&nbsp;=&nbsp;Class.extend({<a name="line_1880"></a></li>
<li id="line_1881" class="odd"><span class="lineNumber">&nbsp;1881&nbsp;</span><a name="line_1881"></a></li>
<li id="line_1882" class="even"><span class="lineNumber">&nbsp;1882&nbsp;</span>	coordMaps:&nbsp;null,&nbsp;//&nbsp;an&nbsp;array&nbsp;of&nbsp;CoordMaps<a name="line_1882"></a></li>
<li id="line_1883" class="odd"><span class="lineNumber">&nbsp;1883&nbsp;</span><a name="line_1883"></a></li>
<li id="line_1884" class="even"><span class="lineNumber">&nbsp;1884&nbsp;</span><a name="line_1884"></a></li>
<li id="line_1885" class="odd"><span class="lineNumber">&nbsp;1885&nbsp;</span>	constructor:&nbsp;function(coordMaps)&nbsp;{<a name="line_1885"></a></li>
<li id="line_1886" class="even"><span class="lineNumber">&nbsp;1886&nbsp;</span>		this.coordMaps&nbsp;=&nbsp;coordMaps;<a name="line_1886"></a></li>
<li id="line_1887" class="odd"><span class="lineNumber">&nbsp;1887&nbsp;</span>	},<a name="line_1887"></a></li>
<li id="line_1888" class="even"><span class="lineNumber">&nbsp;1888&nbsp;</span><a name="line_1888"></a></li>
<li id="line_1889" class="odd"><span class="lineNumber">&nbsp;1889&nbsp;</span><a name="line_1889"></a></li>
<li id="line_1890" class="even"><span class="lineNumber">&nbsp;1890&nbsp;</span>	//&nbsp;Builds&nbsp;all&nbsp;coordMaps<a name="line_1890"></a></li>
<li id="line_1891" class="odd"><span class="lineNumber">&nbsp;1891&nbsp;</span>	build:&nbsp;function()&nbsp;{<a name="line_1891"></a></li>
<li id="line_1892" class="even"><span class="lineNumber">&nbsp;1892&nbsp;</span>		var&nbsp;coordMaps&nbsp;=&nbsp;this.coordMaps;<a name="line_1892"></a></li>
<li id="line_1893" class="odd"><span class="lineNumber">&nbsp;1893&nbsp;</span>		var&nbsp;i;<a name="line_1893"></a></li>
<li id="line_1894" class="even"><span class="lineNumber">&nbsp;1894&nbsp;</span><a name="line_1894"></a></li>
<li id="line_1895" class="odd"><span class="lineNumber">&nbsp;1895&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;coordMaps.length;&nbsp;i++)&nbsp;{<a name="line_1895"></a></li>
<li id="line_1896" class="even"><span class="lineNumber">&nbsp;1896&nbsp;</span>			coordMaps[i].build();<a name="line_1896"></a></li>
<li id="line_1897" class="odd"><span class="lineNumber">&nbsp;1897&nbsp;</span>		}<a name="line_1897"></a></li>
<li id="line_1898" class="even"><span class="lineNumber">&nbsp;1898&nbsp;</span>	},<a name="line_1898"></a></li>
<li id="line_1899" class="odd"><span class="lineNumber">&nbsp;1899&nbsp;</span><a name="line_1899"></a></li>
<li id="line_1900" class="even"><span class="lineNumber">&nbsp;1900&nbsp;</span><a name="line_1900"></a></li>
<li id="line_1901" class="odd"><span class="lineNumber">&nbsp;1901&nbsp;</span>	//&nbsp;Queries&nbsp;all&nbsp;coordMaps&nbsp;for&nbsp;the&nbsp;cell&nbsp;underneath&nbsp;the&nbsp;given&nbsp;coordinates,&nbsp;returning&nbsp;the&nbsp;first&nbsp;result<a name="line_1901"></a></li>
<li id="line_1902" class="even"><span class="lineNumber">&nbsp;1902&nbsp;</span>	getCell:&nbsp;function(x,&nbsp;y)&nbsp;{<a name="line_1902"></a></li>
<li id="line_1903" class="odd"><span class="lineNumber">&nbsp;1903&nbsp;</span>		var&nbsp;coordMaps&nbsp;=&nbsp;this.coordMaps;<a name="line_1903"></a></li>
<li id="line_1904" class="even"><span class="lineNumber">&nbsp;1904&nbsp;</span>		var&nbsp;cell&nbsp;=&nbsp;null;<a name="line_1904"></a></li>
<li id="line_1905" class="odd"><span class="lineNumber">&nbsp;1905&nbsp;</span>		var&nbsp;i;<a name="line_1905"></a></li>
<li id="line_1906" class="even"><span class="lineNumber">&nbsp;1906&nbsp;</span><a name="line_1906"></a></li>
<li id="line_1907" class="odd"><span class="lineNumber">&nbsp;1907&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;coordMaps.length&nbsp;&amp;&amp;&nbsp;!cell;&nbsp;i++)&nbsp;{<a name="line_1907"></a></li>
<li id="line_1908" class="even"><span class="lineNumber">&nbsp;1908&nbsp;</span>			cell&nbsp;=&nbsp;coordMaps[i].getCell(x,&nbsp;y);<a name="line_1908"></a></li>
<li id="line_1909" class="odd"><span class="lineNumber">&nbsp;1909&nbsp;</span>		}<a name="line_1909"></a></li>
<li id="line_1910" class="even"><span class="lineNumber">&nbsp;1910&nbsp;</span><a name="line_1910"></a></li>
<li id="line_1911" class="odd"><span class="lineNumber">&nbsp;1911&nbsp;</span>		return&nbsp;cell;<a name="line_1911"></a></li>
<li id="line_1912" class="even"><span class="lineNumber">&nbsp;1912&nbsp;</span>	},<a name="line_1912"></a></li>
<li id="line_1913" class="odd"><span class="lineNumber">&nbsp;1913&nbsp;</span><a name="line_1913"></a></li>
<li id="line_1914" class="even"><span class="lineNumber">&nbsp;1914&nbsp;</span><a name="line_1914"></a></li>
<li id="line_1915" class="odd"><span class="lineNumber">&nbsp;1915&nbsp;</span>	//&nbsp;Clears&nbsp;all&nbsp;coordMaps<a name="line_1915"></a></li>
<li id="line_1916" class="even"><span class="lineNumber">&nbsp;1916&nbsp;</span>	clear:&nbsp;function()&nbsp;{<a name="line_1916"></a></li>
<li id="line_1917" class="odd"><span class="lineNumber">&nbsp;1917&nbsp;</span>		var&nbsp;coordMaps&nbsp;=&nbsp;this.coordMaps;<a name="line_1917"></a></li>
<li id="line_1918" class="even"><span class="lineNumber">&nbsp;1918&nbsp;</span>		var&nbsp;i;<a name="line_1918"></a></li>
<li id="line_1919" class="odd"><span class="lineNumber">&nbsp;1919&nbsp;</span><a name="line_1919"></a></li>
<li id="line_1920" class="even"><span class="lineNumber">&nbsp;1920&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;coordMaps.length;&nbsp;i++)&nbsp;{<a name="line_1920"></a></li>
<li id="line_1921" class="odd"><span class="lineNumber">&nbsp;1921&nbsp;</span>			coordMaps[i].clear();<a name="line_1921"></a></li>
<li id="line_1922" class="even"><span class="lineNumber">&nbsp;1922&nbsp;</span>		}<a name="line_1922"></a></li>
<li id="line_1923" class="odd"><span class="lineNumber">&nbsp;1923&nbsp;</span>	}<a name="line_1923"></a></li>
<li id="line_1924" class="even"><span class="lineNumber">&nbsp;1924&nbsp;</span><a name="line_1924"></a></li>
<li id="line_1925" class="odd"><span class="lineNumber">&nbsp;1925&nbsp;</span>});<a name="line_1925"></a></li>
<li id="line_1926" class="even"><span class="lineNumber">&nbsp;1926&nbsp;</span><a name="line_1926"></a></li>
<li id="line_1927" class="odd"><span class="lineNumber">&nbsp;1927&nbsp;</span>;;<a name="line_1927"></a></li>
<li id="line_1928" class="even"><span class="lineNumber">&nbsp;1928&nbsp;</span><a name="line_1928"></a></li>
<li id="line_1929" class="odd"><span class="lineNumber">&nbsp;1929&nbsp;</span>/*&nbsp;Tracks&nbsp;a&nbsp;drag's&nbsp;mouse&nbsp;movement,&nbsp;firing&nbsp;various&nbsp;handlers<a name="line_1929"></a></li>
<li id="line_1930" class="even"><span class="lineNumber">&nbsp;1930&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_1930"></a></li>
<li id="line_1931" class="odd"><span class="lineNumber">&nbsp;1931&nbsp;</span><a name="line_1931"></a></li>
<li id="line_1932" class="even"><span class="lineNumber">&nbsp;1932&nbsp;</span>var&nbsp;DragListener&nbsp;=&nbsp;fc.DragListener&nbsp;=&nbsp;Class.extend({<a name="line_1932"></a></li>
<li id="line_1933" class="odd"><span class="lineNumber">&nbsp;1933&nbsp;</span><a name="line_1933"></a></li>
<li id="line_1934" class="even"><span class="lineNumber">&nbsp;1934&nbsp;</span>	options:&nbsp;null,<a name="line_1934"></a></li>
<li id="line_1935" class="odd"><span class="lineNumber">&nbsp;1935&nbsp;</span><a name="line_1935"></a></li>
<li id="line_1936" class="even"><span class="lineNumber">&nbsp;1936&nbsp;</span>	isListening:&nbsp;false,<a name="line_1936"></a></li>
<li id="line_1937" class="odd"><span class="lineNumber">&nbsp;1937&nbsp;</span>	isDragging:&nbsp;false,<a name="line_1937"></a></li>
<li id="line_1938" class="even"><span class="lineNumber">&nbsp;1938&nbsp;</span><a name="line_1938"></a></li>
<li id="line_1939" class="odd"><span class="lineNumber">&nbsp;1939&nbsp;</span>	//&nbsp;coordinates&nbsp;of&nbsp;the&nbsp;initial&nbsp;mousedown<a name="line_1939"></a></li>
<li id="line_1940" class="even"><span class="lineNumber">&nbsp;1940&nbsp;</span>	originX:&nbsp;null,<a name="line_1940"></a></li>
<li id="line_1941" class="odd"><span class="lineNumber">&nbsp;1941&nbsp;</span>	originY:&nbsp;null,<a name="line_1941"></a></li>
<li id="line_1942" class="even"><span class="lineNumber">&nbsp;1942&nbsp;</span><a name="line_1942"></a></li>
<li id="line_1943" class="odd"><span class="lineNumber">&nbsp;1943&nbsp;</span>	//&nbsp;handler&nbsp;attached&nbsp;to&nbsp;the&nbsp;document,&nbsp;bound&nbsp;to&nbsp;the&nbsp;DragListener's&nbsp;`this`<a name="line_1943"></a></li>
<li id="line_1944" class="even"><span class="lineNumber">&nbsp;1944&nbsp;</span>	mousemoveProxy:&nbsp;null,<a name="line_1944"></a></li>
<li id="line_1945" class="odd"><span class="lineNumber">&nbsp;1945&nbsp;</span>	mouseupProxy:&nbsp;null,<a name="line_1945"></a></li>
<li id="line_1946" class="even"><span class="lineNumber">&nbsp;1946&nbsp;</span><a name="line_1946"></a></li>
<li id="line_1947" class="odd"><span class="lineNumber">&nbsp;1947&nbsp;</span>	//&nbsp;for&nbsp;IE8&nbsp;bug-fighting&nbsp;behavior,&nbsp;for&nbsp;now<a name="line_1947"></a></li>
<li id="line_1948" class="even"><span class="lineNumber">&nbsp;1948&nbsp;</span>	subjectEl:&nbsp;null,&nbsp;//&nbsp;the&nbsp;element&nbsp;being&nbsp;draged.&nbsp;optional<a name="line_1948"></a></li>
<li id="line_1949" class="odd"><span class="lineNumber">&nbsp;1949&nbsp;</span>	subjectHref:&nbsp;null,<a name="line_1949"></a></li>
<li id="line_1950" class="even"><span class="lineNumber">&nbsp;1950&nbsp;</span><a name="line_1950"></a></li>
<li id="line_1951" class="odd"><span class="lineNumber">&nbsp;1951&nbsp;</span>	scrollEl:&nbsp;null,<a name="line_1951"></a></li>
<li id="line_1952" class="even"><span class="lineNumber">&nbsp;1952&nbsp;</span>	scrollBounds:&nbsp;null,&nbsp;//&nbsp;{&nbsp;top,&nbsp;bottom,&nbsp;left,&nbsp;right&nbsp;}<a name="line_1952"></a></li>
<li id="line_1953" class="odd"><span class="lineNumber">&nbsp;1953&nbsp;</span>	scrollTopVel:&nbsp;null,&nbsp;//&nbsp;pixels&nbsp;per&nbsp;second<a name="line_1953"></a></li>
<li id="line_1954" class="even"><span class="lineNumber">&nbsp;1954&nbsp;</span>	scrollLeftVel:&nbsp;null,&nbsp;//&nbsp;pixels&nbsp;per&nbsp;second<a name="line_1954"></a></li>
<li id="line_1955" class="odd"><span class="lineNumber">&nbsp;1955&nbsp;</span>	scrollIntervalId:&nbsp;null,&nbsp;//&nbsp;ID&nbsp;of&nbsp;setTimeout&nbsp;for&nbsp;scrolling&nbsp;animation&nbsp;loop<a name="line_1955"></a></li>
<li id="line_1956" class="even"><span class="lineNumber">&nbsp;1956&nbsp;</span>	scrollHandlerProxy:&nbsp;null,&nbsp;//&nbsp;this-scoped&nbsp;function&nbsp;for&nbsp;handling&nbsp;when&nbsp;scrollEl&nbsp;is&nbsp;scrolled<a name="line_1956"></a></li>
<li id="line_1957" class="odd"><span class="lineNumber">&nbsp;1957&nbsp;</span><a name="line_1957"></a></li>
<li id="line_1958" class="even"><span class="lineNumber">&nbsp;1958&nbsp;</span>	scrollSensitivity:&nbsp;30,&nbsp;//&nbsp;pixels&nbsp;from&nbsp;edge&nbsp;for&nbsp;scrolling&nbsp;to&nbsp;start<a name="line_1958"></a></li>
<li id="line_1959" class="odd"><span class="lineNumber">&nbsp;1959&nbsp;</span>	scrollSpeed:&nbsp;200,&nbsp;//&nbsp;pixels&nbsp;per&nbsp;second,&nbsp;at&nbsp;maximum&nbsp;speed<a name="line_1959"></a></li>
<li id="line_1960" class="even"><span class="lineNumber">&nbsp;1960&nbsp;</span>	scrollIntervalMs:&nbsp;50,&nbsp;//&nbsp;millisecond&nbsp;wait&nbsp;between&nbsp;scroll&nbsp;increment<a name="line_1960"></a></li>
<li id="line_1961" class="odd"><span class="lineNumber">&nbsp;1961&nbsp;</span><a name="line_1961"></a></li>
<li id="line_1962" class="even"><span class="lineNumber">&nbsp;1962&nbsp;</span><a name="line_1962"></a></li>
<li id="line_1963" class="odd"><span class="lineNumber">&nbsp;1963&nbsp;</span>	constructor:&nbsp;function(options)&nbsp;{<a name="line_1963"></a></li>
<li id="line_1964" class="even"><span class="lineNumber">&nbsp;1964&nbsp;</span>		options&nbsp;=&nbsp;options&nbsp;||&nbsp;{};<a name="line_1964"></a></li>
<li id="line_1965" class="odd"><span class="lineNumber">&nbsp;1965&nbsp;</span>		this.options&nbsp;=&nbsp;options;<a name="line_1965"></a></li>
<li id="line_1966" class="even"><span class="lineNumber">&nbsp;1966&nbsp;</span>		this.subjectEl&nbsp;=&nbsp;options.subjectEl;<a name="line_1966"></a></li>
<li id="line_1967" class="odd"><span class="lineNumber">&nbsp;1967&nbsp;</span>	},<a name="line_1967"></a></li>
<li id="line_1968" class="even"><span class="lineNumber">&nbsp;1968&nbsp;</span><a name="line_1968"></a></li>
<li id="line_1969" class="odd"><span class="lineNumber">&nbsp;1969&nbsp;</span><a name="line_1969"></a></li>
<li id="line_1970" class="even"><span class="lineNumber">&nbsp;1970&nbsp;</span>	//&nbsp;Call&nbsp;this&nbsp;when&nbsp;the&nbsp;user&nbsp;does&nbsp;a&nbsp;mousedown.&nbsp;Will&nbsp;probably&nbsp;lead&nbsp;to&nbsp;startListening<a name="line_1970"></a></li>
<li id="line_1971" class="odd"><span class="lineNumber">&nbsp;1971&nbsp;</span>	mousedown:&nbsp;function(ev)&nbsp;{<a name="line_1971"></a></li>
<li id="line_1972" class="even"><span class="lineNumber">&nbsp;1972&nbsp;</span>		if&nbsp;(isPrimaryMouseButton(ev))&nbsp;{<a name="line_1972"></a></li>
<li id="line_1973" class="odd"><span class="lineNumber">&nbsp;1973&nbsp;</span><a name="line_1973"></a></li>
<li id="line_1974" class="even"><span class="lineNumber">&nbsp;1974&nbsp;</span>			ev.preventDefault();&nbsp;//&nbsp;prevents&nbsp;native&nbsp;selection&nbsp;in&nbsp;most&nbsp;browsers<a name="line_1974"></a></li>
<li id="line_1975" class="odd"><span class="lineNumber">&nbsp;1975&nbsp;</span><a name="line_1975"></a></li>
<li id="line_1976" class="even"><span class="lineNumber">&nbsp;1976&nbsp;</span>			this.startListening(ev);<a name="line_1976"></a></li>
<li id="line_1977" class="odd"><span class="lineNumber">&nbsp;1977&nbsp;</span><a name="line_1977"></a></li>
<li id="line_1978" class="even"><span class="lineNumber">&nbsp;1978&nbsp;</span>			//&nbsp;start&nbsp;the&nbsp;drag&nbsp;immediately&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;minimum&nbsp;distance&nbsp;for&nbsp;a&nbsp;drag&nbsp;start<a name="line_1978"></a></li>
<li id="line_1979" class="odd"><span class="lineNumber">&nbsp;1979&nbsp;</span>			if&nbsp;(!this.options.distance)&nbsp;{<a name="line_1979"></a></li>
<li id="line_1980" class="even"><span class="lineNumber">&nbsp;1980&nbsp;</span>				this.startDrag(ev);<a name="line_1980"></a></li>
<li id="line_1981" class="odd"><span class="lineNumber">&nbsp;1981&nbsp;</span>			}<a name="line_1981"></a></li>
<li id="line_1982" class="even"><span class="lineNumber">&nbsp;1982&nbsp;</span>		}<a name="line_1982"></a></li>
<li id="line_1983" class="odd"><span class="lineNumber">&nbsp;1983&nbsp;</span>	},<a name="line_1983"></a></li>
<li id="line_1984" class="even"><span class="lineNumber">&nbsp;1984&nbsp;</span><a name="line_1984"></a></li>
<li id="line_1985" class="odd"><span class="lineNumber">&nbsp;1985&nbsp;</span><a name="line_1985"></a></li>
<li id="line_1986" class="even"><span class="lineNumber">&nbsp;1986&nbsp;</span>	//&nbsp;Call&nbsp;this&nbsp;to&nbsp;start&nbsp;tracking&nbsp;mouse&nbsp;movements<a name="line_1986"></a></li>
<li id="line_1987" class="odd"><span class="lineNumber">&nbsp;1987&nbsp;</span>	startListening:&nbsp;function(ev)&nbsp;{<a name="line_1987"></a></li>
<li id="line_1988" class="even"><span class="lineNumber">&nbsp;1988&nbsp;</span>		var&nbsp;scrollParent;<a name="line_1988"></a></li>
<li id="line_1989" class="odd"><span class="lineNumber">&nbsp;1989&nbsp;</span><a name="line_1989"></a></li>
<li id="line_1990" class="even"><span class="lineNumber">&nbsp;1990&nbsp;</span>		if&nbsp;(!this.isListening)&nbsp;{<a name="line_1990"></a></li>
<li id="line_1991" class="odd"><span class="lineNumber">&nbsp;1991&nbsp;</span><a name="line_1991"></a></li>
<li id="line_1992" class="even"><span class="lineNumber">&nbsp;1992&nbsp;</span>			//&nbsp;grab&nbsp;scroll&nbsp;container&nbsp;and&nbsp;attach&nbsp;handler<a name="line_1992"></a></li>
<li id="line_1993" class="odd"><span class="lineNumber">&nbsp;1993&nbsp;</span>			if&nbsp;(ev&nbsp;&amp;&amp;&nbsp;this.options.scroll)&nbsp;{<a name="line_1993"></a></li>
<li id="line_1994" class="even"><span class="lineNumber">&nbsp;1994&nbsp;</span>				scrollParent&nbsp;=&nbsp;getScrollParent($(ev.target));<a name="line_1994"></a></li>
<li id="line_1995" class="odd"><span class="lineNumber">&nbsp;1995&nbsp;</span>				if&nbsp;(!scrollParent.is(window)&nbsp;&amp;&amp;&nbsp;!scrollParent.is(document))&nbsp;{<a name="line_1995"></a></li>
<li id="line_1996" class="even"><span class="lineNumber">&nbsp;1996&nbsp;</span>					this.scrollEl&nbsp;=&nbsp;scrollParent;<a name="line_1996"></a></li>
<li id="line_1997" class="odd"><span class="lineNumber">&nbsp;1997&nbsp;</span><a name="line_1997"></a></li>
<li id="line_1998" class="even"><span class="lineNumber">&nbsp;1998&nbsp;</span>					//&nbsp;scope&nbsp;to&nbsp;`this`,&nbsp;and&nbsp;use&nbsp;`debounce`&nbsp;to&nbsp;make&nbsp;sure&nbsp;rapid&nbsp;calls&nbsp;don't&nbsp;happen<a name="line_1998"></a></li>
<li id="line_1999" class="odd"><span class="lineNumber">&nbsp;1999&nbsp;</span>					this.scrollHandlerProxy&nbsp;=&nbsp;debounce(proxy(this,&nbsp;'scrollHandler'),&nbsp;100);<a name="line_1999"></a></li>
<li id="line_2000" class="even"><span class="lineNumber">&nbsp;2000&nbsp;</span>					this.scrollEl.on('scroll',&nbsp;this.scrollHandlerProxy);<a name="line_2000"></a></li>
<li id="line_2001" class="odd"><span class="lineNumber">&nbsp;2001&nbsp;</span>				}<a name="line_2001"></a></li>
<li id="line_2002" class="even"><span class="lineNumber">&nbsp;2002&nbsp;</span>			}<a name="line_2002"></a></li>
<li id="line_2003" class="odd"><span class="lineNumber">&nbsp;2003&nbsp;</span><a name="line_2003"></a></li>
<li id="line_2004" class="even"><span class="lineNumber">&nbsp;2004&nbsp;</span>			$(document)<a name="line_2004"></a></li>
<li id="line_2005" class="odd"><span class="lineNumber">&nbsp;2005&nbsp;</span>				.on('mousemove',&nbsp;this.mousemoveProxy&nbsp;=&nbsp;proxy(this,&nbsp;'mousemove'))<a name="line_2005"></a></li>
<li id="line_2006" class="even"><span class="lineNumber">&nbsp;2006&nbsp;</span>				.on('mouseup',&nbsp;this.mouseupProxy&nbsp;=&nbsp;proxy(this,&nbsp;'mouseup'))<a name="line_2006"></a></li>
<li id="line_2007" class="odd"><span class="lineNumber">&nbsp;2007&nbsp;</span>				.on('selectstart',&nbsp;this.preventDefault);&nbsp;//&nbsp;prevents&nbsp;native&nbsp;selection&nbsp;in&nbsp;IE&lt;=8<a name="line_2007"></a></li>
<li id="line_2008" class="even"><span class="lineNumber">&nbsp;2008&nbsp;</span><a name="line_2008"></a></li>
<li id="line_2009" class="odd"><span class="lineNumber">&nbsp;2009&nbsp;</span>			if&nbsp;(ev)&nbsp;{<a name="line_2009"></a></li>
<li id="line_2010" class="even"><span class="lineNumber">&nbsp;2010&nbsp;</span>				this.originX&nbsp;=&nbsp;ev.pageX;<a name="line_2010"></a></li>
<li id="line_2011" class="odd"><span class="lineNumber">&nbsp;2011&nbsp;</span>				this.originY&nbsp;=&nbsp;ev.pageY;<a name="line_2011"></a></li>
<li id="line_2012" class="even"><span class="lineNumber">&nbsp;2012&nbsp;</span>			}<a name="line_2012"></a></li>
<li id="line_2013" class="odd"><span class="lineNumber">&nbsp;2013&nbsp;</span>			else&nbsp;{<a name="line_2013"></a></li>
<li id="line_2014" class="even"><span class="lineNumber">&nbsp;2014&nbsp;</span>				//&nbsp;if&nbsp;no&nbsp;starting&nbsp;information&nbsp;was&nbsp;given,&nbsp;origin&nbsp;will&nbsp;be&nbsp;the&nbsp;topleft&nbsp;corner&nbsp;of&nbsp;the&nbsp;screen.<a name="line_2014"></a></li>
<li id="line_2015" class="odd"><span class="lineNumber">&nbsp;2015&nbsp;</span>				//&nbsp;if&nbsp;so,&nbsp;dx/dy&nbsp;in&nbsp;the&nbsp;future&nbsp;will&nbsp;be&nbsp;the&nbsp;absolute&nbsp;coordinates.<a name="line_2015"></a></li>
<li id="line_2016" class="even"><span class="lineNumber">&nbsp;2016&nbsp;</span>				this.originX&nbsp;=&nbsp;0;<a name="line_2016"></a></li>
<li id="line_2017" class="odd"><span class="lineNumber">&nbsp;2017&nbsp;</span>				this.originY&nbsp;=&nbsp;0;<a name="line_2017"></a></li>
<li id="line_2018" class="even"><span class="lineNumber">&nbsp;2018&nbsp;</span>			}<a name="line_2018"></a></li>
<li id="line_2019" class="odd"><span class="lineNumber">&nbsp;2019&nbsp;</span><a name="line_2019"></a></li>
<li id="line_2020" class="even"><span class="lineNumber">&nbsp;2020&nbsp;</span>			this.isListening&nbsp;=&nbsp;true;<a name="line_2020"></a></li>
<li id="line_2021" class="odd"><span class="lineNumber">&nbsp;2021&nbsp;</span>			this.listenStart(ev);<a name="line_2021"></a></li>
<li id="line_2022" class="even"><span class="lineNumber">&nbsp;2022&nbsp;</span>		}<a name="line_2022"></a></li>
<li id="line_2023" class="odd"><span class="lineNumber">&nbsp;2023&nbsp;</span>	},<a name="line_2023"></a></li>
<li id="line_2024" class="even"><span class="lineNumber">&nbsp;2024&nbsp;</span><a name="line_2024"></a></li>
<li id="line_2025" class="odd"><span class="lineNumber">&nbsp;2025&nbsp;</span><a name="line_2025"></a></li>
<li id="line_2026" class="even"><span class="lineNumber">&nbsp;2026&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;drag&nbsp;listening&nbsp;has&nbsp;started&nbsp;(but&nbsp;a&nbsp;real&nbsp;drag&nbsp;has&nbsp;not&nbsp;necessarily&nbsp;began)<a name="line_2026"></a></li>
<li id="line_2027" class="odd"><span class="lineNumber">&nbsp;2027&nbsp;</span>	listenStart:&nbsp;function(ev)&nbsp;{<a name="line_2027"></a></li>
<li id="line_2028" class="even"><span class="lineNumber">&nbsp;2028&nbsp;</span>		this.trigger('listenStart',&nbsp;ev);<a name="line_2028"></a></li>
<li id="line_2029" class="odd"><span class="lineNumber">&nbsp;2029&nbsp;</span>	},<a name="line_2029"></a></li>
<li id="line_2030" class="even"><span class="lineNumber">&nbsp;2030&nbsp;</span><a name="line_2030"></a></li>
<li id="line_2031" class="odd"><span class="lineNumber">&nbsp;2031&nbsp;</span><a name="line_2031"></a></li>
<li id="line_2032" class="even"><span class="lineNumber">&nbsp;2032&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;the&nbsp;user&nbsp;moves&nbsp;the&nbsp;mouse<a name="line_2032"></a></li>
<li id="line_2033" class="odd"><span class="lineNumber">&nbsp;2033&nbsp;</span>	mousemove:&nbsp;function(ev)&nbsp;{<a name="line_2033"></a></li>
<li id="line_2034" class="even"><span class="lineNumber">&nbsp;2034&nbsp;</span>		var&nbsp;dx&nbsp;=&nbsp;ev.pageX&nbsp;-&nbsp;this.originX;<a name="line_2034"></a></li>
<li id="line_2035" class="odd"><span class="lineNumber">&nbsp;2035&nbsp;</span>		var&nbsp;dy&nbsp;=&nbsp;ev.pageY&nbsp;-&nbsp;this.originY;<a name="line_2035"></a></li>
<li id="line_2036" class="even"><span class="lineNumber">&nbsp;2036&nbsp;</span>		var&nbsp;minDistance;<a name="line_2036"></a></li>
<li id="line_2037" class="odd"><span class="lineNumber">&nbsp;2037&nbsp;</span>		var&nbsp;distanceSq;&nbsp;//&nbsp;current&nbsp;distance&nbsp;from&nbsp;the&nbsp;origin,&nbsp;squared<a name="line_2037"></a></li>
<li id="line_2038" class="even"><span class="lineNumber">&nbsp;2038&nbsp;</span><a name="line_2038"></a></li>
<li id="line_2039" class="odd"><span class="lineNumber">&nbsp;2039&nbsp;</span>		if&nbsp;(!this.isDragging)&nbsp;{&nbsp;//&nbsp;if&nbsp;not&nbsp;already&nbsp;dragging...<a name="line_2039"></a></li>
<li id="line_2040" class="even"><span class="lineNumber">&nbsp;2040&nbsp;</span>			//&nbsp;then&nbsp;start&nbsp;the&nbsp;drag&nbsp;if&nbsp;the&nbsp;minimum&nbsp;distance&nbsp;criteria&nbsp;is&nbsp;met<a name="line_2040"></a></li>
<li id="line_2041" class="odd"><span class="lineNumber">&nbsp;2041&nbsp;</span>			minDistance&nbsp;=&nbsp;this.options.distance&nbsp;||&nbsp;1;<a name="line_2041"></a></li>
<li id="line_2042" class="even"><span class="lineNumber">&nbsp;2042&nbsp;</span>			distanceSq&nbsp;=&nbsp;dx&nbsp;*&nbsp;dx&nbsp;+&nbsp;dy&nbsp;*&nbsp;dy;<a name="line_2042"></a></li>
<li id="line_2043" class="odd"><span class="lineNumber">&nbsp;2043&nbsp;</span>			if&nbsp;(distanceSq&nbsp;&gt;=&nbsp;minDistance&nbsp;*&nbsp;minDistance)&nbsp;{&nbsp;//&nbsp;use&nbsp;pythagorean&nbsp;theorem<a name="line_2043"></a></li>
<li id="line_2044" class="even"><span class="lineNumber">&nbsp;2044&nbsp;</span>				this.startDrag(ev);<a name="line_2044"></a></li>
<li id="line_2045" class="odd"><span class="lineNumber">&nbsp;2045&nbsp;</span>			}<a name="line_2045"></a></li>
<li id="line_2046" class="even"><span class="lineNumber">&nbsp;2046&nbsp;</span>		}<a name="line_2046"></a></li>
<li id="line_2047" class="odd"><span class="lineNumber">&nbsp;2047&nbsp;</span><a name="line_2047"></a></li>
<li id="line_2048" class="even"><span class="lineNumber">&nbsp;2048&nbsp;</span>		if&nbsp;(this.isDragging)&nbsp;{<a name="line_2048"></a></li>
<li id="line_2049" class="odd"><span class="lineNumber">&nbsp;2049&nbsp;</span>			this.drag(dx,&nbsp;dy,&nbsp;ev);&nbsp;//&nbsp;report&nbsp;a&nbsp;drag,&nbsp;even&nbsp;if&nbsp;this&nbsp;mousemove&nbsp;initiated&nbsp;the&nbsp;drag<a name="line_2049"></a></li>
<li id="line_2050" class="even"><span class="lineNumber">&nbsp;2050&nbsp;</span>		}<a name="line_2050"></a></li>
<li id="line_2051" class="odd"><span class="lineNumber">&nbsp;2051&nbsp;</span>	},<a name="line_2051"></a></li>
<li id="line_2052" class="even"><span class="lineNumber">&nbsp;2052&nbsp;</span><a name="line_2052"></a></li>
<li id="line_2053" class="odd"><span class="lineNumber">&nbsp;2053&nbsp;</span><a name="line_2053"></a></li>
<li id="line_2054" class="even"><span class="lineNumber">&nbsp;2054&nbsp;</span>	//&nbsp;Call&nbsp;this&nbsp;to&nbsp;initiate&nbsp;a&nbsp;legitimate&nbsp;drag.<a name="line_2054"></a></li>
<li id="line_2055" class="odd"><span class="lineNumber">&nbsp;2055&nbsp;</span>	//&nbsp;This&nbsp;function&nbsp;is&nbsp;called&nbsp;internally&nbsp;from&nbsp;this&nbsp;class,&nbsp;but&nbsp;can&nbsp;also&nbsp;be&nbsp;called&nbsp;explicitly&nbsp;from&nbsp;outside<a name="line_2055"></a></li>
<li id="line_2056" class="even"><span class="lineNumber">&nbsp;2056&nbsp;</span>	startDrag:&nbsp;function(ev)&nbsp;{<a name="line_2056"></a></li>
<li id="line_2057" class="odd"><span class="lineNumber">&nbsp;2057&nbsp;</span><a name="line_2057"></a></li>
<li id="line_2058" class="even"><span class="lineNumber">&nbsp;2058&nbsp;</span>		if&nbsp;(!this.isListening)&nbsp;{&nbsp;//&nbsp;startDrag&nbsp;must&nbsp;have&nbsp;manually&nbsp;initiated<a name="line_2058"></a></li>
<li id="line_2059" class="odd"><span class="lineNumber">&nbsp;2059&nbsp;</span>			this.startListening();<a name="line_2059"></a></li>
<li id="line_2060" class="even"><span class="lineNumber">&nbsp;2060&nbsp;</span>		}<a name="line_2060"></a></li>
<li id="line_2061" class="odd"><span class="lineNumber">&nbsp;2061&nbsp;</span><a name="line_2061"></a></li>
<li id="line_2062" class="even"><span class="lineNumber">&nbsp;2062&nbsp;</span>		if&nbsp;(!this.isDragging)&nbsp;{<a name="line_2062"></a></li>
<li id="line_2063" class="odd"><span class="lineNumber">&nbsp;2063&nbsp;</span>			this.isDragging&nbsp;=&nbsp;true;<a name="line_2063"></a></li>
<li id="line_2064" class="even"><span class="lineNumber">&nbsp;2064&nbsp;</span>			this.dragStart(ev);<a name="line_2064"></a></li>
<li id="line_2065" class="odd"><span class="lineNumber">&nbsp;2065&nbsp;</span>		}<a name="line_2065"></a></li>
<li id="line_2066" class="even"><span class="lineNumber">&nbsp;2066&nbsp;</span>	},<a name="line_2066"></a></li>
<li id="line_2067" class="odd"><span class="lineNumber">&nbsp;2067&nbsp;</span><a name="line_2067"></a></li>
<li id="line_2068" class="even"><span class="lineNumber">&nbsp;2068&nbsp;</span><a name="line_2068"></a></li>
<li id="line_2069" class="odd"><span class="lineNumber">&nbsp;2069&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;the&nbsp;actual&nbsp;drag&nbsp;has&nbsp;started&nbsp;(went&nbsp;beyond&nbsp;minDistance)<a name="line_2069"></a></li>
<li id="line_2070" class="even"><span class="lineNumber">&nbsp;2070&nbsp;</span>	dragStart:&nbsp;function(ev)&nbsp;{<a name="line_2070"></a></li>
<li id="line_2071" class="odd"><span class="lineNumber">&nbsp;2071&nbsp;</span>		var&nbsp;subjectEl&nbsp;=&nbsp;this.subjectEl;<a name="line_2071"></a></li>
<li id="line_2072" class="even"><span class="lineNumber">&nbsp;2072&nbsp;</span><a name="line_2072"></a></li>
<li id="line_2073" class="odd"><span class="lineNumber">&nbsp;2073&nbsp;</span>		this.trigger('dragStart',&nbsp;ev);<a name="line_2073"></a></li>
<li id="line_2074" class="even"><span class="lineNumber">&nbsp;2074&nbsp;</span><a name="line_2074"></a></li>
<li id="line_2075" class="odd"><span class="lineNumber">&nbsp;2075&nbsp;</span>		//&nbsp;remove&nbsp;a&nbsp;mousedown'd&nbsp;&lt;a&gt;'s&nbsp;href&nbsp;so&nbsp;it&nbsp;is&nbsp;not&nbsp;visited&nbsp;(IE8&nbsp;bug)<a name="line_2075"></a></li>
<li id="line_2076" class="even"><span class="lineNumber">&nbsp;2076&nbsp;</span>		if&nbsp;((this.subjectHref&nbsp;=&nbsp;subjectEl&nbsp;?&nbsp;subjectEl.attr('href')&nbsp;:&nbsp;null))&nbsp;{<a name="line_2076"></a></li>
<li id="line_2077" class="odd"><span class="lineNumber">&nbsp;2077&nbsp;</span>			subjectEl.removeAttr('href');<a name="line_2077"></a></li>
<li id="line_2078" class="even"><span class="lineNumber">&nbsp;2078&nbsp;</span>		}<a name="line_2078"></a></li>
<li id="line_2079" class="odd"><span class="lineNumber">&nbsp;2079&nbsp;</span>	},<a name="line_2079"></a></li>
<li id="line_2080" class="even"><span class="lineNumber">&nbsp;2080&nbsp;</span><a name="line_2080"></a></li>
<li id="line_2081" class="odd"><span class="lineNumber">&nbsp;2081&nbsp;</span><a name="line_2081"></a></li>
<li id="line_2082" class="even"><span class="lineNumber">&nbsp;2082&nbsp;</span>	//&nbsp;Called&nbsp;while&nbsp;the&nbsp;mouse&nbsp;is&nbsp;being&nbsp;moved&nbsp;and&nbsp;when&nbsp;we&nbsp;know&nbsp;a&nbsp;legitimate&nbsp;drag&nbsp;is&nbsp;taking&nbsp;place<a name="line_2082"></a></li>
<li id="line_2083" class="odd"><span class="lineNumber">&nbsp;2083&nbsp;</span>	drag:&nbsp;function(dx,&nbsp;dy,&nbsp;ev)&nbsp;{<a name="line_2083"></a></li>
<li id="line_2084" class="even"><span class="lineNumber">&nbsp;2084&nbsp;</span>		this.trigger('drag',&nbsp;dx,&nbsp;dy,&nbsp;ev);<a name="line_2084"></a></li>
<li id="line_2085" class="odd"><span class="lineNumber">&nbsp;2085&nbsp;</span>		this.updateScroll(ev);&nbsp;//&nbsp;will&nbsp;possibly&nbsp;cause&nbsp;scrolling<a name="line_2085"></a></li>
<li id="line_2086" class="even"><span class="lineNumber">&nbsp;2086&nbsp;</span>	},<a name="line_2086"></a></li>
<li id="line_2087" class="odd"><span class="lineNumber">&nbsp;2087&nbsp;</span><a name="line_2087"></a></li>
<li id="line_2088" class="even"><span class="lineNumber">&nbsp;2088&nbsp;</span><a name="line_2088"></a></li>
<li id="line_2089" class="odd"><span class="lineNumber">&nbsp;2089&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;the&nbsp;user&nbsp;does&nbsp;a&nbsp;mouseup<a name="line_2089"></a></li>
<li id="line_2090" class="even"><span class="lineNumber">&nbsp;2090&nbsp;</span>	mouseup:&nbsp;function(ev)&nbsp;{<a name="line_2090"></a></li>
<li id="line_2091" class="odd"><span class="lineNumber">&nbsp;2091&nbsp;</span>		this.stopListening(ev);<a name="line_2091"></a></li>
<li id="line_2092" class="even"><span class="lineNumber">&nbsp;2092&nbsp;</span>	},<a name="line_2092"></a></li>
<li id="line_2093" class="odd"><span class="lineNumber">&nbsp;2093&nbsp;</span><a name="line_2093"></a></li>
<li id="line_2094" class="even"><span class="lineNumber">&nbsp;2094&nbsp;</span><a name="line_2094"></a></li>
<li id="line_2095" class="odd"><span class="lineNumber">&nbsp;2095&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;the&nbsp;drag&nbsp;is&nbsp;over.&nbsp;Will&nbsp;not&nbsp;cause&nbsp;listening&nbsp;to&nbsp;stop&nbsp;however.<a name="line_2095"></a></li>
<li id="line_2096" class="even"><span class="lineNumber">&nbsp;2096&nbsp;</span>	//&nbsp;A&nbsp;concluding&nbsp;'cellOut'&nbsp;event&nbsp;will&nbsp;NOT&nbsp;be&nbsp;triggered.<a name="line_2096"></a></li>
<li id="line_2097" class="odd"><span class="lineNumber">&nbsp;2097&nbsp;</span>	stopDrag:&nbsp;function(ev)&nbsp;{<a name="line_2097"></a></li>
<li id="line_2098" class="even"><span class="lineNumber">&nbsp;2098&nbsp;</span>		if&nbsp;(this.isDragging)&nbsp;{<a name="line_2098"></a></li>
<li id="line_2099" class="odd"><span class="lineNumber">&nbsp;2099&nbsp;</span>			this.stopScrolling();<a name="line_2099"></a></li>
<li id="line_2100" class="even"><span class="lineNumber">&nbsp;2100&nbsp;</span>			this.dragStop(ev);<a name="line_2100"></a></li>
<li id="line_2101" class="odd"><span class="lineNumber">&nbsp;2101&nbsp;</span>			this.isDragging&nbsp;=&nbsp;false;<a name="line_2101"></a></li>
<li id="line_2102" class="even"><span class="lineNumber">&nbsp;2102&nbsp;</span>		}<a name="line_2102"></a></li>
<li id="line_2103" class="odd"><span class="lineNumber">&nbsp;2103&nbsp;</span>	},<a name="line_2103"></a></li>
<li id="line_2104" class="even"><span class="lineNumber">&nbsp;2104&nbsp;</span><a name="line_2104"></a></li>
<li id="line_2105" class="odd"><span class="lineNumber">&nbsp;2105&nbsp;</span><a name="line_2105"></a></li>
<li id="line_2106" class="even"><span class="lineNumber">&nbsp;2106&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;dragging&nbsp;has&nbsp;been&nbsp;stopped<a name="line_2106"></a></li>
<li id="line_2107" class="odd"><span class="lineNumber">&nbsp;2107&nbsp;</span>	dragStop:&nbsp;function(ev)&nbsp;{<a name="line_2107"></a></li>
<li id="line_2108" class="even"><span class="lineNumber">&nbsp;2108&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_2108"></a></li>
<li id="line_2109" class="odd"><span class="lineNumber">&nbsp;2109&nbsp;</span><a name="line_2109"></a></li>
<li id="line_2110" class="even"><span class="lineNumber">&nbsp;2110&nbsp;</span>		this.trigger('dragStop',&nbsp;ev);<a name="line_2110"></a></li>
<li id="line_2111" class="odd"><span class="lineNumber">&nbsp;2111&nbsp;</span><a name="line_2111"></a></li>
<li id="line_2112" class="even"><span class="lineNumber">&nbsp;2112&nbsp;</span>		//&nbsp;restore&nbsp;a&nbsp;mousedown'd&nbsp;&lt;a&gt;'s&nbsp;href&nbsp;(for&nbsp;IE8&nbsp;bug)<a name="line_2112"></a></li>
<li id="line_2113" class="odd"><span class="lineNumber">&nbsp;2113&nbsp;</span>		setTimeout(function()&nbsp;{&nbsp;//&nbsp;must&nbsp;be&nbsp;outside&nbsp;of&nbsp;the&nbsp;click's&nbsp;execution<a name="line_2113"></a></li>
<li id="line_2114" class="even"><span class="lineNumber">&nbsp;2114&nbsp;</span>			if&nbsp;(_this.subjectHref)&nbsp;{<a name="line_2114"></a></li>
<li id="line_2115" class="odd"><span class="lineNumber">&nbsp;2115&nbsp;</span>				_this.subjectEl.attr('href',&nbsp;_this.subjectHref);<a name="line_2115"></a></li>
<li id="line_2116" class="even"><span class="lineNumber">&nbsp;2116&nbsp;</span>			}<a name="line_2116"></a></li>
<li id="line_2117" class="odd"><span class="lineNumber">&nbsp;2117&nbsp;</span>		},&nbsp;0);<a name="line_2117"></a></li>
<li id="line_2118" class="even"><span class="lineNumber">&nbsp;2118&nbsp;</span>	},<a name="line_2118"></a></li>
<li id="line_2119" class="odd"><span class="lineNumber">&nbsp;2119&nbsp;</span><a name="line_2119"></a></li>
<li id="line_2120" class="even"><span class="lineNumber">&nbsp;2120&nbsp;</span><a name="line_2120"></a></li>
<li id="line_2121" class="odd"><span class="lineNumber">&nbsp;2121&nbsp;</span>	//&nbsp;Call&nbsp;this&nbsp;to&nbsp;stop&nbsp;listening&nbsp;to&nbsp;the&nbsp;user's&nbsp;mouse&nbsp;events<a name="line_2121"></a></li>
<li id="line_2122" class="even"><span class="lineNumber">&nbsp;2122&nbsp;</span>	stopListening:&nbsp;function(ev)&nbsp;{<a name="line_2122"></a></li>
<li id="line_2123" class="odd"><span class="lineNumber">&nbsp;2123&nbsp;</span>		this.stopDrag(ev);&nbsp;//&nbsp;if&nbsp;there's&nbsp;a&nbsp;current&nbsp;drag,&nbsp;kill&nbsp;it<a name="line_2123"></a></li>
<li id="line_2124" class="even"><span class="lineNumber">&nbsp;2124&nbsp;</span><a name="line_2124"></a></li>
<li id="line_2125" class="odd"><span class="lineNumber">&nbsp;2125&nbsp;</span>		if&nbsp;(this.isListening)&nbsp;{<a name="line_2125"></a></li>
<li id="line_2126" class="even"><span class="lineNumber">&nbsp;2126&nbsp;</span><a name="line_2126"></a></li>
<li id="line_2127" class="odd"><span class="lineNumber">&nbsp;2127&nbsp;</span>			//&nbsp;remove&nbsp;the&nbsp;scroll&nbsp;handler&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;scrollEl<a name="line_2127"></a></li>
<li id="line_2128" class="even"><span class="lineNumber">&nbsp;2128&nbsp;</span>			if&nbsp;(this.scrollEl)&nbsp;{<a name="line_2128"></a></li>
<li id="line_2129" class="odd"><span class="lineNumber">&nbsp;2129&nbsp;</span>				this.scrollEl.off('scroll',&nbsp;this.scrollHandlerProxy);<a name="line_2129"></a></li>
<li id="line_2130" class="even"><span class="lineNumber">&nbsp;2130&nbsp;</span>				this.scrollHandlerProxy&nbsp;=&nbsp;null;<a name="line_2130"></a></li>
<li id="line_2131" class="odd"><span class="lineNumber">&nbsp;2131&nbsp;</span>			}<a name="line_2131"></a></li>
<li id="line_2132" class="even"><span class="lineNumber">&nbsp;2132&nbsp;</span><a name="line_2132"></a></li>
<li id="line_2133" class="odd"><span class="lineNumber">&nbsp;2133&nbsp;</span>			$(document)<a name="line_2133"></a></li>
<li id="line_2134" class="even"><span class="lineNumber">&nbsp;2134&nbsp;</span>				.off('mousemove',&nbsp;this.mousemoveProxy)<a name="line_2134"></a></li>
<li id="line_2135" class="odd"><span class="lineNumber">&nbsp;2135&nbsp;</span>				.off('mouseup',&nbsp;this.mouseupProxy)<a name="line_2135"></a></li>
<li id="line_2136" class="even"><span class="lineNumber">&nbsp;2136&nbsp;</span>				.off('selectstart',&nbsp;this.preventDefault);<a name="line_2136"></a></li>
<li id="line_2137" class="odd"><span class="lineNumber">&nbsp;2137&nbsp;</span><a name="line_2137"></a></li>
<li id="line_2138" class="even"><span class="lineNumber">&nbsp;2138&nbsp;</span>			this.mousemoveProxy&nbsp;=&nbsp;null;<a name="line_2138"></a></li>
<li id="line_2139" class="odd"><span class="lineNumber">&nbsp;2139&nbsp;</span>			this.mouseupProxy&nbsp;=&nbsp;null;<a name="line_2139"></a></li>
<li id="line_2140" class="even"><span class="lineNumber">&nbsp;2140&nbsp;</span><a name="line_2140"></a></li>
<li id="line_2141" class="odd"><span class="lineNumber">&nbsp;2141&nbsp;</span>			this.isListening&nbsp;=&nbsp;false;<a name="line_2141"></a></li>
<li id="line_2142" class="even"><span class="lineNumber">&nbsp;2142&nbsp;</span>			this.listenStop(ev);<a name="line_2142"></a></li>
<li id="line_2143" class="odd"><span class="lineNumber">&nbsp;2143&nbsp;</span>		}<a name="line_2143"></a></li>
<li id="line_2144" class="even"><span class="lineNumber">&nbsp;2144&nbsp;</span>	},<a name="line_2144"></a></li>
<li id="line_2145" class="odd"><span class="lineNumber">&nbsp;2145&nbsp;</span><a name="line_2145"></a></li>
<li id="line_2146" class="even"><span class="lineNumber">&nbsp;2146&nbsp;</span><a name="line_2146"></a></li>
<li id="line_2147" class="odd"><span class="lineNumber">&nbsp;2147&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;drag&nbsp;listening&nbsp;has&nbsp;stopped<a name="line_2147"></a></li>
<li id="line_2148" class="even"><span class="lineNumber">&nbsp;2148&nbsp;</span>	listenStop:&nbsp;function(ev)&nbsp;{<a name="line_2148"></a></li>
<li id="line_2149" class="odd"><span class="lineNumber">&nbsp;2149&nbsp;</span>		this.trigger('listenStop',&nbsp;ev);<a name="line_2149"></a></li>
<li id="line_2150" class="even"><span class="lineNumber">&nbsp;2150&nbsp;</span>	},<a name="line_2150"></a></li>
<li id="line_2151" class="odd"><span class="lineNumber">&nbsp;2151&nbsp;</span><a name="line_2151"></a></li>
<li id="line_2152" class="even"><span class="lineNumber">&nbsp;2152&nbsp;</span><a name="line_2152"></a></li>
<li id="line_2153" class="odd"><span class="lineNumber">&nbsp;2153&nbsp;</span>	//&nbsp;Triggers&nbsp;a&nbsp;callback.&nbsp;Calls&nbsp;a&nbsp;function&nbsp;in&nbsp;the&nbsp;option&nbsp;hash&nbsp;of&nbsp;the&nbsp;same&nbsp;name.<a name="line_2153"></a></li>
<li id="line_2154" class="even"><span class="lineNumber">&nbsp;2154&nbsp;</span>	//&nbsp;Arguments&nbsp;beyond&nbsp;the&nbsp;first&nbsp;`name`&nbsp;are&nbsp;forwarded&nbsp;on.<a name="line_2154"></a></li>
<li id="line_2155" class="odd"><span class="lineNumber">&nbsp;2155&nbsp;</span>	trigger:&nbsp;function(name)&nbsp;{<a name="line_2155"></a></li>
<li id="line_2156" class="even"><span class="lineNumber">&nbsp;2156&nbsp;</span>		if&nbsp;(this.options[name])&nbsp;{<a name="line_2156"></a></li>
<li id="line_2157" class="odd"><span class="lineNumber">&nbsp;2157&nbsp;</span>			this.options[name].apply(this,&nbsp;Array.prototype.slice.call(arguments,&nbsp;1));<a name="line_2157"></a></li>
<li id="line_2158" class="even"><span class="lineNumber">&nbsp;2158&nbsp;</span>		}<a name="line_2158"></a></li>
<li id="line_2159" class="odd"><span class="lineNumber">&nbsp;2159&nbsp;</span>	},<a name="line_2159"></a></li>
<li id="line_2160" class="even"><span class="lineNumber">&nbsp;2160&nbsp;</span><a name="line_2160"></a></li>
<li id="line_2161" class="odd"><span class="lineNumber">&nbsp;2161&nbsp;</span><a name="line_2161"></a></li>
<li id="line_2162" class="even"><span class="lineNumber">&nbsp;2162&nbsp;</span>	//&nbsp;Stops&nbsp;a&nbsp;given&nbsp;mouse&nbsp;event&nbsp;from&nbsp;doing&nbsp;it's&nbsp;native&nbsp;browser&nbsp;action.&nbsp;In&nbsp;our&nbsp;case,&nbsp;text&nbsp;selection.<a name="line_2162"></a></li>
<li id="line_2163" class="odd"><span class="lineNumber">&nbsp;2163&nbsp;</span>	preventDefault:&nbsp;function(ev)&nbsp;{<a name="line_2163"></a></li>
<li id="line_2164" class="even"><span class="lineNumber">&nbsp;2164&nbsp;</span>		ev.preventDefault();<a name="line_2164"></a></li>
<li id="line_2165" class="odd"><span class="lineNumber">&nbsp;2165&nbsp;</span>	},<a name="line_2165"></a></li>
<li id="line_2166" class="even"><span class="lineNumber">&nbsp;2166&nbsp;</span><a name="line_2166"></a></li>
<li id="line_2167" class="odd"><span class="lineNumber">&nbsp;2167&nbsp;</span><a name="line_2167"></a></li>
<li id="line_2168" class="even"><span class="lineNumber">&nbsp;2168&nbsp;</span>	/*&nbsp;Scrolling<a name="line_2168"></a></li>
<li id="line_2169" class="odd"><span class="lineNumber">&nbsp;2169&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_2169"></a></li>
<li id="line_2170" class="even"><span class="lineNumber">&nbsp;2170&nbsp;</span><a name="line_2170"></a></li>
<li id="line_2171" class="odd"><span class="lineNumber">&nbsp;2171&nbsp;</span><a name="line_2171"></a></li>
<li id="line_2172" class="even"><span class="lineNumber">&nbsp;2172&nbsp;</span>	//&nbsp;Computes&nbsp;and&nbsp;stores&nbsp;the&nbsp;bounding&nbsp;rectangle&nbsp;of&nbsp;scrollEl<a name="line_2172"></a></li>
<li id="line_2173" class="odd"><span class="lineNumber">&nbsp;2173&nbsp;</span>	computeScrollBounds:&nbsp;function()&nbsp;{<a name="line_2173"></a></li>
<li id="line_2174" class="even"><span class="lineNumber">&nbsp;2174&nbsp;</span>		var&nbsp;el&nbsp;=&nbsp;this.scrollEl;<a name="line_2174"></a></li>
<li id="line_2175" class="odd"><span class="lineNumber">&nbsp;2175&nbsp;</span><a name="line_2175"></a></li>
<li id="line_2176" class="even"><span class="lineNumber">&nbsp;2176&nbsp;</span>		this.scrollBounds&nbsp;=&nbsp;el&nbsp;?&nbsp;getOuterRect(el)&nbsp;:&nbsp;null;<a name="line_2176"></a></li>
<li id="line_2177" class="odd"><span class="lineNumber">&nbsp;2177&nbsp;</span>			//&nbsp;TODO:&nbsp;use&nbsp;getClientRect&nbsp;in&nbsp;future.&nbsp;but&nbsp;prevents&nbsp;auto&nbsp;scrolling&nbsp;when&nbsp;on&nbsp;top&nbsp;of&nbsp;scrollbars<a name="line_2177"></a></li>
<li id="line_2178" class="even"><span class="lineNumber">&nbsp;2178&nbsp;</span>	},<a name="line_2178"></a></li>
<li id="line_2179" class="odd"><span class="lineNumber">&nbsp;2179&nbsp;</span><a name="line_2179"></a></li>
<li id="line_2180" class="even"><span class="lineNumber">&nbsp;2180&nbsp;</span><a name="line_2180"></a></li>
<li id="line_2181" class="odd"><span class="lineNumber">&nbsp;2181&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;the&nbsp;dragging&nbsp;is&nbsp;in&nbsp;progress&nbsp;and&nbsp;scrolling&nbsp;should&nbsp;be&nbsp;updated<a name="line_2181"></a></li>
<li id="line_2182" class="even"><span class="lineNumber">&nbsp;2182&nbsp;</span>	updateScroll:&nbsp;function(ev)&nbsp;{<a name="line_2182"></a></li>
<li id="line_2183" class="odd"><span class="lineNumber">&nbsp;2183&nbsp;</span>		var&nbsp;sensitivity&nbsp;=&nbsp;this.scrollSensitivity;<a name="line_2183"></a></li>
<li id="line_2184" class="even"><span class="lineNumber">&nbsp;2184&nbsp;</span>		var&nbsp;bounds&nbsp;=&nbsp;this.scrollBounds;<a name="line_2184"></a></li>
<li id="line_2185" class="odd"><span class="lineNumber">&nbsp;2185&nbsp;</span>		var&nbsp;topCloseness,&nbsp;bottomCloseness;<a name="line_2185"></a></li>
<li id="line_2186" class="even"><span class="lineNumber">&nbsp;2186&nbsp;</span>		var&nbsp;leftCloseness,&nbsp;rightCloseness;<a name="line_2186"></a></li>
<li id="line_2187" class="odd"><span class="lineNumber">&nbsp;2187&nbsp;</span>		var&nbsp;topVel&nbsp;=&nbsp;0;<a name="line_2187"></a></li>
<li id="line_2188" class="even"><span class="lineNumber">&nbsp;2188&nbsp;</span>		var&nbsp;leftVel&nbsp;=&nbsp;0;<a name="line_2188"></a></li>
<li id="line_2189" class="odd"><span class="lineNumber">&nbsp;2189&nbsp;</span><a name="line_2189"></a></li>
<li id="line_2190" class="even"><span class="lineNumber">&nbsp;2190&nbsp;</span>		if&nbsp;(bounds)&nbsp;{&nbsp;//&nbsp;only&nbsp;scroll&nbsp;if&nbsp;scrollEl&nbsp;exists<a name="line_2190"></a></li>
<li id="line_2191" class="odd"><span class="lineNumber">&nbsp;2191&nbsp;</span><a name="line_2191"></a></li>
<li id="line_2192" class="even"><span class="lineNumber">&nbsp;2192&nbsp;</span>			//&nbsp;compute&nbsp;closeness&nbsp;to&nbsp;edges.&nbsp;valid&nbsp;range&nbsp;is&nbsp;from&nbsp;0.0&nbsp;-&nbsp;1.0<a name="line_2192"></a></li>
<li id="line_2193" class="odd"><span class="lineNumber">&nbsp;2193&nbsp;</span>			topCloseness&nbsp;=&nbsp;(sensitivity&nbsp;-&nbsp;(ev.pageY&nbsp;-&nbsp;bounds.top))&nbsp;/&nbsp;sensitivity;<a name="line_2193"></a></li>
<li id="line_2194" class="even"><span class="lineNumber">&nbsp;2194&nbsp;</span>			bottomCloseness&nbsp;=&nbsp;(sensitivity&nbsp;-&nbsp;(bounds.bottom&nbsp;-&nbsp;ev.pageY))&nbsp;/&nbsp;sensitivity;<a name="line_2194"></a></li>
<li id="line_2195" class="odd"><span class="lineNumber">&nbsp;2195&nbsp;</span>			leftCloseness&nbsp;=&nbsp;(sensitivity&nbsp;-&nbsp;(ev.pageX&nbsp;-&nbsp;bounds.left))&nbsp;/&nbsp;sensitivity;<a name="line_2195"></a></li>
<li id="line_2196" class="even"><span class="lineNumber">&nbsp;2196&nbsp;</span>			rightCloseness&nbsp;=&nbsp;(sensitivity&nbsp;-&nbsp;(bounds.right&nbsp;-&nbsp;ev.pageX))&nbsp;/&nbsp;sensitivity;<a name="line_2196"></a></li>
<li id="line_2197" class="odd"><span class="lineNumber">&nbsp;2197&nbsp;</span><a name="line_2197"></a></li>
<li id="line_2198" class="even"><span class="lineNumber">&nbsp;2198&nbsp;</span>			//&nbsp;translate&nbsp;vertical&nbsp;closeness&nbsp;into&nbsp;velocity.<a name="line_2198"></a></li>
<li id="line_2199" class="odd"><span class="lineNumber">&nbsp;2199&nbsp;</span>			//&nbsp;mouse&nbsp;must&nbsp;be&nbsp;completely&nbsp;in&nbsp;bounds&nbsp;for&nbsp;velocity&nbsp;to&nbsp;happen.<a name="line_2199"></a></li>
<li id="line_2200" class="even"><span class="lineNumber">&nbsp;2200&nbsp;</span>			if&nbsp;(topCloseness&nbsp;&gt;=&nbsp;0&nbsp;&amp;&amp;&nbsp;topCloseness&nbsp;&lt;=&nbsp;1)&nbsp;{<a name="line_2200"></a></li>
<li id="line_2201" class="odd"><span class="lineNumber">&nbsp;2201&nbsp;</span>				topVel&nbsp;=&nbsp;topCloseness&nbsp;*&nbsp;this.scrollSpeed&nbsp;*&nbsp;-1;&nbsp;//&nbsp;negative.&nbsp;for&nbsp;scrolling&nbsp;up<a name="line_2201"></a></li>
<li id="line_2202" class="even"><span class="lineNumber">&nbsp;2202&nbsp;</span>			}<a name="line_2202"></a></li>
<li id="line_2203" class="odd"><span class="lineNumber">&nbsp;2203&nbsp;</span>			else&nbsp;if&nbsp;(bottomCloseness&nbsp;&gt;=&nbsp;0&nbsp;&amp;&amp;&nbsp;bottomCloseness&nbsp;&lt;=&nbsp;1)&nbsp;{<a name="line_2203"></a></li>
<li id="line_2204" class="even"><span class="lineNumber">&nbsp;2204&nbsp;</span>				topVel&nbsp;=&nbsp;bottomCloseness&nbsp;*&nbsp;this.scrollSpeed;<a name="line_2204"></a></li>
<li id="line_2205" class="odd"><span class="lineNumber">&nbsp;2205&nbsp;</span>			}<a name="line_2205"></a></li>
<li id="line_2206" class="even"><span class="lineNumber">&nbsp;2206&nbsp;</span><a name="line_2206"></a></li>
<li id="line_2207" class="odd"><span class="lineNumber">&nbsp;2207&nbsp;</span>			//&nbsp;translate&nbsp;horizontal&nbsp;closeness&nbsp;into&nbsp;velocity<a name="line_2207"></a></li>
<li id="line_2208" class="even"><span class="lineNumber">&nbsp;2208&nbsp;</span>			if&nbsp;(leftCloseness&nbsp;&gt;=&nbsp;0&nbsp;&amp;&amp;&nbsp;leftCloseness&nbsp;&lt;=&nbsp;1)&nbsp;{<a name="line_2208"></a></li>
<li id="line_2209" class="odd"><span class="lineNumber">&nbsp;2209&nbsp;</span>				leftVel&nbsp;=&nbsp;leftCloseness&nbsp;*&nbsp;this.scrollSpeed&nbsp;*&nbsp;-1;&nbsp;//&nbsp;negative.&nbsp;for&nbsp;scrolling&nbsp;left<a name="line_2209"></a></li>
<li id="line_2210" class="even"><span class="lineNumber">&nbsp;2210&nbsp;</span>			}<a name="line_2210"></a></li>
<li id="line_2211" class="odd"><span class="lineNumber">&nbsp;2211&nbsp;</span>			else&nbsp;if&nbsp;(rightCloseness&nbsp;&gt;=&nbsp;0&nbsp;&amp;&amp;&nbsp;rightCloseness&nbsp;&lt;=&nbsp;1)&nbsp;{<a name="line_2211"></a></li>
<li id="line_2212" class="even"><span class="lineNumber">&nbsp;2212&nbsp;</span>				leftVel&nbsp;=&nbsp;rightCloseness&nbsp;*&nbsp;this.scrollSpeed;<a name="line_2212"></a></li>
<li id="line_2213" class="odd"><span class="lineNumber">&nbsp;2213&nbsp;</span>			}<a name="line_2213"></a></li>
<li id="line_2214" class="even"><span class="lineNumber">&nbsp;2214&nbsp;</span>		}<a name="line_2214"></a></li>
<li id="line_2215" class="odd"><span class="lineNumber">&nbsp;2215&nbsp;</span><a name="line_2215"></a></li>
<li id="line_2216" class="even"><span class="lineNumber">&nbsp;2216&nbsp;</span>		this.setScrollVel(topVel,&nbsp;leftVel);<a name="line_2216"></a></li>
<li id="line_2217" class="odd"><span class="lineNumber">&nbsp;2217&nbsp;</span>	},<a name="line_2217"></a></li>
<li id="line_2218" class="even"><span class="lineNumber">&nbsp;2218&nbsp;</span><a name="line_2218"></a></li>
<li id="line_2219" class="odd"><span class="lineNumber">&nbsp;2219&nbsp;</span><a name="line_2219"></a></li>
<li id="line_2220" class="even"><span class="lineNumber">&nbsp;2220&nbsp;</span>	//&nbsp;Sets&nbsp;the&nbsp;speed-of-scrolling&nbsp;for&nbsp;the&nbsp;scrollEl<a name="line_2220"></a></li>
<li id="line_2221" class="odd"><span class="lineNumber">&nbsp;2221&nbsp;</span>	setScrollVel:&nbsp;function(topVel,&nbsp;leftVel)&nbsp;{<a name="line_2221"></a></li>
<li id="line_2222" class="even"><span class="lineNumber">&nbsp;2222&nbsp;</span><a name="line_2222"></a></li>
<li id="line_2223" class="odd"><span class="lineNumber">&nbsp;2223&nbsp;</span>		this.scrollTopVel&nbsp;=&nbsp;topVel;<a name="line_2223"></a></li>
<li id="line_2224" class="even"><span class="lineNumber">&nbsp;2224&nbsp;</span>		this.scrollLeftVel&nbsp;=&nbsp;leftVel;<a name="line_2224"></a></li>
<li id="line_2225" class="odd"><span class="lineNumber">&nbsp;2225&nbsp;</span><a name="line_2225"></a></li>
<li id="line_2226" class="even"><span class="lineNumber">&nbsp;2226&nbsp;</span>		this.constrainScrollVel();&nbsp;//&nbsp;massages&nbsp;into&nbsp;realistic&nbsp;values<a name="line_2226"></a></li>
<li id="line_2227" class="odd"><span class="lineNumber">&nbsp;2227&nbsp;</span><a name="line_2227"></a></li>
<li id="line_2228" class="even"><span class="lineNumber">&nbsp;2228&nbsp;</span>		//&nbsp;if&nbsp;there&nbsp;is&nbsp;non-zero&nbsp;velocity,&nbsp;and&nbsp;an&nbsp;animation&nbsp;loop&nbsp;hasn't&nbsp;already&nbsp;started,&nbsp;then&nbsp;START<a name="line_2228"></a></li>
<li id="line_2229" class="odd"><span class="lineNumber">&nbsp;2229&nbsp;</span>		if&nbsp;((this.scrollTopVel&nbsp;||&nbsp;this.scrollLeftVel)&nbsp;&amp;&amp;&nbsp;!this.scrollIntervalId)&nbsp;{<a name="line_2229"></a></li>
<li id="line_2230" class="even"><span class="lineNumber">&nbsp;2230&nbsp;</span>			this.scrollIntervalId&nbsp;=&nbsp;setInterval(<a name="line_2230"></a></li>
<li id="line_2231" class="odd"><span class="lineNumber">&nbsp;2231&nbsp;</span>				proxy(this,&nbsp;'scrollIntervalFunc'),&nbsp;//&nbsp;scope&nbsp;to&nbsp;`this`<a name="line_2231"></a></li>
<li id="line_2232" class="even"><span class="lineNumber">&nbsp;2232&nbsp;</span>				this.scrollIntervalMs<a name="line_2232"></a></li>
<li id="line_2233" class="odd"><span class="lineNumber">&nbsp;2233&nbsp;</span>			);<a name="line_2233"></a></li>
<li id="line_2234" class="even"><span class="lineNumber">&nbsp;2234&nbsp;</span>		}<a name="line_2234"></a></li>
<li id="line_2235" class="odd"><span class="lineNumber">&nbsp;2235&nbsp;</span>	},<a name="line_2235"></a></li>
<li id="line_2236" class="even"><span class="lineNumber">&nbsp;2236&nbsp;</span><a name="line_2236"></a></li>
<li id="line_2237" class="odd"><span class="lineNumber">&nbsp;2237&nbsp;</span><a name="line_2237"></a></li>
<li id="line_2238" class="even"><span class="lineNumber">&nbsp;2238&nbsp;</span>	//&nbsp;Forces&nbsp;scrollTopVel&nbsp;and&nbsp;scrollLeftVel&nbsp;to&nbsp;be&nbsp;zero&nbsp;if&nbsp;scrolling&nbsp;has&nbsp;already&nbsp;gone&nbsp;all&nbsp;the&nbsp;way<a name="line_2238"></a></li>
<li id="line_2239" class="odd"><span class="lineNumber">&nbsp;2239&nbsp;</span>	constrainScrollVel:&nbsp;function()&nbsp;{<a name="line_2239"></a></li>
<li id="line_2240" class="even"><span class="lineNumber">&nbsp;2240&nbsp;</span>		var&nbsp;el&nbsp;=&nbsp;this.scrollEl;<a name="line_2240"></a></li>
<li id="line_2241" class="odd"><span class="lineNumber">&nbsp;2241&nbsp;</span><a name="line_2241"></a></li>
<li id="line_2242" class="even"><span class="lineNumber">&nbsp;2242&nbsp;</span>		if&nbsp;(this.scrollTopVel&nbsp;&lt;&nbsp;0)&nbsp;{&nbsp;//&nbsp;scrolling&nbsp;up?<a name="line_2242"></a></li>
<li id="line_2243" class="odd"><span class="lineNumber">&nbsp;2243&nbsp;</span>			if&nbsp;(el.scrollTop()&nbsp;&lt;=&nbsp;0)&nbsp;{&nbsp;//&nbsp;already&nbsp;scrolled&nbsp;all&nbsp;the&nbsp;way&nbsp;up?<a name="line_2243"></a></li>
<li id="line_2244" class="even"><span class="lineNumber">&nbsp;2244&nbsp;</span>				this.scrollTopVel&nbsp;=&nbsp;0;<a name="line_2244"></a></li>
<li id="line_2245" class="odd"><span class="lineNumber">&nbsp;2245&nbsp;</span>			}<a name="line_2245"></a></li>
<li id="line_2246" class="even"><span class="lineNumber">&nbsp;2246&nbsp;</span>		}<a name="line_2246"></a></li>
<li id="line_2247" class="odd"><span class="lineNumber">&nbsp;2247&nbsp;</span>		else&nbsp;if&nbsp;(this.scrollTopVel&nbsp;&gt;&nbsp;0)&nbsp;{&nbsp;//&nbsp;scrolling&nbsp;down?<a name="line_2247"></a></li>
<li id="line_2248" class="even"><span class="lineNumber">&nbsp;2248&nbsp;</span>			if&nbsp;(el.scrollTop()&nbsp;+&nbsp;el[0].clientHeight&nbsp;&gt;=&nbsp;el[0].scrollHeight)&nbsp;{&nbsp;//&nbsp;already&nbsp;scrolled&nbsp;all&nbsp;the&nbsp;way&nbsp;down?<a name="line_2248"></a></li>
<li id="line_2249" class="odd"><span class="lineNumber">&nbsp;2249&nbsp;</span>				this.scrollTopVel&nbsp;=&nbsp;0;<a name="line_2249"></a></li>
<li id="line_2250" class="even"><span class="lineNumber">&nbsp;2250&nbsp;</span>			}<a name="line_2250"></a></li>
<li id="line_2251" class="odd"><span class="lineNumber">&nbsp;2251&nbsp;</span>		}<a name="line_2251"></a></li>
<li id="line_2252" class="even"><span class="lineNumber">&nbsp;2252&nbsp;</span><a name="line_2252"></a></li>
<li id="line_2253" class="odd"><span class="lineNumber">&nbsp;2253&nbsp;</span>		if&nbsp;(this.scrollLeftVel&nbsp;&lt;&nbsp;0)&nbsp;{&nbsp;//&nbsp;scrolling&nbsp;left?<a name="line_2253"></a></li>
<li id="line_2254" class="even"><span class="lineNumber">&nbsp;2254&nbsp;</span>			if&nbsp;(el.scrollLeft()&nbsp;&lt;=&nbsp;0)&nbsp;{&nbsp;//&nbsp;already&nbsp;scrolled&nbsp;all&nbsp;the&nbsp;left?<a name="line_2254"></a></li>
<li id="line_2255" class="odd"><span class="lineNumber">&nbsp;2255&nbsp;</span>				this.scrollLeftVel&nbsp;=&nbsp;0;<a name="line_2255"></a></li>
<li id="line_2256" class="even"><span class="lineNumber">&nbsp;2256&nbsp;</span>			}<a name="line_2256"></a></li>
<li id="line_2257" class="odd"><span class="lineNumber">&nbsp;2257&nbsp;</span>		}<a name="line_2257"></a></li>
<li id="line_2258" class="even"><span class="lineNumber">&nbsp;2258&nbsp;</span>		else&nbsp;if&nbsp;(this.scrollLeftVel&nbsp;&gt;&nbsp;0)&nbsp;{&nbsp;//&nbsp;scrolling&nbsp;right?<a name="line_2258"></a></li>
<li id="line_2259" class="odd"><span class="lineNumber">&nbsp;2259&nbsp;</span>			if&nbsp;(el.scrollLeft()&nbsp;+&nbsp;el[0].clientWidth&nbsp;&gt;=&nbsp;el[0].scrollWidth)&nbsp;{&nbsp;//&nbsp;already&nbsp;scrolled&nbsp;all&nbsp;the&nbsp;way&nbsp;right?<a name="line_2259"></a></li>
<li id="line_2260" class="even"><span class="lineNumber">&nbsp;2260&nbsp;</span>				this.scrollLeftVel&nbsp;=&nbsp;0;<a name="line_2260"></a></li>
<li id="line_2261" class="odd"><span class="lineNumber">&nbsp;2261&nbsp;</span>			}<a name="line_2261"></a></li>
<li id="line_2262" class="even"><span class="lineNumber">&nbsp;2262&nbsp;</span>		}<a name="line_2262"></a></li>
<li id="line_2263" class="odd"><span class="lineNumber">&nbsp;2263&nbsp;</span>	},<a name="line_2263"></a></li>
<li id="line_2264" class="even"><span class="lineNumber">&nbsp;2264&nbsp;</span><a name="line_2264"></a></li>
<li id="line_2265" class="odd"><span class="lineNumber">&nbsp;2265&nbsp;</span><a name="line_2265"></a></li>
<li id="line_2266" class="even"><span class="lineNumber">&nbsp;2266&nbsp;</span>	//&nbsp;This&nbsp;function&nbsp;gets&nbsp;called&nbsp;during&nbsp;every&nbsp;iteration&nbsp;of&nbsp;the&nbsp;scrolling&nbsp;animation&nbsp;loop<a name="line_2266"></a></li>
<li id="line_2267" class="odd"><span class="lineNumber">&nbsp;2267&nbsp;</span>	scrollIntervalFunc:&nbsp;function()&nbsp;{<a name="line_2267"></a></li>
<li id="line_2268" class="even"><span class="lineNumber">&nbsp;2268&nbsp;</span>		var&nbsp;el&nbsp;=&nbsp;this.scrollEl;<a name="line_2268"></a></li>
<li id="line_2269" class="odd"><span class="lineNumber">&nbsp;2269&nbsp;</span>		var&nbsp;frac&nbsp;=&nbsp;this.scrollIntervalMs&nbsp;/&nbsp;1000;&nbsp;//&nbsp;considering&nbsp;animation&nbsp;frequency,&nbsp;what&nbsp;the&nbsp;vel&nbsp;should&nbsp;be&nbsp;mult'd&nbsp;by<a name="line_2269"></a></li>
<li id="line_2270" class="even"><span class="lineNumber">&nbsp;2270&nbsp;</span><a name="line_2270"></a></li>
<li id="line_2271" class="odd"><span class="lineNumber">&nbsp;2271&nbsp;</span>		//&nbsp;change&nbsp;the&nbsp;value&nbsp;of&nbsp;scrollEl's&nbsp;scroll<a name="line_2271"></a></li>
<li id="line_2272" class="even"><span class="lineNumber">&nbsp;2272&nbsp;</span>		if&nbsp;(this.scrollTopVel)&nbsp;{<a name="line_2272"></a></li>
<li id="line_2273" class="odd"><span class="lineNumber">&nbsp;2273&nbsp;</span>			el.scrollTop(el.scrollTop()&nbsp;+&nbsp;this.scrollTopVel&nbsp;*&nbsp;frac);<a name="line_2273"></a></li>
<li id="line_2274" class="even"><span class="lineNumber">&nbsp;2274&nbsp;</span>		}<a name="line_2274"></a></li>
<li id="line_2275" class="odd"><span class="lineNumber">&nbsp;2275&nbsp;</span>		if&nbsp;(this.scrollLeftVel)&nbsp;{<a name="line_2275"></a></li>
<li id="line_2276" class="even"><span class="lineNumber">&nbsp;2276&nbsp;</span>			el.scrollLeft(el.scrollLeft()&nbsp;+&nbsp;this.scrollLeftVel&nbsp;*&nbsp;frac);<a name="line_2276"></a></li>
<li id="line_2277" class="odd"><span class="lineNumber">&nbsp;2277&nbsp;</span>		}<a name="line_2277"></a></li>
<li id="line_2278" class="even"><span class="lineNumber">&nbsp;2278&nbsp;</span><a name="line_2278"></a></li>
<li id="line_2279" class="odd"><span class="lineNumber">&nbsp;2279&nbsp;</span>		this.constrainScrollVel();&nbsp;//&nbsp;since&nbsp;the&nbsp;scroll&nbsp;values&nbsp;changed,&nbsp;recompute&nbsp;the&nbsp;velocities<a name="line_2279"></a></li>
<li id="line_2280" class="even"><span class="lineNumber">&nbsp;2280&nbsp;</span><a name="line_2280"></a></li>
<li id="line_2281" class="odd"><span class="lineNumber">&nbsp;2281&nbsp;</span>		//&nbsp;if&nbsp;scrolled&nbsp;all&nbsp;the&nbsp;way,&nbsp;which&nbsp;causes&nbsp;the&nbsp;vels&nbsp;to&nbsp;be&nbsp;zero,&nbsp;stop&nbsp;the&nbsp;animation&nbsp;loop<a name="line_2281"></a></li>
<li id="line_2282" class="even"><span class="lineNumber">&nbsp;2282&nbsp;</span>		if&nbsp;(!this.scrollTopVel&nbsp;&amp;&amp;&nbsp;!this.scrollLeftVel)&nbsp;{<a name="line_2282"></a></li>
<li id="line_2283" class="odd"><span class="lineNumber">&nbsp;2283&nbsp;</span>			this.stopScrolling();<a name="line_2283"></a></li>
<li id="line_2284" class="even"><span class="lineNumber">&nbsp;2284&nbsp;</span>		}<a name="line_2284"></a></li>
<li id="line_2285" class="odd"><span class="lineNumber">&nbsp;2285&nbsp;</span>	},<a name="line_2285"></a></li>
<li id="line_2286" class="even"><span class="lineNumber">&nbsp;2286&nbsp;</span><a name="line_2286"></a></li>
<li id="line_2287" class="odd"><span class="lineNumber">&nbsp;2287&nbsp;</span><a name="line_2287"></a></li>
<li id="line_2288" class="even"><span class="lineNumber">&nbsp;2288&nbsp;</span>	//&nbsp;Kills&nbsp;any&nbsp;existing&nbsp;scrolling&nbsp;animation&nbsp;loop<a name="line_2288"></a></li>
<li id="line_2289" class="odd"><span class="lineNumber">&nbsp;2289&nbsp;</span>	stopScrolling:&nbsp;function()&nbsp;{<a name="line_2289"></a></li>
<li id="line_2290" class="even"><span class="lineNumber">&nbsp;2290&nbsp;</span>		if&nbsp;(this.scrollIntervalId)&nbsp;{<a name="line_2290"></a></li>
<li id="line_2291" class="odd"><span class="lineNumber">&nbsp;2291&nbsp;</span>			clearInterval(this.scrollIntervalId);<a name="line_2291"></a></li>
<li id="line_2292" class="even"><span class="lineNumber">&nbsp;2292&nbsp;</span>			this.scrollIntervalId&nbsp;=&nbsp;null;<a name="line_2292"></a></li>
<li id="line_2293" class="odd"><span class="lineNumber">&nbsp;2293&nbsp;</span><a name="line_2293"></a></li>
<li id="line_2294" class="even"><span class="lineNumber">&nbsp;2294&nbsp;</span>			//&nbsp;when&nbsp;all&nbsp;done&nbsp;with&nbsp;scrolling,&nbsp;recompute&nbsp;positions&nbsp;since&nbsp;they&nbsp;probably&nbsp;changed<a name="line_2294"></a></li>
<li id="line_2295" class="odd"><span class="lineNumber">&nbsp;2295&nbsp;</span>			this.scrollStop();<a name="line_2295"></a></li>
<li id="line_2296" class="even"><span class="lineNumber">&nbsp;2296&nbsp;</span>		}<a name="line_2296"></a></li>
<li id="line_2297" class="odd"><span class="lineNumber">&nbsp;2297&nbsp;</span>	},<a name="line_2297"></a></li>
<li id="line_2298" class="even"><span class="lineNumber">&nbsp;2298&nbsp;</span><a name="line_2298"></a></li>
<li id="line_2299" class="odd"><span class="lineNumber">&nbsp;2299&nbsp;</span><a name="line_2299"></a></li>
<li id="line_2300" class="even"><span class="lineNumber">&nbsp;2300&nbsp;</span>	//&nbsp;Get&nbsp;called&nbsp;when&nbsp;the&nbsp;scrollEl&nbsp;is&nbsp;scrolled&nbsp;(NOTE:&nbsp;this&nbsp;is&nbsp;delayed&nbsp;via&nbsp;debounce)<a name="line_2300"></a></li>
<li id="line_2301" class="odd"><span class="lineNumber">&nbsp;2301&nbsp;</span>	scrollHandler:&nbsp;function()&nbsp;{<a name="line_2301"></a></li>
<li id="line_2302" class="even"><span class="lineNumber">&nbsp;2302&nbsp;</span>		//&nbsp;recompute&nbsp;all&nbsp;coordinates,&nbsp;but&nbsp;*only*&nbsp;if&nbsp;this&nbsp;is&nbsp;*not*&nbsp;part&nbsp;of&nbsp;our&nbsp;scrolling&nbsp;animation<a name="line_2302"></a></li>
<li id="line_2303" class="odd"><span class="lineNumber">&nbsp;2303&nbsp;</span>		if&nbsp;(!this.scrollIntervalId)&nbsp;{<a name="line_2303"></a></li>
<li id="line_2304" class="even"><span class="lineNumber">&nbsp;2304&nbsp;</span>			this.scrollStop();<a name="line_2304"></a></li>
<li id="line_2305" class="odd"><span class="lineNumber">&nbsp;2305&nbsp;</span>		}<a name="line_2305"></a></li>
<li id="line_2306" class="even"><span class="lineNumber">&nbsp;2306&nbsp;</span>	},<a name="line_2306"></a></li>
<li id="line_2307" class="odd"><span class="lineNumber">&nbsp;2307&nbsp;</span><a name="line_2307"></a></li>
<li id="line_2308" class="even"><span class="lineNumber">&nbsp;2308&nbsp;</span><a name="line_2308"></a></li>
<li id="line_2309" class="odd"><span class="lineNumber">&nbsp;2309&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;scrolling&nbsp;has&nbsp;stopped,&nbsp;whether&nbsp;through&nbsp;auto&nbsp;scroll,&nbsp;or&nbsp;the&nbsp;user&nbsp;scrolling<a name="line_2309"></a></li>
<li id="line_2310" class="even"><span class="lineNumber">&nbsp;2310&nbsp;</span>	scrollStop:&nbsp;function()&nbsp;{<a name="line_2310"></a></li>
<li id="line_2311" class="odd"><span class="lineNumber">&nbsp;2311&nbsp;</span>	}<a name="line_2311"></a></li>
<li id="line_2312" class="even"><span class="lineNumber">&nbsp;2312&nbsp;</span><a name="line_2312"></a></li>
<li id="line_2313" class="odd"><span class="lineNumber">&nbsp;2313&nbsp;</span>});<a name="line_2313"></a></li>
<li id="line_2314" class="even"><span class="lineNumber">&nbsp;2314&nbsp;</span><a name="line_2314"></a></li>
<li id="line_2315" class="odd"><span class="lineNumber">&nbsp;2315&nbsp;</span>;;<a name="line_2315"></a></li>
<li id="line_2316" class="even"><span class="lineNumber">&nbsp;2316&nbsp;</span><a name="line_2316"></a></li>
<li id="line_2317" class="odd"><span class="lineNumber">&nbsp;2317&nbsp;</span>/*&nbsp;Tracks&nbsp;mouse&nbsp;movements&nbsp;over&nbsp;a&nbsp;CoordMap&nbsp;and&nbsp;raises&nbsp;events&nbsp;about&nbsp;which&nbsp;cell&nbsp;the&nbsp;mouse&nbsp;is&nbsp;over.<a name="line_2317"></a></li>
<li id="line_2318" class="even"><span class="lineNumber">&nbsp;2318&nbsp;</span>------------------------------------------------------------------------------------------------------------------------<a name="line_2318"></a></li>
<li id="line_2319" class="odd"><span class="lineNumber">&nbsp;2319&nbsp;</span>options:<a name="line_2319"></a></li>
<li id="line_2320" class="even"><span class="lineNumber">&nbsp;2320&nbsp;</span>-&nbsp;subjectEl<a name="line_2320"></a></li>
<li id="line_2321" class="odd"><span class="lineNumber">&nbsp;2321&nbsp;</span>-&nbsp;subjectCenter<a name="line_2321"></a></li>
<li id="line_2322" class="even"><span class="lineNumber">&nbsp;2322&nbsp;</span>*/<a name="line_2322"></a></li>
<li id="line_2323" class="odd"><span class="lineNumber">&nbsp;2323&nbsp;</span><a name="line_2323"></a></li>
<li id="line_2324" class="even"><span class="lineNumber">&nbsp;2324&nbsp;</span>var&nbsp;CellDragListener&nbsp;=&nbsp;DragListener.extend({<a name="line_2324"></a></li>
<li id="line_2325" class="odd"><span class="lineNumber">&nbsp;2325&nbsp;</span><a name="line_2325"></a></li>
<li id="line_2326" class="even"><span class="lineNumber">&nbsp;2326&nbsp;</span>	coordMap:&nbsp;null,&nbsp;//&nbsp;converts&nbsp;coordinates&nbsp;to&nbsp;date&nbsp;cells<a name="line_2326"></a></li>
<li id="line_2327" class="odd"><span class="lineNumber">&nbsp;2327&nbsp;</span>	origCell:&nbsp;null,&nbsp;//&nbsp;the&nbsp;cell&nbsp;the&nbsp;mouse&nbsp;was&nbsp;over&nbsp;when&nbsp;listening&nbsp;started<a name="line_2327"></a></li>
<li id="line_2328" class="even"><span class="lineNumber">&nbsp;2328&nbsp;</span>	cell:&nbsp;null,&nbsp;//&nbsp;the&nbsp;cell&nbsp;the&nbsp;mouse&nbsp;is&nbsp;over<a name="line_2328"></a></li>
<li id="line_2329" class="odd"><span class="lineNumber">&nbsp;2329&nbsp;</span>	coordAdjust:&nbsp;null,&nbsp;//&nbsp;delta&nbsp;that&nbsp;will&nbsp;be&nbsp;added&nbsp;to&nbsp;the&nbsp;mouse&nbsp;coordinates&nbsp;when&nbsp;computing&nbsp;collisions<a name="line_2329"></a></li>
<li id="line_2330" class="even"><span class="lineNumber">&nbsp;2330&nbsp;</span><a name="line_2330"></a></li>
<li id="line_2331" class="odd"><span class="lineNumber">&nbsp;2331&nbsp;</span><a name="line_2331"></a></li>
<li id="line_2332" class="even"><span class="lineNumber">&nbsp;2332&nbsp;</span>	constructor:&nbsp;function(coordMap,&nbsp;options)&nbsp;{<a name="line_2332"></a></li>
<li id="line_2333" class="odd"><span class="lineNumber">&nbsp;2333&nbsp;</span>		DragListener.prototype.constructor.call(this,&nbsp;options);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-constructor<a name="line_2333"></a></li>
<li id="line_2334" class="even"><span class="lineNumber">&nbsp;2334&nbsp;</span><a name="line_2334"></a></li>
<li id="line_2335" class="odd"><span class="lineNumber">&nbsp;2335&nbsp;</span>		this.coordMap&nbsp;=&nbsp;coordMap;<a name="line_2335"></a></li>
<li id="line_2336" class="even"><span class="lineNumber">&nbsp;2336&nbsp;</span>	},<a name="line_2336"></a></li>
<li id="line_2337" class="odd"><span class="lineNumber">&nbsp;2337&nbsp;</span><a name="line_2337"></a></li>
<li id="line_2338" class="even"><span class="lineNumber">&nbsp;2338&nbsp;</span><a name="line_2338"></a></li>
<li id="line_2339" class="odd"><span class="lineNumber">&nbsp;2339&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;drag&nbsp;listening&nbsp;starts&nbsp;(but&nbsp;a&nbsp;real&nbsp;drag&nbsp;has&nbsp;not&nbsp;necessarily&nbsp;began).<a name="line_2339"></a></li>
<li id="line_2340" class="even"><span class="lineNumber">&nbsp;2340&nbsp;</span>	//&nbsp;ev&nbsp;might&nbsp;be&nbsp;undefined&nbsp;if&nbsp;dragging&nbsp;was&nbsp;started&nbsp;manually.<a name="line_2340"></a></li>
<li id="line_2341" class="odd"><span class="lineNumber">&nbsp;2341&nbsp;</span>	listenStart:&nbsp;function(ev)&nbsp;{<a name="line_2341"></a></li>
<li id="line_2342" class="even"><span class="lineNumber">&nbsp;2342&nbsp;</span>		var&nbsp;subjectEl&nbsp;=&nbsp;this.subjectEl;<a name="line_2342"></a></li>
<li id="line_2343" class="odd"><span class="lineNumber">&nbsp;2343&nbsp;</span>		var&nbsp;subjectRect;<a name="line_2343"></a></li>
<li id="line_2344" class="even"><span class="lineNumber">&nbsp;2344&nbsp;</span>		var&nbsp;origPoint;<a name="line_2344"></a></li>
<li id="line_2345" class="odd"><span class="lineNumber">&nbsp;2345&nbsp;</span>		var&nbsp;point;<a name="line_2345"></a></li>
<li id="line_2346" class="even"><span class="lineNumber">&nbsp;2346&nbsp;</span><a name="line_2346"></a></li>
<li id="line_2347" class="odd"><span class="lineNumber">&nbsp;2347&nbsp;</span>		DragListener.prototype.listenStart.apply(this,&nbsp;arguments);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-method<a name="line_2347"></a></li>
<li id="line_2348" class="even"><span class="lineNumber">&nbsp;2348&nbsp;</span><a name="line_2348"></a></li>
<li id="line_2349" class="odd"><span class="lineNumber">&nbsp;2349&nbsp;</span>		this.computeCoords();<a name="line_2349"></a></li>
<li id="line_2350" class="even"><span class="lineNumber">&nbsp;2350&nbsp;</span><a name="line_2350"></a></li>
<li id="line_2351" class="odd"><span class="lineNumber">&nbsp;2351&nbsp;</span>		if&nbsp;(ev)&nbsp;{<a name="line_2351"></a></li>
<li id="line_2352" class="even"><span class="lineNumber">&nbsp;2352&nbsp;</span>			origPoint&nbsp;=&nbsp;{&nbsp;left:&nbsp;ev.pageX,&nbsp;top:&nbsp;ev.pageY&nbsp;};<a name="line_2352"></a></li>
<li id="line_2353" class="odd"><span class="lineNumber">&nbsp;2353&nbsp;</span>			point&nbsp;=&nbsp;origPoint;<a name="line_2353"></a></li>
<li id="line_2354" class="even"><span class="lineNumber">&nbsp;2354&nbsp;</span><a name="line_2354"></a></li>
<li id="line_2355" class="odd"><span class="lineNumber">&nbsp;2355&nbsp;</span>			//&nbsp;constrain&nbsp;the&nbsp;point&nbsp;to&nbsp;bounds&nbsp;of&nbsp;the&nbsp;element&nbsp;being&nbsp;dragged<a name="line_2355"></a></li>
<li id="line_2356" class="even"><span class="lineNumber">&nbsp;2356&nbsp;</span>			if&nbsp;(subjectEl)&nbsp;{<a name="line_2356"></a></li>
<li id="line_2357" class="odd"><span class="lineNumber">&nbsp;2357&nbsp;</span>				subjectRect&nbsp;=&nbsp;getOuterRect(subjectEl);&nbsp;//&nbsp;used&nbsp;for&nbsp;centering&nbsp;as&nbsp;well<a name="line_2357"></a></li>
<li id="line_2358" class="even"><span class="lineNumber">&nbsp;2358&nbsp;</span>				point&nbsp;=&nbsp;constrainPoint(point,&nbsp;subjectRect);<a name="line_2358"></a></li>
<li id="line_2359" class="odd"><span class="lineNumber">&nbsp;2359&nbsp;</span>			}<a name="line_2359"></a></li>
<li id="line_2360" class="even"><span class="lineNumber">&nbsp;2360&nbsp;</span><a name="line_2360"></a></li>
<li id="line_2361" class="odd"><span class="lineNumber">&nbsp;2361&nbsp;</span>			this.origCell&nbsp;=&nbsp;this.getCell(point.left,&nbsp;point.top);<a name="line_2361"></a></li>
<li id="line_2362" class="even"><span class="lineNumber">&nbsp;2362&nbsp;</span><a name="line_2362"></a></li>
<li id="line_2363" class="odd"><span class="lineNumber">&nbsp;2363&nbsp;</span>			//&nbsp;treat&nbsp;the&nbsp;center&nbsp;of&nbsp;the&nbsp;subject&nbsp;as&nbsp;the&nbsp;collision&nbsp;point?<a name="line_2363"></a></li>
<li id="line_2364" class="even"><span class="lineNumber">&nbsp;2364&nbsp;</span>			if&nbsp;(subjectEl&nbsp;&amp;&amp;&nbsp;this.options.subjectCenter)&nbsp;{<a name="line_2364"></a></li>
<li id="line_2365" class="odd"><span class="lineNumber">&nbsp;2365&nbsp;</span><a name="line_2365"></a></li>
<li id="line_2366" class="even"><span class="lineNumber">&nbsp;2366&nbsp;</span>				//&nbsp;only&nbsp;consider&nbsp;the&nbsp;area&nbsp;the&nbsp;subject&nbsp;overlaps&nbsp;the&nbsp;cell.&nbsp;best&nbsp;for&nbsp;large&nbsp;subjects<a name="line_2366"></a></li>
<li id="line_2367" class="odd"><span class="lineNumber">&nbsp;2367&nbsp;</span>				if&nbsp;(this.origCell)&nbsp;{<a name="line_2367"></a></li>
<li id="line_2368" class="even"><span class="lineNumber">&nbsp;2368&nbsp;</span>					subjectRect&nbsp;=&nbsp;intersectRects(this.origCell,&nbsp;subjectRect)&nbsp;||<a name="line_2368"></a></li>
<li id="line_2369" class="odd"><span class="lineNumber">&nbsp;2369&nbsp;</span>						subjectRect;&nbsp;//&nbsp;in&nbsp;case&nbsp;there&nbsp;is&nbsp;no&nbsp;intersection<a name="line_2369"></a></li>
<li id="line_2370" class="even"><span class="lineNumber">&nbsp;2370&nbsp;</span>				}<a name="line_2370"></a></li>
<li id="line_2371" class="odd"><span class="lineNumber">&nbsp;2371&nbsp;</span><a name="line_2371"></a></li>
<li id="line_2372" class="even"><span class="lineNumber">&nbsp;2372&nbsp;</span>				point&nbsp;=&nbsp;getRectCenter(subjectRect);<a name="line_2372"></a></li>
<li id="line_2373" class="odd"><span class="lineNumber">&nbsp;2373&nbsp;</span>			}<a name="line_2373"></a></li>
<li id="line_2374" class="even"><span class="lineNumber">&nbsp;2374&nbsp;</span><a name="line_2374"></a></li>
<li id="line_2375" class="odd"><span class="lineNumber">&nbsp;2375&nbsp;</span>			this.coordAdjust&nbsp;=&nbsp;diffPoints(point,&nbsp;origPoint);&nbsp;//&nbsp;point&nbsp;-&nbsp;origPoint<a name="line_2375"></a></li>
<li id="line_2376" class="even"><span class="lineNumber">&nbsp;2376&nbsp;</span>		}<a name="line_2376"></a></li>
<li id="line_2377" class="odd"><span class="lineNumber">&nbsp;2377&nbsp;</span>		else&nbsp;{<a name="line_2377"></a></li>
<li id="line_2378" class="even"><span class="lineNumber">&nbsp;2378&nbsp;</span>			this.origCell&nbsp;=&nbsp;null;<a name="line_2378"></a></li>
<li id="line_2379" class="odd"><span class="lineNumber">&nbsp;2379&nbsp;</span>			this.coordAdjust&nbsp;=&nbsp;null;<a name="line_2379"></a></li>
<li id="line_2380" class="even"><span class="lineNumber">&nbsp;2380&nbsp;</span>		}<a name="line_2380"></a></li>
<li id="line_2381" class="odd"><span class="lineNumber">&nbsp;2381&nbsp;</span>	},<a name="line_2381"></a></li>
<li id="line_2382" class="even"><span class="lineNumber">&nbsp;2382&nbsp;</span><a name="line_2382"></a></li>
<li id="line_2383" class="odd"><span class="lineNumber">&nbsp;2383&nbsp;</span><a name="line_2383"></a></li>
<li id="line_2384" class="even"><span class="lineNumber">&nbsp;2384&nbsp;</span>	//&nbsp;Recomputes&nbsp;the&nbsp;drag-critical&nbsp;positions&nbsp;of&nbsp;elements<a name="line_2384"></a></li>
<li id="line_2385" class="odd"><span class="lineNumber">&nbsp;2385&nbsp;</span>	computeCoords:&nbsp;function()&nbsp;{<a name="line_2385"></a></li>
<li id="line_2386" class="even"><span class="lineNumber">&nbsp;2386&nbsp;</span>		this.coordMap.build();<a name="line_2386"></a></li>
<li id="line_2387" class="odd"><span class="lineNumber">&nbsp;2387&nbsp;</span>		this.computeScrollBounds();<a name="line_2387"></a></li>
<li id="line_2388" class="even"><span class="lineNumber">&nbsp;2388&nbsp;</span>	},<a name="line_2388"></a></li>
<li id="line_2389" class="odd"><span class="lineNumber">&nbsp;2389&nbsp;</span><a name="line_2389"></a></li>
<li id="line_2390" class="even"><span class="lineNumber">&nbsp;2390&nbsp;</span><a name="line_2390"></a></li>
<li id="line_2391" class="odd"><span class="lineNumber">&nbsp;2391&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;the&nbsp;actual&nbsp;drag&nbsp;has&nbsp;started<a name="line_2391"></a></li>
<li id="line_2392" class="even"><span class="lineNumber">&nbsp;2392&nbsp;</span>	dragStart:&nbsp;function(ev)&nbsp;{<a name="line_2392"></a></li>
<li id="line_2393" class="odd"><span class="lineNumber">&nbsp;2393&nbsp;</span>		var&nbsp;cell;<a name="line_2393"></a></li>
<li id="line_2394" class="even"><span class="lineNumber">&nbsp;2394&nbsp;</span><a name="line_2394"></a></li>
<li id="line_2395" class="odd"><span class="lineNumber">&nbsp;2395&nbsp;</span>		DragListener.prototype.dragStart.apply(this,&nbsp;arguments);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-method<a name="line_2395"></a></li>
<li id="line_2396" class="even"><span class="lineNumber">&nbsp;2396&nbsp;</span><a name="line_2396"></a></li>
<li id="line_2397" class="odd"><span class="lineNumber">&nbsp;2397&nbsp;</span>		cell&nbsp;=&nbsp;this.getCell(ev.pageX,&nbsp;ev.pageY);&nbsp;//&nbsp;might&nbsp;be&nbsp;different&nbsp;from&nbsp;this.origCell&nbsp;if&nbsp;the&nbsp;min-distance&nbsp;is&nbsp;large<a name="line_2397"></a></li>
<li id="line_2398" class="even"><span class="lineNumber">&nbsp;2398&nbsp;</span><a name="line_2398"></a></li>
<li id="line_2399" class="odd"><span class="lineNumber">&nbsp;2399&nbsp;</span>		//&nbsp;report&nbsp;the&nbsp;initial&nbsp;cell&nbsp;the&nbsp;mouse&nbsp;is&nbsp;over<a name="line_2399"></a></li>
<li id="line_2400" class="even"><span class="lineNumber">&nbsp;2400&nbsp;</span>		//&nbsp;especially&nbsp;important&nbsp;if&nbsp;no&nbsp;min-distance&nbsp;and&nbsp;drag&nbsp;starts&nbsp;immediately<a name="line_2400"></a></li>
<li id="line_2401" class="odd"><span class="lineNumber">&nbsp;2401&nbsp;</span>		if&nbsp;(cell)&nbsp;{<a name="line_2401"></a></li>
<li id="line_2402" class="even"><span class="lineNumber">&nbsp;2402&nbsp;</span>			this.cellOver(cell);<a name="line_2402"></a></li>
<li id="line_2403" class="odd"><span class="lineNumber">&nbsp;2403&nbsp;</span>		}<a name="line_2403"></a></li>
<li id="line_2404" class="even"><span class="lineNumber">&nbsp;2404&nbsp;</span>	},<a name="line_2404"></a></li>
<li id="line_2405" class="odd"><span class="lineNumber">&nbsp;2405&nbsp;</span><a name="line_2405"></a></li>
<li id="line_2406" class="even"><span class="lineNumber">&nbsp;2406&nbsp;</span><a name="line_2406"></a></li>
<li id="line_2407" class="odd"><span class="lineNumber">&nbsp;2407&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;the&nbsp;drag&nbsp;moves<a name="line_2407"></a></li>
<li id="line_2408" class="even"><span class="lineNumber">&nbsp;2408&nbsp;</span>	drag:&nbsp;function(dx,&nbsp;dy,&nbsp;ev)&nbsp;{<a name="line_2408"></a></li>
<li id="line_2409" class="odd"><span class="lineNumber">&nbsp;2409&nbsp;</span>		var&nbsp;cell;<a name="line_2409"></a></li>
<li id="line_2410" class="even"><span class="lineNumber">&nbsp;2410&nbsp;</span><a name="line_2410"></a></li>
<li id="line_2411" class="odd"><span class="lineNumber">&nbsp;2411&nbsp;</span>		DragListener.prototype.drag.apply(this,&nbsp;arguments);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-method<a name="line_2411"></a></li>
<li id="line_2412" class="even"><span class="lineNumber">&nbsp;2412&nbsp;</span><a name="line_2412"></a></li>
<li id="line_2413" class="odd"><span class="lineNumber">&nbsp;2413&nbsp;</span>		cell&nbsp;=&nbsp;this.getCell(ev.pageX,&nbsp;ev.pageY);<a name="line_2413"></a></li>
<li id="line_2414" class="even"><span class="lineNumber">&nbsp;2414&nbsp;</span><a name="line_2414"></a></li>
<li id="line_2415" class="odd"><span class="lineNumber">&nbsp;2415&nbsp;</span>		if&nbsp;(!isCellsEqual(cell,&nbsp;this.cell))&nbsp;{&nbsp;//&nbsp;a&nbsp;different&nbsp;cell&nbsp;than&nbsp;before?<a name="line_2415"></a></li>
<li id="line_2416" class="even"><span class="lineNumber">&nbsp;2416&nbsp;</span>			if&nbsp;(this.cell)&nbsp;{<a name="line_2416"></a></li>
<li id="line_2417" class="odd"><span class="lineNumber">&nbsp;2417&nbsp;</span>				this.cellOut();<a name="line_2417"></a></li>
<li id="line_2418" class="even"><span class="lineNumber">&nbsp;2418&nbsp;</span>			}<a name="line_2418"></a></li>
<li id="line_2419" class="odd"><span class="lineNumber">&nbsp;2419&nbsp;</span>			if&nbsp;(cell)&nbsp;{<a name="line_2419"></a></li>
<li id="line_2420" class="even"><span class="lineNumber">&nbsp;2420&nbsp;</span>				this.cellOver(cell);<a name="line_2420"></a></li>
<li id="line_2421" class="odd"><span class="lineNumber">&nbsp;2421&nbsp;</span>			}<a name="line_2421"></a></li>
<li id="line_2422" class="even"><span class="lineNumber">&nbsp;2422&nbsp;</span>		}<a name="line_2422"></a></li>
<li id="line_2423" class="odd"><span class="lineNumber">&nbsp;2423&nbsp;</span>	},<a name="line_2423"></a></li>
<li id="line_2424" class="even"><span class="lineNumber">&nbsp;2424&nbsp;</span><a name="line_2424"></a></li>
<li id="line_2425" class="odd"><span class="lineNumber">&nbsp;2425&nbsp;</span><a name="line_2425"></a></li>
<li id="line_2426" class="even"><span class="lineNumber">&nbsp;2426&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;dragging&nbsp;has&nbsp;been&nbsp;stopped<a name="line_2426"></a></li>
<li id="line_2427" class="odd"><span class="lineNumber">&nbsp;2427&nbsp;</span>	dragStop:&nbsp;function()&nbsp;{<a name="line_2427"></a></li>
<li id="line_2428" class="even"><span class="lineNumber">&nbsp;2428&nbsp;</span>		this.cellDone();<a name="line_2428"></a></li>
<li id="line_2429" class="odd"><span class="lineNumber">&nbsp;2429&nbsp;</span>		DragListener.prototype.dragStop.apply(this,&nbsp;arguments);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-method<a name="line_2429"></a></li>
<li id="line_2430" class="even"><span class="lineNumber">&nbsp;2430&nbsp;</span>	},<a name="line_2430"></a></li>
<li id="line_2431" class="odd"><span class="lineNumber">&nbsp;2431&nbsp;</span><a name="line_2431"></a></li>
<li id="line_2432" class="even"><span class="lineNumber">&nbsp;2432&nbsp;</span><a name="line_2432"></a></li>
<li id="line_2433" class="odd"><span class="lineNumber">&nbsp;2433&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;a&nbsp;the&nbsp;mouse&nbsp;has&nbsp;just&nbsp;moved&nbsp;over&nbsp;a&nbsp;new&nbsp;cell<a name="line_2433"></a></li>
<li id="line_2434" class="even"><span class="lineNumber">&nbsp;2434&nbsp;</span>	cellOver:&nbsp;function(cell)&nbsp;{<a name="line_2434"></a></li>
<li id="line_2435" class="odd"><span class="lineNumber">&nbsp;2435&nbsp;</span>		this.cell&nbsp;=&nbsp;cell;<a name="line_2435"></a></li>
<li id="line_2436" class="even"><span class="lineNumber">&nbsp;2436&nbsp;</span>		this.trigger('cellOver',&nbsp;cell,&nbsp;isCellsEqual(cell,&nbsp;this.origCell),&nbsp;this.origCell);<a name="line_2436"></a></li>
<li id="line_2437" class="odd"><span class="lineNumber">&nbsp;2437&nbsp;</span>	},<a name="line_2437"></a></li>
<li id="line_2438" class="even"><span class="lineNumber">&nbsp;2438&nbsp;</span><a name="line_2438"></a></li>
<li id="line_2439" class="odd"><span class="lineNumber">&nbsp;2439&nbsp;</span><a name="line_2439"></a></li>
<li id="line_2440" class="even"><span class="lineNumber">&nbsp;2440&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;the&nbsp;mouse&nbsp;has&nbsp;just&nbsp;moved&nbsp;out&nbsp;of&nbsp;a&nbsp;cell<a name="line_2440"></a></li>
<li id="line_2441" class="odd"><span class="lineNumber">&nbsp;2441&nbsp;</span>	cellOut:&nbsp;function()&nbsp;{<a name="line_2441"></a></li>
<li id="line_2442" class="even"><span class="lineNumber">&nbsp;2442&nbsp;</span>		if&nbsp;(this.cell)&nbsp;{<a name="line_2442"></a></li>
<li id="line_2443" class="odd"><span class="lineNumber">&nbsp;2443&nbsp;</span>			this.trigger('cellOut',&nbsp;this.cell);<a name="line_2443"></a></li>
<li id="line_2444" class="even"><span class="lineNumber">&nbsp;2444&nbsp;</span>			this.cellDone();<a name="line_2444"></a></li>
<li id="line_2445" class="odd"><span class="lineNumber">&nbsp;2445&nbsp;</span>			this.cell&nbsp;=&nbsp;null;<a name="line_2445"></a></li>
<li id="line_2446" class="even"><span class="lineNumber">&nbsp;2446&nbsp;</span>		}<a name="line_2446"></a></li>
<li id="line_2447" class="odd"><span class="lineNumber">&nbsp;2447&nbsp;</span>	},<a name="line_2447"></a></li>
<li id="line_2448" class="even"><span class="lineNumber">&nbsp;2448&nbsp;</span><a name="line_2448"></a></li>
<li id="line_2449" class="odd"><span class="lineNumber">&nbsp;2449&nbsp;</span><a name="line_2449"></a></li>
<li id="line_2450" class="even"><span class="lineNumber">&nbsp;2450&nbsp;</span>	//&nbsp;Called&nbsp;after&nbsp;a&nbsp;cellOut.&nbsp;Also&nbsp;called&nbsp;before&nbsp;a&nbsp;dragStop<a name="line_2450"></a></li>
<li id="line_2451" class="odd"><span class="lineNumber">&nbsp;2451&nbsp;</span>	cellDone:&nbsp;function()&nbsp;{<a name="line_2451"></a></li>
<li id="line_2452" class="even"><span class="lineNumber">&nbsp;2452&nbsp;</span>		if&nbsp;(this.cell)&nbsp;{<a name="line_2452"></a></li>
<li id="line_2453" class="odd"><span class="lineNumber">&nbsp;2453&nbsp;</span>			this.trigger('cellDone',&nbsp;this.cell);<a name="line_2453"></a></li>
<li id="line_2454" class="even"><span class="lineNumber">&nbsp;2454&nbsp;</span>		}<a name="line_2454"></a></li>
<li id="line_2455" class="odd"><span class="lineNumber">&nbsp;2455&nbsp;</span>	},<a name="line_2455"></a></li>
<li id="line_2456" class="even"><span class="lineNumber">&nbsp;2456&nbsp;</span><a name="line_2456"></a></li>
<li id="line_2457" class="odd"><span class="lineNumber">&nbsp;2457&nbsp;</span><a name="line_2457"></a></li>
<li id="line_2458" class="even"><span class="lineNumber">&nbsp;2458&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;drag&nbsp;listening&nbsp;has&nbsp;stopped<a name="line_2458"></a></li>
<li id="line_2459" class="odd"><span class="lineNumber">&nbsp;2459&nbsp;</span>	listenStop:&nbsp;function()&nbsp;{<a name="line_2459"></a></li>
<li id="line_2460" class="even"><span class="lineNumber">&nbsp;2460&nbsp;</span>		DragListener.prototype.listenStop.apply(this,&nbsp;arguments);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-method<a name="line_2460"></a></li>
<li id="line_2461" class="odd"><span class="lineNumber">&nbsp;2461&nbsp;</span><a name="line_2461"></a></li>
<li id="line_2462" class="even"><span class="lineNumber">&nbsp;2462&nbsp;</span>		this.origCell&nbsp;=&nbsp;this.cell&nbsp;=&nbsp;null;<a name="line_2462"></a></li>
<li id="line_2463" class="odd"><span class="lineNumber">&nbsp;2463&nbsp;</span>		this.coordMap.clear();<a name="line_2463"></a></li>
<li id="line_2464" class="even"><span class="lineNumber">&nbsp;2464&nbsp;</span>	},<a name="line_2464"></a></li>
<li id="line_2465" class="odd"><span class="lineNumber">&nbsp;2465&nbsp;</span><a name="line_2465"></a></li>
<li id="line_2466" class="even"><span class="lineNumber">&nbsp;2466&nbsp;</span><a name="line_2466"></a></li>
<li id="line_2467" class="odd"><span class="lineNumber">&nbsp;2467&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;scrolling&nbsp;has&nbsp;stopped,&nbsp;whether&nbsp;through&nbsp;auto&nbsp;scroll,&nbsp;or&nbsp;the&nbsp;user&nbsp;scrolling<a name="line_2467"></a></li>
<li id="line_2468" class="even"><span class="lineNumber">&nbsp;2468&nbsp;</span>	scrollStop:&nbsp;function()&nbsp;{<a name="line_2468"></a></li>
<li id="line_2469" class="odd"><span class="lineNumber">&nbsp;2469&nbsp;</span>		DragListener.prototype.scrollStop.apply(this,&nbsp;arguments);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-method<a name="line_2469"></a></li>
<li id="line_2470" class="even"><span class="lineNumber">&nbsp;2470&nbsp;</span><a name="line_2470"></a></li>
<li id="line_2471" class="odd"><span class="lineNumber">&nbsp;2471&nbsp;</span>		this.computeCoords();&nbsp;//&nbsp;cells'&nbsp;absolute&nbsp;positions&nbsp;will&nbsp;be&nbsp;in&nbsp;new&nbsp;places.&nbsp;recompute<a name="line_2471"></a></li>
<li id="line_2472" class="even"><span class="lineNumber">&nbsp;2472&nbsp;</span>	},<a name="line_2472"></a></li>
<li id="line_2473" class="odd"><span class="lineNumber">&nbsp;2473&nbsp;</span><a name="line_2473"></a></li>
<li id="line_2474" class="even"><span class="lineNumber">&nbsp;2474&nbsp;</span><a name="line_2474"></a></li>
<li id="line_2475" class="odd"><span class="lineNumber">&nbsp;2475&nbsp;</span>	//&nbsp;Gets&nbsp;the&nbsp;cell&nbsp;underneath&nbsp;the&nbsp;coordinates&nbsp;for&nbsp;the&nbsp;given&nbsp;mouse&nbsp;event<a name="line_2475"></a></li>
<li id="line_2476" class="even"><span class="lineNumber">&nbsp;2476&nbsp;</span>	getCell:&nbsp;function(left,&nbsp;top)&nbsp;{<a name="line_2476"></a></li>
<li id="line_2477" class="odd"><span class="lineNumber">&nbsp;2477&nbsp;</span><a name="line_2477"></a></li>
<li id="line_2478" class="even"><span class="lineNumber">&nbsp;2478&nbsp;</span>		if&nbsp;(this.coordAdjust)&nbsp;{<a name="line_2478"></a></li>
<li id="line_2479" class="odd"><span class="lineNumber">&nbsp;2479&nbsp;</span>			left&nbsp;+=&nbsp;this.coordAdjust.left;<a name="line_2479"></a></li>
<li id="line_2480" class="even"><span class="lineNumber">&nbsp;2480&nbsp;</span>			top&nbsp;+=&nbsp;this.coordAdjust.top;<a name="line_2480"></a></li>
<li id="line_2481" class="odd"><span class="lineNumber">&nbsp;2481&nbsp;</span>		}<a name="line_2481"></a></li>
<li id="line_2482" class="even"><span class="lineNumber">&nbsp;2482&nbsp;</span><a name="line_2482"></a></li>
<li id="line_2483" class="odd"><span class="lineNumber">&nbsp;2483&nbsp;</span>		return&nbsp;this.coordMap.getCell(left,&nbsp;top);<a name="line_2483"></a></li>
<li id="line_2484" class="even"><span class="lineNumber">&nbsp;2484&nbsp;</span>	}<a name="line_2484"></a></li>
<li id="line_2485" class="odd"><span class="lineNumber">&nbsp;2485&nbsp;</span><a name="line_2485"></a></li>
<li id="line_2486" class="even"><span class="lineNumber">&nbsp;2486&nbsp;</span>});<a name="line_2486"></a></li>
<li id="line_2487" class="odd"><span class="lineNumber">&nbsp;2487&nbsp;</span><a name="line_2487"></a></li>
<li id="line_2488" class="even"><span class="lineNumber">&nbsp;2488&nbsp;</span><a name="line_2488"></a></li>
<li id="line_2489" class="odd"><span class="lineNumber">&nbsp;2489&nbsp;</span>//&nbsp;Returns&nbsp;`true`&nbsp;if&nbsp;the&nbsp;cells&nbsp;are&nbsp;identically&nbsp;equal.&nbsp;`false`&nbsp;otherwise.<a name="line_2489"></a></li>
<li id="line_2490" class="even"><span class="lineNumber">&nbsp;2490&nbsp;</span>//&nbsp;They&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;row,&nbsp;col,&nbsp;and&nbsp;be&nbsp;from&nbsp;the&nbsp;same&nbsp;grid.<a name="line_2490"></a></li>
<li id="line_2491" class="odd"><span class="lineNumber">&nbsp;2491&nbsp;</span>//&nbsp;Two&nbsp;null&nbsp;values&nbsp;will&nbsp;be&nbsp;considered&nbsp;equal,&nbsp;as&nbsp;two&nbsp;"out&nbsp;of&nbsp;the&nbsp;grid"&nbsp;states&nbsp;are&nbsp;the&nbsp;same.<a name="line_2491"></a></li>
<li id="line_2492" class="even"><span class="lineNumber">&nbsp;2492&nbsp;</span>function&nbsp;isCellsEqual(cell1,&nbsp;cell2)&nbsp;{<a name="line_2492"></a></li>
<li id="line_2493" class="odd"><span class="lineNumber">&nbsp;2493&nbsp;</span><a name="line_2493"></a></li>
<li id="line_2494" class="even"><span class="lineNumber">&nbsp;2494&nbsp;</span>	if&nbsp;(!cell1&nbsp;&amp;&amp;&nbsp;!cell2)&nbsp;{<a name="line_2494"></a></li>
<li id="line_2495" class="odd"><span class="lineNumber">&nbsp;2495&nbsp;</span>		return&nbsp;true;<a name="line_2495"></a></li>
<li id="line_2496" class="even"><span class="lineNumber">&nbsp;2496&nbsp;</span>	}<a name="line_2496"></a></li>
<li id="line_2497" class="odd"><span class="lineNumber">&nbsp;2497&nbsp;</span><a name="line_2497"></a></li>
<li id="line_2498" class="even"><span class="lineNumber">&nbsp;2498&nbsp;</span>	if&nbsp;(cell1&nbsp;&amp;&amp;&nbsp;cell2)&nbsp;{<a name="line_2498"></a></li>
<li id="line_2499" class="odd"><span class="lineNumber">&nbsp;2499&nbsp;</span>		return&nbsp;cell1.grid&nbsp;===&nbsp;cell2.grid&nbsp;&amp;&amp;<a name="line_2499"></a></li>
<li id="line_2500" class="even"><span class="lineNumber">&nbsp;2500&nbsp;</span>			cell1.row&nbsp;===&nbsp;cell2.row&nbsp;&amp;&amp;<a name="line_2500"></a></li>
<li id="line_2501" class="odd"><span class="lineNumber">&nbsp;2501&nbsp;</span>			cell1.col&nbsp;===&nbsp;cell2.col;<a name="line_2501"></a></li>
<li id="line_2502" class="even"><span class="lineNumber">&nbsp;2502&nbsp;</span>	}<a name="line_2502"></a></li>
<li id="line_2503" class="odd"><span class="lineNumber">&nbsp;2503&nbsp;</span><a name="line_2503"></a></li>
<li id="line_2504" class="even"><span class="lineNumber">&nbsp;2504&nbsp;</span>	return&nbsp;false;<a name="line_2504"></a></li>
<li id="line_2505" class="odd"><span class="lineNumber">&nbsp;2505&nbsp;</span>}<a name="line_2505"></a></li>
<li id="line_2506" class="even"><span class="lineNumber">&nbsp;2506&nbsp;</span><a name="line_2506"></a></li>
<li id="line_2507" class="odd"><span class="lineNumber">&nbsp;2507&nbsp;</span>;;<a name="line_2507"></a></li>
<li id="line_2508" class="even"><span class="lineNumber">&nbsp;2508&nbsp;</span><a name="line_2508"></a></li>
<li id="line_2509" class="odd"><span class="lineNumber">&nbsp;2509&nbsp;</span>/*&nbsp;Creates&nbsp;a&nbsp;clone&nbsp;of&nbsp;an&nbsp;element&nbsp;and&nbsp;lets&nbsp;it&nbsp;track&nbsp;the&nbsp;mouse&nbsp;as&nbsp;it&nbsp;moves<a name="line_2509"></a></li>
<li id="line_2510" class="even"><span class="lineNumber">&nbsp;2510&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_2510"></a></li>
<li id="line_2511" class="odd"><span class="lineNumber">&nbsp;2511&nbsp;</span><a name="line_2511"></a></li>
<li id="line_2512" class="even"><span class="lineNumber">&nbsp;2512&nbsp;</span>var&nbsp;MouseFollower&nbsp;=&nbsp;Class.extend({<a name="line_2512"></a></li>
<li id="line_2513" class="odd"><span class="lineNumber">&nbsp;2513&nbsp;</span><a name="line_2513"></a></li>
<li id="line_2514" class="even"><span class="lineNumber">&nbsp;2514&nbsp;</span>	options:&nbsp;null,<a name="line_2514"></a></li>
<li id="line_2515" class="odd"><span class="lineNumber">&nbsp;2515&nbsp;</span><a name="line_2515"></a></li>
<li id="line_2516" class="even"><span class="lineNumber">&nbsp;2516&nbsp;</span>	sourceEl:&nbsp;null,&nbsp;//&nbsp;the&nbsp;element&nbsp;that&nbsp;will&nbsp;be&nbsp;cloned&nbsp;and&nbsp;made&nbsp;to&nbsp;look&nbsp;like&nbsp;it&nbsp;is&nbsp;dragging<a name="line_2516"></a></li>
<li id="line_2517" class="odd"><span class="lineNumber">&nbsp;2517&nbsp;</span>	el:&nbsp;null,&nbsp;//&nbsp;the&nbsp;clone&nbsp;of&nbsp;`sourceEl`&nbsp;that&nbsp;will&nbsp;track&nbsp;the&nbsp;mouse<a name="line_2517"></a></li>
<li id="line_2518" class="even"><span class="lineNumber">&nbsp;2518&nbsp;</span>	parentEl:&nbsp;null,&nbsp;//&nbsp;the&nbsp;element&nbsp;that&nbsp;`el`&nbsp;(the&nbsp;clone)&nbsp;will&nbsp;be&nbsp;attached&nbsp;to<a name="line_2518"></a></li>
<li id="line_2519" class="odd"><span class="lineNumber">&nbsp;2519&nbsp;</span><a name="line_2519"></a></li>
<li id="line_2520" class="even"><span class="lineNumber">&nbsp;2520&nbsp;</span>	//&nbsp;the&nbsp;initial&nbsp;position&nbsp;of&nbsp;el,&nbsp;relative&nbsp;to&nbsp;the&nbsp;offset&nbsp;parent.&nbsp;made&nbsp;to&nbsp;match&nbsp;the&nbsp;initial&nbsp;offset&nbsp;of&nbsp;sourceEl<a name="line_2520"></a></li>
<li id="line_2521" class="odd"><span class="lineNumber">&nbsp;2521&nbsp;</span>	top0:&nbsp;null,<a name="line_2521"></a></li>
<li id="line_2522" class="even"><span class="lineNumber">&nbsp;2522&nbsp;</span>	left0:&nbsp;null,<a name="line_2522"></a></li>
<li id="line_2523" class="odd"><span class="lineNumber">&nbsp;2523&nbsp;</span><a name="line_2523"></a></li>
<li id="line_2524" class="even"><span class="lineNumber">&nbsp;2524&nbsp;</span>	//&nbsp;the&nbsp;initial&nbsp;position&nbsp;of&nbsp;the&nbsp;mouse<a name="line_2524"></a></li>
<li id="line_2525" class="odd"><span class="lineNumber">&nbsp;2525&nbsp;</span>	mouseY0:&nbsp;null,<a name="line_2525"></a></li>
<li id="line_2526" class="even"><span class="lineNumber">&nbsp;2526&nbsp;</span>	mouseX0:&nbsp;null,<a name="line_2526"></a></li>
<li id="line_2527" class="odd"><span class="lineNumber">&nbsp;2527&nbsp;</span><a name="line_2527"></a></li>
<li id="line_2528" class="even"><span class="lineNumber">&nbsp;2528&nbsp;</span>	//&nbsp;the&nbsp;number&nbsp;of&nbsp;pixels&nbsp;the&nbsp;mouse&nbsp;has&nbsp;moved&nbsp;from&nbsp;its&nbsp;initial&nbsp;position<a name="line_2528"></a></li>
<li id="line_2529" class="odd"><span class="lineNumber">&nbsp;2529&nbsp;</span>	topDelta:&nbsp;null,<a name="line_2529"></a></li>
<li id="line_2530" class="even"><span class="lineNumber">&nbsp;2530&nbsp;</span>	leftDelta:&nbsp;null,<a name="line_2530"></a></li>
<li id="line_2531" class="odd"><span class="lineNumber">&nbsp;2531&nbsp;</span><a name="line_2531"></a></li>
<li id="line_2532" class="even"><span class="lineNumber">&nbsp;2532&nbsp;</span>	mousemoveProxy:&nbsp;null,&nbsp;//&nbsp;document&nbsp;mousemove&nbsp;handler,&nbsp;bound&nbsp;to&nbsp;the&nbsp;MouseFollower's&nbsp;`this`<a name="line_2532"></a></li>
<li id="line_2533" class="odd"><span class="lineNumber">&nbsp;2533&nbsp;</span><a name="line_2533"></a></li>
<li id="line_2534" class="even"><span class="lineNumber">&nbsp;2534&nbsp;</span>	isFollowing:&nbsp;false,<a name="line_2534"></a></li>
<li id="line_2535" class="odd"><span class="lineNumber">&nbsp;2535&nbsp;</span>	isHidden:&nbsp;false,<a name="line_2535"></a></li>
<li id="line_2536" class="even"><span class="lineNumber">&nbsp;2536&nbsp;</span>	isAnimating:&nbsp;false,&nbsp;//&nbsp;doing&nbsp;the&nbsp;revert&nbsp;animation?<a name="line_2536"></a></li>
<li id="line_2537" class="odd"><span class="lineNumber">&nbsp;2537&nbsp;</span><a name="line_2537"></a></li>
<li id="line_2538" class="even"><span class="lineNumber">&nbsp;2538&nbsp;</span>	constructor:&nbsp;function(sourceEl,&nbsp;options)&nbsp;{<a name="line_2538"></a></li>
<li id="line_2539" class="odd"><span class="lineNumber">&nbsp;2539&nbsp;</span>		this.options&nbsp;=&nbsp;options&nbsp;=&nbsp;options&nbsp;||&nbsp;{};<a name="line_2539"></a></li>
<li id="line_2540" class="even"><span class="lineNumber">&nbsp;2540&nbsp;</span>		this.sourceEl&nbsp;=&nbsp;sourceEl;<a name="line_2540"></a></li>
<li id="line_2541" class="odd"><span class="lineNumber">&nbsp;2541&nbsp;</span>		this.parentEl&nbsp;=&nbsp;options.parentEl&nbsp;?&nbsp;$(options.parentEl)&nbsp;:&nbsp;sourceEl.parent();&nbsp;//&nbsp;default&nbsp;to&nbsp;sourceEl's&nbsp;parent<a name="line_2541"></a></li>
<li id="line_2542" class="even"><span class="lineNumber">&nbsp;2542&nbsp;</span>	},<a name="line_2542"></a></li>
<li id="line_2543" class="odd"><span class="lineNumber">&nbsp;2543&nbsp;</span><a name="line_2543"></a></li>
<li id="line_2544" class="even"><span class="lineNumber">&nbsp;2544&nbsp;</span><a name="line_2544"></a></li>
<li id="line_2545" class="odd"><span class="lineNumber">&nbsp;2545&nbsp;</span>	//&nbsp;Causes&nbsp;the&nbsp;element&nbsp;to&nbsp;start&nbsp;following&nbsp;the&nbsp;mouse<a name="line_2545"></a></li>
<li id="line_2546" class="even"><span class="lineNumber">&nbsp;2546&nbsp;</span>	start:&nbsp;function(ev)&nbsp;{<a name="line_2546"></a></li>
<li id="line_2547" class="odd"><span class="lineNumber">&nbsp;2547&nbsp;</span>		if&nbsp;(!this.isFollowing)&nbsp;{<a name="line_2547"></a></li>
<li id="line_2548" class="even"><span class="lineNumber">&nbsp;2548&nbsp;</span>			this.isFollowing&nbsp;=&nbsp;true;<a name="line_2548"></a></li>
<li id="line_2549" class="odd"><span class="lineNumber">&nbsp;2549&nbsp;</span><a name="line_2549"></a></li>
<li id="line_2550" class="even"><span class="lineNumber">&nbsp;2550&nbsp;</span>			this.mouseY0&nbsp;=&nbsp;ev.pageY;<a name="line_2550"></a></li>
<li id="line_2551" class="odd"><span class="lineNumber">&nbsp;2551&nbsp;</span>			this.mouseX0&nbsp;=&nbsp;ev.pageX;<a name="line_2551"></a></li>
<li id="line_2552" class="even"><span class="lineNumber">&nbsp;2552&nbsp;</span>			this.topDelta&nbsp;=&nbsp;0;<a name="line_2552"></a></li>
<li id="line_2553" class="odd"><span class="lineNumber">&nbsp;2553&nbsp;</span>			this.leftDelta&nbsp;=&nbsp;0;<a name="line_2553"></a></li>
<li id="line_2554" class="even"><span class="lineNumber">&nbsp;2554&nbsp;</span><a name="line_2554"></a></li>
<li id="line_2555" class="odd"><span class="lineNumber">&nbsp;2555&nbsp;</span>			if&nbsp;(!this.isHidden)&nbsp;{<a name="line_2555"></a></li>
<li id="line_2556" class="even"><span class="lineNumber">&nbsp;2556&nbsp;</span>				this.updatePosition();<a name="line_2556"></a></li>
<li id="line_2557" class="odd"><span class="lineNumber">&nbsp;2557&nbsp;</span>			}<a name="line_2557"></a></li>
<li id="line_2558" class="even"><span class="lineNumber">&nbsp;2558&nbsp;</span><a name="line_2558"></a></li>
<li id="line_2559" class="odd"><span class="lineNumber">&nbsp;2559&nbsp;</span>			$(document).on('mousemove',&nbsp;this.mousemoveProxy&nbsp;=&nbsp;proxy(this,&nbsp;'mousemove'));<a name="line_2559"></a></li>
<li id="line_2560" class="even"><span class="lineNumber">&nbsp;2560&nbsp;</span>		}<a name="line_2560"></a></li>
<li id="line_2561" class="odd"><span class="lineNumber">&nbsp;2561&nbsp;</span>	},<a name="line_2561"></a></li>
<li id="line_2562" class="even"><span class="lineNumber">&nbsp;2562&nbsp;</span><a name="line_2562"></a></li>
<li id="line_2563" class="odd"><span class="lineNumber">&nbsp;2563&nbsp;</span><a name="line_2563"></a></li>
<li id="line_2564" class="even"><span class="lineNumber">&nbsp;2564&nbsp;</span>	//&nbsp;Causes&nbsp;the&nbsp;element&nbsp;to&nbsp;stop&nbsp;following&nbsp;the&nbsp;mouse.&nbsp;If&nbsp;shouldRevert&nbsp;is&nbsp;true,&nbsp;will&nbsp;animate&nbsp;back&nbsp;to&nbsp;original&nbsp;position.<a name="line_2564"></a></li>
<li id="line_2565" class="odd"><span class="lineNumber">&nbsp;2565&nbsp;</span>	//&nbsp;`callback`&nbsp;gets&nbsp;invoked&nbsp;when&nbsp;the&nbsp;animation&nbsp;is&nbsp;complete.&nbsp;If&nbsp;no&nbsp;animation,&nbsp;it&nbsp;is&nbsp;invoked&nbsp;immediately.<a name="line_2565"></a></li>
<li id="line_2566" class="even"><span class="lineNumber">&nbsp;2566&nbsp;</span>	stop:&nbsp;function(shouldRevert,&nbsp;callback)&nbsp;{<a name="line_2566"></a></li>
<li id="line_2567" class="odd"><span class="lineNumber">&nbsp;2567&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_2567"></a></li>
<li id="line_2568" class="even"><span class="lineNumber">&nbsp;2568&nbsp;</span>		var&nbsp;revertDuration&nbsp;=&nbsp;this.options.revertDuration;<a name="line_2568"></a></li>
<li id="line_2569" class="odd"><span class="lineNumber">&nbsp;2569&nbsp;</span><a name="line_2569"></a></li>
<li id="line_2570" class="even"><span class="lineNumber">&nbsp;2570&nbsp;</span>		function&nbsp;complete()&nbsp;{<a name="line_2570"></a></li>
<li id="line_2571" class="odd"><span class="lineNumber">&nbsp;2571&nbsp;</span>			this.isAnimating&nbsp;=&nbsp;false;<a name="line_2571"></a></li>
<li id="line_2572" class="even"><span class="lineNumber">&nbsp;2572&nbsp;</span>			_this.removeElement();<a name="line_2572"></a></li>
<li id="line_2573" class="odd"><span class="lineNumber">&nbsp;2573&nbsp;</span><a name="line_2573"></a></li>
<li id="line_2574" class="even"><span class="lineNumber">&nbsp;2574&nbsp;</span>			this.top0&nbsp;=&nbsp;this.left0&nbsp;=&nbsp;null;&nbsp;//&nbsp;reset&nbsp;state&nbsp;for&nbsp;future&nbsp;updatePosition&nbsp;calls<a name="line_2574"></a></li>
<li id="line_2575" class="odd"><span class="lineNumber">&nbsp;2575&nbsp;</span><a name="line_2575"></a></li>
<li id="line_2576" class="even"><span class="lineNumber">&nbsp;2576&nbsp;</span>			if&nbsp;(callback)&nbsp;{<a name="line_2576"></a></li>
<li id="line_2577" class="odd"><span class="lineNumber">&nbsp;2577&nbsp;</span>				callback();<a name="line_2577"></a></li>
<li id="line_2578" class="even"><span class="lineNumber">&nbsp;2578&nbsp;</span>			}<a name="line_2578"></a></li>
<li id="line_2579" class="odd"><span class="lineNumber">&nbsp;2579&nbsp;</span>		}<a name="line_2579"></a></li>
<li id="line_2580" class="even"><span class="lineNumber">&nbsp;2580&nbsp;</span><a name="line_2580"></a></li>
<li id="line_2581" class="odd"><span class="lineNumber">&nbsp;2581&nbsp;</span>		if&nbsp;(this.isFollowing&nbsp;&amp;&amp;&nbsp;!this.isAnimating)&nbsp;{&nbsp;//&nbsp;disallow&nbsp;more&nbsp;than&nbsp;one&nbsp;stop&nbsp;animation&nbsp;at&nbsp;a&nbsp;time<a name="line_2581"></a></li>
<li id="line_2582" class="even"><span class="lineNumber">&nbsp;2582&nbsp;</span>			this.isFollowing&nbsp;=&nbsp;false;<a name="line_2582"></a></li>
<li id="line_2583" class="odd"><span class="lineNumber">&nbsp;2583&nbsp;</span><a name="line_2583"></a></li>
<li id="line_2584" class="even"><span class="lineNumber">&nbsp;2584&nbsp;</span>			$(document).off('mousemove',&nbsp;this.mousemoveProxy);<a name="line_2584"></a></li>
<li id="line_2585" class="odd"><span class="lineNumber">&nbsp;2585&nbsp;</span><a name="line_2585"></a></li>
<li id="line_2586" class="even"><span class="lineNumber">&nbsp;2586&nbsp;</span>			if&nbsp;(shouldRevert&nbsp;&amp;&amp;&nbsp;revertDuration&nbsp;&amp;&amp;&nbsp;!this.isHidden)&nbsp;{&nbsp;//&nbsp;do&nbsp;a&nbsp;revert&nbsp;animation?<a name="line_2586"></a></li>
<li id="line_2587" class="odd"><span class="lineNumber">&nbsp;2587&nbsp;</span>				this.isAnimating&nbsp;=&nbsp;true;<a name="line_2587"></a></li>
<li id="line_2588" class="even"><span class="lineNumber">&nbsp;2588&nbsp;</span>				this.el.animate({<a name="line_2588"></a></li>
<li id="line_2589" class="odd"><span class="lineNumber">&nbsp;2589&nbsp;</span>					top:&nbsp;this.top0,<a name="line_2589"></a></li>
<li id="line_2590" class="even"><span class="lineNumber">&nbsp;2590&nbsp;</span>					left:&nbsp;this.left0<a name="line_2590"></a></li>
<li id="line_2591" class="odd"><span class="lineNumber">&nbsp;2591&nbsp;</span>				},&nbsp;{<a name="line_2591"></a></li>
<li id="line_2592" class="even"><span class="lineNumber">&nbsp;2592&nbsp;</span>					duration:&nbsp;revertDuration,<a name="line_2592"></a></li>
<li id="line_2593" class="odd"><span class="lineNumber">&nbsp;2593&nbsp;</span>					complete:&nbsp;complete<a name="line_2593"></a></li>
<li id="line_2594" class="even"><span class="lineNumber">&nbsp;2594&nbsp;</span>				});<a name="line_2594"></a></li>
<li id="line_2595" class="odd"><span class="lineNumber">&nbsp;2595&nbsp;</span>			}<a name="line_2595"></a></li>
<li id="line_2596" class="even"><span class="lineNumber">&nbsp;2596&nbsp;</span>			else&nbsp;{<a name="line_2596"></a></li>
<li id="line_2597" class="odd"><span class="lineNumber">&nbsp;2597&nbsp;</span>				complete();<a name="line_2597"></a></li>
<li id="line_2598" class="even"><span class="lineNumber">&nbsp;2598&nbsp;</span>			}<a name="line_2598"></a></li>
<li id="line_2599" class="odd"><span class="lineNumber">&nbsp;2599&nbsp;</span>		}<a name="line_2599"></a></li>
<li id="line_2600" class="even"><span class="lineNumber">&nbsp;2600&nbsp;</span>	},<a name="line_2600"></a></li>
<li id="line_2601" class="odd"><span class="lineNumber">&nbsp;2601&nbsp;</span><a name="line_2601"></a></li>
<li id="line_2602" class="even"><span class="lineNumber">&nbsp;2602&nbsp;</span><a name="line_2602"></a></li>
<li id="line_2603" class="odd"><span class="lineNumber">&nbsp;2603&nbsp;</span>	//&nbsp;Gets&nbsp;the&nbsp;tracking&nbsp;element.&nbsp;Create&nbsp;it&nbsp;if&nbsp;necessary<a name="line_2603"></a></li>
<li id="line_2604" class="even"><span class="lineNumber">&nbsp;2604&nbsp;</span>	getEl:&nbsp;function()&nbsp;{<a name="line_2604"></a></li>
<li id="line_2605" class="odd"><span class="lineNumber">&nbsp;2605&nbsp;</span>		var&nbsp;el&nbsp;=&nbsp;this.el;<a name="line_2605"></a></li>
<li id="line_2606" class="even"><span class="lineNumber">&nbsp;2606&nbsp;</span><a name="line_2606"></a></li>
<li id="line_2607" class="odd"><span class="lineNumber">&nbsp;2607&nbsp;</span>		if&nbsp;(!el)&nbsp;{<a name="line_2607"></a></li>
<li id="line_2608" class="even"><span class="lineNumber">&nbsp;2608&nbsp;</span>			this.sourceEl.width();&nbsp;//&nbsp;hack&nbsp;to&nbsp;force&nbsp;IE8&nbsp;to&nbsp;compute&nbsp;correct&nbsp;bounding&nbsp;box<a name="line_2608"></a></li>
<li id="line_2609" class="odd"><span class="lineNumber">&nbsp;2609&nbsp;</span>			el&nbsp;=&nbsp;this.el&nbsp;=&nbsp;this.sourceEl.clone()<a name="line_2609"></a></li>
<li id="line_2610" class="even"><span class="lineNumber">&nbsp;2610&nbsp;</span>				.css({<a name="line_2610"></a></li>
<li id="line_2611" class="odd"><span class="lineNumber">&nbsp;2611&nbsp;</span>					position:&nbsp;'absolute',<a name="line_2611"></a></li>
<li id="line_2612" class="even"><span class="lineNumber">&nbsp;2612&nbsp;</span>					visibility:&nbsp;'',&nbsp;//&nbsp;in&nbsp;case&nbsp;original&nbsp;element&nbsp;was&nbsp;hidden&nbsp;(commonly&nbsp;through&nbsp;hideEvents())<a name="line_2612"></a></li>
<li id="line_2613" class="odd"><span class="lineNumber">&nbsp;2613&nbsp;</span>					display:&nbsp;this.isHidden&nbsp;?&nbsp;'none'&nbsp;:&nbsp;'',&nbsp;//&nbsp;for&nbsp;when&nbsp;initially&nbsp;hidden<a name="line_2613"></a></li>
<li id="line_2614" class="even"><span class="lineNumber">&nbsp;2614&nbsp;</span>					margin:&nbsp;0,<a name="line_2614"></a></li>
<li id="line_2615" class="odd"><span class="lineNumber">&nbsp;2615&nbsp;</span>					right:&nbsp;'auto',&nbsp;//&nbsp;erase&nbsp;and&nbsp;set&nbsp;width&nbsp;instead<a name="line_2615"></a></li>
<li id="line_2616" class="even"><span class="lineNumber">&nbsp;2616&nbsp;</span>					bottom:&nbsp;'auto',&nbsp;//&nbsp;erase&nbsp;and&nbsp;set&nbsp;height&nbsp;instead<a name="line_2616"></a></li>
<li id="line_2617" class="odd"><span class="lineNumber">&nbsp;2617&nbsp;</span>					width:&nbsp;this.sourceEl.width(),&nbsp;//&nbsp;explicit&nbsp;height&nbsp;in&nbsp;case&nbsp;there&nbsp;was&nbsp;a&nbsp;'right'&nbsp;value<a name="line_2617"></a></li>
<li id="line_2618" class="even"><span class="lineNumber">&nbsp;2618&nbsp;</span>					height:&nbsp;this.sourceEl.height(),&nbsp;//&nbsp;explicit&nbsp;width&nbsp;in&nbsp;case&nbsp;there&nbsp;was&nbsp;a&nbsp;'bottom'&nbsp;value<a name="line_2618"></a></li>
<li id="line_2619" class="odd"><span class="lineNumber">&nbsp;2619&nbsp;</span>					opacity:&nbsp;this.options.opacity&nbsp;||&nbsp;'',<a name="line_2619"></a></li>
<li id="line_2620" class="even"><span class="lineNumber">&nbsp;2620&nbsp;</span>					zIndex:&nbsp;this.options.zIndex<a name="line_2620"></a></li>
<li id="line_2621" class="odd"><span class="lineNumber">&nbsp;2621&nbsp;</span>				})<a name="line_2621"></a></li>
<li id="line_2622" class="even"><span class="lineNumber">&nbsp;2622&nbsp;</span>				.appendTo(this.parentEl);<a name="line_2622"></a></li>
<li id="line_2623" class="odd"><span class="lineNumber">&nbsp;2623&nbsp;</span>		}<a name="line_2623"></a></li>
<li id="line_2624" class="even"><span class="lineNumber">&nbsp;2624&nbsp;</span><a name="line_2624"></a></li>
<li id="line_2625" class="odd"><span class="lineNumber">&nbsp;2625&nbsp;</span>		return&nbsp;el;<a name="line_2625"></a></li>
<li id="line_2626" class="even"><span class="lineNumber">&nbsp;2626&nbsp;</span>	},<a name="line_2626"></a></li>
<li id="line_2627" class="odd"><span class="lineNumber">&nbsp;2627&nbsp;</span><a name="line_2627"></a></li>
<li id="line_2628" class="even"><span class="lineNumber">&nbsp;2628&nbsp;</span><a name="line_2628"></a></li>
<li id="line_2629" class="odd"><span class="lineNumber">&nbsp;2629&nbsp;</span>	//&nbsp;Removes&nbsp;the&nbsp;tracking&nbsp;element&nbsp;if&nbsp;it&nbsp;has&nbsp;already&nbsp;been&nbsp;created<a name="line_2629"></a></li>
<li id="line_2630" class="even"><span class="lineNumber">&nbsp;2630&nbsp;</span>	removeElement:&nbsp;function()&nbsp;{<a name="line_2630"></a></li>
<li id="line_2631" class="odd"><span class="lineNumber">&nbsp;2631&nbsp;</span>		if&nbsp;(this.el)&nbsp;{<a name="line_2631"></a></li>
<li id="line_2632" class="even"><span class="lineNumber">&nbsp;2632&nbsp;</span>			this.el.remove();<a name="line_2632"></a></li>
<li id="line_2633" class="odd"><span class="lineNumber">&nbsp;2633&nbsp;</span>			this.el&nbsp;=&nbsp;null;<a name="line_2633"></a></li>
<li id="line_2634" class="even"><span class="lineNumber">&nbsp;2634&nbsp;</span>		}<a name="line_2634"></a></li>
<li id="line_2635" class="odd"><span class="lineNumber">&nbsp;2635&nbsp;</span>	},<a name="line_2635"></a></li>
<li id="line_2636" class="even"><span class="lineNumber">&nbsp;2636&nbsp;</span><a name="line_2636"></a></li>
<li id="line_2637" class="odd"><span class="lineNumber">&nbsp;2637&nbsp;</span><a name="line_2637"></a></li>
<li id="line_2638" class="even"><span class="lineNumber">&nbsp;2638&nbsp;</span>	//&nbsp;Update&nbsp;the&nbsp;CSS&nbsp;position&nbsp;of&nbsp;the&nbsp;tracking&nbsp;element<a name="line_2638"></a></li>
<li id="line_2639" class="odd"><span class="lineNumber">&nbsp;2639&nbsp;</span>	updatePosition:&nbsp;function()&nbsp;{<a name="line_2639"></a></li>
<li id="line_2640" class="even"><span class="lineNumber">&nbsp;2640&nbsp;</span>		var&nbsp;sourceOffset;<a name="line_2640"></a></li>
<li id="line_2641" class="odd"><span class="lineNumber">&nbsp;2641&nbsp;</span>		var&nbsp;origin;<a name="line_2641"></a></li>
<li id="line_2642" class="even"><span class="lineNumber">&nbsp;2642&nbsp;</span><a name="line_2642"></a></li>
<li id="line_2643" class="odd"><span class="lineNumber">&nbsp;2643&nbsp;</span>		this.getEl();&nbsp;//&nbsp;ensure&nbsp;this.el<a name="line_2643"></a></li>
<li id="line_2644" class="even"><span class="lineNumber">&nbsp;2644&nbsp;</span><a name="line_2644"></a></li>
<li id="line_2645" class="odd"><span class="lineNumber">&nbsp;2645&nbsp;</span>		//&nbsp;make&nbsp;sure&nbsp;origin&nbsp;info&nbsp;was&nbsp;computed<a name="line_2645"></a></li>
<li id="line_2646" class="even"><span class="lineNumber">&nbsp;2646&nbsp;</span>		if&nbsp;(this.top0&nbsp;===&nbsp;null)&nbsp;{<a name="line_2646"></a></li>
<li id="line_2647" class="odd"><span class="lineNumber">&nbsp;2647&nbsp;</span>			this.sourceEl.width();&nbsp;//&nbsp;hack&nbsp;to&nbsp;force&nbsp;IE8&nbsp;to&nbsp;compute&nbsp;correct&nbsp;bounding&nbsp;box<a name="line_2647"></a></li>
<li id="line_2648" class="even"><span class="lineNumber">&nbsp;2648&nbsp;</span>			sourceOffset&nbsp;=&nbsp;this.sourceEl.offset();<a name="line_2648"></a></li>
<li id="line_2649" class="odd"><span class="lineNumber">&nbsp;2649&nbsp;</span>			origin&nbsp;=&nbsp;this.el.offsetParent().offset();<a name="line_2649"></a></li>
<li id="line_2650" class="even"><span class="lineNumber">&nbsp;2650&nbsp;</span>			this.top0&nbsp;=&nbsp;sourceOffset.top&nbsp;-&nbsp;origin.top;<a name="line_2650"></a></li>
<li id="line_2651" class="odd"><span class="lineNumber">&nbsp;2651&nbsp;</span>			this.left0&nbsp;=&nbsp;sourceOffset.left&nbsp;-&nbsp;origin.left;<a name="line_2651"></a></li>
<li id="line_2652" class="even"><span class="lineNumber">&nbsp;2652&nbsp;</span>		}<a name="line_2652"></a></li>
<li id="line_2653" class="odd"><span class="lineNumber">&nbsp;2653&nbsp;</span><a name="line_2653"></a></li>
<li id="line_2654" class="even"><span class="lineNumber">&nbsp;2654&nbsp;</span>		this.el.css({<a name="line_2654"></a></li>
<li id="line_2655" class="odd"><span class="lineNumber">&nbsp;2655&nbsp;</span>			top:&nbsp;this.top0&nbsp;+&nbsp;this.topDelta,<a name="line_2655"></a></li>
<li id="line_2656" class="even"><span class="lineNumber">&nbsp;2656&nbsp;</span>			left:&nbsp;this.left0&nbsp;+&nbsp;this.leftDelta<a name="line_2656"></a></li>
<li id="line_2657" class="odd"><span class="lineNumber">&nbsp;2657&nbsp;</span>		});<a name="line_2657"></a></li>
<li id="line_2658" class="even"><span class="lineNumber">&nbsp;2658&nbsp;</span>	},<a name="line_2658"></a></li>
<li id="line_2659" class="odd"><span class="lineNumber">&nbsp;2659&nbsp;</span><a name="line_2659"></a></li>
<li id="line_2660" class="even"><span class="lineNumber">&nbsp;2660&nbsp;</span><a name="line_2660"></a></li>
<li id="line_2661" class="odd"><span class="lineNumber">&nbsp;2661&nbsp;</span>	//&nbsp;Gets&nbsp;called&nbsp;when&nbsp;the&nbsp;user&nbsp;moves&nbsp;the&nbsp;mouse<a name="line_2661"></a></li>
<li id="line_2662" class="even"><span class="lineNumber">&nbsp;2662&nbsp;</span>	mousemove:&nbsp;function(ev)&nbsp;{<a name="line_2662"></a></li>
<li id="line_2663" class="odd"><span class="lineNumber">&nbsp;2663&nbsp;</span>		this.topDelta&nbsp;=&nbsp;ev.pageY&nbsp;-&nbsp;this.mouseY0;<a name="line_2663"></a></li>
<li id="line_2664" class="even"><span class="lineNumber">&nbsp;2664&nbsp;</span>		this.leftDelta&nbsp;=&nbsp;ev.pageX&nbsp;-&nbsp;this.mouseX0;<a name="line_2664"></a></li>
<li id="line_2665" class="odd"><span class="lineNumber">&nbsp;2665&nbsp;</span><a name="line_2665"></a></li>
<li id="line_2666" class="even"><span class="lineNumber">&nbsp;2666&nbsp;</span>		if&nbsp;(!this.isHidden)&nbsp;{<a name="line_2666"></a></li>
<li id="line_2667" class="odd"><span class="lineNumber">&nbsp;2667&nbsp;</span>			this.updatePosition();<a name="line_2667"></a></li>
<li id="line_2668" class="even"><span class="lineNumber">&nbsp;2668&nbsp;</span>		}<a name="line_2668"></a></li>
<li id="line_2669" class="odd"><span class="lineNumber">&nbsp;2669&nbsp;</span>	},<a name="line_2669"></a></li>
<li id="line_2670" class="even"><span class="lineNumber">&nbsp;2670&nbsp;</span><a name="line_2670"></a></li>
<li id="line_2671" class="odd"><span class="lineNumber">&nbsp;2671&nbsp;</span><a name="line_2671"></a></li>
<li id="line_2672" class="even"><span class="lineNumber">&nbsp;2672&nbsp;</span>	//&nbsp;Temporarily&nbsp;makes&nbsp;the&nbsp;tracking&nbsp;element&nbsp;invisible.&nbsp;Can&nbsp;be&nbsp;called&nbsp;before&nbsp;following&nbsp;starts<a name="line_2672"></a></li>
<li id="line_2673" class="odd"><span class="lineNumber">&nbsp;2673&nbsp;</span>	hide:&nbsp;function()&nbsp;{<a name="line_2673"></a></li>
<li id="line_2674" class="even"><span class="lineNumber">&nbsp;2674&nbsp;</span>		if&nbsp;(!this.isHidden)&nbsp;{<a name="line_2674"></a></li>
<li id="line_2675" class="odd"><span class="lineNumber">&nbsp;2675&nbsp;</span>			this.isHidden&nbsp;=&nbsp;true;<a name="line_2675"></a></li>
<li id="line_2676" class="even"><span class="lineNumber">&nbsp;2676&nbsp;</span>			if&nbsp;(this.el)&nbsp;{<a name="line_2676"></a></li>
<li id="line_2677" class="odd"><span class="lineNumber">&nbsp;2677&nbsp;</span>				this.el.hide();<a name="line_2677"></a></li>
<li id="line_2678" class="even"><span class="lineNumber">&nbsp;2678&nbsp;</span>			}<a name="line_2678"></a></li>
<li id="line_2679" class="odd"><span class="lineNumber">&nbsp;2679&nbsp;</span>		}<a name="line_2679"></a></li>
<li id="line_2680" class="even"><span class="lineNumber">&nbsp;2680&nbsp;</span>	},<a name="line_2680"></a></li>
<li id="line_2681" class="odd"><span class="lineNumber">&nbsp;2681&nbsp;</span><a name="line_2681"></a></li>
<li id="line_2682" class="even"><span class="lineNumber">&nbsp;2682&nbsp;</span><a name="line_2682"></a></li>
<li id="line_2683" class="odd"><span class="lineNumber">&nbsp;2683&nbsp;</span>	//&nbsp;Show&nbsp;the&nbsp;tracking&nbsp;element&nbsp;after&nbsp;it&nbsp;has&nbsp;been&nbsp;temporarily&nbsp;hidden<a name="line_2683"></a></li>
<li id="line_2684" class="even"><span class="lineNumber">&nbsp;2684&nbsp;</span>	show:&nbsp;function()&nbsp;{<a name="line_2684"></a></li>
<li id="line_2685" class="odd"><span class="lineNumber">&nbsp;2685&nbsp;</span>		if&nbsp;(this.isHidden)&nbsp;{<a name="line_2685"></a></li>
<li id="line_2686" class="even"><span class="lineNumber">&nbsp;2686&nbsp;</span>			this.isHidden&nbsp;=&nbsp;false;<a name="line_2686"></a></li>
<li id="line_2687" class="odd"><span class="lineNumber">&nbsp;2687&nbsp;</span>			this.updatePosition();<a name="line_2687"></a></li>
<li id="line_2688" class="even"><span class="lineNumber">&nbsp;2688&nbsp;</span>			this.getEl().show();<a name="line_2688"></a></li>
<li id="line_2689" class="odd"><span class="lineNumber">&nbsp;2689&nbsp;</span>		}<a name="line_2689"></a></li>
<li id="line_2690" class="even"><span class="lineNumber">&nbsp;2690&nbsp;</span>	}<a name="line_2690"></a></li>
<li id="line_2691" class="odd"><span class="lineNumber">&nbsp;2691&nbsp;</span><a name="line_2691"></a></li>
<li id="line_2692" class="even"><span class="lineNumber">&nbsp;2692&nbsp;</span>});<a name="line_2692"></a></li>
<li id="line_2693" class="odd"><span class="lineNumber">&nbsp;2693&nbsp;</span><a name="line_2693"></a></li>
<li id="line_2694" class="even"><span class="lineNumber">&nbsp;2694&nbsp;</span>;;<a name="line_2694"></a></li>
<li id="line_2695" class="odd"><span class="lineNumber">&nbsp;2695&nbsp;</span><a name="line_2695"></a></li>
<li id="line_2696" class="even"><span class="lineNumber">&nbsp;2696&nbsp;</span>/*&nbsp;A&nbsp;utility&nbsp;class&nbsp;for&nbsp;rendering&nbsp;&lt;tr&gt;&nbsp;rows.<a name="line_2696"></a></li>
<li id="line_2697" class="odd"><span class="lineNumber">&nbsp;2697&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_2697"></a></li>
<li id="line_2698" class="even"><span class="lineNumber">&nbsp;2698&nbsp;</span>//&nbsp;It&nbsp;leverages&nbsp;methods&nbsp;of&nbsp;the&nbsp;subclass&nbsp;and&nbsp;the&nbsp;View&nbsp;to&nbsp;determine&nbsp;custom&nbsp;rendering&nbsp;behavior&nbsp;for&nbsp;each&nbsp;row&nbsp;"type"<a name="line_2698"></a></li>
<li id="line_2699" class="odd"><span class="lineNumber">&nbsp;2699&nbsp;</span>//&nbsp;(such&nbsp;as&nbsp;highlight&nbsp;rows,&nbsp;day&nbsp;rows,&nbsp;helper&nbsp;rows,&nbsp;etc).<a name="line_2699"></a></li>
<li id="line_2700" class="even"><span class="lineNumber">&nbsp;2700&nbsp;</span><a name="line_2700"></a></li>
<li id="line_2701" class="odd"><span class="lineNumber">&nbsp;2701&nbsp;</span>var&nbsp;RowRenderer&nbsp;=&nbsp;Class.extend({<a name="line_2701"></a></li>
<li id="line_2702" class="even"><span class="lineNumber">&nbsp;2702&nbsp;</span><a name="line_2702"></a></li>
<li id="line_2703" class="odd"><span class="lineNumber">&nbsp;2703&nbsp;</span>	view:&nbsp;null,&nbsp;//&nbsp;a&nbsp;View&nbsp;object<a name="line_2703"></a></li>
<li id="line_2704" class="even"><span class="lineNumber">&nbsp;2704&nbsp;</span>	isRTL:&nbsp;null,&nbsp;//&nbsp;shortcut&nbsp;to&nbsp;the&nbsp;view's&nbsp;isRTL&nbsp;option<a name="line_2704"></a></li>
<li id="line_2705" class="odd"><span class="lineNumber">&nbsp;2705&nbsp;</span>	cellHtml:&nbsp;'&lt;td/&gt;',&nbsp;//&nbsp;plain&nbsp;default&nbsp;HTML&nbsp;used&nbsp;for&nbsp;a&nbsp;cell&nbsp;when&nbsp;no&nbsp;other&nbsp;is&nbsp;available<a name="line_2705"></a></li>
<li id="line_2706" class="even"><span class="lineNumber">&nbsp;2706&nbsp;</span><a name="line_2706"></a></li>
<li id="line_2707" class="odd"><span class="lineNumber">&nbsp;2707&nbsp;</span><a name="line_2707"></a></li>
<li id="line_2708" class="even"><span class="lineNumber">&nbsp;2708&nbsp;</span>	constructor:&nbsp;function(view)&nbsp;{<a name="line_2708"></a></li>
<li id="line_2709" class="odd"><span class="lineNumber">&nbsp;2709&nbsp;</span>		this.view&nbsp;=&nbsp;view;<a name="line_2709"></a></li>
<li id="line_2710" class="even"><span class="lineNumber">&nbsp;2710&nbsp;</span>		this.isRTL&nbsp;=&nbsp;view.opt('isRTL');<a name="line_2710"></a></li>
<li id="line_2711" class="odd"><span class="lineNumber">&nbsp;2711&nbsp;</span>	},<a name="line_2711"></a></li>
<li id="line_2712" class="even"><span class="lineNumber">&nbsp;2712&nbsp;</span><a name="line_2712"></a></li>
<li id="line_2713" class="odd"><span class="lineNumber">&nbsp;2713&nbsp;</span><a name="line_2713"></a></li>
<li id="line_2714" class="even"><span class="lineNumber">&nbsp;2714&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;HTML&nbsp;for&nbsp;a&nbsp;row,&nbsp;leveraging&nbsp;custom&nbsp;cell-HTML-renderers&nbsp;based&nbsp;on&nbsp;the&nbsp;`rowType`.<a name="line_2714"></a></li>
<li id="line_2715" class="odd"><span class="lineNumber">&nbsp;2715&nbsp;</span>	//&nbsp;Also&nbsp;applies&nbsp;the&nbsp;"intro"&nbsp;and&nbsp;"outro"&nbsp;cells,&nbsp;which&nbsp;are&nbsp;specified&nbsp;by&nbsp;the&nbsp;subclass&nbsp;and&nbsp;views.<a name="line_2715"></a></li>
<li id="line_2716" class="even"><span class="lineNumber">&nbsp;2716&nbsp;</span>	//&nbsp;`row`&nbsp;is&nbsp;an&nbsp;optional&nbsp;row&nbsp;number.<a name="line_2716"></a></li>
<li id="line_2717" class="odd"><span class="lineNumber">&nbsp;2717&nbsp;</span>	rowHtml:&nbsp;function(rowType,&nbsp;row)&nbsp;{<a name="line_2717"></a></li>
<li id="line_2718" class="even"><span class="lineNumber">&nbsp;2718&nbsp;</span>		var&nbsp;renderCell&nbsp;=&nbsp;this.getHtmlRenderer('cell',&nbsp;rowType);<a name="line_2718"></a></li>
<li id="line_2719" class="odd"><span class="lineNumber">&nbsp;2719&nbsp;</span>		var&nbsp;rowCellHtml&nbsp;=&nbsp;'';<a name="line_2719"></a></li>
<li id="line_2720" class="even"><span class="lineNumber">&nbsp;2720&nbsp;</span>		var&nbsp;col;<a name="line_2720"></a></li>
<li id="line_2721" class="odd"><span class="lineNumber">&nbsp;2721&nbsp;</span>		var&nbsp;cell;<a name="line_2721"></a></li>
<li id="line_2722" class="even"><span class="lineNumber">&nbsp;2722&nbsp;</span><a name="line_2722"></a></li>
<li id="line_2723" class="odd"><span class="lineNumber">&nbsp;2723&nbsp;</span>		row&nbsp;=&nbsp;row&nbsp;||&nbsp;0;<a name="line_2723"></a></li>
<li id="line_2724" class="even"><span class="lineNumber">&nbsp;2724&nbsp;</span><a name="line_2724"></a></li>
<li id="line_2725" class="odd"><span class="lineNumber">&nbsp;2725&nbsp;</span>		for&nbsp;(col&nbsp;=&nbsp;0;&nbsp;col&nbsp;&lt;&nbsp;this.colCnt;&nbsp;col++)&nbsp;{<a name="line_2725"></a></li>
<li id="line_2726" class="even"><span class="lineNumber">&nbsp;2726&nbsp;</span>			cell&nbsp;=&nbsp;this.getCell(row,&nbsp;col);<a name="line_2726"></a></li>
<li id="line_2727" class="odd"><span class="lineNumber">&nbsp;2727&nbsp;</span>			rowCellHtml&nbsp;+=&nbsp;renderCell(cell);<a name="line_2727"></a></li>
<li id="line_2728" class="even"><span class="lineNumber">&nbsp;2728&nbsp;</span>		}<a name="line_2728"></a></li>
<li id="line_2729" class="odd"><span class="lineNumber">&nbsp;2729&nbsp;</span><a name="line_2729"></a></li>
<li id="line_2730" class="even"><span class="lineNumber">&nbsp;2730&nbsp;</span>		rowCellHtml&nbsp;=&nbsp;this.bookendCells(rowCellHtml,&nbsp;rowType,&nbsp;row);&nbsp;//&nbsp;apply&nbsp;intro&nbsp;and&nbsp;outro<a name="line_2730"></a></li>
<li id="line_2731" class="odd"><span class="lineNumber">&nbsp;2731&nbsp;</span><a name="line_2731"></a></li>
<li id="line_2732" class="even"><span class="lineNumber">&nbsp;2732&nbsp;</span>		return&nbsp;'&lt;tr&gt;'&nbsp;+&nbsp;rowCellHtml&nbsp;+&nbsp;'&lt;/tr&gt;';<a name="line_2732"></a></li>
<li id="line_2733" class="odd"><span class="lineNumber">&nbsp;2733&nbsp;</span>	},<a name="line_2733"></a></li>
<li id="line_2734" class="even"><span class="lineNumber">&nbsp;2734&nbsp;</span><a name="line_2734"></a></li>
<li id="line_2735" class="odd"><span class="lineNumber">&nbsp;2735&nbsp;</span><a name="line_2735"></a></li>
<li id="line_2736" class="even"><span class="lineNumber">&nbsp;2736&nbsp;</span>	//&nbsp;Applies&nbsp;the&nbsp;"intro"&nbsp;and&nbsp;"outro"&nbsp;HTML&nbsp;to&nbsp;the&nbsp;given&nbsp;cells.<a name="line_2736"></a></li>
<li id="line_2737" class="odd"><span class="lineNumber">&nbsp;2737&nbsp;</span>	//&nbsp;Intro&nbsp;means&nbsp;the&nbsp;leftmost&nbsp;cell&nbsp;when&nbsp;the&nbsp;calendar&nbsp;is&nbsp;LTR&nbsp;and&nbsp;the&nbsp;rightmost&nbsp;cell&nbsp;when&nbsp;RTL.&nbsp;Vice-versa&nbsp;for&nbsp;outro.<a name="line_2737"></a></li>
<li id="line_2738" class="even"><span class="lineNumber">&nbsp;2738&nbsp;</span>	//&nbsp;`cells`&nbsp;can&nbsp;be&nbsp;an&nbsp;HTML&nbsp;string&nbsp;of&nbsp;&lt;td&gt;'s&nbsp;or&nbsp;a&nbsp;jQuery&nbsp;&lt;tr&gt;&nbsp;element<a name="line_2738"></a></li>
<li id="line_2739" class="odd"><span class="lineNumber">&nbsp;2739&nbsp;</span>	//&nbsp;`row`&nbsp;is&nbsp;an&nbsp;optional&nbsp;row&nbsp;number.<a name="line_2739"></a></li>
<li id="line_2740" class="even"><span class="lineNumber">&nbsp;2740&nbsp;</span>	bookendCells:&nbsp;function(cells,&nbsp;rowType,&nbsp;row)&nbsp;{<a name="line_2740"></a></li>
<li id="line_2741" class="odd"><span class="lineNumber">&nbsp;2741&nbsp;</span>		var&nbsp;intro&nbsp;=&nbsp;this.getHtmlRenderer('intro',&nbsp;rowType)(row&nbsp;||&nbsp;0);<a name="line_2741"></a></li>
<li id="line_2742" class="even"><span class="lineNumber">&nbsp;2742&nbsp;</span>		var&nbsp;outro&nbsp;=&nbsp;this.getHtmlRenderer('outro',&nbsp;rowType)(row&nbsp;||&nbsp;0);<a name="line_2742"></a></li>
<li id="line_2743" class="odd"><span class="lineNumber">&nbsp;2743&nbsp;</span>		var&nbsp;prependHtml&nbsp;=&nbsp;this.isRTL&nbsp;?&nbsp;outro&nbsp;:&nbsp;intro;<a name="line_2743"></a></li>
<li id="line_2744" class="even"><span class="lineNumber">&nbsp;2744&nbsp;</span>		var&nbsp;appendHtml&nbsp;=&nbsp;this.isRTL&nbsp;?&nbsp;intro&nbsp;:&nbsp;outro;<a name="line_2744"></a></li>
<li id="line_2745" class="odd"><span class="lineNumber">&nbsp;2745&nbsp;</span><a name="line_2745"></a></li>
<li id="line_2746" class="even"><span class="lineNumber">&nbsp;2746&nbsp;</span>		if&nbsp;(typeof&nbsp;cells&nbsp;===&nbsp;'string')&nbsp;{<a name="line_2746"></a></li>
<li id="line_2747" class="odd"><span class="lineNumber">&nbsp;2747&nbsp;</span>			return&nbsp;prependHtml&nbsp;+&nbsp;cells&nbsp;+&nbsp;appendHtml;<a name="line_2747"></a></li>
<li id="line_2748" class="even"><span class="lineNumber">&nbsp;2748&nbsp;</span>		}<a name="line_2748"></a></li>
<li id="line_2749" class="odd"><span class="lineNumber">&nbsp;2749&nbsp;</span>		else&nbsp;{&nbsp;//&nbsp;a&nbsp;jQuery&nbsp;&lt;tr&gt;&nbsp;element<a name="line_2749"></a></li>
<li id="line_2750" class="even"><span class="lineNumber">&nbsp;2750&nbsp;</span>			return&nbsp;cells.prepend(prependHtml).append(appendHtml);<a name="line_2750"></a></li>
<li id="line_2751" class="odd"><span class="lineNumber">&nbsp;2751&nbsp;</span>		}<a name="line_2751"></a></li>
<li id="line_2752" class="even"><span class="lineNumber">&nbsp;2752&nbsp;</span>	},<a name="line_2752"></a></li>
<li id="line_2753" class="odd"><span class="lineNumber">&nbsp;2753&nbsp;</span><a name="line_2753"></a></li>
<li id="line_2754" class="even"><span class="lineNumber">&nbsp;2754&nbsp;</span><a name="line_2754"></a></li>
<li id="line_2755" class="odd"><span class="lineNumber">&nbsp;2755&nbsp;</span>	//&nbsp;Returns&nbsp;an&nbsp;HTML-rendering&nbsp;function&nbsp;given&nbsp;a&nbsp;specific&nbsp;`rendererName`&nbsp;(like&nbsp;cell,&nbsp;intro,&nbsp;or&nbsp;outro)&nbsp;and&nbsp;a&nbsp;specific<a name="line_2755"></a></li>
<li id="line_2756" class="even"><span class="lineNumber">&nbsp;2756&nbsp;</span>	//&nbsp;`rowType`&nbsp;(like&nbsp;day,&nbsp;eventSkeleton,&nbsp;helperSkeleton),&nbsp;which&nbsp;is&nbsp;optional.<a name="line_2756"></a></li>
<li id="line_2757" class="odd"><span class="lineNumber">&nbsp;2757&nbsp;</span>	//&nbsp;If&nbsp;a&nbsp;renderer&nbsp;for&nbsp;the&nbsp;specific&nbsp;rowType&nbsp;doesn't&nbsp;exist,&nbsp;it&nbsp;will&nbsp;fall&nbsp;back&nbsp;to&nbsp;a&nbsp;generic&nbsp;renderer.<a name="line_2757"></a></li>
<li id="line_2758" class="even"><span class="lineNumber">&nbsp;2758&nbsp;</span>	//&nbsp;We&nbsp;will&nbsp;query&nbsp;the&nbsp;View&nbsp;object&nbsp;first&nbsp;for&nbsp;any&nbsp;custom&nbsp;rendering&nbsp;functions,&nbsp;then&nbsp;the&nbsp;methods&nbsp;of&nbsp;the&nbsp;subclass.<a name="line_2758"></a></li>
<li id="line_2759" class="odd"><span class="lineNumber">&nbsp;2759&nbsp;</span>	getHtmlRenderer:&nbsp;function(rendererName,&nbsp;rowType)&nbsp;{<a name="line_2759"></a></li>
<li id="line_2760" class="even"><span class="lineNumber">&nbsp;2760&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_2760"></a></li>
<li id="line_2761" class="odd"><span class="lineNumber">&nbsp;2761&nbsp;</span>		var&nbsp;generalName;&nbsp;//&nbsp;like&nbsp;"cellHtml"<a name="line_2761"></a></li>
<li id="line_2762" class="even"><span class="lineNumber">&nbsp;2762&nbsp;</span>		var&nbsp;specificName;&nbsp;//&nbsp;like&nbsp;"dayCellHtml".&nbsp;based&nbsp;on&nbsp;rowType<a name="line_2762"></a></li>
<li id="line_2763" class="odd"><span class="lineNumber">&nbsp;2763&nbsp;</span>		var&nbsp;provider;&nbsp;//&nbsp;either&nbsp;the&nbsp;View&nbsp;or&nbsp;the&nbsp;RowRenderer&nbsp;subclass,&nbsp;whichever&nbsp;provided&nbsp;the&nbsp;method<a name="line_2763"></a></li>
<li id="line_2764" class="even"><span class="lineNumber">&nbsp;2764&nbsp;</span>		var&nbsp;renderer;<a name="line_2764"></a></li>
<li id="line_2765" class="odd"><span class="lineNumber">&nbsp;2765&nbsp;</span><a name="line_2765"></a></li>
<li id="line_2766" class="even"><span class="lineNumber">&nbsp;2766&nbsp;</span>		generalName&nbsp;=&nbsp;rendererName&nbsp;+&nbsp;'Html';<a name="line_2766"></a></li>
<li id="line_2767" class="odd"><span class="lineNumber">&nbsp;2767&nbsp;</span>		if&nbsp;(rowType)&nbsp;{<a name="line_2767"></a></li>
<li id="line_2768" class="even"><span class="lineNumber">&nbsp;2768&nbsp;</span>			specificName&nbsp;=&nbsp;rowType&nbsp;+&nbsp;capitaliseFirstLetter(rendererName)&nbsp;+&nbsp;'Html';<a name="line_2768"></a></li>
<li id="line_2769" class="odd"><span class="lineNumber">&nbsp;2769&nbsp;</span>		}<a name="line_2769"></a></li>
<li id="line_2770" class="even"><span class="lineNumber">&nbsp;2770&nbsp;</span><a name="line_2770"></a></li>
<li id="line_2771" class="odd"><span class="lineNumber">&nbsp;2771&nbsp;</span>		if&nbsp;(specificName&nbsp;&amp;&amp;&nbsp;(renderer&nbsp;=&nbsp;view[specificName]))&nbsp;{<a name="line_2771"></a></li>
<li id="line_2772" class="even"><span class="lineNumber">&nbsp;2772&nbsp;</span>			provider&nbsp;=&nbsp;view;<a name="line_2772"></a></li>
<li id="line_2773" class="odd"><span class="lineNumber">&nbsp;2773&nbsp;</span>		}<a name="line_2773"></a></li>
<li id="line_2774" class="even"><span class="lineNumber">&nbsp;2774&nbsp;</span>		else&nbsp;if&nbsp;(specificName&nbsp;&amp;&amp;&nbsp;(renderer&nbsp;=&nbsp;this[specificName]))&nbsp;{<a name="line_2774"></a></li>
<li id="line_2775" class="odd"><span class="lineNumber">&nbsp;2775&nbsp;</span>			provider&nbsp;=&nbsp;this;<a name="line_2775"></a></li>
<li id="line_2776" class="even"><span class="lineNumber">&nbsp;2776&nbsp;</span>		}<a name="line_2776"></a></li>
<li id="line_2777" class="odd"><span class="lineNumber">&nbsp;2777&nbsp;</span>		else&nbsp;if&nbsp;((renderer&nbsp;=&nbsp;view[generalName]))&nbsp;{<a name="line_2777"></a></li>
<li id="line_2778" class="even"><span class="lineNumber">&nbsp;2778&nbsp;</span>			provider&nbsp;=&nbsp;view;<a name="line_2778"></a></li>
<li id="line_2779" class="odd"><span class="lineNumber">&nbsp;2779&nbsp;</span>		}<a name="line_2779"></a></li>
<li id="line_2780" class="even"><span class="lineNumber">&nbsp;2780&nbsp;</span>		else&nbsp;if&nbsp;((renderer&nbsp;=&nbsp;this[generalName]))&nbsp;{<a name="line_2780"></a></li>
<li id="line_2781" class="odd"><span class="lineNumber">&nbsp;2781&nbsp;</span>			provider&nbsp;=&nbsp;this;<a name="line_2781"></a></li>
<li id="line_2782" class="even"><span class="lineNumber">&nbsp;2782&nbsp;</span>		}<a name="line_2782"></a></li>
<li id="line_2783" class="odd"><span class="lineNumber">&nbsp;2783&nbsp;</span><a name="line_2783"></a></li>
<li id="line_2784" class="even"><span class="lineNumber">&nbsp;2784&nbsp;</span>		if&nbsp;(typeof&nbsp;renderer&nbsp;===&nbsp;'function')&nbsp;{<a name="line_2784"></a></li>
<li id="line_2785" class="odd"><span class="lineNumber">&nbsp;2785&nbsp;</span>			return&nbsp;function()&nbsp;{<a name="line_2785"></a></li>
<li id="line_2786" class="even"><span class="lineNumber">&nbsp;2786&nbsp;</span>				return&nbsp;renderer.apply(provider,&nbsp;arguments)&nbsp;||&nbsp;'';&nbsp;//&nbsp;use&nbsp;correct&nbsp;`this`&nbsp;and&nbsp;always&nbsp;return&nbsp;a&nbsp;string<a name="line_2786"></a></li>
<li id="line_2787" class="odd"><span class="lineNumber">&nbsp;2787&nbsp;</span>			};<a name="line_2787"></a></li>
<li id="line_2788" class="even"><span class="lineNumber">&nbsp;2788&nbsp;</span>		}<a name="line_2788"></a></li>
<li id="line_2789" class="odd"><span class="lineNumber">&nbsp;2789&nbsp;</span><a name="line_2789"></a></li>
<li id="line_2790" class="even"><span class="lineNumber">&nbsp;2790&nbsp;</span>		//&nbsp;the&nbsp;rendered&nbsp;can&nbsp;be&nbsp;a&nbsp;plain&nbsp;string&nbsp;as&nbsp;well.&nbsp;if&nbsp;not&nbsp;specified,&nbsp;always&nbsp;an&nbsp;empty&nbsp;string.<a name="line_2790"></a></li>
<li id="line_2791" class="odd"><span class="lineNumber">&nbsp;2791&nbsp;</span>		return&nbsp;function()&nbsp;{<a name="line_2791"></a></li>
<li id="line_2792" class="even"><span class="lineNumber">&nbsp;2792&nbsp;</span>			return&nbsp;renderer&nbsp;||&nbsp;'';<a name="line_2792"></a></li>
<li id="line_2793" class="odd"><span class="lineNumber">&nbsp;2793&nbsp;</span>		};<a name="line_2793"></a></li>
<li id="line_2794" class="even"><span class="lineNumber">&nbsp;2794&nbsp;</span>	}<a name="line_2794"></a></li>
<li id="line_2795" class="odd"><span class="lineNumber">&nbsp;2795&nbsp;</span><a name="line_2795"></a></li>
<li id="line_2796" class="even"><span class="lineNumber">&nbsp;2796&nbsp;</span>});<a name="line_2796"></a></li>
<li id="line_2797" class="odd"><span class="lineNumber">&nbsp;2797&nbsp;</span><a name="line_2797"></a></li>
<li id="line_2798" class="even"><span class="lineNumber">&nbsp;2798&nbsp;</span>;;<a name="line_2798"></a></li>
<li id="line_2799" class="odd"><span class="lineNumber">&nbsp;2799&nbsp;</span><a name="line_2799"></a></li>
<li id="line_2800" class="even"><span class="lineNumber">&nbsp;2800&nbsp;</span>/*&nbsp;An&nbsp;abstract&nbsp;class&nbsp;comprised&nbsp;of&nbsp;a&nbsp;"grid"&nbsp;of&nbsp;cells&nbsp;that&nbsp;each&nbsp;represent&nbsp;a&nbsp;specific&nbsp;datetime<a name="line_2800"></a></li>
<li id="line_2801" class="odd"><span class="lineNumber">&nbsp;2801&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_2801"></a></li>
<li id="line_2802" class="even"><span class="lineNumber">&nbsp;2802&nbsp;</span><a name="line_2802"></a></li>
<li id="line_2803" class="odd"><span class="lineNumber">&nbsp;2803&nbsp;</span>var&nbsp;Grid&nbsp;=&nbsp;fc.Grid&nbsp;=&nbsp;RowRenderer.extend({<a name="line_2803"></a></li>
<li id="line_2804" class="even"><span class="lineNumber">&nbsp;2804&nbsp;</span><a name="line_2804"></a></li>
<li id="line_2805" class="odd"><span class="lineNumber">&nbsp;2805&nbsp;</span>	start:&nbsp;null,&nbsp;//&nbsp;the&nbsp;date&nbsp;of&nbsp;the&nbsp;first&nbsp;cell<a name="line_2805"></a></li>
<li id="line_2806" class="even"><span class="lineNumber">&nbsp;2806&nbsp;</span>	end:&nbsp;null,&nbsp;//&nbsp;the&nbsp;date&nbsp;after&nbsp;the&nbsp;last&nbsp;cell<a name="line_2806"></a></li>
<li id="line_2807" class="odd"><span class="lineNumber">&nbsp;2807&nbsp;</span><a name="line_2807"></a></li>
<li id="line_2808" class="even"><span class="lineNumber">&nbsp;2808&nbsp;</span>	rowCnt:&nbsp;0,&nbsp;//&nbsp;number&nbsp;of&nbsp;rows<a name="line_2808"></a></li>
<li id="line_2809" class="odd"><span class="lineNumber">&nbsp;2809&nbsp;</span>	colCnt:&nbsp;0,&nbsp;//&nbsp;number&nbsp;of&nbsp;cols<a name="line_2809"></a></li>
<li id="line_2810" class="even"><span class="lineNumber">&nbsp;2810&nbsp;</span><a name="line_2810"></a></li>
<li id="line_2811" class="odd"><span class="lineNumber">&nbsp;2811&nbsp;</span>	el:&nbsp;null,&nbsp;//&nbsp;the&nbsp;containing&nbsp;element<a name="line_2811"></a></li>
<li id="line_2812" class="even"><span class="lineNumber">&nbsp;2812&nbsp;</span>	coordMap:&nbsp;null,&nbsp;//&nbsp;a&nbsp;GridCoordMap&nbsp;that&nbsp;converts&nbsp;pixel&nbsp;values&nbsp;to&nbsp;datetimes<a name="line_2812"></a></li>
<li id="line_2813" class="odd"><span class="lineNumber">&nbsp;2813&nbsp;</span>	elsByFill:&nbsp;null,&nbsp;//&nbsp;a&nbsp;hash&nbsp;of&nbsp;jQuery&nbsp;element&nbsp;sets&nbsp;used&nbsp;for&nbsp;rendering&nbsp;each&nbsp;fill.&nbsp;Keyed&nbsp;by&nbsp;fill&nbsp;name.<a name="line_2813"></a></li>
<li id="line_2814" class="even"><span class="lineNumber">&nbsp;2814&nbsp;</span><a name="line_2814"></a></li>
<li id="line_2815" class="odd"><span class="lineNumber">&nbsp;2815&nbsp;</span>	externalDragStartProxy:&nbsp;null,&nbsp;//&nbsp;binds&nbsp;the&nbsp;Grid's&nbsp;scope&nbsp;to&nbsp;externalDragStart&nbsp;(in&nbsp;DayGrid.events)<a name="line_2815"></a></li>
<li id="line_2816" class="even"><span class="lineNumber">&nbsp;2816&nbsp;</span><a name="line_2816"></a></li>
<li id="line_2817" class="odd"><span class="lineNumber">&nbsp;2817&nbsp;</span>	//&nbsp;derived&nbsp;from&nbsp;options<a name="line_2817"></a></li>
<li id="line_2818" class="even"><span class="lineNumber">&nbsp;2818&nbsp;</span>	colHeadFormat:&nbsp;null,&nbsp;//&nbsp;TODO:&nbsp;move&nbsp;to&nbsp;another&nbsp;class.&nbsp;not&nbsp;applicable&nbsp;to&nbsp;all&nbsp;Grids<a name="line_2818"></a></li>
<li id="line_2819" class="odd"><span class="lineNumber">&nbsp;2819&nbsp;</span>	eventTimeFormat:&nbsp;null,<a name="line_2819"></a></li>
<li id="line_2820" class="even"><span class="lineNumber">&nbsp;2820&nbsp;</span>	displayEventTime:&nbsp;null,<a name="line_2820"></a></li>
<li id="line_2821" class="odd"><span class="lineNumber">&nbsp;2821&nbsp;</span>	displayEventEnd:&nbsp;null,<a name="line_2821"></a></li>
<li id="line_2822" class="even"><span class="lineNumber">&nbsp;2822&nbsp;</span><a name="line_2822"></a></li>
<li id="line_2823" class="odd"><span class="lineNumber">&nbsp;2823&nbsp;</span>	//&nbsp;if&nbsp;all&nbsp;cells&nbsp;are&nbsp;the&nbsp;same&nbsp;length&nbsp;of&nbsp;time,&nbsp;the&nbsp;duration&nbsp;they&nbsp;all&nbsp;share.&nbsp;optional.<a name="line_2823"></a></li>
<li id="line_2824" class="even"><span class="lineNumber">&nbsp;2824&nbsp;</span>	//&nbsp;when&nbsp;defined,&nbsp;allows&nbsp;the&nbsp;computeCellRange&nbsp;shortcut,&nbsp;as&nbsp;well&nbsp;as&nbsp;improved&nbsp;resizing&nbsp;behavior.<a name="line_2824"></a></li>
<li id="line_2825" class="odd"><span class="lineNumber">&nbsp;2825&nbsp;</span>	cellDuration:&nbsp;null,<a name="line_2825"></a></li>
<li id="line_2826" class="even"><span class="lineNumber">&nbsp;2826&nbsp;</span><a name="line_2826"></a></li>
<li id="line_2827" class="odd"><span class="lineNumber">&nbsp;2827&nbsp;</span>	//&nbsp;if&nbsp;defined,&nbsp;holds&nbsp;the&nbsp;unit&nbsp;identified&nbsp;(ex:&nbsp;"year"&nbsp;or&nbsp;"month")&nbsp;that&nbsp;determines&nbsp;the&nbsp;level&nbsp;of&nbsp;granularity<a name="line_2827"></a></li>
<li id="line_2828" class="even"><span class="lineNumber">&nbsp;2828&nbsp;</span>	//&nbsp;of&nbsp;the&nbsp;date&nbsp;cells.&nbsp;if&nbsp;not&nbsp;defined,&nbsp;assumes&nbsp;to&nbsp;be&nbsp;day&nbsp;and&nbsp;time&nbsp;granularity.<a name="line_2828"></a></li>
<li id="line_2829" class="odd"><span class="lineNumber">&nbsp;2829&nbsp;</span>	largeUnit:&nbsp;null,<a name="line_2829"></a></li>
<li id="line_2830" class="even"><span class="lineNumber">&nbsp;2830&nbsp;</span><a name="line_2830"></a></li>
<li id="line_2831" class="odd"><span class="lineNumber">&nbsp;2831&nbsp;</span><a name="line_2831"></a></li>
<li id="line_2832" class="even"><span class="lineNumber">&nbsp;2832&nbsp;</span>	constructor:&nbsp;function()&nbsp;{<a name="line_2832"></a></li>
<li id="line_2833" class="odd"><span class="lineNumber">&nbsp;2833&nbsp;</span>		RowRenderer.apply(this,&nbsp;arguments);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-constructor<a name="line_2833"></a></li>
<li id="line_2834" class="even"><span class="lineNumber">&nbsp;2834&nbsp;</span><a name="line_2834"></a></li>
<li id="line_2835" class="odd"><span class="lineNumber">&nbsp;2835&nbsp;</span>		this.coordMap&nbsp;=&nbsp;new&nbsp;GridCoordMap(this);<a name="line_2835"></a></li>
<li id="line_2836" class="even"><span class="lineNumber">&nbsp;2836&nbsp;</span>		this.elsByFill&nbsp;=&nbsp;{};<a name="line_2836"></a></li>
<li id="line_2837" class="odd"><span class="lineNumber">&nbsp;2837&nbsp;</span>		this.externalDragStartProxy&nbsp;=&nbsp;proxy(this,&nbsp;'externalDragStart');<a name="line_2837"></a></li>
<li id="line_2838" class="even"><span class="lineNumber">&nbsp;2838&nbsp;</span>	},<a name="line_2838"></a></li>
<li id="line_2839" class="odd"><span class="lineNumber">&nbsp;2839&nbsp;</span><a name="line_2839"></a></li>
<li id="line_2840" class="even"><span class="lineNumber">&nbsp;2840&nbsp;</span><a name="line_2840"></a></li>
<li id="line_2841" class="odd"><span class="lineNumber">&nbsp;2841&nbsp;</span>	/*&nbsp;Options<a name="line_2841"></a></li>
<li id="line_2842" class="even"><span class="lineNumber">&nbsp;2842&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_2842"></a></li>
<li id="line_2843" class="odd"><span class="lineNumber">&nbsp;2843&nbsp;</span><a name="line_2843"></a></li>
<li id="line_2844" class="even"><span class="lineNumber">&nbsp;2844&nbsp;</span><a name="line_2844"></a></li>
<li id="line_2845" class="odd"><span class="lineNumber">&nbsp;2845&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;format&nbsp;string&nbsp;used&nbsp;for&nbsp;the&nbsp;text&nbsp;in&nbsp;column&nbsp;headers,&nbsp;if&nbsp;not&nbsp;explicitly&nbsp;defined&nbsp;by&nbsp;'columnFormat'<a name="line_2845"></a></li>
<li id="line_2846" class="even"><span class="lineNumber">&nbsp;2846&nbsp;</span>	//&nbsp;TODO:&nbsp;move&nbsp;to&nbsp;another&nbsp;class.&nbsp;not&nbsp;applicable&nbsp;to&nbsp;all&nbsp;Grids<a name="line_2846"></a></li>
<li id="line_2847" class="odd"><span class="lineNumber">&nbsp;2847&nbsp;</span>	computeColHeadFormat:&nbsp;function()&nbsp;{<a name="line_2847"></a></li>
<li id="line_2848" class="even"><span class="lineNumber">&nbsp;2848&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement&nbsp;if&nbsp;they&nbsp;want&nbsp;to&nbsp;use&nbsp;headHtml()<a name="line_2848"></a></li>
<li id="line_2849" class="odd"><span class="lineNumber">&nbsp;2849&nbsp;</span>	},<a name="line_2849"></a></li>
<li id="line_2850" class="even"><span class="lineNumber">&nbsp;2850&nbsp;</span><a name="line_2850"></a></li>
<li id="line_2851" class="odd"><span class="lineNumber">&nbsp;2851&nbsp;</span><a name="line_2851"></a></li>
<li id="line_2852" class="even"><span class="lineNumber">&nbsp;2852&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;format&nbsp;string&nbsp;used&nbsp;for&nbsp;event&nbsp;time&nbsp;text,&nbsp;if&nbsp;not&nbsp;explicitly&nbsp;defined&nbsp;by&nbsp;'timeFormat'<a name="line_2852"></a></li>
<li id="line_2853" class="odd"><span class="lineNumber">&nbsp;2853&nbsp;</span>	computeEventTimeFormat:&nbsp;function()&nbsp;{<a name="line_2853"></a></li>
<li id="line_2854" class="even"><span class="lineNumber">&nbsp;2854&nbsp;</span>		return&nbsp;this.view.opt('smallTimeFormat');<a name="line_2854"></a></li>
<li id="line_2855" class="odd"><span class="lineNumber">&nbsp;2855&nbsp;</span>	},<a name="line_2855"></a></li>
<li id="line_2856" class="even"><span class="lineNumber">&nbsp;2856&nbsp;</span><a name="line_2856"></a></li>
<li id="line_2857" class="odd"><span class="lineNumber">&nbsp;2857&nbsp;</span><a name="line_2857"></a></li>
<li id="line_2858" class="even"><span class="lineNumber">&nbsp;2858&nbsp;</span>	//&nbsp;Determines&nbsp;whether&nbsp;events&nbsp;should&nbsp;have&nbsp;their&nbsp;end&nbsp;times&nbsp;displayed,&nbsp;if&nbsp;not&nbsp;explicitly&nbsp;defined&nbsp;by&nbsp;'displayEventTime'.<a name="line_2858"></a></li>
<li id="line_2859" class="odd"><span class="lineNumber">&nbsp;2859&nbsp;</span>	//&nbsp;Only&nbsp;applies&nbsp;to&nbsp;non-all-day&nbsp;events.<a name="line_2859"></a></li>
<li id="line_2860" class="even"><span class="lineNumber">&nbsp;2860&nbsp;</span>	computeDisplayEventTime:&nbsp;function()&nbsp;{<a name="line_2860"></a></li>
<li id="line_2861" class="odd"><span class="lineNumber">&nbsp;2861&nbsp;</span>		return&nbsp;true;<a name="line_2861"></a></li>
<li id="line_2862" class="even"><span class="lineNumber">&nbsp;2862&nbsp;</span>	},<a name="line_2862"></a></li>
<li id="line_2863" class="odd"><span class="lineNumber">&nbsp;2863&nbsp;</span><a name="line_2863"></a></li>
<li id="line_2864" class="even"><span class="lineNumber">&nbsp;2864&nbsp;</span><a name="line_2864"></a></li>
<li id="line_2865" class="odd"><span class="lineNumber">&nbsp;2865&nbsp;</span>	//&nbsp;Determines&nbsp;whether&nbsp;events&nbsp;should&nbsp;have&nbsp;their&nbsp;end&nbsp;times&nbsp;displayed,&nbsp;if&nbsp;not&nbsp;explicitly&nbsp;defined&nbsp;by&nbsp;'displayEventEnd'<a name="line_2865"></a></li>
<li id="line_2866" class="even"><span class="lineNumber">&nbsp;2866&nbsp;</span>	computeDisplayEventEnd:&nbsp;function()&nbsp;{<a name="line_2866"></a></li>
<li id="line_2867" class="odd"><span class="lineNumber">&nbsp;2867&nbsp;</span>		return&nbsp;true;<a name="line_2867"></a></li>
<li id="line_2868" class="even"><span class="lineNumber">&nbsp;2868&nbsp;</span>	},<a name="line_2868"></a></li>
<li id="line_2869" class="odd"><span class="lineNumber">&nbsp;2869&nbsp;</span><a name="line_2869"></a></li>
<li id="line_2870" class="even"><span class="lineNumber">&nbsp;2870&nbsp;</span><a name="line_2870"></a></li>
<li id="line_2871" class="odd"><span class="lineNumber">&nbsp;2871&nbsp;</span>	/*&nbsp;Dates<a name="line_2871"></a></li>
<li id="line_2872" class="even"><span class="lineNumber">&nbsp;2872&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_2872"></a></li>
<li id="line_2873" class="odd"><span class="lineNumber">&nbsp;2873&nbsp;</span><a name="line_2873"></a></li>
<li id="line_2874" class="even"><span class="lineNumber">&nbsp;2874&nbsp;</span><a name="line_2874"></a></li>
<li id="line_2875" class="odd"><span class="lineNumber">&nbsp;2875&nbsp;</span>	//&nbsp;Tells&nbsp;the&nbsp;grid&nbsp;about&nbsp;what&nbsp;period&nbsp;of&nbsp;time&nbsp;to&nbsp;display.<a name="line_2875"></a></li>
<li id="line_2876" class="even"><span class="lineNumber">&nbsp;2876&nbsp;</span>	//&nbsp;Any&nbsp;date-related&nbsp;cell&nbsp;system&nbsp;internal&nbsp;data&nbsp;should&nbsp;be&nbsp;generated.<a name="line_2876"></a></li>
<li id="line_2877" class="odd"><span class="lineNumber">&nbsp;2877&nbsp;</span>	setRange:&nbsp;function(range)&nbsp;{<a name="line_2877"></a></li>
<li id="line_2878" class="even"><span class="lineNumber">&nbsp;2878&nbsp;</span>		this.start&nbsp;=&nbsp;range.start.clone();<a name="line_2878"></a></li>
<li id="line_2879" class="odd"><span class="lineNumber">&nbsp;2879&nbsp;</span>		this.end&nbsp;=&nbsp;range.end.clone();<a name="line_2879"></a></li>
<li id="line_2880" class="even"><span class="lineNumber">&nbsp;2880&nbsp;</span><a name="line_2880"></a></li>
<li id="line_2881" class="odd"><span class="lineNumber">&nbsp;2881&nbsp;</span>		this.rangeUpdated();<a name="line_2881"></a></li>
<li id="line_2882" class="even"><span class="lineNumber">&nbsp;2882&nbsp;</span>		this.processRangeOptions();<a name="line_2882"></a></li>
<li id="line_2883" class="odd"><span class="lineNumber">&nbsp;2883&nbsp;</span>	},<a name="line_2883"></a></li>
<li id="line_2884" class="even"><span class="lineNumber">&nbsp;2884&nbsp;</span><a name="line_2884"></a></li>
<li id="line_2885" class="odd"><span class="lineNumber">&nbsp;2885&nbsp;</span><a name="line_2885"></a></li>
<li id="line_2886" class="even"><span class="lineNumber">&nbsp;2886&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;internal&nbsp;variables&nbsp;that&nbsp;rely&nbsp;on&nbsp;the&nbsp;range&nbsp;should&nbsp;be&nbsp;updated<a name="line_2886"></a></li>
<li id="line_2887" class="odd"><span class="lineNumber">&nbsp;2887&nbsp;</span>	rangeUpdated:&nbsp;function()&nbsp;{<a name="line_2887"></a></li>
<li id="line_2888" class="even"><span class="lineNumber">&nbsp;2888&nbsp;</span>	},<a name="line_2888"></a></li>
<li id="line_2889" class="odd"><span class="lineNumber">&nbsp;2889&nbsp;</span><a name="line_2889"></a></li>
<li id="line_2890" class="even"><span class="lineNumber">&nbsp;2890&nbsp;</span><a name="line_2890"></a></li>
<li id="line_2891" class="odd"><span class="lineNumber">&nbsp;2891&nbsp;</span>	//&nbsp;Updates&nbsp;values&nbsp;that&nbsp;rely&nbsp;on&nbsp;options&nbsp;and&nbsp;also&nbsp;relate&nbsp;to&nbsp;range<a name="line_2891"></a></li>
<li id="line_2892" class="even"><span class="lineNumber">&nbsp;2892&nbsp;</span>	processRangeOptions:&nbsp;function()&nbsp;{<a name="line_2892"></a></li>
<li id="line_2893" class="odd"><span class="lineNumber">&nbsp;2893&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_2893"></a></li>
<li id="line_2894" class="even"><span class="lineNumber">&nbsp;2894&nbsp;</span>		var&nbsp;displayEventTime;<a name="line_2894"></a></li>
<li id="line_2895" class="odd"><span class="lineNumber">&nbsp;2895&nbsp;</span>		var&nbsp;displayEventEnd;<a name="line_2895"></a></li>
<li id="line_2896" class="even"><span class="lineNumber">&nbsp;2896&nbsp;</span><a name="line_2896"></a></li>
<li id="line_2897" class="odd"><span class="lineNumber">&nbsp;2897&nbsp;</span>		//&nbsp;Populate&nbsp;option-derived&nbsp;settings.&nbsp;Look&nbsp;for&nbsp;override&nbsp;first,&nbsp;then&nbsp;compute&nbsp;if&nbsp;necessary.<a name="line_2897"></a></li>
<li id="line_2898" class="even"><span class="lineNumber">&nbsp;2898&nbsp;</span>		this.colHeadFormat&nbsp;=&nbsp;view.opt('columnFormat')&nbsp;||&nbsp;this.computeColHeadFormat();<a name="line_2898"></a></li>
<li id="line_2899" class="odd"><span class="lineNumber">&nbsp;2899&nbsp;</span><a name="line_2899"></a></li>
<li id="line_2900" class="even"><span class="lineNumber">&nbsp;2900&nbsp;</span>		this.eventTimeFormat&nbsp;=<a name="line_2900"></a></li>
<li id="line_2901" class="odd"><span class="lineNumber">&nbsp;2901&nbsp;</span>			view.opt('eventTimeFormat')&nbsp;||<a name="line_2901"></a></li>
<li id="line_2902" class="even"><span class="lineNumber">&nbsp;2902&nbsp;</span>			view.opt('timeFormat')&nbsp;||&nbsp;//&nbsp;deprecated<a name="line_2902"></a></li>
<li id="line_2903" class="odd"><span class="lineNumber">&nbsp;2903&nbsp;</span>			this.computeEventTimeFormat();<a name="line_2903"></a></li>
<li id="line_2904" class="even"><span class="lineNumber">&nbsp;2904&nbsp;</span><a name="line_2904"></a></li>
<li id="line_2905" class="odd"><span class="lineNumber">&nbsp;2905&nbsp;</span>		displayEventTime&nbsp;=&nbsp;view.opt('displayEventTime');<a name="line_2905"></a></li>
<li id="line_2906" class="even"><span class="lineNumber">&nbsp;2906&nbsp;</span>		if&nbsp;(displayEventTime&nbsp;==&nbsp;null)&nbsp;{<a name="line_2906"></a></li>
<li id="line_2907" class="odd"><span class="lineNumber">&nbsp;2907&nbsp;</span>			displayEventTime&nbsp;=&nbsp;this.computeDisplayEventTime();&nbsp;//&nbsp;might&nbsp;be&nbsp;based&nbsp;off&nbsp;of&nbsp;range<a name="line_2907"></a></li>
<li id="line_2908" class="even"><span class="lineNumber">&nbsp;2908&nbsp;</span>		}<a name="line_2908"></a></li>
<li id="line_2909" class="odd"><span class="lineNumber">&nbsp;2909&nbsp;</span><a name="line_2909"></a></li>
<li id="line_2910" class="even"><span class="lineNumber">&nbsp;2910&nbsp;</span>		displayEventEnd&nbsp;=&nbsp;view.opt('displayEventEnd');<a name="line_2910"></a></li>
<li id="line_2911" class="odd"><span class="lineNumber">&nbsp;2911&nbsp;</span>		if&nbsp;(displayEventEnd&nbsp;==&nbsp;null)&nbsp;{<a name="line_2911"></a></li>
<li id="line_2912" class="even"><span class="lineNumber">&nbsp;2912&nbsp;</span>			displayEventEnd&nbsp;=&nbsp;this.computeDisplayEventEnd();&nbsp;//&nbsp;might&nbsp;be&nbsp;based&nbsp;off&nbsp;of&nbsp;range<a name="line_2912"></a></li>
<li id="line_2913" class="odd"><span class="lineNumber">&nbsp;2913&nbsp;</span>		}<a name="line_2913"></a></li>
<li id="line_2914" class="even"><span class="lineNumber">&nbsp;2914&nbsp;</span><a name="line_2914"></a></li>
<li id="line_2915" class="odd"><span class="lineNumber">&nbsp;2915&nbsp;</span>		this.displayEventTime&nbsp;=&nbsp;displayEventTime;<a name="line_2915"></a></li>
<li id="line_2916" class="even"><span class="lineNumber">&nbsp;2916&nbsp;</span>		this.displayEventEnd&nbsp;=&nbsp;displayEventEnd;<a name="line_2916"></a></li>
<li id="line_2917" class="odd"><span class="lineNumber">&nbsp;2917&nbsp;</span>	},<a name="line_2917"></a></li>
<li id="line_2918" class="even"><span class="lineNumber">&nbsp;2918&nbsp;</span><a name="line_2918"></a></li>
<li id="line_2919" class="odd"><span class="lineNumber">&nbsp;2919&nbsp;</span><a name="line_2919"></a></li>
<li id="line_2920" class="even"><span class="lineNumber">&nbsp;2920&nbsp;</span>	//&nbsp;Called&nbsp;before&nbsp;the&nbsp;grid's&nbsp;coordinates&nbsp;will&nbsp;need&nbsp;to&nbsp;be&nbsp;queried&nbsp;for&nbsp;cells.<a name="line_2920"></a></li>
<li id="line_2921" class="odd"><span class="lineNumber">&nbsp;2921&nbsp;</span>	//&nbsp;Any&nbsp;non-date-related&nbsp;cell&nbsp;system&nbsp;internal&nbsp;data&nbsp;should&nbsp;be&nbsp;built.<a name="line_2921"></a></li>
<li id="line_2922" class="even"><span class="lineNumber">&nbsp;2922&nbsp;</span>	build:&nbsp;function()&nbsp;{<a name="line_2922"></a></li>
<li id="line_2923" class="odd"><span class="lineNumber">&nbsp;2923&nbsp;</span>	},<a name="line_2923"></a></li>
<li id="line_2924" class="even"><span class="lineNumber">&nbsp;2924&nbsp;</span><a name="line_2924"></a></li>
<li id="line_2925" class="odd"><span class="lineNumber">&nbsp;2925&nbsp;</span><a name="line_2925"></a></li>
<li id="line_2926" class="even"><span class="lineNumber">&nbsp;2926&nbsp;</span>	//&nbsp;Called&nbsp;after&nbsp;the&nbsp;grid's&nbsp;coordinates&nbsp;are&nbsp;done&nbsp;being&nbsp;relied&nbsp;upon.<a name="line_2926"></a></li>
<li id="line_2927" class="odd"><span class="lineNumber">&nbsp;2927&nbsp;</span>	//&nbsp;Any&nbsp;non-date-related&nbsp;cell&nbsp;system&nbsp;internal&nbsp;data&nbsp;should&nbsp;be&nbsp;cleared.<a name="line_2927"></a></li>
<li id="line_2928" class="even"><span class="lineNumber">&nbsp;2928&nbsp;</span>	clear:&nbsp;function()&nbsp;{<a name="line_2928"></a></li>
<li id="line_2929" class="odd"><span class="lineNumber">&nbsp;2929&nbsp;</span>	},<a name="line_2929"></a></li>
<li id="line_2930" class="even"><span class="lineNumber">&nbsp;2930&nbsp;</span><a name="line_2930"></a></li>
<li id="line_2931" class="odd"><span class="lineNumber">&nbsp;2931&nbsp;</span><a name="line_2931"></a></li>
<li id="line_2932" class="even"><span class="lineNumber">&nbsp;2932&nbsp;</span>	//&nbsp;Converts&nbsp;a&nbsp;range&nbsp;with&nbsp;an&nbsp;inclusive&nbsp;`start`&nbsp;and&nbsp;an&nbsp;exclusive&nbsp;`end`&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;segment&nbsp;objects<a name="line_2932"></a></li>
<li id="line_2933" class="odd"><span class="lineNumber">&nbsp;2933&nbsp;</span>	rangeToSegs:&nbsp;function(range)&nbsp;{<a name="line_2933"></a></li>
<li id="line_2934" class="even"><span class="lineNumber">&nbsp;2934&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_2934"></a></li>
<li id="line_2935" class="odd"><span class="lineNumber">&nbsp;2935&nbsp;</span>	},<a name="line_2935"></a></li>
<li id="line_2936" class="even"><span class="lineNumber">&nbsp;2936&nbsp;</span><a name="line_2936"></a></li>
<li id="line_2937" class="odd"><span class="lineNumber">&nbsp;2937&nbsp;</span><a name="line_2937"></a></li>
<li id="line_2938" class="even"><span class="lineNumber">&nbsp;2938&nbsp;</span>	//&nbsp;Diffs&nbsp;the&nbsp;two&nbsp;dates,&nbsp;returning&nbsp;a&nbsp;duration,&nbsp;based&nbsp;on&nbsp;granularity&nbsp;of&nbsp;the&nbsp;grid<a name="line_2938"></a></li>
<li id="line_2939" class="odd"><span class="lineNumber">&nbsp;2939&nbsp;</span>	diffDates:&nbsp;function(a,&nbsp;b)&nbsp;{<a name="line_2939"></a></li>
<li id="line_2940" class="even"><span class="lineNumber">&nbsp;2940&nbsp;</span>		if&nbsp;(this.largeUnit)&nbsp;{<a name="line_2940"></a></li>
<li id="line_2941" class="odd"><span class="lineNumber">&nbsp;2941&nbsp;</span>			return&nbsp;diffByUnit(a,&nbsp;b,&nbsp;this.largeUnit);<a name="line_2941"></a></li>
<li id="line_2942" class="even"><span class="lineNumber">&nbsp;2942&nbsp;</span>		}<a name="line_2942"></a></li>
<li id="line_2943" class="odd"><span class="lineNumber">&nbsp;2943&nbsp;</span>		else&nbsp;{<a name="line_2943"></a></li>
<li id="line_2944" class="even"><span class="lineNumber">&nbsp;2944&nbsp;</span>			return&nbsp;diffDayTime(a,&nbsp;b);<a name="line_2944"></a></li>
<li id="line_2945" class="odd"><span class="lineNumber">&nbsp;2945&nbsp;</span>		}<a name="line_2945"></a></li>
<li id="line_2946" class="even"><span class="lineNumber">&nbsp;2946&nbsp;</span>	},<a name="line_2946"></a></li>
<li id="line_2947" class="odd"><span class="lineNumber">&nbsp;2947&nbsp;</span><a name="line_2947"></a></li>
<li id="line_2948" class="even"><span class="lineNumber">&nbsp;2948&nbsp;</span><a name="line_2948"></a></li>
<li id="line_2949" class="odd"><span class="lineNumber">&nbsp;2949&nbsp;</span>	/*&nbsp;Cells<a name="line_2949"></a></li>
<li id="line_2950" class="even"><span class="lineNumber">&nbsp;2950&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_2950"></a></li>
<li id="line_2951" class="odd"><span class="lineNumber">&nbsp;2951&nbsp;</span>	//&nbsp;NOTE:&nbsp;columns&nbsp;are&nbsp;ordered&nbsp;left-to-right<a name="line_2951"></a></li>
<li id="line_2952" class="even"><span class="lineNumber">&nbsp;2952&nbsp;</span><a name="line_2952"></a></li>
<li id="line_2953" class="odd"><span class="lineNumber">&nbsp;2953&nbsp;</span><a name="line_2953"></a></li>
<li id="line_2954" class="even"><span class="lineNumber">&nbsp;2954&nbsp;</span>	//&nbsp;Gets&nbsp;an&nbsp;object&nbsp;containing&nbsp;row/col&nbsp;number,&nbsp;misc&nbsp;data,&nbsp;and&nbsp;range&nbsp;information&nbsp;about&nbsp;the&nbsp;cell.<a name="line_2954"></a></li>
<li id="line_2955" class="odd"><span class="lineNumber">&nbsp;2955&nbsp;</span>	//&nbsp;Accepts&nbsp;row/col&nbsp;values,&nbsp;an&nbsp;object&nbsp;with&nbsp;row/col&nbsp;properties,&nbsp;or&nbsp;a&nbsp;single-number&nbsp;offset&nbsp;from&nbsp;the&nbsp;first&nbsp;cell.<a name="line_2955"></a></li>
<li id="line_2956" class="even"><span class="lineNumber">&nbsp;2956&nbsp;</span>	getCell:&nbsp;function(row,&nbsp;col)&nbsp;{<a name="line_2956"></a></li>
<li id="line_2957" class="odd"><span class="lineNumber">&nbsp;2957&nbsp;</span>		var&nbsp;cell;<a name="line_2957"></a></li>
<li id="line_2958" class="even"><span class="lineNumber">&nbsp;2958&nbsp;</span><a name="line_2958"></a></li>
<li id="line_2959" class="odd"><span class="lineNumber">&nbsp;2959&nbsp;</span>		if&nbsp;(col&nbsp;==&nbsp;null)&nbsp;{<a name="line_2959"></a></li>
<li id="line_2960" class="even"><span class="lineNumber">&nbsp;2960&nbsp;</span>			if&nbsp;(typeof&nbsp;row&nbsp;===&nbsp;'number')&nbsp;{&nbsp;//&nbsp;a&nbsp;single-number&nbsp;offset<a name="line_2960"></a></li>
<li id="line_2961" class="odd"><span class="lineNumber">&nbsp;2961&nbsp;</span>				col&nbsp;=&nbsp;row&nbsp;%&nbsp;this.colCnt;<a name="line_2961"></a></li>
<li id="line_2962" class="even"><span class="lineNumber">&nbsp;2962&nbsp;</span>				row&nbsp;=&nbsp;Math.floor(row&nbsp;/&nbsp;this.colCnt);<a name="line_2962"></a></li>
<li id="line_2963" class="odd"><span class="lineNumber">&nbsp;2963&nbsp;</span>			}<a name="line_2963"></a></li>
<li id="line_2964" class="even"><span class="lineNumber">&nbsp;2964&nbsp;</span>			else&nbsp;{&nbsp;//&nbsp;an&nbsp;object&nbsp;with&nbsp;row/col&nbsp;properties<a name="line_2964"></a></li>
<li id="line_2965" class="odd"><span class="lineNumber">&nbsp;2965&nbsp;</span>				col&nbsp;=&nbsp;row.col;<a name="line_2965"></a></li>
<li id="line_2966" class="even"><span class="lineNumber">&nbsp;2966&nbsp;</span>				row&nbsp;=&nbsp;row.row;<a name="line_2966"></a></li>
<li id="line_2967" class="odd"><span class="lineNumber">&nbsp;2967&nbsp;</span>			}<a name="line_2967"></a></li>
<li id="line_2968" class="even"><span class="lineNumber">&nbsp;2968&nbsp;</span>		}<a name="line_2968"></a></li>
<li id="line_2969" class="odd"><span class="lineNumber">&nbsp;2969&nbsp;</span><a name="line_2969"></a></li>
<li id="line_2970" class="even"><span class="lineNumber">&nbsp;2970&nbsp;</span>		cell&nbsp;=&nbsp;{&nbsp;row:&nbsp;row,&nbsp;col:&nbsp;col&nbsp;};<a name="line_2970"></a></li>
<li id="line_2971" class="odd"><span class="lineNumber">&nbsp;2971&nbsp;</span><a name="line_2971"></a></li>
<li id="line_2972" class="even"><span class="lineNumber">&nbsp;2972&nbsp;</span>		$.extend(cell,&nbsp;this.getRowData(row),&nbsp;this.getColData(col));<a name="line_2972"></a></li>
<li id="line_2973" class="odd"><span class="lineNumber">&nbsp;2973&nbsp;</span>		$.extend(cell,&nbsp;this.computeCellRange(cell));<a name="line_2973"></a></li>
<li id="line_2974" class="even"><span class="lineNumber">&nbsp;2974&nbsp;</span><a name="line_2974"></a></li>
<li id="line_2975" class="odd"><span class="lineNumber">&nbsp;2975&nbsp;</span>		return&nbsp;cell;<a name="line_2975"></a></li>
<li id="line_2976" class="even"><span class="lineNumber">&nbsp;2976&nbsp;</span>	},<a name="line_2976"></a></li>
<li id="line_2977" class="odd"><span class="lineNumber">&nbsp;2977&nbsp;</span><a name="line_2977"></a></li>
<li id="line_2978" class="even"><span class="lineNumber">&nbsp;2978&nbsp;</span><a name="line_2978"></a></li>
<li id="line_2979" class="odd"><span class="lineNumber">&nbsp;2979&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;cell&nbsp;object&nbsp;with&nbsp;index&nbsp;and&nbsp;misc&nbsp;data,&nbsp;generates&nbsp;a&nbsp;range&nbsp;object<a name="line_2979"></a></li>
<li id="line_2980" class="even"><span class="lineNumber">&nbsp;2980&nbsp;</span>	//&nbsp;If&nbsp;the&nbsp;grid&nbsp;is&nbsp;leveraging&nbsp;cellDuration,&nbsp;this&nbsp;doesn't&nbsp;need&nbsp;to&nbsp;be&nbsp;defined.&nbsp;Only&nbsp;computeCellDate&nbsp;does.<a name="line_2980"></a></li>
<li id="line_2981" class="odd"><span class="lineNumber">&nbsp;2981&nbsp;</span>	//&nbsp;If&nbsp;being&nbsp;overridden,&nbsp;should&nbsp;return&nbsp;a&nbsp;range&nbsp;with&nbsp;reference-free&nbsp;date&nbsp;copies.<a name="line_2981"></a></li>
<li id="line_2982" class="even"><span class="lineNumber">&nbsp;2982&nbsp;</span>	computeCellRange:&nbsp;function(cell)&nbsp;{<a name="line_2982"></a></li>
<li id="line_2983" class="odd"><span class="lineNumber">&nbsp;2983&nbsp;</span>		var&nbsp;date&nbsp;=&nbsp;this.computeCellDate(cell);<a name="line_2983"></a></li>
<li id="line_2984" class="even"><span class="lineNumber">&nbsp;2984&nbsp;</span><a name="line_2984"></a></li>
<li id="line_2985" class="odd"><span class="lineNumber">&nbsp;2985&nbsp;</span>		return&nbsp;{<a name="line_2985"></a></li>
<li id="line_2986" class="even"><span class="lineNumber">&nbsp;2986&nbsp;</span>			start:&nbsp;date,<a name="line_2986"></a></li>
<li id="line_2987" class="odd"><span class="lineNumber">&nbsp;2987&nbsp;</span>			end:&nbsp;date.clone().add(this.cellDuration)<a name="line_2987"></a></li>
<li id="line_2988" class="even"><span class="lineNumber">&nbsp;2988&nbsp;</span>		};<a name="line_2988"></a></li>
<li id="line_2989" class="odd"><span class="lineNumber">&nbsp;2989&nbsp;</span>	},<a name="line_2989"></a></li>
<li id="line_2990" class="even"><span class="lineNumber">&nbsp;2990&nbsp;</span><a name="line_2990"></a></li>
<li id="line_2991" class="odd"><span class="lineNumber">&nbsp;2991&nbsp;</span><a name="line_2991"></a></li>
<li id="line_2992" class="even"><span class="lineNumber">&nbsp;2992&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;cell,&nbsp;returns&nbsp;its&nbsp;start&nbsp;date.&nbsp;Should&nbsp;return&nbsp;a&nbsp;reference-free&nbsp;date&nbsp;copy.<a name="line_2992"></a></li>
<li id="line_2993" class="odd"><span class="lineNumber">&nbsp;2993&nbsp;</span>	computeCellDate:&nbsp;function(cell)&nbsp;{<a name="line_2993"></a></li>
<li id="line_2994" class="even"><span class="lineNumber">&nbsp;2994&nbsp;</span>		//&nbsp;subclasses&nbsp;can&nbsp;implement<a name="line_2994"></a></li>
<li id="line_2995" class="odd"><span class="lineNumber">&nbsp;2995&nbsp;</span>	},<a name="line_2995"></a></li>
<li id="line_2996" class="even"><span class="lineNumber">&nbsp;2996&nbsp;</span><a name="line_2996"></a></li>
<li id="line_2997" class="odd"><span class="lineNumber">&nbsp;2997&nbsp;</span><a name="line_2997"></a></li>
<li id="line_2998" class="even"><span class="lineNumber">&nbsp;2998&nbsp;</span>	//&nbsp;Retrieves&nbsp;misc&nbsp;data&nbsp;about&nbsp;the&nbsp;given&nbsp;row<a name="line_2998"></a></li>
<li id="line_2999" class="odd"><span class="lineNumber">&nbsp;2999&nbsp;</span>	getRowData:&nbsp;function(row)&nbsp;{<a name="line_2999"></a></li>
<li id="line_3000" class="even"><span class="lineNumber">&nbsp;3000&nbsp;</span>		return&nbsp;{};<a name="line_3000"></a></li>
<li id="line_3001" class="odd"><span class="lineNumber">&nbsp;3001&nbsp;</span>	},<a name="line_3001"></a></li>
<li id="line_3002" class="even"><span class="lineNumber">&nbsp;3002&nbsp;</span><a name="line_3002"></a></li>
<li id="line_3003" class="odd"><span class="lineNumber">&nbsp;3003&nbsp;</span><a name="line_3003"></a></li>
<li id="line_3004" class="even"><span class="lineNumber">&nbsp;3004&nbsp;</span>	//&nbsp;Retrieves&nbsp;misc&nbsp;data&nbsp;baout&nbsp;the&nbsp;given&nbsp;column<a name="line_3004"></a></li>
<li id="line_3005" class="odd"><span class="lineNumber">&nbsp;3005&nbsp;</span>	getColData:&nbsp;function(col)&nbsp;{<a name="line_3005"></a></li>
<li id="line_3006" class="even"><span class="lineNumber">&nbsp;3006&nbsp;</span>		return&nbsp;{};<a name="line_3006"></a></li>
<li id="line_3007" class="odd"><span class="lineNumber">&nbsp;3007&nbsp;</span>	},<a name="line_3007"></a></li>
<li id="line_3008" class="even"><span class="lineNumber">&nbsp;3008&nbsp;</span><a name="line_3008"></a></li>
<li id="line_3009" class="odd"><span class="lineNumber">&nbsp;3009&nbsp;</span><a name="line_3009"></a></li>
<li id="line_3010" class="even"><span class="lineNumber">&nbsp;3010&nbsp;</span>	//&nbsp;Retrieves&nbsp;the&nbsp;element&nbsp;representing&nbsp;the&nbsp;given&nbsp;row<a name="line_3010"></a></li>
<li id="line_3011" class="odd"><span class="lineNumber">&nbsp;3011&nbsp;</span>	getRowEl:&nbsp;function(row)&nbsp;{<a name="line_3011"></a></li>
<li id="line_3012" class="even"><span class="lineNumber">&nbsp;3012&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement&nbsp;if&nbsp;leveraging&nbsp;the&nbsp;default&nbsp;getCellDayEl()&nbsp;or&nbsp;computeRowCoords()<a name="line_3012"></a></li>
<li id="line_3013" class="odd"><span class="lineNumber">&nbsp;3013&nbsp;</span>	},<a name="line_3013"></a></li>
<li id="line_3014" class="even"><span class="lineNumber">&nbsp;3014&nbsp;</span><a name="line_3014"></a></li>
<li id="line_3015" class="odd"><span class="lineNumber">&nbsp;3015&nbsp;</span><a name="line_3015"></a></li>
<li id="line_3016" class="even"><span class="lineNumber">&nbsp;3016&nbsp;</span>	//&nbsp;Retrieves&nbsp;the&nbsp;element&nbsp;representing&nbsp;the&nbsp;given&nbsp;column<a name="line_3016"></a></li>
<li id="line_3017" class="odd"><span class="lineNumber">&nbsp;3017&nbsp;</span>	getColEl:&nbsp;function(col)&nbsp;{<a name="line_3017"></a></li>
<li id="line_3018" class="even"><span class="lineNumber">&nbsp;3018&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement&nbsp;if&nbsp;leveraging&nbsp;the&nbsp;default&nbsp;getCellDayEl()&nbsp;or&nbsp;computeColCoords()<a name="line_3018"></a></li>
<li id="line_3019" class="odd"><span class="lineNumber">&nbsp;3019&nbsp;</span>	},<a name="line_3019"></a></li>
<li id="line_3020" class="even"><span class="lineNumber">&nbsp;3020&nbsp;</span><a name="line_3020"></a></li>
<li id="line_3021" class="odd"><span class="lineNumber">&nbsp;3021&nbsp;</span><a name="line_3021"></a></li>
<li id="line_3022" class="even"><span class="lineNumber">&nbsp;3022&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;cell&nbsp;object,&nbsp;returns&nbsp;the&nbsp;element&nbsp;that&nbsp;represents&nbsp;the&nbsp;cell's&nbsp;whole-day<a name="line_3022"></a></li>
<li id="line_3023" class="odd"><span class="lineNumber">&nbsp;3023&nbsp;</span>	getCellDayEl:&nbsp;function(cell)&nbsp;{<a name="line_3023"></a></li>
<li id="line_3024" class="even"><span class="lineNumber">&nbsp;3024&nbsp;</span>		return&nbsp;this.getColEl(cell.col)&nbsp;||&nbsp;this.getRowEl(cell.row);<a name="line_3024"></a></li>
<li id="line_3025" class="odd"><span class="lineNumber">&nbsp;3025&nbsp;</span>	},<a name="line_3025"></a></li>
<li id="line_3026" class="even"><span class="lineNumber">&nbsp;3026&nbsp;</span><a name="line_3026"></a></li>
<li id="line_3027" class="odd"><span class="lineNumber">&nbsp;3027&nbsp;</span><a name="line_3027"></a></li>
<li id="line_3028" class="even"><span class="lineNumber">&nbsp;3028&nbsp;</span>	/*&nbsp;Cell&nbsp;Coordinates<a name="line_3028"></a></li>
<li id="line_3029" class="odd"><span class="lineNumber">&nbsp;3029&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3029"></a></li>
<li id="line_3030" class="even"><span class="lineNumber">&nbsp;3030&nbsp;</span><a name="line_3030"></a></li>
<li id="line_3031" class="odd"><span class="lineNumber">&nbsp;3031&nbsp;</span><a name="line_3031"></a></li>
<li id="line_3032" class="even"><span class="lineNumber">&nbsp;3032&nbsp;</span>	//&nbsp;Computes&nbsp;the&nbsp;top/bottom&nbsp;coordinates&nbsp;of&nbsp;all&nbsp;rows.<a name="line_3032"></a></li>
<li id="line_3033" class="odd"><span class="lineNumber">&nbsp;3033&nbsp;</span>	//&nbsp;By&nbsp;default,&nbsp;queries&nbsp;the&nbsp;dimensions&nbsp;of&nbsp;the&nbsp;element&nbsp;provided&nbsp;by&nbsp;getRowEl().<a name="line_3033"></a></li>
<li id="line_3034" class="even"><span class="lineNumber">&nbsp;3034&nbsp;</span>	computeRowCoords:&nbsp;function()&nbsp;{<a name="line_3034"></a></li>
<li id="line_3035" class="odd"><span class="lineNumber">&nbsp;3035&nbsp;</span>		var&nbsp;items&nbsp;=&nbsp;[];<a name="line_3035"></a></li>
<li id="line_3036" class="even"><span class="lineNumber">&nbsp;3036&nbsp;</span>		var&nbsp;i,&nbsp;el;<a name="line_3036"></a></li>
<li id="line_3037" class="odd"><span class="lineNumber">&nbsp;3037&nbsp;</span>		var&nbsp;top;<a name="line_3037"></a></li>
<li id="line_3038" class="even"><span class="lineNumber">&nbsp;3038&nbsp;</span><a name="line_3038"></a></li>
<li id="line_3039" class="odd"><span class="lineNumber">&nbsp;3039&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;this.rowCnt;&nbsp;i++)&nbsp;{<a name="line_3039"></a></li>
<li id="line_3040" class="even"><span class="lineNumber">&nbsp;3040&nbsp;</span>			el&nbsp;=&nbsp;this.getRowEl(i);<a name="line_3040"></a></li>
<li id="line_3041" class="odd"><span class="lineNumber">&nbsp;3041&nbsp;</span>			top&nbsp;=&nbsp;el.offset().top;<a name="line_3041"></a></li>
<li id="line_3042" class="even"><span class="lineNumber">&nbsp;3042&nbsp;</span>			items.push({<a name="line_3042"></a></li>
<li id="line_3043" class="odd"><span class="lineNumber">&nbsp;3043&nbsp;</span>				top:&nbsp;top,<a name="line_3043"></a></li>
<li id="line_3044" class="even"><span class="lineNumber">&nbsp;3044&nbsp;</span>				bottom:&nbsp;top&nbsp;+&nbsp;el.outerHeight()<a name="line_3044"></a></li>
<li id="line_3045" class="odd"><span class="lineNumber">&nbsp;3045&nbsp;</span>			});<a name="line_3045"></a></li>
<li id="line_3046" class="even"><span class="lineNumber">&nbsp;3046&nbsp;</span>		}<a name="line_3046"></a></li>
<li id="line_3047" class="odd"><span class="lineNumber">&nbsp;3047&nbsp;</span><a name="line_3047"></a></li>
<li id="line_3048" class="even"><span class="lineNumber">&nbsp;3048&nbsp;</span>		return&nbsp;items;<a name="line_3048"></a></li>
<li id="line_3049" class="odd"><span class="lineNumber">&nbsp;3049&nbsp;</span>	},<a name="line_3049"></a></li>
<li id="line_3050" class="even"><span class="lineNumber">&nbsp;3050&nbsp;</span><a name="line_3050"></a></li>
<li id="line_3051" class="odd"><span class="lineNumber">&nbsp;3051&nbsp;</span><a name="line_3051"></a></li>
<li id="line_3052" class="even"><span class="lineNumber">&nbsp;3052&nbsp;</span>	//&nbsp;Computes&nbsp;the&nbsp;left/right&nbsp;coordinates&nbsp;of&nbsp;all&nbsp;rows.<a name="line_3052"></a></li>
<li id="line_3053" class="odd"><span class="lineNumber">&nbsp;3053&nbsp;</span>	//&nbsp;By&nbsp;default,&nbsp;queries&nbsp;the&nbsp;dimensions&nbsp;of&nbsp;the&nbsp;element&nbsp;provided&nbsp;by&nbsp;getColEl().&nbsp;Columns&nbsp;can&nbsp;be&nbsp;LTR&nbsp;or&nbsp;RTL.<a name="line_3053"></a></li>
<li id="line_3054" class="even"><span class="lineNumber">&nbsp;3054&nbsp;</span>	computeColCoords:&nbsp;function()&nbsp;{<a name="line_3054"></a></li>
<li id="line_3055" class="odd"><span class="lineNumber">&nbsp;3055&nbsp;</span>		var&nbsp;items&nbsp;=&nbsp;[];<a name="line_3055"></a></li>
<li id="line_3056" class="even"><span class="lineNumber">&nbsp;3056&nbsp;</span>		var&nbsp;i,&nbsp;el;<a name="line_3056"></a></li>
<li id="line_3057" class="odd"><span class="lineNumber">&nbsp;3057&nbsp;</span>		var&nbsp;left;<a name="line_3057"></a></li>
<li id="line_3058" class="even"><span class="lineNumber">&nbsp;3058&nbsp;</span><a name="line_3058"></a></li>
<li id="line_3059" class="odd"><span class="lineNumber">&nbsp;3059&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;this.colCnt;&nbsp;i++)&nbsp;{<a name="line_3059"></a></li>
<li id="line_3060" class="even"><span class="lineNumber">&nbsp;3060&nbsp;</span>			el&nbsp;=&nbsp;this.getColEl(i);<a name="line_3060"></a></li>
<li id="line_3061" class="odd"><span class="lineNumber">&nbsp;3061&nbsp;</span>			left&nbsp;=&nbsp;el.offset().left;<a name="line_3061"></a></li>
<li id="line_3062" class="even"><span class="lineNumber">&nbsp;3062&nbsp;</span>			items.push({<a name="line_3062"></a></li>
<li id="line_3063" class="odd"><span class="lineNumber">&nbsp;3063&nbsp;</span>				left:&nbsp;left,<a name="line_3063"></a></li>
<li id="line_3064" class="even"><span class="lineNumber">&nbsp;3064&nbsp;</span>				right:&nbsp;left&nbsp;+&nbsp;el.outerWidth()<a name="line_3064"></a></li>
<li id="line_3065" class="odd"><span class="lineNumber">&nbsp;3065&nbsp;</span>			});<a name="line_3065"></a></li>
<li id="line_3066" class="even"><span class="lineNumber">&nbsp;3066&nbsp;</span>		}<a name="line_3066"></a></li>
<li id="line_3067" class="odd"><span class="lineNumber">&nbsp;3067&nbsp;</span><a name="line_3067"></a></li>
<li id="line_3068" class="even"><span class="lineNumber">&nbsp;3068&nbsp;</span>		return&nbsp;items;<a name="line_3068"></a></li>
<li id="line_3069" class="odd"><span class="lineNumber">&nbsp;3069&nbsp;</span>	},<a name="line_3069"></a></li>
<li id="line_3070" class="even"><span class="lineNumber">&nbsp;3070&nbsp;</span><a name="line_3070"></a></li>
<li id="line_3071" class="odd"><span class="lineNumber">&nbsp;3071&nbsp;</span><a name="line_3071"></a></li>
<li id="line_3072" class="even"><span class="lineNumber">&nbsp;3072&nbsp;</span>	/*&nbsp;Rendering<a name="line_3072"></a></li>
<li id="line_3073" class="odd"><span class="lineNumber">&nbsp;3073&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3073"></a></li>
<li id="line_3074" class="even"><span class="lineNumber">&nbsp;3074&nbsp;</span><a name="line_3074"></a></li>
<li id="line_3075" class="odd"><span class="lineNumber">&nbsp;3075&nbsp;</span><a name="line_3075"></a></li>
<li id="line_3076" class="even"><span class="lineNumber">&nbsp;3076&nbsp;</span>	//&nbsp;Sets&nbsp;the&nbsp;container&nbsp;element&nbsp;that&nbsp;the&nbsp;grid&nbsp;should&nbsp;render&nbsp;inside&nbsp;of.<a name="line_3076"></a></li>
<li id="line_3077" class="odd"><span class="lineNumber">&nbsp;3077&nbsp;</span>	//&nbsp;Does&nbsp;other&nbsp;DOM-related&nbsp;initializations.<a name="line_3077"></a></li>
<li id="line_3078" class="even"><span class="lineNumber">&nbsp;3078&nbsp;</span>	setElement:&nbsp;function(el)&nbsp;{<a name="line_3078"></a></li>
<li id="line_3079" class="odd"><span class="lineNumber">&nbsp;3079&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_3079"></a></li>
<li id="line_3080" class="even"><span class="lineNumber">&nbsp;3080&nbsp;</span><a name="line_3080"></a></li>
<li id="line_3081" class="odd"><span class="lineNumber">&nbsp;3081&nbsp;</span>		this.el&nbsp;=&nbsp;el;<a name="line_3081"></a></li>
<li id="line_3082" class="even"><span class="lineNumber">&nbsp;3082&nbsp;</span><a name="line_3082"></a></li>
<li id="line_3083" class="odd"><span class="lineNumber">&nbsp;3083&nbsp;</span>		//&nbsp;attach&nbsp;a&nbsp;handler&nbsp;to&nbsp;the&nbsp;grid's&nbsp;root&nbsp;element.<a name="line_3083"></a></li>
<li id="line_3084" class="even"><span class="lineNumber">&nbsp;3084&nbsp;</span>		//&nbsp;jQuery&nbsp;will&nbsp;take&nbsp;care&nbsp;of&nbsp;unregistering&nbsp;them&nbsp;when&nbsp;removeElement&nbsp;gets&nbsp;called.<a name="line_3084"></a></li>
<li id="line_3085" class="odd"><span class="lineNumber">&nbsp;3085&nbsp;</span>		el.on('mousedown',&nbsp;function(ev)&nbsp;{<a name="line_3085"></a></li>
<li id="line_3086" class="even"><span class="lineNumber">&nbsp;3086&nbsp;</span>			if&nbsp;(<a name="line_3086"></a></li>
<li id="line_3087" class="odd"><span class="lineNumber">&nbsp;3087&nbsp;</span>				!$(ev.target).is('.fc-event-container&nbsp;*,&nbsp;.fc-more')&nbsp;&amp;&amp;&nbsp;//&nbsp;not&nbsp;an&nbsp;an&nbsp;event&nbsp;element,&nbsp;or&nbsp;"more.."&nbsp;link<a name="line_3087"></a></li>
<li id="line_3088" class="even"><span class="lineNumber">&nbsp;3088&nbsp;</span>				!$(ev.target).closest('.fc-popover').length&nbsp;//&nbsp;not&nbsp;on&nbsp;a&nbsp;popover&nbsp;(like&nbsp;the&nbsp;"more.."&nbsp;events&nbsp;one)<a name="line_3088"></a></li>
<li id="line_3089" class="odd"><span class="lineNumber">&nbsp;3089&nbsp;</span>			)&nbsp;{<a name="line_3089"></a></li>
<li id="line_3090" class="even"><span class="lineNumber">&nbsp;3090&nbsp;</span>				_this.dayMousedown(ev);<a name="line_3090"></a></li>
<li id="line_3091" class="odd"><span class="lineNumber">&nbsp;3091&nbsp;</span>			}<a name="line_3091"></a></li>
<li id="line_3092" class="even"><span class="lineNumber">&nbsp;3092&nbsp;</span>		});<a name="line_3092"></a></li>
<li id="line_3093" class="odd"><span class="lineNumber">&nbsp;3093&nbsp;</span><a name="line_3093"></a></li>
<li id="line_3094" class="even"><span class="lineNumber">&nbsp;3094&nbsp;</span>		//&nbsp;attach&nbsp;event-element-related&nbsp;handlers.&nbsp;in&nbsp;Grid.events<a name="line_3094"></a></li>
<li id="line_3095" class="odd"><span class="lineNumber">&nbsp;3095&nbsp;</span>		//&nbsp;same&nbsp;garbage&nbsp;collection&nbsp;note&nbsp;as&nbsp;above.<a name="line_3095"></a></li>
<li id="line_3096" class="even"><span class="lineNumber">&nbsp;3096&nbsp;</span>		this.bindSegHandlers();<a name="line_3096"></a></li>
<li id="line_3097" class="odd"><span class="lineNumber">&nbsp;3097&nbsp;</span><a name="line_3097"></a></li>
<li id="line_3098" class="even"><span class="lineNumber">&nbsp;3098&nbsp;</span>		this.bindGlobalHandlers();<a name="line_3098"></a></li>
<li id="line_3099" class="odd"><span class="lineNumber">&nbsp;3099&nbsp;</span>	},<a name="line_3099"></a></li>
<li id="line_3100" class="even"><span class="lineNumber">&nbsp;3100&nbsp;</span><a name="line_3100"></a></li>
<li id="line_3101" class="odd"><span class="lineNumber">&nbsp;3101&nbsp;</span><a name="line_3101"></a></li>
<li id="line_3102" class="even"><span class="lineNumber">&nbsp;3102&nbsp;</span>	//&nbsp;Removes&nbsp;the&nbsp;grid's&nbsp;container&nbsp;element&nbsp;from&nbsp;the&nbsp;DOM.&nbsp;Undoes&nbsp;any&nbsp;other&nbsp;DOM-related&nbsp;attachments.<a name="line_3102"></a></li>
<li id="line_3103" class="odd"><span class="lineNumber">&nbsp;3103&nbsp;</span>	//&nbsp;DOES&nbsp;NOT&nbsp;remove&nbsp;any&nbsp;content&nbsp;beforehand&nbsp;(doesn't&nbsp;clear&nbsp;events&nbsp;or&nbsp;call&nbsp;unrenderDates),&nbsp;unlike&nbsp;View<a name="line_3103"></a></li>
<li id="line_3104" class="even"><span class="lineNumber">&nbsp;3104&nbsp;</span>	removeElement:&nbsp;function()&nbsp;{<a name="line_3104"></a></li>
<li id="line_3105" class="odd"><span class="lineNumber">&nbsp;3105&nbsp;</span>		this.unbindGlobalHandlers();<a name="line_3105"></a></li>
<li id="line_3106" class="even"><span class="lineNumber">&nbsp;3106&nbsp;</span><a name="line_3106"></a></li>
<li id="line_3107" class="odd"><span class="lineNumber">&nbsp;3107&nbsp;</span>		this.el.remove();<a name="line_3107"></a></li>
<li id="line_3108" class="even"><span class="lineNumber">&nbsp;3108&nbsp;</span><a name="line_3108"></a></li>
<li id="line_3109" class="odd"><span class="lineNumber">&nbsp;3109&nbsp;</span>		//&nbsp;NOTE:&nbsp;we&nbsp;don't&nbsp;null-out&nbsp;this.el&nbsp;for&nbsp;the&nbsp;same&nbsp;reasons&nbsp;we&nbsp;don't&nbsp;do&nbsp;it&nbsp;within&nbsp;View::removeElement<a name="line_3109"></a></li>
<li id="line_3110" class="even"><span class="lineNumber">&nbsp;3110&nbsp;</span>	},<a name="line_3110"></a></li>
<li id="line_3111" class="odd"><span class="lineNumber">&nbsp;3111&nbsp;</span><a name="line_3111"></a></li>
<li id="line_3112" class="even"><span class="lineNumber">&nbsp;3112&nbsp;</span><a name="line_3112"></a></li>
<li id="line_3113" class="odd"><span class="lineNumber">&nbsp;3113&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;basic&nbsp;structure&nbsp;of&nbsp;grid&nbsp;view&nbsp;before&nbsp;any&nbsp;content&nbsp;is&nbsp;rendered<a name="line_3113"></a></li>
<li id="line_3114" class="even"><span class="lineNumber">&nbsp;3114&nbsp;</span>	renderSkeleton:&nbsp;function()&nbsp;{<a name="line_3114"></a></li>
<li id="line_3115" class="odd"><span class="lineNumber">&nbsp;3115&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_3115"></a></li>
<li id="line_3116" class="even"><span class="lineNumber">&nbsp;3116&nbsp;</span>	},<a name="line_3116"></a></li>
<li id="line_3117" class="odd"><span class="lineNumber">&nbsp;3117&nbsp;</span><a name="line_3117"></a></li>
<li id="line_3118" class="even"><span class="lineNumber">&nbsp;3118&nbsp;</span><a name="line_3118"></a></li>
<li id="line_3119" class="odd"><span class="lineNumber">&nbsp;3119&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;grid's&nbsp;date-related&nbsp;content&nbsp;(like&nbsp;cells&nbsp;that&nbsp;represent&nbsp;days/times).<a name="line_3119"></a></li>
<li id="line_3120" class="even"><span class="lineNumber">&nbsp;3120&nbsp;</span>	//&nbsp;Assumes&nbsp;setRange&nbsp;has&nbsp;already&nbsp;been&nbsp;called&nbsp;and&nbsp;the&nbsp;skeleton&nbsp;has&nbsp;already&nbsp;been&nbsp;rendered.<a name="line_3120"></a></li>
<li id="line_3121" class="odd"><span class="lineNumber">&nbsp;3121&nbsp;</span>	renderDates:&nbsp;function()&nbsp;{<a name="line_3121"></a></li>
<li id="line_3122" class="even"><span class="lineNumber">&nbsp;3122&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_3122"></a></li>
<li id="line_3123" class="odd"><span class="lineNumber">&nbsp;3123&nbsp;</span>	},<a name="line_3123"></a></li>
<li id="line_3124" class="even"><span class="lineNumber">&nbsp;3124&nbsp;</span><a name="line_3124"></a></li>
<li id="line_3125" class="odd"><span class="lineNumber">&nbsp;3125&nbsp;</span><a name="line_3125"></a></li>
<li id="line_3126" class="even"><span class="lineNumber">&nbsp;3126&nbsp;</span>	//&nbsp;Unrenders&nbsp;the&nbsp;grid's&nbsp;date-related&nbsp;content<a name="line_3126"></a></li>
<li id="line_3127" class="odd"><span class="lineNumber">&nbsp;3127&nbsp;</span>	unrenderDates:&nbsp;function()&nbsp;{<a name="line_3127"></a></li>
<li id="line_3128" class="even"><span class="lineNumber">&nbsp;3128&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_3128"></a></li>
<li id="line_3129" class="odd"><span class="lineNumber">&nbsp;3129&nbsp;</span>	},<a name="line_3129"></a></li>
<li id="line_3130" class="even"><span class="lineNumber">&nbsp;3130&nbsp;</span><a name="line_3130"></a></li>
<li id="line_3131" class="odd"><span class="lineNumber">&nbsp;3131&nbsp;</span><a name="line_3131"></a></li>
<li id="line_3132" class="even"><span class="lineNumber">&nbsp;3132&nbsp;</span>	/*&nbsp;Handlers<a name="line_3132"></a></li>
<li id="line_3133" class="odd"><span class="lineNumber">&nbsp;3133&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3133"></a></li>
<li id="line_3134" class="even"><span class="lineNumber">&nbsp;3134&nbsp;</span><a name="line_3134"></a></li>
<li id="line_3135" class="odd"><span class="lineNumber">&nbsp;3135&nbsp;</span><a name="line_3135"></a></li>
<li id="line_3136" class="even"><span class="lineNumber">&nbsp;3136&nbsp;</span>	//&nbsp;Binds&nbsp;DOM&nbsp;handlers&nbsp;to&nbsp;elements&nbsp;that&nbsp;reside&nbsp;outside&nbsp;the&nbsp;grid,&nbsp;such&nbsp;as&nbsp;the&nbsp;document<a name="line_3136"></a></li>
<li id="line_3137" class="odd"><span class="lineNumber">&nbsp;3137&nbsp;</span>	bindGlobalHandlers:&nbsp;function()&nbsp;{<a name="line_3137"></a></li>
<li id="line_3138" class="even"><span class="lineNumber">&nbsp;3138&nbsp;</span>		$(document).on('dragstart&nbsp;sortstart',&nbsp;this.externalDragStartProxy);&nbsp;//&nbsp;jqui<a name="line_3138"></a></li>
<li id="line_3139" class="odd"><span class="lineNumber">&nbsp;3139&nbsp;</span>	},<a name="line_3139"></a></li>
<li id="line_3140" class="even"><span class="lineNumber">&nbsp;3140&nbsp;</span><a name="line_3140"></a></li>
<li id="line_3141" class="odd"><span class="lineNumber">&nbsp;3141&nbsp;</span><a name="line_3141"></a></li>
<li id="line_3142" class="even"><span class="lineNumber">&nbsp;3142&nbsp;</span>	//&nbsp;Unbinds&nbsp;DOM&nbsp;handlers&nbsp;from&nbsp;elements&nbsp;that&nbsp;reside&nbsp;outside&nbsp;the&nbsp;grid<a name="line_3142"></a></li>
<li id="line_3143" class="odd"><span class="lineNumber">&nbsp;3143&nbsp;</span>	unbindGlobalHandlers:&nbsp;function()&nbsp;{<a name="line_3143"></a></li>
<li id="line_3144" class="even"><span class="lineNumber">&nbsp;3144&nbsp;</span>		$(document).off('dragstart&nbsp;sortstart',&nbsp;this.externalDragStartProxy);&nbsp;//&nbsp;jqui<a name="line_3144"></a></li>
<li id="line_3145" class="odd"><span class="lineNumber">&nbsp;3145&nbsp;</span>	},<a name="line_3145"></a></li>
<li id="line_3146" class="even"><span class="lineNumber">&nbsp;3146&nbsp;</span><a name="line_3146"></a></li>
<li id="line_3147" class="odd"><span class="lineNumber">&nbsp;3147&nbsp;</span><a name="line_3147"></a></li>
<li id="line_3148" class="even"><span class="lineNumber">&nbsp;3148&nbsp;</span>	//&nbsp;Process&nbsp;a&nbsp;mousedown&nbsp;on&nbsp;an&nbsp;element&nbsp;that&nbsp;represents&nbsp;a&nbsp;day.&nbsp;For&nbsp;day&nbsp;clicking&nbsp;and&nbsp;selecting.<a name="line_3148"></a></li>
<li id="line_3149" class="odd"><span class="lineNumber">&nbsp;3149&nbsp;</span>	dayMousedown:&nbsp;function(ev)&nbsp;{<a name="line_3149"></a></li>
<li id="line_3150" class="even"><span class="lineNumber">&nbsp;3150&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_3150"></a></li>
<li id="line_3151" class="odd"><span class="lineNumber">&nbsp;3151&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_3151"></a></li>
<li id="line_3152" class="even"><span class="lineNumber">&nbsp;3152&nbsp;</span>		var&nbsp;isSelectable&nbsp;=&nbsp;view.opt('selectable');<a name="line_3152"></a></li>
<li id="line_3153" class="odd"><span class="lineNumber">&nbsp;3153&nbsp;</span>		var&nbsp;dayClickCell;&nbsp;//&nbsp;null&nbsp;if&nbsp;invalid&nbsp;dayClick<a name="line_3153"></a></li>
<li id="line_3154" class="even"><span class="lineNumber">&nbsp;3154&nbsp;</span>		var&nbsp;selectionRange;&nbsp;//&nbsp;null&nbsp;if&nbsp;invalid&nbsp;selection<a name="line_3154"></a></li>
<li id="line_3155" class="odd"><span class="lineNumber">&nbsp;3155&nbsp;</span><a name="line_3155"></a></li>
<li id="line_3156" class="even"><span class="lineNumber">&nbsp;3156&nbsp;</span>		//&nbsp;this&nbsp;listener&nbsp;tracks&nbsp;a&nbsp;mousedown&nbsp;on&nbsp;a&nbsp;day&nbsp;element,&nbsp;and&nbsp;a&nbsp;subsequent&nbsp;drag.<a name="line_3156"></a></li>
<li id="line_3157" class="odd"><span class="lineNumber">&nbsp;3157&nbsp;</span>		//&nbsp;if&nbsp;the&nbsp;drag&nbsp;ends&nbsp;on&nbsp;the&nbsp;same&nbsp;day,&nbsp;it&nbsp;is&nbsp;a&nbsp;'dayClick'.<a name="line_3157"></a></li>
<li id="line_3158" class="even"><span class="lineNumber">&nbsp;3158&nbsp;</span>		//&nbsp;if&nbsp;'selectable'&nbsp;is&nbsp;enabled,&nbsp;this&nbsp;listener&nbsp;also&nbsp;detects&nbsp;selections.<a name="line_3158"></a></li>
<li id="line_3159" class="odd"><span class="lineNumber">&nbsp;3159&nbsp;</span>		var&nbsp;dragListener&nbsp;=&nbsp;new&nbsp;CellDragListener(this.coordMap,&nbsp;{<a name="line_3159"></a></li>
<li id="line_3160" class="even"><span class="lineNumber">&nbsp;3160&nbsp;</span>			//distance:&nbsp;5,&nbsp;//&nbsp;needs&nbsp;more&nbsp;work&nbsp;if&nbsp;we&nbsp;want&nbsp;dayClick&nbsp;to&nbsp;fire&nbsp;correctly<a name="line_3160"></a></li>
<li id="line_3161" class="odd"><span class="lineNumber">&nbsp;3161&nbsp;</span>			scroll:&nbsp;view.opt('dragScroll'),<a name="line_3161"></a></li>
<li id="line_3162" class="even"><span class="lineNumber">&nbsp;3162&nbsp;</span>			dragStart:&nbsp;function()&nbsp;{<a name="line_3162"></a></li>
<li id="line_3163" class="odd"><span class="lineNumber">&nbsp;3163&nbsp;</span>				view.unselect();&nbsp;//&nbsp;since&nbsp;we&nbsp;could&nbsp;be&nbsp;rendering&nbsp;a&nbsp;new&nbsp;selection,&nbsp;we&nbsp;want&nbsp;to&nbsp;clear&nbsp;any&nbsp;old&nbsp;one<a name="line_3163"></a></li>
<li id="line_3164" class="even"><span class="lineNumber">&nbsp;3164&nbsp;</span>			},<a name="line_3164"></a></li>
<li id="line_3165" class="odd"><span class="lineNumber">&nbsp;3165&nbsp;</span>			cellOver:&nbsp;function(cell,&nbsp;isOrig,&nbsp;origCell)&nbsp;{<a name="line_3165"></a></li>
<li id="line_3166" class="even"><span class="lineNumber">&nbsp;3166&nbsp;</span>				if&nbsp;(origCell)&nbsp;{&nbsp;//&nbsp;click&nbsp;needs&nbsp;to&nbsp;have&nbsp;started&nbsp;on&nbsp;a&nbsp;cell<a name="line_3166"></a></li>
<li id="line_3167" class="odd"><span class="lineNumber">&nbsp;3167&nbsp;</span>					dayClickCell&nbsp;=&nbsp;isOrig&nbsp;?&nbsp;cell&nbsp;:&nbsp;null;&nbsp;//&nbsp;single-cell&nbsp;selection&nbsp;is&nbsp;a&nbsp;day&nbsp;click<a name="line_3167"></a></li>
<li id="line_3168" class="even"><span class="lineNumber">&nbsp;3168&nbsp;</span>					if&nbsp;(isSelectable)&nbsp;{<a name="line_3168"></a></li>
<li id="line_3169" class="odd"><span class="lineNumber">&nbsp;3169&nbsp;</span>						selectionRange&nbsp;=&nbsp;_this.computeSelection(origCell,&nbsp;cell);<a name="line_3169"></a></li>
<li id="line_3170" class="even"><span class="lineNumber">&nbsp;3170&nbsp;</span>						if&nbsp;(selectionRange)&nbsp;{<a name="line_3170"></a></li>
<li id="line_3171" class="odd"><span class="lineNumber">&nbsp;3171&nbsp;</span>							_this.renderSelection(selectionRange);<a name="line_3171"></a></li>
<li id="line_3172" class="even"><span class="lineNumber">&nbsp;3172&nbsp;</span>						}<a name="line_3172"></a></li>
<li id="line_3173" class="odd"><span class="lineNumber">&nbsp;3173&nbsp;</span>						else&nbsp;{<a name="line_3173"></a></li>
<li id="line_3174" class="even"><span class="lineNumber">&nbsp;3174&nbsp;</span>							disableCursor();<a name="line_3174"></a></li>
<li id="line_3175" class="odd"><span class="lineNumber">&nbsp;3175&nbsp;</span>						}<a name="line_3175"></a></li>
<li id="line_3176" class="even"><span class="lineNumber">&nbsp;3176&nbsp;</span>					}<a name="line_3176"></a></li>
<li id="line_3177" class="odd"><span class="lineNumber">&nbsp;3177&nbsp;</span>				}<a name="line_3177"></a></li>
<li id="line_3178" class="even"><span class="lineNumber">&nbsp;3178&nbsp;</span>			},<a name="line_3178"></a></li>
<li id="line_3179" class="odd"><span class="lineNumber">&nbsp;3179&nbsp;</span>			cellOut:&nbsp;function(cell)&nbsp;{<a name="line_3179"></a></li>
<li id="line_3180" class="even"><span class="lineNumber">&nbsp;3180&nbsp;</span>				dayClickCell&nbsp;=&nbsp;null;<a name="line_3180"></a></li>
<li id="line_3181" class="odd"><span class="lineNumber">&nbsp;3181&nbsp;</span>				selectionRange&nbsp;=&nbsp;null;<a name="line_3181"></a></li>
<li id="line_3182" class="even"><span class="lineNumber">&nbsp;3182&nbsp;</span>				_this.unrenderSelection();<a name="line_3182"></a></li>
<li id="line_3183" class="odd"><span class="lineNumber">&nbsp;3183&nbsp;</span>				enableCursor();<a name="line_3183"></a></li>
<li id="line_3184" class="even"><span class="lineNumber">&nbsp;3184&nbsp;</span>			},<a name="line_3184"></a></li>
<li id="line_3185" class="odd"><span class="lineNumber">&nbsp;3185&nbsp;</span>			listenStop:&nbsp;function(ev)&nbsp;{<a name="line_3185"></a></li>
<li id="line_3186" class="even"><span class="lineNumber">&nbsp;3186&nbsp;</span>				if&nbsp;(dayClickCell)&nbsp;{<a name="line_3186"></a></li>
<li id="line_3187" class="odd"><span class="lineNumber">&nbsp;3187&nbsp;</span>					view.triggerDayClick(dayClickCell,&nbsp;_this.getCellDayEl(dayClickCell),&nbsp;ev);<a name="line_3187"></a></li>
<li id="line_3188" class="even"><span class="lineNumber">&nbsp;3188&nbsp;</span>				}<a name="line_3188"></a></li>
<li id="line_3189" class="odd"><span class="lineNumber">&nbsp;3189&nbsp;</span>				if&nbsp;(selectionRange)&nbsp;{<a name="line_3189"></a></li>
<li id="line_3190" class="even"><span class="lineNumber">&nbsp;3190&nbsp;</span>					//&nbsp;the&nbsp;selection&nbsp;will&nbsp;already&nbsp;have&nbsp;been&nbsp;rendered.&nbsp;just&nbsp;report&nbsp;it<a name="line_3190"></a></li>
<li id="line_3191" class="odd"><span class="lineNumber">&nbsp;3191&nbsp;</span>					view.reportSelection(selectionRange,&nbsp;ev);<a name="line_3191"></a></li>
<li id="line_3192" class="even"><span class="lineNumber">&nbsp;3192&nbsp;</span>				}<a name="line_3192"></a></li>
<li id="line_3193" class="odd"><span class="lineNumber">&nbsp;3193&nbsp;</span>				enableCursor();<a name="line_3193"></a></li>
<li id="line_3194" class="even"><span class="lineNumber">&nbsp;3194&nbsp;</span>			}<a name="line_3194"></a></li>
<li id="line_3195" class="odd"><span class="lineNumber">&nbsp;3195&nbsp;</span>		});<a name="line_3195"></a></li>
<li id="line_3196" class="even"><span class="lineNumber">&nbsp;3196&nbsp;</span><a name="line_3196"></a></li>
<li id="line_3197" class="odd"><span class="lineNumber">&nbsp;3197&nbsp;</span>		dragListener.mousedown(ev);&nbsp;//&nbsp;start&nbsp;listening,&nbsp;which&nbsp;will&nbsp;eventually&nbsp;initiate&nbsp;a&nbsp;dragStart<a name="line_3197"></a></li>
<li id="line_3198" class="even"><span class="lineNumber">&nbsp;3198&nbsp;</span>	},<a name="line_3198"></a></li>
<li id="line_3199" class="odd"><span class="lineNumber">&nbsp;3199&nbsp;</span><a name="line_3199"></a></li>
<li id="line_3200" class="even"><span class="lineNumber">&nbsp;3200&nbsp;</span><a name="line_3200"></a></li>
<li id="line_3201" class="odd"><span class="lineNumber">&nbsp;3201&nbsp;</span>	/*&nbsp;Event&nbsp;Helper<a name="line_3201"></a></li>
<li id="line_3202" class="even"><span class="lineNumber">&nbsp;3202&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3202"></a></li>
<li id="line_3203" class="odd"><span class="lineNumber">&nbsp;3203&nbsp;</span>	//&nbsp;TODO:&nbsp;should&nbsp;probably&nbsp;move&nbsp;this&nbsp;to&nbsp;Grid.events,&nbsp;like&nbsp;we&nbsp;did&nbsp;event&nbsp;dragging&nbsp;/&nbsp;resizing<a name="line_3203"></a></li>
<li id="line_3204" class="even"><span class="lineNumber">&nbsp;3204&nbsp;</span><a name="line_3204"></a></li>
<li id="line_3205" class="odd"><span class="lineNumber">&nbsp;3205&nbsp;</span><a name="line_3205"></a></li>
<li id="line_3206" class="even"><span class="lineNumber">&nbsp;3206&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;mock&nbsp;event&nbsp;over&nbsp;the&nbsp;given&nbsp;range<a name="line_3206"></a></li>
<li id="line_3207" class="odd"><span class="lineNumber">&nbsp;3207&nbsp;</span>	renderRangeHelper:&nbsp;function(range,&nbsp;sourceSeg)&nbsp;{<a name="line_3207"></a></li>
<li id="line_3208" class="even"><span class="lineNumber">&nbsp;3208&nbsp;</span>		var&nbsp;fakeEvent&nbsp;=&nbsp;this.fabricateHelperEvent(range,&nbsp;sourceSeg);<a name="line_3208"></a></li>
<li id="line_3209" class="odd"><span class="lineNumber">&nbsp;3209&nbsp;</span><a name="line_3209"></a></li>
<li id="line_3210" class="even"><span class="lineNumber">&nbsp;3210&nbsp;</span>		this.renderHelper(fakeEvent,&nbsp;sourceSeg);&nbsp;//&nbsp;do&nbsp;the&nbsp;actual&nbsp;rendering<a name="line_3210"></a></li>
<li id="line_3211" class="odd"><span class="lineNumber">&nbsp;3211&nbsp;</span>	},<a name="line_3211"></a></li>
<li id="line_3212" class="even"><span class="lineNumber">&nbsp;3212&nbsp;</span><a name="line_3212"></a></li>
<li id="line_3213" class="odd"><span class="lineNumber">&nbsp;3213&nbsp;</span><a name="line_3213"></a></li>
<li id="line_3214" class="even"><span class="lineNumber">&nbsp;3214&nbsp;</span>	//&nbsp;Builds&nbsp;a&nbsp;fake&nbsp;event&nbsp;given&nbsp;a&nbsp;date&nbsp;range&nbsp;it&nbsp;should&nbsp;cover,&nbsp;and&nbsp;a&nbsp;segment&nbsp;is&nbsp;should&nbsp;be&nbsp;inspired&nbsp;from.<a name="line_3214"></a></li>
<li id="line_3215" class="odd"><span class="lineNumber">&nbsp;3215&nbsp;</span>	//&nbsp;The&nbsp;range's&nbsp;end&nbsp;can&nbsp;be&nbsp;null,&nbsp;in&nbsp;which&nbsp;case&nbsp;the&nbsp;mock&nbsp;event&nbsp;that&nbsp;is&nbsp;rendered&nbsp;will&nbsp;have&nbsp;a&nbsp;null&nbsp;end&nbsp;time.<a name="line_3215"></a></li>
<li id="line_3216" class="even"><span class="lineNumber">&nbsp;3216&nbsp;</span>	//&nbsp;`sourceSeg`&nbsp;is&nbsp;the&nbsp;internal&nbsp;segment&nbsp;object&nbsp;involved&nbsp;in&nbsp;the&nbsp;drag.&nbsp;If&nbsp;null,&nbsp;something&nbsp;external&nbsp;is&nbsp;dragging.<a name="line_3216"></a></li>
<li id="line_3217" class="odd"><span class="lineNumber">&nbsp;3217&nbsp;</span>	fabricateHelperEvent:&nbsp;function(range,&nbsp;sourceSeg)&nbsp;{<a name="line_3217"></a></li>
<li id="line_3218" class="even"><span class="lineNumber">&nbsp;3218&nbsp;</span>		var&nbsp;fakeEvent&nbsp;=&nbsp;sourceSeg&nbsp;?&nbsp;createObject(sourceSeg.event)&nbsp;:&nbsp;{};&nbsp;//&nbsp;mask&nbsp;the&nbsp;original&nbsp;event&nbsp;object&nbsp;if&nbsp;possible<a name="line_3218"></a></li>
<li id="line_3219" class="odd"><span class="lineNumber">&nbsp;3219&nbsp;</span><a name="line_3219"></a></li>
<li id="line_3220" class="even"><span class="lineNumber">&nbsp;3220&nbsp;</span>		fakeEvent.start&nbsp;=&nbsp;range.start.clone();<a name="line_3220"></a></li>
<li id="line_3221" class="odd"><span class="lineNumber">&nbsp;3221&nbsp;</span>		fakeEvent.end&nbsp;=&nbsp;range.end&nbsp;?&nbsp;range.end.clone()&nbsp;:&nbsp;null;<a name="line_3221"></a></li>
<li id="line_3222" class="even"><span class="lineNumber">&nbsp;3222&nbsp;</span>		fakeEvent.allDay&nbsp;=&nbsp;null;&nbsp;//&nbsp;force&nbsp;it&nbsp;to&nbsp;be&nbsp;freshly&nbsp;computed&nbsp;by&nbsp;normalizeEventRange<a name="line_3222"></a></li>
<li id="line_3223" class="odd"><span class="lineNumber">&nbsp;3223&nbsp;</span>		this.view.calendar.normalizeEventRange(fakeEvent);<a name="line_3223"></a></li>
<li id="line_3224" class="even"><span class="lineNumber">&nbsp;3224&nbsp;</span><a name="line_3224"></a></li>
<li id="line_3225" class="odd"><span class="lineNumber">&nbsp;3225&nbsp;</span>		//&nbsp;this&nbsp;extra&nbsp;className&nbsp;will&nbsp;be&nbsp;useful&nbsp;for&nbsp;differentiating&nbsp;real&nbsp;events&nbsp;from&nbsp;mock&nbsp;events&nbsp;in&nbsp;CSS<a name="line_3225"></a></li>
<li id="line_3226" class="even"><span class="lineNumber">&nbsp;3226&nbsp;</span>		fakeEvent.className&nbsp;=&nbsp;(fakeEvent.className&nbsp;||&nbsp;[]).concat('fc-helper');<a name="line_3226"></a></li>
<li id="line_3227" class="odd"><span class="lineNumber">&nbsp;3227&nbsp;</span><a name="line_3227"></a></li>
<li id="line_3228" class="even"><span class="lineNumber">&nbsp;3228&nbsp;</span>		//&nbsp;if&nbsp;something&nbsp;external&nbsp;is&nbsp;being&nbsp;dragged&nbsp;in,&nbsp;don't&nbsp;render&nbsp;a&nbsp;resizer<a name="line_3228"></a></li>
<li id="line_3229" class="odd"><span class="lineNumber">&nbsp;3229&nbsp;</span>		if&nbsp;(!sourceSeg)&nbsp;{<a name="line_3229"></a></li>
<li id="line_3230" class="even"><span class="lineNumber">&nbsp;3230&nbsp;</span>			fakeEvent.editable&nbsp;=&nbsp;false;<a name="line_3230"></a></li>
<li id="line_3231" class="odd"><span class="lineNumber">&nbsp;3231&nbsp;</span>		}<a name="line_3231"></a></li>
<li id="line_3232" class="even"><span class="lineNumber">&nbsp;3232&nbsp;</span><a name="line_3232"></a></li>
<li id="line_3233" class="odd"><span class="lineNumber">&nbsp;3233&nbsp;</span>		return&nbsp;fakeEvent;<a name="line_3233"></a></li>
<li id="line_3234" class="even"><span class="lineNumber">&nbsp;3234&nbsp;</span>	},<a name="line_3234"></a></li>
<li id="line_3235" class="odd"><span class="lineNumber">&nbsp;3235&nbsp;</span><a name="line_3235"></a></li>
<li id="line_3236" class="even"><span class="lineNumber">&nbsp;3236&nbsp;</span><a name="line_3236"></a></li>
<li id="line_3237" class="odd"><span class="lineNumber">&nbsp;3237&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;mock&nbsp;event<a name="line_3237"></a></li>
<li id="line_3238" class="even"><span class="lineNumber">&nbsp;3238&nbsp;</span>	renderHelper:&nbsp;function(event,&nbsp;sourceSeg)&nbsp;{<a name="line_3238"></a></li>
<li id="line_3239" class="odd"><span class="lineNumber">&nbsp;3239&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_3239"></a></li>
<li id="line_3240" class="even"><span class="lineNumber">&nbsp;3240&nbsp;</span>	},<a name="line_3240"></a></li>
<li id="line_3241" class="odd"><span class="lineNumber">&nbsp;3241&nbsp;</span><a name="line_3241"></a></li>
<li id="line_3242" class="even"><span class="lineNumber">&nbsp;3242&nbsp;</span><a name="line_3242"></a></li>
<li id="line_3243" class="odd"><span class="lineNumber">&nbsp;3243&nbsp;</span>	//&nbsp;Unrenders&nbsp;a&nbsp;mock&nbsp;event<a name="line_3243"></a></li>
<li id="line_3244" class="even"><span class="lineNumber">&nbsp;3244&nbsp;</span>	unrenderHelper:&nbsp;function()&nbsp;{<a name="line_3244"></a></li>
<li id="line_3245" class="odd"><span class="lineNumber">&nbsp;3245&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_3245"></a></li>
<li id="line_3246" class="even"><span class="lineNumber">&nbsp;3246&nbsp;</span>	},<a name="line_3246"></a></li>
<li id="line_3247" class="odd"><span class="lineNumber">&nbsp;3247&nbsp;</span><a name="line_3247"></a></li>
<li id="line_3248" class="even"><span class="lineNumber">&nbsp;3248&nbsp;</span><a name="line_3248"></a></li>
<li id="line_3249" class="odd"><span class="lineNumber">&nbsp;3249&nbsp;</span>	/*&nbsp;Selection<a name="line_3249"></a></li>
<li id="line_3250" class="even"><span class="lineNumber">&nbsp;3250&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3250"></a></li>
<li id="line_3251" class="odd"><span class="lineNumber">&nbsp;3251&nbsp;</span><a name="line_3251"></a></li>
<li id="line_3252" class="even"><span class="lineNumber">&nbsp;3252&nbsp;</span><a name="line_3252"></a></li>
<li id="line_3253" class="odd"><span class="lineNumber">&nbsp;3253&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;a&nbsp;selection.&nbsp;Will&nbsp;highlight&nbsp;by&nbsp;default&nbsp;but&nbsp;can&nbsp;be&nbsp;overridden&nbsp;by&nbsp;subclasses.<a name="line_3253"></a></li>
<li id="line_3254" class="even"><span class="lineNumber">&nbsp;3254&nbsp;</span>	renderSelection:&nbsp;function(range)&nbsp;{<a name="line_3254"></a></li>
<li id="line_3255" class="odd"><span class="lineNumber">&nbsp;3255&nbsp;</span>		this.renderHighlight(this.selectionRangeToSegs(range));<a name="line_3255"></a></li>
<li id="line_3256" class="even"><span class="lineNumber">&nbsp;3256&nbsp;</span>	},<a name="line_3256"></a></li>
<li id="line_3257" class="odd"><span class="lineNumber">&nbsp;3257&nbsp;</span><a name="line_3257"></a></li>
<li id="line_3258" class="even"><span class="lineNumber">&nbsp;3258&nbsp;</span><a name="line_3258"></a></li>
<li id="line_3259" class="odd"><span class="lineNumber">&nbsp;3259&nbsp;</span>	//&nbsp;Unrenders&nbsp;any&nbsp;visual&nbsp;indications&nbsp;of&nbsp;a&nbsp;selection.&nbsp;Will&nbsp;unrender&nbsp;a&nbsp;highlight&nbsp;by&nbsp;default.<a name="line_3259"></a></li>
<li id="line_3260" class="even"><span class="lineNumber">&nbsp;3260&nbsp;</span>	unrenderSelection:&nbsp;function()&nbsp;{<a name="line_3260"></a></li>
<li id="line_3261" class="odd"><span class="lineNumber">&nbsp;3261&nbsp;</span>		this.unrenderHighlight();<a name="line_3261"></a></li>
<li id="line_3262" class="even"><span class="lineNumber">&nbsp;3262&nbsp;</span>	},<a name="line_3262"></a></li>
<li id="line_3263" class="odd"><span class="lineNumber">&nbsp;3263&nbsp;</span><a name="line_3263"></a></li>
<li id="line_3264" class="even"><span class="lineNumber">&nbsp;3264&nbsp;</span><a name="line_3264"></a></li>
<li id="line_3265" class="odd"><span class="lineNumber">&nbsp;3265&nbsp;</span>	//&nbsp;Given&nbsp;the&nbsp;first&nbsp;and&nbsp;last&nbsp;cells&nbsp;of&nbsp;a&nbsp;selection,&nbsp;returns&nbsp;a&nbsp;range&nbsp;object.<a name="line_3265"></a></li>
<li id="line_3266" class="even"><span class="lineNumber">&nbsp;3266&nbsp;</span>	//&nbsp;Will&nbsp;return&nbsp;something&nbsp;falsy&nbsp;if&nbsp;the&nbsp;selection&nbsp;is&nbsp;invalid&nbsp;(when&nbsp;outside&nbsp;of&nbsp;selectionConstraint&nbsp;for&nbsp;example).<a name="line_3266"></a></li>
<li id="line_3267" class="odd"><span class="lineNumber">&nbsp;3267&nbsp;</span>	//&nbsp;Subclasses&nbsp;can&nbsp;override&nbsp;and&nbsp;provide&nbsp;additional&nbsp;data&nbsp;in&nbsp;the&nbsp;range&nbsp;object.&nbsp;Will&nbsp;be&nbsp;passed&nbsp;to&nbsp;renderSelection().<a name="line_3267"></a></li>
<li id="line_3268" class="even"><span class="lineNumber">&nbsp;3268&nbsp;</span>	computeSelection:&nbsp;function(firstCell,&nbsp;lastCell)&nbsp;{<a name="line_3268"></a></li>
<li id="line_3269" class="odd"><span class="lineNumber">&nbsp;3269&nbsp;</span>		var&nbsp;dates&nbsp;=&nbsp;[<a name="line_3269"></a></li>
<li id="line_3270" class="even"><span class="lineNumber">&nbsp;3270&nbsp;</span>			firstCell.start,<a name="line_3270"></a></li>
<li id="line_3271" class="odd"><span class="lineNumber">&nbsp;3271&nbsp;</span>			firstCell.end,<a name="line_3271"></a></li>
<li id="line_3272" class="even"><span class="lineNumber">&nbsp;3272&nbsp;</span>			lastCell.start,<a name="line_3272"></a></li>
<li id="line_3273" class="odd"><span class="lineNumber">&nbsp;3273&nbsp;</span>			lastCell.end<a name="line_3273"></a></li>
<li id="line_3274" class="even"><span class="lineNumber">&nbsp;3274&nbsp;</span>		];<a name="line_3274"></a></li>
<li id="line_3275" class="odd"><span class="lineNumber">&nbsp;3275&nbsp;</span>		var&nbsp;range;<a name="line_3275"></a></li>
<li id="line_3276" class="even"><span class="lineNumber">&nbsp;3276&nbsp;</span><a name="line_3276"></a></li>
<li id="line_3277" class="odd"><span class="lineNumber">&nbsp;3277&nbsp;</span>		dates.sort(compareNumbers);&nbsp;//&nbsp;sorts&nbsp;chronologically.&nbsp;works&nbsp;with&nbsp;Moments<a name="line_3277"></a></li>
<li id="line_3278" class="even"><span class="lineNumber">&nbsp;3278&nbsp;</span><a name="line_3278"></a></li>
<li id="line_3279" class="odd"><span class="lineNumber">&nbsp;3279&nbsp;</span>		range&nbsp;=&nbsp;{<a name="line_3279"></a></li>
<li id="line_3280" class="even"><span class="lineNumber">&nbsp;3280&nbsp;</span>			start:&nbsp;dates[0].clone(),<a name="line_3280"></a></li>
<li id="line_3281" class="odd"><span class="lineNumber">&nbsp;3281&nbsp;</span>			end:&nbsp;dates[3].clone()<a name="line_3281"></a></li>
<li id="line_3282" class="even"><span class="lineNumber">&nbsp;3282&nbsp;</span>		};<a name="line_3282"></a></li>
<li id="line_3283" class="odd"><span class="lineNumber">&nbsp;3283&nbsp;</span><a name="line_3283"></a></li>
<li id="line_3284" class="even"><span class="lineNumber">&nbsp;3284&nbsp;</span>		if&nbsp;(!this.view.calendar.isSelectionRangeAllowed(range))&nbsp;{<a name="line_3284"></a></li>
<li id="line_3285" class="odd"><span class="lineNumber">&nbsp;3285&nbsp;</span>			return&nbsp;null;<a name="line_3285"></a></li>
<li id="line_3286" class="even"><span class="lineNumber">&nbsp;3286&nbsp;</span>		}<a name="line_3286"></a></li>
<li id="line_3287" class="odd"><span class="lineNumber">&nbsp;3287&nbsp;</span><a name="line_3287"></a></li>
<li id="line_3288" class="even"><span class="lineNumber">&nbsp;3288&nbsp;</span>		return&nbsp;range;<a name="line_3288"></a></li>
<li id="line_3289" class="odd"><span class="lineNumber">&nbsp;3289&nbsp;</span>	},<a name="line_3289"></a></li>
<li id="line_3290" class="even"><span class="lineNumber">&nbsp;3290&nbsp;</span><a name="line_3290"></a></li>
<li id="line_3291" class="odd"><span class="lineNumber">&nbsp;3291&nbsp;</span><a name="line_3291"></a></li>
<li id="line_3292" class="even"><span class="lineNumber">&nbsp;3292&nbsp;</span>	selectionRangeToSegs:&nbsp;function(range)&nbsp;{<a name="line_3292"></a></li>
<li id="line_3293" class="odd"><span class="lineNumber">&nbsp;3293&nbsp;</span>		return&nbsp;this.rangeToSegs(range);<a name="line_3293"></a></li>
<li id="line_3294" class="even"><span class="lineNumber">&nbsp;3294&nbsp;</span>	},<a name="line_3294"></a></li>
<li id="line_3295" class="odd"><span class="lineNumber">&nbsp;3295&nbsp;</span><a name="line_3295"></a></li>
<li id="line_3296" class="even"><span class="lineNumber">&nbsp;3296&nbsp;</span><a name="line_3296"></a></li>
<li id="line_3297" class="odd"><span class="lineNumber">&nbsp;3297&nbsp;</span>	/*&nbsp;Highlight<a name="line_3297"></a></li>
<li id="line_3298" class="even"><span class="lineNumber">&nbsp;3298&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3298"></a></li>
<li id="line_3299" class="odd"><span class="lineNumber">&nbsp;3299&nbsp;</span><a name="line_3299"></a></li>
<li id="line_3300" class="even"><span class="lineNumber">&nbsp;3300&nbsp;</span><a name="line_3300"></a></li>
<li id="line_3301" class="odd"><span class="lineNumber">&nbsp;3301&nbsp;</span>	//&nbsp;Renders&nbsp;an&nbsp;emphasis&nbsp;on&nbsp;the&nbsp;given&nbsp;date&nbsp;range.&nbsp;Given&nbsp;an&nbsp;array&nbsp;of&nbsp;segments.<a name="line_3301"></a></li>
<li id="line_3302" class="even"><span class="lineNumber">&nbsp;3302&nbsp;</span>	renderHighlight:&nbsp;function(segs)&nbsp;{<a name="line_3302"></a></li>
<li id="line_3303" class="odd"><span class="lineNumber">&nbsp;3303&nbsp;</span>		this.renderFill('highlight',&nbsp;segs);<a name="line_3303"></a></li>
<li id="line_3304" class="even"><span class="lineNumber">&nbsp;3304&nbsp;</span>	},<a name="line_3304"></a></li>
<li id="line_3305" class="odd"><span class="lineNumber">&nbsp;3305&nbsp;</span><a name="line_3305"></a></li>
<li id="line_3306" class="even"><span class="lineNumber">&nbsp;3306&nbsp;</span><a name="line_3306"></a></li>
<li id="line_3307" class="odd"><span class="lineNumber">&nbsp;3307&nbsp;</span>	//&nbsp;Unrenders&nbsp;the&nbsp;emphasis&nbsp;on&nbsp;a&nbsp;date&nbsp;range<a name="line_3307"></a></li>
<li id="line_3308" class="even"><span class="lineNumber">&nbsp;3308&nbsp;</span>	unrenderHighlight:&nbsp;function()&nbsp;{<a name="line_3308"></a></li>
<li id="line_3309" class="odd"><span class="lineNumber">&nbsp;3309&nbsp;</span>		this.unrenderFill('highlight');<a name="line_3309"></a></li>
<li id="line_3310" class="even"><span class="lineNumber">&nbsp;3310&nbsp;</span>	},<a name="line_3310"></a></li>
<li id="line_3311" class="odd"><span class="lineNumber">&nbsp;3311&nbsp;</span><a name="line_3311"></a></li>
<li id="line_3312" class="even"><span class="lineNumber">&nbsp;3312&nbsp;</span><a name="line_3312"></a></li>
<li id="line_3313" class="odd"><span class="lineNumber">&nbsp;3313&nbsp;</span>	//&nbsp;Generates&nbsp;an&nbsp;array&nbsp;of&nbsp;classNames&nbsp;for&nbsp;rendering&nbsp;the&nbsp;highlight.&nbsp;Used&nbsp;by&nbsp;the&nbsp;fill&nbsp;system.<a name="line_3313"></a></li>
<li id="line_3314" class="even"><span class="lineNumber">&nbsp;3314&nbsp;</span>	highlightSegClasses:&nbsp;function()&nbsp;{<a name="line_3314"></a></li>
<li id="line_3315" class="odd"><span class="lineNumber">&nbsp;3315&nbsp;</span>		return&nbsp;[&nbsp;'fc-highlight'&nbsp;];<a name="line_3315"></a></li>
<li id="line_3316" class="even"><span class="lineNumber">&nbsp;3316&nbsp;</span>	},<a name="line_3316"></a></li>
<li id="line_3317" class="odd"><span class="lineNumber">&nbsp;3317&nbsp;</span><a name="line_3317"></a></li>
<li id="line_3318" class="even"><span class="lineNumber">&nbsp;3318&nbsp;</span><a name="line_3318"></a></li>
<li id="line_3319" class="odd"><span class="lineNumber">&nbsp;3319&nbsp;</span>	/*&nbsp;Fill&nbsp;System&nbsp;(highlight,&nbsp;background&nbsp;events,&nbsp;business&nbsp;hours)<a name="line_3319"></a></li>
<li id="line_3320" class="even"><span class="lineNumber">&nbsp;3320&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3320"></a></li>
<li id="line_3321" class="odd"><span class="lineNumber">&nbsp;3321&nbsp;</span><a name="line_3321"></a></li>
<li id="line_3322" class="even"><span class="lineNumber">&nbsp;3322&nbsp;</span><a name="line_3322"></a></li>
<li id="line_3323" class="odd"><span class="lineNumber">&nbsp;3323&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;set&nbsp;of&nbsp;rectangles&nbsp;over&nbsp;the&nbsp;given&nbsp;segments&nbsp;of&nbsp;time.<a name="line_3323"></a></li>
<li id="line_3324" class="even"><span class="lineNumber">&nbsp;3324&nbsp;</span>	//&nbsp;MUST&nbsp;RETURN&nbsp;a&nbsp;subset&nbsp;of&nbsp;segs,&nbsp;the&nbsp;segs&nbsp;that&nbsp;were&nbsp;actually&nbsp;rendered.<a name="line_3324"></a></li>
<li id="line_3325" class="odd"><span class="lineNumber">&nbsp;3325&nbsp;</span>	//&nbsp;Responsible&nbsp;for&nbsp;populating&nbsp;this.elsByFill.&nbsp;TODO:&nbsp;better&nbsp;API&nbsp;for&nbsp;expressing&nbsp;this&nbsp;requirement<a name="line_3325"></a></li>
<li id="line_3326" class="even"><span class="lineNumber">&nbsp;3326&nbsp;</span>	renderFill:&nbsp;function(type,&nbsp;segs)&nbsp;{<a name="line_3326"></a></li>
<li id="line_3327" class="odd"><span class="lineNumber">&nbsp;3327&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_3327"></a></li>
<li id="line_3328" class="even"><span class="lineNumber">&nbsp;3328&nbsp;</span>	},<a name="line_3328"></a></li>
<li id="line_3329" class="odd"><span class="lineNumber">&nbsp;3329&nbsp;</span><a name="line_3329"></a></li>
<li id="line_3330" class="even"><span class="lineNumber">&nbsp;3330&nbsp;</span><a name="line_3330"></a></li>
<li id="line_3331" class="odd"><span class="lineNumber">&nbsp;3331&nbsp;</span>	//&nbsp;Unrenders&nbsp;a&nbsp;specific&nbsp;type&nbsp;of&nbsp;fill&nbsp;that&nbsp;is&nbsp;currently&nbsp;rendered&nbsp;on&nbsp;the&nbsp;grid<a name="line_3331"></a></li>
<li id="line_3332" class="even"><span class="lineNumber">&nbsp;3332&nbsp;</span>	unrenderFill:&nbsp;function(type)&nbsp;{<a name="line_3332"></a></li>
<li id="line_3333" class="odd"><span class="lineNumber">&nbsp;3333&nbsp;</span>		var&nbsp;el&nbsp;=&nbsp;this.elsByFill[type];<a name="line_3333"></a></li>
<li id="line_3334" class="even"><span class="lineNumber">&nbsp;3334&nbsp;</span><a name="line_3334"></a></li>
<li id="line_3335" class="odd"><span class="lineNumber">&nbsp;3335&nbsp;</span>		if&nbsp;(el)&nbsp;{<a name="line_3335"></a></li>
<li id="line_3336" class="even"><span class="lineNumber">&nbsp;3336&nbsp;</span>			el.remove();<a name="line_3336"></a></li>
<li id="line_3337" class="odd"><span class="lineNumber">&nbsp;3337&nbsp;</span>			delete&nbsp;this.elsByFill[type];<a name="line_3337"></a></li>
<li id="line_3338" class="even"><span class="lineNumber">&nbsp;3338&nbsp;</span>		}<a name="line_3338"></a></li>
<li id="line_3339" class="odd"><span class="lineNumber">&nbsp;3339&nbsp;</span>	},<a name="line_3339"></a></li>
<li id="line_3340" class="even"><span class="lineNumber">&nbsp;3340&nbsp;</span><a name="line_3340"></a></li>
<li id="line_3341" class="odd"><span class="lineNumber">&nbsp;3341&nbsp;</span><a name="line_3341"></a></li>
<li id="line_3342" class="even"><span class="lineNumber">&nbsp;3342&nbsp;</span>	//&nbsp;Renders&nbsp;and&nbsp;assigns&nbsp;an&nbsp;`el`&nbsp;property&nbsp;for&nbsp;each&nbsp;fill&nbsp;segment.&nbsp;Generic&nbsp;enough&nbsp;to&nbsp;work&nbsp;with&nbsp;different&nbsp;types.<a name="line_3342"></a></li>
<li id="line_3343" class="odd"><span class="lineNumber">&nbsp;3343&nbsp;</span>	//&nbsp;Only&nbsp;returns&nbsp;segments&nbsp;that&nbsp;successfully&nbsp;rendered.<a name="line_3343"></a></li>
<li id="line_3344" class="even"><span class="lineNumber">&nbsp;3344&nbsp;</span>	//&nbsp;To&nbsp;be&nbsp;harnessed&nbsp;by&nbsp;renderFill&nbsp;(implemented&nbsp;by&nbsp;subclasses).<a name="line_3344"></a></li>
<li id="line_3345" class="odd"><span class="lineNumber">&nbsp;3345&nbsp;</span>	//&nbsp;Analagous&nbsp;to&nbsp;renderFgSegEls.<a name="line_3345"></a></li>
<li id="line_3346" class="even"><span class="lineNumber">&nbsp;3346&nbsp;</span>	renderFillSegEls:&nbsp;function(type,&nbsp;segs)&nbsp;{<a name="line_3346"></a></li>
<li id="line_3347" class="odd"><span class="lineNumber">&nbsp;3347&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_3347"></a></li>
<li id="line_3348" class="even"><span class="lineNumber">&nbsp;3348&nbsp;</span>		var&nbsp;segElMethod&nbsp;=&nbsp;this[type&nbsp;+&nbsp;'SegEl'];<a name="line_3348"></a></li>
<li id="line_3349" class="odd"><span class="lineNumber">&nbsp;3349&nbsp;</span>		var&nbsp;html&nbsp;=&nbsp;'';<a name="line_3349"></a></li>
<li id="line_3350" class="even"><span class="lineNumber">&nbsp;3350&nbsp;</span>		var&nbsp;renderedSegs&nbsp;=&nbsp;[];<a name="line_3350"></a></li>
<li id="line_3351" class="odd"><span class="lineNumber">&nbsp;3351&nbsp;</span>		var&nbsp;i;<a name="line_3351"></a></li>
<li id="line_3352" class="even"><span class="lineNumber">&nbsp;3352&nbsp;</span><a name="line_3352"></a></li>
<li id="line_3353" class="odd"><span class="lineNumber">&nbsp;3353&nbsp;</span>		if&nbsp;(segs.length)&nbsp;{<a name="line_3353"></a></li>
<li id="line_3354" class="even"><span class="lineNumber">&nbsp;3354&nbsp;</span><a name="line_3354"></a></li>
<li id="line_3355" class="odd"><span class="lineNumber">&nbsp;3355&nbsp;</span>			//&nbsp;build&nbsp;a&nbsp;large&nbsp;concatenation&nbsp;of&nbsp;segment&nbsp;HTML<a name="line_3355"></a></li>
<li id="line_3356" class="even"><span class="lineNumber">&nbsp;3356&nbsp;</span>			for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;segs.length;&nbsp;i++)&nbsp;{<a name="line_3356"></a></li>
<li id="line_3357" class="odd"><span class="lineNumber">&nbsp;3357&nbsp;</span>				html&nbsp;+=&nbsp;this.fillSegHtml(type,&nbsp;segs[i]);<a name="line_3357"></a></li>
<li id="line_3358" class="even"><span class="lineNumber">&nbsp;3358&nbsp;</span>			}<a name="line_3358"></a></li>
<li id="line_3359" class="odd"><span class="lineNumber">&nbsp;3359&nbsp;</span><a name="line_3359"></a></li>
<li id="line_3360" class="even"><span class="lineNumber">&nbsp;3360&nbsp;</span>			//&nbsp;Grab&nbsp;individual&nbsp;elements&nbsp;from&nbsp;the&nbsp;combined&nbsp;HTML&nbsp;string.&nbsp;Use&nbsp;each&nbsp;as&nbsp;the&nbsp;default&nbsp;rendering.<a name="line_3360"></a></li>
<li id="line_3361" class="odd"><span class="lineNumber">&nbsp;3361&nbsp;</span>			//&nbsp;Then,&nbsp;compute&nbsp;the&nbsp;'el'&nbsp;for&nbsp;each&nbsp;segment.<a name="line_3361"></a></li>
<li id="line_3362" class="even"><span class="lineNumber">&nbsp;3362&nbsp;</span>			$(html).each(function(i,&nbsp;node)&nbsp;{<a name="line_3362"></a></li>
<li id="line_3363" class="odd"><span class="lineNumber">&nbsp;3363&nbsp;</span>				var&nbsp;seg&nbsp;=&nbsp;segs[i];<a name="line_3363"></a></li>
<li id="line_3364" class="even"><span class="lineNumber">&nbsp;3364&nbsp;</span>				var&nbsp;el&nbsp;=&nbsp;$(node);<a name="line_3364"></a></li>
<li id="line_3365" class="odd"><span class="lineNumber">&nbsp;3365&nbsp;</span><a name="line_3365"></a></li>
<li id="line_3366" class="even"><span class="lineNumber">&nbsp;3366&nbsp;</span>				//&nbsp;allow&nbsp;custom&nbsp;filter&nbsp;methods&nbsp;per-type<a name="line_3366"></a></li>
<li id="line_3367" class="odd"><span class="lineNumber">&nbsp;3367&nbsp;</span>				if&nbsp;(segElMethod)&nbsp;{<a name="line_3367"></a></li>
<li id="line_3368" class="even"><span class="lineNumber">&nbsp;3368&nbsp;</span>					el&nbsp;=&nbsp;segElMethod.call(_this,&nbsp;seg,&nbsp;el);<a name="line_3368"></a></li>
<li id="line_3369" class="odd"><span class="lineNumber">&nbsp;3369&nbsp;</span>				}<a name="line_3369"></a></li>
<li id="line_3370" class="even"><span class="lineNumber">&nbsp;3370&nbsp;</span><a name="line_3370"></a></li>
<li id="line_3371" class="odd"><span class="lineNumber">&nbsp;3371&nbsp;</span>				if&nbsp;(el)&nbsp;{&nbsp;//&nbsp;custom&nbsp;filters&nbsp;did&nbsp;not&nbsp;cancel&nbsp;the&nbsp;render<a name="line_3371"></a></li>
<li id="line_3372" class="even"><span class="lineNumber">&nbsp;3372&nbsp;</span>					el&nbsp;=&nbsp;$(el);&nbsp;//&nbsp;allow&nbsp;custom&nbsp;filter&nbsp;to&nbsp;return&nbsp;raw&nbsp;DOM&nbsp;node<a name="line_3372"></a></li>
<li id="line_3373" class="odd"><span class="lineNumber">&nbsp;3373&nbsp;</span><a name="line_3373"></a></li>
<li id="line_3374" class="even"><span class="lineNumber">&nbsp;3374&nbsp;</span>					//&nbsp;correct&nbsp;element&nbsp;type?&nbsp;(would&nbsp;be&nbsp;bad&nbsp;if&nbsp;a&nbsp;non-TD&nbsp;were&nbsp;inserted&nbsp;into&nbsp;a&nbsp;table&nbsp;for&nbsp;example)<a name="line_3374"></a></li>
<li id="line_3375" class="odd"><span class="lineNumber">&nbsp;3375&nbsp;</span>					if&nbsp;(el.is(_this.fillSegTag))&nbsp;{<a name="line_3375"></a></li>
<li id="line_3376" class="even"><span class="lineNumber">&nbsp;3376&nbsp;</span>						seg.el&nbsp;=&nbsp;el;<a name="line_3376"></a></li>
<li id="line_3377" class="odd"><span class="lineNumber">&nbsp;3377&nbsp;</span>						renderedSegs.push(seg);<a name="line_3377"></a></li>
<li id="line_3378" class="even"><span class="lineNumber">&nbsp;3378&nbsp;</span>					}<a name="line_3378"></a></li>
<li id="line_3379" class="odd"><span class="lineNumber">&nbsp;3379&nbsp;</span>				}<a name="line_3379"></a></li>
<li id="line_3380" class="even"><span class="lineNumber">&nbsp;3380&nbsp;</span>			});<a name="line_3380"></a></li>
<li id="line_3381" class="odd"><span class="lineNumber">&nbsp;3381&nbsp;</span>		}<a name="line_3381"></a></li>
<li id="line_3382" class="even"><span class="lineNumber">&nbsp;3382&nbsp;</span><a name="line_3382"></a></li>
<li id="line_3383" class="odd"><span class="lineNumber">&nbsp;3383&nbsp;</span>		return&nbsp;renderedSegs;<a name="line_3383"></a></li>
<li id="line_3384" class="even"><span class="lineNumber">&nbsp;3384&nbsp;</span>	},<a name="line_3384"></a></li>
<li id="line_3385" class="odd"><span class="lineNumber">&nbsp;3385&nbsp;</span><a name="line_3385"></a></li>
<li id="line_3386" class="even"><span class="lineNumber">&nbsp;3386&nbsp;</span><a name="line_3386"></a></li>
<li id="line_3387" class="odd"><span class="lineNumber">&nbsp;3387&nbsp;</span>	fillSegTag:&nbsp;'div',&nbsp;//&nbsp;subclasses&nbsp;can&nbsp;override<a name="line_3387"></a></li>
<li id="line_3388" class="even"><span class="lineNumber">&nbsp;3388&nbsp;</span><a name="line_3388"></a></li>
<li id="line_3389" class="odd"><span class="lineNumber">&nbsp;3389&nbsp;</span><a name="line_3389"></a></li>
<li id="line_3390" class="even"><span class="lineNumber">&nbsp;3390&nbsp;</span>	//&nbsp;Builds&nbsp;the&nbsp;HTML&nbsp;needed&nbsp;for&nbsp;one&nbsp;fill&nbsp;segment.&nbsp;Generic&nbsp;enought&nbsp;o&nbsp;work&nbsp;with&nbsp;different&nbsp;types.<a name="line_3390"></a></li>
<li id="line_3391" class="odd"><span class="lineNumber">&nbsp;3391&nbsp;</span>	fillSegHtml:&nbsp;function(type,&nbsp;seg)&nbsp;{<a name="line_3391"></a></li>
<li id="line_3392" class="even"><span class="lineNumber">&nbsp;3392&nbsp;</span><a name="line_3392"></a></li>
<li id="line_3393" class="odd"><span class="lineNumber">&nbsp;3393&nbsp;</span>		//&nbsp;custom&nbsp;hooks&nbsp;per-type<a name="line_3393"></a></li>
<li id="line_3394" class="even"><span class="lineNumber">&nbsp;3394&nbsp;</span>		var&nbsp;classesMethod&nbsp;=&nbsp;this[type&nbsp;+&nbsp;'SegClasses'];<a name="line_3394"></a></li>
<li id="line_3395" class="odd"><span class="lineNumber">&nbsp;3395&nbsp;</span>		var&nbsp;cssMethod&nbsp;=&nbsp;this[type&nbsp;+&nbsp;'SegCss'];<a name="line_3395"></a></li>
<li id="line_3396" class="even"><span class="lineNumber">&nbsp;3396&nbsp;</span><a name="line_3396"></a></li>
<li id="line_3397" class="odd"><span class="lineNumber">&nbsp;3397&nbsp;</span>		var&nbsp;classes&nbsp;=&nbsp;classesMethod&nbsp;?&nbsp;classesMethod.call(this,&nbsp;seg)&nbsp;:&nbsp;[];<a name="line_3397"></a></li>
<li id="line_3398" class="even"><span class="lineNumber">&nbsp;3398&nbsp;</span>		var&nbsp;css&nbsp;=&nbsp;cssToStr(cssMethod&nbsp;?&nbsp;cssMethod.call(this,&nbsp;seg)&nbsp;:&nbsp;{});<a name="line_3398"></a></li>
<li id="line_3399" class="odd"><span class="lineNumber">&nbsp;3399&nbsp;</span><a name="line_3399"></a></li>
<li id="line_3400" class="even"><span class="lineNumber">&nbsp;3400&nbsp;</span>		return&nbsp;'&lt;'&nbsp;+&nbsp;this.fillSegTag&nbsp;+<a name="line_3400"></a></li>
<li id="line_3401" class="odd"><span class="lineNumber">&nbsp;3401&nbsp;</span>			(classes.length&nbsp;?&nbsp;'&nbsp;class="'&nbsp;+&nbsp;classes.join('&nbsp;')&nbsp;+&nbsp;'"'&nbsp;:&nbsp;'')&nbsp;+<a name="line_3401"></a></li>
<li id="line_3402" class="even"><span class="lineNumber">&nbsp;3402&nbsp;</span>			(css&nbsp;?&nbsp;'&nbsp;style="'&nbsp;+&nbsp;css&nbsp;+&nbsp;'"'&nbsp;:&nbsp;'')&nbsp;+<a name="line_3402"></a></li>
<li id="line_3403" class="odd"><span class="lineNumber">&nbsp;3403&nbsp;</span>			'&nbsp;/&gt;';<a name="line_3403"></a></li>
<li id="line_3404" class="even"><span class="lineNumber">&nbsp;3404&nbsp;</span>	},<a name="line_3404"></a></li>
<li id="line_3405" class="odd"><span class="lineNumber">&nbsp;3405&nbsp;</span><a name="line_3405"></a></li>
<li id="line_3406" class="even"><span class="lineNumber">&nbsp;3406&nbsp;</span><a name="line_3406"></a></li>
<li id="line_3407" class="odd"><span class="lineNumber">&nbsp;3407&nbsp;</span>	/*&nbsp;Generic&nbsp;rendering&nbsp;utilities&nbsp;for&nbsp;subclasses<a name="line_3407"></a></li>
<li id="line_3408" class="even"><span class="lineNumber">&nbsp;3408&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3408"></a></li>
<li id="line_3409" class="odd"><span class="lineNumber">&nbsp;3409&nbsp;</span><a name="line_3409"></a></li>
<li id="line_3410" class="even"><span class="lineNumber">&nbsp;3410&nbsp;</span><a name="line_3410"></a></li>
<li id="line_3411" class="odd"><span class="lineNumber">&nbsp;3411&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;day-of-week&nbsp;header&nbsp;row.<a name="line_3411"></a></li>
<li id="line_3412" class="even"><span class="lineNumber">&nbsp;3412&nbsp;</span>	//&nbsp;TODO:&nbsp;move&nbsp;to&nbsp;another&nbsp;class.&nbsp;not&nbsp;applicable&nbsp;to&nbsp;all&nbsp;Grids<a name="line_3412"></a></li>
<li id="line_3413" class="odd"><span class="lineNumber">&nbsp;3413&nbsp;</span>	headHtml:&nbsp;function()&nbsp;{<a name="line_3413"></a></li>
<li id="line_3414" class="even"><span class="lineNumber">&nbsp;3414&nbsp;</span>		return&nbsp;''&nbsp;+<a name="line_3414"></a></li>
<li id="line_3415" class="odd"><span class="lineNumber">&nbsp;3415&nbsp;</span>			'&lt;div&nbsp;class="fc-row&nbsp;'&nbsp;+&nbsp;this.view.widgetHeaderClass&nbsp;+&nbsp;'"&gt;'&nbsp;+<a name="line_3415"></a></li>
<li id="line_3416" class="even"><span class="lineNumber">&nbsp;3416&nbsp;</span>				'&lt;table&gt;'&nbsp;+<a name="line_3416"></a></li>
<li id="line_3417" class="odd"><span class="lineNumber">&nbsp;3417&nbsp;</span>					'&lt;thead&gt;'&nbsp;+<a name="line_3417"></a></li>
<li id="line_3418" class="even"><span class="lineNumber">&nbsp;3418&nbsp;</span>						this.rowHtml('head')&nbsp;+&nbsp;//&nbsp;leverages&nbsp;RowRenderer<a name="line_3418"></a></li>
<li id="line_3419" class="odd"><span class="lineNumber">&nbsp;3419&nbsp;</span>					'&lt;/thead&gt;'&nbsp;+<a name="line_3419"></a></li>
<li id="line_3420" class="even"><span class="lineNumber">&nbsp;3420&nbsp;</span>				'&lt;/table&gt;'&nbsp;+<a name="line_3420"></a></li>
<li id="line_3421" class="odd"><span class="lineNumber">&nbsp;3421&nbsp;</span>			'&lt;/div&gt;';<a name="line_3421"></a></li>
<li id="line_3422" class="even"><span class="lineNumber">&nbsp;3422&nbsp;</span>	},<a name="line_3422"></a></li>
<li id="line_3423" class="odd"><span class="lineNumber">&nbsp;3423&nbsp;</span><a name="line_3423"></a></li>
<li id="line_3424" class="even"><span class="lineNumber">&nbsp;3424&nbsp;</span><a name="line_3424"></a></li>
<li id="line_3425" class="odd"><span class="lineNumber">&nbsp;3425&nbsp;</span>	//&nbsp;Used&nbsp;by&nbsp;the&nbsp;`headHtml`&nbsp;method,&nbsp;via&nbsp;RowRenderer,&nbsp;for&nbsp;rendering&nbsp;the&nbsp;HTML&nbsp;of&nbsp;a&nbsp;day-of-week&nbsp;header&nbsp;cell<a name="line_3425"></a></li>
<li id="line_3426" class="even"><span class="lineNumber">&nbsp;3426&nbsp;</span>	//&nbsp;TODO:&nbsp;move&nbsp;to&nbsp;another&nbsp;class.&nbsp;not&nbsp;applicable&nbsp;to&nbsp;all&nbsp;Grids<a name="line_3426"></a></li>
<li id="line_3427" class="odd"><span class="lineNumber">&nbsp;3427&nbsp;</span>	headCellHtml:&nbsp;function(cell)&nbsp;{<a name="line_3427"></a></li>
<li id="line_3428" class="even"><span class="lineNumber">&nbsp;3428&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_3428"></a></li>
<li id="line_3429" class="odd"><span class="lineNumber">&nbsp;3429&nbsp;</span>		var&nbsp;date&nbsp;=&nbsp;cell.start;<a name="line_3429"></a></li>
<li id="line_3430" class="even"><span class="lineNumber">&nbsp;3430&nbsp;</span><a name="line_3430"></a></li>
<li id="line_3431" class="odd"><span class="lineNumber">&nbsp;3431&nbsp;</span>		return&nbsp;''&nbsp;+<a name="line_3431"></a></li>
<li id="line_3432" class="even"><span class="lineNumber">&nbsp;3432&nbsp;</span>			'&lt;th&nbsp;class="fc-day-header&nbsp;'&nbsp;+&nbsp;view.widgetHeaderClass&nbsp;+&nbsp;'&nbsp;fc-'&nbsp;+&nbsp;dayIDs[date.day()]&nbsp;+&nbsp;'"&gt;'&nbsp;+<a name="line_3432"></a></li>
<li id="line_3433" class="odd"><span class="lineNumber">&nbsp;3433&nbsp;</span>				htmlEscape(date.format(this.colHeadFormat))&nbsp;+<a name="line_3433"></a></li>
<li id="line_3434" class="even"><span class="lineNumber">&nbsp;3434&nbsp;</span>			'&lt;/th&gt;';<a name="line_3434"></a></li>
<li id="line_3435" class="odd"><span class="lineNumber">&nbsp;3435&nbsp;</span>	},<a name="line_3435"></a></li>
<li id="line_3436" class="even"><span class="lineNumber">&nbsp;3436&nbsp;</span><a name="line_3436"></a></li>
<li id="line_3437" class="odd"><span class="lineNumber">&nbsp;3437&nbsp;</span><a name="line_3437"></a></li>
<li id="line_3438" class="even"><span class="lineNumber">&nbsp;3438&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;HTML&nbsp;for&nbsp;a&nbsp;single-day&nbsp;background&nbsp;cell<a name="line_3438"></a></li>
<li id="line_3439" class="odd"><span class="lineNumber">&nbsp;3439&nbsp;</span>	bgCellHtml:&nbsp;function(cell)&nbsp;{<a name="line_3439"></a></li>
<li id="line_3440" class="even"><span class="lineNumber">&nbsp;3440&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_3440"></a></li>
<li id="line_3441" class="odd"><span class="lineNumber">&nbsp;3441&nbsp;</span>		var&nbsp;date&nbsp;=&nbsp;cell.start;<a name="line_3441"></a></li>
<li id="line_3442" class="even"><span class="lineNumber">&nbsp;3442&nbsp;</span>		var&nbsp;classes&nbsp;=&nbsp;this.getDayClasses(date);<a name="line_3442"></a></li>
<li id="line_3443" class="odd"><span class="lineNumber">&nbsp;3443&nbsp;</span><a name="line_3443"></a></li>
<li id="line_3444" class="even"><span class="lineNumber">&nbsp;3444&nbsp;</span>		classes.unshift('fc-day',&nbsp;view.widgetContentClass);<a name="line_3444"></a></li>
<li id="line_3445" class="odd"><span class="lineNumber">&nbsp;3445&nbsp;</span><a name="line_3445"></a></li>
<li id="line_3446" class="even"><span class="lineNumber">&nbsp;3446&nbsp;</span>		return&nbsp;'&lt;td&nbsp;class="'&nbsp;+&nbsp;classes.join('&nbsp;')&nbsp;+&nbsp;'"'&nbsp;+<a name="line_3446"></a></li>
<li id="line_3447" class="odd"><span class="lineNumber">&nbsp;3447&nbsp;</span>			'&nbsp;data-date="'&nbsp;+&nbsp;date.format('YYYY-MM-DD')&nbsp;+&nbsp;'"'&nbsp;+&nbsp;//&nbsp;if&nbsp;date&nbsp;has&nbsp;a&nbsp;time,&nbsp;won't&nbsp;format&nbsp;it<a name="line_3447"></a></li>
<li id="line_3448" class="even"><span class="lineNumber">&nbsp;3448&nbsp;</span>			'&gt;&lt;/td&gt;';<a name="line_3448"></a></li>
<li id="line_3449" class="odd"><span class="lineNumber">&nbsp;3449&nbsp;</span>	},<a name="line_3449"></a></li>
<li id="line_3450" class="even"><span class="lineNumber">&nbsp;3450&nbsp;</span><a name="line_3450"></a></li>
<li id="line_3451" class="odd"><span class="lineNumber">&nbsp;3451&nbsp;</span><a name="line_3451"></a></li>
<li id="line_3452" class="even"><span class="lineNumber">&nbsp;3452&nbsp;</span>	//&nbsp;Computes&nbsp;HTML&nbsp;classNames&nbsp;for&nbsp;a&nbsp;single-day&nbsp;cell<a name="line_3452"></a></li>
<li id="line_3453" class="odd"><span class="lineNumber">&nbsp;3453&nbsp;</span>	getDayClasses:&nbsp;function(date)&nbsp;{<a name="line_3453"></a></li>
<li id="line_3454" class="even"><span class="lineNumber">&nbsp;3454&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_3454"></a></li>
<li id="line_3455" class="odd"><span class="lineNumber">&nbsp;3455&nbsp;</span>		var&nbsp;today&nbsp;=&nbsp;view.calendar.getNow().stripTime();<a name="line_3455"></a></li>
<li id="line_3456" class="even"><span class="lineNumber">&nbsp;3456&nbsp;</span>		var&nbsp;classes&nbsp;=&nbsp;[&nbsp;'fc-'&nbsp;+&nbsp;dayIDs[date.day()]&nbsp;];<a name="line_3456"></a></li>
<li id="line_3457" class="odd"><span class="lineNumber">&nbsp;3457&nbsp;</span><a name="line_3457"></a></li>
<li id="line_3458" class="even"><span class="lineNumber">&nbsp;3458&nbsp;</span>		if&nbsp;(<a name="line_3458"></a></li>
<li id="line_3459" class="odd"><span class="lineNumber">&nbsp;3459&nbsp;</span>			view.intervalDuration.as('months')&nbsp;==&nbsp;1&nbsp;&amp;&amp;<a name="line_3459"></a></li>
<li id="line_3460" class="even"><span class="lineNumber">&nbsp;3460&nbsp;</span>			date.month()&nbsp;!=&nbsp;view.intervalStart.month()<a name="line_3460"></a></li>
<li id="line_3461" class="odd"><span class="lineNumber">&nbsp;3461&nbsp;</span>		)&nbsp;{<a name="line_3461"></a></li>
<li id="line_3462" class="even"><span class="lineNumber">&nbsp;3462&nbsp;</span>			classes.push('fc-other-month');<a name="line_3462"></a></li>
<li id="line_3463" class="odd"><span class="lineNumber">&nbsp;3463&nbsp;</span>		}<a name="line_3463"></a></li>
<li id="line_3464" class="even"><span class="lineNumber">&nbsp;3464&nbsp;</span><a name="line_3464"></a></li>
<li id="line_3465" class="odd"><span class="lineNumber">&nbsp;3465&nbsp;</span>		if&nbsp;(date.isSame(today,&nbsp;'day'))&nbsp;{<a name="line_3465"></a></li>
<li id="line_3466" class="even"><span class="lineNumber">&nbsp;3466&nbsp;</span>			classes.push(<a name="line_3466"></a></li>
<li id="line_3467" class="odd"><span class="lineNumber">&nbsp;3467&nbsp;</span>				'fc-today',<a name="line_3467"></a></li>
<li id="line_3468" class="even"><span class="lineNumber">&nbsp;3468&nbsp;</span>				view.highlightStateClass<a name="line_3468"></a></li>
<li id="line_3469" class="odd"><span class="lineNumber">&nbsp;3469&nbsp;</span>			);<a name="line_3469"></a></li>
<li id="line_3470" class="even"><span class="lineNumber">&nbsp;3470&nbsp;</span>		}<a name="line_3470"></a></li>
<li id="line_3471" class="odd"><span class="lineNumber">&nbsp;3471&nbsp;</span>		else&nbsp;if&nbsp;(date&nbsp;&lt;&nbsp;today)&nbsp;{<a name="line_3471"></a></li>
<li id="line_3472" class="even"><span class="lineNumber">&nbsp;3472&nbsp;</span>			classes.push('fc-past');<a name="line_3472"></a></li>
<li id="line_3473" class="odd"><span class="lineNumber">&nbsp;3473&nbsp;</span>		}<a name="line_3473"></a></li>
<li id="line_3474" class="even"><span class="lineNumber">&nbsp;3474&nbsp;</span>		else&nbsp;{<a name="line_3474"></a></li>
<li id="line_3475" class="odd"><span class="lineNumber">&nbsp;3475&nbsp;</span>			classes.push('fc-future');<a name="line_3475"></a></li>
<li id="line_3476" class="even"><span class="lineNumber">&nbsp;3476&nbsp;</span>		}<a name="line_3476"></a></li>
<li id="line_3477" class="odd"><span class="lineNumber">&nbsp;3477&nbsp;</span><a name="line_3477"></a></li>
<li id="line_3478" class="even"><span class="lineNumber">&nbsp;3478&nbsp;</span>		return&nbsp;classes;<a name="line_3478"></a></li>
<li id="line_3479" class="odd"><span class="lineNumber">&nbsp;3479&nbsp;</span>	}<a name="line_3479"></a></li>
<li id="line_3480" class="even"><span class="lineNumber">&nbsp;3480&nbsp;</span><a name="line_3480"></a></li>
<li id="line_3481" class="odd"><span class="lineNumber">&nbsp;3481&nbsp;</span>});<a name="line_3481"></a></li>
<li id="line_3482" class="even"><span class="lineNumber">&nbsp;3482&nbsp;</span><a name="line_3482"></a></li>
<li id="line_3483" class="odd"><span class="lineNumber">&nbsp;3483&nbsp;</span>;;<a name="line_3483"></a></li>
<li id="line_3484" class="even"><span class="lineNumber">&nbsp;3484&nbsp;</span><a name="line_3484"></a></li>
<li id="line_3485" class="odd"><span class="lineNumber">&nbsp;3485&nbsp;</span>/*&nbsp;Event-rendering&nbsp;and&nbsp;event-interaction&nbsp;methods&nbsp;for&nbsp;the&nbsp;abstract&nbsp;Grid&nbsp;class<a name="line_3485"></a></li>
<li id="line_3486" class="even"><span class="lineNumber">&nbsp;3486&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_3486"></a></li>
<li id="line_3487" class="odd"><span class="lineNumber">&nbsp;3487&nbsp;</span><a name="line_3487"></a></li>
<li id="line_3488" class="even"><span class="lineNumber">&nbsp;3488&nbsp;</span>Grid.mixin({<a name="line_3488"></a></li>
<li id="line_3489" class="odd"><span class="lineNumber">&nbsp;3489&nbsp;</span><a name="line_3489"></a></li>
<li id="line_3490" class="even"><span class="lineNumber">&nbsp;3490&nbsp;</span>	mousedOverSeg:&nbsp;null,&nbsp;//&nbsp;the&nbsp;segment&nbsp;object&nbsp;the&nbsp;user's&nbsp;mouse&nbsp;is&nbsp;over.&nbsp;null&nbsp;if&nbsp;over&nbsp;nothing<a name="line_3490"></a></li>
<li id="line_3491" class="odd"><span class="lineNumber">&nbsp;3491&nbsp;</span>	isDraggingSeg:&nbsp;false,&nbsp;//&nbsp;is&nbsp;a&nbsp;segment&nbsp;being&nbsp;dragged?&nbsp;boolean<a name="line_3491"></a></li>
<li id="line_3492" class="even"><span class="lineNumber">&nbsp;3492&nbsp;</span>	isResizingSeg:&nbsp;false,&nbsp;//&nbsp;is&nbsp;a&nbsp;segment&nbsp;being&nbsp;resized?&nbsp;boolean<a name="line_3492"></a></li>
<li id="line_3493" class="odd"><span class="lineNumber">&nbsp;3493&nbsp;</span>	isDraggingExternal:&nbsp;false,&nbsp;//&nbsp;jqui-dragging&nbsp;an&nbsp;external&nbsp;element?&nbsp;boolean<a name="line_3493"></a></li>
<li id="line_3494" class="even"><span class="lineNumber">&nbsp;3494&nbsp;</span>	segs:&nbsp;null,&nbsp;//&nbsp;the&nbsp;event&nbsp;segments&nbsp;currently&nbsp;rendered&nbsp;in&nbsp;the&nbsp;grid<a name="line_3494"></a></li>
<li id="line_3495" class="odd"><span class="lineNumber">&nbsp;3495&nbsp;</span><a name="line_3495"></a></li>
<li id="line_3496" class="even"><span class="lineNumber">&nbsp;3496&nbsp;</span><a name="line_3496"></a></li>
<li id="line_3497" class="odd"><span class="lineNumber">&nbsp;3497&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;given&nbsp;events&nbsp;onto&nbsp;the&nbsp;grid<a name="line_3497"></a></li>
<li id="line_3498" class="even"><span class="lineNumber">&nbsp;3498&nbsp;</span>	renderEvents:&nbsp;function(events)&nbsp;{<a name="line_3498"></a></li>
<li id="line_3499" class="odd"><span class="lineNumber">&nbsp;3499&nbsp;</span>		var&nbsp;segs&nbsp;=&nbsp;this.eventsToSegs(events);<a name="line_3499"></a></li>
<li id="line_3500" class="even"><span class="lineNumber">&nbsp;3500&nbsp;</span>		var&nbsp;bgSegs&nbsp;=&nbsp;[];<a name="line_3500"></a></li>
<li id="line_3501" class="odd"><span class="lineNumber">&nbsp;3501&nbsp;</span>		var&nbsp;fgSegs&nbsp;=&nbsp;[];<a name="line_3501"></a></li>
<li id="line_3502" class="even"><span class="lineNumber">&nbsp;3502&nbsp;</span>		var&nbsp;i,&nbsp;seg;<a name="line_3502"></a></li>
<li id="line_3503" class="odd"><span class="lineNumber">&nbsp;3503&nbsp;</span><a name="line_3503"></a></li>
<li id="line_3504" class="even"><span class="lineNumber">&nbsp;3504&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;segs.length;&nbsp;i++)&nbsp;{<a name="line_3504"></a></li>
<li id="line_3505" class="odd"><span class="lineNumber">&nbsp;3505&nbsp;</span>			seg&nbsp;=&nbsp;segs[i];<a name="line_3505"></a></li>
<li id="line_3506" class="even"><span class="lineNumber">&nbsp;3506&nbsp;</span><a name="line_3506"></a></li>
<li id="line_3507" class="odd"><span class="lineNumber">&nbsp;3507&nbsp;</span>			if&nbsp;(isBgEvent(seg.event))&nbsp;{<a name="line_3507"></a></li>
<li id="line_3508" class="even"><span class="lineNumber">&nbsp;3508&nbsp;</span>				bgSegs.push(seg);<a name="line_3508"></a></li>
<li id="line_3509" class="odd"><span class="lineNumber">&nbsp;3509&nbsp;</span>			}<a name="line_3509"></a></li>
<li id="line_3510" class="even"><span class="lineNumber">&nbsp;3510&nbsp;</span>			else&nbsp;{<a name="line_3510"></a></li>
<li id="line_3511" class="odd"><span class="lineNumber">&nbsp;3511&nbsp;</span>				fgSegs.push(seg);<a name="line_3511"></a></li>
<li id="line_3512" class="even"><span class="lineNumber">&nbsp;3512&nbsp;</span>			}<a name="line_3512"></a></li>
<li id="line_3513" class="odd"><span class="lineNumber">&nbsp;3513&nbsp;</span>		}<a name="line_3513"></a></li>
<li id="line_3514" class="even"><span class="lineNumber">&nbsp;3514&nbsp;</span><a name="line_3514"></a></li>
<li id="line_3515" class="odd"><span class="lineNumber">&nbsp;3515&nbsp;</span>		//&nbsp;Render&nbsp;each&nbsp;different&nbsp;type&nbsp;of&nbsp;segment.<a name="line_3515"></a></li>
<li id="line_3516" class="even"><span class="lineNumber">&nbsp;3516&nbsp;</span>		//&nbsp;Each&nbsp;function&nbsp;may&nbsp;return&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;segs,&nbsp;segs&nbsp;that&nbsp;were&nbsp;actually&nbsp;rendered.<a name="line_3516"></a></li>
<li id="line_3517" class="odd"><span class="lineNumber">&nbsp;3517&nbsp;</span>		bgSegs&nbsp;=&nbsp;this.renderBgSegs(bgSegs)&nbsp;||&nbsp;bgSegs;<a name="line_3517"></a></li>
<li id="line_3518" class="even"><span class="lineNumber">&nbsp;3518&nbsp;</span>		fgSegs&nbsp;=&nbsp;this.renderFgSegs(fgSegs)&nbsp;||&nbsp;fgSegs;<a name="line_3518"></a></li>
<li id="line_3519" class="odd"><span class="lineNumber">&nbsp;3519&nbsp;</span><a name="line_3519"></a></li>
<li id="line_3520" class="even"><span class="lineNumber">&nbsp;3520&nbsp;</span>		this.segs&nbsp;=&nbsp;bgSegs.concat(fgSegs);<a name="line_3520"></a></li>
<li id="line_3521" class="odd"><span class="lineNumber">&nbsp;3521&nbsp;</span>	},<a name="line_3521"></a></li>
<li id="line_3522" class="even"><span class="lineNumber">&nbsp;3522&nbsp;</span><a name="line_3522"></a></li>
<li id="line_3523" class="odd"><span class="lineNumber">&nbsp;3523&nbsp;</span><a name="line_3523"></a></li>
<li id="line_3524" class="even"><span class="lineNumber">&nbsp;3524&nbsp;</span>	//&nbsp;Unrenders&nbsp;all&nbsp;events&nbsp;currently&nbsp;rendered&nbsp;on&nbsp;the&nbsp;grid<a name="line_3524"></a></li>
<li id="line_3525" class="odd"><span class="lineNumber">&nbsp;3525&nbsp;</span>	unrenderEvents:&nbsp;function()&nbsp;{<a name="line_3525"></a></li>
<li id="line_3526" class="even"><span class="lineNumber">&nbsp;3526&nbsp;</span>		this.triggerSegMouseout();&nbsp;//&nbsp;trigger&nbsp;an&nbsp;eventMouseout&nbsp;if&nbsp;user's&nbsp;mouse&nbsp;is&nbsp;over&nbsp;an&nbsp;event<a name="line_3526"></a></li>
<li id="line_3527" class="odd"><span class="lineNumber">&nbsp;3527&nbsp;</span><a name="line_3527"></a></li>
<li id="line_3528" class="even"><span class="lineNumber">&nbsp;3528&nbsp;</span>		this.unrenderFgSegs();<a name="line_3528"></a></li>
<li id="line_3529" class="odd"><span class="lineNumber">&nbsp;3529&nbsp;</span>		this.unrenderBgSegs();<a name="line_3529"></a></li>
<li id="line_3530" class="even"><span class="lineNumber">&nbsp;3530&nbsp;</span><a name="line_3530"></a></li>
<li id="line_3531" class="odd"><span class="lineNumber">&nbsp;3531&nbsp;</span>		this.segs&nbsp;=&nbsp;null;<a name="line_3531"></a></li>
<li id="line_3532" class="even"><span class="lineNumber">&nbsp;3532&nbsp;</span>	},<a name="line_3532"></a></li>
<li id="line_3533" class="odd"><span class="lineNumber">&nbsp;3533&nbsp;</span><a name="line_3533"></a></li>
<li id="line_3534" class="even"><span class="lineNumber">&nbsp;3534&nbsp;</span><a name="line_3534"></a></li>
<li id="line_3535" class="odd"><span class="lineNumber">&nbsp;3535&nbsp;</span>	//&nbsp;Retrieves&nbsp;all&nbsp;rendered&nbsp;segment&nbsp;objects&nbsp;currently&nbsp;rendered&nbsp;on&nbsp;the&nbsp;grid<a name="line_3535"></a></li>
<li id="line_3536" class="even"><span class="lineNumber">&nbsp;3536&nbsp;</span>	getEventSegs:&nbsp;function()&nbsp;{<a name="line_3536"></a></li>
<li id="line_3537" class="odd"><span class="lineNumber">&nbsp;3537&nbsp;</span>		return&nbsp;this.segs&nbsp;||&nbsp;[];<a name="line_3537"></a></li>
<li id="line_3538" class="even"><span class="lineNumber">&nbsp;3538&nbsp;</span>	},<a name="line_3538"></a></li>
<li id="line_3539" class="odd"><span class="lineNumber">&nbsp;3539&nbsp;</span><a name="line_3539"></a></li>
<li id="line_3540" class="even"><span class="lineNumber">&nbsp;3540&nbsp;</span><a name="line_3540"></a></li>
<li id="line_3541" class="odd"><span class="lineNumber">&nbsp;3541&nbsp;</span>	/*&nbsp;Foreground&nbsp;Segment&nbsp;Rendering<a name="line_3541"></a></li>
<li id="line_3542" class="even"><span class="lineNumber">&nbsp;3542&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3542"></a></li>
<li id="line_3543" class="odd"><span class="lineNumber">&nbsp;3543&nbsp;</span><a name="line_3543"></a></li>
<li id="line_3544" class="even"><span class="lineNumber">&nbsp;3544&nbsp;</span><a name="line_3544"></a></li>
<li id="line_3545" class="odd"><span class="lineNumber">&nbsp;3545&nbsp;</span>	//&nbsp;Renders&nbsp;foreground&nbsp;event&nbsp;segments&nbsp;onto&nbsp;the&nbsp;grid.&nbsp;May&nbsp;return&nbsp;a&nbsp;subset&nbsp;of&nbsp;segs&nbsp;that&nbsp;were&nbsp;rendered.<a name="line_3545"></a></li>
<li id="line_3546" class="even"><span class="lineNumber">&nbsp;3546&nbsp;</span>	renderFgSegs:&nbsp;function(segs)&nbsp;{<a name="line_3546"></a></li>
<li id="line_3547" class="odd"><span class="lineNumber">&nbsp;3547&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_3547"></a></li>
<li id="line_3548" class="even"><span class="lineNumber">&nbsp;3548&nbsp;</span>	},<a name="line_3548"></a></li>
<li id="line_3549" class="odd"><span class="lineNumber">&nbsp;3549&nbsp;</span><a name="line_3549"></a></li>
<li id="line_3550" class="even"><span class="lineNumber">&nbsp;3550&nbsp;</span><a name="line_3550"></a></li>
<li id="line_3551" class="odd"><span class="lineNumber">&nbsp;3551&nbsp;</span>	//&nbsp;Unrenders&nbsp;all&nbsp;currently&nbsp;rendered&nbsp;foreground&nbsp;segments<a name="line_3551"></a></li>
<li id="line_3552" class="even"><span class="lineNumber">&nbsp;3552&nbsp;</span>	unrenderFgSegs:&nbsp;function()&nbsp;{<a name="line_3552"></a></li>
<li id="line_3553" class="odd"><span class="lineNumber">&nbsp;3553&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_3553"></a></li>
<li id="line_3554" class="even"><span class="lineNumber">&nbsp;3554&nbsp;</span>	},<a name="line_3554"></a></li>
<li id="line_3555" class="odd"><span class="lineNumber">&nbsp;3555&nbsp;</span><a name="line_3555"></a></li>
<li id="line_3556" class="even"><span class="lineNumber">&nbsp;3556&nbsp;</span><a name="line_3556"></a></li>
<li id="line_3557" class="odd"><span class="lineNumber">&nbsp;3557&nbsp;</span>	//&nbsp;Renders&nbsp;and&nbsp;assigns&nbsp;an&nbsp;`el`&nbsp;property&nbsp;for&nbsp;each&nbsp;foreground&nbsp;event&nbsp;segment.<a name="line_3557"></a></li>
<li id="line_3558" class="even"><span class="lineNumber">&nbsp;3558&nbsp;</span>	//&nbsp;Only&nbsp;returns&nbsp;segments&nbsp;that&nbsp;successfully&nbsp;rendered.<a name="line_3558"></a></li>
<li id="line_3559" class="odd"><span class="lineNumber">&nbsp;3559&nbsp;</span>	//&nbsp;A&nbsp;utility&nbsp;that&nbsp;subclasses&nbsp;may&nbsp;use.<a name="line_3559"></a></li>
<li id="line_3560" class="even"><span class="lineNumber">&nbsp;3560&nbsp;</span>	renderFgSegEls:&nbsp;function(segs,&nbsp;disableResizing)&nbsp;{<a name="line_3560"></a></li>
<li id="line_3561" class="odd"><span class="lineNumber">&nbsp;3561&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_3561"></a></li>
<li id="line_3562" class="even"><span class="lineNumber">&nbsp;3562&nbsp;</span>		var&nbsp;html&nbsp;=&nbsp;'';<a name="line_3562"></a></li>
<li id="line_3563" class="odd"><span class="lineNumber">&nbsp;3563&nbsp;</span>		var&nbsp;renderedSegs&nbsp;=&nbsp;[];<a name="line_3563"></a></li>
<li id="line_3564" class="even"><span class="lineNumber">&nbsp;3564&nbsp;</span>		var&nbsp;i;<a name="line_3564"></a></li>
<li id="line_3565" class="odd"><span class="lineNumber">&nbsp;3565&nbsp;</span><a name="line_3565"></a></li>
<li id="line_3566" class="even"><span class="lineNumber">&nbsp;3566&nbsp;</span>		if&nbsp;(segs.length)&nbsp;{&nbsp;//&nbsp;don't&nbsp;build&nbsp;an&nbsp;empty&nbsp;html&nbsp;string<a name="line_3566"></a></li>
<li id="line_3567" class="odd"><span class="lineNumber">&nbsp;3567&nbsp;</span><a name="line_3567"></a></li>
<li id="line_3568" class="even"><span class="lineNumber">&nbsp;3568&nbsp;</span>			//&nbsp;build&nbsp;a&nbsp;large&nbsp;concatenation&nbsp;of&nbsp;event&nbsp;segment&nbsp;HTML<a name="line_3568"></a></li>
<li id="line_3569" class="odd"><span class="lineNumber">&nbsp;3569&nbsp;</span>			for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;segs.length;&nbsp;i++)&nbsp;{<a name="line_3569"></a></li>
<li id="line_3570" class="even"><span class="lineNumber">&nbsp;3570&nbsp;</span>				html&nbsp;+=&nbsp;this.fgSegHtml(segs[i],&nbsp;disableResizing);<a name="line_3570"></a></li>
<li id="line_3571" class="odd"><span class="lineNumber">&nbsp;3571&nbsp;</span>			}<a name="line_3571"></a></li>
<li id="line_3572" class="even"><span class="lineNumber">&nbsp;3572&nbsp;</span><a name="line_3572"></a></li>
<li id="line_3573" class="odd"><span class="lineNumber">&nbsp;3573&nbsp;</span>			//&nbsp;Grab&nbsp;individual&nbsp;elements&nbsp;from&nbsp;the&nbsp;combined&nbsp;HTML&nbsp;string.&nbsp;Use&nbsp;each&nbsp;as&nbsp;the&nbsp;default&nbsp;rendering.<a name="line_3573"></a></li>
<li id="line_3574" class="even"><span class="lineNumber">&nbsp;3574&nbsp;</span>			//&nbsp;Then,&nbsp;compute&nbsp;the&nbsp;'el'&nbsp;for&nbsp;each&nbsp;segment.&nbsp;An&nbsp;el&nbsp;might&nbsp;be&nbsp;null&nbsp;if&nbsp;the&nbsp;eventRender&nbsp;callback&nbsp;returned&nbsp;false.<a name="line_3574"></a></li>
<li id="line_3575" class="odd"><span class="lineNumber">&nbsp;3575&nbsp;</span>			$(html).each(function(i,&nbsp;node)&nbsp;{<a name="line_3575"></a></li>
<li id="line_3576" class="even"><span class="lineNumber">&nbsp;3576&nbsp;</span>				var&nbsp;seg&nbsp;=&nbsp;segs[i];<a name="line_3576"></a></li>
<li id="line_3577" class="odd"><span class="lineNumber">&nbsp;3577&nbsp;</span>				var&nbsp;el&nbsp;=&nbsp;view.resolveEventEl(seg.event,&nbsp;$(node));<a name="line_3577"></a></li>
<li id="line_3578" class="even"><span class="lineNumber">&nbsp;3578&nbsp;</span><a name="line_3578"></a></li>
<li id="line_3579" class="odd"><span class="lineNumber">&nbsp;3579&nbsp;</span>				if&nbsp;(el)&nbsp;{<a name="line_3579"></a></li>
<li id="line_3580" class="even"><span class="lineNumber">&nbsp;3580&nbsp;</span>					el.data('fc-seg',&nbsp;seg);&nbsp;//&nbsp;used&nbsp;by&nbsp;handlers<a name="line_3580"></a></li>
<li id="line_3581" class="odd"><span class="lineNumber">&nbsp;3581&nbsp;</span>					seg.el&nbsp;=&nbsp;el;<a name="line_3581"></a></li>
<li id="line_3582" class="even"><span class="lineNumber">&nbsp;3582&nbsp;</span>					renderedSegs.push(seg);<a name="line_3582"></a></li>
<li id="line_3583" class="odd"><span class="lineNumber">&nbsp;3583&nbsp;</span>				}<a name="line_3583"></a></li>
<li id="line_3584" class="even"><span class="lineNumber">&nbsp;3584&nbsp;</span>			});<a name="line_3584"></a></li>
<li id="line_3585" class="odd"><span class="lineNumber">&nbsp;3585&nbsp;</span>		}<a name="line_3585"></a></li>
<li id="line_3586" class="even"><span class="lineNumber">&nbsp;3586&nbsp;</span><a name="line_3586"></a></li>
<li id="line_3587" class="odd"><span class="lineNumber">&nbsp;3587&nbsp;</span>		return&nbsp;renderedSegs;<a name="line_3587"></a></li>
<li id="line_3588" class="even"><span class="lineNumber">&nbsp;3588&nbsp;</span>	},<a name="line_3588"></a></li>
<li id="line_3589" class="odd"><span class="lineNumber">&nbsp;3589&nbsp;</span><a name="line_3589"></a></li>
<li id="line_3590" class="even"><span class="lineNumber">&nbsp;3590&nbsp;</span><a name="line_3590"></a></li>
<li id="line_3591" class="odd"><span class="lineNumber">&nbsp;3591&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;for&nbsp;the&nbsp;default&nbsp;rendering&nbsp;of&nbsp;a&nbsp;foreground&nbsp;event&nbsp;segment.&nbsp;Used&nbsp;by&nbsp;renderFgSegEls()<a name="line_3591"></a></li>
<li id="line_3592" class="even"><span class="lineNumber">&nbsp;3592&nbsp;</span>	fgSegHtml:&nbsp;function(seg,&nbsp;disableResizing)&nbsp;{<a name="line_3592"></a></li>
<li id="line_3593" class="odd"><span class="lineNumber">&nbsp;3593&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_3593"></a></li>
<li id="line_3594" class="even"><span class="lineNumber">&nbsp;3594&nbsp;</span>	},<a name="line_3594"></a></li>
<li id="line_3595" class="odd"><span class="lineNumber">&nbsp;3595&nbsp;</span><a name="line_3595"></a></li>
<li id="line_3596" class="even"><span class="lineNumber">&nbsp;3596&nbsp;</span><a name="line_3596"></a></li>
<li id="line_3597" class="odd"><span class="lineNumber">&nbsp;3597&nbsp;</span>	/*&nbsp;Background&nbsp;Segment&nbsp;Rendering<a name="line_3597"></a></li>
<li id="line_3598" class="even"><span class="lineNumber">&nbsp;3598&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3598"></a></li>
<li id="line_3599" class="odd"><span class="lineNumber">&nbsp;3599&nbsp;</span><a name="line_3599"></a></li>
<li id="line_3600" class="even"><span class="lineNumber">&nbsp;3600&nbsp;</span><a name="line_3600"></a></li>
<li id="line_3601" class="odd"><span class="lineNumber">&nbsp;3601&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;given&nbsp;background&nbsp;event&nbsp;segments&nbsp;onto&nbsp;the&nbsp;grid.<a name="line_3601"></a></li>
<li id="line_3602" class="even"><span class="lineNumber">&nbsp;3602&nbsp;</span>	//&nbsp;Returns&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;segs&nbsp;that&nbsp;were&nbsp;actually&nbsp;rendered.<a name="line_3602"></a></li>
<li id="line_3603" class="odd"><span class="lineNumber">&nbsp;3603&nbsp;</span>	renderBgSegs:&nbsp;function(segs)&nbsp;{<a name="line_3603"></a></li>
<li id="line_3604" class="even"><span class="lineNumber">&nbsp;3604&nbsp;</span>		return&nbsp;this.renderFill('bgEvent',&nbsp;segs);<a name="line_3604"></a></li>
<li id="line_3605" class="odd"><span class="lineNumber">&nbsp;3605&nbsp;</span>	},<a name="line_3605"></a></li>
<li id="line_3606" class="even"><span class="lineNumber">&nbsp;3606&nbsp;</span><a name="line_3606"></a></li>
<li id="line_3607" class="odd"><span class="lineNumber">&nbsp;3607&nbsp;</span><a name="line_3607"></a></li>
<li id="line_3608" class="even"><span class="lineNumber">&nbsp;3608&nbsp;</span>	//&nbsp;Unrenders&nbsp;all&nbsp;the&nbsp;currently&nbsp;rendered&nbsp;background&nbsp;event&nbsp;segments<a name="line_3608"></a></li>
<li id="line_3609" class="odd"><span class="lineNumber">&nbsp;3609&nbsp;</span>	unrenderBgSegs:&nbsp;function()&nbsp;{<a name="line_3609"></a></li>
<li id="line_3610" class="even"><span class="lineNumber">&nbsp;3610&nbsp;</span>		this.unrenderFill('bgEvent');<a name="line_3610"></a></li>
<li id="line_3611" class="odd"><span class="lineNumber">&nbsp;3611&nbsp;</span>	},<a name="line_3611"></a></li>
<li id="line_3612" class="even"><span class="lineNumber">&nbsp;3612&nbsp;</span><a name="line_3612"></a></li>
<li id="line_3613" class="odd"><span class="lineNumber">&nbsp;3613&nbsp;</span><a name="line_3613"></a></li>
<li id="line_3614" class="even"><span class="lineNumber">&nbsp;3614&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;background&nbsp;event&nbsp;element,&nbsp;given&nbsp;the&nbsp;default&nbsp;rendering.&nbsp;Called&nbsp;by&nbsp;the&nbsp;fill&nbsp;system.<a name="line_3614"></a></li>
<li id="line_3615" class="odd"><span class="lineNumber">&nbsp;3615&nbsp;</span>	bgEventSegEl:&nbsp;function(seg,&nbsp;el)&nbsp;{<a name="line_3615"></a></li>
<li id="line_3616" class="even"><span class="lineNumber">&nbsp;3616&nbsp;</span>		return&nbsp;this.view.resolveEventEl(seg.event,&nbsp;el);&nbsp;//&nbsp;will&nbsp;filter&nbsp;through&nbsp;eventRender<a name="line_3616"></a></li>
<li id="line_3617" class="odd"><span class="lineNumber">&nbsp;3617&nbsp;</span>	},<a name="line_3617"></a></li>
<li id="line_3618" class="even"><span class="lineNumber">&nbsp;3618&nbsp;</span><a name="line_3618"></a></li>
<li id="line_3619" class="odd"><span class="lineNumber">&nbsp;3619&nbsp;</span><a name="line_3619"></a></li>
<li id="line_3620" class="even"><span class="lineNumber">&nbsp;3620&nbsp;</span>	//&nbsp;Generates&nbsp;an&nbsp;array&nbsp;of&nbsp;classNames&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;the&nbsp;default&nbsp;rendering&nbsp;of&nbsp;a&nbsp;background&nbsp;event.<a name="line_3620"></a></li>
<li id="line_3621" class="odd"><span class="lineNumber">&nbsp;3621&nbsp;</span>	//&nbsp;Called&nbsp;by&nbsp;the&nbsp;fill&nbsp;system.<a name="line_3621"></a></li>
<li id="line_3622" class="even"><span class="lineNumber">&nbsp;3622&nbsp;</span>	bgEventSegClasses:&nbsp;function(seg)&nbsp;{<a name="line_3622"></a></li>
<li id="line_3623" class="odd"><span class="lineNumber">&nbsp;3623&nbsp;</span>		var&nbsp;event&nbsp;=&nbsp;seg.event;<a name="line_3623"></a></li>
<li id="line_3624" class="even"><span class="lineNumber">&nbsp;3624&nbsp;</span>		var&nbsp;source&nbsp;=&nbsp;event.source&nbsp;||&nbsp;{};<a name="line_3624"></a></li>
<li id="line_3625" class="odd"><span class="lineNumber">&nbsp;3625&nbsp;</span><a name="line_3625"></a></li>
<li id="line_3626" class="even"><span class="lineNumber">&nbsp;3626&nbsp;</span>		return&nbsp;[&nbsp;'fc-bgevent'&nbsp;].concat(<a name="line_3626"></a></li>
<li id="line_3627" class="odd"><span class="lineNumber">&nbsp;3627&nbsp;</span>			event.className,<a name="line_3627"></a></li>
<li id="line_3628" class="even"><span class="lineNumber">&nbsp;3628&nbsp;</span>			source.className&nbsp;||&nbsp;[]<a name="line_3628"></a></li>
<li id="line_3629" class="odd"><span class="lineNumber">&nbsp;3629&nbsp;</span>		);<a name="line_3629"></a></li>
<li id="line_3630" class="even"><span class="lineNumber">&nbsp;3630&nbsp;</span>	},<a name="line_3630"></a></li>
<li id="line_3631" class="odd"><span class="lineNumber">&nbsp;3631&nbsp;</span><a name="line_3631"></a></li>
<li id="line_3632" class="even"><span class="lineNumber">&nbsp;3632&nbsp;</span><a name="line_3632"></a></li>
<li id="line_3633" class="odd"><span class="lineNumber">&nbsp;3633&nbsp;</span>	//&nbsp;Generates&nbsp;a&nbsp;semicolon-separated&nbsp;CSS&nbsp;string&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;the&nbsp;default&nbsp;rendering&nbsp;of&nbsp;a&nbsp;background&nbsp;event.<a name="line_3633"></a></li>
<li id="line_3634" class="even"><span class="lineNumber">&nbsp;3634&nbsp;</span>	//&nbsp;Called&nbsp;by&nbsp;the&nbsp;fill&nbsp;system.<a name="line_3634"></a></li>
<li id="line_3635" class="odd"><span class="lineNumber">&nbsp;3635&nbsp;</span>	//&nbsp;TODO:&nbsp;consolidate&nbsp;with&nbsp;getEventSkinCss?<a name="line_3635"></a></li>
<li id="line_3636" class="even"><span class="lineNumber">&nbsp;3636&nbsp;</span>	bgEventSegCss:&nbsp;function(seg)&nbsp;{<a name="line_3636"></a></li>
<li id="line_3637" class="odd"><span class="lineNumber">&nbsp;3637&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_3637"></a></li>
<li id="line_3638" class="even"><span class="lineNumber">&nbsp;3638&nbsp;</span>		var&nbsp;event&nbsp;=&nbsp;seg.event;<a name="line_3638"></a></li>
<li id="line_3639" class="odd"><span class="lineNumber">&nbsp;3639&nbsp;</span>		var&nbsp;source&nbsp;=&nbsp;event.source&nbsp;||&nbsp;{};<a name="line_3639"></a></li>
<li id="line_3640" class="even"><span class="lineNumber">&nbsp;3640&nbsp;</span><a name="line_3640"></a></li>
<li id="line_3641" class="odd"><span class="lineNumber">&nbsp;3641&nbsp;</span>		return&nbsp;{<a name="line_3641"></a></li>
<li id="line_3642" class="even"><span class="lineNumber">&nbsp;3642&nbsp;</span>			'background-color':<a name="line_3642"></a></li>
<li id="line_3643" class="odd"><span class="lineNumber">&nbsp;3643&nbsp;</span>				event.backgroundColor&nbsp;||<a name="line_3643"></a></li>
<li id="line_3644" class="even"><span class="lineNumber">&nbsp;3644&nbsp;</span>				event.color&nbsp;||<a name="line_3644"></a></li>
<li id="line_3645" class="odd"><span class="lineNumber">&nbsp;3645&nbsp;</span>				source.backgroundColor&nbsp;||<a name="line_3645"></a></li>
<li id="line_3646" class="even"><span class="lineNumber">&nbsp;3646&nbsp;</span>				source.color&nbsp;||<a name="line_3646"></a></li>
<li id="line_3647" class="odd"><span class="lineNumber">&nbsp;3647&nbsp;</span>				view.opt('eventBackgroundColor')&nbsp;||<a name="line_3647"></a></li>
<li id="line_3648" class="even"><span class="lineNumber">&nbsp;3648&nbsp;</span>				view.opt('eventColor')<a name="line_3648"></a></li>
<li id="line_3649" class="odd"><span class="lineNumber">&nbsp;3649&nbsp;</span>		};<a name="line_3649"></a></li>
<li id="line_3650" class="even"><span class="lineNumber">&nbsp;3650&nbsp;</span>	},<a name="line_3650"></a></li>
<li id="line_3651" class="odd"><span class="lineNumber">&nbsp;3651&nbsp;</span><a name="line_3651"></a></li>
<li id="line_3652" class="even"><span class="lineNumber">&nbsp;3652&nbsp;</span><a name="line_3652"></a></li>
<li id="line_3653" class="odd"><span class="lineNumber">&nbsp;3653&nbsp;</span>	//&nbsp;Generates&nbsp;an&nbsp;array&nbsp;of&nbsp;classNames&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;the&nbsp;rendering&nbsp;business&nbsp;hours&nbsp;overlay.&nbsp;Called&nbsp;by&nbsp;the&nbsp;fill&nbsp;system.<a name="line_3653"></a></li>
<li id="line_3654" class="even"><span class="lineNumber">&nbsp;3654&nbsp;</span>	businessHoursSegClasses:&nbsp;function(seg)&nbsp;{<a name="line_3654"></a></li>
<li id="line_3655" class="odd"><span class="lineNumber">&nbsp;3655&nbsp;</span>		return&nbsp;[&nbsp;'fc-nonbusiness',&nbsp;'fc-bgevent'&nbsp;];<a name="line_3655"></a></li>
<li id="line_3656" class="even"><span class="lineNumber">&nbsp;3656&nbsp;</span>	},<a name="line_3656"></a></li>
<li id="line_3657" class="odd"><span class="lineNumber">&nbsp;3657&nbsp;</span><a name="line_3657"></a></li>
<li id="line_3658" class="even"><span class="lineNumber">&nbsp;3658&nbsp;</span><a name="line_3658"></a></li>
<li id="line_3659" class="odd"><span class="lineNumber">&nbsp;3659&nbsp;</span>	/*&nbsp;Handlers<a name="line_3659"></a></li>
<li id="line_3660" class="even"><span class="lineNumber">&nbsp;3660&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3660"></a></li>
<li id="line_3661" class="odd"><span class="lineNumber">&nbsp;3661&nbsp;</span><a name="line_3661"></a></li>
<li id="line_3662" class="even"><span class="lineNumber">&nbsp;3662&nbsp;</span><a name="line_3662"></a></li>
<li id="line_3663" class="odd"><span class="lineNumber">&nbsp;3663&nbsp;</span>	//&nbsp;Attaches&nbsp;event-element-related&nbsp;handlers&nbsp;to&nbsp;the&nbsp;container&nbsp;element&nbsp;and&nbsp;leverage&nbsp;bubbling<a name="line_3663"></a></li>
<li id="line_3664" class="even"><span class="lineNumber">&nbsp;3664&nbsp;</span>	bindSegHandlers:&nbsp;function()&nbsp;{<a name="line_3664"></a></li>
<li id="line_3665" class="odd"><span class="lineNumber">&nbsp;3665&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_3665"></a></li>
<li id="line_3666" class="even"><span class="lineNumber">&nbsp;3666&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_3666"></a></li>
<li id="line_3667" class="odd"><span class="lineNumber">&nbsp;3667&nbsp;</span><a name="line_3667"></a></li>
<li id="line_3668" class="even"><span class="lineNumber">&nbsp;3668&nbsp;</span>		$.each(<a name="line_3668"></a></li>
<li id="line_3669" class="odd"><span class="lineNumber">&nbsp;3669&nbsp;</span>			{<a name="line_3669"></a></li>
<li id="line_3670" class="even"><span class="lineNumber">&nbsp;3670&nbsp;</span>				mouseenter:&nbsp;function(seg,&nbsp;ev)&nbsp;{<a name="line_3670"></a></li>
<li id="line_3671" class="odd"><span class="lineNumber">&nbsp;3671&nbsp;</span>					_this.triggerSegMouseover(seg,&nbsp;ev);<a name="line_3671"></a></li>
<li id="line_3672" class="even"><span class="lineNumber">&nbsp;3672&nbsp;</span>				},<a name="line_3672"></a></li>
<li id="line_3673" class="odd"><span class="lineNumber">&nbsp;3673&nbsp;</span>				mouseleave:&nbsp;function(seg,&nbsp;ev)&nbsp;{<a name="line_3673"></a></li>
<li id="line_3674" class="even"><span class="lineNumber">&nbsp;3674&nbsp;</span>					_this.triggerSegMouseout(seg,&nbsp;ev);<a name="line_3674"></a></li>
<li id="line_3675" class="odd"><span class="lineNumber">&nbsp;3675&nbsp;</span>				},<a name="line_3675"></a></li>
<li id="line_3676" class="even"><span class="lineNumber">&nbsp;3676&nbsp;</span>				click:&nbsp;function(seg,&nbsp;ev)&nbsp;{<a name="line_3676"></a></li>
<li id="line_3677" class="odd"><span class="lineNumber">&nbsp;3677&nbsp;</span>					return&nbsp;view.trigger('eventClick',&nbsp;this,&nbsp;seg.event,&nbsp;ev);&nbsp;//&nbsp;can&nbsp;return&nbsp;`false`&nbsp;to&nbsp;cancel<a name="line_3677"></a></li>
<li id="line_3678" class="even"><span class="lineNumber">&nbsp;3678&nbsp;</span>				},<a name="line_3678"></a></li>
<li id="line_3679" class="odd"><span class="lineNumber">&nbsp;3679&nbsp;</span>				mousedown:&nbsp;function(seg,&nbsp;ev)&nbsp;{<a name="line_3679"></a></li>
<li id="line_3680" class="even"><span class="lineNumber">&nbsp;3680&nbsp;</span>					if&nbsp;($(ev.target).is('.fc-resizer')&nbsp;&amp;&amp;&nbsp;view.isEventResizable(seg.event))&nbsp;{<a name="line_3680"></a></li>
<li id="line_3681" class="odd"><span class="lineNumber">&nbsp;3681&nbsp;</span>						_this.segResizeMousedown(seg,&nbsp;ev,&nbsp;$(ev.target).is('.fc-start-resizer'));<a name="line_3681"></a></li>
<li id="line_3682" class="even"><span class="lineNumber">&nbsp;3682&nbsp;</span>					}<a name="line_3682"></a></li>
<li id="line_3683" class="odd"><span class="lineNumber">&nbsp;3683&nbsp;</span>					else&nbsp;if&nbsp;(view.isEventDraggable(seg.event))&nbsp;{<a name="line_3683"></a></li>
<li id="line_3684" class="even"><span class="lineNumber">&nbsp;3684&nbsp;</span>						_this.segDragMousedown(seg,&nbsp;ev);<a name="line_3684"></a></li>
<li id="line_3685" class="odd"><span class="lineNumber">&nbsp;3685&nbsp;</span>					}<a name="line_3685"></a></li>
<li id="line_3686" class="even"><span class="lineNumber">&nbsp;3686&nbsp;</span>				}<a name="line_3686"></a></li>
<li id="line_3687" class="odd"><span class="lineNumber">&nbsp;3687&nbsp;</span>			},<a name="line_3687"></a></li>
<li id="line_3688" class="even"><span class="lineNumber">&nbsp;3688&nbsp;</span>			function(name,&nbsp;func)&nbsp;{<a name="line_3688"></a></li>
<li id="line_3689" class="odd"><span class="lineNumber">&nbsp;3689&nbsp;</span>				//&nbsp;attach&nbsp;the&nbsp;handler&nbsp;to&nbsp;the&nbsp;container&nbsp;element&nbsp;and&nbsp;only&nbsp;listen&nbsp;for&nbsp;real&nbsp;event&nbsp;elements&nbsp;via&nbsp;bubbling<a name="line_3689"></a></li>
<li id="line_3690" class="even"><span class="lineNumber">&nbsp;3690&nbsp;</span>				_this.el.on(name,&nbsp;'.fc-event-container&nbsp;&gt;&nbsp;*',&nbsp;function(ev)&nbsp;{<a name="line_3690"></a></li>
<li id="line_3691" class="odd"><span class="lineNumber">&nbsp;3691&nbsp;</span>					var&nbsp;seg&nbsp;=&nbsp;$(this).data('fc-seg');&nbsp;//&nbsp;grab&nbsp;segment&nbsp;data.&nbsp;put&nbsp;there&nbsp;by&nbsp;View::renderEvents<a name="line_3691"></a></li>
<li id="line_3692" class="even"><span class="lineNumber">&nbsp;3692&nbsp;</span><a name="line_3692"></a></li>
<li id="line_3693" class="odd"><span class="lineNumber">&nbsp;3693&nbsp;</span>					//&nbsp;only&nbsp;call&nbsp;the&nbsp;handlers&nbsp;if&nbsp;there&nbsp;is&nbsp;not&nbsp;a&nbsp;drag/resize&nbsp;in&nbsp;progress<a name="line_3693"></a></li>
<li id="line_3694" class="even"><span class="lineNumber">&nbsp;3694&nbsp;</span>					if&nbsp;(seg&nbsp;&amp;&amp;&nbsp;!_this.isDraggingSeg&nbsp;&amp;&amp;&nbsp;!_this.isResizingSeg)&nbsp;{<a name="line_3694"></a></li>
<li id="line_3695" class="odd"><span class="lineNumber">&nbsp;3695&nbsp;</span>						return&nbsp;func.call(this,&nbsp;seg,&nbsp;ev);&nbsp;//&nbsp;`this`&nbsp;will&nbsp;be&nbsp;the&nbsp;event&nbsp;element<a name="line_3695"></a></li>
<li id="line_3696" class="even"><span class="lineNumber">&nbsp;3696&nbsp;</span>					}<a name="line_3696"></a></li>
<li id="line_3697" class="odd"><span class="lineNumber">&nbsp;3697&nbsp;</span>				});<a name="line_3697"></a></li>
<li id="line_3698" class="even"><span class="lineNumber">&nbsp;3698&nbsp;</span>			}<a name="line_3698"></a></li>
<li id="line_3699" class="odd"><span class="lineNumber">&nbsp;3699&nbsp;</span>		);<a name="line_3699"></a></li>
<li id="line_3700" class="even"><span class="lineNumber">&nbsp;3700&nbsp;</span>	},<a name="line_3700"></a></li>
<li id="line_3701" class="odd"><span class="lineNumber">&nbsp;3701&nbsp;</span><a name="line_3701"></a></li>
<li id="line_3702" class="even"><span class="lineNumber">&nbsp;3702&nbsp;</span><a name="line_3702"></a></li>
<li id="line_3703" class="odd"><span class="lineNumber">&nbsp;3703&nbsp;</span>	//&nbsp;Updates&nbsp;internal&nbsp;state&nbsp;and&nbsp;triggers&nbsp;handlers&nbsp;for&nbsp;when&nbsp;an&nbsp;event&nbsp;element&nbsp;is&nbsp;moused&nbsp;over<a name="line_3703"></a></li>
<li id="line_3704" class="even"><span class="lineNumber">&nbsp;3704&nbsp;</span>	triggerSegMouseover:&nbsp;function(seg,&nbsp;ev)&nbsp;{<a name="line_3704"></a></li>
<li id="line_3705" class="odd"><span class="lineNumber">&nbsp;3705&nbsp;</span>		if&nbsp;(!this.mousedOverSeg)&nbsp;{<a name="line_3705"></a></li>
<li id="line_3706" class="even"><span class="lineNumber">&nbsp;3706&nbsp;</span>			this.mousedOverSeg&nbsp;=&nbsp;seg;<a name="line_3706"></a></li>
<li id="line_3707" class="odd"><span class="lineNumber">&nbsp;3707&nbsp;</span>			this.view.trigger('eventMouseover',&nbsp;seg.el[0],&nbsp;seg.event,&nbsp;ev);<a name="line_3707"></a></li>
<li id="line_3708" class="even"><span class="lineNumber">&nbsp;3708&nbsp;</span>		}<a name="line_3708"></a></li>
<li id="line_3709" class="odd"><span class="lineNumber">&nbsp;3709&nbsp;</span>	},<a name="line_3709"></a></li>
<li id="line_3710" class="even"><span class="lineNumber">&nbsp;3710&nbsp;</span><a name="line_3710"></a></li>
<li id="line_3711" class="odd"><span class="lineNumber">&nbsp;3711&nbsp;</span><a name="line_3711"></a></li>
<li id="line_3712" class="even"><span class="lineNumber">&nbsp;3712&nbsp;</span>	//&nbsp;Updates&nbsp;internal&nbsp;state&nbsp;and&nbsp;triggers&nbsp;handlers&nbsp;for&nbsp;when&nbsp;an&nbsp;event&nbsp;element&nbsp;is&nbsp;moused&nbsp;out.<a name="line_3712"></a></li>
<li id="line_3713" class="odd"><span class="lineNumber">&nbsp;3713&nbsp;</span>	//&nbsp;Can&nbsp;be&nbsp;given&nbsp;no&nbsp;arguments,&nbsp;in&nbsp;which&nbsp;case&nbsp;it&nbsp;will&nbsp;mouseout&nbsp;the&nbsp;segment&nbsp;that&nbsp;was&nbsp;previously&nbsp;moused&nbsp;over.<a name="line_3713"></a></li>
<li id="line_3714" class="even"><span class="lineNumber">&nbsp;3714&nbsp;</span>	triggerSegMouseout:&nbsp;function(seg,&nbsp;ev)&nbsp;{<a name="line_3714"></a></li>
<li id="line_3715" class="odd"><span class="lineNumber">&nbsp;3715&nbsp;</span>		ev&nbsp;=&nbsp;ev&nbsp;||&nbsp;{};&nbsp;//&nbsp;if&nbsp;given&nbsp;no&nbsp;args,&nbsp;make&nbsp;a&nbsp;mock&nbsp;mouse&nbsp;event<a name="line_3715"></a></li>
<li id="line_3716" class="even"><span class="lineNumber">&nbsp;3716&nbsp;</span><a name="line_3716"></a></li>
<li id="line_3717" class="odd"><span class="lineNumber">&nbsp;3717&nbsp;</span>		if&nbsp;(this.mousedOverSeg)&nbsp;{<a name="line_3717"></a></li>
<li id="line_3718" class="even"><span class="lineNumber">&nbsp;3718&nbsp;</span>			seg&nbsp;=&nbsp;seg&nbsp;||&nbsp;this.mousedOverSeg;&nbsp;//&nbsp;if&nbsp;given&nbsp;no&nbsp;args,&nbsp;use&nbsp;the&nbsp;currently&nbsp;moused-over&nbsp;segment<a name="line_3718"></a></li>
<li id="line_3719" class="odd"><span class="lineNumber">&nbsp;3719&nbsp;</span>			this.mousedOverSeg&nbsp;=&nbsp;null;<a name="line_3719"></a></li>
<li id="line_3720" class="even"><span class="lineNumber">&nbsp;3720&nbsp;</span>			this.view.trigger('eventMouseout',&nbsp;seg.el[0],&nbsp;seg.event,&nbsp;ev);<a name="line_3720"></a></li>
<li id="line_3721" class="odd"><span class="lineNumber">&nbsp;3721&nbsp;</span>		}<a name="line_3721"></a></li>
<li id="line_3722" class="even"><span class="lineNumber">&nbsp;3722&nbsp;</span>	},<a name="line_3722"></a></li>
<li id="line_3723" class="odd"><span class="lineNumber">&nbsp;3723&nbsp;</span><a name="line_3723"></a></li>
<li id="line_3724" class="even"><span class="lineNumber">&nbsp;3724&nbsp;</span><a name="line_3724"></a></li>
<li id="line_3725" class="odd"><span class="lineNumber">&nbsp;3725&nbsp;</span>	/*&nbsp;Event&nbsp;Dragging<a name="line_3725"></a></li>
<li id="line_3726" class="even"><span class="lineNumber">&nbsp;3726&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3726"></a></li>
<li id="line_3727" class="odd"><span class="lineNumber">&nbsp;3727&nbsp;</span><a name="line_3727"></a></li>
<li id="line_3728" class="even"><span class="lineNumber">&nbsp;3728&nbsp;</span><a name="line_3728"></a></li>
<li id="line_3729" class="odd"><span class="lineNumber">&nbsp;3729&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;the&nbsp;user&nbsp;does&nbsp;a&nbsp;mousedown&nbsp;on&nbsp;an&nbsp;event,&nbsp;which&nbsp;might&nbsp;lead&nbsp;to&nbsp;dragging.<a name="line_3729"></a></li>
<li id="line_3730" class="even"><span class="lineNumber">&nbsp;3730&nbsp;</span>	//&nbsp;Generic&nbsp;enough&nbsp;to&nbsp;work&nbsp;with&nbsp;any&nbsp;type&nbsp;of&nbsp;Grid.<a name="line_3730"></a></li>
<li id="line_3731" class="odd"><span class="lineNumber">&nbsp;3731&nbsp;</span>	segDragMousedown:&nbsp;function(seg,&nbsp;ev)&nbsp;{<a name="line_3731"></a></li>
<li id="line_3732" class="even"><span class="lineNumber">&nbsp;3732&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_3732"></a></li>
<li id="line_3733" class="odd"><span class="lineNumber">&nbsp;3733&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_3733"></a></li>
<li id="line_3734" class="even"><span class="lineNumber">&nbsp;3734&nbsp;</span>		var&nbsp;calendar&nbsp;=&nbsp;view.calendar;<a name="line_3734"></a></li>
<li id="line_3735" class="odd"><span class="lineNumber">&nbsp;3735&nbsp;</span>		var&nbsp;el&nbsp;=&nbsp;seg.el;<a name="line_3735"></a></li>
<li id="line_3736" class="even"><span class="lineNumber">&nbsp;3736&nbsp;</span>		var&nbsp;event&nbsp;=&nbsp;seg.event;<a name="line_3736"></a></li>
<li id="line_3737" class="odd"><span class="lineNumber">&nbsp;3737&nbsp;</span>		var&nbsp;dropLocation;<a name="line_3737"></a></li>
<li id="line_3738" class="even"><span class="lineNumber">&nbsp;3738&nbsp;</span><a name="line_3738"></a></li>
<li id="line_3739" class="odd"><span class="lineNumber">&nbsp;3739&nbsp;</span>		//&nbsp;A&nbsp;clone&nbsp;of&nbsp;the&nbsp;original&nbsp;element&nbsp;that&nbsp;will&nbsp;move&nbsp;with&nbsp;the&nbsp;mouse<a name="line_3739"></a></li>
<li id="line_3740" class="even"><span class="lineNumber">&nbsp;3740&nbsp;</span>		var&nbsp;mouseFollower&nbsp;=&nbsp;new&nbsp;MouseFollower(seg.el,&nbsp;{<a name="line_3740"></a></li>
<li id="line_3741" class="odd"><span class="lineNumber">&nbsp;3741&nbsp;</span>			parentEl:&nbsp;view.el,<a name="line_3741"></a></li>
<li id="line_3742" class="even"><span class="lineNumber">&nbsp;3742&nbsp;</span>			opacity:&nbsp;view.opt('dragOpacity'),<a name="line_3742"></a></li>
<li id="line_3743" class="odd"><span class="lineNumber">&nbsp;3743&nbsp;</span>			revertDuration:&nbsp;view.opt('dragRevertDuration'),<a name="line_3743"></a></li>
<li id="line_3744" class="even"><span class="lineNumber">&nbsp;3744&nbsp;</span>			zIndex:&nbsp;2&nbsp;//&nbsp;one&nbsp;above&nbsp;the&nbsp;.fc-view<a name="line_3744"></a></li>
<li id="line_3745" class="odd"><span class="lineNumber">&nbsp;3745&nbsp;</span>		});<a name="line_3745"></a></li>
<li id="line_3746" class="even"><span class="lineNumber">&nbsp;3746&nbsp;</span><a name="line_3746"></a></li>
<li id="line_3747" class="odd"><span class="lineNumber">&nbsp;3747&nbsp;</span>		//&nbsp;Tracks&nbsp;mouse&nbsp;movement&nbsp;over&nbsp;the&nbsp;*view's*&nbsp;coordinate&nbsp;map.&nbsp;Allows&nbsp;dragging&nbsp;and&nbsp;dropping&nbsp;between&nbsp;subcomponents<a name="line_3747"></a></li>
<li id="line_3748" class="even"><span class="lineNumber">&nbsp;3748&nbsp;</span>		//&nbsp;of&nbsp;the&nbsp;view.<a name="line_3748"></a></li>
<li id="line_3749" class="odd"><span class="lineNumber">&nbsp;3749&nbsp;</span>		var&nbsp;dragListener&nbsp;=&nbsp;new&nbsp;CellDragListener(view.coordMap,&nbsp;{<a name="line_3749"></a></li>
<li id="line_3750" class="even"><span class="lineNumber">&nbsp;3750&nbsp;</span>			distance:&nbsp;5,<a name="line_3750"></a></li>
<li id="line_3751" class="odd"><span class="lineNumber">&nbsp;3751&nbsp;</span>			scroll:&nbsp;view.opt('dragScroll'),<a name="line_3751"></a></li>
<li id="line_3752" class="even"><span class="lineNumber">&nbsp;3752&nbsp;</span>			subjectEl:&nbsp;el,<a name="line_3752"></a></li>
<li id="line_3753" class="odd"><span class="lineNumber">&nbsp;3753&nbsp;</span>			subjectCenter:&nbsp;true,<a name="line_3753"></a></li>
<li id="line_3754" class="even"><span class="lineNumber">&nbsp;3754&nbsp;</span>			listenStart:&nbsp;function(ev)&nbsp;{<a name="line_3754"></a></li>
<li id="line_3755" class="odd"><span class="lineNumber">&nbsp;3755&nbsp;</span>				mouseFollower.hide();&nbsp;//&nbsp;don't&nbsp;show&nbsp;until&nbsp;we&nbsp;know&nbsp;this&nbsp;is&nbsp;a&nbsp;real&nbsp;drag<a name="line_3755"></a></li>
<li id="line_3756" class="even"><span class="lineNumber">&nbsp;3756&nbsp;</span>				mouseFollower.start(ev);<a name="line_3756"></a></li>
<li id="line_3757" class="odd"><span class="lineNumber">&nbsp;3757&nbsp;</span>			},<a name="line_3757"></a></li>
<li id="line_3758" class="even"><span class="lineNumber">&nbsp;3758&nbsp;</span>			dragStart:&nbsp;function(ev)&nbsp;{<a name="line_3758"></a></li>
<li id="line_3759" class="odd"><span class="lineNumber">&nbsp;3759&nbsp;</span>				_this.triggerSegMouseout(seg,&nbsp;ev);&nbsp;//&nbsp;ensure&nbsp;a&nbsp;mouseout&nbsp;on&nbsp;the&nbsp;manipulated&nbsp;event&nbsp;has&nbsp;been&nbsp;reported<a name="line_3759"></a></li>
<li id="line_3760" class="even"><span class="lineNumber">&nbsp;3760&nbsp;</span>				_this.segDragStart(seg,&nbsp;ev);<a name="line_3760"></a></li>
<li id="line_3761" class="odd"><span class="lineNumber">&nbsp;3761&nbsp;</span>				view.hideEvent(event);&nbsp;//&nbsp;hide&nbsp;all&nbsp;event&nbsp;segments.&nbsp;our&nbsp;mouseFollower&nbsp;will&nbsp;take&nbsp;over<a name="line_3761"></a></li>
<li id="line_3762" class="even"><span class="lineNumber">&nbsp;3762&nbsp;</span>			},<a name="line_3762"></a></li>
<li id="line_3763" class="odd"><span class="lineNumber">&nbsp;3763&nbsp;</span>			cellOver:&nbsp;function(cell,&nbsp;isOrig,&nbsp;origCell)&nbsp;{<a name="line_3763"></a></li>
<li id="line_3764" class="even"><span class="lineNumber">&nbsp;3764&nbsp;</span><a name="line_3764"></a></li>
<li id="line_3765" class="odd"><span class="lineNumber">&nbsp;3765&nbsp;</span>				//&nbsp;starting&nbsp;cell&nbsp;could&nbsp;be&nbsp;forced&nbsp;(DayGrid.limit)<a name="line_3765"></a></li>
<li id="line_3766" class="even"><span class="lineNumber">&nbsp;3766&nbsp;</span>				if&nbsp;(seg.cell)&nbsp;{<a name="line_3766"></a></li>
<li id="line_3767" class="odd"><span class="lineNumber">&nbsp;3767&nbsp;</span>					origCell&nbsp;=&nbsp;seg.cell;<a name="line_3767"></a></li>
<li id="line_3768" class="even"><span class="lineNumber">&nbsp;3768&nbsp;</span>				}<a name="line_3768"></a></li>
<li id="line_3769" class="odd"><span class="lineNumber">&nbsp;3769&nbsp;</span><a name="line_3769"></a></li>
<li id="line_3770" class="even"><span class="lineNumber">&nbsp;3770&nbsp;</span>				dropLocation&nbsp;=&nbsp;_this.computeEventDrop(origCell,&nbsp;cell,&nbsp;event);<a name="line_3770"></a></li>
<li id="line_3771" class="odd"><span class="lineNumber">&nbsp;3771&nbsp;</span><a name="line_3771"></a></li>
<li id="line_3772" class="even"><span class="lineNumber">&nbsp;3772&nbsp;</span>				if&nbsp;(dropLocation&nbsp;&amp;&amp;&nbsp;!calendar.isEventRangeAllowed(dropLocation,&nbsp;event))&nbsp;{<a name="line_3772"></a></li>
<li id="line_3773" class="odd"><span class="lineNumber">&nbsp;3773&nbsp;</span>					disableCursor();<a name="line_3773"></a></li>
<li id="line_3774" class="even"><span class="lineNumber">&nbsp;3774&nbsp;</span>					dropLocation&nbsp;=&nbsp;null;<a name="line_3774"></a></li>
<li id="line_3775" class="odd"><span class="lineNumber">&nbsp;3775&nbsp;</span>				}<a name="line_3775"></a></li>
<li id="line_3776" class="even"><span class="lineNumber">&nbsp;3776&nbsp;</span><a name="line_3776"></a></li>
<li id="line_3777" class="odd"><span class="lineNumber">&nbsp;3777&nbsp;</span>				//&nbsp;if&nbsp;a&nbsp;valid&nbsp;drop&nbsp;location,&nbsp;have&nbsp;the&nbsp;subclass&nbsp;render&nbsp;a&nbsp;visual&nbsp;indication<a name="line_3777"></a></li>
<li id="line_3778" class="even"><span class="lineNumber">&nbsp;3778&nbsp;</span>				if&nbsp;(dropLocation&nbsp;&amp;&amp;&nbsp;view.renderDrag(dropLocation,&nbsp;seg))&nbsp;{<a name="line_3778"></a></li>
<li id="line_3779" class="odd"><span class="lineNumber">&nbsp;3779&nbsp;</span>					mouseFollower.hide();&nbsp;//&nbsp;if&nbsp;the&nbsp;subclass&nbsp;is&nbsp;already&nbsp;using&nbsp;a&nbsp;mock&nbsp;event&nbsp;"helper",&nbsp;hide&nbsp;our&nbsp;own<a name="line_3779"></a></li>
<li id="line_3780" class="even"><span class="lineNumber">&nbsp;3780&nbsp;</span>				}<a name="line_3780"></a></li>
<li id="line_3781" class="odd"><span class="lineNumber">&nbsp;3781&nbsp;</span>				else&nbsp;{<a name="line_3781"></a></li>
<li id="line_3782" class="even"><span class="lineNumber">&nbsp;3782&nbsp;</span>					mouseFollower.show();&nbsp;//&nbsp;otherwise,&nbsp;have&nbsp;the&nbsp;helper&nbsp;follow&nbsp;the&nbsp;mouse&nbsp;(no&nbsp;snapping)<a name="line_3782"></a></li>
<li id="line_3783" class="odd"><span class="lineNumber">&nbsp;3783&nbsp;</span>				}<a name="line_3783"></a></li>
<li id="line_3784" class="even"><span class="lineNumber">&nbsp;3784&nbsp;</span><a name="line_3784"></a></li>
<li id="line_3785" class="odd"><span class="lineNumber">&nbsp;3785&nbsp;</span>				if&nbsp;(isOrig)&nbsp;{<a name="line_3785"></a></li>
<li id="line_3786" class="even"><span class="lineNumber">&nbsp;3786&nbsp;</span>					dropLocation&nbsp;=&nbsp;null;&nbsp;//&nbsp;needs&nbsp;to&nbsp;have&nbsp;moved&nbsp;cells&nbsp;to&nbsp;be&nbsp;a&nbsp;valid&nbsp;drop<a name="line_3786"></a></li>
<li id="line_3787" class="odd"><span class="lineNumber">&nbsp;3787&nbsp;</span>				}<a name="line_3787"></a></li>
<li id="line_3788" class="even"><span class="lineNumber">&nbsp;3788&nbsp;</span>			},<a name="line_3788"></a></li>
<li id="line_3789" class="odd"><span class="lineNumber">&nbsp;3789&nbsp;</span>			cellOut:&nbsp;function()&nbsp;{&nbsp;//&nbsp;called&nbsp;before&nbsp;mouse&nbsp;moves&nbsp;to&nbsp;a&nbsp;different&nbsp;cell&nbsp;OR&nbsp;moved&nbsp;out&nbsp;of&nbsp;all&nbsp;cells<a name="line_3789"></a></li>
<li id="line_3790" class="even"><span class="lineNumber">&nbsp;3790&nbsp;</span>				view.unrenderDrag();&nbsp;//&nbsp;unrender&nbsp;whatever&nbsp;was&nbsp;done&nbsp;in&nbsp;renderDrag<a name="line_3790"></a></li>
<li id="line_3791" class="odd"><span class="lineNumber">&nbsp;3791&nbsp;</span>				mouseFollower.show();&nbsp;//&nbsp;show&nbsp;in&nbsp;case&nbsp;we&nbsp;are&nbsp;moving&nbsp;out&nbsp;of&nbsp;all&nbsp;cells<a name="line_3791"></a></li>
<li id="line_3792" class="even"><span class="lineNumber">&nbsp;3792&nbsp;</span>				dropLocation&nbsp;=&nbsp;null;<a name="line_3792"></a></li>
<li id="line_3793" class="odd"><span class="lineNumber">&nbsp;3793&nbsp;</span>			},<a name="line_3793"></a></li>
<li id="line_3794" class="even"><span class="lineNumber">&nbsp;3794&nbsp;</span>			cellDone:&nbsp;function()&nbsp;{&nbsp;//&nbsp;Called&nbsp;after&nbsp;a&nbsp;cellOut&nbsp;OR&nbsp;before&nbsp;a&nbsp;dragStop<a name="line_3794"></a></li>
<li id="line_3795" class="odd"><span class="lineNumber">&nbsp;3795&nbsp;</span>				enableCursor();<a name="line_3795"></a></li>
<li id="line_3796" class="even"><span class="lineNumber">&nbsp;3796&nbsp;</span>			},<a name="line_3796"></a></li>
<li id="line_3797" class="odd"><span class="lineNumber">&nbsp;3797&nbsp;</span>			dragStop:&nbsp;function(ev)&nbsp;{<a name="line_3797"></a></li>
<li id="line_3798" class="even"><span class="lineNumber">&nbsp;3798&nbsp;</span>				//&nbsp;do&nbsp;revert&nbsp;animation&nbsp;if&nbsp;hasn't&nbsp;changed.&nbsp;calls&nbsp;a&nbsp;callback&nbsp;when&nbsp;finished&nbsp;(whether&nbsp;animation&nbsp;or&nbsp;not)<a name="line_3798"></a></li>
<li id="line_3799" class="odd"><span class="lineNumber">&nbsp;3799&nbsp;</span>				mouseFollower.stop(!dropLocation,&nbsp;function()&nbsp;{<a name="line_3799"></a></li>
<li id="line_3800" class="even"><span class="lineNumber">&nbsp;3800&nbsp;</span>					view.unrenderDrag();<a name="line_3800"></a></li>
<li id="line_3801" class="odd"><span class="lineNumber">&nbsp;3801&nbsp;</span>					view.showEvent(event);<a name="line_3801"></a></li>
<li id="line_3802" class="even"><span class="lineNumber">&nbsp;3802&nbsp;</span>					_this.segDragStop(seg,&nbsp;ev);<a name="line_3802"></a></li>
<li id="line_3803" class="odd"><span class="lineNumber">&nbsp;3803&nbsp;</span><a name="line_3803"></a></li>
<li id="line_3804" class="even"><span class="lineNumber">&nbsp;3804&nbsp;</span>					if&nbsp;(dropLocation)&nbsp;{<a name="line_3804"></a></li>
<li id="line_3805" class="odd"><span class="lineNumber">&nbsp;3805&nbsp;</span>						view.reportEventDrop(event,&nbsp;dropLocation,&nbsp;this.largeUnit,&nbsp;el,&nbsp;ev);<a name="line_3805"></a></li>
<li id="line_3806" class="even"><span class="lineNumber">&nbsp;3806&nbsp;</span>					}<a name="line_3806"></a></li>
<li id="line_3807" class="odd"><span class="lineNumber">&nbsp;3807&nbsp;</span>				});<a name="line_3807"></a></li>
<li id="line_3808" class="even"><span class="lineNumber">&nbsp;3808&nbsp;</span>			},<a name="line_3808"></a></li>
<li id="line_3809" class="odd"><span class="lineNumber">&nbsp;3809&nbsp;</span>			listenStop:&nbsp;function()&nbsp;{<a name="line_3809"></a></li>
<li id="line_3810" class="even"><span class="lineNumber">&nbsp;3810&nbsp;</span>				mouseFollower.stop();&nbsp;//&nbsp;put&nbsp;in&nbsp;listenStop&nbsp;in&nbsp;case&nbsp;there&nbsp;was&nbsp;a&nbsp;mousedown&nbsp;but&nbsp;the&nbsp;drag&nbsp;never&nbsp;started<a name="line_3810"></a></li>
<li id="line_3811" class="odd"><span class="lineNumber">&nbsp;3811&nbsp;</span>			}<a name="line_3811"></a></li>
<li id="line_3812" class="even"><span class="lineNumber">&nbsp;3812&nbsp;</span>		});<a name="line_3812"></a></li>
<li id="line_3813" class="odd"><span class="lineNumber">&nbsp;3813&nbsp;</span><a name="line_3813"></a></li>
<li id="line_3814" class="even"><span class="lineNumber">&nbsp;3814&nbsp;</span>		dragListener.mousedown(ev);&nbsp;//&nbsp;start&nbsp;listening,&nbsp;which&nbsp;will&nbsp;eventually&nbsp;lead&nbsp;to&nbsp;a&nbsp;dragStart<a name="line_3814"></a></li>
<li id="line_3815" class="odd"><span class="lineNumber">&nbsp;3815&nbsp;</span>	},<a name="line_3815"></a></li>
<li id="line_3816" class="even"><span class="lineNumber">&nbsp;3816&nbsp;</span><a name="line_3816"></a></li>
<li id="line_3817" class="odd"><span class="lineNumber">&nbsp;3817&nbsp;</span><a name="line_3817"></a></li>
<li id="line_3818" class="even"><span class="lineNumber">&nbsp;3818&nbsp;</span>	//&nbsp;Called&nbsp;before&nbsp;event&nbsp;segment&nbsp;dragging&nbsp;starts<a name="line_3818"></a></li>
<li id="line_3819" class="odd"><span class="lineNumber">&nbsp;3819&nbsp;</span>	segDragStart:&nbsp;function(seg,&nbsp;ev)&nbsp;{<a name="line_3819"></a></li>
<li id="line_3820" class="even"><span class="lineNumber">&nbsp;3820&nbsp;</span>		this.isDraggingSeg&nbsp;=&nbsp;true;<a name="line_3820"></a></li>
<li id="line_3821" class="odd"><span class="lineNumber">&nbsp;3821&nbsp;</span>		this.view.trigger('eventDragStart',&nbsp;seg.el[0],&nbsp;seg.event,&nbsp;ev,&nbsp;{});&nbsp;//&nbsp;last&nbsp;argument&nbsp;is&nbsp;jqui&nbsp;dummy<a name="line_3821"></a></li>
<li id="line_3822" class="even"><span class="lineNumber">&nbsp;3822&nbsp;</span>	},<a name="line_3822"></a></li>
<li id="line_3823" class="odd"><span class="lineNumber">&nbsp;3823&nbsp;</span><a name="line_3823"></a></li>
<li id="line_3824" class="even"><span class="lineNumber">&nbsp;3824&nbsp;</span><a name="line_3824"></a></li>
<li id="line_3825" class="odd"><span class="lineNumber">&nbsp;3825&nbsp;</span>	//&nbsp;Called&nbsp;after&nbsp;event&nbsp;segment&nbsp;dragging&nbsp;stops<a name="line_3825"></a></li>
<li id="line_3826" class="even"><span class="lineNumber">&nbsp;3826&nbsp;</span>	segDragStop:&nbsp;function(seg,&nbsp;ev)&nbsp;{<a name="line_3826"></a></li>
<li id="line_3827" class="odd"><span class="lineNumber">&nbsp;3827&nbsp;</span>		this.isDraggingSeg&nbsp;=&nbsp;false;<a name="line_3827"></a></li>
<li id="line_3828" class="even"><span class="lineNumber">&nbsp;3828&nbsp;</span>		this.view.trigger('eventDragStop',&nbsp;seg.el[0],&nbsp;seg.event,&nbsp;ev,&nbsp;{});&nbsp;//&nbsp;last&nbsp;argument&nbsp;is&nbsp;jqui&nbsp;dummy<a name="line_3828"></a></li>
<li id="line_3829" class="odd"><span class="lineNumber">&nbsp;3829&nbsp;</span>	},<a name="line_3829"></a></li>
<li id="line_3830" class="even"><span class="lineNumber">&nbsp;3830&nbsp;</span><a name="line_3830"></a></li>
<li id="line_3831" class="odd"><span class="lineNumber">&nbsp;3831&nbsp;</span><a name="line_3831"></a></li>
<li id="line_3832" class="even"><span class="lineNumber">&nbsp;3832&nbsp;</span>	//&nbsp;Given&nbsp;the&nbsp;cell&nbsp;an&nbsp;event&nbsp;drag&nbsp;began,&nbsp;and&nbsp;the&nbsp;cell&nbsp;event&nbsp;was&nbsp;dropped,&nbsp;calculates&nbsp;the&nbsp;new&nbsp;start/end/allDay<a name="line_3832"></a></li>
<li id="line_3833" class="odd"><span class="lineNumber">&nbsp;3833&nbsp;</span>	//&nbsp;values&nbsp;for&nbsp;the&nbsp;event.&nbsp;Subclasses&nbsp;may&nbsp;override&nbsp;and&nbsp;set&nbsp;additional&nbsp;properties&nbsp;to&nbsp;be&nbsp;used&nbsp;by&nbsp;renderDrag.<a name="line_3833"></a></li>
<li id="line_3834" class="even"><span class="lineNumber">&nbsp;3834&nbsp;</span>	//&nbsp;A&nbsp;falsy&nbsp;returned&nbsp;value&nbsp;indicates&nbsp;an&nbsp;invalid&nbsp;drop.<a name="line_3834"></a></li>
<li id="line_3835" class="odd"><span class="lineNumber">&nbsp;3835&nbsp;</span>	computeEventDrop:&nbsp;function(startCell,&nbsp;endCell,&nbsp;event)&nbsp;{<a name="line_3835"></a></li>
<li id="line_3836" class="even"><span class="lineNumber">&nbsp;3836&nbsp;</span>		var&nbsp;calendar&nbsp;=&nbsp;this.view.calendar;<a name="line_3836"></a></li>
<li id="line_3837" class="odd"><span class="lineNumber">&nbsp;3837&nbsp;</span>		var&nbsp;dragStart&nbsp;=&nbsp;startCell.start;<a name="line_3837"></a></li>
<li id="line_3838" class="even"><span class="lineNumber">&nbsp;3838&nbsp;</span>		var&nbsp;dragEnd&nbsp;=&nbsp;endCell.start;<a name="line_3838"></a></li>
<li id="line_3839" class="odd"><span class="lineNumber">&nbsp;3839&nbsp;</span>		var&nbsp;delta;<a name="line_3839"></a></li>
<li id="line_3840" class="even"><span class="lineNumber">&nbsp;3840&nbsp;</span>		var&nbsp;dropLocation;<a name="line_3840"></a></li>
<li id="line_3841" class="odd"><span class="lineNumber">&nbsp;3841&nbsp;</span><a name="line_3841"></a></li>
<li id="line_3842" class="even"><span class="lineNumber">&nbsp;3842&nbsp;</span>		if&nbsp;(dragStart.hasTime()&nbsp;===&nbsp;dragEnd.hasTime())&nbsp;{<a name="line_3842"></a></li>
<li id="line_3843" class="odd"><span class="lineNumber">&nbsp;3843&nbsp;</span>			delta&nbsp;=&nbsp;this.diffDates(dragEnd,&nbsp;dragStart);<a name="line_3843"></a></li>
<li id="line_3844" class="even"><span class="lineNumber">&nbsp;3844&nbsp;</span><a name="line_3844"></a></li>
<li id="line_3845" class="odd"><span class="lineNumber">&nbsp;3845&nbsp;</span>			//&nbsp;if&nbsp;an&nbsp;all-day&nbsp;event&nbsp;was&nbsp;in&nbsp;a&nbsp;timed&nbsp;area&nbsp;and&nbsp;it&nbsp;was&nbsp;dragged&nbsp;to&nbsp;a&nbsp;different&nbsp;time,<a name="line_3845"></a></li>
<li id="line_3846" class="even"><span class="lineNumber">&nbsp;3846&nbsp;</span>			//&nbsp;guarantee&nbsp;an&nbsp;end&nbsp;and&nbsp;adjust&nbsp;start/end&nbsp;to&nbsp;have&nbsp;times<a name="line_3846"></a></li>
<li id="line_3847" class="odd"><span class="lineNumber">&nbsp;3847&nbsp;</span>			if&nbsp;(event.allDay&nbsp;&amp;&amp;&nbsp;durationHasTime(delta))&nbsp;{<a name="line_3847"></a></li>
<li id="line_3848" class="even"><span class="lineNumber">&nbsp;3848&nbsp;</span>				dropLocation&nbsp;=&nbsp;{<a name="line_3848"></a></li>
<li id="line_3849" class="odd"><span class="lineNumber">&nbsp;3849&nbsp;</span>					start:&nbsp;event.start.clone(),<a name="line_3849"></a></li>
<li id="line_3850" class="even"><span class="lineNumber">&nbsp;3850&nbsp;</span>					end:&nbsp;calendar.getEventEnd(event),&nbsp;//&nbsp;will&nbsp;be&nbsp;an&nbsp;ambig&nbsp;day<a name="line_3850"></a></li>
<li id="line_3851" class="odd"><span class="lineNumber">&nbsp;3851&nbsp;</span>					allDay:&nbsp;false&nbsp;//&nbsp;for&nbsp;normalizeEventRangeTimes<a name="line_3851"></a></li>
<li id="line_3852" class="even"><span class="lineNumber">&nbsp;3852&nbsp;</span>				};<a name="line_3852"></a></li>
<li id="line_3853" class="odd"><span class="lineNumber">&nbsp;3853&nbsp;</span>				calendar.normalizeEventRangeTimes(dropLocation);<a name="line_3853"></a></li>
<li id="line_3854" class="even"><span class="lineNumber">&nbsp;3854&nbsp;</span>			}<a name="line_3854"></a></li>
<li id="line_3855" class="odd"><span class="lineNumber">&nbsp;3855&nbsp;</span>			//&nbsp;othewise,&nbsp;work&nbsp;off&nbsp;existing&nbsp;values<a name="line_3855"></a></li>
<li id="line_3856" class="even"><span class="lineNumber">&nbsp;3856&nbsp;</span>			else&nbsp;{<a name="line_3856"></a></li>
<li id="line_3857" class="odd"><span class="lineNumber">&nbsp;3857&nbsp;</span>				dropLocation&nbsp;=&nbsp;{<a name="line_3857"></a></li>
<li id="line_3858" class="even"><span class="lineNumber">&nbsp;3858&nbsp;</span>					start:&nbsp;event.start.clone(),<a name="line_3858"></a></li>
<li id="line_3859" class="odd"><span class="lineNumber">&nbsp;3859&nbsp;</span>					end:&nbsp;event.end&nbsp;?&nbsp;event.end.clone()&nbsp;:&nbsp;null,<a name="line_3859"></a></li>
<li id="line_3860" class="even"><span class="lineNumber">&nbsp;3860&nbsp;</span>					allDay:&nbsp;event.allDay&nbsp;//&nbsp;keep&nbsp;it&nbsp;the&nbsp;same<a name="line_3860"></a></li>
<li id="line_3861" class="odd"><span class="lineNumber">&nbsp;3861&nbsp;</span>				};<a name="line_3861"></a></li>
<li id="line_3862" class="even"><span class="lineNumber">&nbsp;3862&nbsp;</span>			}<a name="line_3862"></a></li>
<li id="line_3863" class="odd"><span class="lineNumber">&nbsp;3863&nbsp;</span><a name="line_3863"></a></li>
<li id="line_3864" class="even"><span class="lineNumber">&nbsp;3864&nbsp;</span>			dropLocation.start.add(delta);<a name="line_3864"></a></li>
<li id="line_3865" class="odd"><span class="lineNumber">&nbsp;3865&nbsp;</span>			if&nbsp;(dropLocation.end)&nbsp;{<a name="line_3865"></a></li>
<li id="line_3866" class="even"><span class="lineNumber">&nbsp;3866&nbsp;</span>				dropLocation.end.add(delta);<a name="line_3866"></a></li>
<li id="line_3867" class="odd"><span class="lineNumber">&nbsp;3867&nbsp;</span>			}<a name="line_3867"></a></li>
<li id="line_3868" class="even"><span class="lineNumber">&nbsp;3868&nbsp;</span>		}<a name="line_3868"></a></li>
<li id="line_3869" class="odd"><span class="lineNumber">&nbsp;3869&nbsp;</span>		else&nbsp;{<a name="line_3869"></a></li>
<li id="line_3870" class="even"><span class="lineNumber">&nbsp;3870&nbsp;</span>			//&nbsp;if&nbsp;switching&nbsp;from&nbsp;day&nbsp;&lt;-&gt;&nbsp;timed,&nbsp;start&nbsp;should&nbsp;be&nbsp;reset&nbsp;to&nbsp;the&nbsp;dropped&nbsp;date,&nbsp;and&nbsp;the&nbsp;end&nbsp;cleared<a name="line_3870"></a></li>
<li id="line_3871" class="odd"><span class="lineNumber">&nbsp;3871&nbsp;</span>			dropLocation&nbsp;=&nbsp;{<a name="line_3871"></a></li>
<li id="line_3872" class="even"><span class="lineNumber">&nbsp;3872&nbsp;</span>				start:&nbsp;dragEnd.clone(),<a name="line_3872"></a></li>
<li id="line_3873" class="odd"><span class="lineNumber">&nbsp;3873&nbsp;</span>				end:&nbsp;null,&nbsp;//&nbsp;end&nbsp;should&nbsp;be&nbsp;cleared<a name="line_3873"></a></li>
<li id="line_3874" class="even"><span class="lineNumber">&nbsp;3874&nbsp;</span>				allDay:&nbsp;!dragEnd.hasTime()<a name="line_3874"></a></li>
<li id="line_3875" class="odd"><span class="lineNumber">&nbsp;3875&nbsp;</span>			};<a name="line_3875"></a></li>
<li id="line_3876" class="even"><span class="lineNumber">&nbsp;3876&nbsp;</span>		}<a name="line_3876"></a></li>
<li id="line_3877" class="odd"><span class="lineNumber">&nbsp;3877&nbsp;</span><a name="line_3877"></a></li>
<li id="line_3878" class="even"><span class="lineNumber">&nbsp;3878&nbsp;</span>		return&nbsp;dropLocation;<a name="line_3878"></a></li>
<li id="line_3879" class="odd"><span class="lineNumber">&nbsp;3879&nbsp;</span>	},<a name="line_3879"></a></li>
<li id="line_3880" class="even"><span class="lineNumber">&nbsp;3880&nbsp;</span><a name="line_3880"></a></li>
<li id="line_3881" class="odd"><span class="lineNumber">&nbsp;3881&nbsp;</span><a name="line_3881"></a></li>
<li id="line_3882" class="even"><span class="lineNumber">&nbsp;3882&nbsp;</span>	//&nbsp;Utility&nbsp;for&nbsp;apply&nbsp;dragOpacity&nbsp;to&nbsp;a&nbsp;jQuery&nbsp;set<a name="line_3882"></a></li>
<li id="line_3883" class="odd"><span class="lineNumber">&nbsp;3883&nbsp;</span>	applyDragOpacity:&nbsp;function(els)&nbsp;{<a name="line_3883"></a></li>
<li id="line_3884" class="even"><span class="lineNumber">&nbsp;3884&nbsp;</span>		var&nbsp;opacity&nbsp;=&nbsp;this.view.opt('dragOpacity');<a name="line_3884"></a></li>
<li id="line_3885" class="odd"><span class="lineNumber">&nbsp;3885&nbsp;</span><a name="line_3885"></a></li>
<li id="line_3886" class="even"><span class="lineNumber">&nbsp;3886&nbsp;</span>		if&nbsp;(opacity&nbsp;!=&nbsp;null)&nbsp;{<a name="line_3886"></a></li>
<li id="line_3887" class="odd"><span class="lineNumber">&nbsp;3887&nbsp;</span>			els.each(function(i,&nbsp;node)&nbsp;{<a name="line_3887"></a></li>
<li id="line_3888" class="even"><span class="lineNumber">&nbsp;3888&nbsp;</span>				//&nbsp;Don't&nbsp;use&nbsp;jQuery&nbsp;(will&nbsp;set&nbsp;an&nbsp;IE&nbsp;filter),&nbsp;do&nbsp;it&nbsp;the&nbsp;old&nbsp;fashioned&nbsp;way.<a name="line_3888"></a></li>
<li id="line_3889" class="odd"><span class="lineNumber">&nbsp;3889&nbsp;</span>				//&nbsp;In&nbsp;IE8,&nbsp;a&nbsp;helper&nbsp;element&nbsp;will&nbsp;disappears&nbsp;if&nbsp;there's&nbsp;a&nbsp;filter.<a name="line_3889"></a></li>
<li id="line_3890" class="even"><span class="lineNumber">&nbsp;3890&nbsp;</span>				node.style.opacity&nbsp;=&nbsp;opacity;<a name="line_3890"></a></li>
<li id="line_3891" class="odd"><span class="lineNumber">&nbsp;3891&nbsp;</span>			});<a name="line_3891"></a></li>
<li id="line_3892" class="even"><span class="lineNumber">&nbsp;3892&nbsp;</span>		}<a name="line_3892"></a></li>
<li id="line_3893" class="odd"><span class="lineNumber">&nbsp;3893&nbsp;</span>	},<a name="line_3893"></a></li>
<li id="line_3894" class="even"><span class="lineNumber">&nbsp;3894&nbsp;</span><a name="line_3894"></a></li>
<li id="line_3895" class="odd"><span class="lineNumber">&nbsp;3895&nbsp;</span><a name="line_3895"></a></li>
<li id="line_3896" class="even"><span class="lineNumber">&nbsp;3896&nbsp;</span>	/*&nbsp;External&nbsp;Element&nbsp;Dragging<a name="line_3896"></a></li>
<li id="line_3897" class="odd"><span class="lineNumber">&nbsp;3897&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3897"></a></li>
<li id="line_3898" class="even"><span class="lineNumber">&nbsp;3898&nbsp;</span><a name="line_3898"></a></li>
<li id="line_3899" class="odd"><span class="lineNumber">&nbsp;3899&nbsp;</span><a name="line_3899"></a></li>
<li id="line_3900" class="even"><span class="lineNumber">&nbsp;3900&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;a&nbsp;jQuery&nbsp;UI&nbsp;drag&nbsp;is&nbsp;initiated&nbsp;anywhere&nbsp;in&nbsp;the&nbsp;DOM<a name="line_3900"></a></li>
<li id="line_3901" class="odd"><span class="lineNumber">&nbsp;3901&nbsp;</span>	externalDragStart:&nbsp;function(ev,&nbsp;ui)&nbsp;{<a name="line_3901"></a></li>
<li id="line_3902" class="even"><span class="lineNumber">&nbsp;3902&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_3902"></a></li>
<li id="line_3903" class="odd"><span class="lineNumber">&nbsp;3903&nbsp;</span>		var&nbsp;el;<a name="line_3903"></a></li>
<li id="line_3904" class="even"><span class="lineNumber">&nbsp;3904&nbsp;</span>		var&nbsp;accept;<a name="line_3904"></a></li>
<li id="line_3905" class="odd"><span class="lineNumber">&nbsp;3905&nbsp;</span><a name="line_3905"></a></li>
<li id="line_3906" class="even"><span class="lineNumber">&nbsp;3906&nbsp;</span>		if&nbsp;(view.opt('droppable'))&nbsp;{&nbsp;//&nbsp;only&nbsp;listen&nbsp;if&nbsp;this&nbsp;setting&nbsp;is&nbsp;on<a name="line_3906"></a></li>
<li id="line_3907" class="odd"><span class="lineNumber">&nbsp;3907&nbsp;</span>			el&nbsp;=&nbsp;$((ui&nbsp;?&nbsp;ui.item&nbsp;:&nbsp;null)&nbsp;||&nbsp;ev.target);<a name="line_3907"></a></li>
<li id="line_3908" class="even"><span class="lineNumber">&nbsp;3908&nbsp;</span><a name="line_3908"></a></li>
<li id="line_3909" class="odd"><span class="lineNumber">&nbsp;3909&nbsp;</span>			//&nbsp;Test&nbsp;that&nbsp;the&nbsp;dragged&nbsp;element&nbsp;passes&nbsp;the&nbsp;dropAccept&nbsp;selector&nbsp;or&nbsp;filter&nbsp;function.<a name="line_3909"></a></li>
<li id="line_3910" class="even"><span class="lineNumber">&nbsp;3910&nbsp;</span>			//&nbsp;FYI,&nbsp;the&nbsp;default&nbsp;is&nbsp;"*"&nbsp;(matches&nbsp;all)<a name="line_3910"></a></li>
<li id="line_3911" class="odd"><span class="lineNumber">&nbsp;3911&nbsp;</span>			accept&nbsp;=&nbsp;view.opt('dropAccept');<a name="line_3911"></a></li>
<li id="line_3912" class="even"><span class="lineNumber">&nbsp;3912&nbsp;</span>			if&nbsp;($.isFunction(accept)&nbsp;?&nbsp;accept.call(el[0],&nbsp;el)&nbsp;:&nbsp;el.is(accept))&nbsp;{<a name="line_3912"></a></li>
<li id="line_3913" class="odd"><span class="lineNumber">&nbsp;3913&nbsp;</span>				if&nbsp;(!this.isDraggingExternal)&nbsp;{&nbsp;//&nbsp;prevent&nbsp;double-listening&nbsp;if&nbsp;fired&nbsp;twice<a name="line_3913"></a></li>
<li id="line_3914" class="even"><span class="lineNumber">&nbsp;3914&nbsp;</span>					this.listenToExternalDrag(el,&nbsp;ev,&nbsp;ui);<a name="line_3914"></a></li>
<li id="line_3915" class="odd"><span class="lineNumber">&nbsp;3915&nbsp;</span>				}<a name="line_3915"></a></li>
<li id="line_3916" class="even"><span class="lineNumber">&nbsp;3916&nbsp;</span>			}<a name="line_3916"></a></li>
<li id="line_3917" class="odd"><span class="lineNumber">&nbsp;3917&nbsp;</span>		}<a name="line_3917"></a></li>
<li id="line_3918" class="even"><span class="lineNumber">&nbsp;3918&nbsp;</span>	},<a name="line_3918"></a></li>
<li id="line_3919" class="odd"><span class="lineNumber">&nbsp;3919&nbsp;</span><a name="line_3919"></a></li>
<li id="line_3920" class="even"><span class="lineNumber">&nbsp;3920&nbsp;</span><a name="line_3920"></a></li>
<li id="line_3921" class="odd"><span class="lineNumber">&nbsp;3921&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;a&nbsp;jQuery&nbsp;UI&nbsp;drag&nbsp;starts&nbsp;and&nbsp;it&nbsp;needs&nbsp;to&nbsp;be&nbsp;monitored&nbsp;for&nbsp;cell&nbsp;dropping<a name="line_3921"></a></li>
<li id="line_3922" class="even"><span class="lineNumber">&nbsp;3922&nbsp;</span>	listenToExternalDrag:&nbsp;function(el,&nbsp;ev,&nbsp;ui)&nbsp;{<a name="line_3922"></a></li>
<li id="line_3923" class="odd"><span class="lineNumber">&nbsp;3923&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_3923"></a></li>
<li id="line_3924" class="even"><span class="lineNumber">&nbsp;3924&nbsp;</span>		var&nbsp;meta&nbsp;=&nbsp;getDraggedElMeta(el);&nbsp;//&nbsp;extra&nbsp;data&nbsp;about&nbsp;event&nbsp;drop,&nbsp;including&nbsp;possible&nbsp;event&nbsp;to&nbsp;create<a name="line_3924"></a></li>
<li id="line_3925" class="odd"><span class="lineNumber">&nbsp;3925&nbsp;</span>		var&nbsp;dragListener;<a name="line_3925"></a></li>
<li id="line_3926" class="even"><span class="lineNumber">&nbsp;3926&nbsp;</span>		var&nbsp;dropLocation;&nbsp;//&nbsp;a&nbsp;null&nbsp;value&nbsp;signals&nbsp;an&nbsp;unsuccessful&nbsp;drag<a name="line_3926"></a></li>
<li id="line_3927" class="odd"><span class="lineNumber">&nbsp;3927&nbsp;</span><a name="line_3927"></a></li>
<li id="line_3928" class="even"><span class="lineNumber">&nbsp;3928&nbsp;</span>		//&nbsp;listener&nbsp;that&nbsp;tracks&nbsp;mouse&nbsp;movement&nbsp;over&nbsp;date-associated&nbsp;pixel&nbsp;regions<a name="line_3928"></a></li>
<li id="line_3929" class="odd"><span class="lineNumber">&nbsp;3929&nbsp;</span>		dragListener&nbsp;=&nbsp;new&nbsp;CellDragListener(this.coordMap,&nbsp;{<a name="line_3929"></a></li>
<li id="line_3930" class="even"><span class="lineNumber">&nbsp;3930&nbsp;</span>			listenStart:&nbsp;function()&nbsp;{<a name="line_3930"></a></li>
<li id="line_3931" class="odd"><span class="lineNumber">&nbsp;3931&nbsp;</span>				_this.isDraggingExternal&nbsp;=&nbsp;true;<a name="line_3931"></a></li>
<li id="line_3932" class="even"><span class="lineNumber">&nbsp;3932&nbsp;</span>			},<a name="line_3932"></a></li>
<li id="line_3933" class="odd"><span class="lineNumber">&nbsp;3933&nbsp;</span>			cellOver:&nbsp;function(cell)&nbsp;{<a name="line_3933"></a></li>
<li id="line_3934" class="even"><span class="lineNumber">&nbsp;3934&nbsp;</span>				dropLocation&nbsp;=&nbsp;_this.computeExternalDrop(cell,&nbsp;meta);<a name="line_3934"></a></li>
<li id="line_3935" class="odd"><span class="lineNumber">&nbsp;3935&nbsp;</span>				if&nbsp;(dropLocation)&nbsp;{<a name="line_3935"></a></li>
<li id="line_3936" class="even"><span class="lineNumber">&nbsp;3936&nbsp;</span>					_this.renderDrag(dropLocation);&nbsp;//&nbsp;called&nbsp;without&nbsp;a&nbsp;seg&nbsp;parameter<a name="line_3936"></a></li>
<li id="line_3937" class="odd"><span class="lineNumber">&nbsp;3937&nbsp;</span>				}<a name="line_3937"></a></li>
<li id="line_3938" class="even"><span class="lineNumber">&nbsp;3938&nbsp;</span>				else&nbsp;{&nbsp;//&nbsp;invalid&nbsp;drop&nbsp;cell<a name="line_3938"></a></li>
<li id="line_3939" class="odd"><span class="lineNumber">&nbsp;3939&nbsp;</span>					disableCursor();<a name="line_3939"></a></li>
<li id="line_3940" class="even"><span class="lineNumber">&nbsp;3940&nbsp;</span>				}<a name="line_3940"></a></li>
<li id="line_3941" class="odd"><span class="lineNumber">&nbsp;3941&nbsp;</span>			},<a name="line_3941"></a></li>
<li id="line_3942" class="even"><span class="lineNumber">&nbsp;3942&nbsp;</span>			cellOut:&nbsp;function()&nbsp;{<a name="line_3942"></a></li>
<li id="line_3943" class="odd"><span class="lineNumber">&nbsp;3943&nbsp;</span>				dropLocation&nbsp;=&nbsp;null;&nbsp;//&nbsp;signal&nbsp;unsuccessful<a name="line_3943"></a></li>
<li id="line_3944" class="even"><span class="lineNumber">&nbsp;3944&nbsp;</span>				_this.unrenderDrag();<a name="line_3944"></a></li>
<li id="line_3945" class="odd"><span class="lineNumber">&nbsp;3945&nbsp;</span>				enableCursor();<a name="line_3945"></a></li>
<li id="line_3946" class="even"><span class="lineNumber">&nbsp;3946&nbsp;</span>			},<a name="line_3946"></a></li>
<li id="line_3947" class="odd"><span class="lineNumber">&nbsp;3947&nbsp;</span>			dragStop:&nbsp;function()&nbsp;{<a name="line_3947"></a></li>
<li id="line_3948" class="even"><span class="lineNumber">&nbsp;3948&nbsp;</span>				_this.unrenderDrag();<a name="line_3948"></a></li>
<li id="line_3949" class="odd"><span class="lineNumber">&nbsp;3949&nbsp;</span>				enableCursor();<a name="line_3949"></a></li>
<li id="line_3950" class="even"><span class="lineNumber">&nbsp;3950&nbsp;</span><a name="line_3950"></a></li>
<li id="line_3951" class="odd"><span class="lineNumber">&nbsp;3951&nbsp;</span>				if&nbsp;(dropLocation)&nbsp;{&nbsp;//&nbsp;element&nbsp;was&nbsp;dropped&nbsp;on&nbsp;a&nbsp;valid&nbsp;date/time&nbsp;cell<a name="line_3951"></a></li>
<li id="line_3952" class="even"><span class="lineNumber">&nbsp;3952&nbsp;</span>					_this.view.reportExternalDrop(meta,&nbsp;dropLocation,&nbsp;el,&nbsp;ev,&nbsp;ui);<a name="line_3952"></a></li>
<li id="line_3953" class="odd"><span class="lineNumber">&nbsp;3953&nbsp;</span>				}<a name="line_3953"></a></li>
<li id="line_3954" class="even"><span class="lineNumber">&nbsp;3954&nbsp;</span>			},<a name="line_3954"></a></li>
<li id="line_3955" class="odd"><span class="lineNumber">&nbsp;3955&nbsp;</span>			listenStop:&nbsp;function()&nbsp;{<a name="line_3955"></a></li>
<li id="line_3956" class="even"><span class="lineNumber">&nbsp;3956&nbsp;</span>				_this.isDraggingExternal&nbsp;=&nbsp;false;<a name="line_3956"></a></li>
<li id="line_3957" class="odd"><span class="lineNumber">&nbsp;3957&nbsp;</span>			}<a name="line_3957"></a></li>
<li id="line_3958" class="even"><span class="lineNumber">&nbsp;3958&nbsp;</span>		});<a name="line_3958"></a></li>
<li id="line_3959" class="odd"><span class="lineNumber">&nbsp;3959&nbsp;</span><a name="line_3959"></a></li>
<li id="line_3960" class="even"><span class="lineNumber">&nbsp;3960&nbsp;</span>		dragListener.startDrag(ev);&nbsp;//&nbsp;start&nbsp;listening&nbsp;immediately<a name="line_3960"></a></li>
<li id="line_3961" class="odd"><span class="lineNumber">&nbsp;3961&nbsp;</span>	},<a name="line_3961"></a></li>
<li id="line_3962" class="even"><span class="lineNumber">&nbsp;3962&nbsp;</span><a name="line_3962"></a></li>
<li id="line_3963" class="odd"><span class="lineNumber">&nbsp;3963&nbsp;</span><a name="line_3963"></a></li>
<li id="line_3964" class="even"><span class="lineNumber">&nbsp;3964&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;cell&nbsp;to&nbsp;be&nbsp;dropped&nbsp;upon,&nbsp;and&nbsp;misc&nbsp;data&nbsp;associated&nbsp;with&nbsp;the&nbsp;jqui&nbsp;drag&nbsp;(guaranteed&nbsp;to&nbsp;be&nbsp;a&nbsp;plain&nbsp;object),<a name="line_3964"></a></li>
<li id="line_3965" class="odd"><span class="lineNumber">&nbsp;3965&nbsp;</span>	//&nbsp;returns&nbsp;start/end&nbsp;dates&nbsp;for&nbsp;the&nbsp;event&nbsp;that&nbsp;would&nbsp;result&nbsp;from&nbsp;the&nbsp;hypothetical&nbsp;drop.&nbsp;end&nbsp;might&nbsp;be&nbsp;null.<a name="line_3965"></a></li>
<li id="line_3966" class="even"><span class="lineNumber">&nbsp;3966&nbsp;</span>	//&nbsp;Returning&nbsp;a&nbsp;null&nbsp;value&nbsp;signals&nbsp;an&nbsp;invalid&nbsp;drop&nbsp;cell.<a name="line_3966"></a></li>
<li id="line_3967" class="odd"><span class="lineNumber">&nbsp;3967&nbsp;</span>	computeExternalDrop:&nbsp;function(cell,&nbsp;meta)&nbsp;{<a name="line_3967"></a></li>
<li id="line_3968" class="even"><span class="lineNumber">&nbsp;3968&nbsp;</span>		var&nbsp;dropLocation&nbsp;=&nbsp;{<a name="line_3968"></a></li>
<li id="line_3969" class="odd"><span class="lineNumber">&nbsp;3969&nbsp;</span>			start:&nbsp;cell.start.clone(),<a name="line_3969"></a></li>
<li id="line_3970" class="even"><span class="lineNumber">&nbsp;3970&nbsp;</span>			end:&nbsp;null<a name="line_3970"></a></li>
<li id="line_3971" class="odd"><span class="lineNumber">&nbsp;3971&nbsp;</span>		};<a name="line_3971"></a></li>
<li id="line_3972" class="even"><span class="lineNumber">&nbsp;3972&nbsp;</span><a name="line_3972"></a></li>
<li id="line_3973" class="odd"><span class="lineNumber">&nbsp;3973&nbsp;</span>		//&nbsp;if&nbsp;dropped&nbsp;on&nbsp;an&nbsp;all-day&nbsp;cell,&nbsp;and&nbsp;element's&nbsp;metadata&nbsp;specified&nbsp;a&nbsp;time,&nbsp;set&nbsp;it<a name="line_3973"></a></li>
<li id="line_3974" class="even"><span class="lineNumber">&nbsp;3974&nbsp;</span>		if&nbsp;(meta.startTime&nbsp;&amp;&amp;&nbsp;!dropLocation.start.hasTime())&nbsp;{<a name="line_3974"></a></li>
<li id="line_3975" class="odd"><span class="lineNumber">&nbsp;3975&nbsp;</span>			dropLocation.start.time(meta.startTime);<a name="line_3975"></a></li>
<li id="line_3976" class="even"><span class="lineNumber">&nbsp;3976&nbsp;</span>		}<a name="line_3976"></a></li>
<li id="line_3977" class="odd"><span class="lineNumber">&nbsp;3977&nbsp;</span><a name="line_3977"></a></li>
<li id="line_3978" class="even"><span class="lineNumber">&nbsp;3978&nbsp;</span>		if&nbsp;(meta.duration)&nbsp;{<a name="line_3978"></a></li>
<li id="line_3979" class="odd"><span class="lineNumber">&nbsp;3979&nbsp;</span>			dropLocation.end&nbsp;=&nbsp;dropLocation.start.clone().add(meta.duration);<a name="line_3979"></a></li>
<li id="line_3980" class="even"><span class="lineNumber">&nbsp;3980&nbsp;</span>		}<a name="line_3980"></a></li>
<li id="line_3981" class="odd"><span class="lineNumber">&nbsp;3981&nbsp;</span><a name="line_3981"></a></li>
<li id="line_3982" class="even"><span class="lineNumber">&nbsp;3982&nbsp;</span>		if&nbsp;(!this.view.calendar.isExternalDropRangeAllowed(dropLocation,&nbsp;meta.eventProps))&nbsp;{<a name="line_3982"></a></li>
<li id="line_3983" class="odd"><span class="lineNumber">&nbsp;3983&nbsp;</span>			return&nbsp;null;<a name="line_3983"></a></li>
<li id="line_3984" class="even"><span class="lineNumber">&nbsp;3984&nbsp;</span>		}<a name="line_3984"></a></li>
<li id="line_3985" class="odd"><span class="lineNumber">&nbsp;3985&nbsp;</span><a name="line_3985"></a></li>
<li id="line_3986" class="even"><span class="lineNumber">&nbsp;3986&nbsp;</span>		return&nbsp;dropLocation;<a name="line_3986"></a></li>
<li id="line_3987" class="odd"><span class="lineNumber">&nbsp;3987&nbsp;</span>	},<a name="line_3987"></a></li>
<li id="line_3988" class="even"><span class="lineNumber">&nbsp;3988&nbsp;</span><a name="line_3988"></a></li>
<li id="line_3989" class="odd"><span class="lineNumber">&nbsp;3989&nbsp;</span><a name="line_3989"></a></li>
<li id="line_3990" class="even"><span class="lineNumber">&nbsp;3990&nbsp;</span><a name="line_3990"></a></li>
<li id="line_3991" class="odd"><span class="lineNumber">&nbsp;3991&nbsp;</span>	/*&nbsp;Drag&nbsp;Rendering&nbsp;(for&nbsp;both&nbsp;events&nbsp;and&nbsp;an&nbsp;external&nbsp;elements)<a name="line_3991"></a></li>
<li id="line_3992" class="even"><span class="lineNumber">&nbsp;3992&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_3992"></a></li>
<li id="line_3993" class="odd"><span class="lineNumber">&nbsp;3993&nbsp;</span><a name="line_3993"></a></li>
<li id="line_3994" class="even"><span class="lineNumber">&nbsp;3994&nbsp;</span><a name="line_3994"></a></li>
<li id="line_3995" class="odd"><span class="lineNumber">&nbsp;3995&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;an&nbsp;event&nbsp;or&nbsp;external&nbsp;element&nbsp;being&nbsp;dragged.<a name="line_3995"></a></li>
<li id="line_3996" class="even"><span class="lineNumber">&nbsp;3996&nbsp;</span>	//&nbsp;`dropLocation`&nbsp;contains&nbsp;hypothetical&nbsp;start/end/allDay&nbsp;values&nbsp;the&nbsp;event&nbsp;would&nbsp;have&nbsp;if&nbsp;dropped.&nbsp;end&nbsp;can&nbsp;be&nbsp;null.<a name="line_3996"></a></li>
<li id="line_3997" class="odd"><span class="lineNumber">&nbsp;3997&nbsp;</span>	//&nbsp;`seg`&nbsp;is&nbsp;the&nbsp;internal&nbsp;segment&nbsp;object&nbsp;that&nbsp;is&nbsp;being&nbsp;dragged.&nbsp;If&nbsp;dragging&nbsp;an&nbsp;external&nbsp;element,&nbsp;`seg`&nbsp;is&nbsp;null.<a name="line_3997"></a></li>
<li id="line_3998" class="even"><span class="lineNumber">&nbsp;3998&nbsp;</span>	//&nbsp;A&nbsp;truthy&nbsp;returned&nbsp;value&nbsp;indicates&nbsp;this&nbsp;method&nbsp;has&nbsp;rendered&nbsp;a&nbsp;helper&nbsp;element.<a name="line_3998"></a></li>
<li id="line_3999" class="odd"><span class="lineNumber">&nbsp;3999&nbsp;</span>	renderDrag:&nbsp;function(dropLocation,&nbsp;seg)&nbsp;{<a name="line_3999"></a></li>
<li id="line_4000" class="even"><span class="lineNumber">&nbsp;4000&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_4000"></a></li>
<li id="line_4001" class="odd"><span class="lineNumber">&nbsp;4001&nbsp;</span>	},<a name="line_4001"></a></li>
<li id="line_4002" class="even"><span class="lineNumber">&nbsp;4002&nbsp;</span><a name="line_4002"></a></li>
<li id="line_4003" class="odd"><span class="lineNumber">&nbsp;4003&nbsp;</span><a name="line_4003"></a></li>
<li id="line_4004" class="even"><span class="lineNumber">&nbsp;4004&nbsp;</span>	//&nbsp;Unrenders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;an&nbsp;event&nbsp;or&nbsp;external&nbsp;element&nbsp;being&nbsp;dragged<a name="line_4004"></a></li>
<li id="line_4005" class="odd"><span class="lineNumber">&nbsp;4005&nbsp;</span>	unrenderDrag:&nbsp;function()&nbsp;{<a name="line_4005"></a></li>
<li id="line_4006" class="even"><span class="lineNumber">&nbsp;4006&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_4006"></a></li>
<li id="line_4007" class="odd"><span class="lineNumber">&nbsp;4007&nbsp;</span>	},<a name="line_4007"></a></li>
<li id="line_4008" class="even"><span class="lineNumber">&nbsp;4008&nbsp;</span><a name="line_4008"></a></li>
<li id="line_4009" class="odd"><span class="lineNumber">&nbsp;4009&nbsp;</span><a name="line_4009"></a></li>
<li id="line_4010" class="even"><span class="lineNumber">&nbsp;4010&nbsp;</span>	/*&nbsp;Resizing<a name="line_4010"></a></li>
<li id="line_4011" class="odd"><span class="lineNumber">&nbsp;4011&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_4011"></a></li>
<li id="line_4012" class="even"><span class="lineNumber">&nbsp;4012&nbsp;</span><a name="line_4012"></a></li>
<li id="line_4013" class="odd"><span class="lineNumber">&nbsp;4013&nbsp;</span><a name="line_4013"></a></li>
<li id="line_4014" class="even"><span class="lineNumber">&nbsp;4014&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;the&nbsp;user&nbsp;does&nbsp;a&nbsp;mousedown&nbsp;on&nbsp;an&nbsp;event's&nbsp;resizer,&nbsp;which&nbsp;might&nbsp;lead&nbsp;to&nbsp;resizing.<a name="line_4014"></a></li>
<li id="line_4015" class="odd"><span class="lineNumber">&nbsp;4015&nbsp;</span>	//&nbsp;Generic&nbsp;enough&nbsp;to&nbsp;work&nbsp;with&nbsp;any&nbsp;type&nbsp;of&nbsp;Grid.<a name="line_4015"></a></li>
<li id="line_4016" class="even"><span class="lineNumber">&nbsp;4016&nbsp;</span>	segResizeMousedown:&nbsp;function(seg,&nbsp;ev,&nbsp;isStart)&nbsp;{<a name="line_4016"></a></li>
<li id="line_4017" class="odd"><span class="lineNumber">&nbsp;4017&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_4017"></a></li>
<li id="line_4018" class="even"><span class="lineNumber">&nbsp;4018&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_4018"></a></li>
<li id="line_4019" class="odd"><span class="lineNumber">&nbsp;4019&nbsp;</span>		var&nbsp;calendar&nbsp;=&nbsp;view.calendar;<a name="line_4019"></a></li>
<li id="line_4020" class="even"><span class="lineNumber">&nbsp;4020&nbsp;</span>		var&nbsp;el&nbsp;=&nbsp;seg.el;<a name="line_4020"></a></li>
<li id="line_4021" class="odd"><span class="lineNumber">&nbsp;4021&nbsp;</span>		var&nbsp;event&nbsp;=&nbsp;seg.event;<a name="line_4021"></a></li>
<li id="line_4022" class="even"><span class="lineNumber">&nbsp;4022&nbsp;</span>		var&nbsp;eventEnd&nbsp;=&nbsp;calendar.getEventEnd(event);<a name="line_4022"></a></li>
<li id="line_4023" class="odd"><span class="lineNumber">&nbsp;4023&nbsp;</span>		var&nbsp;dragListener;<a name="line_4023"></a></li>
<li id="line_4024" class="even"><span class="lineNumber">&nbsp;4024&nbsp;</span>		var&nbsp;resizeLocation;&nbsp;//&nbsp;falsy&nbsp;if&nbsp;invalid&nbsp;resize<a name="line_4024"></a></li>
<li id="line_4025" class="odd"><span class="lineNumber">&nbsp;4025&nbsp;</span><a name="line_4025"></a></li>
<li id="line_4026" class="even"><span class="lineNumber">&nbsp;4026&nbsp;</span>		//&nbsp;Tracks&nbsp;mouse&nbsp;movement&nbsp;over&nbsp;the&nbsp;*grid's*&nbsp;coordinate&nbsp;map<a name="line_4026"></a></li>
<li id="line_4027" class="odd"><span class="lineNumber">&nbsp;4027&nbsp;</span>		dragListener&nbsp;=&nbsp;new&nbsp;CellDragListener(this.coordMap,&nbsp;{<a name="line_4027"></a></li>
<li id="line_4028" class="even"><span class="lineNumber">&nbsp;4028&nbsp;</span>			distance:&nbsp;5,<a name="line_4028"></a></li>
<li id="line_4029" class="odd"><span class="lineNumber">&nbsp;4029&nbsp;</span>			scroll:&nbsp;view.opt('dragScroll'),<a name="line_4029"></a></li>
<li id="line_4030" class="even"><span class="lineNumber">&nbsp;4030&nbsp;</span>			subjectEl:&nbsp;el,<a name="line_4030"></a></li>
<li id="line_4031" class="odd"><span class="lineNumber">&nbsp;4031&nbsp;</span>			dragStart:&nbsp;function(ev)&nbsp;{<a name="line_4031"></a></li>
<li id="line_4032" class="even"><span class="lineNumber">&nbsp;4032&nbsp;</span>				_this.triggerSegMouseout(seg,&nbsp;ev);&nbsp;//&nbsp;ensure&nbsp;a&nbsp;mouseout&nbsp;on&nbsp;the&nbsp;manipulated&nbsp;event&nbsp;has&nbsp;been&nbsp;reported<a name="line_4032"></a></li>
<li id="line_4033" class="odd"><span class="lineNumber">&nbsp;4033&nbsp;</span>				_this.segResizeStart(seg,&nbsp;ev);<a name="line_4033"></a></li>
<li id="line_4034" class="even"><span class="lineNumber">&nbsp;4034&nbsp;</span>			},<a name="line_4034"></a></li>
<li id="line_4035" class="odd"><span class="lineNumber">&nbsp;4035&nbsp;</span>			cellOver:&nbsp;function(cell,&nbsp;isOrig,&nbsp;origCell)&nbsp;{<a name="line_4035"></a></li>
<li id="line_4036" class="even"><span class="lineNumber">&nbsp;4036&nbsp;</span>				resizeLocation&nbsp;=&nbsp;isStart&nbsp;?<a name="line_4036"></a></li>
<li id="line_4037" class="odd"><span class="lineNumber">&nbsp;4037&nbsp;</span>					_this.computeEventStartResize(origCell,&nbsp;cell,&nbsp;event)&nbsp;:<a name="line_4037"></a></li>
<li id="line_4038" class="even"><span class="lineNumber">&nbsp;4038&nbsp;</span>					_this.computeEventEndResize(origCell,&nbsp;cell,&nbsp;event);<a name="line_4038"></a></li>
<li id="line_4039" class="odd"><span class="lineNumber">&nbsp;4039&nbsp;</span><a name="line_4039"></a></li>
<li id="line_4040" class="even"><span class="lineNumber">&nbsp;4040&nbsp;</span>				if&nbsp;(resizeLocation)&nbsp;{<a name="line_4040"></a></li>
<li id="line_4041" class="odd"><span class="lineNumber">&nbsp;4041&nbsp;</span>					if&nbsp;(!calendar.isEventRangeAllowed(resizeLocation,&nbsp;event))&nbsp;{<a name="line_4041"></a></li>
<li id="line_4042" class="even"><span class="lineNumber">&nbsp;4042&nbsp;</span>						disableCursor();<a name="line_4042"></a></li>
<li id="line_4043" class="odd"><span class="lineNumber">&nbsp;4043&nbsp;</span>						resizeLocation&nbsp;=&nbsp;null;<a name="line_4043"></a></li>
<li id="line_4044" class="even"><span class="lineNumber">&nbsp;4044&nbsp;</span>					}<a name="line_4044"></a></li>
<li id="line_4045" class="odd"><span class="lineNumber">&nbsp;4045&nbsp;</span>					//&nbsp;no&nbsp;change?&nbsp;(TODO:&nbsp;how&nbsp;does&nbsp;this&nbsp;work&nbsp;with&nbsp;timezones?)<a name="line_4045"></a></li>
<li id="line_4046" class="even"><span class="lineNumber">&nbsp;4046&nbsp;</span>					else&nbsp;if&nbsp;(resizeLocation.start.isSame(event.start)&nbsp;&amp;&amp;&nbsp;resizeLocation.end.isSame(eventEnd))&nbsp;{<a name="line_4046"></a></li>
<li id="line_4047" class="odd"><span class="lineNumber">&nbsp;4047&nbsp;</span>						resizeLocation&nbsp;=&nbsp;null;<a name="line_4047"></a></li>
<li id="line_4048" class="even"><span class="lineNumber">&nbsp;4048&nbsp;</span>					}<a name="line_4048"></a></li>
<li id="line_4049" class="odd"><span class="lineNumber">&nbsp;4049&nbsp;</span>				}<a name="line_4049"></a></li>
<li id="line_4050" class="even"><span class="lineNumber">&nbsp;4050&nbsp;</span><a name="line_4050"></a></li>
<li id="line_4051" class="odd"><span class="lineNumber">&nbsp;4051&nbsp;</span>				if&nbsp;(resizeLocation)&nbsp;{<a name="line_4051"></a></li>
<li id="line_4052" class="even"><span class="lineNumber">&nbsp;4052&nbsp;</span>					view.hideEvent(event);<a name="line_4052"></a></li>
<li id="line_4053" class="odd"><span class="lineNumber">&nbsp;4053&nbsp;</span>					_this.renderEventResize(resizeLocation,&nbsp;seg);<a name="line_4053"></a></li>
<li id="line_4054" class="even"><span class="lineNumber">&nbsp;4054&nbsp;</span>				}<a name="line_4054"></a></li>
<li id="line_4055" class="odd"><span class="lineNumber">&nbsp;4055&nbsp;</span>			},<a name="line_4055"></a></li>
<li id="line_4056" class="even"><span class="lineNumber">&nbsp;4056&nbsp;</span>			cellOut:&nbsp;function()&nbsp;{&nbsp;//&nbsp;called&nbsp;before&nbsp;mouse&nbsp;moves&nbsp;to&nbsp;a&nbsp;different&nbsp;cell&nbsp;OR&nbsp;moved&nbsp;out&nbsp;of&nbsp;all&nbsp;cells<a name="line_4056"></a></li>
<li id="line_4057" class="odd"><span class="lineNumber">&nbsp;4057&nbsp;</span>				resizeLocation&nbsp;=&nbsp;null;<a name="line_4057"></a></li>
<li id="line_4058" class="even"><span class="lineNumber">&nbsp;4058&nbsp;</span>			},<a name="line_4058"></a></li>
<li id="line_4059" class="odd"><span class="lineNumber">&nbsp;4059&nbsp;</span>			cellDone:&nbsp;function()&nbsp;{&nbsp;//&nbsp;resets&nbsp;the&nbsp;rendering&nbsp;to&nbsp;show&nbsp;the&nbsp;original&nbsp;event<a name="line_4059"></a></li>
<li id="line_4060" class="even"><span class="lineNumber">&nbsp;4060&nbsp;</span>				_this.unrenderEventResize();<a name="line_4060"></a></li>
<li id="line_4061" class="odd"><span class="lineNumber">&nbsp;4061&nbsp;</span>				view.showEvent(event);<a name="line_4061"></a></li>
<li id="line_4062" class="even"><span class="lineNumber">&nbsp;4062&nbsp;</span>				enableCursor();<a name="line_4062"></a></li>
<li id="line_4063" class="odd"><span class="lineNumber">&nbsp;4063&nbsp;</span>			},<a name="line_4063"></a></li>
<li id="line_4064" class="even"><span class="lineNumber">&nbsp;4064&nbsp;</span>			dragStop:&nbsp;function(ev)&nbsp;{<a name="line_4064"></a></li>
<li id="line_4065" class="odd"><span class="lineNumber">&nbsp;4065&nbsp;</span>				_this.segResizeStop(seg,&nbsp;ev);<a name="line_4065"></a></li>
<li id="line_4066" class="even"><span class="lineNumber">&nbsp;4066&nbsp;</span><a name="line_4066"></a></li>
<li id="line_4067" class="odd"><span class="lineNumber">&nbsp;4067&nbsp;</span>				if&nbsp;(resizeLocation)&nbsp;{&nbsp;//&nbsp;valid&nbsp;date&nbsp;to&nbsp;resize&nbsp;to?<a name="line_4067"></a></li>
<li id="line_4068" class="even"><span class="lineNumber">&nbsp;4068&nbsp;</span>					view.reportEventResize(event,&nbsp;resizeLocation,&nbsp;this.largeUnit,&nbsp;el,&nbsp;ev);<a name="line_4068"></a></li>
<li id="line_4069" class="odd"><span class="lineNumber">&nbsp;4069&nbsp;</span>				}<a name="line_4069"></a></li>
<li id="line_4070" class="even"><span class="lineNumber">&nbsp;4070&nbsp;</span>			}<a name="line_4070"></a></li>
<li id="line_4071" class="odd"><span class="lineNumber">&nbsp;4071&nbsp;</span>		});<a name="line_4071"></a></li>
<li id="line_4072" class="even"><span class="lineNumber">&nbsp;4072&nbsp;</span><a name="line_4072"></a></li>
<li id="line_4073" class="odd"><span class="lineNumber">&nbsp;4073&nbsp;</span>		dragListener.mousedown(ev);&nbsp;//&nbsp;start&nbsp;listening,&nbsp;which&nbsp;will&nbsp;eventually&nbsp;lead&nbsp;to&nbsp;a&nbsp;dragStart<a name="line_4073"></a></li>
<li id="line_4074" class="even"><span class="lineNumber">&nbsp;4074&nbsp;</span>	},<a name="line_4074"></a></li>
<li id="line_4075" class="odd"><span class="lineNumber">&nbsp;4075&nbsp;</span><a name="line_4075"></a></li>
<li id="line_4076" class="even"><span class="lineNumber">&nbsp;4076&nbsp;</span><a name="line_4076"></a></li>
<li id="line_4077" class="odd"><span class="lineNumber">&nbsp;4077&nbsp;</span>	//&nbsp;Called&nbsp;before&nbsp;event&nbsp;segment&nbsp;resizing&nbsp;starts<a name="line_4077"></a></li>
<li id="line_4078" class="even"><span class="lineNumber">&nbsp;4078&nbsp;</span>	segResizeStart:&nbsp;function(seg,&nbsp;ev)&nbsp;{<a name="line_4078"></a></li>
<li id="line_4079" class="odd"><span class="lineNumber">&nbsp;4079&nbsp;</span>		this.isResizingSeg&nbsp;=&nbsp;true;<a name="line_4079"></a></li>
<li id="line_4080" class="even"><span class="lineNumber">&nbsp;4080&nbsp;</span>		this.view.trigger('eventResizeStart',&nbsp;seg.el[0],&nbsp;seg.event,&nbsp;ev,&nbsp;{});&nbsp;//&nbsp;last&nbsp;argument&nbsp;is&nbsp;jqui&nbsp;dummy<a name="line_4080"></a></li>
<li id="line_4081" class="odd"><span class="lineNumber">&nbsp;4081&nbsp;</span>	},<a name="line_4081"></a></li>
<li id="line_4082" class="even"><span class="lineNumber">&nbsp;4082&nbsp;</span><a name="line_4082"></a></li>
<li id="line_4083" class="odd"><span class="lineNumber">&nbsp;4083&nbsp;</span><a name="line_4083"></a></li>
<li id="line_4084" class="even"><span class="lineNumber">&nbsp;4084&nbsp;</span>	//&nbsp;Called&nbsp;after&nbsp;event&nbsp;segment&nbsp;resizing&nbsp;stops<a name="line_4084"></a></li>
<li id="line_4085" class="odd"><span class="lineNumber">&nbsp;4085&nbsp;</span>	segResizeStop:&nbsp;function(seg,&nbsp;ev)&nbsp;{<a name="line_4085"></a></li>
<li id="line_4086" class="even"><span class="lineNumber">&nbsp;4086&nbsp;</span>		this.isResizingSeg&nbsp;=&nbsp;false;<a name="line_4086"></a></li>
<li id="line_4087" class="odd"><span class="lineNumber">&nbsp;4087&nbsp;</span>		this.view.trigger('eventResizeStop',&nbsp;seg.el[0],&nbsp;seg.event,&nbsp;ev,&nbsp;{});&nbsp;//&nbsp;last&nbsp;argument&nbsp;is&nbsp;jqui&nbsp;dummy<a name="line_4087"></a></li>
<li id="line_4088" class="even"><span class="lineNumber">&nbsp;4088&nbsp;</span>	},<a name="line_4088"></a></li>
<li id="line_4089" class="odd"><span class="lineNumber">&nbsp;4089&nbsp;</span><a name="line_4089"></a></li>
<li id="line_4090" class="even"><span class="lineNumber">&nbsp;4090&nbsp;</span><a name="line_4090"></a></li>
<li id="line_4091" class="odd"><span class="lineNumber">&nbsp;4091&nbsp;</span>	//&nbsp;Returns&nbsp;new&nbsp;date-information&nbsp;for&nbsp;an&nbsp;event&nbsp;segment&nbsp;being&nbsp;resized&nbsp;from&nbsp;its&nbsp;start<a name="line_4091"></a></li>
<li id="line_4092" class="even"><span class="lineNumber">&nbsp;4092&nbsp;</span>	computeEventStartResize:&nbsp;function(startCell,&nbsp;endCell,&nbsp;event)&nbsp;{<a name="line_4092"></a></li>
<li id="line_4093" class="odd"><span class="lineNumber">&nbsp;4093&nbsp;</span>		return&nbsp;this.computeEventResize('start',&nbsp;startCell,&nbsp;endCell,&nbsp;event);<a name="line_4093"></a></li>
<li id="line_4094" class="even"><span class="lineNumber">&nbsp;4094&nbsp;</span>	},<a name="line_4094"></a></li>
<li id="line_4095" class="odd"><span class="lineNumber">&nbsp;4095&nbsp;</span><a name="line_4095"></a></li>
<li id="line_4096" class="even"><span class="lineNumber">&nbsp;4096&nbsp;</span><a name="line_4096"></a></li>
<li id="line_4097" class="odd"><span class="lineNumber">&nbsp;4097&nbsp;</span>	//&nbsp;Returns&nbsp;new&nbsp;date-information&nbsp;for&nbsp;an&nbsp;event&nbsp;segment&nbsp;being&nbsp;resized&nbsp;from&nbsp;its&nbsp;end<a name="line_4097"></a></li>
<li id="line_4098" class="even"><span class="lineNumber">&nbsp;4098&nbsp;</span>	computeEventEndResize:&nbsp;function(startCell,&nbsp;endCell,&nbsp;event)&nbsp;{<a name="line_4098"></a></li>
<li id="line_4099" class="odd"><span class="lineNumber">&nbsp;4099&nbsp;</span>		return&nbsp;this.computeEventResize('end',&nbsp;startCell,&nbsp;endCell,&nbsp;event);<a name="line_4099"></a></li>
<li id="line_4100" class="even"><span class="lineNumber">&nbsp;4100&nbsp;</span>	},<a name="line_4100"></a></li>
<li id="line_4101" class="odd"><span class="lineNumber">&nbsp;4101&nbsp;</span><a name="line_4101"></a></li>
<li id="line_4102" class="even"><span class="lineNumber">&nbsp;4102&nbsp;</span><a name="line_4102"></a></li>
<li id="line_4103" class="odd"><span class="lineNumber">&nbsp;4103&nbsp;</span>	//&nbsp;Returns&nbsp;new&nbsp;date-information&nbsp;for&nbsp;an&nbsp;event&nbsp;segment&nbsp;being&nbsp;resized&nbsp;from&nbsp;its&nbsp;start&nbsp;OR&nbsp;end<a name="line_4103"></a></li>
<li id="line_4104" class="even"><span class="lineNumber">&nbsp;4104&nbsp;</span>	//&nbsp;`type`&nbsp;is&nbsp;either&nbsp;'start'&nbsp;or&nbsp;'end'<a name="line_4104"></a></li>
<li id="line_4105" class="odd"><span class="lineNumber">&nbsp;4105&nbsp;</span>	computeEventResize:&nbsp;function(type,&nbsp;startCell,&nbsp;endCell,&nbsp;event)&nbsp;{<a name="line_4105"></a></li>
<li id="line_4106" class="even"><span class="lineNumber">&nbsp;4106&nbsp;</span>		var&nbsp;calendar&nbsp;=&nbsp;this.view.calendar;<a name="line_4106"></a></li>
<li id="line_4107" class="odd"><span class="lineNumber">&nbsp;4107&nbsp;</span>		var&nbsp;delta&nbsp;=&nbsp;this.diffDates(endCell[type],&nbsp;startCell[type]);<a name="line_4107"></a></li>
<li id="line_4108" class="even"><span class="lineNumber">&nbsp;4108&nbsp;</span>		var&nbsp;range;<a name="line_4108"></a></li>
<li id="line_4109" class="odd"><span class="lineNumber">&nbsp;4109&nbsp;</span>		var&nbsp;defaultDuration;<a name="line_4109"></a></li>
<li id="line_4110" class="even"><span class="lineNumber">&nbsp;4110&nbsp;</span><a name="line_4110"></a></li>
<li id="line_4111" class="odd"><span class="lineNumber">&nbsp;4111&nbsp;</span>		//&nbsp;build&nbsp;original&nbsp;values&nbsp;to&nbsp;work&nbsp;from,&nbsp;guaranteeing&nbsp;a&nbsp;start&nbsp;and&nbsp;end<a name="line_4111"></a></li>
<li id="line_4112" class="even"><span class="lineNumber">&nbsp;4112&nbsp;</span>		range&nbsp;=&nbsp;{<a name="line_4112"></a></li>
<li id="line_4113" class="odd"><span class="lineNumber">&nbsp;4113&nbsp;</span>			start:&nbsp;event.start.clone(),<a name="line_4113"></a></li>
<li id="line_4114" class="even"><span class="lineNumber">&nbsp;4114&nbsp;</span>			end:&nbsp;calendar.getEventEnd(event),<a name="line_4114"></a></li>
<li id="line_4115" class="odd"><span class="lineNumber">&nbsp;4115&nbsp;</span>			allDay:&nbsp;event.allDay<a name="line_4115"></a></li>
<li id="line_4116" class="even"><span class="lineNumber">&nbsp;4116&nbsp;</span>		};<a name="line_4116"></a></li>
<li id="line_4117" class="odd"><span class="lineNumber">&nbsp;4117&nbsp;</span><a name="line_4117"></a></li>
<li id="line_4118" class="even"><span class="lineNumber">&nbsp;4118&nbsp;</span>		//&nbsp;if&nbsp;an&nbsp;all-day&nbsp;event&nbsp;was&nbsp;in&nbsp;a&nbsp;timed&nbsp;area&nbsp;and&nbsp;was&nbsp;resized&nbsp;to&nbsp;a&nbsp;time,&nbsp;adjust&nbsp;start/end&nbsp;to&nbsp;have&nbsp;times<a name="line_4118"></a></li>
<li id="line_4119" class="odd"><span class="lineNumber">&nbsp;4119&nbsp;</span>		if&nbsp;(range.allDay&nbsp;&amp;&amp;&nbsp;durationHasTime(delta))&nbsp;{<a name="line_4119"></a></li>
<li id="line_4120" class="even"><span class="lineNumber">&nbsp;4120&nbsp;</span>			range.allDay&nbsp;=&nbsp;false;<a name="line_4120"></a></li>
<li id="line_4121" class="odd"><span class="lineNumber">&nbsp;4121&nbsp;</span>			calendar.normalizeEventRangeTimes(range);<a name="line_4121"></a></li>
<li id="line_4122" class="even"><span class="lineNumber">&nbsp;4122&nbsp;</span>		}<a name="line_4122"></a></li>
<li id="line_4123" class="odd"><span class="lineNumber">&nbsp;4123&nbsp;</span><a name="line_4123"></a></li>
<li id="line_4124" class="even"><span class="lineNumber">&nbsp;4124&nbsp;</span>		range[type].add(delta);&nbsp;//&nbsp;apply&nbsp;delta&nbsp;to&nbsp;start&nbsp;or&nbsp;end<a name="line_4124"></a></li>
<li id="line_4125" class="odd"><span class="lineNumber">&nbsp;4125&nbsp;</span><a name="line_4125"></a></li>
<li id="line_4126" class="even"><span class="lineNumber">&nbsp;4126&nbsp;</span>		//&nbsp;if&nbsp;the&nbsp;event&nbsp;was&nbsp;compressed&nbsp;too&nbsp;small,&nbsp;find&nbsp;a&nbsp;new&nbsp;reasonable&nbsp;duration&nbsp;for&nbsp;it<a name="line_4126"></a></li>
<li id="line_4127" class="odd"><span class="lineNumber">&nbsp;4127&nbsp;</span>		if&nbsp;(!range.start.isBefore(range.end))&nbsp;{<a name="line_4127"></a></li>
<li id="line_4128" class="even"><span class="lineNumber">&nbsp;4128&nbsp;</span><a name="line_4128"></a></li>
<li id="line_4129" class="odd"><span class="lineNumber">&nbsp;4129&nbsp;</span>			defaultDuration&nbsp;=&nbsp;event.allDay&nbsp;?<a name="line_4129"></a></li>
<li id="line_4130" class="even"><span class="lineNumber">&nbsp;4130&nbsp;</span>				calendar.defaultAllDayEventDuration&nbsp;:<a name="line_4130"></a></li>
<li id="line_4131" class="odd"><span class="lineNumber">&nbsp;4131&nbsp;</span>				calendar.defaultTimedEventDuration;<a name="line_4131"></a></li>
<li id="line_4132" class="even"><span class="lineNumber">&nbsp;4132&nbsp;</span><a name="line_4132"></a></li>
<li id="line_4133" class="odd"><span class="lineNumber">&nbsp;4133&nbsp;</span>			//&nbsp;between&nbsp;the&nbsp;cell's&nbsp;duration&nbsp;and&nbsp;the&nbsp;event's&nbsp;default&nbsp;duration,&nbsp;use&nbsp;the&nbsp;smaller&nbsp;of&nbsp;the&nbsp;two.<a name="line_4133"></a></li>
<li id="line_4134" class="even"><span class="lineNumber">&nbsp;4134&nbsp;</span>			//&nbsp;example:&nbsp;if&nbsp;year-length&nbsp;slots,&nbsp;and&nbsp;compressed&nbsp;to&nbsp;one&nbsp;slot,&nbsp;we&nbsp;don't&nbsp;want&nbsp;the&nbsp;event&nbsp;to&nbsp;be&nbsp;a&nbsp;year&nbsp;long<a name="line_4134"></a></li>
<li id="line_4135" class="odd"><span class="lineNumber">&nbsp;4135&nbsp;</span>			if&nbsp;(this.cellDuration&nbsp;&amp;&amp;&nbsp;this.cellDuration&nbsp;&lt;&nbsp;defaultDuration)&nbsp;{<a name="line_4135"></a></li>
<li id="line_4136" class="even"><span class="lineNumber">&nbsp;4136&nbsp;</span>				defaultDuration&nbsp;=&nbsp;this.cellDuration;<a name="line_4136"></a></li>
<li id="line_4137" class="odd"><span class="lineNumber">&nbsp;4137&nbsp;</span>			}<a name="line_4137"></a></li>
<li id="line_4138" class="even"><span class="lineNumber">&nbsp;4138&nbsp;</span><a name="line_4138"></a></li>
<li id="line_4139" class="odd"><span class="lineNumber">&nbsp;4139&nbsp;</span>			if&nbsp;(type&nbsp;==&nbsp;'start')&nbsp;{&nbsp;//&nbsp;resizing&nbsp;the&nbsp;start?<a name="line_4139"></a></li>
<li id="line_4140" class="even"><span class="lineNumber">&nbsp;4140&nbsp;</span>				range.start&nbsp;=&nbsp;range.end.clone().subtract(defaultDuration);<a name="line_4140"></a></li>
<li id="line_4141" class="odd"><span class="lineNumber">&nbsp;4141&nbsp;</span>			}<a name="line_4141"></a></li>
<li id="line_4142" class="even"><span class="lineNumber">&nbsp;4142&nbsp;</span>			else&nbsp;{&nbsp;//&nbsp;resizing&nbsp;the&nbsp;end?<a name="line_4142"></a></li>
<li id="line_4143" class="odd"><span class="lineNumber">&nbsp;4143&nbsp;</span>				range.end&nbsp;=&nbsp;range.start.clone().add(defaultDuration);<a name="line_4143"></a></li>
<li id="line_4144" class="even"><span class="lineNumber">&nbsp;4144&nbsp;</span>			}<a name="line_4144"></a></li>
<li id="line_4145" class="odd"><span class="lineNumber">&nbsp;4145&nbsp;</span>		}<a name="line_4145"></a></li>
<li id="line_4146" class="even"><span class="lineNumber">&nbsp;4146&nbsp;</span><a name="line_4146"></a></li>
<li id="line_4147" class="odd"><span class="lineNumber">&nbsp;4147&nbsp;</span>		return&nbsp;range;<a name="line_4147"></a></li>
<li id="line_4148" class="even"><span class="lineNumber">&nbsp;4148&nbsp;</span>	},<a name="line_4148"></a></li>
<li id="line_4149" class="odd"><span class="lineNumber">&nbsp;4149&nbsp;</span><a name="line_4149"></a></li>
<li id="line_4150" class="even"><span class="lineNumber">&nbsp;4150&nbsp;</span><a name="line_4150"></a></li>
<li id="line_4151" class="odd"><span class="lineNumber">&nbsp;4151&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;an&nbsp;event&nbsp;being&nbsp;resized.<a name="line_4151"></a></li>
<li id="line_4152" class="even"><span class="lineNumber">&nbsp;4152&nbsp;</span>	//&nbsp;`range`&nbsp;has&nbsp;the&nbsp;updated&nbsp;dates&nbsp;of&nbsp;the&nbsp;event.&nbsp;`seg`&nbsp;is&nbsp;the&nbsp;original&nbsp;segment&nbsp;object&nbsp;involved&nbsp;in&nbsp;the&nbsp;drag.<a name="line_4152"></a></li>
<li id="line_4153" class="odd"><span class="lineNumber">&nbsp;4153&nbsp;</span>	renderEventResize:&nbsp;function(range,&nbsp;seg)&nbsp;{<a name="line_4153"></a></li>
<li id="line_4154" class="even"><span class="lineNumber">&nbsp;4154&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_4154"></a></li>
<li id="line_4155" class="odd"><span class="lineNumber">&nbsp;4155&nbsp;</span>	},<a name="line_4155"></a></li>
<li id="line_4156" class="even"><span class="lineNumber">&nbsp;4156&nbsp;</span><a name="line_4156"></a></li>
<li id="line_4157" class="odd"><span class="lineNumber">&nbsp;4157&nbsp;</span><a name="line_4157"></a></li>
<li id="line_4158" class="even"><span class="lineNumber">&nbsp;4158&nbsp;</span>	//&nbsp;Unrenders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;an&nbsp;event&nbsp;being&nbsp;resized.<a name="line_4158"></a></li>
<li id="line_4159" class="odd"><span class="lineNumber">&nbsp;4159&nbsp;</span>	unrenderEventResize:&nbsp;function()&nbsp;{<a name="line_4159"></a></li>
<li id="line_4160" class="even"><span class="lineNumber">&nbsp;4160&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_4160"></a></li>
<li id="line_4161" class="odd"><span class="lineNumber">&nbsp;4161&nbsp;</span>	},<a name="line_4161"></a></li>
<li id="line_4162" class="even"><span class="lineNumber">&nbsp;4162&nbsp;</span><a name="line_4162"></a></li>
<li id="line_4163" class="odd"><span class="lineNumber">&nbsp;4163&nbsp;</span><a name="line_4163"></a></li>
<li id="line_4164" class="even"><span class="lineNumber">&nbsp;4164&nbsp;</span>	/*&nbsp;Rendering&nbsp;Utils<a name="line_4164"></a></li>
<li id="line_4165" class="odd"><span class="lineNumber">&nbsp;4165&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_4165"></a></li>
<li id="line_4166" class="even"><span class="lineNumber">&nbsp;4166&nbsp;</span><a name="line_4166"></a></li>
<li id="line_4167" class="odd"><span class="lineNumber">&nbsp;4167&nbsp;</span><a name="line_4167"></a></li>
<li id="line_4168" class="even"><span class="lineNumber">&nbsp;4168&nbsp;</span>	//&nbsp;Compute&nbsp;the&nbsp;text&nbsp;that&nbsp;should&nbsp;be&nbsp;displayed&nbsp;on&nbsp;an&nbsp;event's&nbsp;element.<a name="line_4168"></a></li>
<li id="line_4169" class="odd"><span class="lineNumber">&nbsp;4169&nbsp;</span>	//&nbsp;`range`&nbsp;can&nbsp;be&nbsp;the&nbsp;Event&nbsp;object&nbsp;itself,&nbsp;or&nbsp;something&nbsp;range-like,&nbsp;with&nbsp;at&nbsp;least&nbsp;a&nbsp;`start`.<a name="line_4169"></a></li>
<li id="line_4170" class="even"><span class="lineNumber">&nbsp;4170&nbsp;</span>	//&nbsp;If&nbsp;event&nbsp;times&nbsp;are&nbsp;disabled,&nbsp;or&nbsp;the&nbsp;event&nbsp;has&nbsp;no&nbsp;time,&nbsp;will&nbsp;return&nbsp;a&nbsp;blank&nbsp;string.<a name="line_4170"></a></li>
<li id="line_4171" class="odd"><span class="lineNumber">&nbsp;4171&nbsp;</span>	//&nbsp;If&nbsp;not&nbsp;specified,&nbsp;formatStr&nbsp;will&nbsp;default&nbsp;to&nbsp;the&nbsp;eventTimeFormat&nbsp;setting,<a name="line_4171"></a></li>
<li id="line_4172" class="even"><span class="lineNumber">&nbsp;4172&nbsp;</span>	//&nbsp;and&nbsp;displayEnd&nbsp;will&nbsp;default&nbsp;to&nbsp;the&nbsp;displayEventEnd&nbsp;setting.<a name="line_4172"></a></li>
<li id="line_4173" class="odd"><span class="lineNumber">&nbsp;4173&nbsp;</span>	getEventTimeText:&nbsp;function(range,&nbsp;formatStr,&nbsp;displayEnd)&nbsp;{<a name="line_4173"></a></li>
<li id="line_4174" class="even"><span class="lineNumber">&nbsp;4174&nbsp;</span><a name="line_4174"></a></li>
<li id="line_4175" class="odd"><span class="lineNumber">&nbsp;4175&nbsp;</span>		if&nbsp;(formatStr&nbsp;==&nbsp;null)&nbsp;{<a name="line_4175"></a></li>
<li id="line_4176" class="even"><span class="lineNumber">&nbsp;4176&nbsp;</span>			formatStr&nbsp;=&nbsp;this.eventTimeFormat;<a name="line_4176"></a></li>
<li id="line_4177" class="odd"><span class="lineNumber">&nbsp;4177&nbsp;</span>		}<a name="line_4177"></a></li>
<li id="line_4178" class="even"><span class="lineNumber">&nbsp;4178&nbsp;</span><a name="line_4178"></a></li>
<li id="line_4179" class="odd"><span class="lineNumber">&nbsp;4179&nbsp;</span>		if&nbsp;(displayEnd&nbsp;==&nbsp;null)&nbsp;{<a name="line_4179"></a></li>
<li id="line_4180" class="even"><span class="lineNumber">&nbsp;4180&nbsp;</span>			displayEnd&nbsp;=&nbsp;this.displayEventEnd;<a name="line_4180"></a></li>
<li id="line_4181" class="odd"><span class="lineNumber">&nbsp;4181&nbsp;</span>		}<a name="line_4181"></a></li>
<li id="line_4182" class="even"><span class="lineNumber">&nbsp;4182&nbsp;</span><a name="line_4182"></a></li>
<li id="line_4183" class="odd"><span class="lineNumber">&nbsp;4183&nbsp;</span>		if&nbsp;(this.displayEventTime&nbsp;&amp;&amp;&nbsp;range.start.hasTime())&nbsp;{<a name="line_4183"></a></li>
<li id="line_4184" class="even"><span class="lineNumber">&nbsp;4184&nbsp;</span>			if&nbsp;(displayEnd&nbsp;&amp;&amp;&nbsp;range.end)&nbsp;{<a name="line_4184"></a></li>
<li id="line_4185" class="odd"><span class="lineNumber">&nbsp;4185&nbsp;</span>				return&nbsp;this.view.formatRange(range,&nbsp;formatStr);<a name="line_4185"></a></li>
<li id="line_4186" class="even"><span class="lineNumber">&nbsp;4186&nbsp;</span>			}<a name="line_4186"></a></li>
<li id="line_4187" class="odd"><span class="lineNumber">&nbsp;4187&nbsp;</span>			else&nbsp;{<a name="line_4187"></a></li>
<li id="line_4188" class="even"><span class="lineNumber">&nbsp;4188&nbsp;</span>				return&nbsp;range.start.format(formatStr);<a name="line_4188"></a></li>
<li id="line_4189" class="odd"><span class="lineNumber">&nbsp;4189&nbsp;</span>			}<a name="line_4189"></a></li>
<li id="line_4190" class="even"><span class="lineNumber">&nbsp;4190&nbsp;</span>		}<a name="line_4190"></a></li>
<li id="line_4191" class="odd"><span class="lineNumber">&nbsp;4191&nbsp;</span><a name="line_4191"></a></li>
<li id="line_4192" class="even"><span class="lineNumber">&nbsp;4192&nbsp;</span>		return&nbsp;'';<a name="line_4192"></a></li>
<li id="line_4193" class="odd"><span class="lineNumber">&nbsp;4193&nbsp;</span>	},<a name="line_4193"></a></li>
<li id="line_4194" class="even"><span class="lineNumber">&nbsp;4194&nbsp;</span><a name="line_4194"></a></li>
<li id="line_4195" class="odd"><span class="lineNumber">&nbsp;4195&nbsp;</span><a name="line_4195"></a></li>
<li id="line_4196" class="even"><span class="lineNumber">&nbsp;4196&nbsp;</span>	//&nbsp;Generic&nbsp;utility&nbsp;for&nbsp;generating&nbsp;the&nbsp;HTML&nbsp;classNames&nbsp;for&nbsp;an&nbsp;event&nbsp;segment's&nbsp;element<a name="line_4196"></a></li>
<li id="line_4197" class="odd"><span class="lineNumber">&nbsp;4197&nbsp;</span>	getSegClasses:&nbsp;function(seg,&nbsp;isDraggable,&nbsp;isResizable)&nbsp;{<a name="line_4197"></a></li>
<li id="line_4198" class="even"><span class="lineNumber">&nbsp;4198&nbsp;</span>		var&nbsp;event&nbsp;=&nbsp;seg.event;<a name="line_4198"></a></li>
<li id="line_4199" class="odd"><span class="lineNumber">&nbsp;4199&nbsp;</span>		var&nbsp;classes&nbsp;=&nbsp;[<a name="line_4199"></a></li>
<li id="line_4200" class="even"><span class="lineNumber">&nbsp;4200&nbsp;</span>			'fc-event',<a name="line_4200"></a></li>
<li id="line_4201" class="odd"><span class="lineNumber">&nbsp;4201&nbsp;</span>			seg.isStart&nbsp;?&nbsp;'fc-start'&nbsp;:&nbsp;'fc-not-start',<a name="line_4201"></a></li>
<li id="line_4202" class="even"><span class="lineNumber">&nbsp;4202&nbsp;</span>			seg.isEnd&nbsp;?&nbsp;'fc-end'&nbsp;:&nbsp;'fc-not-end'<a name="line_4202"></a></li>
<li id="line_4203" class="odd"><span class="lineNumber">&nbsp;4203&nbsp;</span>		].concat(<a name="line_4203"></a></li>
<li id="line_4204" class="even"><span class="lineNumber">&nbsp;4204&nbsp;</span>			event.className,<a name="line_4204"></a></li>
<li id="line_4205" class="odd"><span class="lineNumber">&nbsp;4205&nbsp;</span>			event.source&nbsp;?&nbsp;event.source.className&nbsp;:&nbsp;[]<a name="line_4205"></a></li>
<li id="line_4206" class="even"><span class="lineNumber">&nbsp;4206&nbsp;</span>		);<a name="line_4206"></a></li>
<li id="line_4207" class="odd"><span class="lineNumber">&nbsp;4207&nbsp;</span><a name="line_4207"></a></li>
<li id="line_4208" class="even"><span class="lineNumber">&nbsp;4208&nbsp;</span>		if&nbsp;(isDraggable)&nbsp;{<a name="line_4208"></a></li>
<li id="line_4209" class="odd"><span class="lineNumber">&nbsp;4209&nbsp;</span>			classes.push('fc-draggable');<a name="line_4209"></a></li>
<li id="line_4210" class="even"><span class="lineNumber">&nbsp;4210&nbsp;</span>		}<a name="line_4210"></a></li>
<li id="line_4211" class="odd"><span class="lineNumber">&nbsp;4211&nbsp;</span>		if&nbsp;(isResizable)&nbsp;{<a name="line_4211"></a></li>
<li id="line_4212" class="even"><span class="lineNumber">&nbsp;4212&nbsp;</span>			classes.push('fc-resizable');<a name="line_4212"></a></li>
<li id="line_4213" class="odd"><span class="lineNumber">&nbsp;4213&nbsp;</span>		}<a name="line_4213"></a></li>
<li id="line_4214" class="even"><span class="lineNumber">&nbsp;4214&nbsp;</span><a name="line_4214"></a></li>
<li id="line_4215" class="odd"><span class="lineNumber">&nbsp;4215&nbsp;</span>		return&nbsp;classes;<a name="line_4215"></a></li>
<li id="line_4216" class="even"><span class="lineNumber">&nbsp;4216&nbsp;</span>	},<a name="line_4216"></a></li>
<li id="line_4217" class="odd"><span class="lineNumber">&nbsp;4217&nbsp;</span><a name="line_4217"></a></li>
<li id="line_4218" class="even"><span class="lineNumber">&nbsp;4218&nbsp;</span><a name="line_4218"></a></li>
<li id="line_4219" class="odd"><span class="lineNumber">&nbsp;4219&nbsp;</span>	//&nbsp;Utility&nbsp;for&nbsp;generating&nbsp;event&nbsp;skin-related&nbsp;CSS&nbsp;properties<a name="line_4219"></a></li>
<li id="line_4220" class="even"><span class="lineNumber">&nbsp;4220&nbsp;</span>	getEventSkinCss:&nbsp;function(event)&nbsp;{<a name="line_4220"></a></li>
<li id="line_4221" class="odd"><span class="lineNumber">&nbsp;4221&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_4221"></a></li>
<li id="line_4222" class="even"><span class="lineNumber">&nbsp;4222&nbsp;</span>		var&nbsp;source&nbsp;=&nbsp;event.source&nbsp;||&nbsp;{};<a name="line_4222"></a></li>
<li id="line_4223" class="odd"><span class="lineNumber">&nbsp;4223&nbsp;</span>		var&nbsp;eventColor&nbsp;=&nbsp;event.color;<a name="line_4223"></a></li>
<li id="line_4224" class="even"><span class="lineNumber">&nbsp;4224&nbsp;</span>		var&nbsp;sourceColor&nbsp;=&nbsp;source.color;<a name="line_4224"></a></li>
<li id="line_4225" class="odd"><span class="lineNumber">&nbsp;4225&nbsp;</span>		var&nbsp;optionColor&nbsp;=&nbsp;view.opt('eventColor');<a name="line_4225"></a></li>
<li id="line_4226" class="even"><span class="lineNumber">&nbsp;4226&nbsp;</span><a name="line_4226"></a></li>
<li id="line_4227" class="odd"><span class="lineNumber">&nbsp;4227&nbsp;</span>		return&nbsp;{<a name="line_4227"></a></li>
<li id="line_4228" class="even"><span class="lineNumber">&nbsp;4228&nbsp;</span>			'background-color':<a name="line_4228"></a></li>
<li id="line_4229" class="odd"><span class="lineNumber">&nbsp;4229&nbsp;</span>				event.backgroundColor&nbsp;||<a name="line_4229"></a></li>
<li id="line_4230" class="even"><span class="lineNumber">&nbsp;4230&nbsp;</span>				eventColor&nbsp;||<a name="line_4230"></a></li>
<li id="line_4231" class="odd"><span class="lineNumber">&nbsp;4231&nbsp;</span>				source.backgroundColor&nbsp;||<a name="line_4231"></a></li>
<li id="line_4232" class="even"><span class="lineNumber">&nbsp;4232&nbsp;</span>				sourceColor&nbsp;||<a name="line_4232"></a></li>
<li id="line_4233" class="odd"><span class="lineNumber">&nbsp;4233&nbsp;</span>				view.opt('eventBackgroundColor')&nbsp;||<a name="line_4233"></a></li>
<li id="line_4234" class="even"><span class="lineNumber">&nbsp;4234&nbsp;</span>				optionColor,<a name="line_4234"></a></li>
<li id="line_4235" class="odd"><span class="lineNumber">&nbsp;4235&nbsp;</span>			'border-color':<a name="line_4235"></a></li>
<li id="line_4236" class="even"><span class="lineNumber">&nbsp;4236&nbsp;</span>				event.borderColor&nbsp;||<a name="line_4236"></a></li>
<li id="line_4237" class="odd"><span class="lineNumber">&nbsp;4237&nbsp;</span>				eventColor&nbsp;||<a name="line_4237"></a></li>
<li id="line_4238" class="even"><span class="lineNumber">&nbsp;4238&nbsp;</span>				source.borderColor&nbsp;||<a name="line_4238"></a></li>
<li id="line_4239" class="odd"><span class="lineNumber">&nbsp;4239&nbsp;</span>				sourceColor&nbsp;||<a name="line_4239"></a></li>
<li id="line_4240" class="even"><span class="lineNumber">&nbsp;4240&nbsp;</span>				view.opt('eventBorderColor')&nbsp;||<a name="line_4240"></a></li>
<li id="line_4241" class="odd"><span class="lineNumber">&nbsp;4241&nbsp;</span>				optionColor,<a name="line_4241"></a></li>
<li id="line_4242" class="even"><span class="lineNumber">&nbsp;4242&nbsp;</span>			color:<a name="line_4242"></a></li>
<li id="line_4243" class="odd"><span class="lineNumber">&nbsp;4243&nbsp;</span>				event.textColor&nbsp;||<a name="line_4243"></a></li>
<li id="line_4244" class="even"><span class="lineNumber">&nbsp;4244&nbsp;</span>				source.textColor&nbsp;||<a name="line_4244"></a></li>
<li id="line_4245" class="odd"><span class="lineNumber">&nbsp;4245&nbsp;</span>				view.opt('eventTextColor')<a name="line_4245"></a></li>
<li id="line_4246" class="even"><span class="lineNumber">&nbsp;4246&nbsp;</span>		};<a name="line_4246"></a></li>
<li id="line_4247" class="odd"><span class="lineNumber">&nbsp;4247&nbsp;</span>	},<a name="line_4247"></a></li>
<li id="line_4248" class="even"><span class="lineNumber">&nbsp;4248&nbsp;</span><a name="line_4248"></a></li>
<li id="line_4249" class="odd"><span class="lineNumber">&nbsp;4249&nbsp;</span><a name="line_4249"></a></li>
<li id="line_4250" class="even"><span class="lineNumber">&nbsp;4250&nbsp;</span>	/*&nbsp;Converting&nbsp;events&nbsp;-&gt;&nbsp;ranges&nbsp;-&gt;&nbsp;segs<a name="line_4250"></a></li>
<li id="line_4251" class="odd"><span class="lineNumber">&nbsp;4251&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_4251"></a></li>
<li id="line_4252" class="even"><span class="lineNumber">&nbsp;4252&nbsp;</span><a name="line_4252"></a></li>
<li id="line_4253" class="odd"><span class="lineNumber">&nbsp;4253&nbsp;</span><a name="line_4253"></a></li>
<li id="line_4254" class="even"><span class="lineNumber">&nbsp;4254&nbsp;</span>	//&nbsp;Converts&nbsp;an&nbsp;array&nbsp;of&nbsp;event&nbsp;objects&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;event&nbsp;segment&nbsp;objects.<a name="line_4254"></a></li>
<li id="line_4255" class="odd"><span class="lineNumber">&nbsp;4255&nbsp;</span>	//&nbsp;A&nbsp;custom&nbsp;`rangeToSegsFunc`&nbsp;may&nbsp;be&nbsp;given&nbsp;for&nbsp;arbitrarily&nbsp;slicing&nbsp;up&nbsp;events.<a name="line_4255"></a></li>
<li id="line_4256" class="even"><span class="lineNumber">&nbsp;4256&nbsp;</span>	//&nbsp;Doesn't&nbsp;guarantee&nbsp;an&nbsp;order&nbsp;for&nbsp;the&nbsp;resulting&nbsp;array.<a name="line_4256"></a></li>
<li id="line_4257" class="odd"><span class="lineNumber">&nbsp;4257&nbsp;</span>	eventsToSegs:&nbsp;function(events,&nbsp;rangeToSegsFunc)&nbsp;{<a name="line_4257"></a></li>
<li id="line_4258" class="even"><span class="lineNumber">&nbsp;4258&nbsp;</span>		var&nbsp;eventRanges&nbsp;=&nbsp;this.eventsToRanges(events);<a name="line_4258"></a></li>
<li id="line_4259" class="odd"><span class="lineNumber">&nbsp;4259&nbsp;</span>		var&nbsp;segs&nbsp;=&nbsp;[];<a name="line_4259"></a></li>
<li id="line_4260" class="even"><span class="lineNumber">&nbsp;4260&nbsp;</span>		var&nbsp;i;<a name="line_4260"></a></li>
<li id="line_4261" class="odd"><span class="lineNumber">&nbsp;4261&nbsp;</span><a name="line_4261"></a></li>
<li id="line_4262" class="even"><span class="lineNumber">&nbsp;4262&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;eventRanges.length;&nbsp;i++)&nbsp;{<a name="line_4262"></a></li>
<li id="line_4263" class="odd"><span class="lineNumber">&nbsp;4263&nbsp;</span>			segs.push.apply(<a name="line_4263"></a></li>
<li id="line_4264" class="even"><span class="lineNumber">&nbsp;4264&nbsp;</span>				segs,<a name="line_4264"></a></li>
<li id="line_4265" class="odd"><span class="lineNumber">&nbsp;4265&nbsp;</span>				this.eventRangeToSegs(eventRanges[i],&nbsp;rangeToSegsFunc)<a name="line_4265"></a></li>
<li id="line_4266" class="even"><span class="lineNumber">&nbsp;4266&nbsp;</span>			);<a name="line_4266"></a></li>
<li id="line_4267" class="odd"><span class="lineNumber">&nbsp;4267&nbsp;</span>		}<a name="line_4267"></a></li>
<li id="line_4268" class="even"><span class="lineNumber">&nbsp;4268&nbsp;</span><a name="line_4268"></a></li>
<li id="line_4269" class="odd"><span class="lineNumber">&nbsp;4269&nbsp;</span>		return&nbsp;segs;<a name="line_4269"></a></li>
<li id="line_4270" class="even"><span class="lineNumber">&nbsp;4270&nbsp;</span>	},<a name="line_4270"></a></li>
<li id="line_4271" class="odd"><span class="lineNumber">&nbsp;4271&nbsp;</span><a name="line_4271"></a></li>
<li id="line_4272" class="even"><span class="lineNumber">&nbsp;4272&nbsp;</span><a name="line_4272"></a></li>
<li id="line_4273" class="odd"><span class="lineNumber">&nbsp;4273&nbsp;</span>	//&nbsp;Converts&nbsp;an&nbsp;array&nbsp;of&nbsp;events&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;"range"&nbsp;objects.<a name="line_4273"></a></li>
<li id="line_4274" class="even"><span class="lineNumber">&nbsp;4274&nbsp;</span>	//&nbsp;A&nbsp;"range"&nbsp;object&nbsp;is&nbsp;a&nbsp;plain&nbsp;object&nbsp;with&nbsp;start/end&nbsp;properties&nbsp;denoting&nbsp;the&nbsp;time&nbsp;it&nbsp;covers.&nbsp;Also&nbsp;an&nbsp;event&nbsp;property.<a name="line_4274"></a></li>
<li id="line_4275" class="odd"><span class="lineNumber">&nbsp;4275&nbsp;</span>	//&nbsp;For&nbsp;"normal"&nbsp;events,&nbsp;this&nbsp;will&nbsp;be&nbsp;identical&nbsp;to&nbsp;the&nbsp;event's&nbsp;start/end,&nbsp;but&nbsp;for&nbsp;"inverse-background"&nbsp;events,<a name="line_4275"></a></li>
<li id="line_4276" class="even"><span class="lineNumber">&nbsp;4276&nbsp;</span>	//&nbsp;will&nbsp;create&nbsp;an&nbsp;array&nbsp;of&nbsp;ranges&nbsp;that&nbsp;span&nbsp;the&nbsp;time&nbsp;*not*&nbsp;covered&nbsp;by&nbsp;the&nbsp;given&nbsp;event.<a name="line_4276"></a></li>
<li id="line_4277" class="odd"><span class="lineNumber">&nbsp;4277&nbsp;</span>	//&nbsp;Doesn't&nbsp;guarantee&nbsp;an&nbsp;order&nbsp;for&nbsp;the&nbsp;resulting&nbsp;array.<a name="line_4277"></a></li>
<li id="line_4278" class="even"><span class="lineNumber">&nbsp;4278&nbsp;</span>	eventsToRanges:&nbsp;function(events)&nbsp;{<a name="line_4278"></a></li>
<li id="line_4279" class="odd"><span class="lineNumber">&nbsp;4279&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_4279"></a></li>
<li id="line_4280" class="even"><span class="lineNumber">&nbsp;4280&nbsp;</span>		var&nbsp;eventsById&nbsp;=&nbsp;groupEventsById(events);<a name="line_4280"></a></li>
<li id="line_4281" class="odd"><span class="lineNumber">&nbsp;4281&nbsp;</span>		var&nbsp;ranges&nbsp;=&nbsp;[];<a name="line_4281"></a></li>
<li id="line_4282" class="even"><span class="lineNumber">&nbsp;4282&nbsp;</span><a name="line_4282"></a></li>
<li id="line_4283" class="odd"><span class="lineNumber">&nbsp;4283&nbsp;</span>		//&nbsp;group&nbsp;by&nbsp;ID&nbsp;so&nbsp;that&nbsp;related&nbsp;inverse-background&nbsp;events&nbsp;can&nbsp;be&nbsp;rendered&nbsp;together<a name="line_4283"></a></li>
<li id="line_4284" class="even"><span class="lineNumber">&nbsp;4284&nbsp;</span>		$.each(eventsById,&nbsp;function(id,&nbsp;eventGroup)&nbsp;{<a name="line_4284"></a></li>
<li id="line_4285" class="odd"><span class="lineNumber">&nbsp;4285&nbsp;</span>			if&nbsp;(eventGroup.length)&nbsp;{<a name="line_4285"></a></li>
<li id="line_4286" class="even"><span class="lineNumber">&nbsp;4286&nbsp;</span>				ranges.push.apply(<a name="line_4286"></a></li>
<li id="line_4287" class="odd"><span class="lineNumber">&nbsp;4287&nbsp;</span>					ranges,<a name="line_4287"></a></li>
<li id="line_4288" class="even"><span class="lineNumber">&nbsp;4288&nbsp;</span>					isInverseBgEvent(eventGroup[0])&nbsp;?<a name="line_4288"></a></li>
<li id="line_4289" class="odd"><span class="lineNumber">&nbsp;4289&nbsp;</span>						_this.eventsToInverseRanges(eventGroup)&nbsp;:<a name="line_4289"></a></li>
<li id="line_4290" class="even"><span class="lineNumber">&nbsp;4290&nbsp;</span>						_this.eventsToNormalRanges(eventGroup)<a name="line_4290"></a></li>
<li id="line_4291" class="odd"><span class="lineNumber">&nbsp;4291&nbsp;</span>				);<a name="line_4291"></a></li>
<li id="line_4292" class="even"><span class="lineNumber">&nbsp;4292&nbsp;</span>			}<a name="line_4292"></a></li>
<li id="line_4293" class="odd"><span class="lineNumber">&nbsp;4293&nbsp;</span>		});<a name="line_4293"></a></li>
<li id="line_4294" class="even"><span class="lineNumber">&nbsp;4294&nbsp;</span><a name="line_4294"></a></li>
<li id="line_4295" class="odd"><span class="lineNumber">&nbsp;4295&nbsp;</span>		return&nbsp;ranges;<a name="line_4295"></a></li>
<li id="line_4296" class="even"><span class="lineNumber">&nbsp;4296&nbsp;</span>	},<a name="line_4296"></a></li>
<li id="line_4297" class="odd"><span class="lineNumber">&nbsp;4297&nbsp;</span><a name="line_4297"></a></li>
<li id="line_4298" class="even"><span class="lineNumber">&nbsp;4298&nbsp;</span><a name="line_4298"></a></li>
<li id="line_4299" class="odd"><span class="lineNumber">&nbsp;4299&nbsp;</span>	//&nbsp;Converts&nbsp;an&nbsp;array&nbsp;of&nbsp;"normal"&nbsp;events&nbsp;(not&nbsp;inverted&nbsp;rendering)&nbsp;into&nbsp;a&nbsp;parallel&nbsp;array&nbsp;of&nbsp;ranges<a name="line_4299"></a></li>
<li id="line_4300" class="even"><span class="lineNumber">&nbsp;4300&nbsp;</span>	eventsToNormalRanges:&nbsp;function(events)&nbsp;{<a name="line_4300"></a></li>
<li id="line_4301" class="odd"><span class="lineNumber">&nbsp;4301&nbsp;</span>		var&nbsp;calendar&nbsp;=&nbsp;this.view.calendar;<a name="line_4301"></a></li>
<li id="line_4302" class="even"><span class="lineNumber">&nbsp;4302&nbsp;</span>		var&nbsp;ranges&nbsp;=&nbsp;[];<a name="line_4302"></a></li>
<li id="line_4303" class="odd"><span class="lineNumber">&nbsp;4303&nbsp;</span>		var&nbsp;i,&nbsp;event;<a name="line_4303"></a></li>
<li id="line_4304" class="even"><span class="lineNumber">&nbsp;4304&nbsp;</span>		var&nbsp;eventStart,&nbsp;eventEnd;<a name="line_4304"></a></li>
<li id="line_4305" class="odd"><span class="lineNumber">&nbsp;4305&nbsp;</span><a name="line_4305"></a></li>
<li id="line_4306" class="even"><span class="lineNumber">&nbsp;4306&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;events.length;&nbsp;i++)&nbsp;{<a name="line_4306"></a></li>
<li id="line_4307" class="odd"><span class="lineNumber">&nbsp;4307&nbsp;</span>			event&nbsp;=&nbsp;events[i];<a name="line_4307"></a></li>
<li id="line_4308" class="even"><span class="lineNumber">&nbsp;4308&nbsp;</span><a name="line_4308"></a></li>
<li id="line_4309" class="odd"><span class="lineNumber">&nbsp;4309&nbsp;</span>			//&nbsp;make&nbsp;copies&nbsp;and&nbsp;normalize&nbsp;by&nbsp;stripping&nbsp;timezone<a name="line_4309"></a></li>
<li id="line_4310" class="even"><span class="lineNumber">&nbsp;4310&nbsp;</span>			eventStart&nbsp;=&nbsp;event.start.clone().stripZone();<a name="line_4310"></a></li>
<li id="line_4311" class="odd"><span class="lineNumber">&nbsp;4311&nbsp;</span>			eventEnd&nbsp;=&nbsp;calendar.getEventEnd(event).stripZone();<a name="line_4311"></a></li>
<li id="line_4312" class="even"><span class="lineNumber">&nbsp;4312&nbsp;</span><a name="line_4312"></a></li>
<li id="line_4313" class="odd"><span class="lineNumber">&nbsp;4313&nbsp;</span>			ranges.push({<a name="line_4313"></a></li>
<li id="line_4314" class="even"><span class="lineNumber">&nbsp;4314&nbsp;</span>				event:&nbsp;event,<a name="line_4314"></a></li>
<li id="line_4315" class="odd"><span class="lineNumber">&nbsp;4315&nbsp;</span>				start:&nbsp;eventStart,<a name="line_4315"></a></li>
<li id="line_4316" class="even"><span class="lineNumber">&nbsp;4316&nbsp;</span>				end:&nbsp;eventEnd,<a name="line_4316"></a></li>
<li id="line_4317" class="odd"><span class="lineNumber">&nbsp;4317&nbsp;</span>				eventStartMS:&nbsp;+eventStart,<a name="line_4317"></a></li>
<li id="line_4318" class="even"><span class="lineNumber">&nbsp;4318&nbsp;</span>				eventDurationMS:&nbsp;eventEnd&nbsp;-&nbsp;eventStart<a name="line_4318"></a></li>
<li id="line_4319" class="odd"><span class="lineNumber">&nbsp;4319&nbsp;</span>			});<a name="line_4319"></a></li>
<li id="line_4320" class="even"><span class="lineNumber">&nbsp;4320&nbsp;</span>		}<a name="line_4320"></a></li>
<li id="line_4321" class="odd"><span class="lineNumber">&nbsp;4321&nbsp;</span><a name="line_4321"></a></li>
<li id="line_4322" class="even"><span class="lineNumber">&nbsp;4322&nbsp;</span>		return&nbsp;ranges;<a name="line_4322"></a></li>
<li id="line_4323" class="odd"><span class="lineNumber">&nbsp;4323&nbsp;</span>	},<a name="line_4323"></a></li>
<li id="line_4324" class="even"><span class="lineNumber">&nbsp;4324&nbsp;</span><a name="line_4324"></a></li>
<li id="line_4325" class="odd"><span class="lineNumber">&nbsp;4325&nbsp;</span><a name="line_4325"></a></li>
<li id="line_4326" class="even"><span class="lineNumber">&nbsp;4326&nbsp;</span>	//&nbsp;Converts&nbsp;an&nbsp;array&nbsp;of&nbsp;events,&nbsp;with&nbsp;inverse-background&nbsp;rendering,&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;range&nbsp;objects.<a name="line_4326"></a></li>
<li id="line_4327" class="odd"><span class="lineNumber">&nbsp;4327&nbsp;</span>	//&nbsp;The&nbsp;range&nbsp;objects&nbsp;will&nbsp;cover&nbsp;all&nbsp;the&nbsp;time&nbsp;NOT&nbsp;covered&nbsp;by&nbsp;the&nbsp;events.<a name="line_4327"></a></li>
<li id="line_4328" class="even"><span class="lineNumber">&nbsp;4328&nbsp;</span>	eventsToInverseRanges:&nbsp;function(events)&nbsp;{<a name="line_4328"></a></li>
<li id="line_4329" class="odd"><span class="lineNumber">&nbsp;4329&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_4329"></a></li>
<li id="line_4330" class="even"><span class="lineNumber">&nbsp;4330&nbsp;</span>		var&nbsp;viewStart&nbsp;=&nbsp;view.start.clone().stripZone();&nbsp;//&nbsp;normalize&nbsp;timezone<a name="line_4330"></a></li>
<li id="line_4331" class="odd"><span class="lineNumber">&nbsp;4331&nbsp;</span>		var&nbsp;viewEnd&nbsp;=&nbsp;view.end.clone().stripZone();&nbsp;//&nbsp;normalize&nbsp;timezone<a name="line_4331"></a></li>
<li id="line_4332" class="even"><span class="lineNumber">&nbsp;4332&nbsp;</span>		var&nbsp;normalRanges&nbsp;=&nbsp;this.eventsToNormalRanges(events);&nbsp;//&nbsp;will&nbsp;give&nbsp;us&nbsp;normalized&nbsp;dates&nbsp;we&nbsp;can&nbsp;use&nbsp;w/o&nbsp;copies<a name="line_4332"></a></li>
<li id="line_4333" class="odd"><span class="lineNumber">&nbsp;4333&nbsp;</span>		var&nbsp;inverseRanges&nbsp;=&nbsp;[];<a name="line_4333"></a></li>
<li id="line_4334" class="even"><span class="lineNumber">&nbsp;4334&nbsp;</span>		var&nbsp;event0&nbsp;=&nbsp;events[0];&nbsp;//&nbsp;assign&nbsp;this&nbsp;to&nbsp;each&nbsp;range's&nbsp;`.event`<a name="line_4334"></a></li>
<li id="line_4335" class="odd"><span class="lineNumber">&nbsp;4335&nbsp;</span>		var&nbsp;start&nbsp;=&nbsp;viewStart;&nbsp;//&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;previous&nbsp;range.&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;new&nbsp;range<a name="line_4335"></a></li>
<li id="line_4336" class="even"><span class="lineNumber">&nbsp;4336&nbsp;</span>		var&nbsp;i,&nbsp;normalRange;<a name="line_4336"></a></li>
<li id="line_4337" class="odd"><span class="lineNumber">&nbsp;4337&nbsp;</span><a name="line_4337"></a></li>
<li id="line_4338" class="even"><span class="lineNumber">&nbsp;4338&nbsp;</span>		//&nbsp;ranges&nbsp;need&nbsp;to&nbsp;be&nbsp;in&nbsp;order.&nbsp;required&nbsp;for&nbsp;our&nbsp;date-walking&nbsp;algorithm<a name="line_4338"></a></li>
<li id="line_4339" class="odd"><span class="lineNumber">&nbsp;4339&nbsp;</span>		normalRanges.sort(compareNormalRanges);<a name="line_4339"></a></li>
<li id="line_4340" class="even"><span class="lineNumber">&nbsp;4340&nbsp;</span><a name="line_4340"></a></li>
<li id="line_4341" class="odd"><span class="lineNumber">&nbsp;4341&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;normalRanges.length;&nbsp;i++)&nbsp;{<a name="line_4341"></a></li>
<li id="line_4342" class="even"><span class="lineNumber">&nbsp;4342&nbsp;</span>			normalRange&nbsp;=&nbsp;normalRanges[i];<a name="line_4342"></a></li>
<li id="line_4343" class="odd"><span class="lineNumber">&nbsp;4343&nbsp;</span><a name="line_4343"></a></li>
<li id="line_4344" class="even"><span class="lineNumber">&nbsp;4344&nbsp;</span>			//&nbsp;add&nbsp;the&nbsp;span&nbsp;of&nbsp;time&nbsp;before&nbsp;the&nbsp;event&nbsp;(if&nbsp;there&nbsp;is&nbsp;any)<a name="line_4344"></a></li>
<li id="line_4345" class="odd"><span class="lineNumber">&nbsp;4345&nbsp;</span>			if&nbsp;(normalRange.start&nbsp;&gt;&nbsp;start)&nbsp;{&nbsp;//&nbsp;compare&nbsp;millisecond&nbsp;time&nbsp;(skip&nbsp;any&nbsp;ambig&nbsp;logic)<a name="line_4345"></a></li>
<li id="line_4346" class="even"><span class="lineNumber">&nbsp;4346&nbsp;</span>				inverseRanges.push({<a name="line_4346"></a></li>
<li id="line_4347" class="odd"><span class="lineNumber">&nbsp;4347&nbsp;</span>					event:&nbsp;event0,<a name="line_4347"></a></li>
<li id="line_4348" class="even"><span class="lineNumber">&nbsp;4348&nbsp;</span>					start:&nbsp;start,<a name="line_4348"></a></li>
<li id="line_4349" class="odd"><span class="lineNumber">&nbsp;4349&nbsp;</span>					end:&nbsp;normalRange.start<a name="line_4349"></a></li>
<li id="line_4350" class="even"><span class="lineNumber">&nbsp;4350&nbsp;</span>				});<a name="line_4350"></a></li>
<li id="line_4351" class="odd"><span class="lineNumber">&nbsp;4351&nbsp;</span>			}<a name="line_4351"></a></li>
<li id="line_4352" class="even"><span class="lineNumber">&nbsp;4352&nbsp;</span><a name="line_4352"></a></li>
<li id="line_4353" class="odd"><span class="lineNumber">&nbsp;4353&nbsp;</span>			start&nbsp;=&nbsp;normalRange.end;<a name="line_4353"></a></li>
<li id="line_4354" class="even"><span class="lineNumber">&nbsp;4354&nbsp;</span>		}<a name="line_4354"></a></li>
<li id="line_4355" class="odd"><span class="lineNumber">&nbsp;4355&nbsp;</span><a name="line_4355"></a></li>
<li id="line_4356" class="even"><span class="lineNumber">&nbsp;4356&nbsp;</span>		//&nbsp;add&nbsp;the&nbsp;span&nbsp;of&nbsp;time&nbsp;after&nbsp;the&nbsp;last&nbsp;event&nbsp;(if&nbsp;there&nbsp;is&nbsp;any)<a name="line_4356"></a></li>
<li id="line_4357" class="odd"><span class="lineNumber">&nbsp;4357&nbsp;</span>		if&nbsp;(start&nbsp;&lt;&nbsp;viewEnd)&nbsp;{&nbsp;//&nbsp;compare&nbsp;millisecond&nbsp;time&nbsp;(skip&nbsp;any&nbsp;ambig&nbsp;logic)<a name="line_4357"></a></li>
<li id="line_4358" class="even"><span class="lineNumber">&nbsp;4358&nbsp;</span>			inverseRanges.push({<a name="line_4358"></a></li>
<li id="line_4359" class="odd"><span class="lineNumber">&nbsp;4359&nbsp;</span>				event:&nbsp;event0,<a name="line_4359"></a></li>
<li id="line_4360" class="even"><span class="lineNumber">&nbsp;4360&nbsp;</span>				start:&nbsp;start,<a name="line_4360"></a></li>
<li id="line_4361" class="odd"><span class="lineNumber">&nbsp;4361&nbsp;</span>				end:&nbsp;viewEnd<a name="line_4361"></a></li>
<li id="line_4362" class="even"><span class="lineNumber">&nbsp;4362&nbsp;</span>			});<a name="line_4362"></a></li>
<li id="line_4363" class="odd"><span class="lineNumber">&nbsp;4363&nbsp;</span>		}<a name="line_4363"></a></li>
<li id="line_4364" class="even"><span class="lineNumber">&nbsp;4364&nbsp;</span><a name="line_4364"></a></li>
<li id="line_4365" class="odd"><span class="lineNumber">&nbsp;4365&nbsp;</span>		return&nbsp;inverseRanges;<a name="line_4365"></a></li>
<li id="line_4366" class="even"><span class="lineNumber">&nbsp;4366&nbsp;</span>	},<a name="line_4366"></a></li>
<li id="line_4367" class="odd"><span class="lineNumber">&nbsp;4367&nbsp;</span><a name="line_4367"></a></li>
<li id="line_4368" class="even"><span class="lineNumber">&nbsp;4368&nbsp;</span><a name="line_4368"></a></li>
<li id="line_4369" class="odd"><span class="lineNumber">&nbsp;4369&nbsp;</span>	//&nbsp;Slices&nbsp;the&nbsp;given&nbsp;event&nbsp;range&nbsp;into&nbsp;one&nbsp;or&nbsp;more&nbsp;segment&nbsp;objects.<a name="line_4369"></a></li>
<li id="line_4370" class="even"><span class="lineNumber">&nbsp;4370&nbsp;</span>	//&nbsp;A&nbsp;`rangeToSegsFunc`&nbsp;custom&nbsp;slicing&nbsp;function&nbsp;can&nbsp;be&nbsp;given.<a name="line_4370"></a></li>
<li id="line_4371" class="odd"><span class="lineNumber">&nbsp;4371&nbsp;</span>	eventRangeToSegs:&nbsp;function(eventRange,&nbsp;rangeToSegsFunc)&nbsp;{<a name="line_4371"></a></li>
<li id="line_4372" class="even"><span class="lineNumber">&nbsp;4372&nbsp;</span>		var&nbsp;segs;<a name="line_4372"></a></li>
<li id="line_4373" class="odd"><span class="lineNumber">&nbsp;4373&nbsp;</span>		var&nbsp;i,&nbsp;seg;<a name="line_4373"></a></li>
<li id="line_4374" class="even"><span class="lineNumber">&nbsp;4374&nbsp;</span><a name="line_4374"></a></li>
<li id="line_4375" class="odd"><span class="lineNumber">&nbsp;4375&nbsp;</span>		eventRange&nbsp;=&nbsp;this.view.calendar.ensureVisibleEventRange(eventRange);<a name="line_4375"></a></li>
<li id="line_4376" class="even"><span class="lineNumber">&nbsp;4376&nbsp;</span><a name="line_4376"></a></li>
<li id="line_4377" class="odd"><span class="lineNumber">&nbsp;4377&nbsp;</span>		if&nbsp;(rangeToSegsFunc)&nbsp;{<a name="line_4377"></a></li>
<li id="line_4378" class="even"><span class="lineNumber">&nbsp;4378&nbsp;</span>			segs&nbsp;=&nbsp;rangeToSegsFunc(eventRange);<a name="line_4378"></a></li>
<li id="line_4379" class="odd"><span class="lineNumber">&nbsp;4379&nbsp;</span>		}<a name="line_4379"></a></li>
<li id="line_4380" class="even"><span class="lineNumber">&nbsp;4380&nbsp;</span>		else&nbsp;{<a name="line_4380"></a></li>
<li id="line_4381" class="odd"><span class="lineNumber">&nbsp;4381&nbsp;</span>			segs&nbsp;=&nbsp;this.rangeToSegs(eventRange);&nbsp;//&nbsp;defined&nbsp;by&nbsp;the&nbsp;subclass<a name="line_4381"></a></li>
<li id="line_4382" class="even"><span class="lineNumber">&nbsp;4382&nbsp;</span>		}<a name="line_4382"></a></li>
<li id="line_4383" class="odd"><span class="lineNumber">&nbsp;4383&nbsp;</span><a name="line_4383"></a></li>
<li id="line_4384" class="even"><span class="lineNumber">&nbsp;4384&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;segs.length;&nbsp;i++)&nbsp;{<a name="line_4384"></a></li>
<li id="line_4385" class="odd"><span class="lineNumber">&nbsp;4385&nbsp;</span>			seg&nbsp;=&nbsp;segs[i];<a name="line_4385"></a></li>
<li id="line_4386" class="even"><span class="lineNumber">&nbsp;4386&nbsp;</span>			seg.event&nbsp;=&nbsp;eventRange.event;<a name="line_4386"></a></li>
<li id="line_4387" class="odd"><span class="lineNumber">&nbsp;4387&nbsp;</span>			seg.eventStartMS&nbsp;=&nbsp;eventRange.eventStartMS;<a name="line_4387"></a></li>
<li id="line_4388" class="even"><span class="lineNumber">&nbsp;4388&nbsp;</span>			seg.eventDurationMS&nbsp;=&nbsp;eventRange.eventDurationMS;<a name="line_4388"></a></li>
<li id="line_4389" class="odd"><span class="lineNumber">&nbsp;4389&nbsp;</span>		}<a name="line_4389"></a></li>
<li id="line_4390" class="even"><span class="lineNumber">&nbsp;4390&nbsp;</span><a name="line_4390"></a></li>
<li id="line_4391" class="odd"><span class="lineNumber">&nbsp;4391&nbsp;</span>		return&nbsp;segs;<a name="line_4391"></a></li>
<li id="line_4392" class="even"><span class="lineNumber">&nbsp;4392&nbsp;</span>	}<a name="line_4392"></a></li>
<li id="line_4393" class="odd"><span class="lineNumber">&nbsp;4393&nbsp;</span><a name="line_4393"></a></li>
<li id="line_4394" class="even"><span class="lineNumber">&nbsp;4394&nbsp;</span>});<a name="line_4394"></a></li>
<li id="line_4395" class="odd"><span class="lineNumber">&nbsp;4395&nbsp;</span><a name="line_4395"></a></li>
<li id="line_4396" class="even"><span class="lineNumber">&nbsp;4396&nbsp;</span><a name="line_4396"></a></li>
<li id="line_4397" class="odd"><span class="lineNumber">&nbsp;4397&nbsp;</span>/*&nbsp;Utilities<a name="line_4397"></a></li>
<li id="line_4398" class="even"><span class="lineNumber">&nbsp;4398&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_4398"></a></li>
<li id="line_4399" class="odd"><span class="lineNumber">&nbsp;4399&nbsp;</span><a name="line_4399"></a></li>
<li id="line_4400" class="even"><span class="lineNumber">&nbsp;4400&nbsp;</span><a name="line_4400"></a></li>
<li id="line_4401" class="odd"><span class="lineNumber">&nbsp;4401&nbsp;</span>function&nbsp;isBgEvent(event)&nbsp;{&nbsp;//&nbsp;returns&nbsp;true&nbsp;if&nbsp;background&nbsp;OR&nbsp;inverse-background<a name="line_4401"></a></li>
<li id="line_4402" class="even"><span class="lineNumber">&nbsp;4402&nbsp;</span>	var&nbsp;rendering&nbsp;=&nbsp;getEventRendering(event);<a name="line_4402"></a></li>
<li id="line_4403" class="odd"><span class="lineNumber">&nbsp;4403&nbsp;</span>	return&nbsp;rendering&nbsp;===&nbsp;'background'&nbsp;||&nbsp;rendering&nbsp;===&nbsp;'inverse-background';<a name="line_4403"></a></li>
<li id="line_4404" class="even"><span class="lineNumber">&nbsp;4404&nbsp;</span>}<a name="line_4404"></a></li>
<li id="line_4405" class="odd"><span class="lineNumber">&nbsp;4405&nbsp;</span><a name="line_4405"></a></li>
<li id="line_4406" class="even"><span class="lineNumber">&nbsp;4406&nbsp;</span><a name="line_4406"></a></li>
<li id="line_4407" class="odd"><span class="lineNumber">&nbsp;4407&nbsp;</span>function&nbsp;isInverseBgEvent(event)&nbsp;{<a name="line_4407"></a></li>
<li id="line_4408" class="even"><span class="lineNumber">&nbsp;4408&nbsp;</span>	return&nbsp;getEventRendering(event)&nbsp;===&nbsp;'inverse-background';<a name="line_4408"></a></li>
<li id="line_4409" class="odd"><span class="lineNumber">&nbsp;4409&nbsp;</span>}<a name="line_4409"></a></li>
<li id="line_4410" class="even"><span class="lineNumber">&nbsp;4410&nbsp;</span><a name="line_4410"></a></li>
<li id="line_4411" class="odd"><span class="lineNumber">&nbsp;4411&nbsp;</span><a name="line_4411"></a></li>
<li id="line_4412" class="even"><span class="lineNumber">&nbsp;4412&nbsp;</span>function&nbsp;getEventRendering(event)&nbsp;{<a name="line_4412"></a></li>
<li id="line_4413" class="odd"><span class="lineNumber">&nbsp;4413&nbsp;</span>	return&nbsp;firstDefined((event.source&nbsp;||&nbsp;{}).rendering,&nbsp;event.rendering);<a name="line_4413"></a></li>
<li id="line_4414" class="even"><span class="lineNumber">&nbsp;4414&nbsp;</span>}<a name="line_4414"></a></li>
<li id="line_4415" class="odd"><span class="lineNumber">&nbsp;4415&nbsp;</span><a name="line_4415"></a></li>
<li id="line_4416" class="even"><span class="lineNumber">&nbsp;4416&nbsp;</span><a name="line_4416"></a></li>
<li id="line_4417" class="odd"><span class="lineNumber">&nbsp;4417&nbsp;</span>function&nbsp;groupEventsById(events)&nbsp;{<a name="line_4417"></a></li>
<li id="line_4418" class="even"><span class="lineNumber">&nbsp;4418&nbsp;</span>	var&nbsp;eventsById&nbsp;=&nbsp;{};<a name="line_4418"></a></li>
<li id="line_4419" class="odd"><span class="lineNumber">&nbsp;4419&nbsp;</span>	var&nbsp;i,&nbsp;event;<a name="line_4419"></a></li>
<li id="line_4420" class="even"><span class="lineNumber">&nbsp;4420&nbsp;</span><a name="line_4420"></a></li>
<li id="line_4421" class="odd"><span class="lineNumber">&nbsp;4421&nbsp;</span>	for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;events.length;&nbsp;i++)&nbsp;{<a name="line_4421"></a></li>
<li id="line_4422" class="even"><span class="lineNumber">&nbsp;4422&nbsp;</span>		event&nbsp;=&nbsp;events[i];<a name="line_4422"></a></li>
<li id="line_4423" class="odd"><span class="lineNumber">&nbsp;4423&nbsp;</span>		(eventsById[event._id]&nbsp;||&nbsp;(eventsById[event._id]&nbsp;=&nbsp;[])).push(event);<a name="line_4423"></a></li>
<li id="line_4424" class="even"><span class="lineNumber">&nbsp;4424&nbsp;</span>	}<a name="line_4424"></a></li>
<li id="line_4425" class="odd"><span class="lineNumber">&nbsp;4425&nbsp;</span><a name="line_4425"></a></li>
<li id="line_4426" class="even"><span class="lineNumber">&nbsp;4426&nbsp;</span>	return&nbsp;eventsById;<a name="line_4426"></a></li>
<li id="line_4427" class="odd"><span class="lineNumber">&nbsp;4427&nbsp;</span>}<a name="line_4427"></a></li>
<li id="line_4428" class="even"><span class="lineNumber">&nbsp;4428&nbsp;</span><a name="line_4428"></a></li>
<li id="line_4429" class="odd"><span class="lineNumber">&nbsp;4429&nbsp;</span><a name="line_4429"></a></li>
<li id="line_4430" class="even"><span class="lineNumber">&nbsp;4430&nbsp;</span>//&nbsp;A&nbsp;cmp&nbsp;function&nbsp;for&nbsp;determining&nbsp;which&nbsp;non-inverted&nbsp;"ranges"&nbsp;(see&nbsp;above)&nbsp;happen&nbsp;earlier<a name="line_4430"></a></li>
<li id="line_4431" class="odd"><span class="lineNumber">&nbsp;4431&nbsp;</span>function&nbsp;compareNormalRanges(range1,&nbsp;range2)&nbsp;{<a name="line_4431"></a></li>
<li id="line_4432" class="even"><span class="lineNumber">&nbsp;4432&nbsp;</span>	return&nbsp;range1.eventStartMS&nbsp;-&nbsp;range2.eventStartMS;&nbsp;//&nbsp;earlier&nbsp;ranges&nbsp;go&nbsp;first<a name="line_4432"></a></li>
<li id="line_4433" class="odd"><span class="lineNumber">&nbsp;4433&nbsp;</span>}<a name="line_4433"></a></li>
<li id="line_4434" class="even"><span class="lineNumber">&nbsp;4434&nbsp;</span><a name="line_4434"></a></li>
<li id="line_4435" class="odd"><span class="lineNumber">&nbsp;4435&nbsp;</span><a name="line_4435"></a></li>
<li id="line_4436" class="even"><span class="lineNumber">&nbsp;4436&nbsp;</span>//&nbsp;A&nbsp;cmp&nbsp;function&nbsp;for&nbsp;determining&nbsp;which&nbsp;segments&nbsp;should&nbsp;take&nbsp;visual&nbsp;priority<a name="line_4436"></a></li>
<li id="line_4437" class="odd"><span class="lineNumber">&nbsp;4437&nbsp;</span>//&nbsp;DOES&nbsp;NOT&nbsp;WORK&nbsp;ON&nbsp;INVERTED&nbsp;BACKGROUND&nbsp;EVENTS&nbsp;because&nbsp;they&nbsp;have&nbsp;no&nbsp;eventStartMS/eventDurationMS<a name="line_4437"></a></li>
<li id="line_4438" class="even"><span class="lineNumber">&nbsp;4438&nbsp;</span>function&nbsp;compareSegs(seg1,&nbsp;seg2)&nbsp;{<a name="line_4438"></a></li>
<li id="line_4439" class="odd"><span class="lineNumber">&nbsp;4439&nbsp;</span>	return&nbsp;seg1.eventStartMS&nbsp;-&nbsp;seg2.eventStartMS&nbsp;||&nbsp;//&nbsp;earlier&nbsp;events&nbsp;go&nbsp;first<a name="line_4439"></a></li>
<li id="line_4440" class="even"><span class="lineNumber">&nbsp;4440&nbsp;</span>		seg2.eventDurationMS&nbsp;-&nbsp;seg1.eventDurationMS&nbsp;||&nbsp;//&nbsp;tie?&nbsp;longer&nbsp;events&nbsp;go&nbsp;first<a name="line_4440"></a></li>
<li id="line_4441" class="odd"><span class="lineNumber">&nbsp;4441&nbsp;</span>		seg2.event.allDay&nbsp;-&nbsp;seg1.event.allDay&nbsp;||&nbsp;//&nbsp;tie?&nbsp;put&nbsp;all-day&nbsp;events&nbsp;first&nbsp;(booleans&nbsp;cast&nbsp;to&nbsp;0/1)<a name="line_4441"></a></li>
<li id="line_4442" class="even"><span class="lineNumber">&nbsp;4442&nbsp;</span>		(seg1.event.title&nbsp;||&nbsp;'').localeCompare(seg2.event.title);&nbsp;//&nbsp;tie?&nbsp;alphabetically&nbsp;by&nbsp;title<a name="line_4442"></a></li>
<li id="line_4443" class="odd"><span class="lineNumber">&nbsp;4443&nbsp;</span>}<a name="line_4443"></a></li>
<li id="line_4444" class="even"><span class="lineNumber">&nbsp;4444&nbsp;</span><a name="line_4444"></a></li>
<li id="line_4445" class="odd"><span class="lineNumber">&nbsp;4445&nbsp;</span>fc.compareSegs&nbsp;=&nbsp;compareSegs;&nbsp;//&nbsp;export<a name="line_4445"></a></li>
<li id="line_4446" class="even"><span class="lineNumber">&nbsp;4446&nbsp;</span><a name="line_4446"></a></li>
<li id="line_4447" class="odd"><span class="lineNumber">&nbsp;4447&nbsp;</span><a name="line_4447"></a></li>
<li id="line_4448" class="even"><span class="lineNumber">&nbsp;4448&nbsp;</span>/*&nbsp;External-Dragging-Element&nbsp;Data<a name="line_4448"></a></li>
<li id="line_4449" class="odd"><span class="lineNumber">&nbsp;4449&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_4449"></a></li>
<li id="line_4450" class="even"><span class="lineNumber">&nbsp;4450&nbsp;</span><a name="line_4450"></a></li>
<li id="line_4451" class="odd"><span class="lineNumber">&nbsp;4451&nbsp;</span>//&nbsp;Require&nbsp;all&nbsp;HTML5&nbsp;data-*&nbsp;attributes&nbsp;used&nbsp;by&nbsp;FullCalendar&nbsp;to&nbsp;have&nbsp;this&nbsp;prefix.<a name="line_4451"></a></li>
<li id="line_4452" class="even"><span class="lineNumber">&nbsp;4452&nbsp;</span>//&nbsp;A&nbsp;value&nbsp;of&nbsp;''&nbsp;will&nbsp;query&nbsp;attributes&nbsp;like&nbsp;data-event.&nbsp;A&nbsp;value&nbsp;of&nbsp;'fc'&nbsp;will&nbsp;query&nbsp;attributes&nbsp;like&nbsp;data-fc-event.<a name="line_4452"></a></li>
<li id="line_4453" class="odd"><span class="lineNumber">&nbsp;4453&nbsp;</span>fc.dataAttrPrefix&nbsp;=&nbsp;'';<a name="line_4453"></a></li>
<li id="line_4454" class="even"><span class="lineNumber">&nbsp;4454&nbsp;</span><a name="line_4454"></a></li>
<li id="line_4455" class="odd"><span class="lineNumber">&nbsp;4455&nbsp;</span>//&nbsp;Given&nbsp;a&nbsp;jQuery&nbsp;element&nbsp;that&nbsp;might&nbsp;represent&nbsp;a&nbsp;dragged&nbsp;FullCalendar&nbsp;event,&nbsp;returns&nbsp;an&nbsp;intermediate&nbsp;data&nbsp;structure<a name="line_4455"></a></li>
<li id="line_4456" class="even"><span class="lineNumber">&nbsp;4456&nbsp;</span>//&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;Event&nbsp;Object&nbsp;creation.<a name="line_4456"></a></li>
<li id="line_4457" class="odd"><span class="lineNumber">&nbsp;4457&nbsp;</span>//&nbsp;A&nbsp;defined&nbsp;`.eventProps`,&nbsp;even&nbsp;when&nbsp;empty,&nbsp;indicates&nbsp;that&nbsp;an&nbsp;event&nbsp;should&nbsp;be&nbsp;created.<a name="line_4457"></a></li>
<li id="line_4458" class="even"><span class="lineNumber">&nbsp;4458&nbsp;</span>function&nbsp;getDraggedElMeta(el)&nbsp;{<a name="line_4458"></a></li>
<li id="line_4459" class="odd"><span class="lineNumber">&nbsp;4459&nbsp;</span>	var&nbsp;prefix&nbsp;=&nbsp;fc.dataAttrPrefix;<a name="line_4459"></a></li>
<li id="line_4460" class="even"><span class="lineNumber">&nbsp;4460&nbsp;</span>	var&nbsp;eventProps;&nbsp;//&nbsp;properties&nbsp;for&nbsp;creating&nbsp;the&nbsp;event,&nbsp;not&nbsp;related&nbsp;to&nbsp;date/time<a name="line_4460"></a></li>
<li id="line_4461" class="odd"><span class="lineNumber">&nbsp;4461&nbsp;</span>	var&nbsp;startTime;&nbsp;//&nbsp;a&nbsp;Duration<a name="line_4461"></a></li>
<li id="line_4462" class="even"><span class="lineNumber">&nbsp;4462&nbsp;</span>	var&nbsp;duration;<a name="line_4462"></a></li>
<li id="line_4463" class="odd"><span class="lineNumber">&nbsp;4463&nbsp;</span>	var&nbsp;stick;<a name="line_4463"></a></li>
<li id="line_4464" class="even"><span class="lineNumber">&nbsp;4464&nbsp;</span><a name="line_4464"></a></li>
<li id="line_4465" class="odd"><span class="lineNumber">&nbsp;4465&nbsp;</span>	if&nbsp;(prefix)&nbsp;{&nbsp;prefix&nbsp;+=&nbsp;'-';&nbsp;}<a name="line_4465"></a></li>
<li id="line_4466" class="even"><span class="lineNumber">&nbsp;4466&nbsp;</span>	eventProps&nbsp;=&nbsp;el.data(prefix&nbsp;+&nbsp;'event')&nbsp;||&nbsp;null;<a name="line_4466"></a></li>
<li id="line_4467" class="odd"><span class="lineNumber">&nbsp;4467&nbsp;</span><a name="line_4467"></a></li>
<li id="line_4468" class="even"><span class="lineNumber">&nbsp;4468&nbsp;</span>	if&nbsp;(eventProps)&nbsp;{<a name="line_4468"></a></li>
<li id="line_4469" class="odd"><span class="lineNumber">&nbsp;4469&nbsp;</span>		if&nbsp;(typeof&nbsp;eventProps&nbsp;===&nbsp;'object')&nbsp;{<a name="line_4469"></a></li>
<li id="line_4470" class="even"><span class="lineNumber">&nbsp;4470&nbsp;</span>			eventProps&nbsp;=&nbsp;$.extend({},&nbsp;eventProps);&nbsp;//&nbsp;make&nbsp;a&nbsp;copy<a name="line_4470"></a></li>
<li id="line_4471" class="odd"><span class="lineNumber">&nbsp;4471&nbsp;</span>		}<a name="line_4471"></a></li>
<li id="line_4472" class="even"><span class="lineNumber">&nbsp;4472&nbsp;</span>		else&nbsp;{&nbsp;//&nbsp;something&nbsp;like&nbsp;1&nbsp;or&nbsp;true.&nbsp;still&nbsp;signal&nbsp;event&nbsp;creation<a name="line_4472"></a></li>
<li id="line_4473" class="odd"><span class="lineNumber">&nbsp;4473&nbsp;</span>			eventProps&nbsp;=&nbsp;{};<a name="line_4473"></a></li>
<li id="line_4474" class="even"><span class="lineNumber">&nbsp;4474&nbsp;</span>		}<a name="line_4474"></a></li>
<li id="line_4475" class="odd"><span class="lineNumber">&nbsp;4475&nbsp;</span><a name="line_4475"></a></li>
<li id="line_4476" class="even"><span class="lineNumber">&nbsp;4476&nbsp;</span>		//&nbsp;pluck&nbsp;special-cased&nbsp;date/time&nbsp;properties<a name="line_4476"></a></li>
<li id="line_4477" class="odd"><span class="lineNumber">&nbsp;4477&nbsp;</span>		startTime&nbsp;=&nbsp;eventProps.start;<a name="line_4477"></a></li>
<li id="line_4478" class="even"><span class="lineNumber">&nbsp;4478&nbsp;</span>		if&nbsp;(startTime&nbsp;==&nbsp;null)&nbsp;{&nbsp;startTime&nbsp;=&nbsp;eventProps.time;&nbsp;}&nbsp;//&nbsp;accept&nbsp;'time'&nbsp;as&nbsp;well<a name="line_4478"></a></li>
<li id="line_4479" class="odd"><span class="lineNumber">&nbsp;4479&nbsp;</span>		duration&nbsp;=&nbsp;eventProps.duration;<a name="line_4479"></a></li>
<li id="line_4480" class="even"><span class="lineNumber">&nbsp;4480&nbsp;</span>		stick&nbsp;=&nbsp;eventProps.stick;<a name="line_4480"></a></li>
<li id="line_4481" class="odd"><span class="lineNumber">&nbsp;4481&nbsp;</span>		delete&nbsp;eventProps.start;<a name="line_4481"></a></li>
<li id="line_4482" class="even"><span class="lineNumber">&nbsp;4482&nbsp;</span>		delete&nbsp;eventProps.time;<a name="line_4482"></a></li>
<li id="line_4483" class="odd"><span class="lineNumber">&nbsp;4483&nbsp;</span>		delete&nbsp;eventProps.duration;<a name="line_4483"></a></li>
<li id="line_4484" class="even"><span class="lineNumber">&nbsp;4484&nbsp;</span>		delete&nbsp;eventProps.stick;<a name="line_4484"></a></li>
<li id="line_4485" class="odd"><span class="lineNumber">&nbsp;4485&nbsp;</span>	}<a name="line_4485"></a></li>
<li id="line_4486" class="even"><span class="lineNumber">&nbsp;4486&nbsp;</span><a name="line_4486"></a></li>
<li id="line_4487" class="odd"><span class="lineNumber">&nbsp;4487&nbsp;</span>	//&nbsp;fallback&nbsp;to&nbsp;standalone&nbsp;attribute&nbsp;values&nbsp;for&nbsp;each&nbsp;of&nbsp;the&nbsp;date/time&nbsp;properties<a name="line_4487"></a></li>
<li id="line_4488" class="even"><span class="lineNumber">&nbsp;4488&nbsp;</span>	if&nbsp;(startTime&nbsp;==&nbsp;null)&nbsp;{&nbsp;startTime&nbsp;=&nbsp;el.data(prefix&nbsp;+&nbsp;'start');&nbsp;}<a name="line_4488"></a></li>
<li id="line_4489" class="odd"><span class="lineNumber">&nbsp;4489&nbsp;</span>	if&nbsp;(startTime&nbsp;==&nbsp;null)&nbsp;{&nbsp;startTime&nbsp;=&nbsp;el.data(prefix&nbsp;+&nbsp;'time');&nbsp;}&nbsp;//&nbsp;accept&nbsp;'time'&nbsp;as&nbsp;well<a name="line_4489"></a></li>
<li id="line_4490" class="even"><span class="lineNumber">&nbsp;4490&nbsp;</span>	if&nbsp;(duration&nbsp;==&nbsp;null)&nbsp;{&nbsp;duration&nbsp;=&nbsp;el.data(prefix&nbsp;+&nbsp;'duration');&nbsp;}<a name="line_4490"></a></li>
<li id="line_4491" class="odd"><span class="lineNumber">&nbsp;4491&nbsp;</span>	if&nbsp;(stick&nbsp;==&nbsp;null)&nbsp;{&nbsp;stick&nbsp;=&nbsp;el.data(prefix&nbsp;+&nbsp;'stick');&nbsp;}<a name="line_4491"></a></li>
<li id="line_4492" class="even"><span class="lineNumber">&nbsp;4492&nbsp;</span><a name="line_4492"></a></li>
<li id="line_4493" class="odd"><span class="lineNumber">&nbsp;4493&nbsp;</span>	//&nbsp;massage&nbsp;into&nbsp;correct&nbsp;data&nbsp;types<a name="line_4493"></a></li>
<li id="line_4494" class="even"><span class="lineNumber">&nbsp;4494&nbsp;</span>	startTime&nbsp;=&nbsp;startTime&nbsp;!=&nbsp;null&nbsp;?&nbsp;moment.duration(startTime)&nbsp;:&nbsp;null;<a name="line_4494"></a></li>
<li id="line_4495" class="odd"><span class="lineNumber">&nbsp;4495&nbsp;</span>	duration&nbsp;=&nbsp;duration&nbsp;!=&nbsp;null&nbsp;?&nbsp;moment.duration(duration)&nbsp;:&nbsp;null;<a name="line_4495"></a></li>
<li id="line_4496" class="even"><span class="lineNumber">&nbsp;4496&nbsp;</span>	stick&nbsp;=&nbsp;Boolean(stick);<a name="line_4496"></a></li>
<li id="line_4497" class="odd"><span class="lineNumber">&nbsp;4497&nbsp;</span><a name="line_4497"></a></li>
<li id="line_4498" class="even"><span class="lineNumber">&nbsp;4498&nbsp;</span>	return&nbsp;{&nbsp;eventProps:&nbsp;eventProps,&nbsp;startTime:&nbsp;startTime,&nbsp;duration:&nbsp;duration,&nbsp;stick:&nbsp;stick&nbsp;};<a name="line_4498"></a></li>
<li id="line_4499" class="odd"><span class="lineNumber">&nbsp;4499&nbsp;</span>}<a name="line_4499"></a></li>
<li id="line_4500" class="even"><span class="lineNumber">&nbsp;4500&nbsp;</span><a name="line_4500"></a></li>
<li id="line_4501" class="odd"><span class="lineNumber">&nbsp;4501&nbsp;</span><a name="line_4501"></a></li>
<li id="line_4502" class="even"><span class="lineNumber">&nbsp;4502&nbsp;</span>;;<a name="line_4502"></a></li>
<li id="line_4503" class="odd"><span class="lineNumber">&nbsp;4503&nbsp;</span><a name="line_4503"></a></li>
<li id="line_4504" class="even"><span class="lineNumber">&nbsp;4504&nbsp;</span>/*&nbsp;A&nbsp;component&nbsp;that&nbsp;renders&nbsp;a&nbsp;grid&nbsp;of&nbsp;whole-days&nbsp;that&nbsp;runs&nbsp;horizontally.&nbsp;There&nbsp;can&nbsp;be&nbsp;multiple&nbsp;rows,&nbsp;one&nbsp;per&nbsp;week.<a name="line_4504"></a></li>
<li id="line_4505" class="odd"><span class="lineNumber">&nbsp;4505&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_4505"></a></li>
<li id="line_4506" class="even"><span class="lineNumber">&nbsp;4506&nbsp;</span><a name="line_4506"></a></li>
<li id="line_4507" class="odd"><span class="lineNumber">&nbsp;4507&nbsp;</span>var&nbsp;DayGrid&nbsp;=&nbsp;Grid.extend({<a name="line_4507"></a></li>
<li id="line_4508" class="even"><span class="lineNumber">&nbsp;4508&nbsp;</span><a name="line_4508"></a></li>
<li id="line_4509" class="odd"><span class="lineNumber">&nbsp;4509&nbsp;</span>	numbersVisible:&nbsp;false,&nbsp;//&nbsp;should&nbsp;render&nbsp;a&nbsp;row&nbsp;for&nbsp;day/week&nbsp;numbers?&nbsp;set&nbsp;by&nbsp;outside&nbsp;view.&nbsp;TODO:&nbsp;make&nbsp;internal<a name="line_4509"></a></li>
<li id="line_4510" class="even"><span class="lineNumber">&nbsp;4510&nbsp;</span>	bottomCoordPadding:&nbsp;0,&nbsp;//&nbsp;hack&nbsp;for&nbsp;extending&nbsp;the&nbsp;hit&nbsp;area&nbsp;for&nbsp;the&nbsp;last&nbsp;row&nbsp;of&nbsp;the&nbsp;coordinate&nbsp;grid<a name="line_4510"></a></li>
<li id="line_4511" class="odd"><span class="lineNumber">&nbsp;4511&nbsp;</span>	breakOnWeeks:&nbsp;null,&nbsp;//&nbsp;should&nbsp;create&nbsp;a&nbsp;new&nbsp;row&nbsp;for&nbsp;each&nbsp;week?&nbsp;set&nbsp;by&nbsp;outside&nbsp;view<a name="line_4511"></a></li>
<li id="line_4512" class="even"><span class="lineNumber">&nbsp;4512&nbsp;</span><a name="line_4512"></a></li>
<li id="line_4513" class="odd"><span class="lineNumber">&nbsp;4513&nbsp;</span>	cellDates:&nbsp;null,&nbsp;//&nbsp;flat&nbsp;chronological&nbsp;array&nbsp;of&nbsp;each&nbsp;cell's&nbsp;dates<a name="line_4513"></a></li>
<li id="line_4514" class="even"><span class="lineNumber">&nbsp;4514&nbsp;</span>	dayToCellOffsets:&nbsp;null,&nbsp;//&nbsp;maps&nbsp;days&nbsp;offsets&nbsp;from&nbsp;grid's&nbsp;start&nbsp;date,&nbsp;to&nbsp;cell&nbsp;offsets<a name="line_4514"></a></li>
<li id="line_4515" class="odd"><span class="lineNumber">&nbsp;4515&nbsp;</span><a name="line_4515"></a></li>
<li id="line_4516" class="even"><span class="lineNumber">&nbsp;4516&nbsp;</span>	rowEls:&nbsp;null,&nbsp;//&nbsp;set&nbsp;of&nbsp;fake&nbsp;row&nbsp;elements<a name="line_4516"></a></li>
<li id="line_4517" class="odd"><span class="lineNumber">&nbsp;4517&nbsp;</span>	dayEls:&nbsp;null,&nbsp;//&nbsp;set&nbsp;of&nbsp;whole-day&nbsp;elements&nbsp;comprising&nbsp;the&nbsp;row's&nbsp;background<a name="line_4517"></a></li>
<li id="line_4518" class="even"><span class="lineNumber">&nbsp;4518&nbsp;</span>	helperEls:&nbsp;null,&nbsp;//&nbsp;set&nbsp;of&nbsp;cell&nbsp;skeleton&nbsp;elements&nbsp;for&nbsp;rendering&nbsp;the&nbsp;mock&nbsp;event&nbsp;"helper"<a name="line_4518"></a></li>
<li id="line_4519" class="odd"><span class="lineNumber">&nbsp;4519&nbsp;</span><a name="line_4519"></a></li>
<li id="line_4520" class="even"><span class="lineNumber">&nbsp;4520&nbsp;</span><a name="line_4520"></a></li>
<li id="line_4521" class="odd"><span class="lineNumber">&nbsp;4521&nbsp;</span>	constructor:&nbsp;function()&nbsp;{<a name="line_4521"></a></li>
<li id="line_4522" class="even"><span class="lineNumber">&nbsp;4522&nbsp;</span>		Grid.apply(this,&nbsp;arguments);<a name="line_4522"></a></li>
<li id="line_4523" class="odd"><span class="lineNumber">&nbsp;4523&nbsp;</span><a name="line_4523"></a></li>
<li id="line_4524" class="even"><span class="lineNumber">&nbsp;4524&nbsp;</span>		this.cellDuration&nbsp;=&nbsp;moment.duration(1,&nbsp;'day');&nbsp;//&nbsp;for&nbsp;Grid&nbsp;system<a name="line_4524"></a></li>
<li id="line_4525" class="odd"><span class="lineNumber">&nbsp;4525&nbsp;</span>	},<a name="line_4525"></a></li>
<li id="line_4526" class="even"><span class="lineNumber">&nbsp;4526&nbsp;</span><a name="line_4526"></a></li>
<li id="line_4527" class="odd"><span class="lineNumber">&nbsp;4527&nbsp;</span><a name="line_4527"></a></li>
<li id="line_4528" class="even"><span class="lineNumber">&nbsp;4528&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;rows&nbsp;and&nbsp;columns&nbsp;into&nbsp;the&nbsp;component's&nbsp;`this.el`,&nbsp;which&nbsp;should&nbsp;already&nbsp;be&nbsp;assigned.<a name="line_4528"></a></li>
<li id="line_4529" class="odd"><span class="lineNumber">&nbsp;4529&nbsp;</span>	//&nbsp;isRigid&nbsp;determins&nbsp;whether&nbsp;the&nbsp;individual&nbsp;rows&nbsp;should&nbsp;ignore&nbsp;the&nbsp;contents&nbsp;and&nbsp;be&nbsp;a&nbsp;constant&nbsp;height.<a name="line_4529"></a></li>
<li id="line_4530" class="even"><span class="lineNumber">&nbsp;4530&nbsp;</span>	//&nbsp;Relies&nbsp;on&nbsp;the&nbsp;view's&nbsp;colCnt&nbsp;and&nbsp;rowCnt.&nbsp;In&nbsp;the&nbsp;future,&nbsp;this&nbsp;component&nbsp;should&nbsp;probably&nbsp;be&nbsp;self-sufficient.<a name="line_4530"></a></li>
<li id="line_4531" class="odd"><span class="lineNumber">&nbsp;4531&nbsp;</span>	renderDates:&nbsp;function(isRigid)&nbsp;{<a name="line_4531"></a></li>
<li id="line_4532" class="even"><span class="lineNumber">&nbsp;4532&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_4532"></a></li>
<li id="line_4533" class="odd"><span class="lineNumber">&nbsp;4533&nbsp;</span>		var&nbsp;rowCnt&nbsp;=&nbsp;this.rowCnt;<a name="line_4533"></a></li>
<li id="line_4534" class="even"><span class="lineNumber">&nbsp;4534&nbsp;</span>		var&nbsp;colCnt&nbsp;=&nbsp;this.colCnt;<a name="line_4534"></a></li>
<li id="line_4535" class="odd"><span class="lineNumber">&nbsp;4535&nbsp;</span>		var&nbsp;cellCnt&nbsp;=&nbsp;rowCnt&nbsp;*&nbsp;colCnt;<a name="line_4535"></a></li>
<li id="line_4536" class="even"><span class="lineNumber">&nbsp;4536&nbsp;</span>		var&nbsp;html&nbsp;=&nbsp;'';<a name="line_4536"></a></li>
<li id="line_4537" class="odd"><span class="lineNumber">&nbsp;4537&nbsp;</span>		var&nbsp;row;<a name="line_4537"></a></li>
<li id="line_4538" class="even"><span class="lineNumber">&nbsp;4538&nbsp;</span>		var&nbsp;i,&nbsp;cell;<a name="line_4538"></a></li>
<li id="line_4539" class="odd"><span class="lineNumber">&nbsp;4539&nbsp;</span><a name="line_4539"></a></li>
<li id="line_4540" class="even"><span class="lineNumber">&nbsp;4540&nbsp;</span>		for&nbsp;(row&nbsp;=&nbsp;0;&nbsp;row&nbsp;&lt;&nbsp;rowCnt;&nbsp;row++)&nbsp;{<a name="line_4540"></a></li>
<li id="line_4541" class="odd"><span class="lineNumber">&nbsp;4541&nbsp;</span>			html&nbsp;+=&nbsp;this.dayRowHtml(row,&nbsp;isRigid);<a name="line_4541"></a></li>
<li id="line_4542" class="even"><span class="lineNumber">&nbsp;4542&nbsp;</span>		}<a name="line_4542"></a></li>
<li id="line_4543" class="odd"><span class="lineNumber">&nbsp;4543&nbsp;</span>		this.el.html(html);<a name="line_4543"></a></li>
<li id="line_4544" class="even"><span class="lineNumber">&nbsp;4544&nbsp;</span><a name="line_4544"></a></li>
<li id="line_4545" class="odd"><span class="lineNumber">&nbsp;4545&nbsp;</span>		this.rowEls&nbsp;=&nbsp;this.el.find('.fc-row');<a name="line_4545"></a></li>
<li id="line_4546" class="even"><span class="lineNumber">&nbsp;4546&nbsp;</span>		this.dayEls&nbsp;=&nbsp;this.el.find('.fc-day');<a name="line_4546"></a></li>
<li id="line_4547" class="odd"><span class="lineNumber">&nbsp;4547&nbsp;</span><a name="line_4547"></a></li>
<li id="line_4548" class="even"><span class="lineNumber">&nbsp;4548&nbsp;</span>		//&nbsp;trigger&nbsp;dayRender&nbsp;with&nbsp;each&nbsp;cell's&nbsp;element<a name="line_4548"></a></li>
<li id="line_4549" class="odd"><span class="lineNumber">&nbsp;4549&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;cellCnt;&nbsp;i++)&nbsp;{<a name="line_4549"></a></li>
<li id="line_4550" class="even"><span class="lineNumber">&nbsp;4550&nbsp;</span>			cell&nbsp;=&nbsp;this.getCell(i);<a name="line_4550"></a></li>
<li id="line_4551" class="odd"><span class="lineNumber">&nbsp;4551&nbsp;</span>			view.trigger('dayRender',&nbsp;null,&nbsp;cell.start,&nbsp;this.dayEls.eq(i));<a name="line_4551"></a></li>
<li id="line_4552" class="even"><span class="lineNumber">&nbsp;4552&nbsp;</span>		}<a name="line_4552"></a></li>
<li id="line_4553" class="odd"><span class="lineNumber">&nbsp;4553&nbsp;</span>	},<a name="line_4553"></a></li>
<li id="line_4554" class="even"><span class="lineNumber">&nbsp;4554&nbsp;</span><a name="line_4554"></a></li>
<li id="line_4555" class="odd"><span class="lineNumber">&nbsp;4555&nbsp;</span><a name="line_4555"></a></li>
<li id="line_4556" class="even"><span class="lineNumber">&nbsp;4556&nbsp;</span>	unrenderDates:&nbsp;function()&nbsp;{<a name="line_4556"></a></li>
<li id="line_4557" class="odd"><span class="lineNumber">&nbsp;4557&nbsp;</span>		this.removeSegPopover();<a name="line_4557"></a></li>
<li id="line_4558" class="even"><span class="lineNumber">&nbsp;4558&nbsp;</span>	},<a name="line_4558"></a></li>
<li id="line_4559" class="odd"><span class="lineNumber">&nbsp;4559&nbsp;</span><a name="line_4559"></a></li>
<li id="line_4560" class="even"><span class="lineNumber">&nbsp;4560&nbsp;</span><a name="line_4560"></a></li>
<li id="line_4561" class="odd"><span class="lineNumber">&nbsp;4561&nbsp;</span>	renderBusinessHours:&nbsp;function()&nbsp;{<a name="line_4561"></a></li>
<li id="line_4562" class="even"><span class="lineNumber">&nbsp;4562&nbsp;</span>		var&nbsp;events&nbsp;=&nbsp;this.view.calendar.getBusinessHoursEvents(true);&nbsp;//&nbsp;wholeDay=true<a name="line_4562"></a></li>
<li id="line_4563" class="odd"><span class="lineNumber">&nbsp;4563&nbsp;</span>		var&nbsp;segs&nbsp;=&nbsp;this.eventsToSegs(events);<a name="line_4563"></a></li>
<li id="line_4564" class="even"><span class="lineNumber">&nbsp;4564&nbsp;</span><a name="line_4564"></a></li>
<li id="line_4565" class="odd"><span class="lineNumber">&nbsp;4565&nbsp;</span>		this.renderFill('businessHours',&nbsp;segs,&nbsp;'bgevent');<a name="line_4565"></a></li>
<li id="line_4566" class="even"><span class="lineNumber">&nbsp;4566&nbsp;</span>	},<a name="line_4566"></a></li>
<li id="line_4567" class="odd"><span class="lineNumber">&nbsp;4567&nbsp;</span><a name="line_4567"></a></li>
<li id="line_4568" class="even"><span class="lineNumber">&nbsp;4568&nbsp;</span><a name="line_4568"></a></li>
<li id="line_4569" class="odd"><span class="lineNumber">&nbsp;4569&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;for&nbsp;a&nbsp;single&nbsp;row.&nbsp;`row`&nbsp;is&nbsp;the&nbsp;row&nbsp;number.<a name="line_4569"></a></li>
<li id="line_4570" class="even"><span class="lineNumber">&nbsp;4570&nbsp;</span>	dayRowHtml:&nbsp;function(row,&nbsp;isRigid)&nbsp;{<a name="line_4570"></a></li>
<li id="line_4571" class="odd"><span class="lineNumber">&nbsp;4571&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_4571"></a></li>
<li id="line_4572" class="even"><span class="lineNumber">&nbsp;4572&nbsp;</span>		var&nbsp;classes&nbsp;=&nbsp;[&nbsp;'fc-row',&nbsp;'fc-week',&nbsp;view.widgetContentClass&nbsp;];<a name="line_4572"></a></li>
<li id="line_4573" class="odd"><span class="lineNumber">&nbsp;4573&nbsp;</span><a name="line_4573"></a></li>
<li id="line_4574" class="even"><span class="lineNumber">&nbsp;4574&nbsp;</span>		if&nbsp;(isRigid)&nbsp;{<a name="line_4574"></a></li>
<li id="line_4575" class="odd"><span class="lineNumber">&nbsp;4575&nbsp;</span>			classes.push('fc-rigid');<a name="line_4575"></a></li>
<li id="line_4576" class="even"><span class="lineNumber">&nbsp;4576&nbsp;</span>		}<a name="line_4576"></a></li>
<li id="line_4577" class="odd"><span class="lineNumber">&nbsp;4577&nbsp;</span><a name="line_4577"></a></li>
<li id="line_4578" class="even"><span class="lineNumber">&nbsp;4578&nbsp;</span>		return&nbsp;''&nbsp;+<a name="line_4578"></a></li>
<li id="line_4579" class="odd"><span class="lineNumber">&nbsp;4579&nbsp;</span>			'&lt;div&nbsp;class="'&nbsp;+&nbsp;classes.join('&nbsp;')&nbsp;+&nbsp;'"&gt;'&nbsp;+<a name="line_4579"></a></li>
<li id="line_4580" class="even"><span class="lineNumber">&nbsp;4580&nbsp;</span>				'&lt;div&nbsp;class="fc-bg"&gt;'&nbsp;+<a name="line_4580"></a></li>
<li id="line_4581" class="odd"><span class="lineNumber">&nbsp;4581&nbsp;</span>					'&lt;table&gt;'&nbsp;+<a name="line_4581"></a></li>
<li id="line_4582" class="even"><span class="lineNumber">&nbsp;4582&nbsp;</span>						this.rowHtml('day',&nbsp;row)&nbsp;+&nbsp;//&nbsp;leverages&nbsp;RowRenderer.&nbsp;calls&nbsp;dayCellHtml()<a name="line_4582"></a></li>
<li id="line_4583" class="odd"><span class="lineNumber">&nbsp;4583&nbsp;</span>					'&lt;/table&gt;'&nbsp;+<a name="line_4583"></a></li>
<li id="line_4584" class="even"><span class="lineNumber">&nbsp;4584&nbsp;</span>				'&lt;/div&gt;'&nbsp;+<a name="line_4584"></a></li>
<li id="line_4585" class="odd"><span class="lineNumber">&nbsp;4585&nbsp;</span>				'&lt;div&nbsp;class="fc-content-skeleton"&gt;'&nbsp;+<a name="line_4585"></a></li>
<li id="line_4586" class="even"><span class="lineNumber">&nbsp;4586&nbsp;</span>					'&lt;table&gt;'&nbsp;+<a name="line_4586"></a></li>
<li id="line_4587" class="odd"><span class="lineNumber">&nbsp;4587&nbsp;</span>						(this.numbersVisible&nbsp;?<a name="line_4587"></a></li>
<li id="line_4588" class="even"><span class="lineNumber">&nbsp;4588&nbsp;</span>							'&lt;thead&gt;'&nbsp;+<a name="line_4588"></a></li>
<li id="line_4589" class="odd"><span class="lineNumber">&nbsp;4589&nbsp;</span>								this.rowHtml('number',&nbsp;row)&nbsp;+&nbsp;//&nbsp;leverages&nbsp;RowRenderer.&nbsp;View&nbsp;will&nbsp;define&nbsp;render&nbsp;method<a name="line_4589"></a></li>
<li id="line_4590" class="even"><span class="lineNumber">&nbsp;4590&nbsp;</span>							'&lt;/thead&gt;'&nbsp;:<a name="line_4590"></a></li>
<li id="line_4591" class="odd"><span class="lineNumber">&nbsp;4591&nbsp;</span>							''<a name="line_4591"></a></li>
<li id="line_4592" class="even"><span class="lineNumber">&nbsp;4592&nbsp;</span>							)&nbsp;+<a name="line_4592"></a></li>
<li id="line_4593" class="odd"><span class="lineNumber">&nbsp;4593&nbsp;</span>					'&lt;/table&gt;'&nbsp;+<a name="line_4593"></a></li>
<li id="line_4594" class="even"><span class="lineNumber">&nbsp;4594&nbsp;</span>				'&lt;/div&gt;'&nbsp;+<a name="line_4594"></a></li>
<li id="line_4595" class="odd"><span class="lineNumber">&nbsp;4595&nbsp;</span>			'&lt;/div&gt;';<a name="line_4595"></a></li>
<li id="line_4596" class="even"><span class="lineNumber">&nbsp;4596&nbsp;</span>	},<a name="line_4596"></a></li>
<li id="line_4597" class="odd"><span class="lineNumber">&nbsp;4597&nbsp;</span><a name="line_4597"></a></li>
<li id="line_4598" class="even"><span class="lineNumber">&nbsp;4598&nbsp;</span><a name="line_4598"></a></li>
<li id="line_4599" class="odd"><span class="lineNumber">&nbsp;4599&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;HTML&nbsp;for&nbsp;a&nbsp;whole-day&nbsp;cell.&nbsp;Will&nbsp;eventually&nbsp;end&nbsp;up&nbsp;in&nbsp;the&nbsp;day-row's&nbsp;background.<a name="line_4599"></a></li>
<li id="line_4600" class="even"><span class="lineNumber">&nbsp;4600&nbsp;</span>	//&nbsp;We&nbsp;go&nbsp;through&nbsp;a&nbsp;'day'&nbsp;row&nbsp;type&nbsp;instead&nbsp;of&nbsp;just&nbsp;doing&nbsp;a&nbsp;'bg'&nbsp;row&nbsp;type&nbsp;so&nbsp;that&nbsp;the&nbsp;View&nbsp;can&nbsp;do&nbsp;custom&nbsp;rendering<a name="line_4600"></a></li>
<li id="line_4601" class="odd"><span class="lineNumber">&nbsp;4601&nbsp;</span>	//&nbsp;specifically&nbsp;for&nbsp;whole-day&nbsp;rows,&nbsp;whereas&nbsp;a&nbsp;'bg'&nbsp;might&nbsp;also&nbsp;be&nbsp;used&nbsp;for&nbsp;other&nbsp;purposes&nbsp;(TimeGrid&nbsp;bg&nbsp;for&nbsp;example).<a name="line_4601"></a></li>
<li id="line_4602" class="even"><span class="lineNumber">&nbsp;4602&nbsp;</span>	dayCellHtml:&nbsp;function(cell)&nbsp;{<a name="line_4602"></a></li>
<li id="line_4603" class="odd"><span class="lineNumber">&nbsp;4603&nbsp;</span>		return&nbsp;this.bgCellHtml(cell);<a name="line_4603"></a></li>
<li id="line_4604" class="even"><span class="lineNumber">&nbsp;4604&nbsp;</span>	},<a name="line_4604"></a></li>
<li id="line_4605" class="odd"><span class="lineNumber">&nbsp;4605&nbsp;</span><a name="line_4605"></a></li>
<li id="line_4606" class="even"><span class="lineNumber">&nbsp;4606&nbsp;</span><a name="line_4606"></a></li>
<li id="line_4607" class="odd"><span class="lineNumber">&nbsp;4607&nbsp;</span>	/*&nbsp;Options<a name="line_4607"></a></li>
<li id="line_4608" class="even"><span class="lineNumber">&nbsp;4608&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_4608"></a></li>
<li id="line_4609" class="odd"><span class="lineNumber">&nbsp;4609&nbsp;</span><a name="line_4609"></a></li>
<li id="line_4610" class="even"><span class="lineNumber">&nbsp;4610&nbsp;</span><a name="line_4610"></a></li>
<li id="line_4611" class="odd"><span class="lineNumber">&nbsp;4611&nbsp;</span>	//&nbsp;Computes&nbsp;a&nbsp;default&nbsp;column&nbsp;header&nbsp;formatting&nbsp;string&nbsp;if&nbsp;`colFormat`&nbsp;is&nbsp;not&nbsp;explicitly&nbsp;defined<a name="line_4611"></a></li>
<li id="line_4612" class="even"><span class="lineNumber">&nbsp;4612&nbsp;</span>	computeColHeadFormat:&nbsp;function()&nbsp;{<a name="line_4612"></a></li>
<li id="line_4613" class="odd"><span class="lineNumber">&nbsp;4613&nbsp;</span>		if&nbsp;(this.rowCnt&nbsp;&gt;&nbsp;1)&nbsp;{&nbsp;//&nbsp;more&nbsp;than&nbsp;one&nbsp;week&nbsp;row.&nbsp;day&nbsp;numbers&nbsp;will&nbsp;be&nbsp;in&nbsp;each&nbsp;cell<a name="line_4613"></a></li>
<li id="line_4614" class="even"><span class="lineNumber">&nbsp;4614&nbsp;</span>			return&nbsp;'ddd';&nbsp;//&nbsp;"Sat"<a name="line_4614"></a></li>
<li id="line_4615" class="odd"><span class="lineNumber">&nbsp;4615&nbsp;</span>		}<a name="line_4615"></a></li>
<li id="line_4616" class="even"><span class="lineNumber">&nbsp;4616&nbsp;</span>		else&nbsp;if&nbsp;(this.colCnt&nbsp;&gt;&nbsp;1)&nbsp;{&nbsp;//&nbsp;multiple&nbsp;days,&nbsp;so&nbsp;full&nbsp;single&nbsp;date&nbsp;string&nbsp;WON'T&nbsp;be&nbsp;in&nbsp;title&nbsp;text<a name="line_4616"></a></li>
<li id="line_4617" class="odd"><span class="lineNumber">&nbsp;4617&nbsp;</span>			return&nbsp;this.view.opt('dayOfMonthFormat');&nbsp;//&nbsp;"Sat&nbsp;12/10"<a name="line_4617"></a></li>
<li id="line_4618" class="even"><span class="lineNumber">&nbsp;4618&nbsp;</span>		}<a name="line_4618"></a></li>
<li id="line_4619" class="odd"><span class="lineNumber">&nbsp;4619&nbsp;</span>		else&nbsp;{&nbsp;//&nbsp;single&nbsp;day,&nbsp;so&nbsp;full&nbsp;single&nbsp;date&nbsp;string&nbsp;will&nbsp;probably&nbsp;be&nbsp;in&nbsp;title&nbsp;text<a name="line_4619"></a></li>
<li id="line_4620" class="even"><span class="lineNumber">&nbsp;4620&nbsp;</span>			return&nbsp;'dddd';&nbsp;//&nbsp;"Saturday"<a name="line_4620"></a></li>
<li id="line_4621" class="odd"><span class="lineNumber">&nbsp;4621&nbsp;</span>		}<a name="line_4621"></a></li>
<li id="line_4622" class="even"><span class="lineNumber">&nbsp;4622&nbsp;</span>	},<a name="line_4622"></a></li>
<li id="line_4623" class="odd"><span class="lineNumber">&nbsp;4623&nbsp;</span><a name="line_4623"></a></li>
<li id="line_4624" class="even"><span class="lineNumber">&nbsp;4624&nbsp;</span><a name="line_4624"></a></li>
<li id="line_4625" class="odd"><span class="lineNumber">&nbsp;4625&nbsp;</span>	//&nbsp;Computes&nbsp;a&nbsp;default&nbsp;event&nbsp;time&nbsp;formatting&nbsp;string&nbsp;if&nbsp;`timeFormat`&nbsp;is&nbsp;not&nbsp;explicitly&nbsp;defined<a name="line_4625"></a></li>
<li id="line_4626" class="even"><span class="lineNumber">&nbsp;4626&nbsp;</span>	computeEventTimeFormat:&nbsp;function()&nbsp;{<a name="line_4626"></a></li>
<li id="line_4627" class="odd"><span class="lineNumber">&nbsp;4627&nbsp;</span>		return&nbsp;this.view.opt('extraSmallTimeFormat');&nbsp;//&nbsp;like&nbsp;"6p"&nbsp;or&nbsp;"6:30p"<a name="line_4627"></a></li>
<li id="line_4628" class="even"><span class="lineNumber">&nbsp;4628&nbsp;</span>	},<a name="line_4628"></a></li>
<li id="line_4629" class="odd"><span class="lineNumber">&nbsp;4629&nbsp;</span><a name="line_4629"></a></li>
<li id="line_4630" class="even"><span class="lineNumber">&nbsp;4630&nbsp;</span><a name="line_4630"></a></li>
<li id="line_4631" class="odd"><span class="lineNumber">&nbsp;4631&nbsp;</span>	//&nbsp;Computes&nbsp;a&nbsp;default&nbsp;`displayEventEnd`&nbsp;value&nbsp;if&nbsp;one&nbsp;is&nbsp;not&nbsp;expliclty&nbsp;defined<a name="line_4631"></a></li>
<li id="line_4632" class="even"><span class="lineNumber">&nbsp;4632&nbsp;</span>	computeDisplayEventEnd:&nbsp;function()&nbsp;{<a name="line_4632"></a></li>
<li id="line_4633" class="odd"><span class="lineNumber">&nbsp;4633&nbsp;</span>		return&nbsp;this.colCnt&nbsp;==&nbsp;1;&nbsp;//&nbsp;we'll&nbsp;likely&nbsp;have&nbsp;space&nbsp;if&nbsp;there's&nbsp;only&nbsp;one&nbsp;day<a name="line_4633"></a></li>
<li id="line_4634" class="even"><span class="lineNumber">&nbsp;4634&nbsp;</span>	},<a name="line_4634"></a></li>
<li id="line_4635" class="odd"><span class="lineNumber">&nbsp;4635&nbsp;</span><a name="line_4635"></a></li>
<li id="line_4636" class="even"><span class="lineNumber">&nbsp;4636&nbsp;</span><a name="line_4636"></a></li>
<li id="line_4637" class="odd"><span class="lineNumber">&nbsp;4637&nbsp;</span>	/*&nbsp;Cell&nbsp;System<a name="line_4637"></a></li>
<li id="line_4638" class="even"><span class="lineNumber">&nbsp;4638&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_4638"></a></li>
<li id="line_4639" class="odd"><span class="lineNumber">&nbsp;4639&nbsp;</span><a name="line_4639"></a></li>
<li id="line_4640" class="even"><span class="lineNumber">&nbsp;4640&nbsp;</span><a name="line_4640"></a></li>
<li id="line_4641" class="odd"><span class="lineNumber">&nbsp;4641&nbsp;</span>	rangeUpdated:&nbsp;function()&nbsp;{<a name="line_4641"></a></li>
<li id="line_4642" class="even"><span class="lineNumber">&nbsp;4642&nbsp;</span>		var&nbsp;cellDates;<a name="line_4642"></a></li>
<li id="line_4643" class="odd"><span class="lineNumber">&nbsp;4643&nbsp;</span>		var&nbsp;firstDay;<a name="line_4643"></a></li>
<li id="line_4644" class="even"><span class="lineNumber">&nbsp;4644&nbsp;</span>		var&nbsp;rowCnt;<a name="line_4644"></a></li>
<li id="line_4645" class="odd"><span class="lineNumber">&nbsp;4645&nbsp;</span>		var&nbsp;colCnt;<a name="line_4645"></a></li>
<li id="line_4646" class="even"><span class="lineNumber">&nbsp;4646&nbsp;</span><a name="line_4646"></a></li>
<li id="line_4647" class="odd"><span class="lineNumber">&nbsp;4647&nbsp;</span>		this.updateCellDates();&nbsp;//&nbsp;populates&nbsp;cellDates&nbsp;and&nbsp;dayToCellOffsets<a name="line_4647"></a></li>
<li id="line_4648" class="even"><span class="lineNumber">&nbsp;4648&nbsp;</span>		cellDates&nbsp;=&nbsp;this.cellDates;<a name="line_4648"></a></li>
<li id="line_4649" class="odd"><span class="lineNumber">&nbsp;4649&nbsp;</span><a name="line_4649"></a></li>
<li id="line_4650" class="even"><span class="lineNumber">&nbsp;4650&nbsp;</span>		if&nbsp;(this.breakOnWeeks)&nbsp;{<a name="line_4650"></a></li>
<li id="line_4651" class="odd"><span class="lineNumber">&nbsp;4651&nbsp;</span>			//&nbsp;count&nbsp;columns&nbsp;until&nbsp;the&nbsp;day-of-week&nbsp;repeats<a name="line_4651"></a></li>
<li id="line_4652" class="even"><span class="lineNumber">&nbsp;4652&nbsp;</span>			firstDay&nbsp;=&nbsp;cellDates[0].day();<a name="line_4652"></a></li>
<li id="line_4653" class="odd"><span class="lineNumber">&nbsp;4653&nbsp;</span>			for&nbsp;(colCnt&nbsp;=&nbsp;1;&nbsp;colCnt&nbsp;&lt;&nbsp;cellDates.length;&nbsp;colCnt++)&nbsp;{<a name="line_4653"></a></li>
<li id="line_4654" class="even"><span class="lineNumber">&nbsp;4654&nbsp;</span>				if&nbsp;(cellDates[colCnt].day()&nbsp;==&nbsp;firstDay)&nbsp;{<a name="line_4654"></a></li>
<li id="line_4655" class="odd"><span class="lineNumber">&nbsp;4655&nbsp;</span>					break;<a name="line_4655"></a></li>
<li id="line_4656" class="even"><span class="lineNumber">&nbsp;4656&nbsp;</span>				}<a name="line_4656"></a></li>
<li id="line_4657" class="odd"><span class="lineNumber">&nbsp;4657&nbsp;</span>			}<a name="line_4657"></a></li>
<li id="line_4658" class="even"><span class="lineNumber">&nbsp;4658&nbsp;</span>			rowCnt&nbsp;=&nbsp;Math.ceil(cellDates.length&nbsp;/&nbsp;colCnt);<a name="line_4658"></a></li>
<li id="line_4659" class="odd"><span class="lineNumber">&nbsp;4659&nbsp;</span>		}<a name="line_4659"></a></li>
<li id="line_4660" class="even"><span class="lineNumber">&nbsp;4660&nbsp;</span>		else&nbsp;{<a name="line_4660"></a></li>
<li id="line_4661" class="odd"><span class="lineNumber">&nbsp;4661&nbsp;</span>			rowCnt&nbsp;=&nbsp;1;<a name="line_4661"></a></li>
<li id="line_4662" class="even"><span class="lineNumber">&nbsp;4662&nbsp;</span>			colCnt&nbsp;=&nbsp;cellDates.length;<a name="line_4662"></a></li>
<li id="line_4663" class="odd"><span class="lineNumber">&nbsp;4663&nbsp;</span>		}<a name="line_4663"></a></li>
<li id="line_4664" class="even"><span class="lineNumber">&nbsp;4664&nbsp;</span><a name="line_4664"></a></li>
<li id="line_4665" class="odd"><span class="lineNumber">&nbsp;4665&nbsp;</span>		this.rowCnt&nbsp;=&nbsp;rowCnt;<a name="line_4665"></a></li>
<li id="line_4666" class="even"><span class="lineNumber">&nbsp;4666&nbsp;</span>		this.colCnt&nbsp;=&nbsp;colCnt;<a name="line_4666"></a></li>
<li id="line_4667" class="odd"><span class="lineNumber">&nbsp;4667&nbsp;</span>	},<a name="line_4667"></a></li>
<li id="line_4668" class="even"><span class="lineNumber">&nbsp;4668&nbsp;</span><a name="line_4668"></a></li>
<li id="line_4669" class="odd"><span class="lineNumber">&nbsp;4669&nbsp;</span><a name="line_4669"></a></li>
<li id="line_4670" class="even"><span class="lineNumber">&nbsp;4670&nbsp;</span>	//&nbsp;Populates&nbsp;cellDates&nbsp;and&nbsp;dayToCellOffsets<a name="line_4670"></a></li>
<li id="line_4671" class="odd"><span class="lineNumber">&nbsp;4671&nbsp;</span>	updateCellDates:&nbsp;function()&nbsp;{<a name="line_4671"></a></li>
<li id="line_4672" class="even"><span class="lineNumber">&nbsp;4672&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_4672"></a></li>
<li id="line_4673" class="odd"><span class="lineNumber">&nbsp;4673&nbsp;</span>		var&nbsp;date&nbsp;=&nbsp;this.start.clone();<a name="line_4673"></a></li>
<li id="line_4674" class="even"><span class="lineNumber">&nbsp;4674&nbsp;</span>		var&nbsp;dates&nbsp;=&nbsp;[];<a name="line_4674"></a></li>
<li id="line_4675" class="odd"><span class="lineNumber">&nbsp;4675&nbsp;</span>		var&nbsp;offset&nbsp;=&nbsp;-1;<a name="line_4675"></a></li>
<li id="line_4676" class="even"><span class="lineNumber">&nbsp;4676&nbsp;</span>		var&nbsp;offsets&nbsp;=&nbsp;[];<a name="line_4676"></a></li>
<li id="line_4677" class="odd"><span class="lineNumber">&nbsp;4677&nbsp;</span><a name="line_4677"></a></li>
<li id="line_4678" class="even"><span class="lineNumber">&nbsp;4678&nbsp;</span>		while&nbsp;(date.isBefore(this.end))&nbsp;{&nbsp;//&nbsp;loop&nbsp;each&nbsp;day&nbsp;from&nbsp;start&nbsp;to&nbsp;end<a name="line_4678"></a></li>
<li id="line_4679" class="odd"><span class="lineNumber">&nbsp;4679&nbsp;</span>			if&nbsp;(view.isHiddenDay(date))&nbsp;{<a name="line_4679"></a></li>
<li id="line_4680" class="even"><span class="lineNumber">&nbsp;4680&nbsp;</span>				offsets.push(offset&nbsp;+&nbsp;0.5);&nbsp;//&nbsp;mark&nbsp;that&nbsp;it's&nbsp;between&nbsp;offsets<a name="line_4680"></a></li>
<li id="line_4681" class="odd"><span class="lineNumber">&nbsp;4681&nbsp;</span>			}<a name="line_4681"></a></li>
<li id="line_4682" class="even"><span class="lineNumber">&nbsp;4682&nbsp;</span>			else&nbsp;{<a name="line_4682"></a></li>
<li id="line_4683" class="odd"><span class="lineNumber">&nbsp;4683&nbsp;</span>				offset++;<a name="line_4683"></a></li>
<li id="line_4684" class="even"><span class="lineNumber">&nbsp;4684&nbsp;</span>				offsets.push(offset);<a name="line_4684"></a></li>
<li id="line_4685" class="odd"><span class="lineNumber">&nbsp;4685&nbsp;</span>				dates.push(date.clone());<a name="line_4685"></a></li>
<li id="line_4686" class="even"><span class="lineNumber">&nbsp;4686&nbsp;</span>			}<a name="line_4686"></a></li>
<li id="line_4687" class="odd"><span class="lineNumber">&nbsp;4687&nbsp;</span>			date.add(1,&nbsp;'days');<a name="line_4687"></a></li>
<li id="line_4688" class="even"><span class="lineNumber">&nbsp;4688&nbsp;</span>		}<a name="line_4688"></a></li>
<li id="line_4689" class="odd"><span class="lineNumber">&nbsp;4689&nbsp;</span><a name="line_4689"></a></li>
<li id="line_4690" class="even"><span class="lineNumber">&nbsp;4690&nbsp;</span>		this.cellDates&nbsp;=&nbsp;dates;<a name="line_4690"></a></li>
<li id="line_4691" class="odd"><span class="lineNumber">&nbsp;4691&nbsp;</span>		this.dayToCellOffsets&nbsp;=&nbsp;offsets;<a name="line_4691"></a></li>
<li id="line_4692" class="even"><span class="lineNumber">&nbsp;4692&nbsp;</span>	},<a name="line_4692"></a></li>
<li id="line_4693" class="odd"><span class="lineNumber">&nbsp;4693&nbsp;</span><a name="line_4693"></a></li>
<li id="line_4694" class="even"><span class="lineNumber">&nbsp;4694&nbsp;</span><a name="line_4694"></a></li>
<li id="line_4695" class="odd"><span class="lineNumber">&nbsp;4695&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;cell&nbsp;object,&nbsp;generates&nbsp;its&nbsp;start&nbsp;date.&nbsp;Returns&nbsp;a&nbsp;reference-free&nbsp;copy.<a name="line_4695"></a></li>
<li id="line_4696" class="even"><span class="lineNumber">&nbsp;4696&nbsp;</span>	computeCellDate:&nbsp;function(cell)&nbsp;{<a name="line_4696"></a></li>
<li id="line_4697" class="odd"><span class="lineNumber">&nbsp;4697&nbsp;</span>		var&nbsp;colCnt&nbsp;=&nbsp;this.colCnt;<a name="line_4697"></a></li>
<li id="line_4698" class="even"><span class="lineNumber">&nbsp;4698&nbsp;</span>		var&nbsp;index&nbsp;=&nbsp;cell.row&nbsp;*&nbsp;colCnt&nbsp;+&nbsp;(this.isRTL&nbsp;?&nbsp;colCnt&nbsp;-&nbsp;cell.col&nbsp;-&nbsp;1&nbsp;:&nbsp;cell.col);<a name="line_4698"></a></li>
<li id="line_4699" class="odd"><span class="lineNumber">&nbsp;4699&nbsp;</span><a name="line_4699"></a></li>
<li id="line_4700" class="even"><span class="lineNumber">&nbsp;4700&nbsp;</span>		return&nbsp;this.cellDates[index].clone();<a name="line_4700"></a></li>
<li id="line_4701" class="odd"><span class="lineNumber">&nbsp;4701&nbsp;</span>	},<a name="line_4701"></a></li>
<li id="line_4702" class="even"><span class="lineNumber">&nbsp;4702&nbsp;</span><a name="line_4702"></a></li>
<li id="line_4703" class="odd"><span class="lineNumber">&nbsp;4703&nbsp;</span><a name="line_4703"></a></li>
<li id="line_4704" class="even"><span class="lineNumber">&nbsp;4704&nbsp;</span>	//&nbsp;Retrieves&nbsp;the&nbsp;element&nbsp;representing&nbsp;the&nbsp;given&nbsp;row<a name="line_4704"></a></li>
<li id="line_4705" class="odd"><span class="lineNumber">&nbsp;4705&nbsp;</span>	getRowEl:&nbsp;function(row)&nbsp;{<a name="line_4705"></a></li>
<li id="line_4706" class="even"><span class="lineNumber">&nbsp;4706&nbsp;</span>		return&nbsp;this.rowEls.eq(row);<a name="line_4706"></a></li>
<li id="line_4707" class="odd"><span class="lineNumber">&nbsp;4707&nbsp;</span>	},<a name="line_4707"></a></li>
<li id="line_4708" class="even"><span class="lineNumber">&nbsp;4708&nbsp;</span><a name="line_4708"></a></li>
<li id="line_4709" class="odd"><span class="lineNumber">&nbsp;4709&nbsp;</span><a name="line_4709"></a></li>
<li id="line_4710" class="even"><span class="lineNumber">&nbsp;4710&nbsp;</span>	//&nbsp;Retrieves&nbsp;the&nbsp;element&nbsp;representing&nbsp;the&nbsp;given&nbsp;column<a name="line_4710"></a></li>
<li id="line_4711" class="odd"><span class="lineNumber">&nbsp;4711&nbsp;</span>	getColEl:&nbsp;function(col)&nbsp;{<a name="line_4711"></a></li>
<li id="line_4712" class="even"><span class="lineNumber">&nbsp;4712&nbsp;</span>		return&nbsp;this.dayEls.eq(col);<a name="line_4712"></a></li>
<li id="line_4713" class="odd"><span class="lineNumber">&nbsp;4713&nbsp;</span>	},<a name="line_4713"></a></li>
<li id="line_4714" class="even"><span class="lineNumber">&nbsp;4714&nbsp;</span><a name="line_4714"></a></li>
<li id="line_4715" class="odd"><span class="lineNumber">&nbsp;4715&nbsp;</span><a name="line_4715"></a></li>
<li id="line_4716" class="even"><span class="lineNumber">&nbsp;4716&nbsp;</span>	//&nbsp;Gets&nbsp;the&nbsp;whole-day&nbsp;element&nbsp;associated&nbsp;with&nbsp;the&nbsp;cell<a name="line_4716"></a></li>
<li id="line_4717" class="odd"><span class="lineNumber">&nbsp;4717&nbsp;</span>	getCellDayEl:&nbsp;function(cell)&nbsp;{<a name="line_4717"></a></li>
<li id="line_4718" class="even"><span class="lineNumber">&nbsp;4718&nbsp;</span>		return&nbsp;this.dayEls.eq(cell.row&nbsp;*&nbsp;this.colCnt&nbsp;+&nbsp;cell.col);<a name="line_4718"></a></li>
<li id="line_4719" class="odd"><span class="lineNumber">&nbsp;4719&nbsp;</span>	},<a name="line_4719"></a></li>
<li id="line_4720" class="even"><span class="lineNumber">&nbsp;4720&nbsp;</span><a name="line_4720"></a></li>
<li id="line_4721" class="odd"><span class="lineNumber">&nbsp;4721&nbsp;</span><a name="line_4721"></a></li>
<li id="line_4722" class="even"><span class="lineNumber">&nbsp;4722&nbsp;</span>	//&nbsp;Overrides&nbsp;Grid's&nbsp;method&nbsp;for&nbsp;when&nbsp;row&nbsp;coordinates&nbsp;are&nbsp;computed<a name="line_4722"></a></li>
<li id="line_4723" class="odd"><span class="lineNumber">&nbsp;4723&nbsp;</span>	computeRowCoords:&nbsp;function()&nbsp;{<a name="line_4723"></a></li>
<li id="line_4724" class="even"><span class="lineNumber">&nbsp;4724&nbsp;</span>		var&nbsp;rowCoords&nbsp;=&nbsp;Grid.prototype.computeRowCoords.call(this);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-method<a name="line_4724"></a></li>
<li id="line_4725" class="odd"><span class="lineNumber">&nbsp;4725&nbsp;</span><a name="line_4725"></a></li>
<li id="line_4726" class="even"><span class="lineNumber">&nbsp;4726&nbsp;</span>		//&nbsp;hack&nbsp;for&nbsp;extending&nbsp;last&nbsp;row&nbsp;(used&nbsp;by&nbsp;AgendaView)<a name="line_4726"></a></li>
<li id="line_4727" class="odd"><span class="lineNumber">&nbsp;4727&nbsp;</span>		rowCoords[rowCoords.length&nbsp;-&nbsp;1].bottom&nbsp;+=&nbsp;this.bottomCoordPadding;<a name="line_4727"></a></li>
<li id="line_4728" class="even"><span class="lineNumber">&nbsp;4728&nbsp;</span><a name="line_4728"></a></li>
<li id="line_4729" class="odd"><span class="lineNumber">&nbsp;4729&nbsp;</span>		return&nbsp;rowCoords;<a name="line_4729"></a></li>
<li id="line_4730" class="even"><span class="lineNumber">&nbsp;4730&nbsp;</span>	},<a name="line_4730"></a></li>
<li id="line_4731" class="odd"><span class="lineNumber">&nbsp;4731&nbsp;</span><a name="line_4731"></a></li>
<li id="line_4732" class="even"><span class="lineNumber">&nbsp;4732&nbsp;</span><a name="line_4732"></a></li>
<li id="line_4733" class="odd"><span class="lineNumber">&nbsp;4733&nbsp;</span>	/*&nbsp;Dates<a name="line_4733"></a></li>
<li id="line_4734" class="even"><span class="lineNumber">&nbsp;4734&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_4734"></a></li>
<li id="line_4735" class="odd"><span class="lineNumber">&nbsp;4735&nbsp;</span><a name="line_4735"></a></li>
<li id="line_4736" class="even"><span class="lineNumber">&nbsp;4736&nbsp;</span><a name="line_4736"></a></li>
<li id="line_4737" class="odd"><span class="lineNumber">&nbsp;4737&nbsp;</span>	//&nbsp;Slices&nbsp;up&nbsp;a&nbsp;date&nbsp;range&nbsp;by&nbsp;row&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;segments<a name="line_4737"></a></li>
<li id="line_4738" class="even"><span class="lineNumber">&nbsp;4738&nbsp;</span>	rangeToSegs:&nbsp;function(range)&nbsp;{<a name="line_4738"></a></li>
<li id="line_4739" class="odd"><span class="lineNumber">&nbsp;4739&nbsp;</span>		var&nbsp;isRTL&nbsp;=&nbsp;this.isRTL;<a name="line_4739"></a></li>
<li id="line_4740" class="even"><span class="lineNumber">&nbsp;4740&nbsp;</span>		var&nbsp;rowCnt&nbsp;=&nbsp;this.rowCnt;<a name="line_4740"></a></li>
<li id="line_4741" class="odd"><span class="lineNumber">&nbsp;4741&nbsp;</span>		var&nbsp;colCnt&nbsp;=&nbsp;this.colCnt;<a name="line_4741"></a></li>
<li id="line_4742" class="even"><span class="lineNumber">&nbsp;4742&nbsp;</span>		var&nbsp;segs&nbsp;=&nbsp;[];<a name="line_4742"></a></li>
<li id="line_4743" class="odd"><span class="lineNumber">&nbsp;4743&nbsp;</span>		var&nbsp;first,&nbsp;last;&nbsp;//&nbsp;inclusive&nbsp;cell-offset&nbsp;range&nbsp;for&nbsp;given&nbsp;range<a name="line_4743"></a></li>
<li id="line_4744" class="even"><span class="lineNumber">&nbsp;4744&nbsp;</span>		var&nbsp;row;<a name="line_4744"></a></li>
<li id="line_4745" class="odd"><span class="lineNumber">&nbsp;4745&nbsp;</span>		var&nbsp;rowFirst,&nbsp;rowLast;&nbsp;//&nbsp;inclusive&nbsp;cell-offset&nbsp;range&nbsp;for&nbsp;current&nbsp;row<a name="line_4745"></a></li>
<li id="line_4746" class="even"><span class="lineNumber">&nbsp;4746&nbsp;</span>		var&nbsp;isStart,&nbsp;isEnd;<a name="line_4746"></a></li>
<li id="line_4747" class="odd"><span class="lineNumber">&nbsp;4747&nbsp;</span>		var&nbsp;segFirst,&nbsp;segLast;&nbsp;//&nbsp;inclusive&nbsp;cell-offset&nbsp;range&nbsp;for&nbsp;segment<a name="line_4747"></a></li>
<li id="line_4748" class="even"><span class="lineNumber">&nbsp;4748&nbsp;</span>		var&nbsp;seg;<a name="line_4748"></a></li>
<li id="line_4749" class="odd"><span class="lineNumber">&nbsp;4749&nbsp;</span><a name="line_4749"></a></li>
<li id="line_4750" class="even"><span class="lineNumber">&nbsp;4750&nbsp;</span>		range&nbsp;=&nbsp;this.view.computeDayRange(range);&nbsp;//&nbsp;make&nbsp;whole-day&nbsp;range,&nbsp;considering&nbsp;nextDayThreshold<a name="line_4750"></a></li>
<li id="line_4751" class="odd"><span class="lineNumber">&nbsp;4751&nbsp;</span>		first&nbsp;=&nbsp;this.dateToCellOffset(range.start);<a name="line_4751"></a></li>
<li id="line_4752" class="even"><span class="lineNumber">&nbsp;4752&nbsp;</span>		last&nbsp;=&nbsp;this.dateToCellOffset(range.end.subtract(1,&nbsp;'days'));&nbsp;//&nbsp;offset&nbsp;of&nbsp;inclusive&nbsp;end&nbsp;date<a name="line_4752"></a></li>
<li id="line_4753" class="odd"><span class="lineNumber">&nbsp;4753&nbsp;</span><a name="line_4753"></a></li>
<li id="line_4754" class="even"><span class="lineNumber">&nbsp;4754&nbsp;</span>		for&nbsp;(row&nbsp;=&nbsp;0;&nbsp;row&nbsp;&lt;&nbsp;rowCnt;&nbsp;row++)&nbsp;{<a name="line_4754"></a></li>
<li id="line_4755" class="odd"><span class="lineNumber">&nbsp;4755&nbsp;</span>			rowFirst&nbsp;=&nbsp;row&nbsp;*&nbsp;colCnt;<a name="line_4755"></a></li>
<li id="line_4756" class="even"><span class="lineNumber">&nbsp;4756&nbsp;</span>			rowLast&nbsp;=&nbsp;rowFirst&nbsp;+&nbsp;colCnt&nbsp;-&nbsp;1;<a name="line_4756"></a></li>
<li id="line_4757" class="odd"><span class="lineNumber">&nbsp;4757&nbsp;</span><a name="line_4757"></a></li>
<li id="line_4758" class="even"><span class="lineNumber">&nbsp;4758&nbsp;</span>			//&nbsp;intersect&nbsp;segment's&nbsp;offset&nbsp;range&nbsp;with&nbsp;the&nbsp;row's<a name="line_4758"></a></li>
<li id="line_4759" class="odd"><span class="lineNumber">&nbsp;4759&nbsp;</span>			segFirst&nbsp;=&nbsp;Math.max(rowFirst,&nbsp;first);<a name="line_4759"></a></li>
<li id="line_4760" class="even"><span class="lineNumber">&nbsp;4760&nbsp;</span>			segLast&nbsp;=&nbsp;Math.min(rowLast,&nbsp;last);<a name="line_4760"></a></li>
<li id="line_4761" class="odd"><span class="lineNumber">&nbsp;4761&nbsp;</span><a name="line_4761"></a></li>
<li id="line_4762" class="even"><span class="lineNumber">&nbsp;4762&nbsp;</span>			//&nbsp;deal&nbsp;with&nbsp;in-between&nbsp;indices<a name="line_4762"></a></li>
<li id="line_4763" class="odd"><span class="lineNumber">&nbsp;4763&nbsp;</span>			segFirst&nbsp;=&nbsp;Math.ceil(segFirst);&nbsp;//&nbsp;in-between&nbsp;starts&nbsp;round&nbsp;to&nbsp;next&nbsp;cell<a name="line_4763"></a></li>
<li id="line_4764" class="even"><span class="lineNumber">&nbsp;4764&nbsp;</span>			segLast&nbsp;=&nbsp;Math.floor(segLast);&nbsp;//&nbsp;in-between&nbsp;ends&nbsp;round&nbsp;to&nbsp;prev&nbsp;cell<a name="line_4764"></a></li>
<li id="line_4765" class="odd"><span class="lineNumber">&nbsp;4765&nbsp;</span><a name="line_4765"></a></li>
<li id="line_4766" class="even"><span class="lineNumber">&nbsp;4766&nbsp;</span>			if&nbsp;(segFirst&nbsp;&lt;=&nbsp;segLast)&nbsp;{&nbsp;//&nbsp;was&nbsp;there&nbsp;any&nbsp;intersection&nbsp;with&nbsp;the&nbsp;current&nbsp;row?<a name="line_4766"></a></li>
<li id="line_4767" class="odd"><span class="lineNumber">&nbsp;4767&nbsp;</span><a name="line_4767"></a></li>
<li id="line_4768" class="even"><span class="lineNumber">&nbsp;4768&nbsp;</span>				//&nbsp;must&nbsp;be&nbsp;matching&nbsp;integers&nbsp;to&nbsp;be&nbsp;the&nbsp;segment's&nbsp;start/end<a name="line_4768"></a></li>
<li id="line_4769" class="odd"><span class="lineNumber">&nbsp;4769&nbsp;</span>				isStart&nbsp;=&nbsp;segFirst&nbsp;===&nbsp;first;<a name="line_4769"></a></li>
<li id="line_4770" class="even"><span class="lineNumber">&nbsp;4770&nbsp;</span>				isEnd&nbsp;=&nbsp;segLast&nbsp;===&nbsp;last;<a name="line_4770"></a></li>
<li id="line_4771" class="odd"><span class="lineNumber">&nbsp;4771&nbsp;</span><a name="line_4771"></a></li>
<li id="line_4772" class="even"><span class="lineNumber">&nbsp;4772&nbsp;</span>				//&nbsp;translate&nbsp;offsets&nbsp;to&nbsp;be&nbsp;relative&nbsp;to&nbsp;start-of-row<a name="line_4772"></a></li>
<li id="line_4773" class="odd"><span class="lineNumber">&nbsp;4773&nbsp;</span>				segFirst&nbsp;-=&nbsp;rowFirst;<a name="line_4773"></a></li>
<li id="line_4774" class="even"><span class="lineNumber">&nbsp;4774&nbsp;</span>				segLast&nbsp;-=&nbsp;rowFirst;<a name="line_4774"></a></li>
<li id="line_4775" class="odd"><span class="lineNumber">&nbsp;4775&nbsp;</span><a name="line_4775"></a></li>
<li id="line_4776" class="even"><span class="lineNumber">&nbsp;4776&nbsp;</span>				seg&nbsp;=&nbsp;{&nbsp;row:&nbsp;row,&nbsp;isStart:&nbsp;isStart,&nbsp;isEnd:&nbsp;isEnd&nbsp;};<a name="line_4776"></a></li>
<li id="line_4777" class="odd"><span class="lineNumber">&nbsp;4777&nbsp;</span>				if&nbsp;(isRTL)&nbsp;{<a name="line_4777"></a></li>
<li id="line_4778" class="even"><span class="lineNumber">&nbsp;4778&nbsp;</span>					seg.leftCol&nbsp;=&nbsp;colCnt&nbsp;-&nbsp;segLast&nbsp;-&nbsp;1;<a name="line_4778"></a></li>
<li id="line_4779" class="odd"><span class="lineNumber">&nbsp;4779&nbsp;</span>					seg.rightCol&nbsp;=&nbsp;colCnt&nbsp;-&nbsp;segFirst&nbsp;-&nbsp;1;<a name="line_4779"></a></li>
<li id="line_4780" class="even"><span class="lineNumber">&nbsp;4780&nbsp;</span>				}<a name="line_4780"></a></li>
<li id="line_4781" class="odd"><span class="lineNumber">&nbsp;4781&nbsp;</span>				else&nbsp;{<a name="line_4781"></a></li>
<li id="line_4782" class="even"><span class="lineNumber">&nbsp;4782&nbsp;</span>					seg.leftCol&nbsp;=&nbsp;segFirst;<a name="line_4782"></a></li>
<li id="line_4783" class="odd"><span class="lineNumber">&nbsp;4783&nbsp;</span>					seg.rightCol&nbsp;=&nbsp;segLast;<a name="line_4783"></a></li>
<li id="line_4784" class="even"><span class="lineNumber">&nbsp;4784&nbsp;</span>				}<a name="line_4784"></a></li>
<li id="line_4785" class="odd"><span class="lineNumber">&nbsp;4785&nbsp;</span>				segs.push(seg);<a name="line_4785"></a></li>
<li id="line_4786" class="even"><span class="lineNumber">&nbsp;4786&nbsp;</span>			}<a name="line_4786"></a></li>
<li id="line_4787" class="odd"><span class="lineNumber">&nbsp;4787&nbsp;</span>		}<a name="line_4787"></a></li>
<li id="line_4788" class="even"><span class="lineNumber">&nbsp;4788&nbsp;</span><a name="line_4788"></a></li>
<li id="line_4789" class="odd"><span class="lineNumber">&nbsp;4789&nbsp;</span>		return&nbsp;segs;<a name="line_4789"></a></li>
<li id="line_4790" class="even"><span class="lineNumber">&nbsp;4790&nbsp;</span>	},<a name="line_4790"></a></li>
<li id="line_4791" class="odd"><span class="lineNumber">&nbsp;4791&nbsp;</span><a name="line_4791"></a></li>
<li id="line_4792" class="even"><span class="lineNumber">&nbsp;4792&nbsp;</span><a name="line_4792"></a></li>
<li id="line_4793" class="odd"><span class="lineNumber">&nbsp;4793&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;date,&nbsp;returns&nbsp;its&nbsp;chronolocial&nbsp;cell-offset&nbsp;from&nbsp;the&nbsp;first&nbsp;cell&nbsp;of&nbsp;the&nbsp;grid.<a name="line_4793"></a></li>
<li id="line_4794" class="even"><span class="lineNumber">&nbsp;4794&nbsp;</span>	//&nbsp;If&nbsp;the&nbsp;date&nbsp;lies&nbsp;between&nbsp;cells&nbsp;(because&nbsp;of&nbsp;hiddenDays),&nbsp;returns&nbsp;a&nbsp;floating-point&nbsp;value&nbsp;between&nbsp;offsets.<a name="line_4794"></a></li>
<li id="line_4795" class="odd"><span class="lineNumber">&nbsp;4795&nbsp;</span>	//&nbsp;If&nbsp;before&nbsp;the&nbsp;first&nbsp;offset,&nbsp;returns&nbsp;a&nbsp;negative&nbsp;number.<a name="line_4795"></a></li>
<li id="line_4796" class="even"><span class="lineNumber">&nbsp;4796&nbsp;</span>	//&nbsp;If&nbsp;after&nbsp;the&nbsp;last&nbsp;offset,&nbsp;returns&nbsp;an&nbsp;offset&nbsp;past&nbsp;the&nbsp;last&nbsp;cell&nbsp;offset.<a name="line_4796"></a></li>
<li id="line_4797" class="odd"><span class="lineNumber">&nbsp;4797&nbsp;</span>	//&nbsp;Only&nbsp;works&nbsp;for&nbsp;*start*&nbsp;dates&nbsp;of&nbsp;cells.&nbsp;Will&nbsp;not&nbsp;work&nbsp;for&nbsp;exclusive&nbsp;end&nbsp;dates&nbsp;for&nbsp;cells.<a name="line_4797"></a></li>
<li id="line_4798" class="even"><span class="lineNumber">&nbsp;4798&nbsp;</span>	dateToCellOffset:&nbsp;function(date)&nbsp;{<a name="line_4798"></a></li>
<li id="line_4799" class="odd"><span class="lineNumber">&nbsp;4799&nbsp;</span>		var&nbsp;offsets&nbsp;=&nbsp;this.dayToCellOffsets;<a name="line_4799"></a></li>
<li id="line_4800" class="even"><span class="lineNumber">&nbsp;4800&nbsp;</span>		var&nbsp;day&nbsp;=&nbsp;date.diff(this.start,&nbsp;'days');<a name="line_4800"></a></li>
<li id="line_4801" class="odd"><span class="lineNumber">&nbsp;4801&nbsp;</span><a name="line_4801"></a></li>
<li id="line_4802" class="even"><span class="lineNumber">&nbsp;4802&nbsp;</span>		if&nbsp;(day&nbsp;&lt;&nbsp;0)&nbsp;{<a name="line_4802"></a></li>
<li id="line_4803" class="odd"><span class="lineNumber">&nbsp;4803&nbsp;</span>			return&nbsp;offsets[0]&nbsp;-&nbsp;1;<a name="line_4803"></a></li>
<li id="line_4804" class="even"><span class="lineNumber">&nbsp;4804&nbsp;</span>		}<a name="line_4804"></a></li>
<li id="line_4805" class="odd"><span class="lineNumber">&nbsp;4805&nbsp;</span>		else&nbsp;if&nbsp;(day&nbsp;&gt;=&nbsp;offsets.length)&nbsp;{<a name="line_4805"></a></li>
<li id="line_4806" class="even"><span class="lineNumber">&nbsp;4806&nbsp;</span>			return&nbsp;offsets[offsets.length&nbsp;-&nbsp;1]&nbsp;+&nbsp;1;<a name="line_4806"></a></li>
<li id="line_4807" class="odd"><span class="lineNumber">&nbsp;4807&nbsp;</span>		}<a name="line_4807"></a></li>
<li id="line_4808" class="even"><span class="lineNumber">&nbsp;4808&nbsp;</span>		else&nbsp;{<a name="line_4808"></a></li>
<li id="line_4809" class="odd"><span class="lineNumber">&nbsp;4809&nbsp;</span>			return&nbsp;offsets[day];<a name="line_4809"></a></li>
<li id="line_4810" class="even"><span class="lineNumber">&nbsp;4810&nbsp;</span>		}<a name="line_4810"></a></li>
<li id="line_4811" class="odd"><span class="lineNumber">&nbsp;4811&nbsp;</span>	},<a name="line_4811"></a></li>
<li id="line_4812" class="even"><span class="lineNumber">&nbsp;4812&nbsp;</span><a name="line_4812"></a></li>
<li id="line_4813" class="odd"><span class="lineNumber">&nbsp;4813&nbsp;</span><a name="line_4813"></a></li>
<li id="line_4814" class="even"><span class="lineNumber">&nbsp;4814&nbsp;</span>	/*&nbsp;Event&nbsp;Drag&nbsp;Visualization<a name="line_4814"></a></li>
<li id="line_4815" class="odd"><span class="lineNumber">&nbsp;4815&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_4815"></a></li>
<li id="line_4816" class="even"><span class="lineNumber">&nbsp;4816&nbsp;</span>	//&nbsp;TODO:&nbsp;move&nbsp;to&nbsp;DayGrid.event,&nbsp;similar&nbsp;to&nbsp;what&nbsp;we&nbsp;did&nbsp;with&nbsp;Grid's&nbsp;drag&nbsp;methods<a name="line_4816"></a></li>
<li id="line_4817" class="odd"><span class="lineNumber">&nbsp;4817&nbsp;</span><a name="line_4817"></a></li>
<li id="line_4818" class="even"><span class="lineNumber">&nbsp;4818&nbsp;</span><a name="line_4818"></a></li>
<li id="line_4819" class="odd"><span class="lineNumber">&nbsp;4819&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;an&nbsp;event&nbsp;or&nbsp;external&nbsp;element&nbsp;being&nbsp;dragged.<a name="line_4819"></a></li>
<li id="line_4820" class="even"><span class="lineNumber">&nbsp;4820&nbsp;</span>	//&nbsp;The&nbsp;dropLocation's&nbsp;end&nbsp;can&nbsp;be&nbsp;null.&nbsp;seg&nbsp;can&nbsp;be&nbsp;null.&nbsp;See&nbsp;Grid::renderDrag&nbsp;for&nbsp;more&nbsp;info.<a name="line_4820"></a></li>
<li id="line_4821" class="odd"><span class="lineNumber">&nbsp;4821&nbsp;</span>	renderDrag:&nbsp;function(dropLocation,&nbsp;seg)&nbsp;{<a name="line_4821"></a></li>
<li id="line_4822" class="even"><span class="lineNumber">&nbsp;4822&nbsp;</span><a name="line_4822"></a></li>
<li id="line_4823" class="odd"><span class="lineNumber">&nbsp;4823&nbsp;</span>		//&nbsp;always&nbsp;render&nbsp;a&nbsp;highlight&nbsp;underneath<a name="line_4823"></a></li>
<li id="line_4824" class="even"><span class="lineNumber">&nbsp;4824&nbsp;</span>		this.renderHighlight(this.eventRangeToSegs(dropLocation));<a name="line_4824"></a></li>
<li id="line_4825" class="odd"><span class="lineNumber">&nbsp;4825&nbsp;</span><a name="line_4825"></a></li>
<li id="line_4826" class="even"><span class="lineNumber">&nbsp;4826&nbsp;</span>		//&nbsp;if&nbsp;a&nbsp;segment&nbsp;from&nbsp;the&nbsp;same&nbsp;calendar&nbsp;but&nbsp;another&nbsp;component&nbsp;is&nbsp;being&nbsp;dragged,&nbsp;render&nbsp;a&nbsp;helper&nbsp;event<a name="line_4826"></a></li>
<li id="line_4827" class="odd"><span class="lineNumber">&nbsp;4827&nbsp;</span>		if&nbsp;(seg&nbsp;&amp;&amp;&nbsp;!seg.el.closest(this.el).length)&nbsp;{<a name="line_4827"></a></li>
<li id="line_4828" class="even"><span class="lineNumber">&nbsp;4828&nbsp;</span><a name="line_4828"></a></li>
<li id="line_4829" class="odd"><span class="lineNumber">&nbsp;4829&nbsp;</span>			this.renderRangeHelper(dropLocation,&nbsp;seg);<a name="line_4829"></a></li>
<li id="line_4830" class="even"><span class="lineNumber">&nbsp;4830&nbsp;</span>			this.applyDragOpacity(this.helperEls);<a name="line_4830"></a></li>
<li id="line_4831" class="odd"><span class="lineNumber">&nbsp;4831&nbsp;</span><a name="line_4831"></a></li>
<li id="line_4832" class="even"><span class="lineNumber">&nbsp;4832&nbsp;</span>			return&nbsp;true;&nbsp;//&nbsp;a&nbsp;helper&nbsp;has&nbsp;been&nbsp;rendered<a name="line_4832"></a></li>
<li id="line_4833" class="odd"><span class="lineNumber">&nbsp;4833&nbsp;</span>		}<a name="line_4833"></a></li>
<li id="line_4834" class="even"><span class="lineNumber">&nbsp;4834&nbsp;</span>	},<a name="line_4834"></a></li>
<li id="line_4835" class="odd"><span class="lineNumber">&nbsp;4835&nbsp;</span><a name="line_4835"></a></li>
<li id="line_4836" class="even"><span class="lineNumber">&nbsp;4836&nbsp;</span><a name="line_4836"></a></li>
<li id="line_4837" class="odd"><span class="lineNumber">&nbsp;4837&nbsp;</span>	//&nbsp;Unrenders&nbsp;any&nbsp;visual&nbsp;indication&nbsp;of&nbsp;a&nbsp;hovering&nbsp;event<a name="line_4837"></a></li>
<li id="line_4838" class="even"><span class="lineNumber">&nbsp;4838&nbsp;</span>	unrenderDrag:&nbsp;function()&nbsp;{<a name="line_4838"></a></li>
<li id="line_4839" class="odd"><span class="lineNumber">&nbsp;4839&nbsp;</span>		this.unrenderHighlight();<a name="line_4839"></a></li>
<li id="line_4840" class="even"><span class="lineNumber">&nbsp;4840&nbsp;</span>		this.unrenderHelper();<a name="line_4840"></a></li>
<li id="line_4841" class="odd"><span class="lineNumber">&nbsp;4841&nbsp;</span>	},<a name="line_4841"></a></li>
<li id="line_4842" class="even"><span class="lineNumber">&nbsp;4842&nbsp;</span><a name="line_4842"></a></li>
<li id="line_4843" class="odd"><span class="lineNumber">&nbsp;4843&nbsp;</span><a name="line_4843"></a></li>
<li id="line_4844" class="even"><span class="lineNumber">&nbsp;4844&nbsp;</span>	/*&nbsp;Event&nbsp;Resize&nbsp;Visualization<a name="line_4844"></a></li>
<li id="line_4845" class="odd"><span class="lineNumber">&nbsp;4845&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_4845"></a></li>
<li id="line_4846" class="even"><span class="lineNumber">&nbsp;4846&nbsp;</span><a name="line_4846"></a></li>
<li id="line_4847" class="odd"><span class="lineNumber">&nbsp;4847&nbsp;</span><a name="line_4847"></a></li>
<li id="line_4848" class="even"><span class="lineNumber">&nbsp;4848&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;an&nbsp;event&nbsp;being&nbsp;resized<a name="line_4848"></a></li>
<li id="line_4849" class="odd"><span class="lineNumber">&nbsp;4849&nbsp;</span>	renderEventResize:&nbsp;function(range,&nbsp;seg)&nbsp;{<a name="line_4849"></a></li>
<li id="line_4850" class="even"><span class="lineNumber">&nbsp;4850&nbsp;</span>		this.renderHighlight(this.eventRangeToSegs(range));<a name="line_4850"></a></li>
<li id="line_4851" class="odd"><span class="lineNumber">&nbsp;4851&nbsp;</span>		this.renderRangeHelper(range,&nbsp;seg);<a name="line_4851"></a></li>
<li id="line_4852" class="even"><span class="lineNumber">&nbsp;4852&nbsp;</span>	},<a name="line_4852"></a></li>
<li id="line_4853" class="odd"><span class="lineNumber">&nbsp;4853&nbsp;</span><a name="line_4853"></a></li>
<li id="line_4854" class="even"><span class="lineNumber">&nbsp;4854&nbsp;</span><a name="line_4854"></a></li>
<li id="line_4855" class="odd"><span class="lineNumber">&nbsp;4855&nbsp;</span>	//&nbsp;Unrenders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;an&nbsp;event&nbsp;being&nbsp;resized<a name="line_4855"></a></li>
<li id="line_4856" class="even"><span class="lineNumber">&nbsp;4856&nbsp;</span>	unrenderEventResize:&nbsp;function()&nbsp;{<a name="line_4856"></a></li>
<li id="line_4857" class="odd"><span class="lineNumber">&nbsp;4857&nbsp;</span>		this.unrenderHighlight();<a name="line_4857"></a></li>
<li id="line_4858" class="even"><span class="lineNumber">&nbsp;4858&nbsp;</span>		this.unrenderHelper();<a name="line_4858"></a></li>
<li id="line_4859" class="odd"><span class="lineNumber">&nbsp;4859&nbsp;</span>	},<a name="line_4859"></a></li>
<li id="line_4860" class="even"><span class="lineNumber">&nbsp;4860&nbsp;</span><a name="line_4860"></a></li>
<li id="line_4861" class="odd"><span class="lineNumber">&nbsp;4861&nbsp;</span><a name="line_4861"></a></li>
<li id="line_4862" class="even"><span class="lineNumber">&nbsp;4862&nbsp;</span>	/*&nbsp;Event&nbsp;Helper<a name="line_4862"></a></li>
<li id="line_4863" class="odd"><span class="lineNumber">&nbsp;4863&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_4863"></a></li>
<li id="line_4864" class="even"><span class="lineNumber">&nbsp;4864&nbsp;</span><a name="line_4864"></a></li>
<li id="line_4865" class="odd"><span class="lineNumber">&nbsp;4865&nbsp;</span><a name="line_4865"></a></li>
<li id="line_4866" class="even"><span class="lineNumber">&nbsp;4866&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;mock&nbsp;"helper"&nbsp;event.&nbsp;`sourceSeg`&nbsp;is&nbsp;the&nbsp;associated&nbsp;internal&nbsp;segment&nbsp;object.&nbsp;It&nbsp;can&nbsp;be&nbsp;null.<a name="line_4866"></a></li>
<li id="line_4867" class="odd"><span class="lineNumber">&nbsp;4867&nbsp;</span>	renderHelper:&nbsp;function(event,&nbsp;sourceSeg)&nbsp;{<a name="line_4867"></a></li>
<li id="line_4868" class="even"><span class="lineNumber">&nbsp;4868&nbsp;</span>		var&nbsp;helperNodes&nbsp;=&nbsp;[];<a name="line_4868"></a></li>
<li id="line_4869" class="odd"><span class="lineNumber">&nbsp;4869&nbsp;</span>		var&nbsp;segs&nbsp;=&nbsp;this.eventsToSegs([&nbsp;event&nbsp;]);<a name="line_4869"></a></li>
<li id="line_4870" class="even"><span class="lineNumber">&nbsp;4870&nbsp;</span>		var&nbsp;rowStructs;<a name="line_4870"></a></li>
<li id="line_4871" class="odd"><span class="lineNumber">&nbsp;4871&nbsp;</span><a name="line_4871"></a></li>
<li id="line_4872" class="even"><span class="lineNumber">&nbsp;4872&nbsp;</span>		segs&nbsp;=&nbsp;this.renderFgSegEls(segs);&nbsp;//&nbsp;assigns&nbsp;each&nbsp;seg's&nbsp;el&nbsp;and&nbsp;returns&nbsp;a&nbsp;subset&nbsp;of&nbsp;segs&nbsp;that&nbsp;were&nbsp;rendered<a name="line_4872"></a></li>
<li id="line_4873" class="odd"><span class="lineNumber">&nbsp;4873&nbsp;</span>		rowStructs&nbsp;=&nbsp;this.renderSegRows(segs);<a name="line_4873"></a></li>
<li id="line_4874" class="even"><span class="lineNumber">&nbsp;4874&nbsp;</span><a name="line_4874"></a></li>
<li id="line_4875" class="odd"><span class="lineNumber">&nbsp;4875&nbsp;</span>		//&nbsp;inject&nbsp;each&nbsp;new&nbsp;event&nbsp;skeleton&nbsp;into&nbsp;each&nbsp;associated&nbsp;row<a name="line_4875"></a></li>
<li id="line_4876" class="even"><span class="lineNumber">&nbsp;4876&nbsp;</span>		this.rowEls.each(function(row,&nbsp;rowNode)&nbsp;{<a name="line_4876"></a></li>
<li id="line_4877" class="odd"><span class="lineNumber">&nbsp;4877&nbsp;</span>			var&nbsp;rowEl&nbsp;=&nbsp;$(rowNode);&nbsp;//&nbsp;the&nbsp;.fc-row<a name="line_4877"></a></li>
<li id="line_4878" class="even"><span class="lineNumber">&nbsp;4878&nbsp;</span>			var&nbsp;skeletonEl&nbsp;=&nbsp;$('&lt;div&nbsp;class="fc-helper-skeleton"&gt;&lt;table/&gt;&lt;/div&gt;');&nbsp;//&nbsp;will&nbsp;be&nbsp;absolutely&nbsp;positioned<a name="line_4878"></a></li>
<li id="line_4879" class="odd"><span class="lineNumber">&nbsp;4879&nbsp;</span>			var&nbsp;skeletonTop;<a name="line_4879"></a></li>
<li id="line_4880" class="even"><span class="lineNumber">&nbsp;4880&nbsp;</span><a name="line_4880"></a></li>
<li id="line_4881" class="odd"><span class="lineNumber">&nbsp;4881&nbsp;</span>			//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;original&nbsp;segment,&nbsp;match&nbsp;the&nbsp;top&nbsp;position.&nbsp;Otherwise,&nbsp;put&nbsp;it&nbsp;at&nbsp;the&nbsp;row's&nbsp;top&nbsp;level<a name="line_4881"></a></li>
<li id="line_4882" class="even"><span class="lineNumber">&nbsp;4882&nbsp;</span>			if&nbsp;(sourceSeg&nbsp;&amp;&amp;&nbsp;sourceSeg.row&nbsp;===&nbsp;row)&nbsp;{<a name="line_4882"></a></li>
<li id="line_4883" class="odd"><span class="lineNumber">&nbsp;4883&nbsp;</span>				skeletonTop&nbsp;=&nbsp;sourceSeg.el.position().top;<a name="line_4883"></a></li>
<li id="line_4884" class="even"><span class="lineNumber">&nbsp;4884&nbsp;</span>			}<a name="line_4884"></a></li>
<li id="line_4885" class="odd"><span class="lineNumber">&nbsp;4885&nbsp;</span>			else&nbsp;{<a name="line_4885"></a></li>
<li id="line_4886" class="even"><span class="lineNumber">&nbsp;4886&nbsp;</span>				skeletonTop&nbsp;=&nbsp;rowEl.find('.fc-content-skeleton&nbsp;tbody').position().top;<a name="line_4886"></a></li>
<li id="line_4887" class="odd"><span class="lineNumber">&nbsp;4887&nbsp;</span>			}<a name="line_4887"></a></li>
<li id="line_4888" class="even"><span class="lineNumber">&nbsp;4888&nbsp;</span><a name="line_4888"></a></li>
<li id="line_4889" class="odd"><span class="lineNumber">&nbsp;4889&nbsp;</span>			skeletonEl.css('top',&nbsp;skeletonTop)<a name="line_4889"></a></li>
<li id="line_4890" class="even"><span class="lineNumber">&nbsp;4890&nbsp;</span>				.find('table')<a name="line_4890"></a></li>
<li id="line_4891" class="odd"><span class="lineNumber">&nbsp;4891&nbsp;</span>					.append(rowStructs[row].tbodyEl);<a name="line_4891"></a></li>
<li id="line_4892" class="even"><span class="lineNumber">&nbsp;4892&nbsp;</span><a name="line_4892"></a></li>
<li id="line_4893" class="odd"><span class="lineNumber">&nbsp;4893&nbsp;</span>			rowEl.append(skeletonEl);<a name="line_4893"></a></li>
<li id="line_4894" class="even"><span class="lineNumber">&nbsp;4894&nbsp;</span>			helperNodes.push(skeletonEl[0]);<a name="line_4894"></a></li>
<li id="line_4895" class="odd"><span class="lineNumber">&nbsp;4895&nbsp;</span>		});<a name="line_4895"></a></li>
<li id="line_4896" class="even"><span class="lineNumber">&nbsp;4896&nbsp;</span><a name="line_4896"></a></li>
<li id="line_4897" class="odd"><span class="lineNumber">&nbsp;4897&nbsp;</span>		this.helperEls&nbsp;=&nbsp;$(helperNodes);&nbsp;//&nbsp;array&nbsp;-&gt;&nbsp;jQuery&nbsp;set<a name="line_4897"></a></li>
<li id="line_4898" class="even"><span class="lineNumber">&nbsp;4898&nbsp;</span>	},<a name="line_4898"></a></li>
<li id="line_4899" class="odd"><span class="lineNumber">&nbsp;4899&nbsp;</span><a name="line_4899"></a></li>
<li id="line_4900" class="even"><span class="lineNumber">&nbsp;4900&nbsp;</span><a name="line_4900"></a></li>
<li id="line_4901" class="odd"><span class="lineNumber">&nbsp;4901&nbsp;</span>	//&nbsp;Unrenders&nbsp;any&nbsp;visual&nbsp;indication&nbsp;of&nbsp;a&nbsp;mock&nbsp;helper&nbsp;event<a name="line_4901"></a></li>
<li id="line_4902" class="even"><span class="lineNumber">&nbsp;4902&nbsp;</span>	unrenderHelper:&nbsp;function()&nbsp;{<a name="line_4902"></a></li>
<li id="line_4903" class="odd"><span class="lineNumber">&nbsp;4903&nbsp;</span>		if&nbsp;(this.helperEls)&nbsp;{<a name="line_4903"></a></li>
<li id="line_4904" class="even"><span class="lineNumber">&nbsp;4904&nbsp;</span>			this.helperEls.remove();<a name="line_4904"></a></li>
<li id="line_4905" class="odd"><span class="lineNumber">&nbsp;4905&nbsp;</span>			this.helperEls&nbsp;=&nbsp;null;<a name="line_4905"></a></li>
<li id="line_4906" class="even"><span class="lineNumber">&nbsp;4906&nbsp;</span>		}<a name="line_4906"></a></li>
<li id="line_4907" class="odd"><span class="lineNumber">&nbsp;4907&nbsp;</span>	},<a name="line_4907"></a></li>
<li id="line_4908" class="even"><span class="lineNumber">&nbsp;4908&nbsp;</span><a name="line_4908"></a></li>
<li id="line_4909" class="odd"><span class="lineNumber">&nbsp;4909&nbsp;</span><a name="line_4909"></a></li>
<li id="line_4910" class="even"><span class="lineNumber">&nbsp;4910&nbsp;</span>	/*&nbsp;Fill&nbsp;System&nbsp;(highlight,&nbsp;background&nbsp;events,&nbsp;business&nbsp;hours)<a name="line_4910"></a></li>
<li id="line_4911" class="odd"><span class="lineNumber">&nbsp;4911&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_4911"></a></li>
<li id="line_4912" class="even"><span class="lineNumber">&nbsp;4912&nbsp;</span><a name="line_4912"></a></li>
<li id="line_4913" class="odd"><span class="lineNumber">&nbsp;4913&nbsp;</span><a name="line_4913"></a></li>
<li id="line_4914" class="even"><span class="lineNumber">&nbsp;4914&nbsp;</span>	fillSegTag:&nbsp;'td',&nbsp;//&nbsp;override&nbsp;the&nbsp;default&nbsp;tag&nbsp;name<a name="line_4914"></a></li>
<li id="line_4915" class="odd"><span class="lineNumber">&nbsp;4915&nbsp;</span><a name="line_4915"></a></li>
<li id="line_4916" class="even"><span class="lineNumber">&nbsp;4916&nbsp;</span><a name="line_4916"></a></li>
<li id="line_4917" class="odd"><span class="lineNumber">&nbsp;4917&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;set&nbsp;of&nbsp;rectangles&nbsp;over&nbsp;the&nbsp;given&nbsp;segments&nbsp;of&nbsp;days.<a name="line_4917"></a></li>
<li id="line_4918" class="even"><span class="lineNumber">&nbsp;4918&nbsp;</span>	//&nbsp;Only&nbsp;returns&nbsp;segments&nbsp;that&nbsp;successfully&nbsp;rendered.<a name="line_4918"></a></li>
<li id="line_4919" class="odd"><span class="lineNumber">&nbsp;4919&nbsp;</span>	renderFill:&nbsp;function(type,&nbsp;segs,&nbsp;className)&nbsp;{<a name="line_4919"></a></li>
<li id="line_4920" class="even"><span class="lineNumber">&nbsp;4920&nbsp;</span>		var&nbsp;nodes&nbsp;=&nbsp;[];<a name="line_4920"></a></li>
<li id="line_4921" class="odd"><span class="lineNumber">&nbsp;4921&nbsp;</span>		var&nbsp;i,&nbsp;seg;<a name="line_4921"></a></li>
<li id="line_4922" class="even"><span class="lineNumber">&nbsp;4922&nbsp;</span>		var&nbsp;skeletonEl;<a name="line_4922"></a></li>
<li id="line_4923" class="odd"><span class="lineNumber">&nbsp;4923&nbsp;</span><a name="line_4923"></a></li>
<li id="line_4924" class="even"><span class="lineNumber">&nbsp;4924&nbsp;</span>		segs&nbsp;=&nbsp;this.renderFillSegEls(type,&nbsp;segs);&nbsp;//&nbsp;assignes&nbsp;`.el`&nbsp;to&nbsp;each&nbsp;seg.&nbsp;returns&nbsp;successfully&nbsp;rendered&nbsp;segs<a name="line_4924"></a></li>
<li id="line_4925" class="odd"><span class="lineNumber">&nbsp;4925&nbsp;</span><a name="line_4925"></a></li>
<li id="line_4926" class="even"><span class="lineNumber">&nbsp;4926&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;segs.length;&nbsp;i++)&nbsp;{<a name="line_4926"></a></li>
<li id="line_4927" class="odd"><span class="lineNumber">&nbsp;4927&nbsp;</span>			seg&nbsp;=&nbsp;segs[i];<a name="line_4927"></a></li>
<li id="line_4928" class="even"><span class="lineNumber">&nbsp;4928&nbsp;</span>			skeletonEl&nbsp;=&nbsp;this.renderFillRow(type,&nbsp;seg,&nbsp;className);<a name="line_4928"></a></li>
<li id="line_4929" class="odd"><span class="lineNumber">&nbsp;4929&nbsp;</span>			this.rowEls.eq(seg.row).append(skeletonEl);<a name="line_4929"></a></li>
<li id="line_4930" class="even"><span class="lineNumber">&nbsp;4930&nbsp;</span>			nodes.push(skeletonEl[0]);<a name="line_4930"></a></li>
<li id="line_4931" class="odd"><span class="lineNumber">&nbsp;4931&nbsp;</span>		}<a name="line_4931"></a></li>
<li id="line_4932" class="even"><span class="lineNumber">&nbsp;4932&nbsp;</span><a name="line_4932"></a></li>
<li id="line_4933" class="odd"><span class="lineNumber">&nbsp;4933&nbsp;</span>		this.elsByFill[type]&nbsp;=&nbsp;$(nodes);<a name="line_4933"></a></li>
<li id="line_4934" class="even"><span class="lineNumber">&nbsp;4934&nbsp;</span><a name="line_4934"></a></li>
<li id="line_4935" class="odd"><span class="lineNumber">&nbsp;4935&nbsp;</span>		return&nbsp;segs;<a name="line_4935"></a></li>
<li id="line_4936" class="even"><span class="lineNumber">&nbsp;4936&nbsp;</span>	},<a name="line_4936"></a></li>
<li id="line_4937" class="odd"><span class="lineNumber">&nbsp;4937&nbsp;</span><a name="line_4937"></a></li>
<li id="line_4938" class="even"><span class="lineNumber">&nbsp;4938&nbsp;</span><a name="line_4938"></a></li>
<li id="line_4939" class="odd"><span class="lineNumber">&nbsp;4939&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;needed&nbsp;for&nbsp;one&nbsp;row&nbsp;of&nbsp;a&nbsp;fill.&nbsp;Requires&nbsp;the&nbsp;seg's&nbsp;el&nbsp;to&nbsp;be&nbsp;rendered.<a name="line_4939"></a></li>
<li id="line_4940" class="even"><span class="lineNumber">&nbsp;4940&nbsp;</span>	renderFillRow:&nbsp;function(type,&nbsp;seg,&nbsp;className)&nbsp;{<a name="line_4940"></a></li>
<li id="line_4941" class="odd"><span class="lineNumber">&nbsp;4941&nbsp;</span>		var&nbsp;colCnt&nbsp;=&nbsp;this.colCnt;<a name="line_4941"></a></li>
<li id="line_4942" class="even"><span class="lineNumber">&nbsp;4942&nbsp;</span>		var&nbsp;startCol&nbsp;=&nbsp;seg.leftCol;<a name="line_4942"></a></li>
<li id="line_4943" class="odd"><span class="lineNumber">&nbsp;4943&nbsp;</span>		var&nbsp;endCol&nbsp;=&nbsp;seg.rightCol&nbsp;+&nbsp;1;<a name="line_4943"></a></li>
<li id="line_4944" class="even"><span class="lineNumber">&nbsp;4944&nbsp;</span>		var&nbsp;skeletonEl;<a name="line_4944"></a></li>
<li id="line_4945" class="odd"><span class="lineNumber">&nbsp;4945&nbsp;</span>		var&nbsp;trEl;<a name="line_4945"></a></li>
<li id="line_4946" class="even"><span class="lineNumber">&nbsp;4946&nbsp;</span><a name="line_4946"></a></li>
<li id="line_4947" class="odd"><span class="lineNumber">&nbsp;4947&nbsp;</span>		className&nbsp;=&nbsp;className&nbsp;||&nbsp;type.toLowerCase();<a name="line_4947"></a></li>
<li id="line_4948" class="even"><span class="lineNumber">&nbsp;4948&nbsp;</span><a name="line_4948"></a></li>
<li id="line_4949" class="odd"><span class="lineNumber">&nbsp;4949&nbsp;</span>		skeletonEl&nbsp;=&nbsp;$(<a name="line_4949"></a></li>
<li id="line_4950" class="even"><span class="lineNumber">&nbsp;4950&nbsp;</span>			'&lt;div&nbsp;class="fc-'&nbsp;+&nbsp;className&nbsp;+&nbsp;'-skeleton"&gt;'&nbsp;+<a name="line_4950"></a></li>
<li id="line_4951" class="odd"><span class="lineNumber">&nbsp;4951&nbsp;</span>				'&lt;table&gt;&lt;tr/&gt;&lt;/table&gt;'&nbsp;+<a name="line_4951"></a></li>
<li id="line_4952" class="even"><span class="lineNumber">&nbsp;4952&nbsp;</span>			'&lt;/div&gt;'<a name="line_4952"></a></li>
<li id="line_4953" class="odd"><span class="lineNumber">&nbsp;4953&nbsp;</span>		);<a name="line_4953"></a></li>
<li id="line_4954" class="even"><span class="lineNumber">&nbsp;4954&nbsp;</span>		trEl&nbsp;=&nbsp;skeletonEl.find('tr');<a name="line_4954"></a></li>
<li id="line_4955" class="odd"><span class="lineNumber">&nbsp;4955&nbsp;</span><a name="line_4955"></a></li>
<li id="line_4956" class="even"><span class="lineNumber">&nbsp;4956&nbsp;</span>		if&nbsp;(startCol&nbsp;&gt;&nbsp;0)&nbsp;{<a name="line_4956"></a></li>
<li id="line_4957" class="odd"><span class="lineNumber">&nbsp;4957&nbsp;</span>			trEl.append('&lt;td&nbsp;colspan="'&nbsp;+&nbsp;startCol&nbsp;+&nbsp;'"/&gt;');<a name="line_4957"></a></li>
<li id="line_4958" class="even"><span class="lineNumber">&nbsp;4958&nbsp;</span>		}<a name="line_4958"></a></li>
<li id="line_4959" class="odd"><span class="lineNumber">&nbsp;4959&nbsp;</span><a name="line_4959"></a></li>
<li id="line_4960" class="even"><span class="lineNumber">&nbsp;4960&nbsp;</span>		trEl.append(<a name="line_4960"></a></li>
<li id="line_4961" class="odd"><span class="lineNumber">&nbsp;4961&nbsp;</span>			seg.el.attr('colspan',&nbsp;endCol&nbsp;-&nbsp;startCol)<a name="line_4961"></a></li>
<li id="line_4962" class="even"><span class="lineNumber">&nbsp;4962&nbsp;</span>		);<a name="line_4962"></a></li>
<li id="line_4963" class="odd"><span class="lineNumber">&nbsp;4963&nbsp;</span><a name="line_4963"></a></li>
<li id="line_4964" class="even"><span class="lineNumber">&nbsp;4964&nbsp;</span>		if&nbsp;(endCol&nbsp;&lt;&nbsp;colCnt)&nbsp;{<a name="line_4964"></a></li>
<li id="line_4965" class="odd"><span class="lineNumber">&nbsp;4965&nbsp;</span>			trEl.append('&lt;td&nbsp;colspan="'&nbsp;+&nbsp;(colCnt&nbsp;-&nbsp;endCol)&nbsp;+&nbsp;'"/&gt;');<a name="line_4965"></a></li>
<li id="line_4966" class="even"><span class="lineNumber">&nbsp;4966&nbsp;</span>		}<a name="line_4966"></a></li>
<li id="line_4967" class="odd"><span class="lineNumber">&nbsp;4967&nbsp;</span><a name="line_4967"></a></li>
<li id="line_4968" class="even"><span class="lineNumber">&nbsp;4968&nbsp;</span>		this.bookendCells(trEl,&nbsp;type);<a name="line_4968"></a></li>
<li id="line_4969" class="odd"><span class="lineNumber">&nbsp;4969&nbsp;</span><a name="line_4969"></a></li>
<li id="line_4970" class="even"><span class="lineNumber">&nbsp;4970&nbsp;</span>		return&nbsp;skeletonEl;<a name="line_4970"></a></li>
<li id="line_4971" class="odd"><span class="lineNumber">&nbsp;4971&nbsp;</span>	}<a name="line_4971"></a></li>
<li id="line_4972" class="even"><span class="lineNumber">&nbsp;4972&nbsp;</span><a name="line_4972"></a></li>
<li id="line_4973" class="odd"><span class="lineNumber">&nbsp;4973&nbsp;</span>});<a name="line_4973"></a></li>
<li id="line_4974" class="even"><span class="lineNumber">&nbsp;4974&nbsp;</span><a name="line_4974"></a></li>
<li id="line_4975" class="odd"><span class="lineNumber">&nbsp;4975&nbsp;</span>;;<a name="line_4975"></a></li>
<li id="line_4976" class="even"><span class="lineNumber">&nbsp;4976&nbsp;</span><a name="line_4976"></a></li>
<li id="line_4977" class="odd"><span class="lineNumber">&nbsp;4977&nbsp;</span>/*&nbsp;Event-rendering&nbsp;methods&nbsp;for&nbsp;the&nbsp;DayGrid&nbsp;class<a name="line_4977"></a></li>
<li id="line_4978" class="even"><span class="lineNumber">&nbsp;4978&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_4978"></a></li>
<li id="line_4979" class="odd"><span class="lineNumber">&nbsp;4979&nbsp;</span><a name="line_4979"></a></li>
<li id="line_4980" class="even"><span class="lineNumber">&nbsp;4980&nbsp;</span>DayGrid.mixin({<a name="line_4980"></a></li>
<li id="line_4981" class="odd"><span class="lineNumber">&nbsp;4981&nbsp;</span><a name="line_4981"></a></li>
<li id="line_4982" class="even"><span class="lineNumber">&nbsp;4982&nbsp;</span>	rowStructs:&nbsp;null,&nbsp;//&nbsp;an&nbsp;array&nbsp;of&nbsp;objects,&nbsp;each&nbsp;holding&nbsp;information&nbsp;about&nbsp;a&nbsp;row's&nbsp;foreground&nbsp;event-rendering<a name="line_4982"></a></li>
<li id="line_4983" class="odd"><span class="lineNumber">&nbsp;4983&nbsp;</span><a name="line_4983"></a></li>
<li id="line_4984" class="even"><span class="lineNumber">&nbsp;4984&nbsp;</span><a name="line_4984"></a></li>
<li id="line_4985" class="odd"><span class="lineNumber">&nbsp;4985&nbsp;</span>	//&nbsp;Unrenders&nbsp;all&nbsp;events&nbsp;currently&nbsp;rendered&nbsp;on&nbsp;the&nbsp;grid<a name="line_4985"></a></li>
<li id="line_4986" class="even"><span class="lineNumber">&nbsp;4986&nbsp;</span>	unrenderEvents:&nbsp;function()&nbsp;{<a name="line_4986"></a></li>
<li id="line_4987" class="odd"><span class="lineNumber">&nbsp;4987&nbsp;</span>		this.removeSegPopover();&nbsp;//&nbsp;removes&nbsp;the&nbsp;"more.."&nbsp;events&nbsp;popover<a name="line_4987"></a></li>
<li id="line_4988" class="even"><span class="lineNumber">&nbsp;4988&nbsp;</span>		Grid.prototype.unrenderEvents.apply(this,&nbsp;arguments);&nbsp;//&nbsp;calls&nbsp;the&nbsp;super-method<a name="line_4988"></a></li>
<li id="line_4989" class="odd"><span class="lineNumber">&nbsp;4989&nbsp;</span>	},<a name="line_4989"></a></li>
<li id="line_4990" class="even"><span class="lineNumber">&nbsp;4990&nbsp;</span><a name="line_4990"></a></li>
<li id="line_4991" class="odd"><span class="lineNumber">&nbsp;4991&nbsp;</span><a name="line_4991"></a></li>
<li id="line_4992" class="even"><span class="lineNumber">&nbsp;4992&nbsp;</span>	//&nbsp;Retrieves&nbsp;all&nbsp;rendered&nbsp;segment&nbsp;objects&nbsp;currently&nbsp;rendered&nbsp;on&nbsp;the&nbsp;grid<a name="line_4992"></a></li>
<li id="line_4993" class="odd"><span class="lineNumber">&nbsp;4993&nbsp;</span>	getEventSegs:&nbsp;function()&nbsp;{<a name="line_4993"></a></li>
<li id="line_4994" class="even"><span class="lineNumber">&nbsp;4994&nbsp;</span>		return&nbsp;Grid.prototype.getEventSegs.call(this)&nbsp;//&nbsp;get&nbsp;the&nbsp;segments&nbsp;from&nbsp;the&nbsp;super-method<a name="line_4994"></a></li>
<li id="line_4995" class="odd"><span class="lineNumber">&nbsp;4995&nbsp;</span>			.concat(this.popoverSegs&nbsp;||&nbsp;[]);&nbsp;//&nbsp;append&nbsp;the&nbsp;segments&nbsp;from&nbsp;the&nbsp;"more..."&nbsp;popover<a name="line_4995"></a></li>
<li id="line_4996" class="even"><span class="lineNumber">&nbsp;4996&nbsp;</span>	},<a name="line_4996"></a></li>
<li id="line_4997" class="odd"><span class="lineNumber">&nbsp;4997&nbsp;</span><a name="line_4997"></a></li>
<li id="line_4998" class="even"><span class="lineNumber">&nbsp;4998&nbsp;</span><a name="line_4998"></a></li>
<li id="line_4999" class="odd"><span class="lineNumber">&nbsp;4999&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;given&nbsp;background&nbsp;event&nbsp;segments&nbsp;onto&nbsp;the&nbsp;grid<a name="line_4999"></a></li>
<li id="line_5000" class="even"><span class="lineNumber">&nbsp;5000&nbsp;</span>	renderBgSegs:&nbsp;function(segs)&nbsp;{<a name="line_5000"></a></li>
<li id="line_5001" class="odd"><span class="lineNumber">&nbsp;5001&nbsp;</span><a name="line_5001"></a></li>
<li id="line_5002" class="even"><span class="lineNumber">&nbsp;5002&nbsp;</span>		//&nbsp;don't&nbsp;render&nbsp;timed&nbsp;background&nbsp;events<a name="line_5002"></a></li>
<li id="line_5003" class="odd"><span class="lineNumber">&nbsp;5003&nbsp;</span>		var&nbsp;allDaySegs&nbsp;=&nbsp;$.grep(segs,&nbsp;function(seg)&nbsp;{<a name="line_5003"></a></li>
<li id="line_5004" class="even"><span class="lineNumber">&nbsp;5004&nbsp;</span>			return&nbsp;seg.event.allDay;<a name="line_5004"></a></li>
<li id="line_5005" class="odd"><span class="lineNumber">&nbsp;5005&nbsp;</span>		});<a name="line_5005"></a></li>
<li id="line_5006" class="even"><span class="lineNumber">&nbsp;5006&nbsp;</span><a name="line_5006"></a></li>
<li id="line_5007" class="odd"><span class="lineNumber">&nbsp;5007&nbsp;</span>		return&nbsp;Grid.prototype.renderBgSegs.call(this,&nbsp;allDaySegs);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-method<a name="line_5007"></a></li>
<li id="line_5008" class="even"><span class="lineNumber">&nbsp;5008&nbsp;</span>	},<a name="line_5008"></a></li>
<li id="line_5009" class="odd"><span class="lineNumber">&nbsp;5009&nbsp;</span><a name="line_5009"></a></li>
<li id="line_5010" class="even"><span class="lineNumber">&nbsp;5010&nbsp;</span><a name="line_5010"></a></li>
<li id="line_5011" class="odd"><span class="lineNumber">&nbsp;5011&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;given&nbsp;foreground&nbsp;event&nbsp;segments&nbsp;onto&nbsp;the&nbsp;grid<a name="line_5011"></a></li>
<li id="line_5012" class="even"><span class="lineNumber">&nbsp;5012&nbsp;</span>	renderFgSegs:&nbsp;function(segs)&nbsp;{<a name="line_5012"></a></li>
<li id="line_5013" class="odd"><span class="lineNumber">&nbsp;5013&nbsp;</span>		var&nbsp;rowStructs;<a name="line_5013"></a></li>
<li id="line_5014" class="even"><span class="lineNumber">&nbsp;5014&nbsp;</span><a name="line_5014"></a></li>
<li id="line_5015" class="odd"><span class="lineNumber">&nbsp;5015&nbsp;</span>		//&nbsp;render&nbsp;an&nbsp;`.el`&nbsp;on&nbsp;each&nbsp;seg<a name="line_5015"></a></li>
<li id="line_5016" class="even"><span class="lineNumber">&nbsp;5016&nbsp;</span>		//&nbsp;returns&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;segs.&nbsp;segs&nbsp;that&nbsp;were&nbsp;actually&nbsp;rendered<a name="line_5016"></a></li>
<li id="line_5017" class="odd"><span class="lineNumber">&nbsp;5017&nbsp;</span>		segs&nbsp;=&nbsp;this.renderFgSegEls(segs);<a name="line_5017"></a></li>
<li id="line_5018" class="even"><span class="lineNumber">&nbsp;5018&nbsp;</span><a name="line_5018"></a></li>
<li id="line_5019" class="odd"><span class="lineNumber">&nbsp;5019&nbsp;</span>		rowStructs&nbsp;=&nbsp;this.rowStructs&nbsp;=&nbsp;this.renderSegRows(segs);<a name="line_5019"></a></li>
<li id="line_5020" class="even"><span class="lineNumber">&nbsp;5020&nbsp;</span><a name="line_5020"></a></li>
<li id="line_5021" class="odd"><span class="lineNumber">&nbsp;5021&nbsp;</span>		//&nbsp;append&nbsp;to&nbsp;each&nbsp;row's&nbsp;content&nbsp;skeleton<a name="line_5021"></a></li>
<li id="line_5022" class="even"><span class="lineNumber">&nbsp;5022&nbsp;</span>		this.rowEls.each(function(i,&nbsp;rowNode)&nbsp;{<a name="line_5022"></a></li>
<li id="line_5023" class="odd"><span class="lineNumber">&nbsp;5023&nbsp;</span>			$(rowNode).find('.fc-content-skeleton&nbsp;&gt;&nbsp;table').append(<a name="line_5023"></a></li>
<li id="line_5024" class="even"><span class="lineNumber">&nbsp;5024&nbsp;</span>				rowStructs[i].tbodyEl<a name="line_5024"></a></li>
<li id="line_5025" class="odd"><span class="lineNumber">&nbsp;5025&nbsp;</span>			);<a name="line_5025"></a></li>
<li id="line_5026" class="even"><span class="lineNumber">&nbsp;5026&nbsp;</span>		});<a name="line_5026"></a></li>
<li id="line_5027" class="odd"><span class="lineNumber">&nbsp;5027&nbsp;</span><a name="line_5027"></a></li>
<li id="line_5028" class="even"><span class="lineNumber">&nbsp;5028&nbsp;</span>		return&nbsp;segs;&nbsp;//&nbsp;return&nbsp;only&nbsp;the&nbsp;segs&nbsp;that&nbsp;were&nbsp;actually&nbsp;rendered<a name="line_5028"></a></li>
<li id="line_5029" class="odd"><span class="lineNumber">&nbsp;5029&nbsp;</span>	},<a name="line_5029"></a></li>
<li id="line_5030" class="even"><span class="lineNumber">&nbsp;5030&nbsp;</span><a name="line_5030"></a></li>
<li id="line_5031" class="odd"><span class="lineNumber">&nbsp;5031&nbsp;</span><a name="line_5031"></a></li>
<li id="line_5032" class="even"><span class="lineNumber">&nbsp;5032&nbsp;</span>	//&nbsp;Unrenders&nbsp;all&nbsp;currently&nbsp;rendered&nbsp;foreground&nbsp;event&nbsp;segments<a name="line_5032"></a></li>
<li id="line_5033" class="odd"><span class="lineNumber">&nbsp;5033&nbsp;</span>	unrenderFgSegs:&nbsp;function()&nbsp;{<a name="line_5033"></a></li>
<li id="line_5034" class="even"><span class="lineNumber">&nbsp;5034&nbsp;</span>		var&nbsp;rowStructs&nbsp;=&nbsp;this.rowStructs&nbsp;||&nbsp;[];<a name="line_5034"></a></li>
<li id="line_5035" class="odd"><span class="lineNumber">&nbsp;5035&nbsp;</span>		var&nbsp;rowStruct;<a name="line_5035"></a></li>
<li id="line_5036" class="even"><span class="lineNumber">&nbsp;5036&nbsp;</span><a name="line_5036"></a></li>
<li id="line_5037" class="odd"><span class="lineNumber">&nbsp;5037&nbsp;</span>		while&nbsp;((rowStruct&nbsp;=&nbsp;rowStructs.pop()))&nbsp;{<a name="line_5037"></a></li>
<li id="line_5038" class="even"><span class="lineNumber">&nbsp;5038&nbsp;</span>			rowStruct.tbodyEl.remove();<a name="line_5038"></a></li>
<li id="line_5039" class="odd"><span class="lineNumber">&nbsp;5039&nbsp;</span>		}<a name="line_5039"></a></li>
<li id="line_5040" class="even"><span class="lineNumber">&nbsp;5040&nbsp;</span><a name="line_5040"></a></li>
<li id="line_5041" class="odd"><span class="lineNumber">&nbsp;5041&nbsp;</span>		this.rowStructs&nbsp;=&nbsp;null;<a name="line_5041"></a></li>
<li id="line_5042" class="even"><span class="lineNumber">&nbsp;5042&nbsp;</span>	},<a name="line_5042"></a></li>
<li id="line_5043" class="odd"><span class="lineNumber">&nbsp;5043&nbsp;</span><a name="line_5043"></a></li>
<li id="line_5044" class="even"><span class="lineNumber">&nbsp;5044&nbsp;</span><a name="line_5044"></a></li>
<li id="line_5045" class="odd"><span class="lineNumber">&nbsp;5045&nbsp;</span>	//&nbsp;Uses&nbsp;the&nbsp;given&nbsp;events&nbsp;array&nbsp;to&nbsp;generate&nbsp;&lt;tbody&gt;&nbsp;elements&nbsp;that&nbsp;should&nbsp;be&nbsp;appended&nbsp;to&nbsp;each&nbsp;row's&nbsp;content&nbsp;skeleton.<a name="line_5045"></a></li>
<li id="line_5046" class="even"><span class="lineNumber">&nbsp;5046&nbsp;</span>	//&nbsp;Returns&nbsp;an&nbsp;array&nbsp;of&nbsp;rowStruct&nbsp;objects&nbsp;(see&nbsp;the&nbsp;bottom&nbsp;of&nbsp;`renderSegRow`).<a name="line_5046"></a></li>
<li id="line_5047" class="odd"><span class="lineNumber">&nbsp;5047&nbsp;</span>	//&nbsp;PRECONDITION:&nbsp;each&nbsp;segment&nbsp;shoud&nbsp;already&nbsp;have&nbsp;a&nbsp;rendered&nbsp;and&nbsp;assigned&nbsp;`.el`<a name="line_5047"></a></li>
<li id="line_5048" class="even"><span class="lineNumber">&nbsp;5048&nbsp;</span>	renderSegRows:&nbsp;function(segs)&nbsp;{<a name="line_5048"></a></li>
<li id="line_5049" class="odd"><span class="lineNumber">&nbsp;5049&nbsp;</span>		var&nbsp;rowStructs&nbsp;=&nbsp;[];<a name="line_5049"></a></li>
<li id="line_5050" class="even"><span class="lineNumber">&nbsp;5050&nbsp;</span>		var&nbsp;segRows;<a name="line_5050"></a></li>
<li id="line_5051" class="odd"><span class="lineNumber">&nbsp;5051&nbsp;</span>		var&nbsp;row;<a name="line_5051"></a></li>
<li id="line_5052" class="even"><span class="lineNumber">&nbsp;5052&nbsp;</span><a name="line_5052"></a></li>
<li id="line_5053" class="odd"><span class="lineNumber">&nbsp;5053&nbsp;</span>		segRows&nbsp;=&nbsp;this.groupSegRows(segs);&nbsp;//&nbsp;group&nbsp;into&nbsp;nested&nbsp;arrays<a name="line_5053"></a></li>
<li id="line_5054" class="even"><span class="lineNumber">&nbsp;5054&nbsp;</span><a name="line_5054"></a></li>
<li id="line_5055" class="odd"><span class="lineNumber">&nbsp;5055&nbsp;</span>		//&nbsp;iterate&nbsp;each&nbsp;row&nbsp;of&nbsp;segment&nbsp;groupings<a name="line_5055"></a></li>
<li id="line_5056" class="even"><span class="lineNumber">&nbsp;5056&nbsp;</span>		for&nbsp;(row&nbsp;=&nbsp;0;&nbsp;row&nbsp;&lt;&nbsp;segRows.length;&nbsp;row++)&nbsp;{<a name="line_5056"></a></li>
<li id="line_5057" class="odd"><span class="lineNumber">&nbsp;5057&nbsp;</span>			rowStructs.push(<a name="line_5057"></a></li>
<li id="line_5058" class="even"><span class="lineNumber">&nbsp;5058&nbsp;</span>				this.renderSegRow(row,&nbsp;segRows[row])<a name="line_5058"></a></li>
<li id="line_5059" class="odd"><span class="lineNumber">&nbsp;5059&nbsp;</span>			);<a name="line_5059"></a></li>
<li id="line_5060" class="even"><span class="lineNumber">&nbsp;5060&nbsp;</span>		}<a name="line_5060"></a></li>
<li id="line_5061" class="odd"><span class="lineNumber">&nbsp;5061&nbsp;</span><a name="line_5061"></a></li>
<li id="line_5062" class="even"><span class="lineNumber">&nbsp;5062&nbsp;</span>		return&nbsp;rowStructs;<a name="line_5062"></a></li>
<li id="line_5063" class="odd"><span class="lineNumber">&nbsp;5063&nbsp;</span>	},<a name="line_5063"></a></li>
<li id="line_5064" class="even"><span class="lineNumber">&nbsp;5064&nbsp;</span><a name="line_5064"></a></li>
<li id="line_5065" class="odd"><span class="lineNumber">&nbsp;5065&nbsp;</span><a name="line_5065"></a></li>
<li id="line_5066" class="even"><span class="lineNumber">&nbsp;5066&nbsp;</span>	//&nbsp;Builds&nbsp;the&nbsp;HTML&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;the&nbsp;default&nbsp;element&nbsp;for&nbsp;an&nbsp;individual&nbsp;segment<a name="line_5066"></a></li>
<li id="line_5067" class="odd"><span class="lineNumber">&nbsp;5067&nbsp;</span>	fgSegHtml:&nbsp;function(seg,&nbsp;disableResizing)&nbsp;{<a name="line_5067"></a></li>
<li id="line_5068" class="even"><span class="lineNumber">&nbsp;5068&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_5068"></a></li>
<li id="line_5069" class="odd"><span class="lineNumber">&nbsp;5069&nbsp;</span>		var&nbsp;event&nbsp;=&nbsp;seg.event;<a name="line_5069"></a></li>
<li id="line_5070" class="even"><span class="lineNumber">&nbsp;5070&nbsp;</span>		var&nbsp;isDraggable&nbsp;=&nbsp;view.isEventDraggable(event);<a name="line_5070"></a></li>
<li id="line_5071" class="odd"><span class="lineNumber">&nbsp;5071&nbsp;</span>		var&nbsp;isResizableFromStart&nbsp;=&nbsp;!disableResizing&nbsp;&amp;&amp;&nbsp;event.allDay&nbsp;&amp;&amp;<a name="line_5071"></a></li>
<li id="line_5072" class="even"><span class="lineNumber">&nbsp;5072&nbsp;</span>			seg.isStart&nbsp;&amp;&amp;&nbsp;view.isEventResizableFromStart(event);<a name="line_5072"></a></li>
<li id="line_5073" class="odd"><span class="lineNumber">&nbsp;5073&nbsp;</span>		var&nbsp;isResizableFromEnd&nbsp;=&nbsp;!disableResizing&nbsp;&amp;&amp;&nbsp;event.allDay&nbsp;&amp;&amp;<a name="line_5073"></a></li>
<li id="line_5074" class="even"><span class="lineNumber">&nbsp;5074&nbsp;</span>			seg.isEnd&nbsp;&amp;&amp;&nbsp;view.isEventResizableFromEnd(event);<a name="line_5074"></a></li>
<li id="line_5075" class="odd"><span class="lineNumber">&nbsp;5075&nbsp;</span>		var&nbsp;classes&nbsp;=&nbsp;this.getSegClasses(seg,&nbsp;isDraggable,&nbsp;isResizableFromStart&nbsp;||&nbsp;isResizableFromEnd);<a name="line_5075"></a></li>
<li id="line_5076" class="even"><span class="lineNumber">&nbsp;5076&nbsp;</span>		var&nbsp;skinCss&nbsp;=&nbsp;cssToStr(this.getEventSkinCss(event));<a name="line_5076"></a></li>
<li id="line_5077" class="odd"><span class="lineNumber">&nbsp;5077&nbsp;</span>		var&nbsp;timeHtml&nbsp;=&nbsp;'';<a name="line_5077"></a></li>
<li id="line_5078" class="even"><span class="lineNumber">&nbsp;5078&nbsp;</span>		var&nbsp;timeText;<a name="line_5078"></a></li>
<li id="line_5079" class="odd"><span class="lineNumber">&nbsp;5079&nbsp;</span>		var&nbsp;titleHtml;<a name="line_5079"></a></li>
<li id="line_5080" class="even"><span class="lineNumber">&nbsp;5080&nbsp;</span><a name="line_5080"></a></li>
<li id="line_5081" class="odd"><span class="lineNumber">&nbsp;5081&nbsp;</span>		classes.unshift('fc-day-grid-event',&nbsp;'fc-h-event');<a name="line_5081"></a></li>
<li id="line_5082" class="even"><span class="lineNumber">&nbsp;5082&nbsp;</span><a name="line_5082"></a></li>
<li id="line_5083" class="odd"><span class="lineNumber">&nbsp;5083&nbsp;</span>		//&nbsp;Only&nbsp;display&nbsp;a&nbsp;timed&nbsp;events&nbsp;time&nbsp;if&nbsp;it&nbsp;is&nbsp;the&nbsp;starting&nbsp;segment<a name="line_5083"></a></li>
<li id="line_5084" class="even"><span class="lineNumber">&nbsp;5084&nbsp;</span>		if&nbsp;(seg.isStart)&nbsp;{<a name="line_5084"></a></li>
<li id="line_5085" class="odd"><span class="lineNumber">&nbsp;5085&nbsp;</span>			timeText&nbsp;=&nbsp;this.getEventTimeText(event);<a name="line_5085"></a></li>
<li id="line_5086" class="even"><span class="lineNumber">&nbsp;5086&nbsp;</span>			//if&nbsp;(timeText)&nbsp;{<a name="line_5086"></a></li>
<li id="line_5087" class="odd"><span class="lineNumber">&nbsp;5087&nbsp;</span>			//	timeHtml&nbsp;=&nbsp;'&lt;span&nbsp;class="fc-time"&gt;'&nbsp;+&nbsp;htmlEscape(timeText)&nbsp;+&nbsp;'&lt;/span&gt;';<a name="line_5087"></a></li>
<li id="line_5088" class="even"><span class="lineNumber">&nbsp;5088&nbsp;</span>			//}<a name="line_5088"></a></li>
<li id="line_5089" class="odd"><span class="lineNumber">&nbsp;5089&nbsp;</span>		}<a name="line_5089"></a></li>
<li id="line_5090" class="even"><span class="lineNumber">&nbsp;5090&nbsp;</span><a name="line_5090"></a></li>
<li id="line_5091" class="odd"><span class="lineNumber">&nbsp;5091&nbsp;</span>		titleHtml&nbsp;=<a name="line_5091"></a></li>
<li id="line_5092" class="even"><span class="lineNumber">&nbsp;5092&nbsp;</span>			'&lt;span&nbsp;class="fc-title"&gt;'&nbsp;+<a name="line_5092"></a></li>
<li id="line_5093" class="odd"><span class="lineNumber">&nbsp;5093&nbsp;</span>				(htmlEscape(event.title&nbsp;||&nbsp;'')&nbsp;||&nbsp;'&amp;nbsp;')&nbsp;+&nbsp;//&nbsp;we&nbsp;always&nbsp;want&nbsp;one&nbsp;line&nbsp;of&nbsp;height<a name="line_5093"></a></li>
<li id="line_5094" class="even"><span class="lineNumber">&nbsp;5094&nbsp;</span>			'&lt;/span&gt;';<a name="line_5094"></a></li>
<li id="line_5095" class="odd"><span class="lineNumber">&nbsp;5095&nbsp;</span>		<a name="line_5095"></a></li>
<li id="line_5096" class="even"><span class="lineNumber">&nbsp;5096&nbsp;</span>		return&nbsp;'&lt;a&nbsp;class="'&nbsp;+&nbsp;classes.join('&nbsp;')&nbsp;+&nbsp;'"'&nbsp;+<a name="line_5096"></a></li>
<li id="line_5097" class="odd"><span class="lineNumber">&nbsp;5097&nbsp;</span>				(event.url&nbsp;?<a name="line_5097"></a></li>
<li id="line_5098" class="even"><span class="lineNumber">&nbsp;5098&nbsp;</span>					'&nbsp;href="'&nbsp;+&nbsp;htmlEscape(event.url)&nbsp;+&nbsp;'"'&nbsp;:<a name="line_5098"></a></li>
<li id="line_5099" class="odd"><span class="lineNumber">&nbsp;5099&nbsp;</span>					''<a name="line_5099"></a></li>
<li id="line_5100" class="even"><span class="lineNumber">&nbsp;5100&nbsp;</span>					)&nbsp;+<a name="line_5100"></a></li>
<li id="line_5101" class="odd"><span class="lineNumber">&nbsp;5101&nbsp;</span>				(skinCss&nbsp;?<a name="line_5101"></a></li>
<li id="line_5102" class="even"><span class="lineNumber">&nbsp;5102&nbsp;</span>					'&nbsp;style="'&nbsp;+&nbsp;skinCss&nbsp;+&nbsp;'"'&nbsp;:<a name="line_5102"></a></li>
<li id="line_5103" class="odd"><span class="lineNumber">&nbsp;5103&nbsp;</span>					''<a name="line_5103"></a></li>
<li id="line_5104" class="even"><span class="lineNumber">&nbsp;5104&nbsp;</span>					)&nbsp;+<a name="line_5104"></a></li>
<li id="line_5105" class="odd"><span class="lineNumber">&nbsp;5105&nbsp;</span>			'&gt;'&nbsp;+<a name="line_5105"></a></li>
<li id="line_5106" class="even"><span class="lineNumber">&nbsp;5106&nbsp;</span>				'&lt;div&nbsp;class="fc-content"&gt;'&nbsp;+<a name="line_5106"></a></li>
<li id="line_5107" class="odd"><span class="lineNumber">&nbsp;5107&nbsp;</span>					(this.isRTL&nbsp;?<a name="line_5107"></a></li>
<li id="line_5108" class="even"><span class="lineNumber">&nbsp;5108&nbsp;</span>						titleHtml&nbsp;+&nbsp;'&nbsp;'&nbsp;+&nbsp;timeHtml&nbsp;:&nbsp;//&nbsp;put&nbsp;a&nbsp;natural&nbsp;space&nbsp;in&nbsp;between<a name="line_5108"></a></li>
<li id="line_5109" class="odd"><span class="lineNumber">&nbsp;5109&nbsp;</span>						timeHtml&nbsp;+&nbsp;'&nbsp;'&nbsp;+&nbsp;titleHtml&nbsp;&nbsp;&nbsp;//<a name="line_5109"></a></li>
<li id="line_5110" class="even"><span class="lineNumber">&nbsp;5110&nbsp;</span>						)&nbsp;+<a name="line_5110"></a></li>
<li id="line_5111" class="odd"><span class="lineNumber">&nbsp;5111&nbsp;</span>				'&lt;/div&gt;'&nbsp;+<a name="line_5111"></a></li>
<li id="line_5112" class="even"><span class="lineNumber">&nbsp;5112&nbsp;</span>				(isResizableFromStart&nbsp;?<a name="line_5112"></a></li>
<li id="line_5113" class="odd"><span class="lineNumber">&nbsp;5113&nbsp;</span>					'&lt;div&nbsp;class="fc-resizer&nbsp;fc-start-resizer"&nbsp;/&gt;'&nbsp;:<a name="line_5113"></a></li>
<li id="line_5114" class="even"><span class="lineNumber">&nbsp;5114&nbsp;</span>					''<a name="line_5114"></a></li>
<li id="line_5115" class="odd"><span class="lineNumber">&nbsp;5115&nbsp;</span>					)&nbsp;+<a name="line_5115"></a></li>
<li id="line_5116" class="even"><span class="lineNumber">&nbsp;5116&nbsp;</span>				(isResizableFromEnd&nbsp;?<a name="line_5116"></a></li>
<li id="line_5117" class="odd"><span class="lineNumber">&nbsp;5117&nbsp;</span>					'&lt;div&nbsp;class="fc-resizer&nbsp;fc-end-resizer"&nbsp;/&gt;'&nbsp;:<a name="line_5117"></a></li>
<li id="line_5118" class="even"><span class="lineNumber">&nbsp;5118&nbsp;</span>					''<a name="line_5118"></a></li>
<li id="line_5119" class="odd"><span class="lineNumber">&nbsp;5119&nbsp;</span>					)&nbsp;+<a name="line_5119"></a></li>
<li id="line_5120" class="even"><span class="lineNumber">&nbsp;5120&nbsp;</span>			'&lt;/a&gt;';<a name="line_5120"></a></li>
<li id="line_5121" class="odd"><span class="lineNumber">&nbsp;5121&nbsp;</span>	},<a name="line_5121"></a></li>
<li id="line_5122" class="even"><span class="lineNumber">&nbsp;5122&nbsp;</span><a name="line_5122"></a></li>
<li id="line_5123" class="odd"><span class="lineNumber">&nbsp;5123&nbsp;</span><a name="line_5123"></a></li>
<li id="line_5124" class="even"><span class="lineNumber">&nbsp;5124&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;row&nbsp;#&nbsp;and&nbsp;an&nbsp;array&nbsp;of&nbsp;segments&nbsp;all&nbsp;in&nbsp;the&nbsp;same&nbsp;row,&nbsp;render&nbsp;a&nbsp;&lt;tbody&gt;&nbsp;element,&nbsp;a&nbsp;skeleton&nbsp;that&nbsp;contains<a name="line_5124"></a></li>
<li id="line_5125" class="odd"><span class="lineNumber">&nbsp;5125&nbsp;</span>	//&nbsp;the&nbsp;segments.&nbsp;Returns&nbsp;object&nbsp;with&nbsp;a&nbsp;bunch&nbsp;of&nbsp;internal&nbsp;data&nbsp;about&nbsp;how&nbsp;the&nbsp;render&nbsp;was&nbsp;calculated.<a name="line_5125"></a></li>
<li id="line_5126" class="even"><span class="lineNumber">&nbsp;5126&nbsp;</span>	//&nbsp;NOTE:&nbsp;modifies&nbsp;rowSegs<a name="line_5126"></a></li>
<li id="line_5127" class="odd"><span class="lineNumber">&nbsp;5127&nbsp;</span>	renderSegRow:&nbsp;function(row,&nbsp;rowSegs)&nbsp;{<a name="line_5127"></a></li>
<li id="line_5128" class="even"><span class="lineNumber">&nbsp;5128&nbsp;</span>		var&nbsp;colCnt&nbsp;=&nbsp;this.colCnt;<a name="line_5128"></a></li>
<li id="line_5129" class="odd"><span class="lineNumber">&nbsp;5129&nbsp;</span>		var&nbsp;segLevels&nbsp;=&nbsp;this.buildSegLevels(rowSegs);&nbsp;//&nbsp;group&nbsp;into&nbsp;sub-arrays&nbsp;of&nbsp;levels<a name="line_5129"></a></li>
<li id="line_5130" class="even"><span class="lineNumber">&nbsp;5130&nbsp;</span>		var&nbsp;levelCnt&nbsp;=&nbsp;Math.max(1,&nbsp;segLevels.length);&nbsp;//&nbsp;ensure&nbsp;at&nbsp;least&nbsp;one&nbsp;level<a name="line_5130"></a></li>
<li id="line_5131" class="odd"><span class="lineNumber">&nbsp;5131&nbsp;</span>		var&nbsp;tbody&nbsp;=&nbsp;$('&lt;tbody/&gt;');<a name="line_5131"></a></li>
<li id="line_5132" class="even"><span class="lineNumber">&nbsp;5132&nbsp;</span>		var&nbsp;segMatrix&nbsp;=&nbsp;[];&nbsp;//&nbsp;lookup&nbsp;for&nbsp;which&nbsp;segments&nbsp;are&nbsp;rendered&nbsp;into&nbsp;which&nbsp;level+col&nbsp;cells<a name="line_5132"></a></li>
<li id="line_5133" class="odd"><span class="lineNumber">&nbsp;5133&nbsp;</span>		var&nbsp;cellMatrix&nbsp;=&nbsp;[];&nbsp;//&nbsp;lookup&nbsp;for&nbsp;all&nbsp;&lt;td&gt;&nbsp;elements&nbsp;of&nbsp;the&nbsp;level+col&nbsp;matrix<a name="line_5133"></a></li>
<li id="line_5134" class="even"><span class="lineNumber">&nbsp;5134&nbsp;</span>		var&nbsp;loneCellMatrix&nbsp;=&nbsp;[];&nbsp;//&nbsp;lookup&nbsp;for&nbsp;&lt;td&gt;&nbsp;elements&nbsp;that&nbsp;only&nbsp;take&nbsp;up&nbsp;a&nbsp;single&nbsp;column<a name="line_5134"></a></li>
<li id="line_5135" class="odd"><span class="lineNumber">&nbsp;5135&nbsp;</span>		var&nbsp;i,&nbsp;levelSegs;<a name="line_5135"></a></li>
<li id="line_5136" class="even"><span class="lineNumber">&nbsp;5136&nbsp;</span>		var&nbsp;col;<a name="line_5136"></a></li>
<li id="line_5137" class="odd"><span class="lineNumber">&nbsp;5137&nbsp;</span>		var&nbsp;tr;<a name="line_5137"></a></li>
<li id="line_5138" class="even"><span class="lineNumber">&nbsp;5138&nbsp;</span>		var&nbsp;j,&nbsp;seg;<a name="line_5138"></a></li>
<li id="line_5139" class="odd"><span class="lineNumber">&nbsp;5139&nbsp;</span>		var&nbsp;td;<a name="line_5139"></a></li>
<li id="line_5140" class="even"><span class="lineNumber">&nbsp;5140&nbsp;</span><a name="line_5140"></a></li>
<li id="line_5141" class="odd"><span class="lineNumber">&nbsp;5141&nbsp;</span>		//&nbsp;populates&nbsp;empty&nbsp;cells&nbsp;from&nbsp;the&nbsp;current&nbsp;column&nbsp;(`col`)&nbsp;to&nbsp;`endCol`<a name="line_5141"></a></li>
<li id="line_5142" class="even"><span class="lineNumber">&nbsp;5142&nbsp;</span>		function&nbsp;emptyCellsUntil(endCol)&nbsp;{<a name="line_5142"></a></li>
<li id="line_5143" class="odd"><span class="lineNumber">&nbsp;5143&nbsp;</span>			while&nbsp;(col&nbsp;&lt;&nbsp;endCol)&nbsp;{<a name="line_5143"></a></li>
<li id="line_5144" class="even"><span class="lineNumber">&nbsp;5144&nbsp;</span>				//&nbsp;try&nbsp;to&nbsp;grab&nbsp;a&nbsp;cell&nbsp;from&nbsp;the&nbsp;level&nbsp;above&nbsp;and&nbsp;extend&nbsp;its&nbsp;rowspan.&nbsp;otherwise,&nbsp;create&nbsp;a&nbsp;fresh&nbsp;cell<a name="line_5144"></a></li>
<li id="line_5145" class="odd"><span class="lineNumber">&nbsp;5145&nbsp;</span>				td&nbsp;=&nbsp;(loneCellMatrix[i&nbsp;-&nbsp;1]&nbsp;||&nbsp;[])[col];<a name="line_5145"></a></li>
<li id="line_5146" class="even"><span class="lineNumber">&nbsp;5146&nbsp;</span>				if&nbsp;(td)&nbsp;{<a name="line_5146"></a></li>
<li id="line_5147" class="odd"><span class="lineNumber">&nbsp;5147&nbsp;</span>					td.attr(<a name="line_5147"></a></li>
<li id="line_5148" class="even"><span class="lineNumber">&nbsp;5148&nbsp;</span>						'rowspan',<a name="line_5148"></a></li>
<li id="line_5149" class="odd"><span class="lineNumber">&nbsp;5149&nbsp;</span>						parseInt(td.attr('rowspan')&nbsp;||&nbsp;1,&nbsp;10)&nbsp;+&nbsp;1<a name="line_5149"></a></li>
<li id="line_5150" class="even"><span class="lineNumber">&nbsp;5150&nbsp;</span>					);<a name="line_5150"></a></li>
<li id="line_5151" class="odd"><span class="lineNumber">&nbsp;5151&nbsp;</span>				}<a name="line_5151"></a></li>
<li id="line_5152" class="even"><span class="lineNumber">&nbsp;5152&nbsp;</span>				else&nbsp;{<a name="line_5152"></a></li>
<li id="line_5153" class="odd"><span class="lineNumber">&nbsp;5153&nbsp;</span>					td&nbsp;=&nbsp;$('&lt;td/&gt;');<a name="line_5153"></a></li>
<li id="line_5154" class="even"><span class="lineNumber">&nbsp;5154&nbsp;</span>					tr.append(td);<a name="line_5154"></a></li>
<li id="line_5155" class="odd"><span class="lineNumber">&nbsp;5155&nbsp;</span>				}<a name="line_5155"></a></li>
<li id="line_5156" class="even"><span class="lineNumber">&nbsp;5156&nbsp;</span>				cellMatrix[i][col]&nbsp;=&nbsp;td;<a name="line_5156"></a></li>
<li id="line_5157" class="odd"><span class="lineNumber">&nbsp;5157&nbsp;</span>				loneCellMatrix[i][col]&nbsp;=&nbsp;td;<a name="line_5157"></a></li>
<li id="line_5158" class="even"><span class="lineNumber">&nbsp;5158&nbsp;</span>				col++;<a name="line_5158"></a></li>
<li id="line_5159" class="odd"><span class="lineNumber">&nbsp;5159&nbsp;</span>			}<a name="line_5159"></a></li>
<li id="line_5160" class="even"><span class="lineNumber">&nbsp;5160&nbsp;</span>		}<a name="line_5160"></a></li>
<li id="line_5161" class="odd"><span class="lineNumber">&nbsp;5161&nbsp;</span><a name="line_5161"></a></li>
<li id="line_5162" class="even"><span class="lineNumber">&nbsp;5162&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;levelCnt;&nbsp;i++)&nbsp;{&nbsp;//&nbsp;iterate&nbsp;through&nbsp;all&nbsp;levels<a name="line_5162"></a></li>
<li id="line_5163" class="odd"><span class="lineNumber">&nbsp;5163&nbsp;</span>			levelSegs&nbsp;=&nbsp;segLevels[i];<a name="line_5163"></a></li>
<li id="line_5164" class="even"><span class="lineNumber">&nbsp;5164&nbsp;</span>			col&nbsp;=&nbsp;0;<a name="line_5164"></a></li>
<li id="line_5165" class="odd"><span class="lineNumber">&nbsp;5165&nbsp;</span>			tr&nbsp;=&nbsp;$('&lt;tr/&gt;');<a name="line_5165"></a></li>
<li id="line_5166" class="even"><span class="lineNumber">&nbsp;5166&nbsp;</span><a name="line_5166"></a></li>
<li id="line_5167" class="odd"><span class="lineNumber">&nbsp;5167&nbsp;</span>			segMatrix.push([]);<a name="line_5167"></a></li>
<li id="line_5168" class="even"><span class="lineNumber">&nbsp;5168&nbsp;</span>			cellMatrix.push([]);<a name="line_5168"></a></li>
<li id="line_5169" class="odd"><span class="lineNumber">&nbsp;5169&nbsp;</span>			loneCellMatrix.push([]);<a name="line_5169"></a></li>
<li id="line_5170" class="even"><span class="lineNumber">&nbsp;5170&nbsp;</span><a name="line_5170"></a></li>
<li id="line_5171" class="odd"><span class="lineNumber">&nbsp;5171&nbsp;</span>			//&nbsp;levelCnt&nbsp;might&nbsp;be&nbsp;1&nbsp;even&nbsp;though&nbsp;there&nbsp;are&nbsp;no&nbsp;actual&nbsp;levels.&nbsp;protect&nbsp;against&nbsp;this.<a name="line_5171"></a></li>
<li id="line_5172" class="even"><span class="lineNumber">&nbsp;5172&nbsp;</span>			//&nbsp;this&nbsp;single&nbsp;empty&nbsp;row&nbsp;is&nbsp;useful&nbsp;for&nbsp;styling.<a name="line_5172"></a></li>
<li id="line_5173" class="odd"><span class="lineNumber">&nbsp;5173&nbsp;</span>			if&nbsp;(levelSegs)&nbsp;{<a name="line_5173"></a></li>
<li id="line_5174" class="even"><span class="lineNumber">&nbsp;5174&nbsp;</span>				for&nbsp;(j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;levelSegs.length;&nbsp;j++)&nbsp;{&nbsp;//&nbsp;iterate&nbsp;through&nbsp;segments&nbsp;in&nbsp;level<a name="line_5174"></a></li>
<li id="line_5175" class="odd"><span class="lineNumber">&nbsp;5175&nbsp;</span>					seg&nbsp;=&nbsp;levelSegs[j];<a name="line_5175"></a></li>
<li id="line_5176" class="even"><span class="lineNumber">&nbsp;5176&nbsp;</span><a name="line_5176"></a></li>
<li id="line_5177" class="odd"><span class="lineNumber">&nbsp;5177&nbsp;</span>					emptyCellsUntil(seg.leftCol);<a name="line_5177"></a></li>
<li id="line_5178" class="even"><span class="lineNumber">&nbsp;5178&nbsp;</span><a name="line_5178"></a></li>
<li id="line_5179" class="odd"><span class="lineNumber">&nbsp;5179&nbsp;</span>					//&nbsp;create&nbsp;a&nbsp;container&nbsp;that&nbsp;occupies&nbsp;or&nbsp;more&nbsp;columns.&nbsp;append&nbsp;the&nbsp;event&nbsp;element.<a name="line_5179"></a></li>
<li id="line_5180" class="even"><span class="lineNumber">&nbsp;5180&nbsp;</span>					td&nbsp;=&nbsp;$('&lt;td&nbsp;class="fc-event-container"/&gt;').append(seg.el);<a name="line_5180"></a></li>
<li id="line_5181" class="odd"><span class="lineNumber">&nbsp;5181&nbsp;</span>					if&nbsp;(seg.leftCol&nbsp;!=&nbsp;seg.rightCol)&nbsp;{<a name="line_5181"></a></li>
<li id="line_5182" class="even"><span class="lineNumber">&nbsp;5182&nbsp;</span>						td.attr('colspan',&nbsp;seg.rightCol&nbsp;-&nbsp;seg.leftCol&nbsp;+&nbsp;1);<a name="line_5182"></a></li>
<li id="line_5183" class="odd"><span class="lineNumber">&nbsp;5183&nbsp;</span>					}<a name="line_5183"></a></li>
<li id="line_5184" class="even"><span class="lineNumber">&nbsp;5184&nbsp;</span>					else&nbsp;{&nbsp;//&nbsp;a&nbsp;single-column&nbsp;segment<a name="line_5184"></a></li>
<li id="line_5185" class="odd"><span class="lineNumber">&nbsp;5185&nbsp;</span>						loneCellMatrix[i][col]&nbsp;=&nbsp;td;<a name="line_5185"></a></li>
<li id="line_5186" class="even"><span class="lineNumber">&nbsp;5186&nbsp;</span>					}<a name="line_5186"></a></li>
<li id="line_5187" class="odd"><span class="lineNumber">&nbsp;5187&nbsp;</span><a name="line_5187"></a></li>
<li id="line_5188" class="even"><span class="lineNumber">&nbsp;5188&nbsp;</span>					while&nbsp;(col&nbsp;&lt;=&nbsp;seg.rightCol)&nbsp;{<a name="line_5188"></a></li>
<li id="line_5189" class="odd"><span class="lineNumber">&nbsp;5189&nbsp;</span>						cellMatrix[i][col]&nbsp;=&nbsp;td;<a name="line_5189"></a></li>
<li id="line_5190" class="even"><span class="lineNumber">&nbsp;5190&nbsp;</span>						segMatrix[i][col]&nbsp;=&nbsp;seg;<a name="line_5190"></a></li>
<li id="line_5191" class="odd"><span class="lineNumber">&nbsp;5191&nbsp;</span>						col++;<a name="line_5191"></a></li>
<li id="line_5192" class="even"><span class="lineNumber">&nbsp;5192&nbsp;</span>					}<a name="line_5192"></a></li>
<li id="line_5193" class="odd"><span class="lineNumber">&nbsp;5193&nbsp;</span><a name="line_5193"></a></li>
<li id="line_5194" class="even"><span class="lineNumber">&nbsp;5194&nbsp;</span>					tr.append(td);<a name="line_5194"></a></li>
<li id="line_5195" class="odd"><span class="lineNumber">&nbsp;5195&nbsp;</span>				}<a name="line_5195"></a></li>
<li id="line_5196" class="even"><span class="lineNumber">&nbsp;5196&nbsp;</span>			}<a name="line_5196"></a></li>
<li id="line_5197" class="odd"><span class="lineNumber">&nbsp;5197&nbsp;</span><a name="line_5197"></a></li>
<li id="line_5198" class="even"><span class="lineNumber">&nbsp;5198&nbsp;</span>			emptyCellsUntil(colCnt);&nbsp;//&nbsp;finish&nbsp;off&nbsp;the&nbsp;row<a name="line_5198"></a></li>
<li id="line_5199" class="odd"><span class="lineNumber">&nbsp;5199&nbsp;</span>			this.bookendCells(tr,&nbsp;'eventSkeleton');<a name="line_5199"></a></li>
<li id="line_5200" class="even"><span class="lineNumber">&nbsp;5200&nbsp;</span>			tbody.append(tr);<a name="line_5200"></a></li>
<li id="line_5201" class="odd"><span class="lineNumber">&nbsp;5201&nbsp;</span>		}<a name="line_5201"></a></li>
<li id="line_5202" class="even"><span class="lineNumber">&nbsp;5202&nbsp;</span><a name="line_5202"></a></li>
<li id="line_5203" class="odd"><span class="lineNumber">&nbsp;5203&nbsp;</span>		return&nbsp;{&nbsp;//&nbsp;a&nbsp;"rowStruct"<a name="line_5203"></a></li>
<li id="line_5204" class="even"><span class="lineNumber">&nbsp;5204&nbsp;</span>			row:&nbsp;row,&nbsp;//&nbsp;the&nbsp;row&nbsp;number<a name="line_5204"></a></li>
<li id="line_5205" class="odd"><span class="lineNumber">&nbsp;5205&nbsp;</span>			tbodyEl:&nbsp;tbody,<a name="line_5205"></a></li>
<li id="line_5206" class="even"><span class="lineNumber">&nbsp;5206&nbsp;</span>			cellMatrix:&nbsp;cellMatrix,<a name="line_5206"></a></li>
<li id="line_5207" class="odd"><span class="lineNumber">&nbsp;5207&nbsp;</span>			segMatrix:&nbsp;segMatrix,<a name="line_5207"></a></li>
<li id="line_5208" class="even"><span class="lineNumber">&nbsp;5208&nbsp;</span>			segLevels:&nbsp;segLevels,<a name="line_5208"></a></li>
<li id="line_5209" class="odd"><span class="lineNumber">&nbsp;5209&nbsp;</span>			segs:&nbsp;rowSegs<a name="line_5209"></a></li>
<li id="line_5210" class="even"><span class="lineNumber">&nbsp;5210&nbsp;</span>		};<a name="line_5210"></a></li>
<li id="line_5211" class="odd"><span class="lineNumber">&nbsp;5211&nbsp;</span>	},<a name="line_5211"></a></li>
<li id="line_5212" class="even"><span class="lineNumber">&nbsp;5212&nbsp;</span><a name="line_5212"></a></li>
<li id="line_5213" class="odd"><span class="lineNumber">&nbsp;5213&nbsp;</span><a name="line_5213"></a></li>
<li id="line_5214" class="even"><span class="lineNumber">&nbsp;5214&nbsp;</span>	//&nbsp;Stacks&nbsp;a&nbsp;flat&nbsp;array&nbsp;of&nbsp;segments,&nbsp;which&nbsp;are&nbsp;all&nbsp;assumed&nbsp;to&nbsp;be&nbsp;in&nbsp;the&nbsp;same&nbsp;row,&nbsp;into&nbsp;subarrays&nbsp;of&nbsp;vertical&nbsp;levels.<a name="line_5214"></a></li>
<li id="line_5215" class="odd"><span class="lineNumber">&nbsp;5215&nbsp;</span>	//&nbsp;NOTE:&nbsp;modifies&nbsp;segs<a name="line_5215"></a></li>
<li id="line_5216" class="even"><span class="lineNumber">&nbsp;5216&nbsp;</span>	buildSegLevels:&nbsp;function(segs)&nbsp;{<a name="line_5216"></a></li>
<li id="line_5217" class="odd"><span class="lineNumber">&nbsp;5217&nbsp;</span>		var&nbsp;levels&nbsp;=&nbsp;[];<a name="line_5217"></a></li>
<li id="line_5218" class="even"><span class="lineNumber">&nbsp;5218&nbsp;</span>		var&nbsp;i,&nbsp;seg;<a name="line_5218"></a></li>
<li id="line_5219" class="odd"><span class="lineNumber">&nbsp;5219&nbsp;</span>		var&nbsp;j;<a name="line_5219"></a></li>
<li id="line_5220" class="even"><span class="lineNumber">&nbsp;5220&nbsp;</span><a name="line_5220"></a></li>
<li id="line_5221" class="odd"><span class="lineNumber">&nbsp;5221&nbsp;</span>		//&nbsp;Give&nbsp;preference&nbsp;to&nbsp;elements&nbsp;with&nbsp;certain&nbsp;criteria,&nbsp;so&nbsp;they&nbsp;have<a name="line_5221"></a></li>
<li id="line_5222" class="even"><span class="lineNumber">&nbsp;5222&nbsp;</span>		//&nbsp;a&nbsp;chance&nbsp;to&nbsp;be&nbsp;closer&nbsp;to&nbsp;the&nbsp;top.<a name="line_5222"></a></li>
<li id="line_5223" class="odd"><span class="lineNumber">&nbsp;5223&nbsp;</span>		segs.sort(compareSegs);<a name="line_5223"></a></li>
<li id="line_5224" class="even"><span class="lineNumber">&nbsp;5224&nbsp;</span>		<a name="line_5224"></a></li>
<li id="line_5225" class="odd"><span class="lineNumber">&nbsp;5225&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;segs.length;&nbsp;i++)&nbsp;{<a name="line_5225"></a></li>
<li id="line_5226" class="even"><span class="lineNumber">&nbsp;5226&nbsp;</span>			seg&nbsp;=&nbsp;segs[i];<a name="line_5226"></a></li>
<li id="line_5227" class="odd"><span class="lineNumber">&nbsp;5227&nbsp;</span><a name="line_5227"></a></li>
<li id="line_5228" class="even"><span class="lineNumber">&nbsp;5228&nbsp;</span>			//&nbsp;loop&nbsp;through&nbsp;levels,&nbsp;starting&nbsp;with&nbsp;the&nbsp;topmost,&nbsp;until&nbsp;the&nbsp;segment&nbsp;doesn't&nbsp;collide&nbsp;with&nbsp;other&nbsp;segments<a name="line_5228"></a></li>
<li id="line_5229" class="odd"><span class="lineNumber">&nbsp;5229&nbsp;</span>			for&nbsp;(j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;levels.length;&nbsp;j++)&nbsp;{<a name="line_5229"></a></li>
<li id="line_5230" class="even"><span class="lineNumber">&nbsp;5230&nbsp;</span>				if&nbsp;(!isDaySegCollision(seg,&nbsp;levels[j]))&nbsp;{<a name="line_5230"></a></li>
<li id="line_5231" class="odd"><span class="lineNumber">&nbsp;5231&nbsp;</span>					break;<a name="line_5231"></a></li>
<li id="line_5232" class="even"><span class="lineNumber">&nbsp;5232&nbsp;</span>				}<a name="line_5232"></a></li>
<li id="line_5233" class="odd"><span class="lineNumber">&nbsp;5233&nbsp;</span>			}<a name="line_5233"></a></li>
<li id="line_5234" class="even"><span class="lineNumber">&nbsp;5234&nbsp;</span>			//&nbsp;`j`&nbsp;now&nbsp;holds&nbsp;the&nbsp;desired&nbsp;subrow&nbsp;index<a name="line_5234"></a></li>
<li id="line_5235" class="odd"><span class="lineNumber">&nbsp;5235&nbsp;</span>			seg.level&nbsp;=&nbsp;j;<a name="line_5235"></a></li>
<li id="line_5236" class="even"><span class="lineNumber">&nbsp;5236&nbsp;</span><a name="line_5236"></a></li>
<li id="line_5237" class="odd"><span class="lineNumber">&nbsp;5237&nbsp;</span>			//&nbsp;create&nbsp;new&nbsp;level&nbsp;array&nbsp;if&nbsp;needed&nbsp;and&nbsp;append&nbsp;segment<a name="line_5237"></a></li>
<li id="line_5238" class="even"><span class="lineNumber">&nbsp;5238&nbsp;</span>			(levels[j]&nbsp;||&nbsp;(levels[j]&nbsp;=&nbsp;[])).push(seg);<a name="line_5238"></a></li>
<li id="line_5239" class="odd"><span class="lineNumber">&nbsp;5239&nbsp;</span>		}<a name="line_5239"></a></li>
<li id="line_5240" class="even"><span class="lineNumber">&nbsp;5240&nbsp;</span><a name="line_5240"></a></li>
<li id="line_5241" class="odd"><span class="lineNumber">&nbsp;5241&nbsp;</span>		//&nbsp;order&nbsp;segments&nbsp;left-to-right.&nbsp;very&nbsp;important&nbsp;if&nbsp;calendar&nbsp;is&nbsp;RTL<a name="line_5241"></a></li>
<li id="line_5242" class="even"><span class="lineNumber">&nbsp;5242&nbsp;</span>		for&nbsp;(j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;levels.length;&nbsp;j++)&nbsp;{<a name="line_5242"></a></li>
<li id="line_5243" class="odd"><span class="lineNumber">&nbsp;5243&nbsp;</span>			levels[j].sort(compareDaySegCols);<a name="line_5243"></a></li>
<li id="line_5244" class="even"><span class="lineNumber">&nbsp;5244&nbsp;</span>		}<a name="line_5244"></a></li>
<li id="line_5245" class="odd"><span class="lineNumber">&nbsp;5245&nbsp;</span><a name="line_5245"></a></li>
<li id="line_5246" class="even"><span class="lineNumber">&nbsp;5246&nbsp;</span>		return&nbsp;levels;<a name="line_5246"></a></li>
<li id="line_5247" class="odd"><span class="lineNumber">&nbsp;5247&nbsp;</span>	},<a name="line_5247"></a></li>
<li id="line_5248" class="even"><span class="lineNumber">&nbsp;5248&nbsp;</span><a name="line_5248"></a></li>
<li id="line_5249" class="odd"><span class="lineNumber">&nbsp;5249&nbsp;</span><a name="line_5249"></a></li>
<li id="line_5250" class="even"><span class="lineNumber">&nbsp;5250&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;flat&nbsp;array&nbsp;of&nbsp;segments,&nbsp;return&nbsp;an&nbsp;array&nbsp;of&nbsp;sub-arrays,&nbsp;grouped&nbsp;by&nbsp;each&nbsp;segment's&nbsp;row<a name="line_5250"></a></li>
<li id="line_5251" class="odd"><span class="lineNumber">&nbsp;5251&nbsp;</span>	groupSegRows:&nbsp;function(segs)&nbsp;{<a name="line_5251"></a></li>
<li id="line_5252" class="even"><span class="lineNumber">&nbsp;5252&nbsp;</span>		var&nbsp;segRows&nbsp;=&nbsp;[];<a name="line_5252"></a></li>
<li id="line_5253" class="odd"><span class="lineNumber">&nbsp;5253&nbsp;</span>		var&nbsp;i;<a name="line_5253"></a></li>
<li id="line_5254" class="even"><span class="lineNumber">&nbsp;5254&nbsp;</span><a name="line_5254"></a></li>
<li id="line_5255" class="odd"><span class="lineNumber">&nbsp;5255&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;this.rowCnt;&nbsp;i++)&nbsp;{<a name="line_5255"></a></li>
<li id="line_5256" class="even"><span class="lineNumber">&nbsp;5256&nbsp;</span>			segRows.push([]);<a name="line_5256"></a></li>
<li id="line_5257" class="odd"><span class="lineNumber">&nbsp;5257&nbsp;</span>		}<a name="line_5257"></a></li>
<li id="line_5258" class="even"><span class="lineNumber">&nbsp;5258&nbsp;</span><a name="line_5258"></a></li>
<li id="line_5259" class="odd"><span class="lineNumber">&nbsp;5259&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;segs.length;&nbsp;i++)&nbsp;{<a name="line_5259"></a></li>
<li id="line_5260" class="even"><span class="lineNumber">&nbsp;5260&nbsp;</span>			segRows[segs[i].row].push(segs[i]);<a name="line_5260"></a></li>
<li id="line_5261" class="odd"><span class="lineNumber">&nbsp;5261&nbsp;</span>		}<a name="line_5261"></a></li>
<li id="line_5262" class="even"><span class="lineNumber">&nbsp;5262&nbsp;</span><a name="line_5262"></a></li>
<li id="line_5263" class="odd"><span class="lineNumber">&nbsp;5263&nbsp;</span>		return&nbsp;segRows;<a name="line_5263"></a></li>
<li id="line_5264" class="even"><span class="lineNumber">&nbsp;5264&nbsp;</span>	}<a name="line_5264"></a></li>
<li id="line_5265" class="odd"><span class="lineNumber">&nbsp;5265&nbsp;</span><a name="line_5265"></a></li>
<li id="line_5266" class="even"><span class="lineNumber">&nbsp;5266&nbsp;</span>});<a name="line_5266"></a></li>
<li id="line_5267" class="odd"><span class="lineNumber">&nbsp;5267&nbsp;</span><a name="line_5267"></a></li>
<li id="line_5268" class="even"><span class="lineNumber">&nbsp;5268&nbsp;</span><a name="line_5268"></a></li>
<li id="line_5269" class="odd"><span class="lineNumber">&nbsp;5269&nbsp;</span>//&nbsp;Computes&nbsp;whether&nbsp;two&nbsp;segments'&nbsp;columns&nbsp;collide.&nbsp;They&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;in&nbsp;the&nbsp;same&nbsp;row.<a name="line_5269"></a></li>
<li id="line_5270" class="even"><span class="lineNumber">&nbsp;5270&nbsp;</span>function&nbsp;isDaySegCollision(seg,&nbsp;otherSegs)&nbsp;{<a name="line_5270"></a></li>
<li id="line_5271" class="odd"><span class="lineNumber">&nbsp;5271&nbsp;</span>	var&nbsp;i,&nbsp;otherSeg;<a name="line_5271"></a></li>
<li id="line_5272" class="even"><span class="lineNumber">&nbsp;5272&nbsp;</span><a name="line_5272"></a></li>
<li id="line_5273" class="odd"><span class="lineNumber">&nbsp;5273&nbsp;</span>	for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;otherSegs.length;&nbsp;i++)&nbsp;{<a name="line_5273"></a></li>
<li id="line_5274" class="even"><span class="lineNumber">&nbsp;5274&nbsp;</span>		otherSeg&nbsp;=&nbsp;otherSegs[i];<a name="line_5274"></a></li>
<li id="line_5275" class="odd"><span class="lineNumber">&nbsp;5275&nbsp;</span><a name="line_5275"></a></li>
<li id="line_5276" class="even"><span class="lineNumber">&nbsp;5276&nbsp;</span>		if&nbsp;(<a name="line_5276"></a></li>
<li id="line_5277" class="odd"><span class="lineNumber">&nbsp;5277&nbsp;</span>			otherSeg.leftCol&nbsp;&lt;=&nbsp;seg.rightCol&nbsp;&amp;&amp;<a name="line_5277"></a></li>
<li id="line_5278" class="even"><span class="lineNumber">&nbsp;5278&nbsp;</span>			otherSeg.rightCol&nbsp;&gt;=&nbsp;seg.leftCol<a name="line_5278"></a></li>
<li id="line_5279" class="odd"><span class="lineNumber">&nbsp;5279&nbsp;</span>		)&nbsp;{<a name="line_5279"></a></li>
<li id="line_5280" class="even"><span class="lineNumber">&nbsp;5280&nbsp;</span>			return&nbsp;true;<a name="line_5280"></a></li>
<li id="line_5281" class="odd"><span class="lineNumber">&nbsp;5281&nbsp;</span>		}<a name="line_5281"></a></li>
<li id="line_5282" class="even"><span class="lineNumber">&nbsp;5282&nbsp;</span>	}<a name="line_5282"></a></li>
<li id="line_5283" class="odd"><span class="lineNumber">&nbsp;5283&nbsp;</span><a name="line_5283"></a></li>
<li id="line_5284" class="even"><span class="lineNumber">&nbsp;5284&nbsp;</span>	return&nbsp;false;<a name="line_5284"></a></li>
<li id="line_5285" class="odd"><span class="lineNumber">&nbsp;5285&nbsp;</span>}<a name="line_5285"></a></li>
<li id="line_5286" class="even"><span class="lineNumber">&nbsp;5286&nbsp;</span><a name="line_5286"></a></li>
<li id="line_5287" class="odd"><span class="lineNumber">&nbsp;5287&nbsp;</span><a name="line_5287"></a></li>
<li id="line_5288" class="even"><span class="lineNumber">&nbsp;5288&nbsp;</span>//&nbsp;A&nbsp;cmp&nbsp;function&nbsp;for&nbsp;determining&nbsp;the&nbsp;leftmost&nbsp;event<a name="line_5288"></a></li>
<li id="line_5289" class="odd"><span class="lineNumber">&nbsp;5289&nbsp;</span>function&nbsp;compareDaySegCols(a,&nbsp;b)&nbsp;{<a name="line_5289"></a></li>
<li id="line_5290" class="even"><span class="lineNumber">&nbsp;5290&nbsp;</span>	return&nbsp;a.leftCol&nbsp;-&nbsp;b.leftCol;<a name="line_5290"></a></li>
<li id="line_5291" class="odd"><span class="lineNumber">&nbsp;5291&nbsp;</span>}<a name="line_5291"></a></li>
<li id="line_5292" class="even"><span class="lineNumber">&nbsp;5292&nbsp;</span><a name="line_5292"></a></li>
<li id="line_5293" class="odd"><span class="lineNumber">&nbsp;5293&nbsp;</span>;;<a name="line_5293"></a></li>
<li id="line_5294" class="even"><span class="lineNumber">&nbsp;5294&nbsp;</span><a name="line_5294"></a></li>
<li id="line_5295" class="odd"><span class="lineNumber">&nbsp;5295&nbsp;</span>/*&nbsp;Methods&nbsp;relate&nbsp;to&nbsp;limiting&nbsp;the&nbsp;number&nbsp;events&nbsp;for&nbsp;a&nbsp;given&nbsp;day&nbsp;on&nbsp;a&nbsp;DayGrid<a name="line_5295"></a></li>
<li id="line_5296" class="even"><span class="lineNumber">&nbsp;5296&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_5296"></a></li>
<li id="line_5297" class="odd"><span class="lineNumber">&nbsp;5297&nbsp;</span>//&nbsp;NOTE:&nbsp;all&nbsp;the&nbsp;segs&nbsp;being&nbsp;passed&nbsp;around&nbsp;in&nbsp;here&nbsp;are&nbsp;foreground&nbsp;segs<a name="line_5297"></a></li>
<li id="line_5298" class="even"><span class="lineNumber">&nbsp;5298&nbsp;</span><a name="line_5298"></a></li>
<li id="line_5299" class="odd"><span class="lineNumber">&nbsp;5299&nbsp;</span>DayGrid.mixin({<a name="line_5299"></a></li>
<li id="line_5300" class="even"><span class="lineNumber">&nbsp;5300&nbsp;</span><a name="line_5300"></a></li>
<li id="line_5301" class="odd"><span class="lineNumber">&nbsp;5301&nbsp;</span>	segPopover:&nbsp;null,&nbsp;//&nbsp;the&nbsp;Popover&nbsp;that&nbsp;holds&nbsp;events&nbsp;that&nbsp;can't&nbsp;fit&nbsp;in&nbsp;a&nbsp;cell.&nbsp;null&nbsp;when&nbsp;not&nbsp;visible<a name="line_5301"></a></li>
<li id="line_5302" class="even"><span class="lineNumber">&nbsp;5302&nbsp;</span>	popoverSegs:&nbsp;null,&nbsp;//&nbsp;an&nbsp;array&nbsp;of&nbsp;segment&nbsp;objects&nbsp;that&nbsp;the&nbsp;segPopover&nbsp;holds.&nbsp;null&nbsp;when&nbsp;not&nbsp;visible<a name="line_5302"></a></li>
<li id="line_5303" class="odd"><span class="lineNumber">&nbsp;5303&nbsp;</span><a name="line_5303"></a></li>
<li id="line_5304" class="even"><span class="lineNumber">&nbsp;5304&nbsp;</span><a name="line_5304"></a></li>
<li id="line_5305" class="odd"><span class="lineNumber">&nbsp;5305&nbsp;</span>	removeSegPopover:&nbsp;function()&nbsp;{<a name="line_5305"></a></li>
<li id="line_5306" class="even"><span class="lineNumber">&nbsp;5306&nbsp;</span>		if&nbsp;(this.segPopover)&nbsp;{<a name="line_5306"></a></li>
<li id="line_5307" class="odd"><span class="lineNumber">&nbsp;5307&nbsp;</span>			this.segPopover.hide();&nbsp;//&nbsp;in&nbsp;handler,&nbsp;will&nbsp;call&nbsp;segPopover's&nbsp;removeElement<a name="line_5307"></a></li>
<li id="line_5308" class="even"><span class="lineNumber">&nbsp;5308&nbsp;</span>		}<a name="line_5308"></a></li>
<li id="line_5309" class="odd"><span class="lineNumber">&nbsp;5309&nbsp;</span>	},<a name="line_5309"></a></li>
<li id="line_5310" class="even"><span class="lineNumber">&nbsp;5310&nbsp;</span><a name="line_5310"></a></li>
<li id="line_5311" class="odd"><span class="lineNumber">&nbsp;5311&nbsp;</span><a name="line_5311"></a></li>
<li id="line_5312" class="even"><span class="lineNumber">&nbsp;5312&nbsp;</span>	//&nbsp;Limits&nbsp;the&nbsp;number&nbsp;of&nbsp;"levels"&nbsp;(vertically&nbsp;stacking&nbsp;layers&nbsp;of&nbsp;events)&nbsp;for&nbsp;each&nbsp;row&nbsp;of&nbsp;the&nbsp;grid.<a name="line_5312"></a></li>
<li id="line_5313" class="odd"><span class="lineNumber">&nbsp;5313&nbsp;</span>	//&nbsp;`levelLimit`&nbsp;can&nbsp;be&nbsp;false&nbsp;(don't&nbsp;limit),&nbsp;a&nbsp;number,&nbsp;or&nbsp;true&nbsp;(should&nbsp;be&nbsp;computed).<a name="line_5313"></a></li>
<li id="line_5314" class="even"><span class="lineNumber">&nbsp;5314&nbsp;</span>	limitRows:&nbsp;function(levelLimit)&nbsp;{<a name="line_5314"></a></li>
<li id="line_5315" class="odd"><span class="lineNumber">&nbsp;5315&nbsp;</span>		var&nbsp;rowStructs&nbsp;=&nbsp;this.rowStructs&nbsp;||&nbsp;[];<a name="line_5315"></a></li>
<li id="line_5316" class="even"><span class="lineNumber">&nbsp;5316&nbsp;</span>		var&nbsp;row;&nbsp;//&nbsp;row&nbsp;#<a name="line_5316"></a></li>
<li id="line_5317" class="odd"><span class="lineNumber">&nbsp;5317&nbsp;</span>		var&nbsp;rowLevelLimit;<a name="line_5317"></a></li>
<li id="line_5318" class="even"><span class="lineNumber">&nbsp;5318&nbsp;</span><a name="line_5318"></a></li>
<li id="line_5319" class="odd"><span class="lineNumber">&nbsp;5319&nbsp;</span>		for&nbsp;(row&nbsp;=&nbsp;0;&nbsp;row&nbsp;&lt;&nbsp;rowStructs.length;&nbsp;row++)&nbsp;{<a name="line_5319"></a></li>
<li id="line_5320" class="even"><span class="lineNumber">&nbsp;5320&nbsp;</span>			this.unlimitRow(row);<a name="line_5320"></a></li>
<li id="line_5321" class="odd"><span class="lineNumber">&nbsp;5321&nbsp;</span><a name="line_5321"></a></li>
<li id="line_5322" class="even"><span class="lineNumber">&nbsp;5322&nbsp;</span>			if&nbsp;(!levelLimit)&nbsp;{<a name="line_5322"></a></li>
<li id="line_5323" class="odd"><span class="lineNumber">&nbsp;5323&nbsp;</span>				rowLevelLimit&nbsp;=&nbsp;false;<a name="line_5323"></a></li>
<li id="line_5324" class="even"><span class="lineNumber">&nbsp;5324&nbsp;</span>			}<a name="line_5324"></a></li>
<li id="line_5325" class="odd"><span class="lineNumber">&nbsp;5325&nbsp;</span>			else&nbsp;if&nbsp;(typeof&nbsp;levelLimit&nbsp;===&nbsp;'number')&nbsp;{<a name="line_5325"></a></li>
<li id="line_5326" class="even"><span class="lineNumber">&nbsp;5326&nbsp;</span>				rowLevelLimit&nbsp;=&nbsp;levelLimit;<a name="line_5326"></a></li>
<li id="line_5327" class="odd"><span class="lineNumber">&nbsp;5327&nbsp;</span>			}<a name="line_5327"></a></li>
<li id="line_5328" class="even"><span class="lineNumber">&nbsp;5328&nbsp;</span>			else&nbsp;{<a name="line_5328"></a></li>
<li id="line_5329" class="odd"><span class="lineNumber">&nbsp;5329&nbsp;</span>				rowLevelLimit&nbsp;=&nbsp;this.computeRowLevelLimit(row);<a name="line_5329"></a></li>
<li id="line_5330" class="even"><span class="lineNumber">&nbsp;5330&nbsp;</span>			}<a name="line_5330"></a></li>
<li id="line_5331" class="odd"><span class="lineNumber">&nbsp;5331&nbsp;</span><a name="line_5331"></a></li>
<li id="line_5332" class="even"><span class="lineNumber">&nbsp;5332&nbsp;</span>			if&nbsp;(rowLevelLimit&nbsp;!==&nbsp;false)&nbsp;{<a name="line_5332"></a></li>
<li id="line_5333" class="odd"><span class="lineNumber">&nbsp;5333&nbsp;</span>				this.limitRow(row,&nbsp;rowLevelLimit);<a name="line_5333"></a></li>
<li id="line_5334" class="even"><span class="lineNumber">&nbsp;5334&nbsp;</span>			}<a name="line_5334"></a></li>
<li id="line_5335" class="odd"><span class="lineNumber">&nbsp;5335&nbsp;</span>		}<a name="line_5335"></a></li>
<li id="line_5336" class="even"><span class="lineNumber">&nbsp;5336&nbsp;</span>	},<a name="line_5336"></a></li>
<li id="line_5337" class="odd"><span class="lineNumber">&nbsp;5337&nbsp;</span><a name="line_5337"></a></li>
<li id="line_5338" class="even"><span class="lineNumber">&nbsp;5338&nbsp;</span><a name="line_5338"></a></li>
<li id="line_5339" class="odd"><span class="lineNumber">&nbsp;5339&nbsp;</span>	//&nbsp;Computes&nbsp;the&nbsp;number&nbsp;of&nbsp;levels&nbsp;a&nbsp;row&nbsp;will&nbsp;accomodate&nbsp;without&nbsp;going&nbsp;outside&nbsp;its&nbsp;bounds.<a name="line_5339"></a></li>
<li id="line_5340" class="even"><span class="lineNumber">&nbsp;5340&nbsp;</span>	//&nbsp;Assumes&nbsp;the&nbsp;row&nbsp;is&nbsp;"rigid"&nbsp;(maintains&nbsp;a&nbsp;constant&nbsp;height&nbsp;regardless&nbsp;of&nbsp;what&nbsp;is&nbsp;inside).<a name="line_5340"></a></li>
<li id="line_5341" class="odd"><span class="lineNumber">&nbsp;5341&nbsp;</span>	//&nbsp;`row`&nbsp;is&nbsp;the&nbsp;row&nbsp;number.<a name="line_5341"></a></li>
<li id="line_5342" class="even"><span class="lineNumber">&nbsp;5342&nbsp;</span>	computeRowLevelLimit:&nbsp;function(row)&nbsp;{<a name="line_5342"></a></li>
<li id="line_5343" class="odd"><span class="lineNumber">&nbsp;5343&nbsp;</span>		var&nbsp;rowEl&nbsp;=&nbsp;this.rowEls.eq(row);&nbsp;//&nbsp;the&nbsp;containing&nbsp;"fake"&nbsp;row&nbsp;div<a name="line_5343"></a></li>
<li id="line_5344" class="even"><span class="lineNumber">&nbsp;5344&nbsp;</span>		var&nbsp;rowHeight&nbsp;=&nbsp;rowEl.height();&nbsp;//&nbsp;TODO:&nbsp;cache&nbsp;somehow?<a name="line_5344"></a></li>
<li id="line_5345" class="odd"><span class="lineNumber">&nbsp;5345&nbsp;</span>		var&nbsp;trEls&nbsp;=&nbsp;this.rowStructs[row].tbodyEl.children();<a name="line_5345"></a></li>
<li id="line_5346" class="even"><span class="lineNumber">&nbsp;5346&nbsp;</span>		var&nbsp;i,&nbsp;trEl;<a name="line_5346"></a></li>
<li id="line_5347" class="odd"><span class="lineNumber">&nbsp;5347&nbsp;</span>		var&nbsp;trHeight;<a name="line_5347"></a></li>
<li id="line_5348" class="even"><span class="lineNumber">&nbsp;5348&nbsp;</span><a name="line_5348"></a></li>
<li id="line_5349" class="odd"><span class="lineNumber">&nbsp;5349&nbsp;</span>		function&nbsp;iterInnerHeights(i,&nbsp;childNode)&nbsp;{<a name="line_5349"></a></li>
<li id="line_5350" class="even"><span class="lineNumber">&nbsp;5350&nbsp;</span>			trHeight&nbsp;=&nbsp;Math.max(trHeight,&nbsp;$(childNode).outerHeight());<a name="line_5350"></a></li>
<li id="line_5351" class="odd"><span class="lineNumber">&nbsp;5351&nbsp;</span>		}<a name="line_5351"></a></li>
<li id="line_5352" class="even"><span class="lineNumber">&nbsp;5352&nbsp;</span><a name="line_5352"></a></li>
<li id="line_5353" class="odd"><span class="lineNumber">&nbsp;5353&nbsp;</span>		//&nbsp;Reveal&nbsp;one&nbsp;level&nbsp;&lt;tr&gt;&nbsp;at&nbsp;a&nbsp;time&nbsp;and&nbsp;stop&nbsp;when&nbsp;we&nbsp;find&nbsp;one&nbsp;out&nbsp;of&nbsp;bounds<a name="line_5353"></a></li>
<li id="line_5354" class="even"><span class="lineNumber">&nbsp;5354&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;trEls.length;&nbsp;i++)&nbsp;{<a name="line_5354"></a></li>
<li id="line_5355" class="odd"><span class="lineNumber">&nbsp;5355&nbsp;</span>			trEl&nbsp;=&nbsp;trEls.eq(i).removeClass('fc-limited');&nbsp;//&nbsp;reset&nbsp;to&nbsp;original&nbsp;state&nbsp;(reveal)<a name="line_5355"></a></li>
<li id="line_5356" class="even"><span class="lineNumber">&nbsp;5356&nbsp;</span><a name="line_5356"></a></li>
<li id="line_5357" class="odd"><span class="lineNumber">&nbsp;5357&nbsp;</span>			//&nbsp;with&nbsp;rowspans&gt;1&nbsp;and&nbsp;IE8,&nbsp;trEl.outerHeight()&nbsp;would&nbsp;return&nbsp;the&nbsp;height&nbsp;of&nbsp;the&nbsp;largest&nbsp;cell,<a name="line_5357"></a></li>
<li id="line_5358" class="even"><span class="lineNumber">&nbsp;5358&nbsp;</span>			//&nbsp;so&nbsp;instead,&nbsp;find&nbsp;the&nbsp;tallest&nbsp;inner&nbsp;content&nbsp;element.<a name="line_5358"></a></li>
<li id="line_5359" class="odd"><span class="lineNumber">&nbsp;5359&nbsp;</span>			trHeight&nbsp;=&nbsp;0;<a name="line_5359"></a></li>
<li id="line_5360" class="even"><span class="lineNumber">&nbsp;5360&nbsp;</span>			trEl.find('&gt;&nbsp;td&nbsp;&gt;&nbsp;:first-child').each(iterInnerHeights);<a name="line_5360"></a></li>
<li id="line_5361" class="odd"><span class="lineNumber">&nbsp;5361&nbsp;</span><a name="line_5361"></a></li>
<li id="line_5362" class="even"><span class="lineNumber">&nbsp;5362&nbsp;</span>			if&nbsp;(trEl.position().top&nbsp;+&nbsp;trHeight&nbsp;&gt;&nbsp;rowHeight)&nbsp;{<a name="line_5362"></a></li>
<li id="line_5363" class="odd"><span class="lineNumber">&nbsp;5363&nbsp;</span>				return&nbsp;i;<a name="line_5363"></a></li>
<li id="line_5364" class="even"><span class="lineNumber">&nbsp;5364&nbsp;</span>			}<a name="line_5364"></a></li>
<li id="line_5365" class="odd"><span class="lineNumber">&nbsp;5365&nbsp;</span>		}<a name="line_5365"></a></li>
<li id="line_5366" class="even"><span class="lineNumber">&nbsp;5366&nbsp;</span><a name="line_5366"></a></li>
<li id="line_5367" class="odd"><span class="lineNumber">&nbsp;5367&nbsp;</span>		return&nbsp;false;&nbsp;//&nbsp;should&nbsp;not&nbsp;limit&nbsp;at&nbsp;all<a name="line_5367"></a></li>
<li id="line_5368" class="even"><span class="lineNumber">&nbsp;5368&nbsp;</span>	},<a name="line_5368"></a></li>
<li id="line_5369" class="odd"><span class="lineNumber">&nbsp;5369&nbsp;</span><a name="line_5369"></a></li>
<li id="line_5370" class="even"><span class="lineNumber">&nbsp;5370&nbsp;</span><a name="line_5370"></a></li>
<li id="line_5371" class="odd"><span class="lineNumber">&nbsp;5371&nbsp;</span>	//&nbsp;Limits&nbsp;the&nbsp;given&nbsp;grid&nbsp;row&nbsp;to&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;levels&nbsp;and&nbsp;injects&nbsp;"more"&nbsp;links&nbsp;if&nbsp;necessary.<a name="line_5371"></a></li>
<li id="line_5372" class="even"><span class="lineNumber">&nbsp;5372&nbsp;</span>	//&nbsp;`row`&nbsp;is&nbsp;the&nbsp;row&nbsp;number.<a name="line_5372"></a></li>
<li id="line_5373" class="odd"><span class="lineNumber">&nbsp;5373&nbsp;</span>	//&nbsp;`levelLimit`&nbsp;is&nbsp;a&nbsp;number&nbsp;for&nbsp;the&nbsp;maximum&nbsp;(inclusive)&nbsp;number&nbsp;of&nbsp;levels&nbsp;allowed.<a name="line_5373"></a></li>
<li id="line_5374" class="even"><span class="lineNumber">&nbsp;5374&nbsp;</span>	limitRow:&nbsp;function(row,&nbsp;levelLimit)&nbsp;{<a name="line_5374"></a></li>
<li id="line_5375" class="odd"><span class="lineNumber">&nbsp;5375&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_5375"></a></li>
<li id="line_5376" class="even"><span class="lineNumber">&nbsp;5376&nbsp;</span>		var&nbsp;rowStruct&nbsp;=&nbsp;this.rowStructs[row];<a name="line_5376"></a></li>
<li id="line_5377" class="odd"><span class="lineNumber">&nbsp;5377&nbsp;</span>		var&nbsp;moreNodes&nbsp;=&nbsp;[];&nbsp;//&nbsp;array&nbsp;of&nbsp;"more"&nbsp;&lt;a&gt;&nbsp;links&nbsp;and&nbsp;&lt;td&gt;&nbsp;DOM&nbsp;nodes<a name="line_5377"></a></li>
<li id="line_5378" class="even"><span class="lineNumber">&nbsp;5378&nbsp;</span>		var&nbsp;col&nbsp;=&nbsp;0;&nbsp;//&nbsp;col&nbsp;#,&nbsp;left-to-right&nbsp;(not&nbsp;chronologically)<a name="line_5378"></a></li>
<li id="line_5379" class="odd"><span class="lineNumber">&nbsp;5379&nbsp;</span>		var&nbsp;cell;<a name="line_5379"></a></li>
<li id="line_5380" class="even"><span class="lineNumber">&nbsp;5380&nbsp;</span>		var&nbsp;levelSegs;&nbsp;//&nbsp;array&nbsp;of&nbsp;segment&nbsp;objects&nbsp;in&nbsp;the&nbsp;last&nbsp;allowable&nbsp;level,&nbsp;ordered&nbsp;left-to-right<a name="line_5380"></a></li>
<li id="line_5381" class="odd"><span class="lineNumber">&nbsp;5381&nbsp;</span>		var&nbsp;cellMatrix;&nbsp;//&nbsp;a&nbsp;matrix&nbsp;(by&nbsp;level,&nbsp;then&nbsp;column)&nbsp;of&nbsp;all&nbsp;&lt;td&gt;&nbsp;jQuery&nbsp;elements&nbsp;in&nbsp;the&nbsp;row<a name="line_5381"></a></li>
<li id="line_5382" class="even"><span class="lineNumber">&nbsp;5382&nbsp;</span>		var&nbsp;limitedNodes;&nbsp;//&nbsp;array&nbsp;of&nbsp;temporarily&nbsp;hidden&nbsp;level&nbsp;&lt;tr&gt;&nbsp;and&nbsp;segment&nbsp;&lt;td&gt;&nbsp;DOM&nbsp;nodes<a name="line_5382"></a></li>
<li id="line_5383" class="odd"><span class="lineNumber">&nbsp;5383&nbsp;</span>		var&nbsp;i,&nbsp;seg;<a name="line_5383"></a></li>
<li id="line_5384" class="even"><span class="lineNumber">&nbsp;5384&nbsp;</span>		var&nbsp;segsBelow;&nbsp;//&nbsp;array&nbsp;of&nbsp;segment&nbsp;objects&nbsp;below&nbsp;`seg`&nbsp;in&nbsp;the&nbsp;current&nbsp;`col`<a name="line_5384"></a></li>
<li id="line_5385" class="odd"><span class="lineNumber">&nbsp;5385&nbsp;</span>		var&nbsp;totalSegsBelow;&nbsp;//&nbsp;total&nbsp;number&nbsp;of&nbsp;segments&nbsp;below&nbsp;`seg`&nbsp;in&nbsp;any&nbsp;of&nbsp;the&nbsp;columns&nbsp;`seg`&nbsp;occupies<a name="line_5385"></a></li>
<li id="line_5386" class="even"><span class="lineNumber">&nbsp;5386&nbsp;</span>		var&nbsp;colSegsBelow;&nbsp;//&nbsp;array&nbsp;of&nbsp;segment&nbsp;arrays,&nbsp;below&nbsp;seg,&nbsp;one&nbsp;for&nbsp;each&nbsp;column&nbsp;(offset&nbsp;from&nbsp;segs's&nbsp;first&nbsp;column)<a name="line_5386"></a></li>
<li id="line_5387" class="odd"><span class="lineNumber">&nbsp;5387&nbsp;</span>		var&nbsp;td,&nbsp;rowspan;<a name="line_5387"></a></li>
<li id="line_5388" class="even"><span class="lineNumber">&nbsp;5388&nbsp;</span>		var&nbsp;segMoreNodes;&nbsp;//&nbsp;array&nbsp;of&nbsp;"more"&nbsp;&lt;td&gt;&nbsp;cells&nbsp;that&nbsp;will&nbsp;stand-in&nbsp;for&nbsp;the&nbsp;current&nbsp;seg's&nbsp;cell<a name="line_5388"></a></li>
<li id="line_5389" class="odd"><span class="lineNumber">&nbsp;5389&nbsp;</span>		var&nbsp;j;<a name="line_5389"></a></li>
<li id="line_5390" class="even"><span class="lineNumber">&nbsp;5390&nbsp;</span>		var&nbsp;moreTd,&nbsp;moreWrap,&nbsp;moreLink;<a name="line_5390"></a></li>
<li id="line_5391" class="odd"><span class="lineNumber">&nbsp;5391&nbsp;</span><a name="line_5391"></a></li>
<li id="line_5392" class="even"><span class="lineNumber">&nbsp;5392&nbsp;</span>		//&nbsp;Iterates&nbsp;through&nbsp;empty&nbsp;level&nbsp;cells&nbsp;and&nbsp;places&nbsp;"more"&nbsp;links&nbsp;inside&nbsp;if&nbsp;need&nbsp;be<a name="line_5392"></a></li>
<li id="line_5393" class="odd"><span class="lineNumber">&nbsp;5393&nbsp;</span>		function&nbsp;emptyCellsUntil(endCol)&nbsp;{&nbsp;//&nbsp;goes&nbsp;from&nbsp;current&nbsp;`col`&nbsp;to&nbsp;`endCol`<a name="line_5393"></a></li>
<li id="line_5394" class="even"><span class="lineNumber">&nbsp;5394&nbsp;</span>			while&nbsp;(col&nbsp;&lt;&nbsp;endCol)&nbsp;{<a name="line_5394"></a></li>
<li id="line_5395" class="odd"><span class="lineNumber">&nbsp;5395&nbsp;</span>				cell&nbsp;=&nbsp;_this.getCell(row,&nbsp;col);<a name="line_5395"></a></li>
<li id="line_5396" class="even"><span class="lineNumber">&nbsp;5396&nbsp;</span>				segsBelow&nbsp;=&nbsp;_this.getCellSegs(cell,&nbsp;levelLimit);<a name="line_5396"></a></li>
<li id="line_5397" class="odd"><span class="lineNumber">&nbsp;5397&nbsp;</span>				if&nbsp;(segsBelow.length)&nbsp;{<a name="line_5397"></a></li>
<li id="line_5398" class="even"><span class="lineNumber">&nbsp;5398&nbsp;</span>					td&nbsp;=&nbsp;cellMatrix[levelLimit&nbsp;-&nbsp;1][col];<a name="line_5398"></a></li>
<li id="line_5399" class="odd"><span class="lineNumber">&nbsp;5399&nbsp;</span>					moreLink&nbsp;=&nbsp;_this.renderMoreLink(cell,&nbsp;segsBelow);<a name="line_5399"></a></li>
<li id="line_5400" class="even"><span class="lineNumber">&nbsp;5400&nbsp;</span>					moreWrap&nbsp;=&nbsp;$('&lt;div/&gt;').append(moreLink);<a name="line_5400"></a></li>
<li id="line_5401" class="odd"><span class="lineNumber">&nbsp;5401&nbsp;</span>					td.append(moreWrap);<a name="line_5401"></a></li>
<li id="line_5402" class="even"><span class="lineNumber">&nbsp;5402&nbsp;</span>					moreNodes.push(moreWrap[0]);<a name="line_5402"></a></li>
<li id="line_5403" class="odd"><span class="lineNumber">&nbsp;5403&nbsp;</span>				}<a name="line_5403"></a></li>
<li id="line_5404" class="even"><span class="lineNumber">&nbsp;5404&nbsp;</span>				col++;<a name="line_5404"></a></li>
<li id="line_5405" class="odd"><span class="lineNumber">&nbsp;5405&nbsp;</span>			}<a name="line_5405"></a></li>
<li id="line_5406" class="even"><span class="lineNumber">&nbsp;5406&nbsp;</span>		}<a name="line_5406"></a></li>
<li id="line_5407" class="odd"><span class="lineNumber">&nbsp;5407&nbsp;</span><a name="line_5407"></a></li>
<li id="line_5408" class="even"><span class="lineNumber">&nbsp;5408&nbsp;</span>		if&nbsp;(levelLimit&nbsp;&amp;&amp;&nbsp;levelLimit&nbsp;&lt;&nbsp;rowStruct.segLevels.length)&nbsp;{&nbsp;//&nbsp;is&nbsp;it&nbsp;actually&nbsp;over&nbsp;the&nbsp;limit?<a name="line_5408"></a></li>
<li id="line_5409" class="odd"><span class="lineNumber">&nbsp;5409&nbsp;</span>			levelSegs&nbsp;=&nbsp;rowStruct.segLevels[levelLimit&nbsp;-&nbsp;1];<a name="line_5409"></a></li>
<li id="line_5410" class="even"><span class="lineNumber">&nbsp;5410&nbsp;</span>			cellMatrix&nbsp;=&nbsp;rowStruct.cellMatrix;<a name="line_5410"></a></li>
<li id="line_5411" class="odd"><span class="lineNumber">&nbsp;5411&nbsp;</span><a name="line_5411"></a></li>
<li id="line_5412" class="even"><span class="lineNumber">&nbsp;5412&nbsp;</span>			limitedNodes&nbsp;=&nbsp;rowStruct.tbodyEl.children().slice(levelLimit)&nbsp;//&nbsp;get&nbsp;level&nbsp;&lt;tr&gt;&nbsp;elements&nbsp;past&nbsp;the&nbsp;limit<a name="line_5412"></a></li>
<li id="line_5413" class="odd"><span class="lineNumber">&nbsp;5413&nbsp;</span>				.addClass('fc-limited').get();&nbsp;//&nbsp;hide&nbsp;elements&nbsp;and&nbsp;get&nbsp;a&nbsp;simple&nbsp;DOM-nodes&nbsp;array<a name="line_5413"></a></li>
<li id="line_5414" class="even"><span class="lineNumber">&nbsp;5414&nbsp;</span><a name="line_5414"></a></li>
<li id="line_5415" class="odd"><span class="lineNumber">&nbsp;5415&nbsp;</span>			//&nbsp;iterate&nbsp;though&nbsp;segments&nbsp;in&nbsp;the&nbsp;last&nbsp;allowable&nbsp;level<a name="line_5415"></a></li>
<li id="line_5416" class="even"><span class="lineNumber">&nbsp;5416&nbsp;</span>			for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;levelSegs.length;&nbsp;i++)&nbsp;{<a name="line_5416"></a></li>
<li id="line_5417" class="odd"><span class="lineNumber">&nbsp;5417&nbsp;</span>				seg&nbsp;=&nbsp;levelSegs[i];<a name="line_5417"></a></li>
<li id="line_5418" class="even"><span class="lineNumber">&nbsp;5418&nbsp;</span>				emptyCellsUntil(seg.leftCol);&nbsp;//&nbsp;process&nbsp;empty&nbsp;cells&nbsp;before&nbsp;the&nbsp;segment<a name="line_5418"></a></li>
<li id="line_5419" class="odd"><span class="lineNumber">&nbsp;5419&nbsp;</span><a name="line_5419"></a></li>
<li id="line_5420" class="even"><span class="lineNumber">&nbsp;5420&nbsp;</span>				//&nbsp;determine&nbsp;*all*&nbsp;segments&nbsp;below&nbsp;`seg`&nbsp;that&nbsp;occupy&nbsp;the&nbsp;same&nbsp;columns<a name="line_5420"></a></li>
<li id="line_5421" class="odd"><span class="lineNumber">&nbsp;5421&nbsp;</span>				colSegsBelow&nbsp;=&nbsp;[];<a name="line_5421"></a></li>
<li id="line_5422" class="even"><span class="lineNumber">&nbsp;5422&nbsp;</span>				totalSegsBelow&nbsp;=&nbsp;0;<a name="line_5422"></a></li>
<li id="line_5423" class="odd"><span class="lineNumber">&nbsp;5423&nbsp;</span>				while&nbsp;(col&nbsp;&lt;=&nbsp;seg.rightCol)&nbsp;{<a name="line_5423"></a></li>
<li id="line_5424" class="even"><span class="lineNumber">&nbsp;5424&nbsp;</span>					cell&nbsp;=&nbsp;this.getCell(row,&nbsp;col);<a name="line_5424"></a></li>
<li id="line_5425" class="odd"><span class="lineNumber">&nbsp;5425&nbsp;</span>					segsBelow&nbsp;=&nbsp;this.getCellSegs(cell,&nbsp;levelLimit);<a name="line_5425"></a></li>
<li id="line_5426" class="even"><span class="lineNumber">&nbsp;5426&nbsp;</span>					colSegsBelow.push(segsBelow);<a name="line_5426"></a></li>
<li id="line_5427" class="odd"><span class="lineNumber">&nbsp;5427&nbsp;</span>					totalSegsBelow&nbsp;+=&nbsp;segsBelow.length;<a name="line_5427"></a></li>
<li id="line_5428" class="even"><span class="lineNumber">&nbsp;5428&nbsp;</span>					col++;<a name="line_5428"></a></li>
<li id="line_5429" class="odd"><span class="lineNumber">&nbsp;5429&nbsp;</span>				}<a name="line_5429"></a></li>
<li id="line_5430" class="even"><span class="lineNumber">&nbsp;5430&nbsp;</span><a name="line_5430"></a></li>
<li id="line_5431" class="odd"><span class="lineNumber">&nbsp;5431&nbsp;</span>				if&nbsp;(totalSegsBelow)&nbsp;{&nbsp;//&nbsp;do&nbsp;we&nbsp;need&nbsp;to&nbsp;replace&nbsp;this&nbsp;segment&nbsp;with&nbsp;one&nbsp;or&nbsp;many&nbsp;"more"&nbsp;links?<a name="line_5431"></a></li>
<li id="line_5432" class="even"><span class="lineNumber">&nbsp;5432&nbsp;</span>					td&nbsp;=&nbsp;cellMatrix[levelLimit&nbsp;-&nbsp;1][seg.leftCol];&nbsp;//&nbsp;the&nbsp;segment's&nbsp;parent&nbsp;cell<a name="line_5432"></a></li>
<li id="line_5433" class="odd"><span class="lineNumber">&nbsp;5433&nbsp;</span>					rowspan&nbsp;=&nbsp;td.attr('rowspan')&nbsp;||&nbsp;1;<a name="line_5433"></a></li>
<li id="line_5434" class="even"><span class="lineNumber">&nbsp;5434&nbsp;</span>					segMoreNodes&nbsp;=&nbsp;[];<a name="line_5434"></a></li>
<li id="line_5435" class="odd"><span class="lineNumber">&nbsp;5435&nbsp;</span><a name="line_5435"></a></li>
<li id="line_5436" class="even"><span class="lineNumber">&nbsp;5436&nbsp;</span>					//&nbsp;make&nbsp;a&nbsp;replacement&nbsp;&lt;td&gt;&nbsp;for&nbsp;each&nbsp;column&nbsp;the&nbsp;segment&nbsp;occupies.&nbsp;will&nbsp;be&nbsp;one&nbsp;for&nbsp;each&nbsp;colspan<a name="line_5436"></a></li>
<li id="line_5437" class="odd"><span class="lineNumber">&nbsp;5437&nbsp;</span>					for&nbsp;(j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;colSegsBelow.length;&nbsp;j++)&nbsp;{<a name="line_5437"></a></li>
<li id="line_5438" class="even"><span class="lineNumber">&nbsp;5438&nbsp;</span>						moreTd&nbsp;=&nbsp;$('&lt;td&nbsp;class="fc-more-cell"/&gt;').attr('rowspan',&nbsp;rowspan);<a name="line_5438"></a></li>
<li id="line_5439" class="odd"><span class="lineNumber">&nbsp;5439&nbsp;</span>						segsBelow&nbsp;=&nbsp;colSegsBelow[j];<a name="line_5439"></a></li>
<li id="line_5440" class="even"><span class="lineNumber">&nbsp;5440&nbsp;</span>						cell&nbsp;=&nbsp;this.getCell(row,&nbsp;seg.leftCol&nbsp;+&nbsp;j);<a name="line_5440"></a></li>
<li id="line_5441" class="odd"><span class="lineNumber">&nbsp;5441&nbsp;</span>						moreLink&nbsp;=&nbsp;this.renderMoreLink(cell,&nbsp;[&nbsp;seg&nbsp;].concat(segsBelow));&nbsp;//&nbsp;count&nbsp;seg&nbsp;as&nbsp;hidden&nbsp;too<a name="line_5441"></a></li>
<li id="line_5442" class="even"><span class="lineNumber">&nbsp;5442&nbsp;</span>						moreWrap&nbsp;=&nbsp;$('&lt;div/&gt;').append(moreLink);<a name="line_5442"></a></li>
<li id="line_5443" class="odd"><span class="lineNumber">&nbsp;5443&nbsp;</span>						moreTd.append(moreWrap);<a name="line_5443"></a></li>
<li id="line_5444" class="even"><span class="lineNumber">&nbsp;5444&nbsp;</span>						segMoreNodes.push(moreTd[0]);<a name="line_5444"></a></li>
<li id="line_5445" class="odd"><span class="lineNumber">&nbsp;5445&nbsp;</span>						moreNodes.push(moreTd[0]);<a name="line_5445"></a></li>
<li id="line_5446" class="even"><span class="lineNumber">&nbsp;5446&nbsp;</span>					}<a name="line_5446"></a></li>
<li id="line_5447" class="odd"><span class="lineNumber">&nbsp;5447&nbsp;</span><a name="line_5447"></a></li>
<li id="line_5448" class="even"><span class="lineNumber">&nbsp;5448&nbsp;</span>					td.addClass('fc-limited').after($(segMoreNodes));&nbsp;//&nbsp;hide&nbsp;original&nbsp;&lt;td&gt;&nbsp;and&nbsp;inject&nbsp;replacements<a name="line_5448"></a></li>
<li id="line_5449" class="odd"><span class="lineNumber">&nbsp;5449&nbsp;</span>					limitedNodes.push(td[0]);<a name="line_5449"></a></li>
<li id="line_5450" class="even"><span class="lineNumber">&nbsp;5450&nbsp;</span>				}<a name="line_5450"></a></li>
<li id="line_5451" class="odd"><span class="lineNumber">&nbsp;5451&nbsp;</span>			}<a name="line_5451"></a></li>
<li id="line_5452" class="even"><span class="lineNumber">&nbsp;5452&nbsp;</span><a name="line_5452"></a></li>
<li id="line_5453" class="odd"><span class="lineNumber">&nbsp;5453&nbsp;</span>			emptyCellsUntil(this.colCnt);&nbsp;//&nbsp;finish&nbsp;off&nbsp;the&nbsp;level<a name="line_5453"></a></li>
<li id="line_5454" class="even"><span class="lineNumber">&nbsp;5454&nbsp;</span>			rowStruct.moreEls&nbsp;=&nbsp;$(moreNodes);&nbsp;//&nbsp;for&nbsp;easy&nbsp;undoing&nbsp;later<a name="line_5454"></a></li>
<li id="line_5455" class="odd"><span class="lineNumber">&nbsp;5455&nbsp;</span>			rowStruct.limitedEls&nbsp;=&nbsp;$(limitedNodes);&nbsp;//&nbsp;for&nbsp;easy&nbsp;undoing&nbsp;later<a name="line_5455"></a></li>
<li id="line_5456" class="even"><span class="lineNumber">&nbsp;5456&nbsp;</span>		}<a name="line_5456"></a></li>
<li id="line_5457" class="odd"><span class="lineNumber">&nbsp;5457&nbsp;</span>	},<a name="line_5457"></a></li>
<li id="line_5458" class="even"><span class="lineNumber">&nbsp;5458&nbsp;</span><a name="line_5458"></a></li>
<li id="line_5459" class="odd"><span class="lineNumber">&nbsp;5459&nbsp;</span><a name="line_5459"></a></li>
<li id="line_5460" class="even"><span class="lineNumber">&nbsp;5460&nbsp;</span>	//&nbsp;Reveals&nbsp;all&nbsp;levels&nbsp;and&nbsp;removes&nbsp;all&nbsp;"more"-related&nbsp;elements&nbsp;for&nbsp;a&nbsp;grid's&nbsp;row.<a name="line_5460"></a></li>
<li id="line_5461" class="odd"><span class="lineNumber">&nbsp;5461&nbsp;</span>	//&nbsp;`row`&nbsp;is&nbsp;a&nbsp;row&nbsp;number.<a name="line_5461"></a></li>
<li id="line_5462" class="even"><span class="lineNumber">&nbsp;5462&nbsp;</span>	unlimitRow:&nbsp;function(row)&nbsp;{<a name="line_5462"></a></li>
<li id="line_5463" class="odd"><span class="lineNumber">&nbsp;5463&nbsp;</span>		var&nbsp;rowStruct&nbsp;=&nbsp;this.rowStructs[row];<a name="line_5463"></a></li>
<li id="line_5464" class="even"><span class="lineNumber">&nbsp;5464&nbsp;</span><a name="line_5464"></a></li>
<li id="line_5465" class="odd"><span class="lineNumber">&nbsp;5465&nbsp;</span>		if&nbsp;(rowStruct.moreEls)&nbsp;{<a name="line_5465"></a></li>
<li id="line_5466" class="even"><span class="lineNumber">&nbsp;5466&nbsp;</span>			rowStruct.moreEls.remove();<a name="line_5466"></a></li>
<li id="line_5467" class="odd"><span class="lineNumber">&nbsp;5467&nbsp;</span>			rowStruct.moreEls&nbsp;=&nbsp;null;<a name="line_5467"></a></li>
<li id="line_5468" class="even"><span class="lineNumber">&nbsp;5468&nbsp;</span>		}<a name="line_5468"></a></li>
<li id="line_5469" class="odd"><span class="lineNumber">&nbsp;5469&nbsp;</span><a name="line_5469"></a></li>
<li id="line_5470" class="even"><span class="lineNumber">&nbsp;5470&nbsp;</span>		if&nbsp;(rowStruct.limitedEls)&nbsp;{<a name="line_5470"></a></li>
<li id="line_5471" class="odd"><span class="lineNumber">&nbsp;5471&nbsp;</span>			rowStruct.limitedEls.removeClass('fc-limited');<a name="line_5471"></a></li>
<li id="line_5472" class="even"><span class="lineNumber">&nbsp;5472&nbsp;</span>			rowStruct.limitedEls&nbsp;=&nbsp;null;<a name="line_5472"></a></li>
<li id="line_5473" class="odd"><span class="lineNumber">&nbsp;5473&nbsp;</span>		}<a name="line_5473"></a></li>
<li id="line_5474" class="even"><span class="lineNumber">&nbsp;5474&nbsp;</span>	},<a name="line_5474"></a></li>
<li id="line_5475" class="odd"><span class="lineNumber">&nbsp;5475&nbsp;</span><a name="line_5475"></a></li>
<li id="line_5476" class="even"><span class="lineNumber">&nbsp;5476&nbsp;</span><a name="line_5476"></a></li>
<li id="line_5477" class="odd"><span class="lineNumber">&nbsp;5477&nbsp;</span>	//&nbsp;Renders&nbsp;an&nbsp;&lt;a&gt;&nbsp;element&nbsp;that&nbsp;represents&nbsp;hidden&nbsp;event&nbsp;element&nbsp;for&nbsp;a&nbsp;cell.<a name="line_5477"></a></li>
<li id="line_5478" class="even"><span class="lineNumber">&nbsp;5478&nbsp;</span>	//&nbsp;Responsible&nbsp;for&nbsp;attaching&nbsp;click&nbsp;handler&nbsp;as&nbsp;well.<a name="line_5478"></a></li>
<li id="line_5479" class="odd"><span class="lineNumber">&nbsp;5479&nbsp;</span>	renderMoreLink:&nbsp;function(cell,&nbsp;hiddenSegs)&nbsp;{<a name="line_5479"></a></li>
<li id="line_5480" class="even"><span class="lineNumber">&nbsp;5480&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_5480"></a></li>
<li id="line_5481" class="odd"><span class="lineNumber">&nbsp;5481&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_5481"></a></li>
<li id="line_5482" class="even"><span class="lineNumber">&nbsp;5482&nbsp;</span><a name="line_5482"></a></li>
<li id="line_5483" class="odd"><span class="lineNumber">&nbsp;5483&nbsp;</span>		return&nbsp;$('&lt;a&nbsp;class="fc-more"/&gt;')<a name="line_5483"></a></li>
<li id="line_5484" class="even"><span class="lineNumber">&nbsp;5484&nbsp;</span>			.text(<a name="line_5484"></a></li>
<li id="line_5485" class="odd"><span class="lineNumber">&nbsp;5485&nbsp;</span>				this.getMoreLinkText(hiddenSegs.length)<a name="line_5485"></a></li>
<li id="line_5486" class="even"><span class="lineNumber">&nbsp;5486&nbsp;</span>			)<a name="line_5486"></a></li>
<li id="line_5487" class="odd"><span class="lineNumber">&nbsp;5487&nbsp;</span>			.on('click',&nbsp;function(ev)&nbsp;{<a name="line_5487"></a></li>
<li id="line_5488" class="even"><span class="lineNumber">&nbsp;5488&nbsp;</span>				var&nbsp;clickOption&nbsp;=&nbsp;view.opt('eventLimitClick');<a name="line_5488"></a></li>
<li id="line_5489" class="odd"><span class="lineNumber">&nbsp;5489&nbsp;</span>				var&nbsp;date&nbsp;=&nbsp;cell.start;<a name="line_5489"></a></li>
<li id="line_5490" class="even"><span class="lineNumber">&nbsp;5490&nbsp;</span>				var&nbsp;moreEl&nbsp;=&nbsp;$(this);<a name="line_5490"></a></li>
<li id="line_5491" class="odd"><span class="lineNumber">&nbsp;5491&nbsp;</span>				var&nbsp;dayEl&nbsp;=&nbsp;_this.getCellDayEl(cell);<a name="line_5491"></a></li>
<li id="line_5492" class="even"><span class="lineNumber">&nbsp;5492&nbsp;</span>				var&nbsp;allSegs&nbsp;=&nbsp;_this.getCellSegs(cell);<a name="line_5492"></a></li>
<li id="line_5493" class="odd"><span class="lineNumber">&nbsp;5493&nbsp;</span><a name="line_5493"></a></li>
<li id="line_5494" class="even"><span class="lineNumber">&nbsp;5494&nbsp;</span>				//&nbsp;rescope&nbsp;the&nbsp;segments&nbsp;to&nbsp;be&nbsp;within&nbsp;the&nbsp;cell's&nbsp;date<a name="line_5494"></a></li>
<li id="line_5495" class="odd"><span class="lineNumber">&nbsp;5495&nbsp;</span>				var&nbsp;reslicedAllSegs&nbsp;=&nbsp;_this.resliceDaySegs(allSegs,&nbsp;date);<a name="line_5495"></a></li>
<li id="line_5496" class="even"><span class="lineNumber">&nbsp;5496&nbsp;</span>				var&nbsp;reslicedHiddenSegs&nbsp;=&nbsp;_this.resliceDaySegs(hiddenSegs,&nbsp;date);<a name="line_5496"></a></li>
<li id="line_5497" class="odd"><span class="lineNumber">&nbsp;5497&nbsp;</span><a name="line_5497"></a></li>
<li id="line_5498" class="even"><span class="lineNumber">&nbsp;5498&nbsp;</span>				if&nbsp;(typeof&nbsp;clickOption&nbsp;===&nbsp;'function')&nbsp;{<a name="line_5498"></a></li>
<li id="line_5499" class="odd"><span class="lineNumber">&nbsp;5499&nbsp;</span>					//&nbsp;the&nbsp;returned&nbsp;value&nbsp;can&nbsp;be&nbsp;an&nbsp;atomic&nbsp;option<a name="line_5499"></a></li>
<li id="line_5500" class="even"><span class="lineNumber">&nbsp;5500&nbsp;</span>					clickOption&nbsp;=&nbsp;view.trigger('eventLimitClick',&nbsp;null,&nbsp;{<a name="line_5500"></a></li>
<li id="line_5501" class="odd"><span class="lineNumber">&nbsp;5501&nbsp;</span>						date:&nbsp;date,<a name="line_5501"></a></li>
<li id="line_5502" class="even"><span class="lineNumber">&nbsp;5502&nbsp;</span>						dayEl:&nbsp;dayEl,<a name="line_5502"></a></li>
<li id="line_5503" class="odd"><span class="lineNumber">&nbsp;5503&nbsp;</span>						moreEl:&nbsp;moreEl,<a name="line_5503"></a></li>
<li id="line_5504" class="even"><span class="lineNumber">&nbsp;5504&nbsp;</span>						segs:&nbsp;reslicedAllSegs,<a name="line_5504"></a></li>
<li id="line_5505" class="odd"><span class="lineNumber">&nbsp;5505&nbsp;</span>						hiddenSegs:&nbsp;reslicedHiddenSegs<a name="line_5505"></a></li>
<li id="line_5506" class="even"><span class="lineNumber">&nbsp;5506&nbsp;</span>					},&nbsp;ev);<a name="line_5506"></a></li>
<li id="line_5507" class="odd"><span class="lineNumber">&nbsp;5507&nbsp;</span>				}<a name="line_5507"></a></li>
<li id="line_5508" class="even"><span class="lineNumber">&nbsp;5508&nbsp;</span><a name="line_5508"></a></li>
<li id="line_5509" class="odd"><span class="lineNumber">&nbsp;5509&nbsp;</span>				if&nbsp;(clickOption&nbsp;===&nbsp;'popover')&nbsp;{<a name="line_5509"></a></li>
<li id="line_5510" class="even"><span class="lineNumber">&nbsp;5510&nbsp;</span>					_this.showSegPopover(cell,&nbsp;moreEl,&nbsp;reslicedAllSegs);<a name="line_5510"></a></li>
<li id="line_5511" class="odd"><span class="lineNumber">&nbsp;5511&nbsp;</span>				}<a name="line_5511"></a></li>
<li id="line_5512" class="even"><span class="lineNumber">&nbsp;5512&nbsp;</span>				else&nbsp;if&nbsp;(typeof&nbsp;clickOption&nbsp;===&nbsp;'string')&nbsp;{&nbsp;//&nbsp;a&nbsp;view&nbsp;name<a name="line_5512"></a></li>
<li id="line_5513" class="odd"><span class="lineNumber">&nbsp;5513&nbsp;</span>					view.calendar.zoomTo(date,&nbsp;clickOption);<a name="line_5513"></a></li>
<li id="line_5514" class="even"><span class="lineNumber">&nbsp;5514&nbsp;</span>				}<a name="line_5514"></a></li>
<li id="line_5515" class="odd"><span class="lineNumber">&nbsp;5515&nbsp;</span>			});<a name="line_5515"></a></li>
<li id="line_5516" class="even"><span class="lineNumber">&nbsp;5516&nbsp;</span>	},<a name="line_5516"></a></li>
<li id="line_5517" class="odd"><span class="lineNumber">&nbsp;5517&nbsp;</span><a name="line_5517"></a></li>
<li id="line_5518" class="even"><span class="lineNumber">&nbsp;5518&nbsp;</span><a name="line_5518"></a></li>
<li id="line_5519" class="odd"><span class="lineNumber">&nbsp;5519&nbsp;</span>	//&nbsp;Reveals&nbsp;the&nbsp;popover&nbsp;that&nbsp;displays&nbsp;all&nbsp;events&nbsp;within&nbsp;a&nbsp;cell<a name="line_5519"></a></li>
<li id="line_5520" class="even"><span class="lineNumber">&nbsp;5520&nbsp;</span>	showSegPopover:&nbsp;function(cell,&nbsp;moreLink,&nbsp;segs)&nbsp;{<a name="line_5520"></a></li>
<li id="line_5521" class="odd"><span class="lineNumber">&nbsp;5521&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_5521"></a></li>
<li id="line_5522" class="even"><span class="lineNumber">&nbsp;5522&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_5522"></a></li>
<li id="line_5523" class="odd"><span class="lineNumber">&nbsp;5523&nbsp;</span>		var&nbsp;moreWrap&nbsp;=&nbsp;moreLink.parent();&nbsp;//&nbsp;the&nbsp;&lt;div&gt;&nbsp;wrapper&nbsp;around&nbsp;the&nbsp;&lt;a&gt;<a name="line_5523"></a></li>
<li id="line_5524" class="even"><span class="lineNumber">&nbsp;5524&nbsp;</span>		var&nbsp;topEl;&nbsp;//&nbsp;the&nbsp;element&nbsp;we&nbsp;want&nbsp;to&nbsp;match&nbsp;the&nbsp;top&nbsp;coordinate&nbsp;of<a name="line_5524"></a></li>
<li id="line_5525" class="odd"><span class="lineNumber">&nbsp;5525&nbsp;</span>		var&nbsp;options;<a name="line_5525"></a></li>
<li id="line_5526" class="even"><span class="lineNumber">&nbsp;5526&nbsp;</span><a name="line_5526"></a></li>
<li id="line_5527" class="odd"><span class="lineNumber">&nbsp;5527&nbsp;</span>		if&nbsp;(this.rowCnt&nbsp;==&nbsp;1)&nbsp;{<a name="line_5527"></a></li>
<li id="line_5528" class="even"><span class="lineNumber">&nbsp;5528&nbsp;</span>			topEl&nbsp;=&nbsp;view.el;&nbsp;//&nbsp;will&nbsp;cause&nbsp;the&nbsp;popover&nbsp;to&nbsp;cover&nbsp;any&nbsp;sort&nbsp;of&nbsp;header<a name="line_5528"></a></li>
<li id="line_5529" class="odd"><span class="lineNumber">&nbsp;5529&nbsp;</span>		}<a name="line_5529"></a></li>
<li id="line_5530" class="even"><span class="lineNumber">&nbsp;5530&nbsp;</span>		else&nbsp;{<a name="line_5530"></a></li>
<li id="line_5531" class="odd"><span class="lineNumber">&nbsp;5531&nbsp;</span>			topEl&nbsp;=&nbsp;this.rowEls.eq(cell.row);&nbsp;//&nbsp;will&nbsp;align&nbsp;with&nbsp;top&nbsp;of&nbsp;row<a name="line_5531"></a></li>
<li id="line_5532" class="even"><span class="lineNumber">&nbsp;5532&nbsp;</span>		}<a name="line_5532"></a></li>
<li id="line_5533" class="odd"><span class="lineNumber">&nbsp;5533&nbsp;</span><a name="line_5533"></a></li>
<li id="line_5534" class="even"><span class="lineNumber">&nbsp;5534&nbsp;</span>		options&nbsp;=&nbsp;{<a name="line_5534"></a></li>
<li id="line_5535" class="odd"><span class="lineNumber">&nbsp;5535&nbsp;</span>			className:&nbsp;'fc-more-popover',<a name="line_5535"></a></li>
<li id="line_5536" class="even"><span class="lineNumber">&nbsp;5536&nbsp;</span>			content:&nbsp;this.renderSegPopoverContent(cell,&nbsp;segs),<a name="line_5536"></a></li>
<li id="line_5537" class="odd"><span class="lineNumber">&nbsp;5537&nbsp;</span>			parentEl:&nbsp;this.el,<a name="line_5537"></a></li>
<li id="line_5538" class="even"><span class="lineNumber">&nbsp;5538&nbsp;</span>			top:&nbsp;topEl.offset().top,<a name="line_5538"></a></li>
<li id="line_5539" class="odd"><span class="lineNumber">&nbsp;5539&nbsp;</span>			autoHide:&nbsp;true,&nbsp;//&nbsp;when&nbsp;the&nbsp;user&nbsp;clicks&nbsp;elsewhere,&nbsp;hide&nbsp;the&nbsp;popover<a name="line_5539"></a></li>
<li id="line_5540" class="even"><span class="lineNumber">&nbsp;5540&nbsp;</span>			viewportConstrain:&nbsp;view.opt('popoverViewportConstrain'),<a name="line_5540"></a></li>
<li id="line_5541" class="odd"><span class="lineNumber">&nbsp;5541&nbsp;</span>			hide:&nbsp;function()&nbsp;{<a name="line_5541"></a></li>
<li id="line_5542" class="even"><span class="lineNumber">&nbsp;5542&nbsp;</span>				//&nbsp;kill&nbsp;everything&nbsp;when&nbsp;the&nbsp;popover&nbsp;is&nbsp;hidden<a name="line_5542"></a></li>
<li id="line_5543" class="odd"><span class="lineNumber">&nbsp;5543&nbsp;</span>				_this.segPopover.removeElement();<a name="line_5543"></a></li>
<li id="line_5544" class="even"><span class="lineNumber">&nbsp;5544&nbsp;</span>				_this.segPopover&nbsp;=&nbsp;null;<a name="line_5544"></a></li>
<li id="line_5545" class="odd"><span class="lineNumber">&nbsp;5545&nbsp;</span>				_this.popoverSegs&nbsp;=&nbsp;null;<a name="line_5545"></a></li>
<li id="line_5546" class="even"><span class="lineNumber">&nbsp;5546&nbsp;</span>			}<a name="line_5546"></a></li>
<li id="line_5547" class="odd"><span class="lineNumber">&nbsp;5547&nbsp;</span>		};<a name="line_5547"></a></li>
<li id="line_5548" class="even"><span class="lineNumber">&nbsp;5548&nbsp;</span><a name="line_5548"></a></li>
<li id="line_5549" class="odd"><span class="lineNumber">&nbsp;5549&nbsp;</span>		//&nbsp;Determine&nbsp;horizontal&nbsp;coordinate.<a name="line_5549"></a></li>
<li id="line_5550" class="even"><span class="lineNumber">&nbsp;5550&nbsp;</span>		//&nbsp;We&nbsp;use&nbsp;the&nbsp;moreWrap&nbsp;instead&nbsp;of&nbsp;the&nbsp;&lt;td&gt;&nbsp;to&nbsp;avoid&nbsp;border&nbsp;confusion.<a name="line_5550"></a></li>
<li id="line_5551" class="odd"><span class="lineNumber">&nbsp;5551&nbsp;</span>		if&nbsp;(this.isRTL)&nbsp;{<a name="line_5551"></a></li>
<li id="line_5552" class="even"><span class="lineNumber">&nbsp;5552&nbsp;</span>			options.right&nbsp;=&nbsp;moreWrap.offset().left&nbsp;+&nbsp;moreWrap.outerWidth()&nbsp;+&nbsp;1;&nbsp;//&nbsp;+1&nbsp;to&nbsp;be&nbsp;over&nbsp;cell&nbsp;border<a name="line_5552"></a></li>
<li id="line_5553" class="odd"><span class="lineNumber">&nbsp;5553&nbsp;</span>		}<a name="line_5553"></a></li>
<li id="line_5554" class="even"><span class="lineNumber">&nbsp;5554&nbsp;</span>		else&nbsp;{<a name="line_5554"></a></li>
<li id="line_5555" class="odd"><span class="lineNumber">&nbsp;5555&nbsp;</span>			options.left&nbsp;=&nbsp;moreWrap.offset().left&nbsp;-&nbsp;1;&nbsp;//&nbsp;-1&nbsp;to&nbsp;be&nbsp;over&nbsp;cell&nbsp;border<a name="line_5555"></a></li>
<li id="line_5556" class="even"><span class="lineNumber">&nbsp;5556&nbsp;</span>		}<a name="line_5556"></a></li>
<li id="line_5557" class="odd"><span class="lineNumber">&nbsp;5557&nbsp;</span><a name="line_5557"></a></li>
<li id="line_5558" class="even"><span class="lineNumber">&nbsp;5558&nbsp;</span>		this.segPopover&nbsp;=&nbsp;new&nbsp;Popover(options);<a name="line_5558"></a></li>
<li id="line_5559" class="odd"><span class="lineNumber">&nbsp;5559&nbsp;</span>		this.segPopover.show();<a name="line_5559"></a></li>
<li id="line_5560" class="even"><span class="lineNumber">&nbsp;5560&nbsp;</span>	},<a name="line_5560"></a></li>
<li id="line_5561" class="odd"><span class="lineNumber">&nbsp;5561&nbsp;</span><a name="line_5561"></a></li>
<li id="line_5562" class="even"><span class="lineNumber">&nbsp;5562&nbsp;</span><a name="line_5562"></a></li>
<li id="line_5563" class="odd"><span class="lineNumber">&nbsp;5563&nbsp;</span>	//&nbsp;Builds&nbsp;the&nbsp;inner&nbsp;DOM&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment&nbsp;popover<a name="line_5563"></a></li>
<li id="line_5564" class="even"><span class="lineNumber">&nbsp;5564&nbsp;</span>	renderSegPopoverContent:&nbsp;function(cell,&nbsp;segs)&nbsp;{<a name="line_5564"></a></li>
<li id="line_5565" class="odd"><span class="lineNumber">&nbsp;5565&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_5565"></a></li>
<li id="line_5566" class="even"><span class="lineNumber">&nbsp;5566&nbsp;</span>		var&nbsp;isTheme&nbsp;=&nbsp;view.opt('theme');<a name="line_5566"></a></li>
<li id="line_5567" class="odd"><span class="lineNumber">&nbsp;5567&nbsp;</span>		var&nbsp;title&nbsp;=&nbsp;cell.start.format(view.opt('dayPopoverFormat'));<a name="line_5567"></a></li>
<li id="line_5568" class="even"><span class="lineNumber">&nbsp;5568&nbsp;</span>		var&nbsp;content&nbsp;=&nbsp;$(<a name="line_5568"></a></li>
<li id="line_5569" class="odd"><span class="lineNumber">&nbsp;5569&nbsp;</span>			'&lt;div&nbsp;class="fc-header&nbsp;'&nbsp;+&nbsp;view.widgetHeaderClass&nbsp;+&nbsp;'"&gt;'&nbsp;+<a name="line_5569"></a></li>
<li id="line_5570" class="even"><span class="lineNumber">&nbsp;5570&nbsp;</span>				'&lt;span&nbsp;class="fc-close&nbsp;'&nbsp;+<a name="line_5570"></a></li>
<li id="line_5571" class="odd"><span class="lineNumber">&nbsp;5571&nbsp;</span>					(isTheme&nbsp;?&nbsp;'ui-icon&nbsp;ui-icon-closethick'&nbsp;:&nbsp;'fc-icon&nbsp;fc-icon-x')&nbsp;+<a name="line_5571"></a></li>
<li id="line_5572" class="even"><span class="lineNumber">&nbsp;5572&nbsp;</span>				'"&gt;&lt;/span&gt;'&nbsp;+<a name="line_5572"></a></li>
<li id="line_5573" class="odd"><span class="lineNumber">&nbsp;5573&nbsp;</span>				'&lt;span&nbsp;class="fc-title"&gt;'&nbsp;+<a name="line_5573"></a></li>
<li id="line_5574" class="even"><span class="lineNumber">&nbsp;5574&nbsp;</span>					htmlEscape(title)&nbsp;+<a name="line_5574"></a></li>
<li id="line_5575" class="odd"><span class="lineNumber">&nbsp;5575&nbsp;</span>				'&lt;/span&gt;'&nbsp;+<a name="line_5575"></a></li>
<li id="line_5576" class="even"><span class="lineNumber">&nbsp;5576&nbsp;</span>				'&lt;div&nbsp;class="fc-clear"/&gt;'&nbsp;+<a name="line_5576"></a></li>
<li id="line_5577" class="odd"><span class="lineNumber">&nbsp;5577&nbsp;</span>			'&lt;/div&gt;'&nbsp;+<a name="line_5577"></a></li>
<li id="line_5578" class="even"><span class="lineNumber">&nbsp;5578&nbsp;</span>			'&lt;div&nbsp;class="fc-body&nbsp;'&nbsp;+&nbsp;view.widgetContentClass&nbsp;+&nbsp;'"&gt;'&nbsp;+<a name="line_5578"></a></li>
<li id="line_5579" class="odd"><span class="lineNumber">&nbsp;5579&nbsp;</span>				'&lt;div&nbsp;class="fc-event-container"&gt;&lt;/div&gt;'&nbsp;+<a name="line_5579"></a></li>
<li id="line_5580" class="even"><span class="lineNumber">&nbsp;5580&nbsp;</span>			'&lt;/div&gt;'<a name="line_5580"></a></li>
<li id="line_5581" class="odd"><span class="lineNumber">&nbsp;5581&nbsp;</span>		);<a name="line_5581"></a></li>
<li id="line_5582" class="even"><span class="lineNumber">&nbsp;5582&nbsp;</span>		var&nbsp;segContainer&nbsp;=&nbsp;content.find('.fc-event-container');<a name="line_5582"></a></li>
<li id="line_5583" class="odd"><span class="lineNumber">&nbsp;5583&nbsp;</span>		var&nbsp;i;<a name="line_5583"></a></li>
<li id="line_5584" class="even"><span class="lineNumber">&nbsp;5584&nbsp;</span><a name="line_5584"></a></li>
<li id="line_5585" class="odd"><span class="lineNumber">&nbsp;5585&nbsp;</span>		//&nbsp;render&nbsp;each&nbsp;seg's&nbsp;`el`&nbsp;and&nbsp;only&nbsp;return&nbsp;the&nbsp;visible&nbsp;segs<a name="line_5585"></a></li>
<li id="line_5586" class="even"><span class="lineNumber">&nbsp;5586&nbsp;</span>		segs&nbsp;=&nbsp;this.renderFgSegEls(segs,&nbsp;true);&nbsp;//&nbsp;disableResizing=true<a name="line_5586"></a></li>
<li id="line_5587" class="odd"><span class="lineNumber">&nbsp;5587&nbsp;</span>		this.popoverSegs&nbsp;=&nbsp;segs;<a name="line_5587"></a></li>
<li id="line_5588" class="even"><span class="lineNumber">&nbsp;5588&nbsp;</span><a name="line_5588"></a></li>
<li id="line_5589" class="odd"><span class="lineNumber">&nbsp;5589&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;segs.length;&nbsp;i++)&nbsp;{<a name="line_5589"></a></li>
<li id="line_5590" class="even"><span class="lineNumber">&nbsp;5590&nbsp;</span><a name="line_5590"></a></li>
<li id="line_5591" class="odd"><span class="lineNumber">&nbsp;5591&nbsp;</span>			//&nbsp;because&nbsp;segments&nbsp;in&nbsp;the&nbsp;popover&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;a&nbsp;grid&nbsp;coordinate&nbsp;system,&nbsp;provide&nbsp;a&nbsp;hint&nbsp;to&nbsp;any<a name="line_5591"></a></li>
<li id="line_5592" class="even"><span class="lineNumber">&nbsp;5592&nbsp;</span>			//&nbsp;grids&nbsp;that&nbsp;want&nbsp;to&nbsp;do&nbsp;drag-n-drop&nbsp;about&nbsp;which&nbsp;cell&nbsp;it&nbsp;came&nbsp;from<a name="line_5592"></a></li>
<li id="line_5593" class="odd"><span class="lineNumber">&nbsp;5593&nbsp;</span>			segs[i].cell&nbsp;=&nbsp;cell;<a name="line_5593"></a></li>
<li id="line_5594" class="even"><span class="lineNumber">&nbsp;5594&nbsp;</span><a name="line_5594"></a></li>
<li id="line_5595" class="odd"><span class="lineNumber">&nbsp;5595&nbsp;</span>			segContainer.append(segs[i].el);<a name="line_5595"></a></li>
<li id="line_5596" class="even"><span class="lineNumber">&nbsp;5596&nbsp;</span>		}<a name="line_5596"></a></li>
<li id="line_5597" class="odd"><span class="lineNumber">&nbsp;5597&nbsp;</span><a name="line_5597"></a></li>
<li id="line_5598" class="even"><span class="lineNumber">&nbsp;5598&nbsp;</span>		return&nbsp;content;<a name="line_5598"></a></li>
<li id="line_5599" class="odd"><span class="lineNumber">&nbsp;5599&nbsp;</span>	},<a name="line_5599"></a></li>
<li id="line_5600" class="even"><span class="lineNumber">&nbsp;5600&nbsp;</span><a name="line_5600"></a></li>
<li id="line_5601" class="odd"><span class="lineNumber">&nbsp;5601&nbsp;</span><a name="line_5601"></a></li>
<li id="line_5602" class="even"><span class="lineNumber">&nbsp;5602&nbsp;</span>	//&nbsp;Given&nbsp;the&nbsp;events&nbsp;within&nbsp;an&nbsp;array&nbsp;of&nbsp;segment&nbsp;objects,&nbsp;reslice&nbsp;them&nbsp;to&nbsp;be&nbsp;in&nbsp;a&nbsp;single&nbsp;day<a name="line_5602"></a></li>
<li id="line_5603" class="odd"><span class="lineNumber">&nbsp;5603&nbsp;</span>	resliceDaySegs:&nbsp;function(segs,&nbsp;dayDate)&nbsp;{<a name="line_5603"></a></li>
<li id="line_5604" class="even"><span class="lineNumber">&nbsp;5604&nbsp;</span><a name="line_5604"></a></li>
<li id="line_5605" class="odd"><span class="lineNumber">&nbsp;5605&nbsp;</span>		//&nbsp;build&nbsp;an&nbsp;array&nbsp;of&nbsp;the&nbsp;original&nbsp;events<a name="line_5605"></a></li>
<li id="line_5606" class="even"><span class="lineNumber">&nbsp;5606&nbsp;</span>		var&nbsp;events&nbsp;=&nbsp;$.map(segs,&nbsp;function(seg)&nbsp;{<a name="line_5606"></a></li>
<li id="line_5607" class="odd"><span class="lineNumber">&nbsp;5607&nbsp;</span>			return&nbsp;seg.event;<a name="line_5607"></a></li>
<li id="line_5608" class="even"><span class="lineNumber">&nbsp;5608&nbsp;</span>		});<a name="line_5608"></a></li>
<li id="line_5609" class="odd"><span class="lineNumber">&nbsp;5609&nbsp;</span><a name="line_5609"></a></li>
<li id="line_5610" class="even"><span class="lineNumber">&nbsp;5610&nbsp;</span>		var&nbsp;dayStart&nbsp;=&nbsp;dayDate.clone().stripTime();<a name="line_5610"></a></li>
<li id="line_5611" class="odd"><span class="lineNumber">&nbsp;5611&nbsp;</span>		var&nbsp;dayEnd&nbsp;=&nbsp;dayStart.clone().add(1,&nbsp;'days');<a name="line_5611"></a></li>
<li id="line_5612" class="even"><span class="lineNumber">&nbsp;5612&nbsp;</span>		var&nbsp;dayRange&nbsp;=&nbsp;{&nbsp;start:&nbsp;dayStart,&nbsp;end:&nbsp;dayEnd&nbsp;};<a name="line_5612"></a></li>
<li id="line_5613" class="odd"><span class="lineNumber">&nbsp;5613&nbsp;</span><a name="line_5613"></a></li>
<li id="line_5614" class="even"><span class="lineNumber">&nbsp;5614&nbsp;</span>		//&nbsp;slice&nbsp;the&nbsp;events&nbsp;with&nbsp;a&nbsp;custom&nbsp;slicing&nbsp;function<a name="line_5614"></a></li>
<li id="line_5615" class="odd"><span class="lineNumber">&nbsp;5615&nbsp;</span>		segs&nbsp;=&nbsp;this.eventsToSegs(<a name="line_5615"></a></li>
<li id="line_5616" class="even"><span class="lineNumber">&nbsp;5616&nbsp;</span>			events,<a name="line_5616"></a></li>
<li id="line_5617" class="odd"><span class="lineNumber">&nbsp;5617&nbsp;</span>			function(range)&nbsp;{<a name="line_5617"></a></li>
<li id="line_5618" class="even"><span class="lineNumber">&nbsp;5618&nbsp;</span>				var&nbsp;seg&nbsp;=&nbsp;intersectionToSeg(range,&nbsp;dayRange);&nbsp;//&nbsp;undefind&nbsp;if&nbsp;no&nbsp;intersection<a name="line_5618"></a></li>
<li id="line_5619" class="odd"><span class="lineNumber">&nbsp;5619&nbsp;</span>				return&nbsp;seg&nbsp;?&nbsp;[&nbsp;seg&nbsp;]&nbsp;:&nbsp;[];&nbsp;//&nbsp;must&nbsp;return&nbsp;an&nbsp;array&nbsp;of&nbsp;segments<a name="line_5619"></a></li>
<li id="line_5620" class="even"><span class="lineNumber">&nbsp;5620&nbsp;</span>			}<a name="line_5620"></a></li>
<li id="line_5621" class="odd"><span class="lineNumber">&nbsp;5621&nbsp;</span>		);<a name="line_5621"></a></li>
<li id="line_5622" class="even"><span class="lineNumber">&nbsp;5622&nbsp;</span><a name="line_5622"></a></li>
<li id="line_5623" class="odd"><span class="lineNumber">&nbsp;5623&nbsp;</span>		//&nbsp;force&nbsp;an&nbsp;order&nbsp;because&nbsp;eventsToSegs&nbsp;doesn't&nbsp;guarantee&nbsp;one<a name="line_5623"></a></li>
<li id="line_5624" class="even"><span class="lineNumber">&nbsp;5624&nbsp;</span>		segs.sort(compareSegs);<a name="line_5624"></a></li>
<li id="line_5625" class="odd"><span class="lineNumber">&nbsp;5625&nbsp;</span><a name="line_5625"></a></li>
<li id="line_5626" class="even"><span class="lineNumber">&nbsp;5626&nbsp;</span>		return&nbsp;segs;<a name="line_5626"></a></li>
<li id="line_5627" class="odd"><span class="lineNumber">&nbsp;5627&nbsp;</span>	},<a name="line_5627"></a></li>
<li id="line_5628" class="even"><span class="lineNumber">&nbsp;5628&nbsp;</span><a name="line_5628"></a></li>
<li id="line_5629" class="odd"><span class="lineNumber">&nbsp;5629&nbsp;</span><a name="line_5629"></a></li>
<li id="line_5630" class="even"><span class="lineNumber">&nbsp;5630&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;text&nbsp;that&nbsp;should&nbsp;be&nbsp;inside&nbsp;a&nbsp;"more"&nbsp;link,&nbsp;given&nbsp;the&nbsp;number&nbsp;of&nbsp;events&nbsp;it&nbsp;represents<a name="line_5630"></a></li>
<li id="line_5631" class="odd"><span class="lineNumber">&nbsp;5631&nbsp;</span>	getMoreLinkText:&nbsp;function(num)&nbsp;{<a name="line_5631"></a></li>
<li id="line_5632" class="even"><span class="lineNumber">&nbsp;5632&nbsp;</span>		var&nbsp;opt&nbsp;=&nbsp;this.view.opt('eventLimitText');<a name="line_5632"></a></li>
<li id="line_5633" class="odd"><span class="lineNumber">&nbsp;5633&nbsp;</span><a name="line_5633"></a></li>
<li id="line_5634" class="even"><span class="lineNumber">&nbsp;5634&nbsp;</span>		if&nbsp;(typeof&nbsp;opt&nbsp;===&nbsp;'function')&nbsp;{<a name="line_5634"></a></li>
<li id="line_5635" class="odd"><span class="lineNumber">&nbsp;5635&nbsp;</span>			return&nbsp;opt(num);<a name="line_5635"></a></li>
<li id="line_5636" class="even"><span class="lineNumber">&nbsp;5636&nbsp;</span>		}<a name="line_5636"></a></li>
<li id="line_5637" class="odd"><span class="lineNumber">&nbsp;5637&nbsp;</span>		else&nbsp;{<a name="line_5637"></a></li>
<li id="line_5638" class="even"><span class="lineNumber">&nbsp;5638&nbsp;</span>			return&nbsp;'+'&nbsp;+&nbsp;num&nbsp;+&nbsp;'&nbsp;'&nbsp;+&nbsp;opt;<a name="line_5638"></a></li>
<li id="line_5639" class="odd"><span class="lineNumber">&nbsp;5639&nbsp;</span>		}<a name="line_5639"></a></li>
<li id="line_5640" class="even"><span class="lineNumber">&nbsp;5640&nbsp;</span>	},<a name="line_5640"></a></li>
<li id="line_5641" class="odd"><span class="lineNumber">&nbsp;5641&nbsp;</span><a name="line_5641"></a></li>
<li id="line_5642" class="even"><span class="lineNumber">&nbsp;5642&nbsp;</span><a name="line_5642"></a></li>
<li id="line_5643" class="odd"><span class="lineNumber">&nbsp;5643&nbsp;</span>	//&nbsp;Returns&nbsp;segments&nbsp;within&nbsp;a&nbsp;given&nbsp;cell.<a name="line_5643"></a></li>
<li id="line_5644" class="even"><span class="lineNumber">&nbsp;5644&nbsp;</span>	//&nbsp;If&nbsp;`startLevel`&nbsp;is&nbsp;specified,&nbsp;returns&nbsp;only&nbsp;events&nbsp;including&nbsp;and&nbsp;below&nbsp;that&nbsp;level.&nbsp;Otherwise&nbsp;returns&nbsp;all&nbsp;segs.<a name="line_5644"></a></li>
<li id="line_5645" class="odd"><span class="lineNumber">&nbsp;5645&nbsp;</span>	getCellSegs:&nbsp;function(cell,&nbsp;startLevel)&nbsp;{<a name="line_5645"></a></li>
<li id="line_5646" class="even"><span class="lineNumber">&nbsp;5646&nbsp;</span>		var&nbsp;segMatrix&nbsp;=&nbsp;this.rowStructs[cell.row].segMatrix;<a name="line_5646"></a></li>
<li id="line_5647" class="odd"><span class="lineNumber">&nbsp;5647&nbsp;</span>		var&nbsp;level&nbsp;=&nbsp;startLevel&nbsp;||&nbsp;0;<a name="line_5647"></a></li>
<li id="line_5648" class="even"><span class="lineNumber">&nbsp;5648&nbsp;</span>		var&nbsp;segs&nbsp;=&nbsp;[];<a name="line_5648"></a></li>
<li id="line_5649" class="odd"><span class="lineNumber">&nbsp;5649&nbsp;</span>		var&nbsp;seg;<a name="line_5649"></a></li>
<li id="line_5650" class="even"><span class="lineNumber">&nbsp;5650&nbsp;</span><a name="line_5650"></a></li>
<li id="line_5651" class="odd"><span class="lineNumber">&nbsp;5651&nbsp;</span>		while&nbsp;(level&nbsp;&lt;&nbsp;segMatrix.length)&nbsp;{<a name="line_5651"></a></li>
<li id="line_5652" class="even"><span class="lineNumber">&nbsp;5652&nbsp;</span>			seg&nbsp;=&nbsp;segMatrix[level][cell.col];<a name="line_5652"></a></li>
<li id="line_5653" class="odd"><span class="lineNumber">&nbsp;5653&nbsp;</span>			if&nbsp;(seg)&nbsp;{<a name="line_5653"></a></li>
<li id="line_5654" class="even"><span class="lineNumber">&nbsp;5654&nbsp;</span>				segs.push(seg);<a name="line_5654"></a></li>
<li id="line_5655" class="odd"><span class="lineNumber">&nbsp;5655&nbsp;</span>			}<a name="line_5655"></a></li>
<li id="line_5656" class="even"><span class="lineNumber">&nbsp;5656&nbsp;</span>			level++;<a name="line_5656"></a></li>
<li id="line_5657" class="odd"><span class="lineNumber">&nbsp;5657&nbsp;</span>		}<a name="line_5657"></a></li>
<li id="line_5658" class="even"><span class="lineNumber">&nbsp;5658&nbsp;</span><a name="line_5658"></a></li>
<li id="line_5659" class="odd"><span class="lineNumber">&nbsp;5659&nbsp;</span>		return&nbsp;segs;<a name="line_5659"></a></li>
<li id="line_5660" class="even"><span class="lineNumber">&nbsp;5660&nbsp;</span>	}<a name="line_5660"></a></li>
<li id="line_5661" class="odd"><span class="lineNumber">&nbsp;5661&nbsp;</span><a name="line_5661"></a></li>
<li id="line_5662" class="even"><span class="lineNumber">&nbsp;5662&nbsp;</span>});<a name="line_5662"></a></li>
<li id="line_5663" class="odd"><span class="lineNumber">&nbsp;5663&nbsp;</span><a name="line_5663"></a></li>
<li id="line_5664" class="even"><span class="lineNumber">&nbsp;5664&nbsp;</span>;;<a name="line_5664"></a></li>
<li id="line_5665" class="odd"><span class="lineNumber">&nbsp;5665&nbsp;</span><a name="line_5665"></a></li>
<li id="line_5666" class="even"><span class="lineNumber">&nbsp;5666&nbsp;</span>/*&nbsp;A&nbsp;component&nbsp;that&nbsp;renders&nbsp;one&nbsp;or&nbsp;more&nbsp;columns&nbsp;of&nbsp;vertical&nbsp;time&nbsp;slots<a name="line_5666"></a></li>
<li id="line_5667" class="odd"><span class="lineNumber">&nbsp;5667&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_5667"></a></li>
<li id="line_5668" class="even"><span class="lineNumber">&nbsp;5668&nbsp;</span><a name="line_5668"></a></li>
<li id="line_5669" class="odd"><span class="lineNumber">&nbsp;5669&nbsp;</span>var&nbsp;TimeGrid&nbsp;=&nbsp;Grid.extend({<a name="line_5669"></a></li>
<li id="line_5670" class="even"><span class="lineNumber">&nbsp;5670&nbsp;</span><a name="line_5670"></a></li>
<li id="line_5671" class="odd"><span class="lineNumber">&nbsp;5671&nbsp;</span>	slotDuration:&nbsp;null,&nbsp;//&nbsp;duration&nbsp;of&nbsp;a&nbsp;"slot",&nbsp;a&nbsp;distinct&nbsp;time&nbsp;segment&nbsp;on&nbsp;given&nbsp;day,&nbsp;visualized&nbsp;by&nbsp;lines<a name="line_5671"></a></li>
<li id="line_5672" class="even"><span class="lineNumber">&nbsp;5672&nbsp;</span>	snapDuration:&nbsp;null,&nbsp;//&nbsp;granularity&nbsp;of&nbsp;time&nbsp;for&nbsp;dragging&nbsp;and&nbsp;selecting<a name="line_5672"></a></li>
<li id="line_5673" class="odd"><span class="lineNumber">&nbsp;5673&nbsp;</span>	minTime:&nbsp;null,&nbsp;//&nbsp;Duration&nbsp;object&nbsp;that&nbsp;denotes&nbsp;the&nbsp;first&nbsp;visible&nbsp;time&nbsp;of&nbsp;any&nbsp;given&nbsp;day<a name="line_5673"></a></li>
<li id="line_5674" class="even"><span class="lineNumber">&nbsp;5674&nbsp;</span>	maxTime:&nbsp;null,&nbsp;//&nbsp;Duration&nbsp;object&nbsp;that&nbsp;denotes&nbsp;the&nbsp;exclusive&nbsp;visible&nbsp;end&nbsp;time&nbsp;of&nbsp;any&nbsp;given&nbsp;day<a name="line_5674"></a></li>
<li id="line_5675" class="odd"><span class="lineNumber">&nbsp;5675&nbsp;</span>	colDates:&nbsp;null,&nbsp;//&nbsp;whole-day&nbsp;dates&nbsp;for&nbsp;each&nbsp;column.&nbsp;left&nbsp;to&nbsp;right<a name="line_5675"></a></li>
<li id="line_5676" class="even"><span class="lineNumber">&nbsp;5676&nbsp;</span>	axisFormat:&nbsp;null,&nbsp;//&nbsp;formatting&nbsp;string&nbsp;for&nbsp;times&nbsp;running&nbsp;along&nbsp;vertical&nbsp;axis<a name="line_5676"></a></li>
<li id="line_5677" class="odd"><span class="lineNumber">&nbsp;5677&nbsp;</span><a name="line_5677"></a></li>
<li id="line_5678" class="even"><span class="lineNumber">&nbsp;5678&nbsp;</span>	dayEls:&nbsp;null,&nbsp;//&nbsp;cells&nbsp;elements&nbsp;in&nbsp;the&nbsp;day-row&nbsp;background<a name="line_5678"></a></li>
<li id="line_5679" class="odd"><span class="lineNumber">&nbsp;5679&nbsp;</span>	slatEls:&nbsp;null,&nbsp;//&nbsp;elements&nbsp;running&nbsp;horizontally&nbsp;across&nbsp;all&nbsp;columns<a name="line_5679"></a></li>
<li id="line_5680" class="even"><span class="lineNumber">&nbsp;5680&nbsp;</span><a name="line_5680"></a></li>
<li id="line_5681" class="odd"><span class="lineNumber">&nbsp;5681&nbsp;</span>	slatTops:&nbsp;null,&nbsp;//&nbsp;an&nbsp;array&nbsp;of&nbsp;top&nbsp;positions,&nbsp;relative&nbsp;to&nbsp;the&nbsp;container.&nbsp;last&nbsp;item&nbsp;holds&nbsp;bottom&nbsp;of&nbsp;last&nbsp;slot<a name="line_5681"></a></li>
<li id="line_5682" class="even"><span class="lineNumber">&nbsp;5682&nbsp;</span><a name="line_5682"></a></li>
<li id="line_5683" class="odd"><span class="lineNumber">&nbsp;5683&nbsp;</span>	helperEl:&nbsp;null,&nbsp;//&nbsp;cell&nbsp;skeleton&nbsp;element&nbsp;for&nbsp;rendering&nbsp;the&nbsp;mock&nbsp;event&nbsp;"helper"<a name="line_5683"></a></li>
<li id="line_5684" class="even"><span class="lineNumber">&nbsp;5684&nbsp;</span><a name="line_5684"></a></li>
<li id="line_5685" class="odd"><span class="lineNumber">&nbsp;5685&nbsp;</span>	businessHourSegs:&nbsp;null,<a name="line_5685"></a></li>
<li id="line_5686" class="even"><span class="lineNumber">&nbsp;5686&nbsp;</span><a name="line_5686"></a></li>
<li id="line_5687" class="odd"><span class="lineNumber">&nbsp;5687&nbsp;</span><a name="line_5687"></a></li>
<li id="line_5688" class="even"><span class="lineNumber">&nbsp;5688&nbsp;</span>	constructor:&nbsp;function()&nbsp;{<a name="line_5688"></a></li>
<li id="line_5689" class="odd"><span class="lineNumber">&nbsp;5689&nbsp;</span>		Grid.apply(this,&nbsp;arguments);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-constructor<a name="line_5689"></a></li>
<li id="line_5690" class="even"><span class="lineNumber">&nbsp;5690&nbsp;</span>		this.processOptions();<a name="line_5690"></a></li>
<li id="line_5691" class="odd"><span class="lineNumber">&nbsp;5691&nbsp;</span>	},<a name="line_5691"></a></li>
<li id="line_5692" class="even"><span class="lineNumber">&nbsp;5692&nbsp;</span><a name="line_5692"></a></li>
<li id="line_5693" class="odd"><span class="lineNumber">&nbsp;5693&nbsp;</span><a name="line_5693"></a></li>
<li id="line_5694" class="even"><span class="lineNumber">&nbsp;5694&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;time&nbsp;grid&nbsp;into&nbsp;`this.el`,&nbsp;which&nbsp;should&nbsp;already&nbsp;be&nbsp;assigned.<a name="line_5694"></a></li>
<li id="line_5695" class="odd"><span class="lineNumber">&nbsp;5695&nbsp;</span>	//&nbsp;Relies&nbsp;on&nbsp;the&nbsp;view's&nbsp;colCnt.&nbsp;In&nbsp;the&nbsp;future,&nbsp;this&nbsp;component&nbsp;should&nbsp;probably&nbsp;be&nbsp;self-sufficient.<a name="line_5695"></a></li>
<li id="line_5696" class="even"><span class="lineNumber">&nbsp;5696&nbsp;</span>	renderDates:&nbsp;function()&nbsp;{<a name="line_5696"></a></li>
<li id="line_5697" class="odd"><span class="lineNumber">&nbsp;5697&nbsp;</span>		this.el.html(this.renderHtml());<a name="line_5697"></a></li>
<li id="line_5698" class="even"><span class="lineNumber">&nbsp;5698&nbsp;</span>		this.dayEls&nbsp;=&nbsp;this.el.find('.fc-day');<a name="line_5698"></a></li>
<li id="line_5699" class="odd"><span class="lineNumber">&nbsp;5699&nbsp;</span>		this.slatEls&nbsp;=&nbsp;this.el.find('.fc-slats&nbsp;tr');<a name="line_5699"></a></li>
<li id="line_5700" class="even"><span class="lineNumber">&nbsp;5700&nbsp;</span>	},<a name="line_5700"></a></li>
<li id="line_5701" class="odd"><span class="lineNumber">&nbsp;5701&nbsp;</span><a name="line_5701"></a></li>
<li id="line_5702" class="even"><span class="lineNumber">&nbsp;5702&nbsp;</span><a name="line_5702"></a></li>
<li id="line_5703" class="odd"><span class="lineNumber">&nbsp;5703&nbsp;</span>	renderBusinessHours:&nbsp;function()&nbsp;{<a name="line_5703"></a></li>
<li id="line_5704" class="even"><span class="lineNumber">&nbsp;5704&nbsp;</span>		var&nbsp;events&nbsp;=&nbsp;this.view.calendar.getBusinessHoursEvents();<a name="line_5704"></a></li>
<li id="line_5705" class="odd"><span class="lineNumber">&nbsp;5705&nbsp;</span>		this.businessHourSegs&nbsp;=&nbsp;this.renderFill('businessHours',&nbsp;this.eventsToSegs(events),&nbsp;'bgevent');<a name="line_5705"></a></li>
<li id="line_5706" class="even"><span class="lineNumber">&nbsp;5706&nbsp;</span>	},<a name="line_5706"></a></li>
<li id="line_5707" class="odd"><span class="lineNumber">&nbsp;5707&nbsp;</span><a name="line_5707"></a></li>
<li id="line_5708" class="even"><span class="lineNumber">&nbsp;5708&nbsp;</span><a name="line_5708"></a></li>
<li id="line_5709" class="odd"><span class="lineNumber">&nbsp;5709&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;basic&nbsp;HTML&nbsp;skeleton&nbsp;for&nbsp;the&nbsp;grid<a name="line_5709"></a></li>
<li id="line_5710" class="even"><span class="lineNumber">&nbsp;5710&nbsp;</span>	renderHtml:&nbsp;function()&nbsp;{<a name="line_5710"></a></li>
<li id="line_5711" class="odd"><span class="lineNumber">&nbsp;5711&nbsp;</span>		return&nbsp;''&nbsp;+<a name="line_5711"></a></li>
<li id="line_5712" class="even"><span class="lineNumber">&nbsp;5712&nbsp;</span>			'&lt;div&nbsp;class="fc-bg"&gt;'&nbsp;+<a name="line_5712"></a></li>
<li id="line_5713" class="odd"><span class="lineNumber">&nbsp;5713&nbsp;</span>				'&lt;table&gt;'&nbsp;+<a name="line_5713"></a></li>
<li id="line_5714" class="even"><span class="lineNumber">&nbsp;5714&nbsp;</span>					this.rowHtml('slotBg')&nbsp;+&nbsp;//&nbsp;leverages&nbsp;RowRenderer,&nbsp;which&nbsp;will&nbsp;call&nbsp;slotBgCellHtml<a name="line_5714"></a></li>
<li id="line_5715" class="odd"><span class="lineNumber">&nbsp;5715&nbsp;</span>				'&lt;/table&gt;'&nbsp;+<a name="line_5715"></a></li>
<li id="line_5716" class="even"><span class="lineNumber">&nbsp;5716&nbsp;</span>			'&lt;/div&gt;'&nbsp;+<a name="line_5716"></a></li>
<li id="line_5717" class="odd"><span class="lineNumber">&nbsp;5717&nbsp;</span>			'&lt;div&nbsp;class="fc-slats"&gt;'&nbsp;+<a name="line_5717"></a></li>
<li id="line_5718" class="even"><span class="lineNumber">&nbsp;5718&nbsp;</span>				'&lt;table&gt;'&nbsp;+<a name="line_5718"></a></li>
<li id="line_5719" class="odd"><span class="lineNumber">&nbsp;5719&nbsp;</span>					this.slatRowHtml()&nbsp;+<a name="line_5719"></a></li>
<li id="line_5720" class="even"><span class="lineNumber">&nbsp;5720&nbsp;</span>				'&lt;/table&gt;'&nbsp;+<a name="line_5720"></a></li>
<li id="line_5721" class="odd"><span class="lineNumber">&nbsp;5721&nbsp;</span>			'&lt;/div&gt;';<a name="line_5721"></a></li>
<li id="line_5722" class="even"><span class="lineNumber">&nbsp;5722&nbsp;</span>	},<a name="line_5722"></a></li>
<li id="line_5723" class="odd"><span class="lineNumber">&nbsp;5723&nbsp;</span><a name="line_5723"></a></li>
<li id="line_5724" class="even"><span class="lineNumber">&nbsp;5724&nbsp;</span><a name="line_5724"></a></li>
<li id="line_5725" class="odd"><span class="lineNumber">&nbsp;5725&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;HTML&nbsp;for&nbsp;a&nbsp;vertical&nbsp;background&nbsp;cell&nbsp;behind&nbsp;the&nbsp;slots.<a name="line_5725"></a></li>
<li id="line_5726" class="even"><span class="lineNumber">&nbsp;5726&nbsp;</span>	//&nbsp;This&nbsp;method&nbsp;is&nbsp;distinct&nbsp;from&nbsp;'bg'&nbsp;because&nbsp;we&nbsp;wanted&nbsp;a&nbsp;new&nbsp;`rowType`&nbsp;so&nbsp;the&nbsp;View&nbsp;could&nbsp;customize&nbsp;the&nbsp;rendering.<a name="line_5726"></a></li>
<li id="line_5727" class="odd"><span class="lineNumber">&nbsp;5727&nbsp;</span>	slotBgCellHtml:&nbsp;function(cell)&nbsp;{<a name="line_5727"></a></li>
<li id="line_5728" class="even"><span class="lineNumber">&nbsp;5728&nbsp;</span>		return&nbsp;this.bgCellHtml(cell);<a name="line_5728"></a></li>
<li id="line_5729" class="odd"><span class="lineNumber">&nbsp;5729&nbsp;</span>	},<a name="line_5729"></a></li>
<li id="line_5730" class="even"><span class="lineNumber">&nbsp;5730&nbsp;</span><a name="line_5730"></a></li>
<li id="line_5731" class="odd"><span class="lineNumber">&nbsp;5731&nbsp;</span><a name="line_5731"></a></li>
<li id="line_5732" class="even"><span class="lineNumber">&nbsp;5732&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;for&nbsp;the&nbsp;horizontal&nbsp;"slats"&nbsp;that&nbsp;run&nbsp;width-wise.&nbsp;Has&nbsp;a&nbsp;time&nbsp;axis&nbsp;on&nbsp;a&nbsp;side.&nbsp;Depends&nbsp;on&nbsp;RTL.<a name="line_5732"></a></li>
<li id="line_5733" class="odd"><span class="lineNumber">&nbsp;5733&nbsp;</span>	slatRowHtml:&nbsp;function()&nbsp;{<a name="line_5733"></a></li>
<li id="line_5734" class="even"><span class="lineNumber">&nbsp;5734&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_5734"></a></li>
<li id="line_5735" class="odd"><span class="lineNumber">&nbsp;5735&nbsp;</span>		var&nbsp;isRTL&nbsp;=&nbsp;this.isRTL;<a name="line_5735"></a></li>
<li id="line_5736" class="even"><span class="lineNumber">&nbsp;5736&nbsp;</span>		var&nbsp;html&nbsp;=&nbsp;'';<a name="line_5736"></a></li>
<li id="line_5737" class="odd"><span class="lineNumber">&nbsp;5737&nbsp;</span>		var&nbsp;slotNormal&nbsp;=&nbsp;this.slotDuration.asMinutes()&nbsp;%&nbsp;15&nbsp;===&nbsp;0;<a name="line_5737"></a></li>
<li id="line_5738" class="even"><span class="lineNumber">&nbsp;5738&nbsp;</span>		var&nbsp;slotTime&nbsp;=&nbsp;moment.duration(+this.minTime);&nbsp;//&nbsp;wish&nbsp;there&nbsp;was&nbsp;.clone()&nbsp;for&nbsp;durations<a name="line_5738"></a></li>
<li id="line_5739" class="odd"><span class="lineNumber">&nbsp;5739&nbsp;</span>		var&nbsp;slotDate;&nbsp;//&nbsp;will&nbsp;be&nbsp;on&nbsp;the&nbsp;view's&nbsp;first&nbsp;day,&nbsp;but&nbsp;we&nbsp;only&nbsp;care&nbsp;about&nbsp;its&nbsp;time<a name="line_5739"></a></li>
<li id="line_5740" class="even"><span class="lineNumber">&nbsp;5740&nbsp;</span>		var&nbsp;minutes;<a name="line_5740"></a></li>
<li id="line_5741" class="odd"><span class="lineNumber">&nbsp;5741&nbsp;</span>		var&nbsp;axisHtml;<a name="line_5741"></a></li>
<li id="line_5742" class="even"><span class="lineNumber">&nbsp;5742&nbsp;</span><a name="line_5742"></a></li>
<li id="line_5743" class="odd"><span class="lineNumber">&nbsp;5743&nbsp;</span>		//&nbsp;Calculate&nbsp;the&nbsp;time&nbsp;for&nbsp;each&nbsp;slot<a name="line_5743"></a></li>
<li id="line_5744" class="even"><span class="lineNumber">&nbsp;5744&nbsp;</span>		while&nbsp;(slotTime&nbsp;&lt;&nbsp;this.maxTime)&nbsp;{<a name="line_5744"></a></li>
<li id="line_5745" class="odd"><span class="lineNumber">&nbsp;5745&nbsp;</span>			slotDate&nbsp;=&nbsp;this.start.clone().time(slotTime);&nbsp;//&nbsp;will&nbsp;be&nbsp;in&nbsp;UTC&nbsp;but&nbsp;that's&nbsp;good.&nbsp;to&nbsp;avoid&nbsp;DST&nbsp;issues<a name="line_5745"></a></li>
<li id="line_5746" class="even"><span class="lineNumber">&nbsp;5746&nbsp;</span>			minutes&nbsp;=&nbsp;slotDate.minutes();<a name="line_5746"></a></li>
<li id="line_5747" class="odd"><span class="lineNumber">&nbsp;5747&nbsp;</span><a name="line_5747"></a></li>
<li id="line_5748" class="even"><span class="lineNumber">&nbsp;5748&nbsp;</span>			axisHtml&nbsp;=<a name="line_5748"></a></li>
<li id="line_5749" class="odd"><span class="lineNumber">&nbsp;5749&nbsp;</span>				'&lt;td&nbsp;class="fc-axis&nbsp;&nbsp;'&nbsp;+&nbsp;view.widgetContentClass&nbsp;+&nbsp;'"&nbsp;'&nbsp;+&nbsp;view.axisStyleAttr()&nbsp;+&nbsp;'&gt;'&nbsp;+<a name="line_5749"></a></li>
<li id="line_5750" class="even"><span class="lineNumber">&nbsp;5750&nbsp;</span>					((!slotNormal&nbsp;||&nbsp;!minutes)&nbsp;?&nbsp;//&nbsp;if&nbsp;irregular&nbsp;slot&nbsp;duration,&nbsp;or&nbsp;on&nbsp;the&nbsp;hour,&nbsp;then&nbsp;display&nbsp;the&nbsp;time<a name="line_5750"></a></li>
<li id="line_5751" class="odd"><span class="lineNumber">&nbsp;5751&nbsp;</span>						'&lt;span&gt;'&nbsp;+&nbsp;//&nbsp;for&nbsp;matchCellWidths<a name="line_5751"></a></li>
<li id="line_5752" class="even"><span class="lineNumber">&nbsp;5752&nbsp;</span>							htmlEscape(slotDate.format(this.axisFormat))&nbsp;+<a name="line_5752"></a></li>
<li id="line_5753" class="odd"><span class="lineNumber">&nbsp;5753&nbsp;</span>						'&lt;/span&gt;'&nbsp;:<a name="line_5753"></a></li>
<li id="line_5754" class="even"><span class="lineNumber">&nbsp;5754&nbsp;</span>						''<a name="line_5754"></a></li>
<li id="line_5755" class="odd"><span class="lineNumber">&nbsp;5755&nbsp;</span>						)&nbsp;+<a name="line_5755"></a></li>
<li id="line_5756" class="even"><span class="lineNumber">&nbsp;5756&nbsp;</span>				'&lt;/td&gt;';<a name="line_5756"></a></li>
<li id="line_5757" class="odd"><span class="lineNumber">&nbsp;5757&nbsp;</span><a name="line_5757"></a></li>
<li id="line_5758" class="even"><span class="lineNumber">&nbsp;5758&nbsp;</span>			html&nbsp;+=<a name="line_5758"></a></li>
<li id="line_5759" class="odd"><span class="lineNumber">&nbsp;5759&nbsp;</span>				'&lt;tr&nbsp;'&nbsp;+&nbsp;(!minutes&nbsp;?&nbsp;''&nbsp;:&nbsp;'class="fc-minor"')&nbsp;+&nbsp;'&gt;'&nbsp;+<a name="line_5759"></a></li>
<li id="line_5760" class="even"><span class="lineNumber">&nbsp;5760&nbsp;</span>					(!isRTL&nbsp;?&nbsp;axisHtml&nbsp;:&nbsp;'')&nbsp;+<a name="line_5760"></a></li>
<li id="line_5761" class="odd"><span class="lineNumber">&nbsp;5761&nbsp;</span>					'&lt;td&nbsp;class="'&nbsp;+&nbsp;view.widgetContentClass&nbsp;+&nbsp;'"/&gt;'&nbsp;+<a name="line_5761"></a></li>
<li id="line_5762" class="even"><span class="lineNumber">&nbsp;5762&nbsp;</span>					(isRTL&nbsp;?&nbsp;axisHtml&nbsp;:&nbsp;'')&nbsp;+<a name="line_5762"></a></li>
<li id="line_5763" class="odd"><span class="lineNumber">&nbsp;5763&nbsp;</span>				"&lt;/tr&gt;";<a name="line_5763"></a></li>
<li id="line_5764" class="even"><span class="lineNumber">&nbsp;5764&nbsp;</span><a name="line_5764"></a></li>
<li id="line_5765" class="odd"><span class="lineNumber">&nbsp;5765&nbsp;</span>			slotTime.add(this.slotDuration);<a name="line_5765"></a></li>
<li id="line_5766" class="even"><span class="lineNumber">&nbsp;5766&nbsp;</span>		}<a name="line_5766"></a></li>
<li id="line_5767" class="odd"><span class="lineNumber">&nbsp;5767&nbsp;</span><a name="line_5767"></a></li>
<li id="line_5768" class="even"><span class="lineNumber">&nbsp;5768&nbsp;</span>		return&nbsp;html;<a name="line_5768"></a></li>
<li id="line_5769" class="odd"><span class="lineNumber">&nbsp;5769&nbsp;</span>	},<a name="line_5769"></a></li>
<li id="line_5770" class="even"><span class="lineNumber">&nbsp;5770&nbsp;</span><a name="line_5770"></a></li>
<li id="line_5771" class="odd"><span class="lineNumber">&nbsp;5771&nbsp;</span><a name="line_5771"></a></li>
<li id="line_5772" class="even"><span class="lineNumber">&nbsp;5772&nbsp;</span>	/*&nbsp;Options<a name="line_5772"></a></li>
<li id="line_5773" class="odd"><span class="lineNumber">&nbsp;5773&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_5773"></a></li>
<li id="line_5774" class="even"><span class="lineNumber">&nbsp;5774&nbsp;</span><a name="line_5774"></a></li>
<li id="line_5775" class="odd"><span class="lineNumber">&nbsp;5775&nbsp;</span><a name="line_5775"></a></li>
<li id="line_5776" class="even"><span class="lineNumber">&nbsp;5776&nbsp;</span>	//&nbsp;Parses&nbsp;various&nbsp;options&nbsp;into&nbsp;properties&nbsp;of&nbsp;this&nbsp;object<a name="line_5776"></a></li>
<li id="line_5777" class="odd"><span class="lineNumber">&nbsp;5777&nbsp;</span>	processOptions:&nbsp;function()&nbsp;{<a name="line_5777"></a></li>
<li id="line_5778" class="even"><span class="lineNumber">&nbsp;5778&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_5778"></a></li>
<li id="line_5779" class="odd"><span class="lineNumber">&nbsp;5779&nbsp;</span>		var&nbsp;slotDuration&nbsp;=&nbsp;view.opt('slotDuration');<a name="line_5779"></a></li>
<li id="line_5780" class="even"><span class="lineNumber">&nbsp;5780&nbsp;</span>		var&nbsp;snapDuration&nbsp;=&nbsp;view.opt('snapDuration');<a name="line_5780"></a></li>
<li id="line_5781" class="odd"><span class="lineNumber">&nbsp;5781&nbsp;</span><a name="line_5781"></a></li>
<li id="line_5782" class="even"><span class="lineNumber">&nbsp;5782&nbsp;</span>		slotDuration&nbsp;=&nbsp;moment.duration(slotDuration);<a name="line_5782"></a></li>
<li id="line_5783" class="odd"><span class="lineNumber">&nbsp;5783&nbsp;</span>		snapDuration&nbsp;=&nbsp;snapDuration&nbsp;?&nbsp;moment.duration(snapDuration)&nbsp;:&nbsp;slotDuration;<a name="line_5783"></a></li>
<li id="line_5784" class="even"><span class="lineNumber">&nbsp;5784&nbsp;</span><a name="line_5784"></a></li>
<li id="line_5785" class="odd"><span class="lineNumber">&nbsp;5785&nbsp;</span>		this.slotDuration&nbsp;=&nbsp;slotDuration;<a name="line_5785"></a></li>
<li id="line_5786" class="even"><span class="lineNumber">&nbsp;5786&nbsp;</span>		this.snapDuration&nbsp;=&nbsp;snapDuration;<a name="line_5786"></a></li>
<li id="line_5787" class="odd"><span class="lineNumber">&nbsp;5787&nbsp;</span>		this.cellDuration&nbsp;=&nbsp;snapDuration;&nbsp;//&nbsp;for&nbsp;Grid&nbsp;system<a name="line_5787"></a></li>
<li id="line_5788" class="even"><span class="lineNumber">&nbsp;5788&nbsp;</span><a name="line_5788"></a></li>
<li id="line_5789" class="odd"><span class="lineNumber">&nbsp;5789&nbsp;</span>		this.minTime&nbsp;=&nbsp;moment.duration(view.opt('minTime'));<a name="line_5789"></a></li>
<li id="line_5790" class="even"><span class="lineNumber">&nbsp;5790&nbsp;</span>		this.maxTime&nbsp;=&nbsp;moment.duration(view.opt('maxTime'));<a name="line_5790"></a></li>
<li id="line_5791" class="odd"><span class="lineNumber">&nbsp;5791&nbsp;</span><a name="line_5791"></a></li>
<li id="line_5792" class="even"><span class="lineNumber">&nbsp;5792&nbsp;</span>		this.axisFormat&nbsp;=&nbsp;view.opt('axisFormat')&nbsp;||&nbsp;view.opt('smallTimeFormat');<a name="line_5792"></a></li>
<li id="line_5793" class="odd"><span class="lineNumber">&nbsp;5793&nbsp;</span>	},<a name="line_5793"></a></li>
<li id="line_5794" class="even"><span class="lineNumber">&nbsp;5794&nbsp;</span><a name="line_5794"></a></li>
<li id="line_5795" class="odd"><span class="lineNumber">&nbsp;5795&nbsp;</span><a name="line_5795"></a></li>
<li id="line_5796" class="even"><span class="lineNumber">&nbsp;5796&nbsp;</span>	//&nbsp;Computes&nbsp;a&nbsp;default&nbsp;column&nbsp;header&nbsp;formatting&nbsp;string&nbsp;if&nbsp;`colFormat`&nbsp;is&nbsp;not&nbsp;explicitly&nbsp;defined<a name="line_5796"></a></li>
<li id="line_5797" class="odd"><span class="lineNumber">&nbsp;5797&nbsp;</span>	computeColHeadFormat:&nbsp;function()&nbsp;{<a name="line_5797"></a></li>
<li id="line_5798" class="even"><span class="lineNumber">&nbsp;5798&nbsp;</span>		if&nbsp;(this.colCnt&nbsp;&gt;&nbsp;1)&nbsp;{&nbsp;//&nbsp;multiple&nbsp;days,&nbsp;so&nbsp;full&nbsp;single&nbsp;date&nbsp;string&nbsp;WON'T&nbsp;be&nbsp;in&nbsp;title&nbsp;text<a name="line_5798"></a></li>
<li id="line_5799" class="odd"><span class="lineNumber">&nbsp;5799&nbsp;</span>			return&nbsp;this.view.opt('dayOfMonthFormat');&nbsp;//&nbsp;"Sat&nbsp;12/10"<a name="line_5799"></a></li>
<li id="line_5800" class="even"><span class="lineNumber">&nbsp;5800&nbsp;</span>		}<a name="line_5800"></a></li>
<li id="line_5801" class="odd"><span class="lineNumber">&nbsp;5801&nbsp;</span>		else&nbsp;{&nbsp;//&nbsp;single&nbsp;day,&nbsp;so&nbsp;full&nbsp;single&nbsp;date&nbsp;string&nbsp;will&nbsp;probably&nbsp;be&nbsp;in&nbsp;title&nbsp;text<a name="line_5801"></a></li>
<li id="line_5802" class="even"><span class="lineNumber">&nbsp;5802&nbsp;</span>			return&nbsp;'dddd';&nbsp;//&nbsp;"Saturday"<a name="line_5802"></a></li>
<li id="line_5803" class="odd"><span class="lineNumber">&nbsp;5803&nbsp;</span>		}<a name="line_5803"></a></li>
<li id="line_5804" class="even"><span class="lineNumber">&nbsp;5804&nbsp;</span>	},<a name="line_5804"></a></li>
<li id="line_5805" class="odd"><span class="lineNumber">&nbsp;5805&nbsp;</span><a name="line_5805"></a></li>
<li id="line_5806" class="even"><span class="lineNumber">&nbsp;5806&nbsp;</span><a name="line_5806"></a></li>
<li id="line_5807" class="odd"><span class="lineNumber">&nbsp;5807&nbsp;</span>	//&nbsp;Computes&nbsp;a&nbsp;default&nbsp;event&nbsp;time&nbsp;formatting&nbsp;string&nbsp;if&nbsp;`timeFormat`&nbsp;is&nbsp;not&nbsp;explicitly&nbsp;defined<a name="line_5807"></a></li>
<li id="line_5808" class="even"><span class="lineNumber">&nbsp;5808&nbsp;</span>	computeEventTimeFormat:&nbsp;function()&nbsp;{<a name="line_5808"></a></li>
<li id="line_5809" class="odd"><span class="lineNumber">&nbsp;5809&nbsp;</span>		return&nbsp;this.view.opt('noMeridiemTimeFormat');&nbsp;//&nbsp;like&nbsp;"6:30"&nbsp;(no&nbsp;AM/PM)<a name="line_5809"></a></li>
<li id="line_5810" class="even"><span class="lineNumber">&nbsp;5810&nbsp;</span>	},<a name="line_5810"></a></li>
<li id="line_5811" class="odd"><span class="lineNumber">&nbsp;5811&nbsp;</span><a name="line_5811"></a></li>
<li id="line_5812" class="even"><span class="lineNumber">&nbsp;5812&nbsp;</span><a name="line_5812"></a></li>
<li id="line_5813" class="odd"><span class="lineNumber">&nbsp;5813&nbsp;</span>	//&nbsp;Computes&nbsp;a&nbsp;default&nbsp;`displayEventEnd`&nbsp;value&nbsp;if&nbsp;one&nbsp;is&nbsp;not&nbsp;expliclty&nbsp;defined<a name="line_5813"></a></li>
<li id="line_5814" class="even"><span class="lineNumber">&nbsp;5814&nbsp;</span>	computeDisplayEventEnd:&nbsp;function()&nbsp;{<a name="line_5814"></a></li>
<li id="line_5815" class="odd"><span class="lineNumber">&nbsp;5815&nbsp;</span>		return&nbsp;true;<a name="line_5815"></a></li>
<li id="line_5816" class="even"><span class="lineNumber">&nbsp;5816&nbsp;</span>	},<a name="line_5816"></a></li>
<li id="line_5817" class="odd"><span class="lineNumber">&nbsp;5817&nbsp;</span><a name="line_5817"></a></li>
<li id="line_5818" class="even"><span class="lineNumber">&nbsp;5818&nbsp;</span><a name="line_5818"></a></li>
<li id="line_5819" class="odd"><span class="lineNumber">&nbsp;5819&nbsp;</span>	/*&nbsp;Cell&nbsp;System<a name="line_5819"></a></li>
<li id="line_5820" class="even"><span class="lineNumber">&nbsp;5820&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_5820"></a></li>
<li id="line_5821" class="odd"><span class="lineNumber">&nbsp;5821&nbsp;</span><a name="line_5821"></a></li>
<li id="line_5822" class="even"><span class="lineNumber">&nbsp;5822&nbsp;</span><a name="line_5822"></a></li>
<li id="line_5823" class="odd"><span class="lineNumber">&nbsp;5823&nbsp;</span>	rangeUpdated:&nbsp;function()&nbsp;{<a name="line_5823"></a></li>
<li id="line_5824" class="even"><span class="lineNumber">&nbsp;5824&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_5824"></a></li>
<li id="line_5825" class="odd"><span class="lineNumber">&nbsp;5825&nbsp;</span>		var&nbsp;colDates&nbsp;=&nbsp;[];<a name="line_5825"></a></li>
<li id="line_5826" class="even"><span class="lineNumber">&nbsp;5826&nbsp;</span>		var&nbsp;date;<a name="line_5826"></a></li>
<li id="line_5827" class="odd"><span class="lineNumber">&nbsp;5827&nbsp;</span><a name="line_5827"></a></li>
<li id="line_5828" class="even"><span class="lineNumber">&nbsp;5828&nbsp;</span>		date&nbsp;=&nbsp;this.start.clone();<a name="line_5828"></a></li>
<li id="line_5829" class="odd"><span class="lineNumber">&nbsp;5829&nbsp;</span>		while&nbsp;(date.isBefore(this.end))&nbsp;{<a name="line_5829"></a></li>
<li id="line_5830" class="even"><span class="lineNumber">&nbsp;5830&nbsp;</span>			colDates.push(date.clone());<a name="line_5830"></a></li>
<li id="line_5831" class="odd"><span class="lineNumber">&nbsp;5831&nbsp;</span>			date.add(1,&nbsp;'day');<a name="line_5831"></a></li>
<li id="line_5832" class="even"><span class="lineNumber">&nbsp;5832&nbsp;</span>			date&nbsp;=&nbsp;view.skipHiddenDays(date);<a name="line_5832"></a></li>
<li id="line_5833" class="odd"><span class="lineNumber">&nbsp;5833&nbsp;</span>		}<a name="line_5833"></a></li>
<li id="line_5834" class="even"><span class="lineNumber">&nbsp;5834&nbsp;</span><a name="line_5834"></a></li>
<li id="line_5835" class="odd"><span class="lineNumber">&nbsp;5835&nbsp;</span>		if&nbsp;(this.isRTL)&nbsp;{<a name="line_5835"></a></li>
<li id="line_5836" class="even"><span class="lineNumber">&nbsp;5836&nbsp;</span>			colDates.reverse();<a name="line_5836"></a></li>
<li id="line_5837" class="odd"><span class="lineNumber">&nbsp;5837&nbsp;</span>		}<a name="line_5837"></a></li>
<li id="line_5838" class="even"><span class="lineNumber">&nbsp;5838&nbsp;</span><a name="line_5838"></a></li>
<li id="line_5839" class="odd"><span class="lineNumber">&nbsp;5839&nbsp;</span>		this.colDates&nbsp;=&nbsp;colDates;<a name="line_5839"></a></li>
<li id="line_5840" class="even"><span class="lineNumber">&nbsp;5840&nbsp;</span>		this.colCnt&nbsp;=&nbsp;colDates.length;<a name="line_5840"></a></li>
<li id="line_5841" class="odd"><span class="lineNumber">&nbsp;5841&nbsp;</span>		this.rowCnt&nbsp;=&nbsp;Math.ceil((this.maxTime&nbsp;-&nbsp;this.minTime)&nbsp;/&nbsp;this.snapDuration);&nbsp;//&nbsp;#&nbsp;of&nbsp;vertical&nbsp;snaps<a name="line_5841"></a></li>
<li id="line_5842" class="even"><span class="lineNumber">&nbsp;5842&nbsp;</span>	},<a name="line_5842"></a></li>
<li id="line_5843" class="odd"><span class="lineNumber">&nbsp;5843&nbsp;</span><a name="line_5843"></a></li>
<li id="line_5844" class="even"><span class="lineNumber">&nbsp;5844&nbsp;</span><a name="line_5844"></a></li>
<li id="line_5845" class="odd"><span class="lineNumber">&nbsp;5845&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;cell&nbsp;object,&nbsp;generates&nbsp;its&nbsp;start&nbsp;date.&nbsp;Returns&nbsp;a&nbsp;reference-free&nbsp;copy.<a name="line_5845"></a></li>
<li id="line_5846" class="even"><span class="lineNumber">&nbsp;5846&nbsp;</span>	computeCellDate:&nbsp;function(cell)&nbsp;{<a name="line_5846"></a></li>
<li id="line_5847" class="odd"><span class="lineNumber">&nbsp;5847&nbsp;</span>		var&nbsp;date&nbsp;=&nbsp;this.colDates[cell.col];<a name="line_5847"></a></li>
<li id="line_5848" class="even"><span class="lineNumber">&nbsp;5848&nbsp;</span>		var&nbsp;time&nbsp;=&nbsp;this.computeSnapTime(cell.row);<a name="line_5848"></a></li>
<li id="line_5849" class="odd"><span class="lineNumber">&nbsp;5849&nbsp;</span><a name="line_5849"></a></li>
<li id="line_5850" class="even"><span class="lineNumber">&nbsp;5850&nbsp;</span>		date&nbsp;=&nbsp;this.view.calendar.rezoneDate(date);&nbsp;//&nbsp;give&nbsp;it&nbsp;a&nbsp;00:00&nbsp;time<a name="line_5850"></a></li>
<li id="line_5851" class="odd"><span class="lineNumber">&nbsp;5851&nbsp;</span>		date.time(time);<a name="line_5851"></a></li>
<li id="line_5852" class="even"><span class="lineNumber">&nbsp;5852&nbsp;</span><a name="line_5852"></a></li>
<li id="line_5853" class="odd"><span class="lineNumber">&nbsp;5853&nbsp;</span>		return&nbsp;date;<a name="line_5853"></a></li>
<li id="line_5854" class="even"><span class="lineNumber">&nbsp;5854&nbsp;</span>	},<a name="line_5854"></a></li>
<li id="line_5855" class="odd"><span class="lineNumber">&nbsp;5855&nbsp;</span><a name="line_5855"></a></li>
<li id="line_5856" class="even"><span class="lineNumber">&nbsp;5856&nbsp;</span><a name="line_5856"></a></li>
<li id="line_5857" class="odd"><span class="lineNumber">&nbsp;5857&nbsp;</span>	//&nbsp;Retrieves&nbsp;the&nbsp;element&nbsp;representing&nbsp;the&nbsp;given&nbsp;column<a name="line_5857"></a></li>
<li id="line_5858" class="even"><span class="lineNumber">&nbsp;5858&nbsp;</span>	getColEl:&nbsp;function(col)&nbsp;{<a name="line_5858"></a></li>
<li id="line_5859" class="odd"><span class="lineNumber">&nbsp;5859&nbsp;</span>		return&nbsp;this.dayEls.eq(col);<a name="line_5859"></a></li>
<li id="line_5860" class="even"><span class="lineNumber">&nbsp;5860&nbsp;</span>	},<a name="line_5860"></a></li>
<li id="line_5861" class="odd"><span class="lineNumber">&nbsp;5861&nbsp;</span><a name="line_5861"></a></li>
<li id="line_5862" class="even"><span class="lineNumber">&nbsp;5862&nbsp;</span><a name="line_5862"></a></li>
<li id="line_5863" class="odd"><span class="lineNumber">&nbsp;5863&nbsp;</span>	/*&nbsp;Dates<a name="line_5863"></a></li>
<li id="line_5864" class="even"><span class="lineNumber">&nbsp;5864&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_5864"></a></li>
<li id="line_5865" class="odd"><span class="lineNumber">&nbsp;5865&nbsp;</span><a name="line_5865"></a></li>
<li id="line_5866" class="even"><span class="lineNumber">&nbsp;5866&nbsp;</span><a name="line_5866"></a></li>
<li id="line_5867" class="odd"><span class="lineNumber">&nbsp;5867&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;row&nbsp;number&nbsp;of&nbsp;the&nbsp;grid,&nbsp;representing&nbsp;a&nbsp;"snap",&nbsp;returns&nbsp;a&nbsp;time&nbsp;(Duration)&nbsp;from&nbsp;its&nbsp;start-of-day<a name="line_5867"></a></li>
<li id="line_5868" class="even"><span class="lineNumber">&nbsp;5868&nbsp;</span>	computeSnapTime:&nbsp;function(row)&nbsp;{<a name="line_5868"></a></li>
<li id="line_5869" class="odd"><span class="lineNumber">&nbsp;5869&nbsp;</span>		return&nbsp;moment.duration(this.minTime&nbsp;+&nbsp;this.snapDuration&nbsp;*&nbsp;row);<a name="line_5869"></a></li>
<li id="line_5870" class="even"><span class="lineNumber">&nbsp;5870&nbsp;</span>	},<a name="line_5870"></a></li>
<li id="line_5871" class="odd"><span class="lineNumber">&nbsp;5871&nbsp;</span><a name="line_5871"></a></li>
<li id="line_5872" class="even"><span class="lineNumber">&nbsp;5872&nbsp;</span><a name="line_5872"></a></li>
<li id="line_5873" class="odd"><span class="lineNumber">&nbsp;5873&nbsp;</span>	//&nbsp;Slices&nbsp;up&nbsp;a&nbsp;date&nbsp;range&nbsp;by&nbsp;column&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;segments<a name="line_5873"></a></li>
<li id="line_5874" class="even"><span class="lineNumber">&nbsp;5874&nbsp;</span>	rangeToSegs:&nbsp;function(range)&nbsp;{<a name="line_5874"></a></li>
<li id="line_5875" class="odd"><span class="lineNumber">&nbsp;5875&nbsp;</span>		var&nbsp;colCnt&nbsp;=&nbsp;this.colCnt;<a name="line_5875"></a></li>
<li id="line_5876" class="even"><span class="lineNumber">&nbsp;5876&nbsp;</span>		var&nbsp;segs&nbsp;=&nbsp;[];<a name="line_5876"></a></li>
<li id="line_5877" class="odd"><span class="lineNumber">&nbsp;5877&nbsp;</span>		var&nbsp;seg;<a name="line_5877"></a></li>
<li id="line_5878" class="even"><span class="lineNumber">&nbsp;5878&nbsp;</span>		var&nbsp;col;<a name="line_5878"></a></li>
<li id="line_5879" class="odd"><span class="lineNumber">&nbsp;5879&nbsp;</span>		var&nbsp;colDate;<a name="line_5879"></a></li>
<li id="line_5880" class="even"><span class="lineNumber">&nbsp;5880&nbsp;</span>		var&nbsp;colRange;<a name="line_5880"></a></li>
<li id="line_5881" class="odd"><span class="lineNumber">&nbsp;5881&nbsp;</span><a name="line_5881"></a></li>
<li id="line_5882" class="even"><span class="lineNumber">&nbsp;5882&nbsp;</span>		//&nbsp;normalize&nbsp;:(<a name="line_5882"></a></li>
<li id="line_5883" class="odd"><span class="lineNumber">&nbsp;5883&nbsp;</span>		range&nbsp;=&nbsp;{<a name="line_5883"></a></li>
<li id="line_5884" class="even"><span class="lineNumber">&nbsp;5884&nbsp;</span>			start:&nbsp;range.start.clone().stripZone(),<a name="line_5884"></a></li>
<li id="line_5885" class="odd"><span class="lineNumber">&nbsp;5885&nbsp;</span>			end:&nbsp;range.end.clone().stripZone()<a name="line_5885"></a></li>
<li id="line_5886" class="even"><span class="lineNumber">&nbsp;5886&nbsp;</span>		};<a name="line_5886"></a></li>
<li id="line_5887" class="odd"><span class="lineNumber">&nbsp;5887&nbsp;</span><a name="line_5887"></a></li>
<li id="line_5888" class="even"><span class="lineNumber">&nbsp;5888&nbsp;</span>		for&nbsp;(col&nbsp;=&nbsp;0;&nbsp;col&nbsp;&lt;&nbsp;colCnt;&nbsp;col++)&nbsp;{<a name="line_5888"></a></li>
<li id="line_5889" class="odd"><span class="lineNumber">&nbsp;5889&nbsp;</span>			colDate&nbsp;=&nbsp;this.colDates[col];&nbsp;//&nbsp;will&nbsp;be&nbsp;ambig&nbsp;time/timezone<a name="line_5889"></a></li>
<li id="line_5890" class="even"><span class="lineNumber">&nbsp;5890&nbsp;</span>			colRange&nbsp;=&nbsp;{<a name="line_5890"></a></li>
<li id="line_5891" class="odd"><span class="lineNumber">&nbsp;5891&nbsp;</span>				start:&nbsp;colDate.clone().time(this.minTime),<a name="line_5891"></a></li>
<li id="line_5892" class="even"><span class="lineNumber">&nbsp;5892&nbsp;</span>				end:&nbsp;colDate.clone().time(this.maxTime)<a name="line_5892"></a></li>
<li id="line_5893" class="odd"><span class="lineNumber">&nbsp;5893&nbsp;</span>			};<a name="line_5893"></a></li>
<li id="line_5894" class="even"><span class="lineNumber">&nbsp;5894&nbsp;</span>			seg&nbsp;=&nbsp;intersectionToSeg(range,&nbsp;colRange);&nbsp;//&nbsp;both&nbsp;will&nbsp;be&nbsp;ambig&nbsp;timezone<a name="line_5894"></a></li>
<li id="line_5895" class="odd"><span class="lineNumber">&nbsp;5895&nbsp;</span>			if&nbsp;(seg)&nbsp;{<a name="line_5895"></a></li>
<li id="line_5896" class="even"><span class="lineNumber">&nbsp;5896&nbsp;</span>				seg.col&nbsp;=&nbsp;col;<a name="line_5896"></a></li>
<li id="line_5897" class="odd"><span class="lineNumber">&nbsp;5897&nbsp;</span>				segs.push(seg);<a name="line_5897"></a></li>
<li id="line_5898" class="even"><span class="lineNumber">&nbsp;5898&nbsp;</span>			}<a name="line_5898"></a></li>
<li id="line_5899" class="odd"><span class="lineNumber">&nbsp;5899&nbsp;</span>		}<a name="line_5899"></a></li>
<li id="line_5900" class="even"><span class="lineNumber">&nbsp;5900&nbsp;</span><a name="line_5900"></a></li>
<li id="line_5901" class="odd"><span class="lineNumber">&nbsp;5901&nbsp;</span>		return&nbsp;segs;<a name="line_5901"></a></li>
<li id="line_5902" class="even"><span class="lineNumber">&nbsp;5902&nbsp;</span>	},<a name="line_5902"></a></li>
<li id="line_5903" class="odd"><span class="lineNumber">&nbsp;5903&nbsp;</span><a name="line_5903"></a></li>
<li id="line_5904" class="even"><span class="lineNumber">&nbsp;5904&nbsp;</span><a name="line_5904"></a></li>
<li id="line_5905" class="odd"><span class="lineNumber">&nbsp;5905&nbsp;</span>	/*&nbsp;Coordinates<a name="line_5905"></a></li>
<li id="line_5906" class="even"><span class="lineNumber">&nbsp;5906&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_5906"></a></li>
<li id="line_5907" class="odd"><span class="lineNumber">&nbsp;5907&nbsp;</span><a name="line_5907"></a></li>
<li id="line_5908" class="even"><span class="lineNumber">&nbsp;5908&nbsp;</span><a name="line_5908"></a></li>
<li id="line_5909" class="odd"><span class="lineNumber">&nbsp;5909&nbsp;</span>	updateSize:&nbsp;function(isResize)&nbsp;{&nbsp;//&nbsp;NOT&nbsp;a&nbsp;standard&nbsp;Grid&nbsp;method<a name="line_5909"></a></li>
<li id="line_5910" class="even"><span class="lineNumber">&nbsp;5910&nbsp;</span>		this.computeSlatTops();<a name="line_5910"></a></li>
<li id="line_5911" class="odd"><span class="lineNumber">&nbsp;5911&nbsp;</span><a name="line_5911"></a></li>
<li id="line_5912" class="even"><span class="lineNumber">&nbsp;5912&nbsp;</span>		if&nbsp;(isResize)&nbsp;{<a name="line_5912"></a></li>
<li id="line_5913" class="odd"><span class="lineNumber">&nbsp;5913&nbsp;</span>			this.updateSegVerticals();<a name="line_5913"></a></li>
<li id="line_5914" class="even"><span class="lineNumber">&nbsp;5914&nbsp;</span>		}<a name="line_5914"></a></li>
<li id="line_5915" class="odd"><span class="lineNumber">&nbsp;5915&nbsp;</span>	},<a name="line_5915"></a></li>
<li id="line_5916" class="even"><span class="lineNumber">&nbsp;5916&nbsp;</span><a name="line_5916"></a></li>
<li id="line_5917" class="odd"><span class="lineNumber">&nbsp;5917&nbsp;</span><a name="line_5917"></a></li>
<li id="line_5918" class="even"><span class="lineNumber">&nbsp;5918&nbsp;</span>	//&nbsp;Computes&nbsp;the&nbsp;top/bottom&nbsp;coordinates&nbsp;of&nbsp;each&nbsp;"snap"&nbsp;rows<a name="line_5918"></a></li>
<li id="line_5919" class="odd"><span class="lineNumber">&nbsp;5919&nbsp;</span>	computeRowCoords:&nbsp;function()&nbsp;{<a name="line_5919"></a></li>
<li id="line_5920" class="even"><span class="lineNumber">&nbsp;5920&nbsp;</span>		var&nbsp;originTop&nbsp;=&nbsp;this.el.offset().top;<a name="line_5920"></a></li>
<li id="line_5921" class="odd"><span class="lineNumber">&nbsp;5921&nbsp;</span>		var&nbsp;items&nbsp;=&nbsp;[];<a name="line_5921"></a></li>
<li id="line_5922" class="even"><span class="lineNumber">&nbsp;5922&nbsp;</span>		var&nbsp;i;<a name="line_5922"></a></li>
<li id="line_5923" class="odd"><span class="lineNumber">&nbsp;5923&nbsp;</span>		var&nbsp;item;<a name="line_5923"></a></li>
<li id="line_5924" class="even"><span class="lineNumber">&nbsp;5924&nbsp;</span><a name="line_5924"></a></li>
<li id="line_5925" class="odd"><span class="lineNumber">&nbsp;5925&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;this.rowCnt;&nbsp;i++)&nbsp;{<a name="line_5925"></a></li>
<li id="line_5926" class="even"><span class="lineNumber">&nbsp;5926&nbsp;</span>			item&nbsp;=&nbsp;{<a name="line_5926"></a></li>
<li id="line_5927" class="odd"><span class="lineNumber">&nbsp;5927&nbsp;</span>				top:&nbsp;originTop&nbsp;+&nbsp;this.computeTimeTop(this.computeSnapTime(i))<a name="line_5927"></a></li>
<li id="line_5928" class="even"><span class="lineNumber">&nbsp;5928&nbsp;</span>			};<a name="line_5928"></a></li>
<li id="line_5929" class="odd"><span class="lineNumber">&nbsp;5929&nbsp;</span>			if&nbsp;(i&nbsp;&gt;&nbsp;0)&nbsp;{<a name="line_5929"></a></li>
<li id="line_5930" class="even"><span class="lineNumber">&nbsp;5930&nbsp;</span>				items[i&nbsp;-&nbsp;1].bottom&nbsp;=&nbsp;item.top;<a name="line_5930"></a></li>
<li id="line_5931" class="odd"><span class="lineNumber">&nbsp;5931&nbsp;</span>			}<a name="line_5931"></a></li>
<li id="line_5932" class="even"><span class="lineNumber">&nbsp;5932&nbsp;</span>			items.push(item);<a name="line_5932"></a></li>
<li id="line_5933" class="odd"><span class="lineNumber">&nbsp;5933&nbsp;</span>		}<a name="line_5933"></a></li>
<li id="line_5934" class="even"><span class="lineNumber">&nbsp;5934&nbsp;</span>		item.bottom&nbsp;=&nbsp;item.top&nbsp;+&nbsp;this.computeTimeTop(this.computeSnapTime(i));<a name="line_5934"></a></li>
<li id="line_5935" class="odd"><span class="lineNumber">&nbsp;5935&nbsp;</span><a name="line_5935"></a></li>
<li id="line_5936" class="even"><span class="lineNumber">&nbsp;5936&nbsp;</span>		return&nbsp;items;<a name="line_5936"></a></li>
<li id="line_5937" class="odd"><span class="lineNumber">&nbsp;5937&nbsp;</span>	},<a name="line_5937"></a></li>
<li id="line_5938" class="even"><span class="lineNumber">&nbsp;5938&nbsp;</span><a name="line_5938"></a></li>
<li id="line_5939" class="odd"><span class="lineNumber">&nbsp;5939&nbsp;</span><a name="line_5939"></a></li>
<li id="line_5940" class="even"><span class="lineNumber">&nbsp;5940&nbsp;</span>	//&nbsp;Computes&nbsp;the&nbsp;top&nbsp;coordinate,&nbsp;relative&nbsp;to&nbsp;the&nbsp;bounds&nbsp;of&nbsp;the&nbsp;grid,&nbsp;of&nbsp;the&nbsp;given&nbsp;date.<a name="line_5940"></a></li>
<li id="line_5941" class="odd"><span class="lineNumber">&nbsp;5941&nbsp;</span>	//&nbsp;A&nbsp;`startOfDayDate`&nbsp;must&nbsp;be&nbsp;given&nbsp;for&nbsp;avoiding&nbsp;ambiguity&nbsp;over&nbsp;how&nbsp;to&nbsp;treat&nbsp;midnight.<a name="line_5941"></a></li>
<li id="line_5942" class="even"><span class="lineNumber">&nbsp;5942&nbsp;</span>	computeDateTop:&nbsp;function(date,&nbsp;startOfDayDate)&nbsp;{<a name="line_5942"></a></li>
<li id="line_5943" class="odd"><span class="lineNumber">&nbsp;5943&nbsp;</span>		return&nbsp;this.computeTimeTop(<a name="line_5943"></a></li>
<li id="line_5944" class="even"><span class="lineNumber">&nbsp;5944&nbsp;</span>			moment.duration(<a name="line_5944"></a></li>
<li id="line_5945" class="odd"><span class="lineNumber">&nbsp;5945&nbsp;</span>				date.clone().stripZone()&nbsp;-&nbsp;startOfDayDate.clone().stripTime()<a name="line_5945"></a></li>
<li id="line_5946" class="even"><span class="lineNumber">&nbsp;5946&nbsp;</span>			)<a name="line_5946"></a></li>
<li id="line_5947" class="odd"><span class="lineNumber">&nbsp;5947&nbsp;</span>		);<a name="line_5947"></a></li>
<li id="line_5948" class="even"><span class="lineNumber">&nbsp;5948&nbsp;</span>	},<a name="line_5948"></a></li>
<li id="line_5949" class="odd"><span class="lineNumber">&nbsp;5949&nbsp;</span><a name="line_5949"></a></li>
<li id="line_5950" class="even"><span class="lineNumber">&nbsp;5950&nbsp;</span><a name="line_5950"></a></li>
<li id="line_5951" class="odd"><span class="lineNumber">&nbsp;5951&nbsp;</span>	//&nbsp;Computes&nbsp;the&nbsp;top&nbsp;coordinate,&nbsp;relative&nbsp;to&nbsp;the&nbsp;bounds&nbsp;of&nbsp;the&nbsp;grid,&nbsp;of&nbsp;the&nbsp;given&nbsp;time&nbsp;(a&nbsp;Duration).<a name="line_5951"></a></li>
<li id="line_5952" class="even"><span class="lineNumber">&nbsp;5952&nbsp;</span>	computeTimeTop:&nbsp;function(time)&nbsp;{<a name="line_5952"></a></li>
<li id="line_5953" class="odd"><span class="lineNumber">&nbsp;5953&nbsp;</span>		var&nbsp;slatCoverage&nbsp;=&nbsp;(time&nbsp;-&nbsp;this.minTime)&nbsp;/&nbsp;this.slotDuration;&nbsp;//&nbsp;floating-point&nbsp;value&nbsp;of&nbsp;#&nbsp;of&nbsp;slots&nbsp;covered<a name="line_5953"></a></li>
<li id="line_5954" class="even"><span class="lineNumber">&nbsp;5954&nbsp;</span>		var&nbsp;slatIndex;<a name="line_5954"></a></li>
<li id="line_5955" class="odd"><span class="lineNumber">&nbsp;5955&nbsp;</span>		var&nbsp;slatRemainder;<a name="line_5955"></a></li>
<li id="line_5956" class="even"><span class="lineNumber">&nbsp;5956&nbsp;</span>		var&nbsp;slatTop;<a name="line_5956"></a></li>
<li id="line_5957" class="odd"><span class="lineNumber">&nbsp;5957&nbsp;</span>		var&nbsp;slatBottom;<a name="line_5957"></a></li>
<li id="line_5958" class="even"><span class="lineNumber">&nbsp;5958&nbsp;</span><a name="line_5958"></a></li>
<li id="line_5959" class="odd"><span class="lineNumber">&nbsp;5959&nbsp;</span>		//&nbsp;constrain.&nbsp;because&nbsp;minTime/maxTime&nbsp;might&nbsp;be&nbsp;customized<a name="line_5959"></a></li>
<li id="line_5960" class="even"><span class="lineNumber">&nbsp;5960&nbsp;</span>		slatCoverage&nbsp;=&nbsp;Math.max(0,&nbsp;slatCoverage);<a name="line_5960"></a></li>
<li id="line_5961" class="odd"><span class="lineNumber">&nbsp;5961&nbsp;</span>		slatCoverage&nbsp;=&nbsp;Math.min(this.slatEls.length,&nbsp;slatCoverage);<a name="line_5961"></a></li>
<li id="line_5962" class="even"><span class="lineNumber">&nbsp;5962&nbsp;</span><a name="line_5962"></a></li>
<li id="line_5963" class="odd"><span class="lineNumber">&nbsp;5963&nbsp;</span>		slatIndex&nbsp;=&nbsp;Math.floor(slatCoverage);&nbsp;//&nbsp;an&nbsp;integer&nbsp;index&nbsp;of&nbsp;the&nbsp;furthest&nbsp;whole&nbsp;slot<a name="line_5963"></a></li>
<li id="line_5964" class="even"><span class="lineNumber">&nbsp;5964&nbsp;</span>		slatRemainder&nbsp;=&nbsp;slatCoverage&nbsp;-&nbsp;slatIndex;<a name="line_5964"></a></li>
<li id="line_5965" class="odd"><span class="lineNumber">&nbsp;5965&nbsp;</span>		slatTop&nbsp;=&nbsp;this.slatTops[slatIndex];&nbsp;//&nbsp;the&nbsp;top&nbsp;position&nbsp;of&nbsp;the&nbsp;furthest&nbsp;whole&nbsp;slot<a name="line_5965"></a></li>
<li id="line_5966" class="even"><span class="lineNumber">&nbsp;5966&nbsp;</span><a name="line_5966"></a></li>
<li id="line_5967" class="odd"><span class="lineNumber">&nbsp;5967&nbsp;</span>		if&nbsp;(slatRemainder)&nbsp;{&nbsp;//&nbsp;time&nbsp;spans&nbsp;part-way&nbsp;into&nbsp;the&nbsp;slot<a name="line_5967"></a></li>
<li id="line_5968" class="even"><span class="lineNumber">&nbsp;5968&nbsp;</span>			slatBottom&nbsp;=&nbsp;this.slatTops[slatIndex&nbsp;+&nbsp;1];<a name="line_5968"></a></li>
<li id="line_5969" class="odd"><span class="lineNumber">&nbsp;5969&nbsp;</span>			return&nbsp;slatTop&nbsp;+&nbsp;(slatBottom&nbsp;-&nbsp;slatTop)&nbsp;*&nbsp;slatRemainder;&nbsp;//&nbsp;part-way&nbsp;between&nbsp;slots<a name="line_5969"></a></li>
<li id="line_5970" class="even"><span class="lineNumber">&nbsp;5970&nbsp;</span>		}<a name="line_5970"></a></li>
<li id="line_5971" class="odd"><span class="lineNumber">&nbsp;5971&nbsp;</span>		else&nbsp;{<a name="line_5971"></a></li>
<li id="line_5972" class="even"><span class="lineNumber">&nbsp;5972&nbsp;</span>			return&nbsp;slatTop;<a name="line_5972"></a></li>
<li id="line_5973" class="odd"><span class="lineNumber">&nbsp;5973&nbsp;</span>		}<a name="line_5973"></a></li>
<li id="line_5974" class="even"><span class="lineNumber">&nbsp;5974&nbsp;</span>	},<a name="line_5974"></a></li>
<li id="line_5975" class="odd"><span class="lineNumber">&nbsp;5975&nbsp;</span><a name="line_5975"></a></li>
<li id="line_5976" class="even"><span class="lineNumber">&nbsp;5976&nbsp;</span><a name="line_5976"></a></li>
<li id="line_5977" class="odd"><span class="lineNumber">&nbsp;5977&nbsp;</span>	//&nbsp;Queries&nbsp;each&nbsp;`slatEl`&nbsp;for&nbsp;its&nbsp;position&nbsp;relative&nbsp;to&nbsp;the&nbsp;grid's&nbsp;container&nbsp;and&nbsp;stores&nbsp;it&nbsp;in&nbsp;`slatTops`.<a name="line_5977"></a></li>
<li id="line_5978" class="even"><span class="lineNumber">&nbsp;5978&nbsp;</span>	//&nbsp;Includes&nbsp;the&nbsp;the&nbsp;bottom&nbsp;of&nbsp;the&nbsp;last&nbsp;slat&nbsp;as&nbsp;the&nbsp;last&nbsp;item&nbsp;in&nbsp;the&nbsp;array.<a name="line_5978"></a></li>
<li id="line_5979" class="odd"><span class="lineNumber">&nbsp;5979&nbsp;</span>	computeSlatTops:&nbsp;function()&nbsp;{<a name="line_5979"></a></li>
<li id="line_5980" class="even"><span class="lineNumber">&nbsp;5980&nbsp;</span>		var&nbsp;tops&nbsp;=&nbsp;[];<a name="line_5980"></a></li>
<li id="line_5981" class="odd"><span class="lineNumber">&nbsp;5981&nbsp;</span>		var&nbsp;top;<a name="line_5981"></a></li>
<li id="line_5982" class="even"><span class="lineNumber">&nbsp;5982&nbsp;</span><a name="line_5982"></a></li>
<li id="line_5983" class="odd"><span class="lineNumber">&nbsp;5983&nbsp;</span>		this.slatEls.each(function(i,&nbsp;node)&nbsp;{<a name="line_5983"></a></li>
<li id="line_5984" class="even"><span class="lineNumber">&nbsp;5984&nbsp;</span>			top&nbsp;=&nbsp;$(node).position().top;<a name="line_5984"></a></li>
<li id="line_5985" class="odd"><span class="lineNumber">&nbsp;5985&nbsp;</span>			tops.push(top);<a name="line_5985"></a></li>
<li id="line_5986" class="even"><span class="lineNumber">&nbsp;5986&nbsp;</span>		});<a name="line_5986"></a></li>
<li id="line_5987" class="odd"><span class="lineNumber">&nbsp;5987&nbsp;</span><a name="line_5987"></a></li>
<li id="line_5988" class="even"><span class="lineNumber">&nbsp;5988&nbsp;</span>		tops.push(top&nbsp;+&nbsp;this.slatEls.last().outerHeight());&nbsp;//&nbsp;bottom&nbsp;of&nbsp;the&nbsp;last&nbsp;slat<a name="line_5988"></a></li>
<li id="line_5989" class="odd"><span class="lineNumber">&nbsp;5989&nbsp;</span><a name="line_5989"></a></li>
<li id="line_5990" class="even"><span class="lineNumber">&nbsp;5990&nbsp;</span>		this.slatTops&nbsp;=&nbsp;tops;<a name="line_5990"></a></li>
<li id="line_5991" class="odd"><span class="lineNumber">&nbsp;5991&nbsp;</span>	},<a name="line_5991"></a></li>
<li id="line_5992" class="even"><span class="lineNumber">&nbsp;5992&nbsp;</span><a name="line_5992"></a></li>
<li id="line_5993" class="odd"><span class="lineNumber">&nbsp;5993&nbsp;</span><a name="line_5993"></a></li>
<li id="line_5994" class="even"><span class="lineNumber">&nbsp;5994&nbsp;</span>	/*&nbsp;Event&nbsp;Drag&nbsp;Visualization<a name="line_5994"></a></li>
<li id="line_5995" class="odd"><span class="lineNumber">&nbsp;5995&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_5995"></a></li>
<li id="line_5996" class="even"><span class="lineNumber">&nbsp;5996&nbsp;</span><a name="line_5996"></a></li>
<li id="line_5997" class="odd"><span class="lineNumber">&nbsp;5997&nbsp;</span><a name="line_5997"></a></li>
<li id="line_5998" class="even"><span class="lineNumber">&nbsp;5998&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;an&nbsp;event&nbsp;being&nbsp;dragged&nbsp;over&nbsp;the&nbsp;specified&nbsp;date(s).<a name="line_5998"></a></li>
<li id="line_5999" class="odd"><span class="lineNumber">&nbsp;5999&nbsp;</span>	//&nbsp;dropLocation's&nbsp;end&nbsp;might&nbsp;be&nbsp;null,&nbsp;as&nbsp;well&nbsp;as&nbsp;`seg`.&nbsp;See&nbsp;Grid::renderDrag&nbsp;for&nbsp;more&nbsp;info.<a name="line_5999"></a></li>
<li id="line_6000" class="even"><span class="lineNumber">&nbsp;6000&nbsp;</span>	//&nbsp;A&nbsp;returned&nbsp;value&nbsp;of&nbsp;`true`&nbsp;signals&nbsp;that&nbsp;a&nbsp;mock&nbsp;"helper"&nbsp;event&nbsp;has&nbsp;been&nbsp;rendered.<a name="line_6000"></a></li>
<li id="line_6001" class="odd"><span class="lineNumber">&nbsp;6001&nbsp;</span>	renderDrag:&nbsp;function(dropLocation,&nbsp;seg)&nbsp;{<a name="line_6001"></a></li>
<li id="line_6002" class="even"><span class="lineNumber">&nbsp;6002&nbsp;</span><a name="line_6002"></a></li>
<li id="line_6003" class="odd"><span class="lineNumber">&nbsp;6003&nbsp;</span>		if&nbsp;(seg)&nbsp;{&nbsp;//&nbsp;if&nbsp;there&nbsp;is&nbsp;event&nbsp;information&nbsp;for&nbsp;this&nbsp;drag,&nbsp;render&nbsp;a&nbsp;helper&nbsp;event<a name="line_6003"></a></li>
<li id="line_6004" class="even"><span class="lineNumber">&nbsp;6004&nbsp;</span>			this.renderRangeHelper(dropLocation,&nbsp;seg);<a name="line_6004"></a></li>
<li id="line_6005" class="odd"><span class="lineNumber">&nbsp;6005&nbsp;</span>			this.applyDragOpacity(this.helperEl);<a name="line_6005"></a></li>
<li id="line_6006" class="even"><span class="lineNumber">&nbsp;6006&nbsp;</span><a name="line_6006"></a></li>
<li id="line_6007" class="odd"><span class="lineNumber">&nbsp;6007&nbsp;</span>			return&nbsp;true;&nbsp;//&nbsp;signal&nbsp;that&nbsp;a&nbsp;helper&nbsp;has&nbsp;been&nbsp;rendered<a name="line_6007"></a></li>
<li id="line_6008" class="even"><span class="lineNumber">&nbsp;6008&nbsp;</span>		}<a name="line_6008"></a></li>
<li id="line_6009" class="odd"><span class="lineNumber">&nbsp;6009&nbsp;</span>		else&nbsp;{<a name="line_6009"></a></li>
<li id="line_6010" class="even"><span class="lineNumber">&nbsp;6010&nbsp;</span>			//&nbsp;otherwise,&nbsp;just&nbsp;render&nbsp;a&nbsp;highlight<a name="line_6010"></a></li>
<li id="line_6011" class="odd"><span class="lineNumber">&nbsp;6011&nbsp;</span>			this.renderHighlight(this.eventRangeToSegs(dropLocation));<a name="line_6011"></a></li>
<li id="line_6012" class="even"><span class="lineNumber">&nbsp;6012&nbsp;</span>		}<a name="line_6012"></a></li>
<li id="line_6013" class="odd"><span class="lineNumber">&nbsp;6013&nbsp;</span>	},<a name="line_6013"></a></li>
<li id="line_6014" class="even"><span class="lineNumber">&nbsp;6014&nbsp;</span><a name="line_6014"></a></li>
<li id="line_6015" class="odd"><span class="lineNumber">&nbsp;6015&nbsp;</span><a name="line_6015"></a></li>
<li id="line_6016" class="even"><span class="lineNumber">&nbsp;6016&nbsp;</span>	//&nbsp;Unrenders&nbsp;any&nbsp;visual&nbsp;indication&nbsp;of&nbsp;an&nbsp;event&nbsp;being&nbsp;dragged<a name="line_6016"></a></li>
<li id="line_6017" class="odd"><span class="lineNumber">&nbsp;6017&nbsp;</span>	unrenderDrag:&nbsp;function()&nbsp;{<a name="line_6017"></a></li>
<li id="line_6018" class="even"><span class="lineNumber">&nbsp;6018&nbsp;</span>		this.unrenderHelper();<a name="line_6018"></a></li>
<li id="line_6019" class="odd"><span class="lineNumber">&nbsp;6019&nbsp;</span>		this.unrenderHighlight();<a name="line_6019"></a></li>
<li id="line_6020" class="even"><span class="lineNumber">&nbsp;6020&nbsp;</span>	},<a name="line_6020"></a></li>
<li id="line_6021" class="odd"><span class="lineNumber">&nbsp;6021&nbsp;</span><a name="line_6021"></a></li>
<li id="line_6022" class="even"><span class="lineNumber">&nbsp;6022&nbsp;</span><a name="line_6022"></a></li>
<li id="line_6023" class="odd"><span class="lineNumber">&nbsp;6023&nbsp;</span>	/*&nbsp;Event&nbsp;Resize&nbsp;Visualization<a name="line_6023"></a></li>
<li id="line_6024" class="even"><span class="lineNumber">&nbsp;6024&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_6024"></a></li>
<li id="line_6025" class="odd"><span class="lineNumber">&nbsp;6025&nbsp;</span><a name="line_6025"></a></li>
<li id="line_6026" class="even"><span class="lineNumber">&nbsp;6026&nbsp;</span><a name="line_6026"></a></li>
<li id="line_6027" class="odd"><span class="lineNumber">&nbsp;6027&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;an&nbsp;event&nbsp;being&nbsp;resized<a name="line_6027"></a></li>
<li id="line_6028" class="even"><span class="lineNumber">&nbsp;6028&nbsp;</span>	renderEventResize:&nbsp;function(range,&nbsp;seg)&nbsp;{<a name="line_6028"></a></li>
<li id="line_6029" class="odd"><span class="lineNumber">&nbsp;6029&nbsp;</span>		this.renderRangeHelper(range,&nbsp;seg);<a name="line_6029"></a></li>
<li id="line_6030" class="even"><span class="lineNumber">&nbsp;6030&nbsp;</span>	},<a name="line_6030"></a></li>
<li id="line_6031" class="odd"><span class="lineNumber">&nbsp;6031&nbsp;</span><a name="line_6031"></a></li>
<li id="line_6032" class="even"><span class="lineNumber">&nbsp;6032&nbsp;</span><a name="line_6032"></a></li>
<li id="line_6033" class="odd"><span class="lineNumber">&nbsp;6033&nbsp;</span>	//&nbsp;Unrenders&nbsp;any&nbsp;visual&nbsp;indication&nbsp;of&nbsp;an&nbsp;event&nbsp;being&nbsp;resized<a name="line_6033"></a></li>
<li id="line_6034" class="even"><span class="lineNumber">&nbsp;6034&nbsp;</span>	unrenderEventResize:&nbsp;function()&nbsp;{<a name="line_6034"></a></li>
<li id="line_6035" class="odd"><span class="lineNumber">&nbsp;6035&nbsp;</span>		this.unrenderHelper();<a name="line_6035"></a></li>
<li id="line_6036" class="even"><span class="lineNumber">&nbsp;6036&nbsp;</span>	},<a name="line_6036"></a></li>
<li id="line_6037" class="odd"><span class="lineNumber">&nbsp;6037&nbsp;</span><a name="line_6037"></a></li>
<li id="line_6038" class="even"><span class="lineNumber">&nbsp;6038&nbsp;</span><a name="line_6038"></a></li>
<li id="line_6039" class="odd"><span class="lineNumber">&nbsp;6039&nbsp;</span>	/*&nbsp;Event&nbsp;Helper<a name="line_6039"></a></li>
<li id="line_6040" class="even"><span class="lineNumber">&nbsp;6040&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_6040"></a></li>
<li id="line_6041" class="odd"><span class="lineNumber">&nbsp;6041&nbsp;</span><a name="line_6041"></a></li>
<li id="line_6042" class="even"><span class="lineNumber">&nbsp;6042&nbsp;</span><a name="line_6042"></a></li>
<li id="line_6043" class="odd"><span class="lineNumber">&nbsp;6043&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;mock&nbsp;"helper"&nbsp;event.&nbsp;`sourceSeg`&nbsp;is&nbsp;the&nbsp;original&nbsp;segment&nbsp;object&nbsp;and&nbsp;might&nbsp;be&nbsp;null&nbsp;(an&nbsp;external&nbsp;drag)<a name="line_6043"></a></li>
<li id="line_6044" class="even"><span class="lineNumber">&nbsp;6044&nbsp;</span>	renderHelper:&nbsp;function(event,&nbsp;sourceSeg)&nbsp;{<a name="line_6044"></a></li>
<li id="line_6045" class="odd"><span class="lineNumber">&nbsp;6045&nbsp;</span>		var&nbsp;segs&nbsp;=&nbsp;this.eventsToSegs([&nbsp;event&nbsp;]);<a name="line_6045"></a></li>
<li id="line_6046" class="even"><span class="lineNumber">&nbsp;6046&nbsp;</span>		var&nbsp;tableEl;<a name="line_6046"></a></li>
<li id="line_6047" class="odd"><span class="lineNumber">&nbsp;6047&nbsp;</span>		var&nbsp;i,&nbsp;seg;<a name="line_6047"></a></li>
<li id="line_6048" class="even"><span class="lineNumber">&nbsp;6048&nbsp;</span>		var&nbsp;sourceEl;<a name="line_6048"></a></li>
<li id="line_6049" class="odd"><span class="lineNumber">&nbsp;6049&nbsp;</span><a name="line_6049"></a></li>
<li id="line_6050" class="even"><span class="lineNumber">&nbsp;6050&nbsp;</span>		segs&nbsp;=&nbsp;this.renderFgSegEls(segs);&nbsp;//&nbsp;assigns&nbsp;each&nbsp;seg's&nbsp;el&nbsp;and&nbsp;returns&nbsp;a&nbsp;subset&nbsp;of&nbsp;segs&nbsp;that&nbsp;were&nbsp;rendered<a name="line_6050"></a></li>
<li id="line_6051" class="odd"><span class="lineNumber">&nbsp;6051&nbsp;</span>		tableEl&nbsp;=&nbsp;this.renderSegTable(segs);<a name="line_6051"></a></li>
<li id="line_6052" class="even"><span class="lineNumber">&nbsp;6052&nbsp;</span><a name="line_6052"></a></li>
<li id="line_6053" class="odd"><span class="lineNumber">&nbsp;6053&nbsp;</span>		//&nbsp;Try&nbsp;to&nbsp;make&nbsp;the&nbsp;segment&nbsp;that&nbsp;is&nbsp;in&nbsp;the&nbsp;same&nbsp;row&nbsp;as&nbsp;sourceSeg&nbsp;look&nbsp;the&nbsp;same<a name="line_6053"></a></li>
<li id="line_6054" class="even"><span class="lineNumber">&nbsp;6054&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;segs.length;&nbsp;i++)&nbsp;{<a name="line_6054"></a></li>
<li id="line_6055" class="odd"><span class="lineNumber">&nbsp;6055&nbsp;</span>			seg&nbsp;=&nbsp;segs[i];<a name="line_6055"></a></li>
<li id="line_6056" class="even"><span class="lineNumber">&nbsp;6056&nbsp;</span>			if&nbsp;(sourceSeg&nbsp;&amp;&amp;&nbsp;sourceSeg.col&nbsp;===&nbsp;seg.col)&nbsp;{<a name="line_6056"></a></li>
<li id="line_6057" class="odd"><span class="lineNumber">&nbsp;6057&nbsp;</span>				sourceEl&nbsp;=&nbsp;sourceSeg.el;<a name="line_6057"></a></li>
<li id="line_6058" class="even"><span class="lineNumber">&nbsp;6058&nbsp;</span>				seg.el.css({<a name="line_6058"></a></li>
<li id="line_6059" class="odd"><span class="lineNumber">&nbsp;6059&nbsp;</span>					left:&nbsp;sourceEl.css('left'),<a name="line_6059"></a></li>
<li id="line_6060" class="even"><span class="lineNumber">&nbsp;6060&nbsp;</span>					right:&nbsp;sourceEl.css('right'),<a name="line_6060"></a></li>
<li id="line_6061" class="odd"><span class="lineNumber">&nbsp;6061&nbsp;</span>					'margin-left':&nbsp;sourceEl.css('margin-left'),<a name="line_6061"></a></li>
<li id="line_6062" class="even"><span class="lineNumber">&nbsp;6062&nbsp;</span>					'margin-right':&nbsp;sourceEl.css('margin-right')<a name="line_6062"></a></li>
<li id="line_6063" class="odd"><span class="lineNumber">&nbsp;6063&nbsp;</span>				});<a name="line_6063"></a></li>
<li id="line_6064" class="even"><span class="lineNumber">&nbsp;6064&nbsp;</span>			}<a name="line_6064"></a></li>
<li id="line_6065" class="odd"><span class="lineNumber">&nbsp;6065&nbsp;</span>		}<a name="line_6065"></a></li>
<li id="line_6066" class="even"><span class="lineNumber">&nbsp;6066&nbsp;</span><a name="line_6066"></a></li>
<li id="line_6067" class="odd"><span class="lineNumber">&nbsp;6067&nbsp;</span>		this.helperEl&nbsp;=&nbsp;$('&lt;div&nbsp;class="fc-helper-skeleton"/&gt;')<a name="line_6067"></a></li>
<li id="line_6068" class="even"><span class="lineNumber">&nbsp;6068&nbsp;</span>			.append(tableEl)<a name="line_6068"></a></li>
<li id="line_6069" class="odd"><span class="lineNumber">&nbsp;6069&nbsp;</span>				.appendTo(this.el);<a name="line_6069"></a></li>
<li id="line_6070" class="even"><span class="lineNumber">&nbsp;6070&nbsp;</span>	},<a name="line_6070"></a></li>
<li id="line_6071" class="odd"><span class="lineNumber">&nbsp;6071&nbsp;</span><a name="line_6071"></a></li>
<li id="line_6072" class="even"><span class="lineNumber">&nbsp;6072&nbsp;</span><a name="line_6072"></a></li>
<li id="line_6073" class="odd"><span class="lineNumber">&nbsp;6073&nbsp;</span>	//&nbsp;Unrenders&nbsp;any&nbsp;mock&nbsp;helper&nbsp;event<a name="line_6073"></a></li>
<li id="line_6074" class="even"><span class="lineNumber">&nbsp;6074&nbsp;</span>	unrenderHelper:&nbsp;function()&nbsp;{<a name="line_6074"></a></li>
<li id="line_6075" class="odd"><span class="lineNumber">&nbsp;6075&nbsp;</span>		if&nbsp;(this.helperEl)&nbsp;{<a name="line_6075"></a></li>
<li id="line_6076" class="even"><span class="lineNumber">&nbsp;6076&nbsp;</span>			this.helperEl.remove();<a name="line_6076"></a></li>
<li id="line_6077" class="odd"><span class="lineNumber">&nbsp;6077&nbsp;</span>			this.helperEl&nbsp;=&nbsp;null;<a name="line_6077"></a></li>
<li id="line_6078" class="even"><span class="lineNumber">&nbsp;6078&nbsp;</span>		}<a name="line_6078"></a></li>
<li id="line_6079" class="odd"><span class="lineNumber">&nbsp;6079&nbsp;</span>	},<a name="line_6079"></a></li>
<li id="line_6080" class="even"><span class="lineNumber">&nbsp;6080&nbsp;</span><a name="line_6080"></a></li>
<li id="line_6081" class="odd"><span class="lineNumber">&nbsp;6081&nbsp;</span><a name="line_6081"></a></li>
<li id="line_6082" class="even"><span class="lineNumber">&nbsp;6082&nbsp;</span>	/*&nbsp;Selection<a name="line_6082"></a></li>
<li id="line_6083" class="odd"><span class="lineNumber">&nbsp;6083&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_6083"></a></li>
<li id="line_6084" class="even"><span class="lineNumber">&nbsp;6084&nbsp;</span><a name="line_6084"></a></li>
<li id="line_6085" class="odd"><span class="lineNumber">&nbsp;6085&nbsp;</span><a name="line_6085"></a></li>
<li id="line_6086" class="even"><span class="lineNumber">&nbsp;6086&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;a&nbsp;selection.&nbsp;Overrides&nbsp;the&nbsp;default,&nbsp;which&nbsp;was&nbsp;to&nbsp;simply&nbsp;render&nbsp;a&nbsp;highlight.<a name="line_6086"></a></li>
<li id="line_6087" class="odd"><span class="lineNumber">&nbsp;6087&nbsp;</span>	renderSelection:&nbsp;function(range)&nbsp;{<a name="line_6087"></a></li>
<li id="line_6088" class="even"><span class="lineNumber">&nbsp;6088&nbsp;</span>		if&nbsp;(this.view.opt('selectHelper'))&nbsp;{&nbsp;//&nbsp;this&nbsp;setting&nbsp;signals&nbsp;that&nbsp;a&nbsp;mock&nbsp;helper&nbsp;event&nbsp;should&nbsp;be&nbsp;rendered<a name="line_6088"></a></li>
<li id="line_6089" class="odd"><span class="lineNumber">&nbsp;6089&nbsp;</span>			this.renderRangeHelper(range);<a name="line_6089"></a></li>
<li id="line_6090" class="even"><span class="lineNumber">&nbsp;6090&nbsp;</span>		}<a name="line_6090"></a></li>
<li id="line_6091" class="odd"><span class="lineNumber">&nbsp;6091&nbsp;</span>		else&nbsp;{<a name="line_6091"></a></li>
<li id="line_6092" class="even"><span class="lineNumber">&nbsp;6092&nbsp;</span>			this.renderHighlight(this.selectionRangeToSegs(range));<a name="line_6092"></a></li>
<li id="line_6093" class="odd"><span class="lineNumber">&nbsp;6093&nbsp;</span>		}<a name="line_6093"></a></li>
<li id="line_6094" class="even"><span class="lineNumber">&nbsp;6094&nbsp;</span>	},<a name="line_6094"></a></li>
<li id="line_6095" class="odd"><span class="lineNumber">&nbsp;6095&nbsp;</span><a name="line_6095"></a></li>
<li id="line_6096" class="even"><span class="lineNumber">&nbsp;6096&nbsp;</span><a name="line_6096"></a></li>
<li id="line_6097" class="odd"><span class="lineNumber">&nbsp;6097&nbsp;</span>	//&nbsp;Unrenders&nbsp;any&nbsp;visual&nbsp;indication&nbsp;of&nbsp;a&nbsp;selection<a name="line_6097"></a></li>
<li id="line_6098" class="even"><span class="lineNumber">&nbsp;6098&nbsp;</span>	unrenderSelection:&nbsp;function()&nbsp;{<a name="line_6098"></a></li>
<li id="line_6099" class="odd"><span class="lineNumber">&nbsp;6099&nbsp;</span>		this.unrenderHelper();<a name="line_6099"></a></li>
<li id="line_6100" class="even"><span class="lineNumber">&nbsp;6100&nbsp;</span>		this.unrenderHighlight();<a name="line_6100"></a></li>
<li id="line_6101" class="odd"><span class="lineNumber">&nbsp;6101&nbsp;</span>	},<a name="line_6101"></a></li>
<li id="line_6102" class="even"><span class="lineNumber">&nbsp;6102&nbsp;</span><a name="line_6102"></a></li>
<li id="line_6103" class="odd"><span class="lineNumber">&nbsp;6103&nbsp;</span><a name="line_6103"></a></li>
<li id="line_6104" class="even"><span class="lineNumber">&nbsp;6104&nbsp;</span>	/*&nbsp;Fill&nbsp;System&nbsp;(highlight,&nbsp;background&nbsp;events,&nbsp;business&nbsp;hours)<a name="line_6104"></a></li>
<li id="line_6105" class="odd"><span class="lineNumber">&nbsp;6105&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_6105"></a></li>
<li id="line_6106" class="even"><span class="lineNumber">&nbsp;6106&nbsp;</span><a name="line_6106"></a></li>
<li id="line_6107" class="odd"><span class="lineNumber">&nbsp;6107&nbsp;</span><a name="line_6107"></a></li>
<li id="line_6108" class="even"><span class="lineNumber">&nbsp;6108&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;set&nbsp;of&nbsp;rectangles&nbsp;over&nbsp;the&nbsp;given&nbsp;time&nbsp;segments.<a name="line_6108"></a></li>
<li id="line_6109" class="odd"><span class="lineNumber">&nbsp;6109&nbsp;</span>	//&nbsp;Only&nbsp;returns&nbsp;segments&nbsp;that&nbsp;successfully&nbsp;rendered.<a name="line_6109"></a></li>
<li id="line_6110" class="even"><span class="lineNumber">&nbsp;6110&nbsp;</span>	renderFill:&nbsp;function(type,&nbsp;segs,&nbsp;className)&nbsp;{<a name="line_6110"></a></li>
<li id="line_6111" class="odd"><span class="lineNumber">&nbsp;6111&nbsp;</span>		var&nbsp;segCols;<a name="line_6111"></a></li>
<li id="line_6112" class="even"><span class="lineNumber">&nbsp;6112&nbsp;</span>		var&nbsp;skeletonEl;<a name="line_6112"></a></li>
<li id="line_6113" class="odd"><span class="lineNumber">&nbsp;6113&nbsp;</span>		var&nbsp;trEl;<a name="line_6113"></a></li>
<li id="line_6114" class="even"><span class="lineNumber">&nbsp;6114&nbsp;</span>		var&nbsp;col,&nbsp;colSegs;<a name="line_6114"></a></li>
<li id="line_6115" class="odd"><span class="lineNumber">&nbsp;6115&nbsp;</span>		var&nbsp;tdEl;<a name="line_6115"></a></li>
<li id="line_6116" class="even"><span class="lineNumber">&nbsp;6116&nbsp;</span>		var&nbsp;containerEl;<a name="line_6116"></a></li>
<li id="line_6117" class="odd"><span class="lineNumber">&nbsp;6117&nbsp;</span>		var&nbsp;dayDate;<a name="line_6117"></a></li>
<li id="line_6118" class="even"><span class="lineNumber">&nbsp;6118&nbsp;</span>		var&nbsp;i,&nbsp;seg;<a name="line_6118"></a></li>
<li id="line_6119" class="odd"><span class="lineNumber">&nbsp;6119&nbsp;</span><a name="line_6119"></a></li>
<li id="line_6120" class="even"><span class="lineNumber">&nbsp;6120&nbsp;</span>		if&nbsp;(segs.length)&nbsp;{<a name="line_6120"></a></li>
<li id="line_6121" class="odd"><span class="lineNumber">&nbsp;6121&nbsp;</span><a name="line_6121"></a></li>
<li id="line_6122" class="even"><span class="lineNumber">&nbsp;6122&nbsp;</span>			segs&nbsp;=&nbsp;this.renderFillSegEls(type,&nbsp;segs);&nbsp;//&nbsp;assignes&nbsp;`.el`&nbsp;to&nbsp;each&nbsp;seg.&nbsp;returns&nbsp;successfully&nbsp;rendered&nbsp;segs<a name="line_6122"></a></li>
<li id="line_6123" class="odd"><span class="lineNumber">&nbsp;6123&nbsp;</span>			segCols&nbsp;=&nbsp;this.groupSegCols(segs);&nbsp;//&nbsp;group&nbsp;into&nbsp;sub-arrays,&nbsp;and&nbsp;assigns&nbsp;'col'&nbsp;to&nbsp;each&nbsp;seg<a name="line_6123"></a></li>
<li id="line_6124" class="even"><span class="lineNumber">&nbsp;6124&nbsp;</span><a name="line_6124"></a></li>
<li id="line_6125" class="odd"><span class="lineNumber">&nbsp;6125&nbsp;</span>			className&nbsp;=&nbsp;className&nbsp;||&nbsp;type.toLowerCase();<a name="line_6125"></a></li>
<li id="line_6126" class="even"><span class="lineNumber">&nbsp;6126&nbsp;</span>			skeletonEl&nbsp;=&nbsp;$(<a name="line_6126"></a></li>
<li id="line_6127" class="odd"><span class="lineNumber">&nbsp;6127&nbsp;</span>				'&lt;div&nbsp;class="fc-'&nbsp;+&nbsp;className&nbsp;+&nbsp;'-skeleton"&gt;'&nbsp;+<a name="line_6127"></a></li>
<li id="line_6128" class="even"><span class="lineNumber">&nbsp;6128&nbsp;</span>					'&lt;table&gt;&lt;tr/&gt;&lt;/table&gt;'&nbsp;+<a name="line_6128"></a></li>
<li id="line_6129" class="odd"><span class="lineNumber">&nbsp;6129&nbsp;</span>				'&lt;/div&gt;'<a name="line_6129"></a></li>
<li id="line_6130" class="even"><span class="lineNumber">&nbsp;6130&nbsp;</span>			);<a name="line_6130"></a></li>
<li id="line_6131" class="odd"><span class="lineNumber">&nbsp;6131&nbsp;</span>			trEl&nbsp;=&nbsp;skeletonEl.find('tr');<a name="line_6131"></a></li>
<li id="line_6132" class="even"><span class="lineNumber">&nbsp;6132&nbsp;</span><a name="line_6132"></a></li>
<li id="line_6133" class="odd"><span class="lineNumber">&nbsp;6133&nbsp;</span>			for&nbsp;(col&nbsp;=&nbsp;0;&nbsp;col&nbsp;&lt;&nbsp;segCols.length;&nbsp;col++)&nbsp;{<a name="line_6133"></a></li>
<li id="line_6134" class="even"><span class="lineNumber">&nbsp;6134&nbsp;</span>				colSegs&nbsp;=&nbsp;segCols[col];<a name="line_6134"></a></li>
<li id="line_6135" class="odd"><span class="lineNumber">&nbsp;6135&nbsp;</span>				tdEl&nbsp;=&nbsp;$('&lt;td/&gt;').appendTo(trEl);<a name="line_6135"></a></li>
<li id="line_6136" class="even"><span class="lineNumber">&nbsp;6136&nbsp;</span><a name="line_6136"></a></li>
<li id="line_6137" class="odd"><span class="lineNumber">&nbsp;6137&nbsp;</span>				if&nbsp;(colSegs.length)&nbsp;{<a name="line_6137"></a></li>
<li id="line_6138" class="even"><span class="lineNumber">&nbsp;6138&nbsp;</span>					containerEl&nbsp;=&nbsp;$('&lt;div&nbsp;class="fc-'&nbsp;+&nbsp;className&nbsp;+&nbsp;'-container"/&gt;').appendTo(tdEl);<a name="line_6138"></a></li>
<li id="line_6139" class="odd"><span class="lineNumber">&nbsp;6139&nbsp;</span>					dayDate&nbsp;=&nbsp;this.colDates[col];<a name="line_6139"></a></li>
<li id="line_6140" class="even"><span class="lineNumber">&nbsp;6140&nbsp;</span><a name="line_6140"></a></li>
<li id="line_6141" class="odd"><span class="lineNumber">&nbsp;6141&nbsp;</span>					for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;colSegs.length;&nbsp;i++)&nbsp;{<a name="line_6141"></a></li>
<li id="line_6142" class="even"><span class="lineNumber">&nbsp;6142&nbsp;</span>						seg&nbsp;=&nbsp;colSegs[i];<a name="line_6142"></a></li>
<li id="line_6143" class="odd"><span class="lineNumber">&nbsp;6143&nbsp;</span>						containerEl.append(<a name="line_6143"></a></li>
<li id="line_6144" class="even"><span class="lineNumber">&nbsp;6144&nbsp;</span>							seg.el.css({<a name="line_6144"></a></li>
<li id="line_6145" class="odd"><span class="lineNumber">&nbsp;6145&nbsp;</span>								top:&nbsp;this.computeDateTop(seg.start,&nbsp;dayDate),<a name="line_6145"></a></li>
<li id="line_6146" class="even"><span class="lineNumber">&nbsp;6146&nbsp;</span>								bottom:&nbsp;-this.computeDateTop(seg.end,&nbsp;dayDate)&nbsp;//&nbsp;the&nbsp;y&nbsp;position&nbsp;of&nbsp;the&nbsp;bottom&nbsp;edge<a name="line_6146"></a></li>
<li id="line_6147" class="odd"><span class="lineNumber">&nbsp;6147&nbsp;</span>							})<a name="line_6147"></a></li>
<li id="line_6148" class="even"><span class="lineNumber">&nbsp;6148&nbsp;</span>						);<a name="line_6148"></a></li>
<li id="line_6149" class="odd"><span class="lineNumber">&nbsp;6149&nbsp;</span>					}<a name="line_6149"></a></li>
<li id="line_6150" class="even"><span class="lineNumber">&nbsp;6150&nbsp;</span>				}<a name="line_6150"></a></li>
<li id="line_6151" class="odd"><span class="lineNumber">&nbsp;6151&nbsp;</span>			}<a name="line_6151"></a></li>
<li id="line_6152" class="even"><span class="lineNumber">&nbsp;6152&nbsp;</span><a name="line_6152"></a></li>
<li id="line_6153" class="odd"><span class="lineNumber">&nbsp;6153&nbsp;</span>			this.bookendCells(trEl,&nbsp;type);<a name="line_6153"></a></li>
<li id="line_6154" class="even"><span class="lineNumber">&nbsp;6154&nbsp;</span><a name="line_6154"></a></li>
<li id="line_6155" class="odd"><span class="lineNumber">&nbsp;6155&nbsp;</span>			this.el.append(skeletonEl);<a name="line_6155"></a></li>
<li id="line_6156" class="even"><span class="lineNumber">&nbsp;6156&nbsp;</span>			this.elsByFill[type]&nbsp;=&nbsp;skeletonEl;<a name="line_6156"></a></li>
<li id="line_6157" class="odd"><span class="lineNumber">&nbsp;6157&nbsp;</span>		}<a name="line_6157"></a></li>
<li id="line_6158" class="even"><span class="lineNumber">&nbsp;6158&nbsp;</span><a name="line_6158"></a></li>
<li id="line_6159" class="odd"><span class="lineNumber">&nbsp;6159&nbsp;</span>		return&nbsp;segs;<a name="line_6159"></a></li>
<li id="line_6160" class="even"><span class="lineNumber">&nbsp;6160&nbsp;</span>	}<a name="line_6160"></a></li>
<li id="line_6161" class="odd"><span class="lineNumber">&nbsp;6161&nbsp;</span><a name="line_6161"></a></li>
<li id="line_6162" class="even"><span class="lineNumber">&nbsp;6162&nbsp;</span>});<a name="line_6162"></a></li>
<li id="line_6163" class="odd"><span class="lineNumber">&nbsp;6163&nbsp;</span><a name="line_6163"></a></li>
<li id="line_6164" class="even"><span class="lineNumber">&nbsp;6164&nbsp;</span>;;<a name="line_6164"></a></li>
<li id="line_6165" class="odd"><span class="lineNumber">&nbsp;6165&nbsp;</span><a name="line_6165"></a></li>
<li id="line_6166" class="even"><span class="lineNumber">&nbsp;6166&nbsp;</span>/*&nbsp;Event-rendering&nbsp;methods&nbsp;for&nbsp;the&nbsp;TimeGrid&nbsp;class<a name="line_6166"></a></li>
<li id="line_6167" class="odd"><span class="lineNumber">&nbsp;6167&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_6167"></a></li>
<li id="line_6168" class="even"><span class="lineNumber">&nbsp;6168&nbsp;</span><a name="line_6168"></a></li>
<li id="line_6169" class="odd"><span class="lineNumber">&nbsp;6169&nbsp;</span>TimeGrid.mixin({<a name="line_6169"></a></li>
<li id="line_6170" class="even"><span class="lineNumber">&nbsp;6170&nbsp;</span><a name="line_6170"></a></li>
<li id="line_6171" class="odd"><span class="lineNumber">&nbsp;6171&nbsp;</span>	eventSkeletonEl:&nbsp;null,&nbsp;//&nbsp;has&nbsp;cells&nbsp;with&nbsp;event-containers,&nbsp;which&nbsp;contain&nbsp;absolutely&nbsp;positioned&nbsp;event&nbsp;elements<a name="line_6171"></a></li>
<li id="line_6172" class="even"><span class="lineNumber">&nbsp;6172&nbsp;</span><a name="line_6172"></a></li>
<li id="line_6173" class="odd"><span class="lineNumber">&nbsp;6173&nbsp;</span><a name="line_6173"></a></li>
<li id="line_6174" class="even"><span class="lineNumber">&nbsp;6174&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;given&nbsp;foreground&nbsp;event&nbsp;segments&nbsp;onto&nbsp;the&nbsp;grid<a name="line_6174"></a></li>
<li id="line_6175" class="odd"><span class="lineNumber">&nbsp;6175&nbsp;</span>	renderFgSegs:&nbsp;function(segs)&nbsp;{<a name="line_6175"></a></li>
<li id="line_6176" class="even"><span class="lineNumber">&nbsp;6176&nbsp;</span>		segs&nbsp;=&nbsp;this.renderFgSegEls(segs);&nbsp;//&nbsp;returns&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;segs.&nbsp;segs&nbsp;that&nbsp;were&nbsp;actually&nbsp;rendered<a name="line_6176"></a></li>
<li id="line_6177" class="odd"><span class="lineNumber">&nbsp;6177&nbsp;</span><a name="line_6177"></a></li>
<li id="line_6178" class="even"><span class="lineNumber">&nbsp;6178&nbsp;</span>		this.el.append(<a name="line_6178"></a></li>
<li id="line_6179" class="odd"><span class="lineNumber">&nbsp;6179&nbsp;</span>			this.eventSkeletonEl&nbsp;=&nbsp;$('&lt;div&nbsp;class="fc-content-skeleton"/&gt;')<a name="line_6179"></a></li>
<li id="line_6180" class="even"><span class="lineNumber">&nbsp;6180&nbsp;</span>				.append(this.renderSegTable(segs))<a name="line_6180"></a></li>
<li id="line_6181" class="odd"><span class="lineNumber">&nbsp;6181&nbsp;</span>		);<a name="line_6181"></a></li>
<li id="line_6182" class="even"><span class="lineNumber">&nbsp;6182&nbsp;</span><a name="line_6182"></a></li>
<li id="line_6183" class="odd"><span class="lineNumber">&nbsp;6183&nbsp;</span>		return&nbsp;segs;&nbsp;//&nbsp;return&nbsp;only&nbsp;the&nbsp;segs&nbsp;that&nbsp;were&nbsp;actually&nbsp;rendered<a name="line_6183"></a></li>
<li id="line_6184" class="even"><span class="lineNumber">&nbsp;6184&nbsp;</span>	},<a name="line_6184"></a></li>
<li id="line_6185" class="odd"><span class="lineNumber">&nbsp;6185&nbsp;</span><a name="line_6185"></a></li>
<li id="line_6186" class="even"><span class="lineNumber">&nbsp;6186&nbsp;</span><a name="line_6186"></a></li>
<li id="line_6187" class="odd"><span class="lineNumber">&nbsp;6187&nbsp;</span>	//&nbsp;Unrenders&nbsp;all&nbsp;currently&nbsp;rendered&nbsp;foreground&nbsp;event&nbsp;segments<a name="line_6187"></a></li>
<li id="line_6188" class="even"><span class="lineNumber">&nbsp;6188&nbsp;</span>	unrenderFgSegs:&nbsp;function(segs)&nbsp;{<a name="line_6188"></a></li>
<li id="line_6189" class="odd"><span class="lineNumber">&nbsp;6189&nbsp;</span>		if&nbsp;(this.eventSkeletonEl)&nbsp;{<a name="line_6189"></a></li>
<li id="line_6190" class="even"><span class="lineNumber">&nbsp;6190&nbsp;</span>			this.eventSkeletonEl.remove();<a name="line_6190"></a></li>
<li id="line_6191" class="odd"><span class="lineNumber">&nbsp;6191&nbsp;</span>			this.eventSkeletonEl&nbsp;=&nbsp;null;<a name="line_6191"></a></li>
<li id="line_6192" class="even"><span class="lineNumber">&nbsp;6192&nbsp;</span>		}<a name="line_6192"></a></li>
<li id="line_6193" class="odd"><span class="lineNumber">&nbsp;6193&nbsp;</span>	},<a name="line_6193"></a></li>
<li id="line_6194" class="even"><span class="lineNumber">&nbsp;6194&nbsp;</span><a name="line_6194"></a></li>
<li id="line_6195" class="odd"><span class="lineNumber">&nbsp;6195&nbsp;</span><a name="line_6195"></a></li>
<li id="line_6196" class="even"><span class="lineNumber">&nbsp;6196&nbsp;</span>	//&nbsp;Renders&nbsp;and&nbsp;returns&nbsp;the&nbsp;&lt;table&gt;&nbsp;portion&nbsp;of&nbsp;the&nbsp;event-skeleton.<a name="line_6196"></a></li>
<li id="line_6197" class="odd"><span class="lineNumber">&nbsp;6197&nbsp;</span>	//&nbsp;Returns&nbsp;an&nbsp;object&nbsp;with&nbsp;properties&nbsp;'tbodyEl'&nbsp;and&nbsp;'segs'.<a name="line_6197"></a></li>
<li id="line_6198" class="even"><span class="lineNumber">&nbsp;6198&nbsp;</span>	renderSegTable:&nbsp;function(segs)&nbsp;{<a name="line_6198"></a></li>
<li id="line_6199" class="odd"><span class="lineNumber">&nbsp;6199&nbsp;</span>		var&nbsp;tableEl&nbsp;=&nbsp;$('&lt;table&gt;&lt;tr/&gt;&lt;/table&gt;');<a name="line_6199"></a></li>
<li id="line_6200" class="even"><span class="lineNumber">&nbsp;6200&nbsp;</span>		var&nbsp;trEl&nbsp;=&nbsp;tableEl.find('tr');<a name="line_6200"></a></li>
<li id="line_6201" class="odd"><span class="lineNumber">&nbsp;6201&nbsp;</span>		var&nbsp;segCols;<a name="line_6201"></a></li>
<li id="line_6202" class="even"><span class="lineNumber">&nbsp;6202&nbsp;</span>		var&nbsp;i,&nbsp;seg;<a name="line_6202"></a></li>
<li id="line_6203" class="odd"><span class="lineNumber">&nbsp;6203&nbsp;</span>		var&nbsp;col,&nbsp;colSegs;<a name="line_6203"></a></li>
<li id="line_6204" class="even"><span class="lineNumber">&nbsp;6204&nbsp;</span>		var&nbsp;containerEl;<a name="line_6204"></a></li>
<li id="line_6205" class="odd"><span class="lineNumber">&nbsp;6205&nbsp;</span><a name="line_6205"></a></li>
<li id="line_6206" class="even"><span class="lineNumber">&nbsp;6206&nbsp;</span>		segCols&nbsp;=&nbsp;this.groupSegCols(segs);&nbsp;//&nbsp;group&nbsp;into&nbsp;sub-arrays,&nbsp;and&nbsp;assigns&nbsp;'col'&nbsp;to&nbsp;each&nbsp;seg<a name="line_6206"></a></li>
<li id="line_6207" class="odd"><span class="lineNumber">&nbsp;6207&nbsp;</span><a name="line_6207"></a></li>
<li id="line_6208" class="even"><span class="lineNumber">&nbsp;6208&nbsp;</span>		this.computeSegVerticals(segs);&nbsp;//&nbsp;compute&nbsp;and&nbsp;assign&nbsp;top/bottom<a name="line_6208"></a></li>
<li id="line_6209" class="odd"><span class="lineNumber">&nbsp;6209&nbsp;</span><a name="line_6209"></a></li>
<li id="line_6210" class="even"><span class="lineNumber">&nbsp;6210&nbsp;</span>		for&nbsp;(col&nbsp;=&nbsp;0;&nbsp;col&nbsp;&lt;&nbsp;segCols.length;&nbsp;col++)&nbsp;{&nbsp;//&nbsp;iterate&nbsp;each&nbsp;column&nbsp;grouping<a name="line_6210"></a></li>
<li id="line_6211" class="odd"><span class="lineNumber">&nbsp;6211&nbsp;</span>			colSegs&nbsp;=&nbsp;segCols[col];<a name="line_6211"></a></li>
<li id="line_6212" class="even"><span class="lineNumber">&nbsp;6212&nbsp;</span>			placeSlotSegs(colSegs);&nbsp;//&nbsp;compute&nbsp;horizontal&nbsp;coordinates,&nbsp;z-index's,&nbsp;and&nbsp;reorder&nbsp;the&nbsp;array<a name="line_6212"></a></li>
<li id="line_6213" class="odd"><span class="lineNumber">&nbsp;6213&nbsp;</span><a name="line_6213"></a></li>
<li id="line_6214" class="even"><span class="lineNumber">&nbsp;6214&nbsp;</span>			containerEl&nbsp;=&nbsp;$('&lt;div&nbsp;class="fc-event-container"/&gt;');<a name="line_6214"></a></li>
<li id="line_6215" class="odd"><span class="lineNumber">&nbsp;6215&nbsp;</span><a name="line_6215"></a></li>
<li id="line_6216" class="even"><span class="lineNumber">&nbsp;6216&nbsp;</span>			//&nbsp;assign&nbsp;positioning&nbsp;CSS&nbsp;and&nbsp;insert&nbsp;into&nbsp;container<a name="line_6216"></a></li>
<li id="line_6217" class="odd"><span class="lineNumber">&nbsp;6217&nbsp;</span>			for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;colSegs.length;&nbsp;i++)&nbsp;{<a name="line_6217"></a></li>
<li id="line_6218" class="even"><span class="lineNumber">&nbsp;6218&nbsp;</span>				seg&nbsp;=&nbsp;colSegs[i];<a name="line_6218"></a></li>
<li id="line_6219" class="odd"><span class="lineNumber">&nbsp;6219&nbsp;</span>				seg.el.css(this.generateSegPositionCss(seg));<a name="line_6219"></a></li>
<li id="line_6220" class="even"><span class="lineNumber">&nbsp;6220&nbsp;</span><a name="line_6220"></a></li>
<li id="line_6221" class="odd"><span class="lineNumber">&nbsp;6221&nbsp;</span>				//&nbsp;if&nbsp;the&nbsp;height&nbsp;is&nbsp;short,&nbsp;add&nbsp;a&nbsp;className&nbsp;for&nbsp;alternate&nbsp;styling<a name="line_6221"></a></li>
<li id="line_6222" class="even"><span class="lineNumber">&nbsp;6222&nbsp;</span>				if&nbsp;(seg.bottom&nbsp;-&nbsp;seg.top&nbsp;&lt;&nbsp;30)&nbsp;{<a name="line_6222"></a></li>
<li id="line_6223" class="odd"><span class="lineNumber">&nbsp;6223&nbsp;</span>					seg.el.addClass('fc-short');<a name="line_6223"></a></li>
<li id="line_6224" class="even"><span class="lineNumber">&nbsp;6224&nbsp;</span>				}<a name="line_6224"></a></li>
<li id="line_6225" class="odd"><span class="lineNumber">&nbsp;6225&nbsp;</span><a name="line_6225"></a></li>
<li id="line_6226" class="even"><span class="lineNumber">&nbsp;6226&nbsp;</span>				containerEl.append(seg.el);<a name="line_6226"></a></li>
<li id="line_6227" class="odd"><span class="lineNumber">&nbsp;6227&nbsp;</span>			}<a name="line_6227"></a></li>
<li id="line_6228" class="even"><span class="lineNumber">&nbsp;6228&nbsp;</span><a name="line_6228"></a></li>
<li id="line_6229" class="odd"><span class="lineNumber">&nbsp;6229&nbsp;</span>			trEl.append($('&lt;td/&gt;').append(containerEl));<a name="line_6229"></a></li>
<li id="line_6230" class="even"><span class="lineNumber">&nbsp;6230&nbsp;</span>		}<a name="line_6230"></a></li>
<li id="line_6231" class="odd"><span class="lineNumber">&nbsp;6231&nbsp;</span><a name="line_6231"></a></li>
<li id="line_6232" class="even"><span class="lineNumber">&nbsp;6232&nbsp;</span>		this.bookendCells(trEl,&nbsp;'eventSkeleton');<a name="line_6232"></a></li>
<li id="line_6233" class="odd"><span class="lineNumber">&nbsp;6233&nbsp;</span><a name="line_6233"></a></li>
<li id="line_6234" class="even"><span class="lineNumber">&nbsp;6234&nbsp;</span>		return&nbsp;tableEl;<a name="line_6234"></a></li>
<li id="line_6235" class="odd"><span class="lineNumber">&nbsp;6235&nbsp;</span>	},<a name="line_6235"></a></li>
<li id="line_6236" class="even"><span class="lineNumber">&nbsp;6236&nbsp;</span><a name="line_6236"></a></li>
<li id="line_6237" class="odd"><span class="lineNumber">&nbsp;6237&nbsp;</span><a name="line_6237"></a></li>
<li id="line_6238" class="even"><span class="lineNumber">&nbsp;6238&nbsp;</span>	//&nbsp;Refreshes&nbsp;the&nbsp;CSS&nbsp;top/bottom&nbsp;coordinates&nbsp;for&nbsp;each&nbsp;segment&nbsp;element.&nbsp;Probably&nbsp;after&nbsp;a&nbsp;window&nbsp;resize/zoom.<a name="line_6238"></a></li>
<li id="line_6239" class="odd"><span class="lineNumber">&nbsp;6239&nbsp;</span>	//&nbsp;Repositions&nbsp;business&nbsp;hours&nbsp;segs&nbsp;too,&nbsp;so&nbsp;not&nbsp;just&nbsp;for&nbsp;events.&nbsp;Maybe&nbsp;shouldn't&nbsp;be&nbsp;here.<a name="line_6239"></a></li>
<li id="line_6240" class="even"><span class="lineNumber">&nbsp;6240&nbsp;</span>	updateSegVerticals:&nbsp;function()&nbsp;{<a name="line_6240"></a></li>
<li id="line_6241" class="odd"><span class="lineNumber">&nbsp;6241&nbsp;</span>		var&nbsp;allSegs&nbsp;=&nbsp;(this.segs&nbsp;||&nbsp;[]).concat(this.businessHourSegs&nbsp;||&nbsp;[]);<a name="line_6241"></a></li>
<li id="line_6242" class="even"><span class="lineNumber">&nbsp;6242&nbsp;</span>		var&nbsp;i;<a name="line_6242"></a></li>
<li id="line_6243" class="odd"><span class="lineNumber">&nbsp;6243&nbsp;</span><a name="line_6243"></a></li>
<li id="line_6244" class="even"><span class="lineNumber">&nbsp;6244&nbsp;</span>		this.computeSegVerticals(allSegs);<a name="line_6244"></a></li>
<li id="line_6245" class="odd"><span class="lineNumber">&nbsp;6245&nbsp;</span><a name="line_6245"></a></li>
<li id="line_6246" class="even"><span class="lineNumber">&nbsp;6246&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;allSegs.length;&nbsp;i++)&nbsp;{<a name="line_6246"></a></li>
<li id="line_6247" class="odd"><span class="lineNumber">&nbsp;6247&nbsp;</span>			allSegs[i].el.css(<a name="line_6247"></a></li>
<li id="line_6248" class="even"><span class="lineNumber">&nbsp;6248&nbsp;</span>				this.generateSegVerticalCss(allSegs[i])<a name="line_6248"></a></li>
<li id="line_6249" class="odd"><span class="lineNumber">&nbsp;6249&nbsp;</span>			);<a name="line_6249"></a></li>
<li id="line_6250" class="even"><span class="lineNumber">&nbsp;6250&nbsp;</span>		}<a name="line_6250"></a></li>
<li id="line_6251" class="odd"><span class="lineNumber">&nbsp;6251&nbsp;</span>	},<a name="line_6251"></a></li>
<li id="line_6252" class="even"><span class="lineNumber">&nbsp;6252&nbsp;</span><a name="line_6252"></a></li>
<li id="line_6253" class="odd"><span class="lineNumber">&nbsp;6253&nbsp;</span><a name="line_6253"></a></li>
<li id="line_6254" class="even"><span class="lineNumber">&nbsp;6254&nbsp;</span>	//&nbsp;For&nbsp;each&nbsp;segment&nbsp;in&nbsp;an&nbsp;array,&nbsp;computes&nbsp;and&nbsp;assigns&nbsp;its&nbsp;top&nbsp;and&nbsp;bottom&nbsp;properties<a name="line_6254"></a></li>
<li id="line_6255" class="odd"><span class="lineNumber">&nbsp;6255&nbsp;</span>	computeSegVerticals:&nbsp;function(segs)&nbsp;{<a name="line_6255"></a></li>
<li id="line_6256" class="even"><span class="lineNumber">&nbsp;6256&nbsp;</span>		var&nbsp;i,&nbsp;seg;<a name="line_6256"></a></li>
<li id="line_6257" class="odd"><span class="lineNumber">&nbsp;6257&nbsp;</span><a name="line_6257"></a></li>
<li id="line_6258" class="even"><span class="lineNumber">&nbsp;6258&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;segs.length;&nbsp;i++)&nbsp;{<a name="line_6258"></a></li>
<li id="line_6259" class="odd"><span class="lineNumber">&nbsp;6259&nbsp;</span>			seg&nbsp;=&nbsp;segs[i];<a name="line_6259"></a></li>
<li id="line_6260" class="even"><span class="lineNumber">&nbsp;6260&nbsp;</span>			seg.top&nbsp;=&nbsp;this.computeDateTop(seg.start,&nbsp;seg.start);<a name="line_6260"></a></li>
<li id="line_6261" class="odd"><span class="lineNumber">&nbsp;6261&nbsp;</span>			seg.bottom&nbsp;=&nbsp;this.computeDateTop(seg.end,&nbsp;seg.start);<a name="line_6261"></a></li>
<li id="line_6262" class="even"><span class="lineNumber">&nbsp;6262&nbsp;</span>		}<a name="line_6262"></a></li>
<li id="line_6263" class="odd"><span class="lineNumber">&nbsp;6263&nbsp;</span>	},<a name="line_6263"></a></li>
<li id="line_6264" class="even"><span class="lineNumber">&nbsp;6264&nbsp;</span><a name="line_6264"></a></li>
<li id="line_6265" class="odd"><span class="lineNumber">&nbsp;6265&nbsp;</span><a name="line_6265"></a></li>
<li id="line_6266" class="even"><span class="lineNumber">&nbsp;6266&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;HTML&nbsp;for&nbsp;a&nbsp;single&nbsp;event&nbsp;segment's&nbsp;default&nbsp;rendering<a name="line_6266"></a></li>
<li id="line_6267" class="odd"><span class="lineNumber">&nbsp;6267&nbsp;</span>	fgSegHtml:&nbsp;function(seg,&nbsp;disableResizing)&nbsp;{<a name="line_6267"></a></li>
<li id="line_6268" class="even"><span class="lineNumber">&nbsp;6268&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;this.view;<a name="line_6268"></a></li>
<li id="line_6269" class="odd"><span class="lineNumber">&nbsp;6269&nbsp;</span>		var&nbsp;event&nbsp;=&nbsp;seg.event;<a name="line_6269"></a></li>
<li id="line_6270" class="even"><span class="lineNumber">&nbsp;6270&nbsp;</span>		var&nbsp;isDraggable&nbsp;=&nbsp;view.isEventDraggable(event);<a name="line_6270"></a></li>
<li id="line_6271" class="odd"><span class="lineNumber">&nbsp;6271&nbsp;</span>		var&nbsp;isResizableFromStart&nbsp;=&nbsp;!disableResizing&nbsp;&amp;&amp;&nbsp;seg.isStart&nbsp;&amp;&amp;&nbsp;view.isEventResizableFromStart(event);<a name="line_6271"></a></li>
<li id="line_6272" class="even"><span class="lineNumber">&nbsp;6272&nbsp;</span>		var&nbsp;isResizableFromEnd&nbsp;=&nbsp;!disableResizing&nbsp;&amp;&amp;&nbsp;seg.isEnd&nbsp;&amp;&amp;&nbsp;view.isEventResizableFromEnd(event);<a name="line_6272"></a></li>
<li id="line_6273" class="odd"><span class="lineNumber">&nbsp;6273&nbsp;</span>		var&nbsp;classes&nbsp;=&nbsp;this.getSegClasses(seg,&nbsp;isDraggable,&nbsp;isResizableFromStart&nbsp;||&nbsp;isResizableFromEnd);<a name="line_6273"></a></li>
<li id="line_6274" class="even"><span class="lineNumber">&nbsp;6274&nbsp;</span>		var&nbsp;skinCss&nbsp;=&nbsp;cssToStr(this.getEventSkinCss(event));<a name="line_6274"></a></li>
<li id="line_6275" class="odd"><span class="lineNumber">&nbsp;6275&nbsp;</span>		var&nbsp;timeText;<a name="line_6275"></a></li>
<li id="line_6276" class="even"><span class="lineNumber">&nbsp;6276&nbsp;</span>		var&nbsp;fullTimeText;&nbsp;//&nbsp;more&nbsp;verbose&nbsp;time&nbsp;text.&nbsp;for&nbsp;the&nbsp;print&nbsp;stylesheet<a name="line_6276"></a></li>
<li id="line_6277" class="odd"><span class="lineNumber">&nbsp;6277&nbsp;</span>		var&nbsp;startTimeText;&nbsp;//&nbsp;just&nbsp;the&nbsp;start&nbsp;time&nbsp;text<a name="line_6277"></a></li>
<li id="line_6278" class="even"><span class="lineNumber">&nbsp;6278&nbsp;</span><a name="line_6278"></a></li>
<li id="line_6279" class="odd"><span class="lineNumber">&nbsp;6279&nbsp;</span>		classes.unshift('fc-time-grid-event',&nbsp;'fc-v-event');<a name="line_6279"></a></li>
<li id="line_6280" class="even"><span class="lineNumber">&nbsp;6280&nbsp;</span><a name="line_6280"></a></li>
<li id="line_6281" class="odd"><span class="lineNumber">&nbsp;6281&nbsp;</span>		if&nbsp;(view.isMultiDayEvent(event))&nbsp;{&nbsp;//&nbsp;if&nbsp;the&nbsp;event&nbsp;appears&nbsp;to&nbsp;span&nbsp;more&nbsp;than&nbsp;one&nbsp;day...<a name="line_6281"></a></li>
<li id="line_6282" class="even"><span class="lineNumber">&nbsp;6282&nbsp;</span>			//&nbsp;Don't&nbsp;display&nbsp;time&nbsp;text&nbsp;on&nbsp;segments&nbsp;that&nbsp;run&nbsp;entirely&nbsp;through&nbsp;a&nbsp;day.<a name="line_6282"></a></li>
<li id="line_6283" class="odd"><span class="lineNumber">&nbsp;6283&nbsp;</span>			//&nbsp;That&nbsp;would&nbsp;appear&nbsp;as&nbsp;midnight-midnight&nbsp;and&nbsp;would&nbsp;look&nbsp;dumb.<a name="line_6283"></a></li>
<li id="line_6284" class="even"><span class="lineNumber">&nbsp;6284&nbsp;</span>			//&nbsp;Otherwise,&nbsp;display&nbsp;the&nbsp;time&nbsp;text&nbsp;for&nbsp;the&nbsp;*segment's*&nbsp;times&nbsp;(like&nbsp;6pm-midnight&nbsp;or&nbsp;midnight-10am)<a name="line_6284"></a></li>
<li id="line_6285" class="odd"><span class="lineNumber">&nbsp;6285&nbsp;</span>			if&nbsp;(seg.isStart&nbsp;||&nbsp;seg.isEnd)&nbsp;{<a name="line_6285"></a></li>
<li id="line_6286" class="even"><span class="lineNumber">&nbsp;6286&nbsp;</span>				timeText&nbsp;=&nbsp;this.getEventTimeText(seg);<a name="line_6286"></a></li>
<li id="line_6287" class="odd"><span class="lineNumber">&nbsp;6287&nbsp;</span>				fullTimeText&nbsp;=&nbsp;this.getEventTimeText(seg,&nbsp;'LT');<a name="line_6287"></a></li>
<li id="line_6288" class="even"><span class="lineNumber">&nbsp;6288&nbsp;</span>				startTimeText&nbsp;=&nbsp;this.getEventTimeText(seg,&nbsp;null,&nbsp;false);&nbsp;//&nbsp;displayEnd=false<a name="line_6288"></a></li>
<li id="line_6289" class="odd"><span class="lineNumber">&nbsp;6289&nbsp;</span>			}<a name="line_6289"></a></li>
<li id="line_6290" class="even"><span class="lineNumber">&nbsp;6290&nbsp;</span>		}&nbsp;else&nbsp;{<a name="line_6290"></a></li>
<li id="line_6291" class="odd"><span class="lineNumber">&nbsp;6291&nbsp;</span>			//&nbsp;Display&nbsp;the&nbsp;normal&nbsp;time&nbsp;text&nbsp;for&nbsp;the&nbsp;*event's*&nbsp;times<a name="line_6291"></a></li>
<li id="line_6292" class="even"><span class="lineNumber">&nbsp;6292&nbsp;</span>			timeText&nbsp;=&nbsp;this.getEventTimeText(event);<a name="line_6292"></a></li>
<li id="line_6293" class="odd"><span class="lineNumber">&nbsp;6293&nbsp;</span>			fullTimeText&nbsp;=&nbsp;this.getEventTimeText(event,&nbsp;'LT');<a name="line_6293"></a></li>
<li id="line_6294" class="even"><span class="lineNumber">&nbsp;6294&nbsp;</span>			startTimeText&nbsp;=&nbsp;this.getEventTimeText(event,&nbsp;null,&nbsp;false);&nbsp;//&nbsp;displayEnd=false<a name="line_6294"></a></li>
<li id="line_6295" class="odd"><span class="lineNumber">&nbsp;6295&nbsp;</span>		}<a name="line_6295"></a></li>
<li id="line_6296" class="even"><span class="lineNumber">&nbsp;6296&nbsp;</span><a name="line_6296"></a></li>
<li id="line_6297" class="odd"><span class="lineNumber">&nbsp;6297&nbsp;</span>		return&nbsp;'&lt;a&nbsp;class="'&nbsp;+&nbsp;classes.join('&nbsp;')&nbsp;+&nbsp;'"'&nbsp;+<a name="line_6297"></a></li>
<li id="line_6298" class="even"><span class="lineNumber">&nbsp;6298&nbsp;</span>			(event.url&nbsp;?<a name="line_6298"></a></li>
<li id="line_6299" class="odd"><span class="lineNumber">&nbsp;6299&nbsp;</span>				'&nbsp;href="'&nbsp;+&nbsp;htmlEscape(event.url)&nbsp;+&nbsp;'"'&nbsp;:<a name="line_6299"></a></li>
<li id="line_6300" class="even"><span class="lineNumber">&nbsp;6300&nbsp;</span>				''<a name="line_6300"></a></li>
<li id="line_6301" class="odd"><span class="lineNumber">&nbsp;6301&nbsp;</span>				)&nbsp;+<a name="line_6301"></a></li>
<li id="line_6302" class="even"><span class="lineNumber">&nbsp;6302&nbsp;</span>			(skinCss&nbsp;?<a name="line_6302"></a></li>
<li id="line_6303" class="odd"><span class="lineNumber">&nbsp;6303&nbsp;</span>				'&nbsp;style="'&nbsp;+&nbsp;skinCss&nbsp;+&nbsp;'"'&nbsp;:<a name="line_6303"></a></li>
<li id="line_6304" class="even"><span class="lineNumber">&nbsp;6304&nbsp;</span>				''<a name="line_6304"></a></li>
<li id="line_6305" class="odd"><span class="lineNumber">&nbsp;6305&nbsp;</span>				)&nbsp;+<a name="line_6305"></a></li>
<li id="line_6306" class="even"><span class="lineNumber">&nbsp;6306&nbsp;</span>			'&gt;'&nbsp;+<a name="line_6306"></a></li>
<li id="line_6307" class="odd"><span class="lineNumber">&nbsp;6307&nbsp;</span>				'&lt;div&nbsp;class="fc-content"&gt;'&nbsp;+<a name="line_6307"></a></li>
<li id="line_6308" class="even"><span class="lineNumber">&nbsp;6308&nbsp;</span>					//(timeText&nbsp;?<a name="line_6308"></a></li>
<li id="line_6309" class="odd"><span class="lineNumber">&nbsp;6309&nbsp;</span>					//	'&lt;div&nbsp;class="fc-time"'&nbsp;+<a name="line_6309"></a></li>
<li id="line_6310" class="even"><span class="lineNumber">&nbsp;6310&nbsp;</span>					//	'&nbsp;data-start="'&nbsp;+&nbsp;htmlEscape(startTimeText)&nbsp;+&nbsp;'"'&nbsp;+<a name="line_6310"></a></li>
<li id="line_6311" class="odd"><span class="lineNumber">&nbsp;6311&nbsp;</span>					//	'&nbsp;data-full="'&nbsp;+&nbsp;htmlEscape(fullTimeText)&nbsp;+&nbsp;'"'&nbsp;+<a name="line_6311"></a></li>
<li id="line_6312" class="even"><span class="lineNumber">&nbsp;6312&nbsp;</span>					//	'&gt;'&nbsp;+<a name="line_6312"></a></li>
<li id="line_6313" class="odd"><span class="lineNumber">&nbsp;6313&nbsp;</span>					//		'&lt;span&gt;'&nbsp;+&nbsp;htmlEscape(timeText)&nbsp;+&nbsp;'&lt;/span&gt;'&nbsp;+<a name="line_6313"></a></li>
<li id="line_6314" class="even"><span class="lineNumber">&nbsp;6314&nbsp;</span>					//	'&lt;/div&gt;'&nbsp;:<a name="line_6314"></a></li>
<li id="line_6315" class="odd"><span class="lineNumber">&nbsp;6315&nbsp;</span>					//	''<a name="line_6315"></a></li>
<li id="line_6316" class="even"><span class="lineNumber">&nbsp;6316&nbsp;</span>					//	)&nbsp;+<a name="line_6316"></a></li>
<li id="line_6317" class="odd"><span class="lineNumber">&nbsp;6317&nbsp;</span>					(event.title&nbsp;?<a name="line_6317"></a></li>
<li id="line_6318" class="even"><span class="lineNumber">&nbsp;6318&nbsp;</span>						'&lt;div&nbsp;class="fc-title"&gt;'&nbsp;+<a name="line_6318"></a></li>
<li id="line_6319" class="odd"><span class="lineNumber">&nbsp;6319&nbsp;</span>							htmlEscape(event.title)&nbsp;+<a name="line_6319"></a></li>
<li id="line_6320" class="even"><span class="lineNumber">&nbsp;6320&nbsp;</span>						'&lt;/div&gt;'&nbsp;:<a name="line_6320"></a></li>
<li id="line_6321" class="odd"><span class="lineNumber">&nbsp;6321&nbsp;</span>						''<a name="line_6321"></a></li>
<li id="line_6322" class="even"><span class="lineNumber">&nbsp;6322&nbsp;</span>						)&nbsp;+<a name="line_6322"></a></li>
<li id="line_6323" class="odd"><span class="lineNumber">&nbsp;6323&nbsp;</span>				'&lt;/div&gt;'&nbsp;+<a name="line_6323"></a></li>
<li id="line_6324" class="even"><span class="lineNumber">&nbsp;6324&nbsp;</span>				'&lt;div&nbsp;class="fc-bg"/&gt;'&nbsp;+<a name="line_6324"></a></li>
<li id="line_6325" class="odd"><span class="lineNumber">&nbsp;6325&nbsp;</span>				/*&nbsp;TODO:&nbsp;write&nbsp;CSS&nbsp;for&nbsp;this<a name="line_6325"></a></li>
<li id="line_6326" class="even"><span class="lineNumber">&nbsp;6326&nbsp;</span>				(isResizableFromStart&nbsp;?<a name="line_6326"></a></li>
<li id="line_6327" class="odd"><span class="lineNumber">&nbsp;6327&nbsp;</span>					'&lt;div&nbsp;class="fc-resizer&nbsp;fc-start-resizer"&nbsp;/&gt;'&nbsp;:<a name="line_6327"></a></li>
<li id="line_6328" class="even"><span class="lineNumber">&nbsp;6328&nbsp;</span>					''<a name="line_6328"></a></li>
<li id="line_6329" class="odd"><span class="lineNumber">&nbsp;6329&nbsp;</span>					)&nbsp;+<a name="line_6329"></a></li>
<li id="line_6330" class="even"><span class="lineNumber">&nbsp;6330&nbsp;</span>				*/<a name="line_6330"></a></li>
<li id="line_6331" class="odd"><span class="lineNumber">&nbsp;6331&nbsp;</span>				(isResizableFromEnd&nbsp;?<a name="line_6331"></a></li>
<li id="line_6332" class="even"><span class="lineNumber">&nbsp;6332&nbsp;</span>					'&lt;div&nbsp;class="fc-resizer&nbsp;fc-end-resizer"&nbsp;/&gt;'&nbsp;:<a name="line_6332"></a></li>
<li id="line_6333" class="odd"><span class="lineNumber">&nbsp;6333&nbsp;</span>					''<a name="line_6333"></a></li>
<li id="line_6334" class="even"><span class="lineNumber">&nbsp;6334&nbsp;</span>					)&nbsp;+<a name="line_6334"></a></li>
<li id="line_6335" class="odd"><span class="lineNumber">&nbsp;6335&nbsp;</span>			'&lt;/a&gt;';<a name="line_6335"></a></li>
<li id="line_6336" class="even"><span class="lineNumber">&nbsp;6336&nbsp;</span>	},<a name="line_6336"></a></li>
<li id="line_6337" class="odd"><span class="lineNumber">&nbsp;6337&nbsp;</span><a name="line_6337"></a></li>
<li id="line_6338" class="even"><span class="lineNumber">&nbsp;6338&nbsp;</span><a name="line_6338"></a></li>
<li id="line_6339" class="odd"><span class="lineNumber">&nbsp;6339&nbsp;</span>	//&nbsp;Generates&nbsp;an&nbsp;object&nbsp;with&nbsp;CSS&nbsp;properties/values&nbsp;that&nbsp;should&nbsp;be&nbsp;applied&nbsp;to&nbsp;an&nbsp;event&nbsp;segment&nbsp;element.<a name="line_6339"></a></li>
<li id="line_6340" class="even"><span class="lineNumber">&nbsp;6340&nbsp;</span>	//&nbsp;Contains&nbsp;important&nbsp;positioning-related&nbsp;properties&nbsp;that&nbsp;should&nbsp;be&nbsp;applied&nbsp;to&nbsp;any&nbsp;event&nbsp;element,&nbsp;customized&nbsp;or&nbsp;not.<a name="line_6340"></a></li>
<li id="line_6341" class="odd"><span class="lineNumber">&nbsp;6341&nbsp;</span>	generateSegPositionCss:&nbsp;function(seg)&nbsp;{<a name="line_6341"></a></li>
<li id="line_6342" class="even"><span class="lineNumber">&nbsp;6342&nbsp;</span>		var&nbsp;shouldOverlap&nbsp;=&nbsp;this.view.opt('slotEventOverlap');<a name="line_6342"></a></li>
<li id="line_6343" class="odd"><span class="lineNumber">&nbsp;6343&nbsp;</span>		var&nbsp;backwardCoord&nbsp;=&nbsp;seg.backwardCoord;&nbsp;//&nbsp;the&nbsp;left&nbsp;side&nbsp;if&nbsp;LTR.&nbsp;the&nbsp;right&nbsp;side&nbsp;if&nbsp;RTL.&nbsp;floating-point<a name="line_6343"></a></li>
<li id="line_6344" class="even"><span class="lineNumber">&nbsp;6344&nbsp;</span>		var&nbsp;forwardCoord&nbsp;=&nbsp;seg.forwardCoord;&nbsp;//&nbsp;the&nbsp;right&nbsp;side&nbsp;if&nbsp;LTR.&nbsp;the&nbsp;left&nbsp;side&nbsp;if&nbsp;RTL.&nbsp;floating-point<a name="line_6344"></a></li>
<li id="line_6345" class="odd"><span class="lineNumber">&nbsp;6345&nbsp;</span>		var&nbsp;props&nbsp;=&nbsp;this.generateSegVerticalCss(seg);&nbsp;//&nbsp;get&nbsp;top/bottom&nbsp;first<a name="line_6345"></a></li>
<li id="line_6346" class="even"><span class="lineNumber">&nbsp;6346&nbsp;</span>		var&nbsp;left;&nbsp;//&nbsp;amount&nbsp;of&nbsp;space&nbsp;from&nbsp;left&nbsp;edge,&nbsp;a&nbsp;fraction&nbsp;of&nbsp;the&nbsp;total&nbsp;width<a name="line_6346"></a></li>
<li id="line_6347" class="odd"><span class="lineNumber">&nbsp;6347&nbsp;</span>		var&nbsp;right;&nbsp;//&nbsp;amount&nbsp;of&nbsp;space&nbsp;from&nbsp;right&nbsp;edge,&nbsp;a&nbsp;fraction&nbsp;of&nbsp;the&nbsp;total&nbsp;width<a name="line_6347"></a></li>
<li id="line_6348" class="even"><span class="lineNumber">&nbsp;6348&nbsp;</span><a name="line_6348"></a></li>
<li id="line_6349" class="odd"><span class="lineNumber">&nbsp;6349&nbsp;</span>		if&nbsp;(shouldOverlap)&nbsp;{<a name="line_6349"></a></li>
<li id="line_6350" class="even"><span class="lineNumber">&nbsp;6350&nbsp;</span>			//&nbsp;double&nbsp;the&nbsp;width,&nbsp;but&nbsp;don't&nbsp;go&nbsp;beyond&nbsp;the&nbsp;maximum&nbsp;forward&nbsp;coordinate&nbsp;(1.0)<a name="line_6350"></a></li>
<li id="line_6351" class="odd"><span class="lineNumber">&nbsp;6351&nbsp;</span>			forwardCoord&nbsp;=&nbsp;Math.min(1,&nbsp;backwardCoord&nbsp;+&nbsp;(forwardCoord&nbsp;-&nbsp;backwardCoord)&nbsp;*&nbsp;2);<a name="line_6351"></a></li>
<li id="line_6352" class="even"><span class="lineNumber">&nbsp;6352&nbsp;</span>		}<a name="line_6352"></a></li>
<li id="line_6353" class="odd"><span class="lineNumber">&nbsp;6353&nbsp;</span><a name="line_6353"></a></li>
<li id="line_6354" class="even"><span class="lineNumber">&nbsp;6354&nbsp;</span>		if&nbsp;(this.isRTL)&nbsp;{<a name="line_6354"></a></li>
<li id="line_6355" class="odd"><span class="lineNumber">&nbsp;6355&nbsp;</span>			left&nbsp;=&nbsp;1&nbsp;-&nbsp;forwardCoord;<a name="line_6355"></a></li>
<li id="line_6356" class="even"><span class="lineNumber">&nbsp;6356&nbsp;</span>			right&nbsp;=&nbsp;backwardCoord;<a name="line_6356"></a></li>
<li id="line_6357" class="odd"><span class="lineNumber">&nbsp;6357&nbsp;</span>		}<a name="line_6357"></a></li>
<li id="line_6358" class="even"><span class="lineNumber">&nbsp;6358&nbsp;</span>		else&nbsp;{<a name="line_6358"></a></li>
<li id="line_6359" class="odd"><span class="lineNumber">&nbsp;6359&nbsp;</span>			left&nbsp;=&nbsp;backwardCoord;<a name="line_6359"></a></li>
<li id="line_6360" class="even"><span class="lineNumber">&nbsp;6360&nbsp;</span>			right&nbsp;=&nbsp;1&nbsp;-&nbsp;forwardCoord;<a name="line_6360"></a></li>
<li id="line_6361" class="odd"><span class="lineNumber">&nbsp;6361&nbsp;</span>		}<a name="line_6361"></a></li>
<li id="line_6362" class="even"><span class="lineNumber">&nbsp;6362&nbsp;</span><a name="line_6362"></a></li>
<li id="line_6363" class="odd"><span class="lineNumber">&nbsp;6363&nbsp;</span>		props.zIndex&nbsp;=&nbsp;seg.level&nbsp;+&nbsp;1;&nbsp;//&nbsp;convert&nbsp;from&nbsp;0-base&nbsp;to&nbsp;1-based<a name="line_6363"></a></li>
<li id="line_6364" class="even"><span class="lineNumber">&nbsp;6364&nbsp;</span>		props.left&nbsp;=&nbsp;left&nbsp;*&nbsp;100&nbsp;+&nbsp;'%';<a name="line_6364"></a></li>
<li id="line_6365" class="odd"><span class="lineNumber">&nbsp;6365&nbsp;</span>		props.right&nbsp;=&nbsp;right&nbsp;*&nbsp;100&nbsp;+&nbsp;'%';<a name="line_6365"></a></li>
<li id="line_6366" class="even"><span class="lineNumber">&nbsp;6366&nbsp;</span><a name="line_6366"></a></li>
<li id="line_6367" class="odd"><span class="lineNumber">&nbsp;6367&nbsp;</span>		if&nbsp;(shouldOverlap&nbsp;&amp;&amp;&nbsp;seg.forwardPressure)&nbsp;{<a name="line_6367"></a></li>
<li id="line_6368" class="even"><span class="lineNumber">&nbsp;6368&nbsp;</span>			//&nbsp;add&nbsp;padding&nbsp;to&nbsp;the&nbsp;edge&nbsp;so&nbsp;that&nbsp;forward&nbsp;stacked&nbsp;events&nbsp;don't&nbsp;cover&nbsp;the&nbsp;resizer's&nbsp;icon<a name="line_6368"></a></li>
<li id="line_6369" class="odd"><span class="lineNumber">&nbsp;6369&nbsp;</span>			props[this.isRTL&nbsp;?&nbsp;'marginLeft'&nbsp;:&nbsp;'marginRight']&nbsp;=&nbsp;10&nbsp;*&nbsp;2;&nbsp;//&nbsp;10&nbsp;is&nbsp;a&nbsp;guesstimate&nbsp;of&nbsp;the&nbsp;icon's&nbsp;width<a name="line_6369"></a></li>
<li id="line_6370" class="even"><span class="lineNumber">&nbsp;6370&nbsp;</span>		}<a name="line_6370"></a></li>
<li id="line_6371" class="odd"><span class="lineNumber">&nbsp;6371&nbsp;</span><a name="line_6371"></a></li>
<li id="line_6372" class="even"><span class="lineNumber">&nbsp;6372&nbsp;</span>		return&nbsp;props;<a name="line_6372"></a></li>
<li id="line_6373" class="odd"><span class="lineNumber">&nbsp;6373&nbsp;</span>	},<a name="line_6373"></a></li>
<li id="line_6374" class="even"><span class="lineNumber">&nbsp;6374&nbsp;</span><a name="line_6374"></a></li>
<li id="line_6375" class="odd"><span class="lineNumber">&nbsp;6375&nbsp;</span><a name="line_6375"></a></li>
<li id="line_6376" class="even"><span class="lineNumber">&nbsp;6376&nbsp;</span>	//&nbsp;Generates&nbsp;an&nbsp;object&nbsp;with&nbsp;CSS&nbsp;properties&nbsp;for&nbsp;the&nbsp;top/bottom&nbsp;coordinates&nbsp;of&nbsp;a&nbsp;segment&nbsp;element<a name="line_6376"></a></li>
<li id="line_6377" class="odd"><span class="lineNumber">&nbsp;6377&nbsp;</span>	generateSegVerticalCss:&nbsp;function(seg)&nbsp;{<a name="line_6377"></a></li>
<li id="line_6378" class="even"><span class="lineNumber">&nbsp;6378&nbsp;</span>		return&nbsp;{<a name="line_6378"></a></li>
<li id="line_6379" class="odd"><span class="lineNumber">&nbsp;6379&nbsp;</span>			top:&nbsp;seg.top,<a name="line_6379"></a></li>
<li id="line_6380" class="even"><span class="lineNumber">&nbsp;6380&nbsp;</span>			bottom:&nbsp;-seg.bottom&nbsp;//&nbsp;flipped&nbsp;because&nbsp;needs&nbsp;to&nbsp;be&nbsp;space&nbsp;beyond&nbsp;bottom&nbsp;edge&nbsp;of&nbsp;event&nbsp;container<a name="line_6380"></a></li>
<li id="line_6381" class="odd"><span class="lineNumber">&nbsp;6381&nbsp;</span>		};<a name="line_6381"></a></li>
<li id="line_6382" class="even"><span class="lineNumber">&nbsp;6382&nbsp;</span>	},<a name="line_6382"></a></li>
<li id="line_6383" class="odd"><span class="lineNumber">&nbsp;6383&nbsp;</span><a name="line_6383"></a></li>
<li id="line_6384" class="even"><span class="lineNumber">&nbsp;6384&nbsp;</span><a name="line_6384"></a></li>
<li id="line_6385" class="odd"><span class="lineNumber">&nbsp;6385&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;flat&nbsp;array&nbsp;of&nbsp;segments,&nbsp;return&nbsp;an&nbsp;array&nbsp;of&nbsp;sub-arrays,&nbsp;grouped&nbsp;by&nbsp;each&nbsp;segment's&nbsp;col<a name="line_6385"></a></li>
<li id="line_6386" class="even"><span class="lineNumber">&nbsp;6386&nbsp;</span>	groupSegCols:&nbsp;function(segs)&nbsp;{<a name="line_6386"></a></li>
<li id="line_6387" class="odd"><span class="lineNumber">&nbsp;6387&nbsp;</span>		var&nbsp;segCols&nbsp;=&nbsp;[];<a name="line_6387"></a></li>
<li id="line_6388" class="even"><span class="lineNumber">&nbsp;6388&nbsp;</span>		var&nbsp;i;<a name="line_6388"></a></li>
<li id="line_6389" class="odd"><span class="lineNumber">&nbsp;6389&nbsp;</span><a name="line_6389"></a></li>
<li id="line_6390" class="even"><span class="lineNumber">&nbsp;6390&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;this.colCnt;&nbsp;i++)&nbsp;{<a name="line_6390"></a></li>
<li id="line_6391" class="odd"><span class="lineNumber">&nbsp;6391&nbsp;</span>			segCols.push([]);<a name="line_6391"></a></li>
<li id="line_6392" class="even"><span class="lineNumber">&nbsp;6392&nbsp;</span>		}<a name="line_6392"></a></li>
<li id="line_6393" class="odd"><span class="lineNumber">&nbsp;6393&nbsp;</span><a name="line_6393"></a></li>
<li id="line_6394" class="even"><span class="lineNumber">&nbsp;6394&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;segs.length;&nbsp;i++)&nbsp;{<a name="line_6394"></a></li>
<li id="line_6395" class="odd"><span class="lineNumber">&nbsp;6395&nbsp;</span>			segCols[segs[i].col].push(segs[i]);<a name="line_6395"></a></li>
<li id="line_6396" class="even"><span class="lineNumber">&nbsp;6396&nbsp;</span>		}<a name="line_6396"></a></li>
<li id="line_6397" class="odd"><span class="lineNumber">&nbsp;6397&nbsp;</span><a name="line_6397"></a></li>
<li id="line_6398" class="even"><span class="lineNumber">&nbsp;6398&nbsp;</span>		return&nbsp;segCols;<a name="line_6398"></a></li>
<li id="line_6399" class="odd"><span class="lineNumber">&nbsp;6399&nbsp;</span>	}<a name="line_6399"></a></li>
<li id="line_6400" class="even"><span class="lineNumber">&nbsp;6400&nbsp;</span><a name="line_6400"></a></li>
<li id="line_6401" class="odd"><span class="lineNumber">&nbsp;6401&nbsp;</span>});<a name="line_6401"></a></li>
<li id="line_6402" class="even"><span class="lineNumber">&nbsp;6402&nbsp;</span><a name="line_6402"></a></li>
<li id="line_6403" class="odd"><span class="lineNumber">&nbsp;6403&nbsp;</span><a name="line_6403"></a></li>
<li id="line_6404" class="even"><span class="lineNumber">&nbsp;6404&nbsp;</span>//&nbsp;Given&nbsp;an&nbsp;array&nbsp;of&nbsp;segments&nbsp;that&nbsp;are&nbsp;all&nbsp;in&nbsp;the&nbsp;same&nbsp;column,&nbsp;sets&nbsp;the&nbsp;backwardCoord&nbsp;and&nbsp;forwardCoord&nbsp;on&nbsp;each.<a name="line_6404"></a></li>
<li id="line_6405" class="odd"><span class="lineNumber">&nbsp;6405&nbsp;</span>//&nbsp;NOTE:&nbsp;Also&nbsp;reorders&nbsp;the&nbsp;given&nbsp;array&nbsp;by&nbsp;date!<a name="line_6405"></a></li>
<li id="line_6406" class="even"><span class="lineNumber">&nbsp;6406&nbsp;</span>function&nbsp;placeSlotSegs(segs)&nbsp;{<a name="line_6406"></a></li>
<li id="line_6407" class="odd"><span class="lineNumber">&nbsp;6407&nbsp;</span>	var&nbsp;levels;<a name="line_6407"></a></li>
<li id="line_6408" class="even"><span class="lineNumber">&nbsp;6408&nbsp;</span>	var&nbsp;level0;<a name="line_6408"></a></li>
<li id="line_6409" class="odd"><span class="lineNumber">&nbsp;6409&nbsp;</span>	var&nbsp;i;<a name="line_6409"></a></li>
<li id="line_6410" class="even"><span class="lineNumber">&nbsp;6410&nbsp;</span><a name="line_6410"></a></li>
<li id="line_6411" class="odd"><span class="lineNumber">&nbsp;6411&nbsp;</span>	segs.sort(compareSegs);&nbsp;//&nbsp;order&nbsp;by&nbsp;date<a name="line_6411"></a></li>
<li id="line_6412" class="even"><span class="lineNumber">&nbsp;6412&nbsp;</span>	levels&nbsp;=&nbsp;buildSlotSegLevels(segs);<a name="line_6412"></a></li>
<li id="line_6413" class="odd"><span class="lineNumber">&nbsp;6413&nbsp;</span>	computeForwardSlotSegs(levels);<a name="line_6413"></a></li>
<li id="line_6414" class="even"><span class="lineNumber">&nbsp;6414&nbsp;</span><a name="line_6414"></a></li>
<li id="line_6415" class="odd"><span class="lineNumber">&nbsp;6415&nbsp;</span>	if&nbsp;((level0&nbsp;=&nbsp;levels[0]))&nbsp;{<a name="line_6415"></a></li>
<li id="line_6416" class="even"><span class="lineNumber">&nbsp;6416&nbsp;</span><a name="line_6416"></a></li>
<li id="line_6417" class="odd"><span class="lineNumber">&nbsp;6417&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;level0.length;&nbsp;i++)&nbsp;{<a name="line_6417"></a></li>
<li id="line_6418" class="even"><span class="lineNumber">&nbsp;6418&nbsp;</span>			computeSlotSegPressures(level0[i]);<a name="line_6418"></a></li>
<li id="line_6419" class="odd"><span class="lineNumber">&nbsp;6419&nbsp;</span>		}<a name="line_6419"></a></li>
<li id="line_6420" class="even"><span class="lineNumber">&nbsp;6420&nbsp;</span><a name="line_6420"></a></li>
<li id="line_6421" class="odd"><span class="lineNumber">&nbsp;6421&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;level0.length;&nbsp;i++)&nbsp;{<a name="line_6421"></a></li>
<li id="line_6422" class="even"><span class="lineNumber">&nbsp;6422&nbsp;</span>			computeSlotSegCoords(level0[i],&nbsp;0,&nbsp;0);<a name="line_6422"></a></li>
<li id="line_6423" class="odd"><span class="lineNumber">&nbsp;6423&nbsp;</span>		}<a name="line_6423"></a></li>
<li id="line_6424" class="even"><span class="lineNumber">&nbsp;6424&nbsp;</span>	}<a name="line_6424"></a></li>
<li id="line_6425" class="odd"><span class="lineNumber">&nbsp;6425&nbsp;</span>}<a name="line_6425"></a></li>
<li id="line_6426" class="even"><span class="lineNumber">&nbsp;6426&nbsp;</span><a name="line_6426"></a></li>
<li id="line_6427" class="odd"><span class="lineNumber">&nbsp;6427&nbsp;</span><a name="line_6427"></a></li>
<li id="line_6428" class="even"><span class="lineNumber">&nbsp;6428&nbsp;</span>//&nbsp;Builds&nbsp;an&nbsp;array&nbsp;of&nbsp;segments&nbsp;"levels".&nbsp;The&nbsp;first&nbsp;level&nbsp;will&nbsp;be&nbsp;the&nbsp;leftmost&nbsp;tier&nbsp;of&nbsp;segments&nbsp;if&nbsp;the&nbsp;calendar&nbsp;is<a name="line_6428"></a></li>
<li id="line_6429" class="odd"><span class="lineNumber">&nbsp;6429&nbsp;</span>//&nbsp;left-to-right,&nbsp;or&nbsp;the&nbsp;rightmost&nbsp;if&nbsp;the&nbsp;calendar&nbsp;is&nbsp;right-to-left.&nbsp;Assumes&nbsp;the&nbsp;segments&nbsp;are&nbsp;already&nbsp;ordered&nbsp;by&nbsp;date.<a name="line_6429"></a></li>
<li id="line_6430" class="even"><span class="lineNumber">&nbsp;6430&nbsp;</span>function&nbsp;buildSlotSegLevels(segs)&nbsp;{<a name="line_6430"></a></li>
<li id="line_6431" class="odd"><span class="lineNumber">&nbsp;6431&nbsp;</span>	var&nbsp;levels&nbsp;=&nbsp;[];<a name="line_6431"></a></li>
<li id="line_6432" class="even"><span class="lineNumber">&nbsp;6432&nbsp;</span>	var&nbsp;i,&nbsp;seg;<a name="line_6432"></a></li>
<li id="line_6433" class="odd"><span class="lineNumber">&nbsp;6433&nbsp;</span>	var&nbsp;j;<a name="line_6433"></a></li>
<li id="line_6434" class="even"><span class="lineNumber">&nbsp;6434&nbsp;</span><a name="line_6434"></a></li>
<li id="line_6435" class="odd"><span class="lineNumber">&nbsp;6435&nbsp;</span>	for&nbsp;(i=0;&nbsp;i&lt;segs.length;&nbsp;i++)&nbsp;{<a name="line_6435"></a></li>
<li id="line_6436" class="even"><span class="lineNumber">&nbsp;6436&nbsp;</span>		seg&nbsp;=&nbsp;segs[i];<a name="line_6436"></a></li>
<li id="line_6437" class="odd"><span class="lineNumber">&nbsp;6437&nbsp;</span><a name="line_6437"></a></li>
<li id="line_6438" class="even"><span class="lineNumber">&nbsp;6438&nbsp;</span>		//&nbsp;go&nbsp;through&nbsp;all&nbsp;the&nbsp;levels&nbsp;and&nbsp;stop&nbsp;on&nbsp;the&nbsp;first&nbsp;level&nbsp;where&nbsp;there&nbsp;are&nbsp;no&nbsp;collisions<a name="line_6438"></a></li>
<li id="line_6439" class="odd"><span class="lineNumber">&nbsp;6439&nbsp;</span>		for&nbsp;(j=0;&nbsp;j&lt;levels.length;&nbsp;j++)&nbsp;{<a name="line_6439"></a></li>
<li id="line_6440" class="even"><span class="lineNumber">&nbsp;6440&nbsp;</span>			if&nbsp;(!computeSlotSegCollisions(seg,&nbsp;levels[j]).length)&nbsp;{<a name="line_6440"></a></li>
<li id="line_6441" class="odd"><span class="lineNumber">&nbsp;6441&nbsp;</span>				break;<a name="line_6441"></a></li>
<li id="line_6442" class="even"><span class="lineNumber">&nbsp;6442&nbsp;</span>			}<a name="line_6442"></a></li>
<li id="line_6443" class="odd"><span class="lineNumber">&nbsp;6443&nbsp;</span>		}<a name="line_6443"></a></li>
<li id="line_6444" class="even"><span class="lineNumber">&nbsp;6444&nbsp;</span><a name="line_6444"></a></li>
<li id="line_6445" class="odd"><span class="lineNumber">&nbsp;6445&nbsp;</span>		seg.level&nbsp;=&nbsp;j;<a name="line_6445"></a></li>
<li id="line_6446" class="even"><span class="lineNumber">&nbsp;6446&nbsp;</span><a name="line_6446"></a></li>
<li id="line_6447" class="odd"><span class="lineNumber">&nbsp;6447&nbsp;</span>		(levels[j]&nbsp;||&nbsp;(levels[j]&nbsp;=&nbsp;[])).push(seg);<a name="line_6447"></a></li>
<li id="line_6448" class="even"><span class="lineNumber">&nbsp;6448&nbsp;</span>	}<a name="line_6448"></a></li>
<li id="line_6449" class="odd"><span class="lineNumber">&nbsp;6449&nbsp;</span><a name="line_6449"></a></li>
<li id="line_6450" class="even"><span class="lineNumber">&nbsp;6450&nbsp;</span>	return&nbsp;levels;<a name="line_6450"></a></li>
<li id="line_6451" class="odd"><span class="lineNumber">&nbsp;6451&nbsp;</span>}<a name="line_6451"></a></li>
<li id="line_6452" class="even"><span class="lineNumber">&nbsp;6452&nbsp;</span><a name="line_6452"></a></li>
<li id="line_6453" class="odd"><span class="lineNumber">&nbsp;6453&nbsp;</span><a name="line_6453"></a></li>
<li id="line_6454" class="even"><span class="lineNumber">&nbsp;6454&nbsp;</span>//&nbsp;For&nbsp;every&nbsp;segment,&nbsp;figure&nbsp;out&nbsp;the&nbsp;other&nbsp;segments&nbsp;that&nbsp;are&nbsp;in&nbsp;subsequent<a name="line_6454"></a></li>
<li id="line_6455" class="odd"><span class="lineNumber">&nbsp;6455&nbsp;</span>//&nbsp;levels&nbsp;that&nbsp;also&nbsp;occupy&nbsp;the&nbsp;same&nbsp;vertical&nbsp;space.&nbsp;Accumulate&nbsp;in&nbsp;seg.forwardSegs<a name="line_6455"></a></li>
<li id="line_6456" class="even"><span class="lineNumber">&nbsp;6456&nbsp;</span>function&nbsp;computeForwardSlotSegs(levels)&nbsp;{<a name="line_6456"></a></li>
<li id="line_6457" class="odd"><span class="lineNumber">&nbsp;6457&nbsp;</span>	var&nbsp;i,&nbsp;level;<a name="line_6457"></a></li>
<li id="line_6458" class="even"><span class="lineNumber">&nbsp;6458&nbsp;</span>	var&nbsp;j,&nbsp;seg;<a name="line_6458"></a></li>
<li id="line_6459" class="odd"><span class="lineNumber">&nbsp;6459&nbsp;</span>	var&nbsp;k;<a name="line_6459"></a></li>
<li id="line_6460" class="even"><span class="lineNumber">&nbsp;6460&nbsp;</span><a name="line_6460"></a></li>
<li id="line_6461" class="odd"><span class="lineNumber">&nbsp;6461&nbsp;</span>	for&nbsp;(i=0;&nbsp;i&lt;levels.length;&nbsp;i++)&nbsp;{<a name="line_6461"></a></li>
<li id="line_6462" class="even"><span class="lineNumber">&nbsp;6462&nbsp;</span>		level&nbsp;=&nbsp;levels[i];<a name="line_6462"></a></li>
<li id="line_6463" class="odd"><span class="lineNumber">&nbsp;6463&nbsp;</span><a name="line_6463"></a></li>
<li id="line_6464" class="even"><span class="lineNumber">&nbsp;6464&nbsp;</span>		for&nbsp;(j=0;&nbsp;j&lt;level.length;&nbsp;j++)&nbsp;{<a name="line_6464"></a></li>
<li id="line_6465" class="odd"><span class="lineNumber">&nbsp;6465&nbsp;</span>			seg&nbsp;=&nbsp;level[j];<a name="line_6465"></a></li>
<li id="line_6466" class="even"><span class="lineNumber">&nbsp;6466&nbsp;</span><a name="line_6466"></a></li>
<li id="line_6467" class="odd"><span class="lineNumber">&nbsp;6467&nbsp;</span>			seg.forwardSegs&nbsp;=&nbsp;[];<a name="line_6467"></a></li>
<li id="line_6468" class="even"><span class="lineNumber">&nbsp;6468&nbsp;</span>			for&nbsp;(k=i+1;&nbsp;k&lt;levels.length;&nbsp;k++)&nbsp;{<a name="line_6468"></a></li>
<li id="line_6469" class="odd"><span class="lineNumber">&nbsp;6469&nbsp;</span>				computeSlotSegCollisions(seg,&nbsp;levels[k],&nbsp;seg.forwardSegs);<a name="line_6469"></a></li>
<li id="line_6470" class="even"><span class="lineNumber">&nbsp;6470&nbsp;</span>			}<a name="line_6470"></a></li>
<li id="line_6471" class="odd"><span class="lineNumber">&nbsp;6471&nbsp;</span>		}<a name="line_6471"></a></li>
<li id="line_6472" class="even"><span class="lineNumber">&nbsp;6472&nbsp;</span>	}<a name="line_6472"></a></li>
<li id="line_6473" class="odd"><span class="lineNumber">&nbsp;6473&nbsp;</span>}<a name="line_6473"></a></li>
<li id="line_6474" class="even"><span class="lineNumber">&nbsp;6474&nbsp;</span><a name="line_6474"></a></li>
<li id="line_6475" class="odd"><span class="lineNumber">&nbsp;6475&nbsp;</span><a name="line_6475"></a></li>
<li id="line_6476" class="even"><span class="lineNumber">&nbsp;6476&nbsp;</span>//&nbsp;Figure&nbsp;out&nbsp;which&nbsp;path&nbsp;forward&nbsp;(via&nbsp;seg.forwardSegs)&nbsp;results&nbsp;in&nbsp;the&nbsp;longest&nbsp;path&nbsp;until<a name="line_6476"></a></li>
<li id="line_6477" class="odd"><span class="lineNumber">&nbsp;6477&nbsp;</span>//&nbsp;the&nbsp;furthest&nbsp;edge&nbsp;is&nbsp;reached.&nbsp;The&nbsp;number&nbsp;of&nbsp;segments&nbsp;in&nbsp;this&nbsp;path&nbsp;will&nbsp;be&nbsp;seg.forwardPressure<a name="line_6477"></a></li>
<li id="line_6478" class="even"><span class="lineNumber">&nbsp;6478&nbsp;</span>function&nbsp;computeSlotSegPressures(seg)&nbsp;{<a name="line_6478"></a></li>
<li id="line_6479" class="odd"><span class="lineNumber">&nbsp;6479&nbsp;</span>	var&nbsp;forwardSegs&nbsp;=&nbsp;seg.forwardSegs;<a name="line_6479"></a></li>
<li id="line_6480" class="even"><span class="lineNumber">&nbsp;6480&nbsp;</span>	var&nbsp;forwardPressure&nbsp;=&nbsp;0;<a name="line_6480"></a></li>
<li id="line_6481" class="odd"><span class="lineNumber">&nbsp;6481&nbsp;</span>	var&nbsp;i,&nbsp;forwardSeg;<a name="line_6481"></a></li>
<li id="line_6482" class="even"><span class="lineNumber">&nbsp;6482&nbsp;</span><a name="line_6482"></a></li>
<li id="line_6483" class="odd"><span class="lineNumber">&nbsp;6483&nbsp;</span>	if&nbsp;(seg.forwardPressure&nbsp;===&nbsp;undefined)&nbsp;{&nbsp;//&nbsp;not&nbsp;already&nbsp;computed<a name="line_6483"></a></li>
<li id="line_6484" class="even"><span class="lineNumber">&nbsp;6484&nbsp;</span><a name="line_6484"></a></li>
<li id="line_6485" class="odd"><span class="lineNumber">&nbsp;6485&nbsp;</span>		for&nbsp;(i=0;&nbsp;i&lt;forwardSegs.length;&nbsp;i++)&nbsp;{<a name="line_6485"></a></li>
<li id="line_6486" class="even"><span class="lineNumber">&nbsp;6486&nbsp;</span>			forwardSeg&nbsp;=&nbsp;forwardSegs[i];<a name="line_6486"></a></li>
<li id="line_6487" class="odd"><span class="lineNumber">&nbsp;6487&nbsp;</span><a name="line_6487"></a></li>
<li id="line_6488" class="even"><span class="lineNumber">&nbsp;6488&nbsp;</span>			//&nbsp;figure&nbsp;out&nbsp;the&nbsp;child's&nbsp;maximum&nbsp;forward&nbsp;path<a name="line_6488"></a></li>
<li id="line_6489" class="odd"><span class="lineNumber">&nbsp;6489&nbsp;</span>			computeSlotSegPressures(forwardSeg);<a name="line_6489"></a></li>
<li id="line_6490" class="even"><span class="lineNumber">&nbsp;6490&nbsp;</span><a name="line_6490"></a></li>
<li id="line_6491" class="odd"><span class="lineNumber">&nbsp;6491&nbsp;</span>			//&nbsp;either&nbsp;use&nbsp;the&nbsp;existing&nbsp;maximum,&nbsp;or&nbsp;use&nbsp;the&nbsp;child's&nbsp;forward&nbsp;pressure<a name="line_6491"></a></li>
<li id="line_6492" class="even"><span class="lineNumber">&nbsp;6492&nbsp;</span>			//&nbsp;plus&nbsp;one&nbsp;(for&nbsp;the&nbsp;forwardSeg&nbsp;itself)<a name="line_6492"></a></li>
<li id="line_6493" class="odd"><span class="lineNumber">&nbsp;6493&nbsp;</span>			forwardPressure&nbsp;=&nbsp;Math.max(<a name="line_6493"></a></li>
<li id="line_6494" class="even"><span class="lineNumber">&nbsp;6494&nbsp;</span>				forwardPressure,<a name="line_6494"></a></li>
<li id="line_6495" class="odd"><span class="lineNumber">&nbsp;6495&nbsp;</span>				1&nbsp;+&nbsp;forwardSeg.forwardPressure<a name="line_6495"></a></li>
<li id="line_6496" class="even"><span class="lineNumber">&nbsp;6496&nbsp;</span>			);<a name="line_6496"></a></li>
<li id="line_6497" class="odd"><span class="lineNumber">&nbsp;6497&nbsp;</span>		}<a name="line_6497"></a></li>
<li id="line_6498" class="even"><span class="lineNumber">&nbsp;6498&nbsp;</span><a name="line_6498"></a></li>
<li id="line_6499" class="odd"><span class="lineNumber">&nbsp;6499&nbsp;</span>		seg.forwardPressure&nbsp;=&nbsp;forwardPressure;<a name="line_6499"></a></li>
<li id="line_6500" class="even"><span class="lineNumber">&nbsp;6500&nbsp;</span>	}<a name="line_6500"></a></li>
<li id="line_6501" class="odd"><span class="lineNumber">&nbsp;6501&nbsp;</span>}<a name="line_6501"></a></li>
<li id="line_6502" class="even"><span class="lineNumber">&nbsp;6502&nbsp;</span><a name="line_6502"></a></li>
<li id="line_6503" class="odd"><span class="lineNumber">&nbsp;6503&nbsp;</span><a name="line_6503"></a></li>
<li id="line_6504" class="even"><span class="lineNumber">&nbsp;6504&nbsp;</span>//&nbsp;Calculate&nbsp;seg.forwardCoord&nbsp;and&nbsp;seg.backwardCoord&nbsp;for&nbsp;the&nbsp;segment,&nbsp;where&nbsp;both&nbsp;values&nbsp;range<a name="line_6504"></a></li>
<li id="line_6505" class="odd"><span class="lineNumber">&nbsp;6505&nbsp;</span>//&nbsp;from&nbsp;0&nbsp;to&nbsp;1.&nbsp;If&nbsp;the&nbsp;calendar&nbsp;is&nbsp;left-to-right,&nbsp;the&nbsp;seg.backwardCoord&nbsp;maps&nbsp;to&nbsp;"left"&nbsp;and<a name="line_6505"></a></li>
<li id="line_6506" class="even"><span class="lineNumber">&nbsp;6506&nbsp;</span>//&nbsp;seg.forwardCoord&nbsp;maps&nbsp;to&nbsp;"right"&nbsp;(via&nbsp;percentage).&nbsp;Vice-versa&nbsp;if&nbsp;the&nbsp;calendar&nbsp;is&nbsp;right-to-left.<a name="line_6506"></a></li>
<li id="line_6507" class="odd"><span class="lineNumber">&nbsp;6507&nbsp;</span>//<a name="line_6507"></a></li>
<li id="line_6508" class="even"><span class="lineNumber">&nbsp;6508&nbsp;</span>//&nbsp;The&nbsp;segment&nbsp;might&nbsp;be&nbsp;part&nbsp;of&nbsp;a&nbsp;"series",&nbsp;which&nbsp;means&nbsp;consecutive&nbsp;segments&nbsp;with&nbsp;the&nbsp;same&nbsp;pressure<a name="line_6508"></a></li>
<li id="line_6509" class="odd"><span class="lineNumber">&nbsp;6509&nbsp;</span>//&nbsp;who's&nbsp;width&nbsp;is&nbsp;unknown&nbsp;until&nbsp;an&nbsp;edge&nbsp;has&nbsp;been&nbsp;hit.&nbsp;`seriesBackwardPressure`&nbsp;is&nbsp;the&nbsp;number&nbsp;of<a name="line_6509"></a></li>
<li id="line_6510" class="even"><span class="lineNumber">&nbsp;6510&nbsp;</span>//&nbsp;segments&nbsp;behind&nbsp;this&nbsp;one&nbsp;in&nbsp;the&nbsp;current&nbsp;series,&nbsp;and&nbsp;`seriesBackwardCoord`&nbsp;is&nbsp;the&nbsp;starting<a name="line_6510"></a></li>
<li id="line_6511" class="odd"><span class="lineNumber">&nbsp;6511&nbsp;</span>//&nbsp;coordinate&nbsp;of&nbsp;the&nbsp;first&nbsp;segment&nbsp;in&nbsp;the&nbsp;series.<a name="line_6511"></a></li>
<li id="line_6512" class="even"><span class="lineNumber">&nbsp;6512&nbsp;</span>function&nbsp;computeSlotSegCoords(seg,&nbsp;seriesBackwardPressure,&nbsp;seriesBackwardCoord)&nbsp;{<a name="line_6512"></a></li>
<li id="line_6513" class="odd"><span class="lineNumber">&nbsp;6513&nbsp;</span>	var&nbsp;forwardSegs&nbsp;=&nbsp;seg.forwardSegs;<a name="line_6513"></a></li>
<li id="line_6514" class="even"><span class="lineNumber">&nbsp;6514&nbsp;</span>	var&nbsp;i;<a name="line_6514"></a></li>
<li id="line_6515" class="odd"><span class="lineNumber">&nbsp;6515&nbsp;</span><a name="line_6515"></a></li>
<li id="line_6516" class="even"><span class="lineNumber">&nbsp;6516&nbsp;</span>	if&nbsp;(seg.forwardCoord&nbsp;===&nbsp;undefined)&nbsp;{&nbsp;//&nbsp;not&nbsp;already&nbsp;computed<a name="line_6516"></a></li>
<li id="line_6517" class="odd"><span class="lineNumber">&nbsp;6517&nbsp;</span><a name="line_6517"></a></li>
<li id="line_6518" class="even"><span class="lineNumber">&nbsp;6518&nbsp;</span>		if&nbsp;(!forwardSegs.length)&nbsp;{<a name="line_6518"></a></li>
<li id="line_6519" class="odd"><span class="lineNumber">&nbsp;6519&nbsp;</span><a name="line_6519"></a></li>
<li id="line_6520" class="even"><span class="lineNumber">&nbsp;6520&nbsp;</span>			//&nbsp;if&nbsp;there&nbsp;are&nbsp;no&nbsp;forward&nbsp;segments,&nbsp;this&nbsp;segment&nbsp;should&nbsp;butt&nbsp;up&nbsp;against&nbsp;the&nbsp;edge<a name="line_6520"></a></li>
<li id="line_6521" class="odd"><span class="lineNumber">&nbsp;6521&nbsp;</span>			seg.forwardCoord&nbsp;=&nbsp;1;<a name="line_6521"></a></li>
<li id="line_6522" class="even"><span class="lineNumber">&nbsp;6522&nbsp;</span>		}<a name="line_6522"></a></li>
<li id="line_6523" class="odd"><span class="lineNumber">&nbsp;6523&nbsp;</span>		else&nbsp;{<a name="line_6523"></a></li>
<li id="line_6524" class="even"><span class="lineNumber">&nbsp;6524&nbsp;</span><a name="line_6524"></a></li>
<li id="line_6525" class="odd"><span class="lineNumber">&nbsp;6525&nbsp;</span>			//&nbsp;sort&nbsp;highest&nbsp;pressure&nbsp;first<a name="line_6525"></a></li>
<li id="line_6526" class="even"><span class="lineNumber">&nbsp;6526&nbsp;</span>			forwardSegs.sort(compareForwardSlotSegs);<a name="line_6526"></a></li>
<li id="line_6527" class="odd"><span class="lineNumber">&nbsp;6527&nbsp;</span><a name="line_6527"></a></li>
<li id="line_6528" class="even"><span class="lineNumber">&nbsp;6528&nbsp;</span>			//&nbsp;this&nbsp;segment's&nbsp;forwardCoord&nbsp;will&nbsp;be&nbsp;calculated&nbsp;from&nbsp;the&nbsp;backwardCoord&nbsp;of&nbsp;the<a name="line_6528"></a></li>
<li id="line_6529" class="odd"><span class="lineNumber">&nbsp;6529&nbsp;</span>			//&nbsp;highest-pressure&nbsp;forward&nbsp;segment.<a name="line_6529"></a></li>
<li id="line_6530" class="even"><span class="lineNumber">&nbsp;6530&nbsp;</span>			computeSlotSegCoords(forwardSegs[0],&nbsp;seriesBackwardPressure&nbsp;+&nbsp;1,&nbsp;seriesBackwardCoord);<a name="line_6530"></a></li>
<li id="line_6531" class="odd"><span class="lineNumber">&nbsp;6531&nbsp;</span>			seg.forwardCoord&nbsp;=&nbsp;forwardSegs[0].backwardCoord;<a name="line_6531"></a></li>
<li id="line_6532" class="even"><span class="lineNumber">&nbsp;6532&nbsp;</span>		}<a name="line_6532"></a></li>
<li id="line_6533" class="odd"><span class="lineNumber">&nbsp;6533&nbsp;</span><a name="line_6533"></a></li>
<li id="line_6534" class="even"><span class="lineNumber">&nbsp;6534&nbsp;</span>		//&nbsp;calculate&nbsp;the&nbsp;backwardCoord&nbsp;from&nbsp;the&nbsp;forwardCoord.&nbsp;consider&nbsp;the&nbsp;series<a name="line_6534"></a></li>
<li id="line_6535" class="odd"><span class="lineNumber">&nbsp;6535&nbsp;</span>		seg.backwardCoord&nbsp;=&nbsp;seg.forwardCoord&nbsp;-<a name="line_6535"></a></li>
<li id="line_6536" class="even"><span class="lineNumber">&nbsp;6536&nbsp;</span>			(seg.forwardCoord&nbsp;-&nbsp;seriesBackwardCoord)&nbsp;/&nbsp;//&nbsp;available&nbsp;width&nbsp;for&nbsp;series<a name="line_6536"></a></li>
<li id="line_6537" class="odd"><span class="lineNumber">&nbsp;6537&nbsp;</span>			(seriesBackwardPressure&nbsp;+&nbsp;1);&nbsp;//&nbsp;#&nbsp;of&nbsp;segments&nbsp;in&nbsp;the&nbsp;series<a name="line_6537"></a></li>
<li id="line_6538" class="even"><span class="lineNumber">&nbsp;6538&nbsp;</span><a name="line_6538"></a></li>
<li id="line_6539" class="odd"><span class="lineNumber">&nbsp;6539&nbsp;</span>		//&nbsp;use&nbsp;this&nbsp;segment's&nbsp;coordinates&nbsp;to&nbsp;computed&nbsp;the&nbsp;coordinates&nbsp;of&nbsp;the&nbsp;less-pressurized<a name="line_6539"></a></li>
<li id="line_6540" class="even"><span class="lineNumber">&nbsp;6540&nbsp;</span>		//&nbsp;forward&nbsp;segments<a name="line_6540"></a></li>
<li id="line_6541" class="odd"><span class="lineNumber">&nbsp;6541&nbsp;</span>		for&nbsp;(i=0;&nbsp;i&lt;forwardSegs.length;&nbsp;i++)&nbsp;{<a name="line_6541"></a></li>
<li id="line_6542" class="even"><span class="lineNumber">&nbsp;6542&nbsp;</span>			computeSlotSegCoords(forwardSegs[i],&nbsp;0,&nbsp;seg.forwardCoord);<a name="line_6542"></a></li>
<li id="line_6543" class="odd"><span class="lineNumber">&nbsp;6543&nbsp;</span>		}<a name="line_6543"></a></li>
<li id="line_6544" class="even"><span class="lineNumber">&nbsp;6544&nbsp;</span>	}<a name="line_6544"></a></li>
<li id="line_6545" class="odd"><span class="lineNumber">&nbsp;6545&nbsp;</span>}<a name="line_6545"></a></li>
<li id="line_6546" class="even"><span class="lineNumber">&nbsp;6546&nbsp;</span><a name="line_6546"></a></li>
<li id="line_6547" class="odd"><span class="lineNumber">&nbsp;6547&nbsp;</span><a name="line_6547"></a></li>
<li id="line_6548" class="even"><span class="lineNumber">&nbsp;6548&nbsp;</span>//&nbsp;Find&nbsp;all&nbsp;the&nbsp;segments&nbsp;in&nbsp;`otherSegs`&nbsp;that&nbsp;vertically&nbsp;collide&nbsp;with&nbsp;`seg`.<a name="line_6548"></a></li>
<li id="line_6549" class="odd"><span class="lineNumber">&nbsp;6549&nbsp;</span>//&nbsp;Append&nbsp;into&nbsp;an&nbsp;optionally-supplied&nbsp;`results`&nbsp;array&nbsp;and&nbsp;return.<a name="line_6549"></a></li>
<li id="line_6550" class="even"><span class="lineNumber">&nbsp;6550&nbsp;</span>function&nbsp;computeSlotSegCollisions(seg,&nbsp;otherSegs,&nbsp;results)&nbsp;{<a name="line_6550"></a></li>
<li id="line_6551" class="odd"><span class="lineNumber">&nbsp;6551&nbsp;</span>	results&nbsp;=&nbsp;results&nbsp;||&nbsp;[];<a name="line_6551"></a></li>
<li id="line_6552" class="even"><span class="lineNumber">&nbsp;6552&nbsp;</span><a name="line_6552"></a></li>
<li id="line_6553" class="odd"><span class="lineNumber">&nbsp;6553&nbsp;</span>	for&nbsp;(var&nbsp;i=0;&nbsp;i&lt;otherSegs.length;&nbsp;i++)&nbsp;{<a name="line_6553"></a></li>
<li id="line_6554" class="even"><span class="lineNumber">&nbsp;6554&nbsp;</span>		if&nbsp;(isSlotSegCollision(seg,&nbsp;otherSegs[i]))&nbsp;{<a name="line_6554"></a></li>
<li id="line_6555" class="odd"><span class="lineNumber">&nbsp;6555&nbsp;</span>			results.push(otherSegs[i]);<a name="line_6555"></a></li>
<li id="line_6556" class="even"><span class="lineNumber">&nbsp;6556&nbsp;</span>		}<a name="line_6556"></a></li>
<li id="line_6557" class="odd"><span class="lineNumber">&nbsp;6557&nbsp;</span>	}<a name="line_6557"></a></li>
<li id="line_6558" class="even"><span class="lineNumber">&nbsp;6558&nbsp;</span><a name="line_6558"></a></li>
<li id="line_6559" class="odd"><span class="lineNumber">&nbsp;6559&nbsp;</span>	return&nbsp;results;<a name="line_6559"></a></li>
<li id="line_6560" class="even"><span class="lineNumber">&nbsp;6560&nbsp;</span>}<a name="line_6560"></a></li>
<li id="line_6561" class="odd"><span class="lineNumber">&nbsp;6561&nbsp;</span><a name="line_6561"></a></li>
<li id="line_6562" class="even"><span class="lineNumber">&nbsp;6562&nbsp;</span><a name="line_6562"></a></li>
<li id="line_6563" class="odd"><span class="lineNumber">&nbsp;6563&nbsp;</span>//&nbsp;Do&nbsp;these&nbsp;segments&nbsp;occupy&nbsp;the&nbsp;same&nbsp;vertical&nbsp;space?<a name="line_6563"></a></li>
<li id="line_6564" class="even"><span class="lineNumber">&nbsp;6564&nbsp;</span>function&nbsp;isSlotSegCollision(seg1,&nbsp;seg2)&nbsp;{<a name="line_6564"></a></li>
<li id="line_6565" class="odd"><span class="lineNumber">&nbsp;6565&nbsp;</span>	return&nbsp;seg1.bottom&nbsp;&gt;&nbsp;seg2.top&nbsp;&amp;&amp;&nbsp;seg1.top&nbsp;&lt;&nbsp;seg2.bottom;<a name="line_6565"></a></li>
<li id="line_6566" class="even"><span class="lineNumber">&nbsp;6566&nbsp;</span>}<a name="line_6566"></a></li>
<li id="line_6567" class="odd"><span class="lineNumber">&nbsp;6567&nbsp;</span><a name="line_6567"></a></li>
<li id="line_6568" class="even"><span class="lineNumber">&nbsp;6568&nbsp;</span><a name="line_6568"></a></li>
<li id="line_6569" class="odd"><span class="lineNumber">&nbsp;6569&nbsp;</span>//&nbsp;A&nbsp;cmp&nbsp;function&nbsp;for&nbsp;determining&nbsp;which&nbsp;forward&nbsp;segment&nbsp;to&nbsp;rely&nbsp;on&nbsp;more&nbsp;when&nbsp;computing&nbsp;coordinates.<a name="line_6569"></a></li>
<li id="line_6570" class="even"><span class="lineNumber">&nbsp;6570&nbsp;</span>function&nbsp;compareForwardSlotSegs(seg1,&nbsp;seg2)&nbsp;{<a name="line_6570"></a></li>
<li id="line_6571" class="odd"><span class="lineNumber">&nbsp;6571&nbsp;</span>	//&nbsp;put&nbsp;higher-pressure&nbsp;first<a name="line_6571"></a></li>
<li id="line_6572" class="even"><span class="lineNumber">&nbsp;6572&nbsp;</span>	return&nbsp;seg2.forwardPressure&nbsp;-&nbsp;seg1.forwardPressure&nbsp;||<a name="line_6572"></a></li>
<li id="line_6573" class="odd"><span class="lineNumber">&nbsp;6573&nbsp;</span>		//&nbsp;put&nbsp;segments&nbsp;that&nbsp;are&nbsp;closer&nbsp;to&nbsp;initial&nbsp;edge&nbsp;first&nbsp;(and&nbsp;favor&nbsp;ones&nbsp;with&nbsp;no&nbsp;coords&nbsp;yet)<a name="line_6573"></a></li>
<li id="line_6574" class="even"><span class="lineNumber">&nbsp;6574&nbsp;</span>		(seg1.backwardCoord&nbsp;||&nbsp;0)&nbsp;-&nbsp;(seg2.backwardCoord&nbsp;||&nbsp;0)&nbsp;||<a name="line_6574"></a></li>
<li id="line_6575" class="odd"><span class="lineNumber">&nbsp;6575&nbsp;</span>		//&nbsp;do&nbsp;normal&nbsp;sorting...<a name="line_6575"></a></li>
<li id="line_6576" class="even"><span class="lineNumber">&nbsp;6576&nbsp;</span>		compareSegs(seg1,&nbsp;seg2);<a name="line_6576"></a></li>
<li id="line_6577" class="odd"><span class="lineNumber">&nbsp;6577&nbsp;</span>}<a name="line_6577"></a></li>
<li id="line_6578" class="even"><span class="lineNumber">&nbsp;6578&nbsp;</span><a name="line_6578"></a></li>
<li id="line_6579" class="odd"><span class="lineNumber">&nbsp;6579&nbsp;</span>;;<a name="line_6579"></a></li>
<li id="line_6580" class="even"><span class="lineNumber">&nbsp;6580&nbsp;</span><a name="line_6580"></a></li>
<li id="line_6581" class="odd"><span class="lineNumber">&nbsp;6581&nbsp;</span>/*&nbsp;An&nbsp;abstract&nbsp;class&nbsp;from&nbsp;which&nbsp;other&nbsp;views&nbsp;inherit&nbsp;from<a name="line_6581"></a></li>
<li id="line_6582" class="even"><span class="lineNumber">&nbsp;6582&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_6582"></a></li>
<li id="line_6583" class="odd"><span class="lineNumber">&nbsp;6583&nbsp;</span><a name="line_6583"></a></li>
<li id="line_6584" class="even"><span class="lineNumber">&nbsp;6584&nbsp;</span>var&nbsp;View&nbsp;=&nbsp;fc.View&nbsp;=&nbsp;Class.extend({<a name="line_6584"></a></li>
<li id="line_6585" class="odd"><span class="lineNumber">&nbsp;6585&nbsp;</span><a name="line_6585"></a></li>
<li id="line_6586" class="even"><span class="lineNumber">&nbsp;6586&nbsp;</span>	type:&nbsp;null,&nbsp;//&nbsp;subclass'&nbsp;view&nbsp;name&nbsp;(string)<a name="line_6586"></a></li>
<li id="line_6587" class="odd"><span class="lineNumber">&nbsp;6587&nbsp;</span>	name:&nbsp;null,&nbsp;//&nbsp;deprecated.&nbsp;use&nbsp;`type`&nbsp;instead<a name="line_6587"></a></li>
<li id="line_6588" class="even"><span class="lineNumber">&nbsp;6588&nbsp;</span>	title:&nbsp;null,&nbsp;//&nbsp;the&nbsp;text&nbsp;that&nbsp;will&nbsp;be&nbsp;displayed&nbsp;in&nbsp;the&nbsp;header's&nbsp;title<a name="line_6588"></a></li>
<li id="line_6589" class="odd"><span class="lineNumber">&nbsp;6589&nbsp;</span><a name="line_6589"></a></li>
<li id="line_6590" class="even"><span class="lineNumber">&nbsp;6590&nbsp;</span>	calendar:&nbsp;null,&nbsp;//&nbsp;owner&nbsp;Calendar&nbsp;object<a name="line_6590"></a></li>
<li id="line_6591" class="odd"><span class="lineNumber">&nbsp;6591&nbsp;</span>	options:&nbsp;null,&nbsp;//&nbsp;hash&nbsp;containing&nbsp;all&nbsp;options.&nbsp;already&nbsp;merged&nbsp;with&nbsp;view-specific-options<a name="line_6591"></a></li>
<li id="line_6592" class="even"><span class="lineNumber">&nbsp;6592&nbsp;</span>	coordMap:&nbsp;null,&nbsp;//&nbsp;a&nbsp;CoordMap&nbsp;object&nbsp;for&nbsp;converting&nbsp;pixel&nbsp;regions&nbsp;to&nbsp;dates<a name="line_6592"></a></li>
<li id="line_6593" class="odd"><span class="lineNumber">&nbsp;6593&nbsp;</span>	el:&nbsp;null,&nbsp;//&nbsp;the&nbsp;view's&nbsp;containing&nbsp;element.&nbsp;set&nbsp;by&nbsp;Calendar<a name="line_6593"></a></li>
<li id="line_6594" class="even"><span class="lineNumber">&nbsp;6594&nbsp;</span><a name="line_6594"></a></li>
<li id="line_6595" class="odd"><span class="lineNumber">&nbsp;6595&nbsp;</span>	displaying:&nbsp;null,&nbsp;//&nbsp;a&nbsp;promise&nbsp;representing&nbsp;the&nbsp;state&nbsp;of&nbsp;rendering.&nbsp;null&nbsp;if&nbsp;no&nbsp;render&nbsp;requested<a name="line_6595"></a></li>
<li id="line_6596" class="even"><span class="lineNumber">&nbsp;6596&nbsp;</span>	isSkeletonRendered:&nbsp;false,<a name="line_6596"></a></li>
<li id="line_6597" class="odd"><span class="lineNumber">&nbsp;6597&nbsp;</span>	isEventsRendered:&nbsp;false,<a name="line_6597"></a></li>
<li id="line_6598" class="even"><span class="lineNumber">&nbsp;6598&nbsp;</span><a name="line_6598"></a></li>
<li id="line_6599" class="odd"><span class="lineNumber">&nbsp;6599&nbsp;</span>	//&nbsp;range&nbsp;the&nbsp;view&nbsp;is&nbsp;actually&nbsp;displaying&nbsp;(moments)<a name="line_6599"></a></li>
<li id="line_6600" class="even"><span class="lineNumber">&nbsp;6600&nbsp;</span>	start:&nbsp;null,<a name="line_6600"></a></li>
<li id="line_6601" class="odd"><span class="lineNumber">&nbsp;6601&nbsp;</span>	end:&nbsp;null,&nbsp;//&nbsp;exclusive<a name="line_6601"></a></li>
<li id="line_6602" class="even"><span class="lineNumber">&nbsp;6602&nbsp;</span><a name="line_6602"></a></li>
<li id="line_6603" class="odd"><span class="lineNumber">&nbsp;6603&nbsp;</span>	//&nbsp;range&nbsp;the&nbsp;view&nbsp;is&nbsp;formally&nbsp;responsible&nbsp;for&nbsp;(moments)<a name="line_6603"></a></li>
<li id="line_6604" class="even"><span class="lineNumber">&nbsp;6604&nbsp;</span>	//&nbsp;may&nbsp;be&nbsp;different&nbsp;from&nbsp;start/end.&nbsp;for&nbsp;example,&nbsp;a&nbsp;month&nbsp;view&nbsp;might&nbsp;have&nbsp;1st-31st,&nbsp;excluding&nbsp;padded&nbsp;dates<a name="line_6604"></a></li>
<li id="line_6605" class="odd"><span class="lineNumber">&nbsp;6605&nbsp;</span>	intervalStart:&nbsp;null,<a name="line_6605"></a></li>
<li id="line_6606" class="even"><span class="lineNumber">&nbsp;6606&nbsp;</span>	intervalEnd:&nbsp;null,&nbsp;//&nbsp;exclusive<a name="line_6606"></a></li>
<li id="line_6607" class="odd"><span class="lineNumber">&nbsp;6607&nbsp;</span>	intervalDuration:&nbsp;null,<a name="line_6607"></a></li>
<li id="line_6608" class="even"><span class="lineNumber">&nbsp;6608&nbsp;</span>	intervalUnit:&nbsp;null,&nbsp;//&nbsp;name&nbsp;of&nbsp;largest&nbsp;unit&nbsp;being&nbsp;displayed,&nbsp;like&nbsp;"month"&nbsp;or&nbsp;"week"<a name="line_6608"></a></li>
<li id="line_6609" class="odd"><span class="lineNumber">&nbsp;6609&nbsp;</span><a name="line_6609"></a></li>
<li id="line_6610" class="even"><span class="lineNumber">&nbsp;6610&nbsp;</span>	isRTL:&nbsp;false,<a name="line_6610"></a></li>
<li id="line_6611" class="odd"><span class="lineNumber">&nbsp;6611&nbsp;</span>	isSelected:&nbsp;false,&nbsp;//&nbsp;boolean&nbsp;whether&nbsp;a&nbsp;range&nbsp;of&nbsp;time&nbsp;is&nbsp;user-selected&nbsp;or&nbsp;not<a name="line_6611"></a></li>
<li id="line_6612" class="even"><span class="lineNumber">&nbsp;6612&nbsp;</span><a name="line_6612"></a></li>
<li id="line_6613" class="odd"><span class="lineNumber">&nbsp;6613&nbsp;</span>	//&nbsp;subclasses&nbsp;can&nbsp;optionally&nbsp;use&nbsp;a&nbsp;scroll&nbsp;container<a name="line_6613"></a></li>
<li id="line_6614" class="even"><span class="lineNumber">&nbsp;6614&nbsp;</span>	scrollerEl:&nbsp;null,&nbsp;//&nbsp;the&nbsp;element&nbsp;that&nbsp;will&nbsp;most&nbsp;likely&nbsp;scroll&nbsp;when&nbsp;content&nbsp;is&nbsp;too&nbsp;tall<a name="line_6614"></a></li>
<li id="line_6615" class="odd"><span class="lineNumber">&nbsp;6615&nbsp;</span>	scrollTop:&nbsp;null,&nbsp;//&nbsp;cached&nbsp;vertical&nbsp;scroll&nbsp;value<a name="line_6615"></a></li>
<li id="line_6616" class="even"><span class="lineNumber">&nbsp;6616&nbsp;</span><a name="line_6616"></a></li>
<li id="line_6617" class="odd"><span class="lineNumber">&nbsp;6617&nbsp;</span>	//&nbsp;classNames&nbsp;styled&nbsp;by&nbsp;jqui&nbsp;themes<a name="line_6617"></a></li>
<li id="line_6618" class="even"><span class="lineNumber">&nbsp;6618&nbsp;</span>	widgetHeaderClass:&nbsp;null,<a name="line_6618"></a></li>
<li id="line_6619" class="odd"><span class="lineNumber">&nbsp;6619&nbsp;</span>	widgetContentClass:&nbsp;null,<a name="line_6619"></a></li>
<li id="line_6620" class="even"><span class="lineNumber">&nbsp;6620&nbsp;</span>	highlightStateClass:&nbsp;null,<a name="line_6620"></a></li>
<li id="line_6621" class="odd"><span class="lineNumber">&nbsp;6621&nbsp;</span><a name="line_6621"></a></li>
<li id="line_6622" class="even"><span class="lineNumber">&nbsp;6622&nbsp;</span>	//&nbsp;for&nbsp;date&nbsp;utils,&nbsp;computed&nbsp;from&nbsp;options<a name="line_6622"></a></li>
<li id="line_6623" class="odd"><span class="lineNumber">&nbsp;6623&nbsp;</span>	nextDayThreshold:&nbsp;null,<a name="line_6623"></a></li>
<li id="line_6624" class="even"><span class="lineNumber">&nbsp;6624&nbsp;</span>	isHiddenDayHash:&nbsp;null,<a name="line_6624"></a></li>
<li id="line_6625" class="odd"><span class="lineNumber">&nbsp;6625&nbsp;</span><a name="line_6625"></a></li>
<li id="line_6626" class="even"><span class="lineNumber">&nbsp;6626&nbsp;</span>	//&nbsp;document&nbsp;handlers,&nbsp;bound&nbsp;to&nbsp;`this`&nbsp;object<a name="line_6626"></a></li>
<li id="line_6627" class="odd"><span class="lineNumber">&nbsp;6627&nbsp;</span>	documentMousedownProxy:&nbsp;null,&nbsp;//&nbsp;TODO:&nbsp;doesn't&nbsp;work&nbsp;with&nbsp;touch<a name="line_6627"></a></li>
<li id="line_6628" class="even"><span class="lineNumber">&nbsp;6628&nbsp;</span><a name="line_6628"></a></li>
<li id="line_6629" class="odd"><span class="lineNumber">&nbsp;6629&nbsp;</span><a name="line_6629"></a></li>
<li id="line_6630" class="even"><span class="lineNumber">&nbsp;6630&nbsp;</span>	constructor:&nbsp;function(calendar,&nbsp;type,&nbsp;options,&nbsp;intervalDuration)&nbsp;{<a name="line_6630"></a></li>
<li id="line_6631" class="odd"><span class="lineNumber">&nbsp;6631&nbsp;</span><a name="line_6631"></a></li>
<li id="line_6632" class="even"><span class="lineNumber">&nbsp;6632&nbsp;</span>		this.calendar&nbsp;=&nbsp;calendar;<a name="line_6632"></a></li>
<li id="line_6633" class="odd"><span class="lineNumber">&nbsp;6633&nbsp;</span>		this.type&nbsp;=&nbsp;this.name&nbsp;=&nbsp;type;&nbsp;//&nbsp;.name&nbsp;is&nbsp;deprecated<a name="line_6633"></a></li>
<li id="line_6634" class="even"><span class="lineNumber">&nbsp;6634&nbsp;</span>		this.options&nbsp;=&nbsp;options;<a name="line_6634"></a></li>
<li id="line_6635" class="odd"><span class="lineNumber">&nbsp;6635&nbsp;</span>		this.intervalDuration&nbsp;=&nbsp;intervalDuration&nbsp;||&nbsp;moment.duration(1,&nbsp;'day');<a name="line_6635"></a></li>
<li id="line_6636" class="even"><span class="lineNumber">&nbsp;6636&nbsp;</span><a name="line_6636"></a></li>
<li id="line_6637" class="odd"><span class="lineNumber">&nbsp;6637&nbsp;</span>		this.nextDayThreshold&nbsp;=&nbsp;moment.duration(this.opt('nextDayThreshold'));<a name="line_6637"></a></li>
<li id="line_6638" class="even"><span class="lineNumber">&nbsp;6638&nbsp;</span>		this.initThemingProps();<a name="line_6638"></a></li>
<li id="line_6639" class="odd"><span class="lineNumber">&nbsp;6639&nbsp;</span>		this.initHiddenDays();<a name="line_6639"></a></li>
<li id="line_6640" class="even"><span class="lineNumber">&nbsp;6640&nbsp;</span>		this.isRTL&nbsp;=&nbsp;this.opt('isRTL');<a name="line_6640"></a></li>
<li id="line_6641" class="odd"><span class="lineNumber">&nbsp;6641&nbsp;</span><a name="line_6641"></a></li>
<li id="line_6642" class="even"><span class="lineNumber">&nbsp;6642&nbsp;</span>		this.documentMousedownProxy&nbsp;=&nbsp;proxy(this,&nbsp;'documentMousedown');<a name="line_6642"></a></li>
<li id="line_6643" class="odd"><span class="lineNumber">&nbsp;6643&nbsp;</span><a name="line_6643"></a></li>
<li id="line_6644" class="even"><span class="lineNumber">&nbsp;6644&nbsp;</span>		this.initialize();<a name="line_6644"></a></li>
<li id="line_6645" class="odd"><span class="lineNumber">&nbsp;6645&nbsp;</span>	},<a name="line_6645"></a></li>
<li id="line_6646" class="even"><span class="lineNumber">&nbsp;6646&nbsp;</span><a name="line_6646"></a></li>
<li id="line_6647" class="odd"><span class="lineNumber">&nbsp;6647&nbsp;</span><a name="line_6647"></a></li>
<li id="line_6648" class="even"><span class="lineNumber">&nbsp;6648&nbsp;</span>	//&nbsp;A&nbsp;good&nbsp;place&nbsp;for&nbsp;subclasses&nbsp;to&nbsp;initialize&nbsp;member&nbsp;variables<a name="line_6648"></a></li>
<li id="line_6649" class="odd"><span class="lineNumber">&nbsp;6649&nbsp;</span>	initialize:&nbsp;function()&nbsp;{<a name="line_6649"></a></li>
<li id="line_6650" class="even"><span class="lineNumber">&nbsp;6650&nbsp;</span>		//&nbsp;subclasses&nbsp;can&nbsp;implement<a name="line_6650"></a></li>
<li id="line_6651" class="odd"><span class="lineNumber">&nbsp;6651&nbsp;</span>	},<a name="line_6651"></a></li>
<li id="line_6652" class="even"><span class="lineNumber">&nbsp;6652&nbsp;</span><a name="line_6652"></a></li>
<li id="line_6653" class="odd"><span class="lineNumber">&nbsp;6653&nbsp;</span><a name="line_6653"></a></li>
<li id="line_6654" class="even"><span class="lineNumber">&nbsp;6654&nbsp;</span>	//&nbsp;Retrieves&nbsp;an&nbsp;option&nbsp;with&nbsp;the&nbsp;given&nbsp;name<a name="line_6654"></a></li>
<li id="line_6655" class="odd"><span class="lineNumber">&nbsp;6655&nbsp;</span>	opt:&nbsp;function(name)&nbsp;{<a name="line_6655"></a></li>
<li id="line_6656" class="even"><span class="lineNumber">&nbsp;6656&nbsp;</span>		return&nbsp;this.options[name];<a name="line_6656"></a></li>
<li id="line_6657" class="odd"><span class="lineNumber">&nbsp;6657&nbsp;</span>	},<a name="line_6657"></a></li>
<li id="line_6658" class="even"><span class="lineNumber">&nbsp;6658&nbsp;</span><a name="line_6658"></a></li>
<li id="line_6659" class="odd"><span class="lineNumber">&nbsp;6659&nbsp;</span><a name="line_6659"></a></li>
<li id="line_6660" class="even"><span class="lineNumber">&nbsp;6660&nbsp;</span>	//&nbsp;Triggers&nbsp;handlers&nbsp;that&nbsp;are&nbsp;view-related.&nbsp;Modifies&nbsp;args&nbsp;before&nbsp;passing&nbsp;to&nbsp;calendar.<a name="line_6660"></a></li>
<li id="line_6661" class="odd"><span class="lineNumber">&nbsp;6661&nbsp;</span>	trigger:&nbsp;function(name,&nbsp;thisObj)&nbsp;{&nbsp;//&nbsp;arguments&nbsp;beyond&nbsp;thisObj&nbsp;are&nbsp;passed&nbsp;along<a name="line_6661"></a></li>
<li id="line_6662" class="even"><span class="lineNumber">&nbsp;6662&nbsp;</span>		var&nbsp;calendar&nbsp;=&nbsp;this.calendar;<a name="line_6662"></a></li>
<li id="line_6663" class="odd"><span class="lineNumber">&nbsp;6663&nbsp;</span><a name="line_6663"></a></li>
<li id="line_6664" class="even"><span class="lineNumber">&nbsp;6664&nbsp;</span>		return&nbsp;calendar.trigger.apply(<a name="line_6664"></a></li>
<li id="line_6665" class="odd"><span class="lineNumber">&nbsp;6665&nbsp;</span>			calendar,<a name="line_6665"></a></li>
<li id="line_6666" class="even"><span class="lineNumber">&nbsp;6666&nbsp;</span>			[name,&nbsp;thisObj&nbsp;||&nbsp;this].concat(<a name="line_6666"></a></li>
<li id="line_6667" class="odd"><span class="lineNumber">&nbsp;6667&nbsp;</span>				Array.prototype.slice.call(arguments,&nbsp;2),&nbsp;//&nbsp;arguments&nbsp;beyond&nbsp;thisObj<a name="line_6667"></a></li>
<li id="line_6668" class="even"><span class="lineNumber">&nbsp;6668&nbsp;</span>				[&nbsp;this&nbsp;]&nbsp;//&nbsp;always&nbsp;make&nbsp;the&nbsp;last&nbsp;argument&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;view.&nbsp;TODO:&nbsp;deprecate<a name="line_6668"></a></li>
<li id="line_6669" class="odd"><span class="lineNumber">&nbsp;6669&nbsp;</span>			)<a name="line_6669"></a></li>
<li id="line_6670" class="even"><span class="lineNumber">&nbsp;6670&nbsp;</span>		);<a name="line_6670"></a></li>
<li id="line_6671" class="odd"><span class="lineNumber">&nbsp;6671&nbsp;</span>	},<a name="line_6671"></a></li>
<li id="line_6672" class="even"><span class="lineNumber">&nbsp;6672&nbsp;</span><a name="line_6672"></a></li>
<li id="line_6673" class="odd"><span class="lineNumber">&nbsp;6673&nbsp;</span><a name="line_6673"></a></li>
<li id="line_6674" class="even"><span class="lineNumber">&nbsp;6674&nbsp;</span>	/*&nbsp;Dates<a name="line_6674"></a></li>
<li id="line_6675" class="odd"><span class="lineNumber">&nbsp;6675&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_6675"></a></li>
<li id="line_6676" class="even"><span class="lineNumber">&nbsp;6676&nbsp;</span><a name="line_6676"></a></li>
<li id="line_6677" class="odd"><span class="lineNumber">&nbsp;6677&nbsp;</span><a name="line_6677"></a></li>
<li id="line_6678" class="even"><span class="lineNumber">&nbsp;6678&nbsp;</span>	//&nbsp;Updates&nbsp;all&nbsp;internal&nbsp;dates&nbsp;to&nbsp;center&nbsp;around&nbsp;the&nbsp;given&nbsp;current&nbsp;date<a name="line_6678"></a></li>
<li id="line_6679" class="odd"><span class="lineNumber">&nbsp;6679&nbsp;</span>	setDate:&nbsp;function(date)&nbsp;{<a name="line_6679"></a></li>
<li id="line_6680" class="even"><span class="lineNumber">&nbsp;6680&nbsp;</span>		this.setRange(this.computeRange(date));<a name="line_6680"></a></li>
<li id="line_6681" class="odd"><span class="lineNumber">&nbsp;6681&nbsp;</span>	},<a name="line_6681"></a></li>
<li id="line_6682" class="even"><span class="lineNumber">&nbsp;6682&nbsp;</span><a name="line_6682"></a></li>
<li id="line_6683" class="odd"><span class="lineNumber">&nbsp;6683&nbsp;</span><a name="line_6683"></a></li>
<li id="line_6684" class="even"><span class="lineNumber">&nbsp;6684&nbsp;</span>	//&nbsp;Updates&nbsp;all&nbsp;internal&nbsp;dates&nbsp;for&nbsp;displaying&nbsp;the&nbsp;given&nbsp;range.<a name="line_6684"></a></li>
<li id="line_6685" class="odd"><span class="lineNumber">&nbsp;6685&nbsp;</span>	//&nbsp;Expects&nbsp;all&nbsp;values&nbsp;to&nbsp;be&nbsp;normalized&nbsp;(like&nbsp;what&nbsp;computeRange&nbsp;does).<a name="line_6685"></a></li>
<li id="line_6686" class="even"><span class="lineNumber">&nbsp;6686&nbsp;</span>	setRange:&nbsp;function(range)&nbsp;{<a name="line_6686"></a></li>
<li id="line_6687" class="odd"><span class="lineNumber">&nbsp;6687&nbsp;</span>		$.extend(this,&nbsp;range);<a name="line_6687"></a></li>
<li id="line_6688" class="even"><span class="lineNumber">&nbsp;6688&nbsp;</span>		this.updateTitle();<a name="line_6688"></a></li>
<li id="line_6689" class="odd"><span class="lineNumber">&nbsp;6689&nbsp;</span>	},<a name="line_6689"></a></li>
<li id="line_6690" class="even"><span class="lineNumber">&nbsp;6690&nbsp;</span><a name="line_6690"></a></li>
<li id="line_6691" class="odd"><span class="lineNumber">&nbsp;6691&nbsp;</span><a name="line_6691"></a></li>
<li id="line_6692" class="even"><span class="lineNumber">&nbsp;6692&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;single&nbsp;current&nbsp;date,&nbsp;produce&nbsp;information&nbsp;about&nbsp;what&nbsp;range&nbsp;to&nbsp;display.<a name="line_6692"></a></li>
<li id="line_6693" class="odd"><span class="lineNumber">&nbsp;6693&nbsp;</span>	//&nbsp;Subclasses&nbsp;can&nbsp;override.&nbsp;Must&nbsp;return&nbsp;all&nbsp;properties.<a name="line_6693"></a></li>
<li id="line_6694" class="even"><span class="lineNumber">&nbsp;6694&nbsp;</span>	computeRange:&nbsp;function(date)&nbsp;{<a name="line_6694"></a></li>
<li id="line_6695" class="odd"><span class="lineNumber">&nbsp;6695&nbsp;</span>		var&nbsp;intervalUnit&nbsp;=&nbsp;computeIntervalUnit(this.intervalDuration);<a name="line_6695"></a></li>
<li id="line_6696" class="even"><span class="lineNumber">&nbsp;6696&nbsp;</span>		var&nbsp;intervalStart&nbsp;=&nbsp;date.clone().startOf(intervalUnit);<a name="line_6696"></a></li>
<li id="line_6697" class="odd"><span class="lineNumber">&nbsp;6697&nbsp;</span>		var&nbsp;intervalEnd&nbsp;=&nbsp;intervalStart.clone().add(this.intervalDuration);<a name="line_6697"></a></li>
<li id="line_6698" class="even"><span class="lineNumber">&nbsp;6698&nbsp;</span>		var&nbsp;start,&nbsp;end;<a name="line_6698"></a></li>
<li id="line_6699" class="odd"><span class="lineNumber">&nbsp;6699&nbsp;</span><a name="line_6699"></a></li>
<li id="line_6700" class="even"><span class="lineNumber">&nbsp;6700&nbsp;</span>		//&nbsp;normalize&nbsp;the&nbsp;range's&nbsp;time-ambiguity<a name="line_6700"></a></li>
<li id="line_6701" class="odd"><span class="lineNumber">&nbsp;6701&nbsp;</span>		if&nbsp;(/year|month|week|day/.test(intervalUnit))&nbsp;{&nbsp;//&nbsp;whole-days?<a name="line_6701"></a></li>
<li id="line_6702" class="even"><span class="lineNumber">&nbsp;6702&nbsp;</span>			intervalStart.stripTime();<a name="line_6702"></a></li>
<li id="line_6703" class="odd"><span class="lineNumber">&nbsp;6703&nbsp;</span>			intervalEnd.stripTime();<a name="line_6703"></a></li>
<li id="line_6704" class="even"><span class="lineNumber">&nbsp;6704&nbsp;</span>		}<a name="line_6704"></a></li>
<li id="line_6705" class="odd"><span class="lineNumber">&nbsp;6705&nbsp;</span>		else&nbsp;{&nbsp;//&nbsp;needs&nbsp;to&nbsp;have&nbsp;a&nbsp;time?<a name="line_6705"></a></li>
<li id="line_6706" class="even"><span class="lineNumber">&nbsp;6706&nbsp;</span>			if&nbsp;(!intervalStart.hasTime())&nbsp;{<a name="line_6706"></a></li>
<li id="line_6707" class="odd"><span class="lineNumber">&nbsp;6707&nbsp;</span>				intervalStart&nbsp;=&nbsp;this.calendar.rezoneDate(intervalStart);&nbsp;//&nbsp;convert&nbsp;to&nbsp;current&nbsp;timezone,&nbsp;with&nbsp;00:00<a name="line_6707"></a></li>
<li id="line_6708" class="even"><span class="lineNumber">&nbsp;6708&nbsp;</span>			}<a name="line_6708"></a></li>
<li id="line_6709" class="odd"><span class="lineNumber">&nbsp;6709&nbsp;</span>			if&nbsp;(!intervalEnd.hasTime())&nbsp;{<a name="line_6709"></a></li>
<li id="line_6710" class="even"><span class="lineNumber">&nbsp;6710&nbsp;</span>				intervalEnd&nbsp;=&nbsp;this.calendar.rezoneDate(intervalEnd);&nbsp;//&nbsp;convert&nbsp;to&nbsp;current&nbsp;timezone,&nbsp;with&nbsp;00:00<a name="line_6710"></a></li>
<li id="line_6711" class="odd"><span class="lineNumber">&nbsp;6711&nbsp;</span>			}<a name="line_6711"></a></li>
<li id="line_6712" class="even"><span class="lineNumber">&nbsp;6712&nbsp;</span>		}<a name="line_6712"></a></li>
<li id="line_6713" class="odd"><span class="lineNumber">&nbsp;6713&nbsp;</span><a name="line_6713"></a></li>
<li id="line_6714" class="even"><span class="lineNumber">&nbsp;6714&nbsp;</span>		start&nbsp;=&nbsp;intervalStart.clone();<a name="line_6714"></a></li>
<li id="line_6715" class="odd"><span class="lineNumber">&nbsp;6715&nbsp;</span>		start&nbsp;=&nbsp;this.skipHiddenDays(start);<a name="line_6715"></a></li>
<li id="line_6716" class="even"><span class="lineNumber">&nbsp;6716&nbsp;</span>		end&nbsp;=&nbsp;intervalEnd.clone();<a name="line_6716"></a></li>
<li id="line_6717" class="odd"><span class="lineNumber">&nbsp;6717&nbsp;</span>		end&nbsp;=&nbsp;this.skipHiddenDays(end,&nbsp;-1,&nbsp;true);&nbsp;//&nbsp;exclusively&nbsp;move&nbsp;backwards<a name="line_6717"></a></li>
<li id="line_6718" class="even"><span class="lineNumber">&nbsp;6718&nbsp;</span><a name="line_6718"></a></li>
<li id="line_6719" class="odd"><span class="lineNumber">&nbsp;6719&nbsp;</span>		return&nbsp;{<a name="line_6719"></a></li>
<li id="line_6720" class="even"><span class="lineNumber">&nbsp;6720&nbsp;</span>			intervalUnit:&nbsp;intervalUnit,<a name="line_6720"></a></li>
<li id="line_6721" class="odd"><span class="lineNumber">&nbsp;6721&nbsp;</span>			intervalStart:&nbsp;intervalStart,<a name="line_6721"></a></li>
<li id="line_6722" class="even"><span class="lineNumber">&nbsp;6722&nbsp;</span>			intervalEnd:&nbsp;intervalEnd,<a name="line_6722"></a></li>
<li id="line_6723" class="odd"><span class="lineNumber">&nbsp;6723&nbsp;</span>			start:&nbsp;start,<a name="line_6723"></a></li>
<li id="line_6724" class="even"><span class="lineNumber">&nbsp;6724&nbsp;</span>			end:&nbsp;end<a name="line_6724"></a></li>
<li id="line_6725" class="odd"><span class="lineNumber">&nbsp;6725&nbsp;</span>		};<a name="line_6725"></a></li>
<li id="line_6726" class="even"><span class="lineNumber">&nbsp;6726&nbsp;</span>	},<a name="line_6726"></a></li>
<li id="line_6727" class="odd"><span class="lineNumber">&nbsp;6727&nbsp;</span><a name="line_6727"></a></li>
<li id="line_6728" class="even"><span class="lineNumber">&nbsp;6728&nbsp;</span><a name="line_6728"></a></li>
<li id="line_6729" class="odd"><span class="lineNumber">&nbsp;6729&nbsp;</span>	//&nbsp;Computes&nbsp;the&nbsp;new&nbsp;date&nbsp;when&nbsp;the&nbsp;user&nbsp;hits&nbsp;the&nbsp;prev&nbsp;button,&nbsp;given&nbsp;the&nbsp;current&nbsp;date<a name="line_6729"></a></li>
<li id="line_6730" class="even"><span class="lineNumber">&nbsp;6730&nbsp;</span>	computePrevDate:&nbsp;function(date)&nbsp;{<a name="line_6730"></a></li>
<li id="line_6731" class="odd"><span class="lineNumber">&nbsp;6731&nbsp;</span>		return&nbsp;this.massageCurrentDate(<a name="line_6731"></a></li>
<li id="line_6732" class="even"><span class="lineNumber">&nbsp;6732&nbsp;</span>			date.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),&nbsp;-1<a name="line_6732"></a></li>
<li id="line_6733" class="odd"><span class="lineNumber">&nbsp;6733&nbsp;</span>		);<a name="line_6733"></a></li>
<li id="line_6734" class="even"><span class="lineNumber">&nbsp;6734&nbsp;</span>	},<a name="line_6734"></a></li>
<li id="line_6735" class="odd"><span class="lineNumber">&nbsp;6735&nbsp;</span><a name="line_6735"></a></li>
<li id="line_6736" class="even"><span class="lineNumber">&nbsp;6736&nbsp;</span><a name="line_6736"></a></li>
<li id="line_6737" class="odd"><span class="lineNumber">&nbsp;6737&nbsp;</span>	//&nbsp;Computes&nbsp;the&nbsp;new&nbsp;date&nbsp;when&nbsp;the&nbsp;user&nbsp;hits&nbsp;the&nbsp;next&nbsp;button,&nbsp;given&nbsp;the&nbsp;current&nbsp;date<a name="line_6737"></a></li>
<li id="line_6738" class="even"><span class="lineNumber">&nbsp;6738&nbsp;</span>	computeNextDate:&nbsp;function(date)&nbsp;{<a name="line_6738"></a></li>
<li id="line_6739" class="odd"><span class="lineNumber">&nbsp;6739&nbsp;</span>		return&nbsp;this.massageCurrentDate(<a name="line_6739"></a></li>
<li id="line_6740" class="even"><span class="lineNumber">&nbsp;6740&nbsp;</span>			date.clone().startOf(this.intervalUnit).add(this.intervalDuration)<a name="line_6740"></a></li>
<li id="line_6741" class="odd"><span class="lineNumber">&nbsp;6741&nbsp;</span>		);<a name="line_6741"></a></li>
<li id="line_6742" class="even"><span class="lineNumber">&nbsp;6742&nbsp;</span>	},<a name="line_6742"></a></li>
<li id="line_6743" class="odd"><span class="lineNumber">&nbsp;6743&nbsp;</span><a name="line_6743"></a></li>
<li id="line_6744" class="even"><span class="lineNumber">&nbsp;6744&nbsp;</span><a name="line_6744"></a></li>
<li id="line_6745" class="odd"><span class="lineNumber">&nbsp;6745&nbsp;</span>	//&nbsp;Given&nbsp;an&nbsp;arbitrarily&nbsp;calculated&nbsp;current&nbsp;date&nbsp;of&nbsp;the&nbsp;calendar,&nbsp;returns&nbsp;a&nbsp;date&nbsp;that&nbsp;is&nbsp;ensured&nbsp;to&nbsp;be&nbsp;completely<a name="line_6745"></a></li>
<li id="line_6746" class="even"><span class="lineNumber">&nbsp;6746&nbsp;</span>	//&nbsp;visible.&nbsp;`direction`&nbsp;is&nbsp;optional&nbsp;and&nbsp;indicates&nbsp;which&nbsp;direction&nbsp;the&nbsp;current&nbsp;date&nbsp;was&nbsp;being<a name="line_6746"></a></li>
<li id="line_6747" class="odd"><span class="lineNumber">&nbsp;6747&nbsp;</span>	//&nbsp;incremented&nbsp;or&nbsp;decremented&nbsp;(1&nbsp;or&nbsp;-1).<a name="line_6747"></a></li>
<li id="line_6748" class="even"><span class="lineNumber">&nbsp;6748&nbsp;</span>	massageCurrentDate:&nbsp;function(date,&nbsp;direction)&nbsp;{<a name="line_6748"></a></li>
<li id="line_6749" class="odd"><span class="lineNumber">&nbsp;6749&nbsp;</span>		if&nbsp;(this.intervalDuration.as('days')&nbsp;&lt;=&nbsp;1)&nbsp;{&nbsp;//&nbsp;if&nbsp;the&nbsp;view&nbsp;displays&nbsp;a&nbsp;single&nbsp;day&nbsp;or&nbsp;smaller<a name="line_6749"></a></li>
<li id="line_6750" class="even"><span class="lineNumber">&nbsp;6750&nbsp;</span>			if&nbsp;(this.isHiddenDay(date))&nbsp;{<a name="line_6750"></a></li>
<li id="line_6751" class="odd"><span class="lineNumber">&nbsp;6751&nbsp;</span>				date&nbsp;=&nbsp;this.skipHiddenDays(date,&nbsp;direction);<a name="line_6751"></a></li>
<li id="line_6752" class="even"><span class="lineNumber">&nbsp;6752&nbsp;</span>				date.startOf('day');<a name="line_6752"></a></li>
<li id="line_6753" class="odd"><span class="lineNumber">&nbsp;6753&nbsp;</span>			}<a name="line_6753"></a></li>
<li id="line_6754" class="even"><span class="lineNumber">&nbsp;6754&nbsp;</span>		}<a name="line_6754"></a></li>
<li id="line_6755" class="odd"><span class="lineNumber">&nbsp;6755&nbsp;</span><a name="line_6755"></a></li>
<li id="line_6756" class="even"><span class="lineNumber">&nbsp;6756&nbsp;</span>		return&nbsp;date;<a name="line_6756"></a></li>
<li id="line_6757" class="odd"><span class="lineNumber">&nbsp;6757&nbsp;</span>	},<a name="line_6757"></a></li>
<li id="line_6758" class="even"><span class="lineNumber">&nbsp;6758&nbsp;</span><a name="line_6758"></a></li>
<li id="line_6759" class="odd"><span class="lineNumber">&nbsp;6759&nbsp;</span><a name="line_6759"></a></li>
<li id="line_6760" class="even"><span class="lineNumber">&nbsp;6760&nbsp;</span>	/*&nbsp;Title&nbsp;and&nbsp;Date&nbsp;Formatting<a name="line_6760"></a></li>
<li id="line_6761" class="odd"><span class="lineNumber">&nbsp;6761&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_6761"></a></li>
<li id="line_6762" class="even"><span class="lineNumber">&nbsp;6762&nbsp;</span><a name="line_6762"></a></li>
<li id="line_6763" class="odd"><span class="lineNumber">&nbsp;6763&nbsp;</span><a name="line_6763"></a></li>
<li id="line_6764" class="even"><span class="lineNumber">&nbsp;6764&nbsp;</span>	//&nbsp;Sets&nbsp;the&nbsp;view's&nbsp;title&nbsp;property&nbsp;to&nbsp;the&nbsp;most&nbsp;updated&nbsp;computed&nbsp;value<a name="line_6764"></a></li>
<li id="line_6765" class="odd"><span class="lineNumber">&nbsp;6765&nbsp;</span>	updateTitle:&nbsp;function()&nbsp;{<a name="line_6765"></a></li>
<li id="line_6766" class="even"><span class="lineNumber">&nbsp;6766&nbsp;</span>		this.title&nbsp;=&nbsp;this.computeTitle();<a name="line_6766"></a></li>
<li id="line_6767" class="odd"><span class="lineNumber">&nbsp;6767&nbsp;</span>	},<a name="line_6767"></a></li>
<li id="line_6768" class="even"><span class="lineNumber">&nbsp;6768&nbsp;</span><a name="line_6768"></a></li>
<li id="line_6769" class="odd"><span class="lineNumber">&nbsp;6769&nbsp;</span><a name="line_6769"></a></li>
<li id="line_6770" class="even"><span class="lineNumber">&nbsp;6770&nbsp;</span>	//&nbsp;Computes&nbsp;what&nbsp;the&nbsp;title&nbsp;at&nbsp;the&nbsp;top&nbsp;of&nbsp;the&nbsp;calendar&nbsp;should&nbsp;be&nbsp;for&nbsp;this&nbsp;view<a name="line_6770"></a></li>
<li id="line_6771" class="odd"><span class="lineNumber">&nbsp;6771&nbsp;</span>	computeTitle:&nbsp;function()&nbsp;{<a name="line_6771"></a></li>
<li id="line_6772" class="even"><span class="lineNumber">&nbsp;6772&nbsp;</span>		return&nbsp;this.formatRange(<a name="line_6772"></a></li>
<li id="line_6773" class="odd"><span class="lineNumber">&nbsp;6773&nbsp;</span>			{&nbsp;start:&nbsp;this.intervalStart,&nbsp;end:&nbsp;this.intervalEnd&nbsp;},<a name="line_6773"></a></li>
<li id="line_6774" class="even"><span class="lineNumber">&nbsp;6774&nbsp;</span>			this.opt('titleFormat')&nbsp;||&nbsp;this.computeTitleFormat(),<a name="line_6774"></a></li>
<li id="line_6775" class="odd"><span class="lineNumber">&nbsp;6775&nbsp;</span>			this.opt('titleRangeSeparator')<a name="line_6775"></a></li>
<li id="line_6776" class="even"><span class="lineNumber">&nbsp;6776&nbsp;</span>		);<a name="line_6776"></a></li>
<li id="line_6777" class="odd"><span class="lineNumber">&nbsp;6777&nbsp;</span>	},<a name="line_6777"></a></li>
<li id="line_6778" class="even"><span class="lineNumber">&nbsp;6778&nbsp;</span><a name="line_6778"></a></li>
<li id="line_6779" class="odd"><span class="lineNumber">&nbsp;6779&nbsp;</span><a name="line_6779"></a></li>
<li id="line_6780" class="even"><span class="lineNumber">&nbsp;6780&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;format&nbsp;string&nbsp;that&nbsp;should&nbsp;be&nbsp;used&nbsp;to&nbsp;generate&nbsp;the&nbsp;title&nbsp;for&nbsp;the&nbsp;current&nbsp;date&nbsp;range.<a name="line_6780"></a></li>
<li id="line_6781" class="odd"><span class="lineNumber">&nbsp;6781&nbsp;</span>	//&nbsp;Attempts&nbsp;to&nbsp;compute&nbsp;the&nbsp;most&nbsp;appropriate&nbsp;format&nbsp;if&nbsp;not&nbsp;explicitly&nbsp;specified&nbsp;with&nbsp;`titleFormat`.<a name="line_6781"></a></li>
<li id="line_6782" class="even"><span class="lineNumber">&nbsp;6782&nbsp;</span>	computeTitleFormat:&nbsp;function()&nbsp;{<a name="line_6782"></a></li>
<li id="line_6783" class="odd"><span class="lineNumber">&nbsp;6783&nbsp;</span>		if&nbsp;(this.intervalUnit&nbsp;==&nbsp;'year')&nbsp;{<a name="line_6783"></a></li>
<li id="line_6784" class="even"><span class="lineNumber">&nbsp;6784&nbsp;</span>			return&nbsp;'YYYY';<a name="line_6784"></a></li>
<li id="line_6785" class="odd"><span class="lineNumber">&nbsp;6785&nbsp;</span>		}<a name="line_6785"></a></li>
<li id="line_6786" class="even"><span class="lineNumber">&nbsp;6786&nbsp;</span>		else&nbsp;if&nbsp;(this.intervalUnit&nbsp;==&nbsp;'month')&nbsp;{<a name="line_6786"></a></li>
<li id="line_6787" class="odd"><span class="lineNumber">&nbsp;6787&nbsp;</span>			return&nbsp;this.opt('monthYearFormat');&nbsp;//&nbsp;like&nbsp;"September&nbsp;2014"<a name="line_6787"></a></li>
<li id="line_6788" class="even"><span class="lineNumber">&nbsp;6788&nbsp;</span>		}<a name="line_6788"></a></li>
<li id="line_6789" class="odd"><span class="lineNumber">&nbsp;6789&nbsp;</span>		else&nbsp;if&nbsp;(this.intervalDuration.as('days')&nbsp;&gt;&nbsp;1)&nbsp;{<a name="line_6789"></a></li>
<li id="line_6790" class="even"><span class="lineNumber">&nbsp;6790&nbsp;</span>			return&nbsp;'ll';&nbsp;//&nbsp;multi-day&nbsp;range.&nbsp;shorter,&nbsp;like&nbsp;"Sep&nbsp;9&nbsp;-&nbsp;10&nbsp;2014"<a name="line_6790"></a></li>
<li id="line_6791" class="odd"><span class="lineNumber">&nbsp;6791&nbsp;</span>		}<a name="line_6791"></a></li>
<li id="line_6792" class="even"><span class="lineNumber">&nbsp;6792&nbsp;</span>		else&nbsp;{<a name="line_6792"></a></li>
<li id="line_6793" class="odd"><span class="lineNumber">&nbsp;6793&nbsp;</span>			return&nbsp;'LL';&nbsp;//&nbsp;one&nbsp;day.&nbsp;longer,&nbsp;like&nbsp;"September&nbsp;9&nbsp;2014"<a name="line_6793"></a></li>
<li id="line_6794" class="even"><span class="lineNumber">&nbsp;6794&nbsp;</span>		}<a name="line_6794"></a></li>
<li id="line_6795" class="odd"><span class="lineNumber">&nbsp;6795&nbsp;</span>	},<a name="line_6795"></a></li>
<li id="line_6796" class="even"><span class="lineNumber">&nbsp;6796&nbsp;</span><a name="line_6796"></a></li>
<li id="line_6797" class="odd"><span class="lineNumber">&nbsp;6797&nbsp;</span><a name="line_6797"></a></li>
<li id="line_6798" class="even"><span class="lineNumber">&nbsp;6798&nbsp;</span>	//&nbsp;Utility&nbsp;for&nbsp;formatting&nbsp;a&nbsp;range.&nbsp;Accepts&nbsp;a&nbsp;range&nbsp;object,&nbsp;formatting&nbsp;string,&nbsp;and&nbsp;optional&nbsp;separator.<a name="line_6798"></a></li>
<li id="line_6799" class="odd"><span class="lineNumber">&nbsp;6799&nbsp;</span>	//&nbsp;Displays&nbsp;all-day&nbsp;ranges&nbsp;naturally,&nbsp;with&nbsp;an&nbsp;inclusive&nbsp;end.&nbsp;Takes&nbsp;the&nbsp;current&nbsp;isRTL&nbsp;into&nbsp;account.<a name="line_6799"></a></li>
<li id="line_6800" class="even"><span class="lineNumber">&nbsp;6800&nbsp;</span>	formatRange:&nbsp;function(range,&nbsp;formatStr,&nbsp;separator)&nbsp;{<a name="line_6800"></a></li>
<li id="line_6801" class="odd"><span class="lineNumber">&nbsp;6801&nbsp;</span>		var&nbsp;end&nbsp;=&nbsp;range.end;<a name="line_6801"></a></li>
<li id="line_6802" class="even"><span class="lineNumber">&nbsp;6802&nbsp;</span><a name="line_6802"></a></li>
<li id="line_6803" class="odd"><span class="lineNumber">&nbsp;6803&nbsp;</span>		if&nbsp;(!end.hasTime())&nbsp;{&nbsp;//&nbsp;all-day?<a name="line_6803"></a></li>
<li id="line_6804" class="even"><span class="lineNumber">&nbsp;6804&nbsp;</span>			end&nbsp;=&nbsp;end.clone().subtract(1);&nbsp;//&nbsp;convert&nbsp;to&nbsp;inclusive.&nbsp;last&nbsp;ms&nbsp;of&nbsp;previous&nbsp;day<a name="line_6804"></a></li>
<li id="line_6805" class="odd"><span class="lineNumber">&nbsp;6805&nbsp;</span>		}<a name="line_6805"></a></li>
<li id="line_6806" class="even"><span class="lineNumber">&nbsp;6806&nbsp;</span><a name="line_6806"></a></li>
<li id="line_6807" class="odd"><span class="lineNumber">&nbsp;6807&nbsp;</span>		return&nbsp;formatRange(range.start,&nbsp;end,&nbsp;formatStr,&nbsp;separator,&nbsp;this.opt('isRTL'));<a name="line_6807"></a></li>
<li id="line_6808" class="even"><span class="lineNumber">&nbsp;6808&nbsp;</span>	},<a name="line_6808"></a></li>
<li id="line_6809" class="odd"><span class="lineNumber">&nbsp;6809&nbsp;</span><a name="line_6809"></a></li>
<li id="line_6810" class="even"><span class="lineNumber">&nbsp;6810&nbsp;</span><a name="line_6810"></a></li>
<li id="line_6811" class="odd"><span class="lineNumber">&nbsp;6811&nbsp;</span>	/*&nbsp;Rendering<a name="line_6811"></a></li>
<li id="line_6812" class="even"><span class="lineNumber">&nbsp;6812&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_6812"></a></li>
<li id="line_6813" class="odd"><span class="lineNumber">&nbsp;6813&nbsp;</span><a name="line_6813"></a></li>
<li id="line_6814" class="even"><span class="lineNumber">&nbsp;6814&nbsp;</span><a name="line_6814"></a></li>
<li id="line_6815" class="odd"><span class="lineNumber">&nbsp;6815&nbsp;</span>	//&nbsp;Sets&nbsp;the&nbsp;container&nbsp;element&nbsp;that&nbsp;the&nbsp;view&nbsp;should&nbsp;render&nbsp;inside&nbsp;of.<a name="line_6815"></a></li>
<li id="line_6816" class="even"><span class="lineNumber">&nbsp;6816&nbsp;</span>	//&nbsp;Does&nbsp;other&nbsp;DOM-related&nbsp;initializations.<a name="line_6816"></a></li>
<li id="line_6817" class="odd"><span class="lineNumber">&nbsp;6817&nbsp;</span>	setElement:&nbsp;function(el)&nbsp;{<a name="line_6817"></a></li>
<li id="line_6818" class="even"><span class="lineNumber">&nbsp;6818&nbsp;</span>		this.el&nbsp;=&nbsp;el;<a name="line_6818"></a></li>
<li id="line_6819" class="odd"><span class="lineNumber">&nbsp;6819&nbsp;</span>		this.bindGlobalHandlers();<a name="line_6819"></a></li>
<li id="line_6820" class="even"><span class="lineNumber">&nbsp;6820&nbsp;</span>	},<a name="line_6820"></a></li>
<li id="line_6821" class="odd"><span class="lineNumber">&nbsp;6821&nbsp;</span><a name="line_6821"></a></li>
<li id="line_6822" class="even"><span class="lineNumber">&nbsp;6822&nbsp;</span><a name="line_6822"></a></li>
<li id="line_6823" class="odd"><span class="lineNumber">&nbsp;6823&nbsp;</span>	//&nbsp;Removes&nbsp;the&nbsp;view's&nbsp;container&nbsp;element&nbsp;from&nbsp;the&nbsp;DOM,&nbsp;clearing&nbsp;any&nbsp;content&nbsp;beforehand.<a name="line_6823"></a></li>
<li id="line_6824" class="even"><span class="lineNumber">&nbsp;6824&nbsp;</span>	//&nbsp;Undoes&nbsp;any&nbsp;other&nbsp;DOM-related&nbsp;attachments.<a name="line_6824"></a></li>
<li id="line_6825" class="odd"><span class="lineNumber">&nbsp;6825&nbsp;</span>	removeElement:&nbsp;function()&nbsp;{<a name="line_6825"></a></li>
<li id="line_6826" class="even"><span class="lineNumber">&nbsp;6826&nbsp;</span>		this.clear();&nbsp;//&nbsp;clears&nbsp;all&nbsp;content<a name="line_6826"></a></li>
<li id="line_6827" class="odd"><span class="lineNumber">&nbsp;6827&nbsp;</span><a name="line_6827"></a></li>
<li id="line_6828" class="even"><span class="lineNumber">&nbsp;6828&nbsp;</span>		//&nbsp;clean&nbsp;up&nbsp;the&nbsp;skeleton<a name="line_6828"></a></li>
<li id="line_6829" class="odd"><span class="lineNumber">&nbsp;6829&nbsp;</span>		if&nbsp;(this.isSkeletonRendered)&nbsp;{<a name="line_6829"></a></li>
<li id="line_6830" class="even"><span class="lineNumber">&nbsp;6830&nbsp;</span>			this.unrenderSkeleton();<a name="line_6830"></a></li>
<li id="line_6831" class="odd"><span class="lineNumber">&nbsp;6831&nbsp;</span>			this.isSkeletonRendered&nbsp;=&nbsp;false;<a name="line_6831"></a></li>
<li id="line_6832" class="even"><span class="lineNumber">&nbsp;6832&nbsp;</span>		}<a name="line_6832"></a></li>
<li id="line_6833" class="odd"><span class="lineNumber">&nbsp;6833&nbsp;</span><a name="line_6833"></a></li>
<li id="line_6834" class="even"><span class="lineNumber">&nbsp;6834&nbsp;</span>		this.unbindGlobalHandlers();<a name="line_6834"></a></li>
<li id="line_6835" class="odd"><span class="lineNumber">&nbsp;6835&nbsp;</span><a name="line_6835"></a></li>
<li id="line_6836" class="even"><span class="lineNumber">&nbsp;6836&nbsp;</span>		this.el.remove();<a name="line_6836"></a></li>
<li id="line_6837" class="odd"><span class="lineNumber">&nbsp;6837&nbsp;</span><a name="line_6837"></a></li>
<li id="line_6838" class="even"><span class="lineNumber">&nbsp;6838&nbsp;</span>		//&nbsp;NOTE:&nbsp;don't&nbsp;null-out&nbsp;this.el&nbsp;in&nbsp;case&nbsp;the&nbsp;View&nbsp;was&nbsp;destroyed&nbsp;within&nbsp;an&nbsp;API&nbsp;callback.<a name="line_6838"></a></li>
<li id="line_6839" class="odd"><span class="lineNumber">&nbsp;6839&nbsp;</span>		//&nbsp;We&nbsp;don't&nbsp;null-out&nbsp;the&nbsp;View's&nbsp;other&nbsp;jQuery&nbsp;element&nbsp;references&nbsp;upon&nbsp;destroy,<a name="line_6839"></a></li>
<li id="line_6840" class="even"><span class="lineNumber">&nbsp;6840&nbsp;</span>		//&nbsp;&nbsp;so&nbsp;we&nbsp;shouldn't&nbsp;kill&nbsp;this.el&nbsp;either.<a name="line_6840"></a></li>
<li id="line_6841" class="odd"><span class="lineNumber">&nbsp;6841&nbsp;</span>	},<a name="line_6841"></a></li>
<li id="line_6842" class="even"><span class="lineNumber">&nbsp;6842&nbsp;</span><a name="line_6842"></a></li>
<li id="line_6843" class="odd"><span class="lineNumber">&nbsp;6843&nbsp;</span><a name="line_6843"></a></li>
<li id="line_6844" class="even"><span class="lineNumber">&nbsp;6844&nbsp;</span>	//&nbsp;Does&nbsp;everything&nbsp;necessary&nbsp;to&nbsp;display&nbsp;the&nbsp;view&nbsp;centered&nbsp;around&nbsp;the&nbsp;given&nbsp;date.<a name="line_6844"></a></li>
<li id="line_6845" class="odd"><span class="lineNumber">&nbsp;6845&nbsp;</span>	//&nbsp;Does&nbsp;every&nbsp;type&nbsp;of&nbsp;rendering&nbsp;EXCEPT&nbsp;rendering&nbsp;events.<a name="line_6845"></a></li>
<li id="line_6846" class="even"><span class="lineNumber">&nbsp;6846&nbsp;</span>	//&nbsp;Is&nbsp;asychronous&nbsp;and&nbsp;returns&nbsp;a&nbsp;promise.<a name="line_6846"></a></li>
<li id="line_6847" class="odd"><span class="lineNumber">&nbsp;6847&nbsp;</span>	display:&nbsp;function(date)&nbsp;{<a name="line_6847"></a></li>
<li id="line_6848" class="even"><span class="lineNumber">&nbsp;6848&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_6848"></a></li>
<li id="line_6849" class="odd"><span class="lineNumber">&nbsp;6849&nbsp;</span>		var&nbsp;scrollState&nbsp;=&nbsp;null;<a name="line_6849"></a></li>
<li id="line_6850" class="even"><span class="lineNumber">&nbsp;6850&nbsp;</span><a name="line_6850"></a></li>
<li id="line_6851" class="odd"><span class="lineNumber">&nbsp;6851&nbsp;</span>		if&nbsp;(this.displaying)&nbsp;{<a name="line_6851"></a></li>
<li id="line_6852" class="even"><span class="lineNumber">&nbsp;6852&nbsp;</span>			scrollState&nbsp;=&nbsp;this.queryScroll();<a name="line_6852"></a></li>
<li id="line_6853" class="odd"><span class="lineNumber">&nbsp;6853&nbsp;</span>		}<a name="line_6853"></a></li>
<li id="line_6854" class="even"><span class="lineNumber">&nbsp;6854&nbsp;</span><a name="line_6854"></a></li>
<li id="line_6855" class="odd"><span class="lineNumber">&nbsp;6855&nbsp;</span>		return&nbsp;this.clear().then(function()&nbsp;{&nbsp;//&nbsp;clear&nbsp;the&nbsp;content&nbsp;first&nbsp;(async)<a name="line_6855"></a></li>
<li id="line_6856" class="even"><span class="lineNumber">&nbsp;6856&nbsp;</span>			return&nbsp;(<a name="line_6856"></a></li>
<li id="line_6857" class="odd"><span class="lineNumber">&nbsp;6857&nbsp;</span>				_this.displaying&nbsp;=<a name="line_6857"></a></li>
<li id="line_6858" class="even"><span class="lineNumber">&nbsp;6858&nbsp;</span>					$.when(_this.displayView(date))&nbsp;//&nbsp;displayView&nbsp;might&nbsp;return&nbsp;a&nbsp;promise<a name="line_6858"></a></li>
<li id="line_6859" class="odd"><span class="lineNumber">&nbsp;6859&nbsp;</span>						.then(function()&nbsp;{<a name="line_6859"></a></li>
<li id="line_6860" class="even"><span class="lineNumber">&nbsp;6860&nbsp;</span>							_this.forceScroll(_this.computeInitialScroll(scrollState));<a name="line_6860"></a></li>
<li id="line_6861" class="odd"><span class="lineNumber">&nbsp;6861&nbsp;</span>							_this.triggerRender();<a name="line_6861"></a></li>
<li id="line_6862" class="even"><span class="lineNumber">&nbsp;6862&nbsp;</span>						})<a name="line_6862"></a></li>
<li id="line_6863" class="odd"><span class="lineNumber">&nbsp;6863&nbsp;</span>			);<a name="line_6863"></a></li>
<li id="line_6864" class="even"><span class="lineNumber">&nbsp;6864&nbsp;</span>		});<a name="line_6864"></a></li>
<li id="line_6865" class="odd"><span class="lineNumber">&nbsp;6865&nbsp;</span>	},<a name="line_6865"></a></li>
<li id="line_6866" class="even"><span class="lineNumber">&nbsp;6866&nbsp;</span><a name="line_6866"></a></li>
<li id="line_6867" class="odd"><span class="lineNumber">&nbsp;6867&nbsp;</span><a name="line_6867"></a></li>
<li id="line_6868" class="even"><span class="lineNumber">&nbsp;6868&nbsp;</span>	//&nbsp;Does&nbsp;everything&nbsp;necessary&nbsp;to&nbsp;clear&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;view.<a name="line_6868"></a></li>
<li id="line_6869" class="odd"><span class="lineNumber">&nbsp;6869&nbsp;</span>	//&nbsp;Clears&nbsp;dates&nbsp;and&nbsp;events.&nbsp;Does&nbsp;not&nbsp;clear&nbsp;the&nbsp;skeleton.<a name="line_6869"></a></li>
<li id="line_6870" class="even"><span class="lineNumber">&nbsp;6870&nbsp;</span>	//&nbsp;Is&nbsp;asychronous&nbsp;and&nbsp;returns&nbsp;a&nbsp;promise.<a name="line_6870"></a></li>
<li id="line_6871" class="odd"><span class="lineNumber">&nbsp;6871&nbsp;</span>	clear:&nbsp;function()&nbsp;{<a name="line_6871"></a></li>
<li id="line_6872" class="even"><span class="lineNumber">&nbsp;6872&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_6872"></a></li>
<li id="line_6873" class="odd"><span class="lineNumber">&nbsp;6873&nbsp;</span>		var&nbsp;displaying&nbsp;=&nbsp;this.displaying;<a name="line_6873"></a></li>
<li id="line_6874" class="even"><span class="lineNumber">&nbsp;6874&nbsp;</span><a name="line_6874"></a></li>
<li id="line_6875" class="odd"><span class="lineNumber">&nbsp;6875&nbsp;</span>		if&nbsp;(displaying)&nbsp;{&nbsp;//&nbsp;previously&nbsp;displayed,&nbsp;or&nbsp;in&nbsp;the&nbsp;process&nbsp;of&nbsp;being&nbsp;displayed?<a name="line_6875"></a></li>
<li id="line_6876" class="even"><span class="lineNumber">&nbsp;6876&nbsp;</span>			return&nbsp;displaying.then(function()&nbsp;{&nbsp;//&nbsp;wait&nbsp;for&nbsp;the&nbsp;display&nbsp;to&nbsp;finish<a name="line_6876"></a></li>
<li id="line_6877" class="odd"><span class="lineNumber">&nbsp;6877&nbsp;</span>				_this.displaying&nbsp;=&nbsp;null;<a name="line_6877"></a></li>
<li id="line_6878" class="even"><span class="lineNumber">&nbsp;6878&nbsp;</span>				_this.clearEvents();<a name="line_6878"></a></li>
<li id="line_6879" class="odd"><span class="lineNumber">&nbsp;6879&nbsp;</span>				return&nbsp;_this.clearView();&nbsp;//&nbsp;might&nbsp;return&nbsp;a&nbsp;promise.&nbsp;chain&nbsp;it<a name="line_6879"></a></li>
<li id="line_6880" class="even"><span class="lineNumber">&nbsp;6880&nbsp;</span>			});<a name="line_6880"></a></li>
<li id="line_6881" class="odd"><span class="lineNumber">&nbsp;6881&nbsp;</span>		}<a name="line_6881"></a></li>
<li id="line_6882" class="even"><span class="lineNumber">&nbsp;6882&nbsp;</span>		else&nbsp;{<a name="line_6882"></a></li>
<li id="line_6883" class="odd"><span class="lineNumber">&nbsp;6883&nbsp;</span>			return&nbsp;$.when();&nbsp;//&nbsp;an&nbsp;immediately-resolved&nbsp;promise<a name="line_6883"></a></li>
<li id="line_6884" class="even"><span class="lineNumber">&nbsp;6884&nbsp;</span>		}<a name="line_6884"></a></li>
<li id="line_6885" class="odd"><span class="lineNumber">&nbsp;6885&nbsp;</span>	},<a name="line_6885"></a></li>
<li id="line_6886" class="even"><span class="lineNumber">&nbsp;6886&nbsp;</span><a name="line_6886"></a></li>
<li id="line_6887" class="odd"><span class="lineNumber">&nbsp;6887&nbsp;</span><a name="line_6887"></a></li>
<li id="line_6888" class="even"><span class="lineNumber">&nbsp;6888&nbsp;</span>	//&nbsp;Displays&nbsp;the&nbsp;view's&nbsp;non-event&nbsp;content,&nbsp;such&nbsp;as&nbsp;date-related&nbsp;content&nbsp;or&nbsp;anything&nbsp;required&nbsp;by&nbsp;events.<a name="line_6888"></a></li>
<li id="line_6889" class="odd"><span class="lineNumber">&nbsp;6889&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;view's&nbsp;non-content&nbsp;skeleton&nbsp;if&nbsp;necessary.<a name="line_6889"></a></li>
<li id="line_6890" class="even"><span class="lineNumber">&nbsp;6890&nbsp;</span>	//&nbsp;Can&nbsp;be&nbsp;asynchronous&nbsp;and&nbsp;return&nbsp;a&nbsp;promise.<a name="line_6890"></a></li>
<li id="line_6891" class="odd"><span class="lineNumber">&nbsp;6891&nbsp;</span>	displayView:&nbsp;function(date)&nbsp;{<a name="line_6891"></a></li>
<li id="line_6892" class="even"><span class="lineNumber">&nbsp;6892&nbsp;</span>		if&nbsp;(!this.isSkeletonRendered)&nbsp;{<a name="line_6892"></a></li>
<li id="line_6893" class="odd"><span class="lineNumber">&nbsp;6893&nbsp;</span>			this.renderSkeleton();<a name="line_6893"></a></li>
<li id="line_6894" class="even"><span class="lineNumber">&nbsp;6894&nbsp;</span>			this.isSkeletonRendered&nbsp;=&nbsp;true;<a name="line_6894"></a></li>
<li id="line_6895" class="odd"><span class="lineNumber">&nbsp;6895&nbsp;</span>		}<a name="line_6895"></a></li>
<li id="line_6896" class="even"><span class="lineNumber">&nbsp;6896&nbsp;</span>		this.setDate(date);<a name="line_6896"></a></li>
<li id="line_6897" class="odd"><span class="lineNumber">&nbsp;6897&nbsp;</span>		if&nbsp;(this.render)&nbsp;{<a name="line_6897"></a></li>
<li id="line_6898" class="even"><span class="lineNumber">&nbsp;6898&nbsp;</span>			this.render();&nbsp;//&nbsp;TODO:&nbsp;deprecate<a name="line_6898"></a></li>
<li id="line_6899" class="odd"><span class="lineNumber">&nbsp;6899&nbsp;</span>		}<a name="line_6899"></a></li>
<li id="line_6900" class="even"><span class="lineNumber">&nbsp;6900&nbsp;</span>		this.renderDates();<a name="line_6900"></a></li>
<li id="line_6901" class="odd"><span class="lineNumber">&nbsp;6901&nbsp;</span>		this.updateSize();<a name="line_6901"></a></li>
<li id="line_6902" class="even"><span class="lineNumber">&nbsp;6902&nbsp;</span>		this.renderBusinessHours();&nbsp;//&nbsp;might&nbsp;need&nbsp;coordinates,&nbsp;so&nbsp;should&nbsp;go&nbsp;after&nbsp;updateSize()<a name="line_6902"></a></li>
<li id="line_6903" class="odd"><span class="lineNumber">&nbsp;6903&nbsp;</span>	},<a name="line_6903"></a></li>
<li id="line_6904" class="even"><span class="lineNumber">&nbsp;6904&nbsp;</span><a name="line_6904"></a></li>
<li id="line_6905" class="odd"><span class="lineNumber">&nbsp;6905&nbsp;</span><a name="line_6905"></a></li>
<li id="line_6906" class="even"><span class="lineNumber">&nbsp;6906&nbsp;</span>	//&nbsp;Unrenders&nbsp;the&nbsp;view&nbsp;content&nbsp;that&nbsp;was&nbsp;rendered&nbsp;in&nbsp;displayView.<a name="line_6906"></a></li>
<li id="line_6907" class="odd"><span class="lineNumber">&nbsp;6907&nbsp;</span>	//&nbsp;Can&nbsp;be&nbsp;asynchronous&nbsp;and&nbsp;return&nbsp;a&nbsp;promise.<a name="line_6907"></a></li>
<li id="line_6908" class="even"><span class="lineNumber">&nbsp;6908&nbsp;</span>	clearView:&nbsp;function()&nbsp;{<a name="line_6908"></a></li>
<li id="line_6909" class="odd"><span class="lineNumber">&nbsp;6909&nbsp;</span>		this.unselect();<a name="line_6909"></a></li>
<li id="line_6910" class="even"><span class="lineNumber">&nbsp;6910&nbsp;</span>		this.triggerUnrender();<a name="line_6910"></a></li>
<li id="line_6911" class="odd"><span class="lineNumber">&nbsp;6911&nbsp;</span>		this.unrenderBusinessHours();<a name="line_6911"></a></li>
<li id="line_6912" class="even"><span class="lineNumber">&nbsp;6912&nbsp;</span>		this.unrenderDates();<a name="line_6912"></a></li>
<li id="line_6913" class="odd"><span class="lineNumber">&nbsp;6913&nbsp;</span>		if&nbsp;(this.destroy)&nbsp;{<a name="line_6913"></a></li>
<li id="line_6914" class="even"><span class="lineNumber">&nbsp;6914&nbsp;</span>			this.destroy();&nbsp;//&nbsp;TODO:&nbsp;deprecate<a name="line_6914"></a></li>
<li id="line_6915" class="odd"><span class="lineNumber">&nbsp;6915&nbsp;</span>		}<a name="line_6915"></a></li>
<li id="line_6916" class="even"><span class="lineNumber">&nbsp;6916&nbsp;</span>	},<a name="line_6916"></a></li>
<li id="line_6917" class="odd"><span class="lineNumber">&nbsp;6917&nbsp;</span><a name="line_6917"></a></li>
<li id="line_6918" class="even"><span class="lineNumber">&nbsp;6918&nbsp;</span><a name="line_6918"></a></li>
<li id="line_6919" class="odd"><span class="lineNumber">&nbsp;6919&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;basic&nbsp;structure&nbsp;of&nbsp;the&nbsp;view&nbsp;before&nbsp;any&nbsp;content&nbsp;is&nbsp;rendered<a name="line_6919"></a></li>
<li id="line_6920" class="even"><span class="lineNumber">&nbsp;6920&nbsp;</span>	renderSkeleton:&nbsp;function()&nbsp;{<a name="line_6920"></a></li>
<li id="line_6921" class="odd"><span class="lineNumber">&nbsp;6921&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_6921"></a></li>
<li id="line_6922" class="even"><span class="lineNumber">&nbsp;6922&nbsp;</span>	},<a name="line_6922"></a></li>
<li id="line_6923" class="odd"><span class="lineNumber">&nbsp;6923&nbsp;</span><a name="line_6923"></a></li>
<li id="line_6924" class="even"><span class="lineNumber">&nbsp;6924&nbsp;</span><a name="line_6924"></a></li>
<li id="line_6925" class="odd"><span class="lineNumber">&nbsp;6925&nbsp;</span>	//&nbsp;Unrenders&nbsp;the&nbsp;basic&nbsp;structure&nbsp;of&nbsp;the&nbsp;view<a name="line_6925"></a></li>
<li id="line_6926" class="even"><span class="lineNumber">&nbsp;6926&nbsp;</span>	unrenderSkeleton:&nbsp;function()&nbsp;{<a name="line_6926"></a></li>
<li id="line_6927" class="odd"><span class="lineNumber">&nbsp;6927&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_6927"></a></li>
<li id="line_6928" class="even"><span class="lineNumber">&nbsp;6928&nbsp;</span>	},<a name="line_6928"></a></li>
<li id="line_6929" class="odd"><span class="lineNumber">&nbsp;6929&nbsp;</span><a name="line_6929"></a></li>
<li id="line_6930" class="even"><span class="lineNumber">&nbsp;6930&nbsp;</span><a name="line_6930"></a></li>
<li id="line_6931" class="odd"><span class="lineNumber">&nbsp;6931&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;view's&nbsp;date-related&nbsp;content&nbsp;(like&nbsp;cells&nbsp;that&nbsp;represent&nbsp;days/times).<a name="line_6931"></a></li>
<li id="line_6932" class="even"><span class="lineNumber">&nbsp;6932&nbsp;</span>	//&nbsp;Assumes&nbsp;setRange&nbsp;has&nbsp;already&nbsp;been&nbsp;called&nbsp;and&nbsp;the&nbsp;skeleton&nbsp;has&nbsp;already&nbsp;been&nbsp;rendered.<a name="line_6932"></a></li>
<li id="line_6933" class="odd"><span class="lineNumber">&nbsp;6933&nbsp;</span>	renderDates:&nbsp;function()&nbsp;{<a name="line_6933"></a></li>
<li id="line_6934" class="even"><span class="lineNumber">&nbsp;6934&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_6934"></a></li>
<li id="line_6935" class="odd"><span class="lineNumber">&nbsp;6935&nbsp;</span>	},<a name="line_6935"></a></li>
<li id="line_6936" class="even"><span class="lineNumber">&nbsp;6936&nbsp;</span><a name="line_6936"></a></li>
<li id="line_6937" class="odd"><span class="lineNumber">&nbsp;6937&nbsp;</span><a name="line_6937"></a></li>
<li id="line_6938" class="even"><span class="lineNumber">&nbsp;6938&nbsp;</span>	//&nbsp;Unrenders&nbsp;the&nbsp;view's&nbsp;date-related&nbsp;content<a name="line_6938"></a></li>
<li id="line_6939" class="odd"><span class="lineNumber">&nbsp;6939&nbsp;</span>	unrenderDates:&nbsp;function()&nbsp;{<a name="line_6939"></a></li>
<li id="line_6940" class="even"><span class="lineNumber">&nbsp;6940&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;override<a name="line_6940"></a></li>
<li id="line_6941" class="odd"><span class="lineNumber">&nbsp;6941&nbsp;</span>	},<a name="line_6941"></a></li>
<li id="line_6942" class="even"><span class="lineNumber">&nbsp;6942&nbsp;</span><a name="line_6942"></a></li>
<li id="line_6943" class="odd"><span class="lineNumber">&nbsp;6943&nbsp;</span><a name="line_6943"></a></li>
<li id="line_6944" class="even"><span class="lineNumber">&nbsp;6944&nbsp;</span>	//&nbsp;Renders&nbsp;business-hours&nbsp;onto&nbsp;the&nbsp;view.&nbsp;Assumes&nbsp;updateSize&nbsp;has&nbsp;already&nbsp;been&nbsp;called.<a name="line_6944"></a></li>
<li id="line_6945" class="odd"><span class="lineNumber">&nbsp;6945&nbsp;</span>	renderBusinessHours:&nbsp;function()&nbsp;{<a name="line_6945"></a></li>
<li id="line_6946" class="even"><span class="lineNumber">&nbsp;6946&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_6946"></a></li>
<li id="line_6947" class="odd"><span class="lineNumber">&nbsp;6947&nbsp;</span>	},<a name="line_6947"></a></li>
<li id="line_6948" class="even"><span class="lineNumber">&nbsp;6948&nbsp;</span><a name="line_6948"></a></li>
<li id="line_6949" class="odd"><span class="lineNumber">&nbsp;6949&nbsp;</span><a name="line_6949"></a></li>
<li id="line_6950" class="even"><span class="lineNumber">&nbsp;6950&nbsp;</span>	//&nbsp;Unrenders&nbsp;previously-rendered&nbsp;business-hours<a name="line_6950"></a></li>
<li id="line_6951" class="odd"><span class="lineNumber">&nbsp;6951&nbsp;</span>	unrenderBusinessHours:&nbsp;function()&nbsp;{<a name="line_6951"></a></li>
<li id="line_6952" class="even"><span class="lineNumber">&nbsp;6952&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_6952"></a></li>
<li id="line_6953" class="odd"><span class="lineNumber">&nbsp;6953&nbsp;</span>	},<a name="line_6953"></a></li>
<li id="line_6954" class="even"><span class="lineNumber">&nbsp;6954&nbsp;</span><a name="line_6954"></a></li>
<li id="line_6955" class="odd"><span class="lineNumber">&nbsp;6955&nbsp;</span><a name="line_6955"></a></li>
<li id="line_6956" class="even"><span class="lineNumber">&nbsp;6956&nbsp;</span>	//&nbsp;Signals&nbsp;that&nbsp;the&nbsp;view's&nbsp;content&nbsp;has&nbsp;been&nbsp;rendered<a name="line_6956"></a></li>
<li id="line_6957" class="odd"><span class="lineNumber">&nbsp;6957&nbsp;</span>	triggerRender:&nbsp;function()&nbsp;{<a name="line_6957"></a></li>
<li id="line_6958" class="even"><span class="lineNumber">&nbsp;6958&nbsp;</span>		this.trigger('viewRender',&nbsp;this,&nbsp;this,&nbsp;this.el);<a name="line_6958"></a></li>
<li id="line_6959" class="odd"><span class="lineNumber">&nbsp;6959&nbsp;</span>	},<a name="line_6959"></a></li>
<li id="line_6960" class="even"><span class="lineNumber">&nbsp;6960&nbsp;</span><a name="line_6960"></a></li>
<li id="line_6961" class="odd"><span class="lineNumber">&nbsp;6961&nbsp;</span><a name="line_6961"></a></li>
<li id="line_6962" class="even"><span class="lineNumber">&nbsp;6962&nbsp;</span>	//&nbsp;Signals&nbsp;that&nbsp;the&nbsp;view's&nbsp;content&nbsp;is&nbsp;about&nbsp;to&nbsp;be&nbsp;unrendered<a name="line_6962"></a></li>
<li id="line_6963" class="odd"><span class="lineNumber">&nbsp;6963&nbsp;</span>	triggerUnrender:&nbsp;function()&nbsp;{<a name="line_6963"></a></li>
<li id="line_6964" class="even"><span class="lineNumber">&nbsp;6964&nbsp;</span>		this.trigger('viewDestroy',&nbsp;this,&nbsp;this,&nbsp;this.el);<a name="line_6964"></a></li>
<li id="line_6965" class="odd"><span class="lineNumber">&nbsp;6965&nbsp;</span>	},<a name="line_6965"></a></li>
<li id="line_6966" class="even"><span class="lineNumber">&nbsp;6966&nbsp;</span><a name="line_6966"></a></li>
<li id="line_6967" class="odd"><span class="lineNumber">&nbsp;6967&nbsp;</span><a name="line_6967"></a></li>
<li id="line_6968" class="even"><span class="lineNumber">&nbsp;6968&nbsp;</span>	//&nbsp;Binds&nbsp;DOM&nbsp;handlers&nbsp;to&nbsp;elements&nbsp;that&nbsp;reside&nbsp;outside&nbsp;the&nbsp;view&nbsp;container,&nbsp;such&nbsp;as&nbsp;the&nbsp;document<a name="line_6968"></a></li>
<li id="line_6969" class="odd"><span class="lineNumber">&nbsp;6969&nbsp;</span>	bindGlobalHandlers:&nbsp;function()&nbsp;{<a name="line_6969"></a></li>
<li id="line_6970" class="even"><span class="lineNumber">&nbsp;6970&nbsp;</span>		$(document).on('mousedown',&nbsp;this.documentMousedownProxy);<a name="line_6970"></a></li>
<li id="line_6971" class="odd"><span class="lineNumber">&nbsp;6971&nbsp;</span>	},<a name="line_6971"></a></li>
<li id="line_6972" class="even"><span class="lineNumber">&nbsp;6972&nbsp;</span><a name="line_6972"></a></li>
<li id="line_6973" class="odd"><span class="lineNumber">&nbsp;6973&nbsp;</span><a name="line_6973"></a></li>
<li id="line_6974" class="even"><span class="lineNumber">&nbsp;6974&nbsp;</span>	//&nbsp;Unbinds&nbsp;DOM&nbsp;handlers&nbsp;from&nbsp;elements&nbsp;that&nbsp;reside&nbsp;outside&nbsp;the&nbsp;view&nbsp;container<a name="line_6974"></a></li>
<li id="line_6975" class="odd"><span class="lineNumber">&nbsp;6975&nbsp;</span>	unbindGlobalHandlers:&nbsp;function()&nbsp;{<a name="line_6975"></a></li>
<li id="line_6976" class="even"><span class="lineNumber">&nbsp;6976&nbsp;</span>		$(document).off('mousedown',&nbsp;this.documentMousedownProxy);<a name="line_6976"></a></li>
<li id="line_6977" class="odd"><span class="lineNumber">&nbsp;6977&nbsp;</span>	},<a name="line_6977"></a></li>
<li id="line_6978" class="even"><span class="lineNumber">&nbsp;6978&nbsp;</span><a name="line_6978"></a></li>
<li id="line_6979" class="odd"><span class="lineNumber">&nbsp;6979&nbsp;</span><a name="line_6979"></a></li>
<li id="line_6980" class="even"><span class="lineNumber">&nbsp;6980&nbsp;</span>	//&nbsp;Initializes&nbsp;internal&nbsp;variables&nbsp;related&nbsp;to&nbsp;theming<a name="line_6980"></a></li>
<li id="line_6981" class="odd"><span class="lineNumber">&nbsp;6981&nbsp;</span>	initThemingProps:&nbsp;function()&nbsp;{<a name="line_6981"></a></li>
<li id="line_6982" class="even"><span class="lineNumber">&nbsp;6982&nbsp;</span>		var&nbsp;tm&nbsp;=&nbsp;this.opt('theme')&nbsp;?&nbsp;'ui'&nbsp;:&nbsp;'fc';<a name="line_6982"></a></li>
<li id="line_6983" class="odd"><span class="lineNumber">&nbsp;6983&nbsp;</span><a name="line_6983"></a></li>
<li id="line_6984" class="even"><span class="lineNumber">&nbsp;6984&nbsp;</span>		this.widgetHeaderClass&nbsp;=&nbsp;tm&nbsp;+&nbsp;'-widget-header';<a name="line_6984"></a></li>
<li id="line_6985" class="odd"><span class="lineNumber">&nbsp;6985&nbsp;</span>		this.widgetContentClass&nbsp;=&nbsp;tm&nbsp;+&nbsp;'-widget-content';<a name="line_6985"></a></li>
<li id="line_6986" class="even"><span class="lineNumber">&nbsp;6986&nbsp;</span>		this.highlightStateClass&nbsp;=&nbsp;tm&nbsp;+&nbsp;'-state-highlight';<a name="line_6986"></a></li>
<li id="line_6987" class="odd"><span class="lineNumber">&nbsp;6987&nbsp;</span>	},<a name="line_6987"></a></li>
<li id="line_6988" class="even"><span class="lineNumber">&nbsp;6988&nbsp;</span><a name="line_6988"></a></li>
<li id="line_6989" class="odd"><span class="lineNumber">&nbsp;6989&nbsp;</span><a name="line_6989"></a></li>
<li id="line_6990" class="even"><span class="lineNumber">&nbsp;6990&nbsp;</span>	/*&nbsp;Dimensions<a name="line_6990"></a></li>
<li id="line_6991" class="odd"><span class="lineNumber">&nbsp;6991&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_6991"></a></li>
<li id="line_6992" class="even"><span class="lineNumber">&nbsp;6992&nbsp;</span><a name="line_6992"></a></li>
<li id="line_6993" class="odd"><span class="lineNumber">&nbsp;6993&nbsp;</span><a name="line_6993"></a></li>
<li id="line_6994" class="even"><span class="lineNumber">&nbsp;6994&nbsp;</span>	//&nbsp;Refreshes&nbsp;anything&nbsp;dependant&nbsp;upon&nbsp;sizing&nbsp;of&nbsp;the&nbsp;container&nbsp;element&nbsp;of&nbsp;the&nbsp;grid<a name="line_6994"></a></li>
<li id="line_6995" class="odd"><span class="lineNumber">&nbsp;6995&nbsp;</span>	updateSize:&nbsp;function(isResize)&nbsp;{<a name="line_6995"></a></li>
<li id="line_6996" class="even"><span class="lineNumber">&nbsp;6996&nbsp;</span>		var&nbsp;scrollState;<a name="line_6996"></a></li>
<li id="line_6997" class="odd"><span class="lineNumber">&nbsp;6997&nbsp;</span><a name="line_6997"></a></li>
<li id="line_6998" class="even"><span class="lineNumber">&nbsp;6998&nbsp;</span>		if&nbsp;(isResize)&nbsp;{<a name="line_6998"></a></li>
<li id="line_6999" class="odd"><span class="lineNumber">&nbsp;6999&nbsp;</span>			scrollState&nbsp;=&nbsp;this.queryScroll();<a name="line_6999"></a></li>
<li id="line_7000" class="even"><span class="lineNumber">&nbsp;7000&nbsp;</span>		}<a name="line_7000"></a></li>
<li id="line_7001" class="odd"><span class="lineNumber">&nbsp;7001&nbsp;</span><a name="line_7001"></a></li>
<li id="line_7002" class="even"><span class="lineNumber">&nbsp;7002&nbsp;</span>		this.updateHeight(isResize);<a name="line_7002"></a></li>
<li id="line_7003" class="odd"><span class="lineNumber">&nbsp;7003&nbsp;</span>		this.updateWidth(isResize);<a name="line_7003"></a></li>
<li id="line_7004" class="even"><span class="lineNumber">&nbsp;7004&nbsp;</span><a name="line_7004"></a></li>
<li id="line_7005" class="odd"><span class="lineNumber">&nbsp;7005&nbsp;</span>		if&nbsp;(isResize)&nbsp;{<a name="line_7005"></a></li>
<li id="line_7006" class="even"><span class="lineNumber">&nbsp;7006&nbsp;</span>			this.setScroll(scrollState);<a name="line_7006"></a></li>
<li id="line_7007" class="odd"><span class="lineNumber">&nbsp;7007&nbsp;</span>		}<a name="line_7007"></a></li>
<li id="line_7008" class="even"><span class="lineNumber">&nbsp;7008&nbsp;</span>	},<a name="line_7008"></a></li>
<li id="line_7009" class="odd"><span class="lineNumber">&nbsp;7009&nbsp;</span><a name="line_7009"></a></li>
<li id="line_7010" class="even"><span class="lineNumber">&nbsp;7010&nbsp;</span><a name="line_7010"></a></li>
<li id="line_7011" class="odd"><span class="lineNumber">&nbsp;7011&nbsp;</span>	//&nbsp;Refreshes&nbsp;the&nbsp;horizontal&nbsp;dimensions&nbsp;of&nbsp;the&nbsp;calendar<a name="line_7011"></a></li>
<li id="line_7012" class="even"><span class="lineNumber">&nbsp;7012&nbsp;</span>	updateWidth:&nbsp;function(isResize)&nbsp;{<a name="line_7012"></a></li>
<li id="line_7013" class="odd"><span class="lineNumber">&nbsp;7013&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_7013"></a></li>
<li id="line_7014" class="even"><span class="lineNumber">&nbsp;7014&nbsp;</span>	},<a name="line_7014"></a></li>
<li id="line_7015" class="odd"><span class="lineNumber">&nbsp;7015&nbsp;</span><a name="line_7015"></a></li>
<li id="line_7016" class="even"><span class="lineNumber">&nbsp;7016&nbsp;</span><a name="line_7016"></a></li>
<li id="line_7017" class="odd"><span class="lineNumber">&nbsp;7017&nbsp;</span>	//&nbsp;Refreshes&nbsp;the&nbsp;vertical&nbsp;dimensions&nbsp;of&nbsp;the&nbsp;calendar<a name="line_7017"></a></li>
<li id="line_7018" class="even"><span class="lineNumber">&nbsp;7018&nbsp;</span>	updateHeight:&nbsp;function(isResize)&nbsp;{<a name="line_7018"></a></li>
<li id="line_7019" class="odd"><span class="lineNumber">&nbsp;7019&nbsp;</span>		var&nbsp;calendar&nbsp;=&nbsp;this.calendar;&nbsp;//&nbsp;we&nbsp;poll&nbsp;the&nbsp;calendar&nbsp;for&nbsp;height&nbsp;information<a name="line_7019"></a></li>
<li id="line_7020" class="even"><span class="lineNumber">&nbsp;7020&nbsp;</span><a name="line_7020"></a></li>
<li id="line_7021" class="odd"><span class="lineNumber">&nbsp;7021&nbsp;</span>		this.setHeight(<a name="line_7021"></a></li>
<li id="line_7022" class="even"><span class="lineNumber">&nbsp;7022&nbsp;</span>			calendar.getSuggestedViewHeight(),<a name="line_7022"></a></li>
<li id="line_7023" class="odd"><span class="lineNumber">&nbsp;7023&nbsp;</span>			calendar.isHeightAuto()<a name="line_7023"></a></li>
<li id="line_7024" class="even"><span class="lineNumber">&nbsp;7024&nbsp;</span>		);<a name="line_7024"></a></li>
<li id="line_7025" class="odd"><span class="lineNumber">&nbsp;7025&nbsp;</span>	},<a name="line_7025"></a></li>
<li id="line_7026" class="even"><span class="lineNumber">&nbsp;7026&nbsp;</span><a name="line_7026"></a></li>
<li id="line_7027" class="odd"><span class="lineNumber">&nbsp;7027&nbsp;</span><a name="line_7027"></a></li>
<li id="line_7028" class="even"><span class="lineNumber">&nbsp;7028&nbsp;</span>	//&nbsp;Updates&nbsp;the&nbsp;vertical&nbsp;dimensions&nbsp;of&nbsp;the&nbsp;calendar&nbsp;to&nbsp;the&nbsp;specified&nbsp;height.<a name="line_7028"></a></li>
<li id="line_7029" class="odd"><span class="lineNumber">&nbsp;7029&nbsp;</span>	//&nbsp;if&nbsp;`isAuto`&nbsp;is&nbsp;set&nbsp;to&nbsp;true,&nbsp;height&nbsp;becomes&nbsp;merely&nbsp;a&nbsp;suggestion&nbsp;and&nbsp;the&nbsp;view&nbsp;should&nbsp;use&nbsp;its&nbsp;"natural"&nbsp;height.<a name="line_7029"></a></li>
<li id="line_7030" class="even"><span class="lineNumber">&nbsp;7030&nbsp;</span>	setHeight:&nbsp;function(height,&nbsp;isAuto)&nbsp;{<a name="line_7030"></a></li>
<li id="line_7031" class="odd"><span class="lineNumber">&nbsp;7031&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_7031"></a></li>
<li id="line_7032" class="even"><span class="lineNumber">&nbsp;7032&nbsp;</span>	},<a name="line_7032"></a></li>
<li id="line_7033" class="odd"><span class="lineNumber">&nbsp;7033&nbsp;</span><a name="line_7033"></a></li>
<li id="line_7034" class="even"><span class="lineNumber">&nbsp;7034&nbsp;</span><a name="line_7034"></a></li>
<li id="line_7035" class="odd"><span class="lineNumber">&nbsp;7035&nbsp;</span>	/*&nbsp;Scroller<a name="line_7035"></a></li>
<li id="line_7036" class="even"><span class="lineNumber">&nbsp;7036&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_7036"></a></li>
<li id="line_7037" class="odd"><span class="lineNumber">&nbsp;7037&nbsp;</span><a name="line_7037"></a></li>
<li id="line_7038" class="even"><span class="lineNumber">&nbsp;7038&nbsp;</span><a name="line_7038"></a></li>
<li id="line_7039" class="odd"><span class="lineNumber">&nbsp;7039&nbsp;</span>	//&nbsp;Given&nbsp;the&nbsp;total&nbsp;height&nbsp;of&nbsp;the&nbsp;view,&nbsp;return&nbsp;the&nbsp;number&nbsp;of&nbsp;pixels&nbsp;that&nbsp;should&nbsp;be&nbsp;used&nbsp;for&nbsp;the&nbsp;scroller.<a name="line_7039"></a></li>
<li id="line_7040" class="even"><span class="lineNumber">&nbsp;7040&nbsp;</span>	//&nbsp;Utility&nbsp;for&nbsp;subclasses.<a name="line_7040"></a></li>
<li id="line_7041" class="odd"><span class="lineNumber">&nbsp;7041&nbsp;</span>	computeScrollerHeight:&nbsp;function(totalHeight)&nbsp;{<a name="line_7041"></a></li>
<li id="line_7042" class="even"><span class="lineNumber">&nbsp;7042&nbsp;</span>		var&nbsp;scrollerEl&nbsp;=&nbsp;this.scrollerEl;<a name="line_7042"></a></li>
<li id="line_7043" class="odd"><span class="lineNumber">&nbsp;7043&nbsp;</span>		var&nbsp;both;<a name="line_7043"></a></li>
<li id="line_7044" class="even"><span class="lineNumber">&nbsp;7044&nbsp;</span>		var&nbsp;otherHeight;&nbsp;//&nbsp;cumulative&nbsp;height&nbsp;of&nbsp;everything&nbsp;that&nbsp;is&nbsp;not&nbsp;the&nbsp;scrollerEl&nbsp;in&nbsp;the&nbsp;view&nbsp;(header+borders)<a name="line_7044"></a></li>
<li id="line_7045" class="odd"><span class="lineNumber">&nbsp;7045&nbsp;</span><a name="line_7045"></a></li>
<li id="line_7046" class="even"><span class="lineNumber">&nbsp;7046&nbsp;</span>		both&nbsp;=&nbsp;this.el.add(scrollerEl);<a name="line_7046"></a></li>
<li id="line_7047" class="odd"><span class="lineNumber">&nbsp;7047&nbsp;</span><a name="line_7047"></a></li>
<li id="line_7048" class="even"><span class="lineNumber">&nbsp;7048&nbsp;</span>		//&nbsp;fuckin&nbsp;IE8/9/10/11&nbsp;sometimes&nbsp;returns&nbsp;0&nbsp;for&nbsp;dimensions.&nbsp;this&nbsp;weird&nbsp;hack&nbsp;was&nbsp;the&nbsp;only&nbsp;thing&nbsp;that&nbsp;worked<a name="line_7048"></a></li>
<li id="line_7049" class="odd"><span class="lineNumber">&nbsp;7049&nbsp;</span>		both.css({<a name="line_7049"></a></li>
<li id="line_7050" class="even"><span class="lineNumber">&nbsp;7050&nbsp;</span>			position:&nbsp;'relative',&nbsp;//&nbsp;cause&nbsp;a&nbsp;reflow,&nbsp;which&nbsp;will&nbsp;force&nbsp;fresh&nbsp;dimension&nbsp;recalculation<a name="line_7050"></a></li>
<li id="line_7051" class="odd"><span class="lineNumber">&nbsp;7051&nbsp;</span>			left:&nbsp;-1&nbsp;//&nbsp;ensure&nbsp;reflow&nbsp;in&nbsp;case&nbsp;the&nbsp;el&nbsp;was&nbsp;already&nbsp;relative.&nbsp;negative&nbsp;is&nbsp;less&nbsp;likely&nbsp;to&nbsp;cause&nbsp;new&nbsp;scroll<a name="line_7051"></a></li>
<li id="line_7052" class="even"><span class="lineNumber">&nbsp;7052&nbsp;</span>		});<a name="line_7052"></a></li>
<li id="line_7053" class="odd"><span class="lineNumber">&nbsp;7053&nbsp;</span>		otherHeight&nbsp;=&nbsp;this.el.outerHeight()&nbsp;-&nbsp;scrollerEl.height();&nbsp;//&nbsp;grab&nbsp;the&nbsp;dimensions<a name="line_7053"></a></li>
<li id="line_7054" class="even"><span class="lineNumber">&nbsp;7054&nbsp;</span>		both.css({&nbsp;position:&nbsp;'',&nbsp;left:&nbsp;''&nbsp;});&nbsp;//&nbsp;undo&nbsp;hack<a name="line_7054"></a></li>
<li id="line_7055" class="odd"><span class="lineNumber">&nbsp;7055&nbsp;</span><a name="line_7055"></a></li>
<li id="line_7056" class="even"><span class="lineNumber">&nbsp;7056&nbsp;</span>		return&nbsp;totalHeight&nbsp;-&nbsp;otherHeight;<a name="line_7056"></a></li>
<li id="line_7057" class="odd"><span class="lineNumber">&nbsp;7057&nbsp;</span>	},<a name="line_7057"></a></li>
<li id="line_7058" class="even"><span class="lineNumber">&nbsp;7058&nbsp;</span><a name="line_7058"></a></li>
<li id="line_7059" class="odd"><span class="lineNumber">&nbsp;7059&nbsp;</span><a name="line_7059"></a></li>
<li id="line_7060" class="even"><span class="lineNumber">&nbsp;7060&nbsp;</span>	//&nbsp;Computes&nbsp;the&nbsp;initial&nbsp;pre-configured&nbsp;scroll&nbsp;state&nbsp;prior&nbsp;to&nbsp;allowing&nbsp;the&nbsp;user&nbsp;to&nbsp;change&nbsp;it.<a name="line_7060"></a></li>
<li id="line_7061" class="odd"><span class="lineNumber">&nbsp;7061&nbsp;</span>	//&nbsp;Given&nbsp;the&nbsp;scroll&nbsp;state&nbsp;from&nbsp;the&nbsp;previous&nbsp;rendering.&nbsp;If&nbsp;first&nbsp;time&nbsp;rendering,&nbsp;given&nbsp;null.<a name="line_7061"></a></li>
<li id="line_7062" class="even"><span class="lineNumber">&nbsp;7062&nbsp;</span>	computeInitialScroll:&nbsp;function(previousScrollState)&nbsp;{<a name="line_7062"></a></li>
<li id="line_7063" class="odd"><span class="lineNumber">&nbsp;7063&nbsp;</span>		return&nbsp;0;<a name="line_7063"></a></li>
<li id="line_7064" class="even"><span class="lineNumber">&nbsp;7064&nbsp;</span>	},<a name="line_7064"></a></li>
<li id="line_7065" class="odd"><span class="lineNumber">&nbsp;7065&nbsp;</span><a name="line_7065"></a></li>
<li id="line_7066" class="even"><span class="lineNumber">&nbsp;7066&nbsp;</span><a name="line_7066"></a></li>
<li id="line_7067" class="odd"><span class="lineNumber">&nbsp;7067&nbsp;</span>	//&nbsp;Retrieves&nbsp;the&nbsp;view's&nbsp;current&nbsp;natural&nbsp;scroll&nbsp;state.&nbsp;Can&nbsp;return&nbsp;an&nbsp;arbitrary&nbsp;format.<a name="line_7067"></a></li>
<li id="line_7068" class="even"><span class="lineNumber">&nbsp;7068&nbsp;</span>	queryScroll:&nbsp;function()&nbsp;{<a name="line_7068"></a></li>
<li id="line_7069" class="odd"><span class="lineNumber">&nbsp;7069&nbsp;</span>		if&nbsp;(this.scrollerEl)&nbsp;{<a name="line_7069"></a></li>
<li id="line_7070" class="even"><span class="lineNumber">&nbsp;7070&nbsp;</span>			return&nbsp;this.scrollerEl.scrollTop();&nbsp;//&nbsp;operates&nbsp;on&nbsp;scrollerEl&nbsp;by&nbsp;default<a name="line_7070"></a></li>
<li id="line_7071" class="odd"><span class="lineNumber">&nbsp;7071&nbsp;</span>		}<a name="line_7071"></a></li>
<li id="line_7072" class="even"><span class="lineNumber">&nbsp;7072&nbsp;</span>	},<a name="line_7072"></a></li>
<li id="line_7073" class="odd"><span class="lineNumber">&nbsp;7073&nbsp;</span><a name="line_7073"></a></li>
<li id="line_7074" class="even"><span class="lineNumber">&nbsp;7074&nbsp;</span><a name="line_7074"></a></li>
<li id="line_7075" class="odd"><span class="lineNumber">&nbsp;7075&nbsp;</span>	//&nbsp;Sets&nbsp;the&nbsp;view's&nbsp;scroll&nbsp;state.&nbsp;Will&nbsp;accept&nbsp;the&nbsp;same&nbsp;format&nbsp;computeInitialScroll&nbsp;and&nbsp;queryScroll&nbsp;produce.<a name="line_7075"></a></li>
<li id="line_7076" class="even"><span class="lineNumber">&nbsp;7076&nbsp;</span>	setScroll:&nbsp;function(scrollState)&nbsp;{<a name="line_7076"></a></li>
<li id="line_7077" class="odd"><span class="lineNumber">&nbsp;7077&nbsp;</span>		if&nbsp;(this.scrollerEl)&nbsp;{<a name="line_7077"></a></li>
<li id="line_7078" class="even"><span class="lineNumber">&nbsp;7078&nbsp;</span>			return&nbsp;this.scrollerEl.scrollTop(scrollState);&nbsp;//&nbsp;operates&nbsp;on&nbsp;scrollerEl&nbsp;by&nbsp;default<a name="line_7078"></a></li>
<li id="line_7079" class="odd"><span class="lineNumber">&nbsp;7079&nbsp;</span>		}<a name="line_7079"></a></li>
<li id="line_7080" class="even"><span class="lineNumber">&nbsp;7080&nbsp;</span>	},<a name="line_7080"></a></li>
<li id="line_7081" class="odd"><span class="lineNumber">&nbsp;7081&nbsp;</span><a name="line_7081"></a></li>
<li id="line_7082" class="even"><span class="lineNumber">&nbsp;7082&nbsp;</span><a name="line_7082"></a></li>
<li id="line_7083" class="odd"><span class="lineNumber">&nbsp;7083&nbsp;</span>	//&nbsp;Sets&nbsp;the&nbsp;scroll&nbsp;state,&nbsp;making&nbsp;sure&nbsp;to&nbsp;overcome&nbsp;any&nbsp;predefined&nbsp;scroll&nbsp;value&nbsp;the&nbsp;browser&nbsp;has&nbsp;in&nbsp;mind<a name="line_7083"></a></li>
<li id="line_7084" class="even"><span class="lineNumber">&nbsp;7084&nbsp;</span>	forceScroll:&nbsp;function(scrollState)&nbsp;{<a name="line_7084"></a></li>
<li id="line_7085" class="odd"><span class="lineNumber">&nbsp;7085&nbsp;</span>		var&nbsp;_this&nbsp;=&nbsp;this;<a name="line_7085"></a></li>
<li id="line_7086" class="even"><span class="lineNumber">&nbsp;7086&nbsp;</span><a name="line_7086"></a></li>
<li id="line_7087" class="odd"><span class="lineNumber">&nbsp;7087&nbsp;</span>		this.setScroll(scrollState);<a name="line_7087"></a></li>
<li id="line_7088" class="even"><span class="lineNumber">&nbsp;7088&nbsp;</span>		setTimeout(function()&nbsp;{<a name="line_7088"></a></li>
<li id="line_7089" class="odd"><span class="lineNumber">&nbsp;7089&nbsp;</span>			_this.setScroll(scrollState);<a name="line_7089"></a></li>
<li id="line_7090" class="even"><span class="lineNumber">&nbsp;7090&nbsp;</span>		},&nbsp;0);<a name="line_7090"></a></li>
<li id="line_7091" class="odd"><span class="lineNumber">&nbsp;7091&nbsp;</span>	},<a name="line_7091"></a></li>
<li id="line_7092" class="even"><span class="lineNumber">&nbsp;7092&nbsp;</span><a name="line_7092"></a></li>
<li id="line_7093" class="odd"><span class="lineNumber">&nbsp;7093&nbsp;</span><a name="line_7093"></a></li>
<li id="line_7094" class="even"><span class="lineNumber">&nbsp;7094&nbsp;</span>	/*&nbsp;Event&nbsp;Elements&nbsp;/&nbsp;Segments<a name="line_7094"></a></li>
<li id="line_7095" class="odd"><span class="lineNumber">&nbsp;7095&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_7095"></a></li>
<li id="line_7096" class="even"><span class="lineNumber">&nbsp;7096&nbsp;</span><a name="line_7096"></a></li>
<li id="line_7097" class="odd"><span class="lineNumber">&nbsp;7097&nbsp;</span><a name="line_7097"></a></li>
<li id="line_7098" class="even"><span class="lineNumber">&nbsp;7098&nbsp;</span>	//&nbsp;Does&nbsp;everything&nbsp;necessary&nbsp;to&nbsp;display&nbsp;the&nbsp;given&nbsp;events&nbsp;onto&nbsp;the&nbsp;current&nbsp;view<a name="line_7098"></a></li>
<li id="line_7099" class="odd"><span class="lineNumber">&nbsp;7099&nbsp;</span>	displayEvents:&nbsp;function(events)&nbsp;{<a name="line_7099"></a></li>
<li id="line_7100" class="even"><span class="lineNumber">&nbsp;7100&nbsp;</span>		var&nbsp;scrollState&nbsp;=&nbsp;this.queryScroll();<a name="line_7100"></a></li>
<li id="line_7101" class="odd"><span class="lineNumber">&nbsp;7101&nbsp;</span><a name="line_7101"></a></li>
<li id="line_7102" class="even"><span class="lineNumber">&nbsp;7102&nbsp;</span>		this.clearEvents();<a name="line_7102"></a></li>
<li id="line_7103" class="odd"><span class="lineNumber">&nbsp;7103&nbsp;</span>		this.renderEvents(events);<a name="line_7103"></a></li>
<li id="line_7104" class="even"><span class="lineNumber">&nbsp;7104&nbsp;</span>		this.isEventsRendered&nbsp;=&nbsp;true;<a name="line_7104"></a></li>
<li id="line_7105" class="odd"><span class="lineNumber">&nbsp;7105&nbsp;</span>		this.setScroll(scrollState);<a name="line_7105"></a></li>
<li id="line_7106" class="even"><span class="lineNumber">&nbsp;7106&nbsp;</span>		this.triggerEventRender();<a name="line_7106"></a></li>
<li id="line_7107" class="odd"><span class="lineNumber">&nbsp;7107&nbsp;</span>	},<a name="line_7107"></a></li>
<li id="line_7108" class="even"><span class="lineNumber">&nbsp;7108&nbsp;</span><a name="line_7108"></a></li>
<li id="line_7109" class="odd"><span class="lineNumber">&nbsp;7109&nbsp;</span><a name="line_7109"></a></li>
<li id="line_7110" class="even"><span class="lineNumber">&nbsp;7110&nbsp;</span>	//&nbsp;Does&nbsp;everything&nbsp;necessary&nbsp;to&nbsp;clear&nbsp;the&nbsp;view's&nbsp;currently-rendered&nbsp;events<a name="line_7110"></a></li>
<li id="line_7111" class="odd"><span class="lineNumber">&nbsp;7111&nbsp;</span>	clearEvents:&nbsp;function()&nbsp;{<a name="line_7111"></a></li>
<li id="line_7112" class="even"><span class="lineNumber">&nbsp;7112&nbsp;</span>		if&nbsp;(this.isEventsRendered)&nbsp;{<a name="line_7112"></a></li>
<li id="line_7113" class="odd"><span class="lineNumber">&nbsp;7113&nbsp;</span>			this.triggerEventUnrender();<a name="line_7113"></a></li>
<li id="line_7114" class="even"><span class="lineNumber">&nbsp;7114&nbsp;</span>			if&nbsp;(this.destroyEvents)&nbsp;{<a name="line_7114"></a></li>
<li id="line_7115" class="odd"><span class="lineNumber">&nbsp;7115&nbsp;</span>				this.destroyEvents();&nbsp;//&nbsp;TODO:&nbsp;deprecate<a name="line_7115"></a></li>
<li id="line_7116" class="even"><span class="lineNumber">&nbsp;7116&nbsp;</span>			}<a name="line_7116"></a></li>
<li id="line_7117" class="odd"><span class="lineNumber">&nbsp;7117&nbsp;</span>			this.unrenderEvents();<a name="line_7117"></a></li>
<li id="line_7118" class="even"><span class="lineNumber">&nbsp;7118&nbsp;</span>			this.isEventsRendered&nbsp;=&nbsp;false;<a name="line_7118"></a></li>
<li id="line_7119" class="odd"><span class="lineNumber">&nbsp;7119&nbsp;</span>		}<a name="line_7119"></a></li>
<li id="line_7120" class="even"><span class="lineNumber">&nbsp;7120&nbsp;</span>	},<a name="line_7120"></a></li>
<li id="line_7121" class="odd"><span class="lineNumber">&nbsp;7121&nbsp;</span><a name="line_7121"></a></li>
<li id="line_7122" class="even"><span class="lineNumber">&nbsp;7122&nbsp;</span><a name="line_7122"></a></li>
<li id="line_7123" class="odd"><span class="lineNumber">&nbsp;7123&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;events&nbsp;onto&nbsp;the&nbsp;view.<a name="line_7123"></a></li>
<li id="line_7124" class="even"><span class="lineNumber">&nbsp;7124&nbsp;</span>	renderEvents:&nbsp;function(events)&nbsp;{<a name="line_7124"></a></li>
<li id="line_7125" class="odd"><span class="lineNumber">&nbsp;7125&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_7125"></a></li>
<li id="line_7126" class="even"><span class="lineNumber">&nbsp;7126&nbsp;</span>	},<a name="line_7126"></a></li>
<li id="line_7127" class="odd"><span class="lineNumber">&nbsp;7127&nbsp;</span><a name="line_7127"></a></li>
<li id="line_7128" class="even"><span class="lineNumber">&nbsp;7128&nbsp;</span><a name="line_7128"></a></li>
<li id="line_7129" class="odd"><span class="lineNumber">&nbsp;7129&nbsp;</span>	//&nbsp;Removes&nbsp;event&nbsp;elements&nbsp;from&nbsp;the&nbsp;view.<a name="line_7129"></a></li>
<li id="line_7130" class="even"><span class="lineNumber">&nbsp;7130&nbsp;</span>	unrenderEvents:&nbsp;function()&nbsp;{<a name="line_7130"></a></li>
<li id="line_7131" class="odd"><span class="lineNumber">&nbsp;7131&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_7131"></a></li>
<li id="line_7132" class="even"><span class="lineNumber">&nbsp;7132&nbsp;</span>	},<a name="line_7132"></a></li>
<li id="line_7133" class="odd"><span class="lineNumber">&nbsp;7133&nbsp;</span><a name="line_7133"></a></li>
<li id="line_7134" class="even"><span class="lineNumber">&nbsp;7134&nbsp;</span><a name="line_7134"></a></li>
<li id="line_7135" class="odd"><span class="lineNumber">&nbsp;7135&nbsp;</span>	//&nbsp;Signals&nbsp;that&nbsp;all&nbsp;events&nbsp;have&nbsp;been&nbsp;rendered<a name="line_7135"></a></li>
<li id="line_7136" class="even"><span class="lineNumber">&nbsp;7136&nbsp;</span>	triggerEventRender:&nbsp;function()&nbsp;{<a name="line_7136"></a></li>
<li id="line_7137" class="odd"><span class="lineNumber">&nbsp;7137&nbsp;</span>		this.renderedEventSegEach(function(seg)&nbsp;{<a name="line_7137"></a></li>
<li id="line_7138" class="even"><span class="lineNumber">&nbsp;7138&nbsp;</span>			this.trigger('eventAfterRender',&nbsp;seg.event,&nbsp;seg.event,&nbsp;seg.el);<a name="line_7138"></a></li>
<li id="line_7139" class="odd"><span class="lineNumber">&nbsp;7139&nbsp;</span>		});<a name="line_7139"></a></li>
<li id="line_7140" class="even"><span class="lineNumber">&nbsp;7140&nbsp;</span>		this.trigger('eventAfterAllRender');<a name="line_7140"></a></li>
<li id="line_7141" class="odd"><span class="lineNumber">&nbsp;7141&nbsp;</span>	},<a name="line_7141"></a></li>
<li id="line_7142" class="even"><span class="lineNumber">&nbsp;7142&nbsp;</span><a name="line_7142"></a></li>
<li id="line_7143" class="odd"><span class="lineNumber">&nbsp;7143&nbsp;</span><a name="line_7143"></a></li>
<li id="line_7144" class="even"><span class="lineNumber">&nbsp;7144&nbsp;</span>	//&nbsp;Signals&nbsp;that&nbsp;all&nbsp;event&nbsp;elements&nbsp;are&nbsp;about&nbsp;to&nbsp;be&nbsp;removed<a name="line_7144"></a></li>
<li id="line_7145" class="odd"><span class="lineNumber">&nbsp;7145&nbsp;</span>	triggerEventUnrender:&nbsp;function()&nbsp;{<a name="line_7145"></a></li>
<li id="line_7146" class="even"><span class="lineNumber">&nbsp;7146&nbsp;</span>		this.renderedEventSegEach(function(seg)&nbsp;{<a name="line_7146"></a></li>
<li id="line_7147" class="odd"><span class="lineNumber">&nbsp;7147&nbsp;</span>			this.trigger('eventDestroy',&nbsp;seg.event,&nbsp;seg.event,&nbsp;seg.el);<a name="line_7147"></a></li>
<li id="line_7148" class="even"><span class="lineNumber">&nbsp;7148&nbsp;</span>		});<a name="line_7148"></a></li>
<li id="line_7149" class="odd"><span class="lineNumber">&nbsp;7149&nbsp;</span>	},<a name="line_7149"></a></li>
<li id="line_7150" class="even"><span class="lineNumber">&nbsp;7150&nbsp;</span><a name="line_7150"></a></li>
<li id="line_7151" class="odd"><span class="lineNumber">&nbsp;7151&nbsp;</span><a name="line_7151"></a></li>
<li id="line_7152" class="even"><span class="lineNumber">&nbsp;7152&nbsp;</span>	//&nbsp;Given&nbsp;an&nbsp;event&nbsp;and&nbsp;the&nbsp;default&nbsp;element&nbsp;used&nbsp;for&nbsp;rendering,&nbsp;returns&nbsp;the&nbsp;element&nbsp;that&nbsp;should&nbsp;actually&nbsp;be&nbsp;used.<a name="line_7152"></a></li>
<li id="line_7153" class="odd"><span class="lineNumber">&nbsp;7153&nbsp;</span>	//&nbsp;Basically&nbsp;runs&nbsp;events&nbsp;and&nbsp;elements&nbsp;through&nbsp;the&nbsp;eventRender&nbsp;hook.<a name="line_7153"></a></li>
<li id="line_7154" class="even"><span class="lineNumber">&nbsp;7154&nbsp;</span>	resolveEventEl:&nbsp;function(event,&nbsp;el)&nbsp;{<a name="line_7154"></a></li>
<li id="line_7155" class="odd"><span class="lineNumber">&nbsp;7155&nbsp;</span>		var&nbsp;custom&nbsp;=&nbsp;this.trigger('eventRender',&nbsp;event,&nbsp;event,&nbsp;el);<a name="line_7155"></a></li>
<li id="line_7156" class="even"><span class="lineNumber">&nbsp;7156&nbsp;</span><a name="line_7156"></a></li>
<li id="line_7157" class="odd"><span class="lineNumber">&nbsp;7157&nbsp;</span>		if&nbsp;(custom&nbsp;===&nbsp;false)&nbsp;{&nbsp;//&nbsp;means&nbsp;don't&nbsp;render&nbsp;at&nbsp;all<a name="line_7157"></a></li>
<li id="line_7158" class="even"><span class="lineNumber">&nbsp;7158&nbsp;</span>			el&nbsp;=&nbsp;null;<a name="line_7158"></a></li>
<li id="line_7159" class="odd"><span class="lineNumber">&nbsp;7159&nbsp;</span>		}<a name="line_7159"></a></li>
<li id="line_7160" class="even"><span class="lineNumber">&nbsp;7160&nbsp;</span>		else&nbsp;if&nbsp;(custom&nbsp;&amp;&amp;&nbsp;custom&nbsp;!==&nbsp;true)&nbsp;{<a name="line_7160"></a></li>
<li id="line_7161" class="odd"><span class="lineNumber">&nbsp;7161&nbsp;</span>			el&nbsp;=&nbsp;$(custom);<a name="line_7161"></a></li>
<li id="line_7162" class="even"><span class="lineNumber">&nbsp;7162&nbsp;</span>		}<a name="line_7162"></a></li>
<li id="line_7163" class="odd"><span class="lineNumber">&nbsp;7163&nbsp;</span><a name="line_7163"></a></li>
<li id="line_7164" class="even"><span class="lineNumber">&nbsp;7164&nbsp;</span>		return&nbsp;el;<a name="line_7164"></a></li>
<li id="line_7165" class="odd"><span class="lineNumber">&nbsp;7165&nbsp;</span>	},<a name="line_7165"></a></li>
<li id="line_7166" class="even"><span class="lineNumber">&nbsp;7166&nbsp;</span><a name="line_7166"></a></li>
<li id="line_7167" class="odd"><span class="lineNumber">&nbsp;7167&nbsp;</span><a name="line_7167"></a></li>
<li id="line_7168" class="even"><span class="lineNumber">&nbsp;7168&nbsp;</span>	//&nbsp;Hides&nbsp;all&nbsp;rendered&nbsp;event&nbsp;segments&nbsp;linked&nbsp;to&nbsp;the&nbsp;given&nbsp;event<a name="line_7168"></a></li>
<li id="line_7169" class="odd"><span class="lineNumber">&nbsp;7169&nbsp;</span>	showEvent:&nbsp;function(event)&nbsp;{<a name="line_7169"></a></li>
<li id="line_7170" class="even"><span class="lineNumber">&nbsp;7170&nbsp;</span>		this.renderedEventSegEach(function(seg)&nbsp;{<a name="line_7170"></a></li>
<li id="line_7171" class="odd"><span class="lineNumber">&nbsp;7171&nbsp;</span>			seg.el.css('visibility',&nbsp;'');<a name="line_7171"></a></li>
<li id="line_7172" class="even"><span class="lineNumber">&nbsp;7172&nbsp;</span>		},&nbsp;event);<a name="line_7172"></a></li>
<li id="line_7173" class="odd"><span class="lineNumber">&nbsp;7173&nbsp;</span>	},<a name="line_7173"></a></li>
<li id="line_7174" class="even"><span class="lineNumber">&nbsp;7174&nbsp;</span><a name="line_7174"></a></li>
<li id="line_7175" class="odd"><span class="lineNumber">&nbsp;7175&nbsp;</span><a name="line_7175"></a></li>
<li id="line_7176" class="even"><span class="lineNumber">&nbsp;7176&nbsp;</span>	//&nbsp;Shows&nbsp;all&nbsp;rendered&nbsp;event&nbsp;segments&nbsp;linked&nbsp;to&nbsp;the&nbsp;given&nbsp;event<a name="line_7176"></a></li>
<li id="line_7177" class="odd"><span class="lineNumber">&nbsp;7177&nbsp;</span>	hideEvent:&nbsp;function(event)&nbsp;{<a name="line_7177"></a></li>
<li id="line_7178" class="even"><span class="lineNumber">&nbsp;7178&nbsp;</span>		this.renderedEventSegEach(function(seg)&nbsp;{<a name="line_7178"></a></li>
<li id="line_7179" class="odd"><span class="lineNumber">&nbsp;7179&nbsp;</span>			seg.el.css('visibility',&nbsp;'hidden');<a name="line_7179"></a></li>
<li id="line_7180" class="even"><span class="lineNumber">&nbsp;7180&nbsp;</span>		},&nbsp;event);<a name="line_7180"></a></li>
<li id="line_7181" class="odd"><span class="lineNumber">&nbsp;7181&nbsp;</span>	},<a name="line_7181"></a></li>
<li id="line_7182" class="even"><span class="lineNumber">&nbsp;7182&nbsp;</span><a name="line_7182"></a></li>
<li id="line_7183" class="odd"><span class="lineNumber">&nbsp;7183&nbsp;</span><a name="line_7183"></a></li>
<li id="line_7184" class="even"><span class="lineNumber">&nbsp;7184&nbsp;</span>	//&nbsp;Iterates&nbsp;through&nbsp;event&nbsp;segments&nbsp;that&nbsp;have&nbsp;been&nbsp;rendered&nbsp;(have&nbsp;an&nbsp;el).&nbsp;Goes&nbsp;through&nbsp;all&nbsp;by&nbsp;default.<a name="line_7184"></a></li>
<li id="line_7185" class="odd"><span class="lineNumber">&nbsp;7185&nbsp;</span>	//&nbsp;If&nbsp;the&nbsp;optional&nbsp;`event`&nbsp;argument&nbsp;is&nbsp;specified,&nbsp;only&nbsp;iterates&nbsp;through&nbsp;segments&nbsp;linked&nbsp;to&nbsp;that&nbsp;event.<a name="line_7185"></a></li>
<li id="line_7186" class="even"><span class="lineNumber">&nbsp;7186&nbsp;</span>	//&nbsp;The&nbsp;`this`&nbsp;value&nbsp;of&nbsp;the&nbsp;callback&nbsp;function&nbsp;will&nbsp;be&nbsp;the&nbsp;view.<a name="line_7186"></a></li>
<li id="line_7187" class="odd"><span class="lineNumber">&nbsp;7187&nbsp;</span>	renderedEventSegEach:&nbsp;function(func,&nbsp;event)&nbsp;{<a name="line_7187"></a></li>
<li id="line_7188" class="even"><span class="lineNumber">&nbsp;7188&nbsp;</span>		var&nbsp;segs&nbsp;=&nbsp;this.getEventSegs();<a name="line_7188"></a></li>
<li id="line_7189" class="odd"><span class="lineNumber">&nbsp;7189&nbsp;</span>		var&nbsp;i;<a name="line_7189"></a></li>
<li id="line_7190" class="even"><span class="lineNumber">&nbsp;7190&nbsp;</span><a name="line_7190"></a></li>
<li id="line_7191" class="odd"><span class="lineNumber">&nbsp;7191&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;segs.length;&nbsp;i++)&nbsp;{<a name="line_7191"></a></li>
<li id="line_7192" class="even"><span class="lineNumber">&nbsp;7192&nbsp;</span>			if&nbsp;(!event&nbsp;||&nbsp;segs[i].event._id&nbsp;===&nbsp;event._id)&nbsp;{<a name="line_7192"></a></li>
<li id="line_7193" class="odd"><span class="lineNumber">&nbsp;7193&nbsp;</span>				if&nbsp;(segs[i].el)&nbsp;{<a name="line_7193"></a></li>
<li id="line_7194" class="even"><span class="lineNumber">&nbsp;7194&nbsp;</span>					func.call(this,&nbsp;segs[i]);<a name="line_7194"></a></li>
<li id="line_7195" class="odd"><span class="lineNumber">&nbsp;7195&nbsp;</span>				}<a name="line_7195"></a></li>
<li id="line_7196" class="even"><span class="lineNumber">&nbsp;7196&nbsp;</span>			}<a name="line_7196"></a></li>
<li id="line_7197" class="odd"><span class="lineNumber">&nbsp;7197&nbsp;</span>		}<a name="line_7197"></a></li>
<li id="line_7198" class="even"><span class="lineNumber">&nbsp;7198&nbsp;</span>	},<a name="line_7198"></a></li>
<li id="line_7199" class="odd"><span class="lineNumber">&nbsp;7199&nbsp;</span><a name="line_7199"></a></li>
<li id="line_7200" class="even"><span class="lineNumber">&nbsp;7200&nbsp;</span><a name="line_7200"></a></li>
<li id="line_7201" class="odd"><span class="lineNumber">&nbsp;7201&nbsp;</span>	//&nbsp;Retrieves&nbsp;all&nbsp;the&nbsp;rendered&nbsp;segment&nbsp;objects&nbsp;for&nbsp;the&nbsp;view<a name="line_7201"></a></li>
<li id="line_7202" class="even"><span class="lineNumber">&nbsp;7202&nbsp;</span>	getEventSegs:&nbsp;function()&nbsp;{<a name="line_7202"></a></li>
<li id="line_7203" class="odd"><span class="lineNumber">&nbsp;7203&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_7203"></a></li>
<li id="line_7204" class="even"><span class="lineNumber">&nbsp;7204&nbsp;</span>		return&nbsp;[];<a name="line_7204"></a></li>
<li id="line_7205" class="odd"><span class="lineNumber">&nbsp;7205&nbsp;</span>	},<a name="line_7205"></a></li>
<li id="line_7206" class="even"><span class="lineNumber">&nbsp;7206&nbsp;</span><a name="line_7206"></a></li>
<li id="line_7207" class="odd"><span class="lineNumber">&nbsp;7207&nbsp;</span><a name="line_7207"></a></li>
<li id="line_7208" class="even"><span class="lineNumber">&nbsp;7208&nbsp;</span>	/*&nbsp;Event&nbsp;Drag-n-Drop<a name="line_7208"></a></li>
<li id="line_7209" class="odd"><span class="lineNumber">&nbsp;7209&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_7209"></a></li>
<li id="line_7210" class="even"><span class="lineNumber">&nbsp;7210&nbsp;</span><a name="line_7210"></a></li>
<li id="line_7211" class="odd"><span class="lineNumber">&nbsp;7211&nbsp;</span><a name="line_7211"></a></li>
<li id="line_7212" class="even"><span class="lineNumber">&nbsp;7212&nbsp;</span>	//&nbsp;Computes&nbsp;if&nbsp;the&nbsp;given&nbsp;event&nbsp;is&nbsp;allowed&nbsp;to&nbsp;be&nbsp;dragged&nbsp;by&nbsp;the&nbsp;user<a name="line_7212"></a></li>
<li id="line_7213" class="odd"><span class="lineNumber">&nbsp;7213&nbsp;</span>	isEventDraggable:&nbsp;function(event)&nbsp;{<a name="line_7213"></a></li>
<li id="line_7214" class="even"><span class="lineNumber">&nbsp;7214&nbsp;</span>		var&nbsp;source&nbsp;=&nbsp;event.source&nbsp;||&nbsp;{};<a name="line_7214"></a></li>
<li id="line_7215" class="odd"><span class="lineNumber">&nbsp;7215&nbsp;</span><a name="line_7215"></a></li>
<li id="line_7216" class="even"><span class="lineNumber">&nbsp;7216&nbsp;</span>		return&nbsp;firstDefined(<a name="line_7216"></a></li>
<li id="line_7217" class="odd"><span class="lineNumber">&nbsp;7217&nbsp;</span>			event.startEditable,<a name="line_7217"></a></li>
<li id="line_7218" class="even"><span class="lineNumber">&nbsp;7218&nbsp;</span>			source.startEditable,<a name="line_7218"></a></li>
<li id="line_7219" class="odd"><span class="lineNumber">&nbsp;7219&nbsp;</span>			this.opt('eventStartEditable'),<a name="line_7219"></a></li>
<li id="line_7220" class="even"><span class="lineNumber">&nbsp;7220&nbsp;</span>			event.editable,<a name="line_7220"></a></li>
<li id="line_7221" class="odd"><span class="lineNumber">&nbsp;7221&nbsp;</span>			source.editable,<a name="line_7221"></a></li>
<li id="line_7222" class="even"><span class="lineNumber">&nbsp;7222&nbsp;</span>			this.opt('editable')<a name="line_7222"></a></li>
<li id="line_7223" class="odd"><span class="lineNumber">&nbsp;7223&nbsp;</span>		);<a name="line_7223"></a></li>
<li id="line_7224" class="even"><span class="lineNumber">&nbsp;7224&nbsp;</span>	},<a name="line_7224"></a></li>
<li id="line_7225" class="odd"><span class="lineNumber">&nbsp;7225&nbsp;</span><a name="line_7225"></a></li>
<li id="line_7226" class="even"><span class="lineNumber">&nbsp;7226&nbsp;</span><a name="line_7226"></a></li>
<li id="line_7227" class="odd"><span class="lineNumber">&nbsp;7227&nbsp;</span>	//&nbsp;Must&nbsp;be&nbsp;called&nbsp;when&nbsp;an&nbsp;event&nbsp;in&nbsp;the&nbsp;view&nbsp;is&nbsp;dropped&nbsp;onto&nbsp;new&nbsp;location.<a name="line_7227"></a></li>
<li id="line_7228" class="even"><span class="lineNumber">&nbsp;7228&nbsp;</span>	//&nbsp;`dropLocation`&nbsp;is&nbsp;an&nbsp;object&nbsp;that&nbsp;contains&nbsp;the&nbsp;new&nbsp;start/end/allDay&nbsp;values&nbsp;for&nbsp;the&nbsp;event.<a name="line_7228"></a></li>
<li id="line_7229" class="odd"><span class="lineNumber">&nbsp;7229&nbsp;</span>	reportEventDrop:&nbsp;function(event,&nbsp;dropLocation,&nbsp;largeUnit,&nbsp;el,&nbsp;ev)&nbsp;{<a name="line_7229"></a></li>
<li id="line_7230" class="even"><span class="lineNumber">&nbsp;7230&nbsp;</span>		var&nbsp;calendar&nbsp;=&nbsp;this.calendar;<a name="line_7230"></a></li>
<li id="line_7231" class="odd"><span class="lineNumber">&nbsp;7231&nbsp;</span>		var&nbsp;mutateResult&nbsp;=&nbsp;calendar.mutateEvent(event,&nbsp;dropLocation,&nbsp;largeUnit);<a name="line_7231"></a></li>
<li id="line_7232" class="even"><span class="lineNumber">&nbsp;7232&nbsp;</span>		var&nbsp;undoFunc&nbsp;=&nbsp;function()&nbsp;{<a name="line_7232"></a></li>
<li id="line_7233" class="odd"><span class="lineNumber">&nbsp;7233&nbsp;</span>			mutateResult.undo();<a name="line_7233"></a></li>
<li id="line_7234" class="even"><span class="lineNumber">&nbsp;7234&nbsp;</span>			calendar.reportEventChange();<a name="line_7234"></a></li>
<li id="line_7235" class="odd"><span class="lineNumber">&nbsp;7235&nbsp;</span>		};<a name="line_7235"></a></li>
<li id="line_7236" class="even"><span class="lineNumber">&nbsp;7236&nbsp;</span><a name="line_7236"></a></li>
<li id="line_7237" class="odd"><span class="lineNumber">&nbsp;7237&nbsp;</span>		this.triggerEventDrop(event,&nbsp;mutateResult.dateDelta,&nbsp;undoFunc,&nbsp;el,&nbsp;ev);<a name="line_7237"></a></li>
<li id="line_7238" class="even"><span class="lineNumber">&nbsp;7238&nbsp;</span>		calendar.reportEventChange();&nbsp;//&nbsp;will&nbsp;rerender&nbsp;events<a name="line_7238"></a></li>
<li id="line_7239" class="odd"><span class="lineNumber">&nbsp;7239&nbsp;</span>	},<a name="line_7239"></a></li>
<li id="line_7240" class="even"><span class="lineNumber">&nbsp;7240&nbsp;</span><a name="line_7240"></a></li>
<li id="line_7241" class="odd"><span class="lineNumber">&nbsp;7241&nbsp;</span><a name="line_7241"></a></li>
<li id="line_7242" class="even"><span class="lineNumber">&nbsp;7242&nbsp;</span>	//&nbsp;Triggers&nbsp;event-drop&nbsp;handlers&nbsp;that&nbsp;have&nbsp;subscribed&nbsp;via&nbsp;the&nbsp;API<a name="line_7242"></a></li>
<li id="line_7243" class="odd"><span class="lineNumber">&nbsp;7243&nbsp;</span>	triggerEventDrop:&nbsp;function(event,&nbsp;dateDelta,&nbsp;undoFunc,&nbsp;el,&nbsp;ev)&nbsp;{<a name="line_7243"></a></li>
<li id="line_7244" class="even"><span class="lineNumber">&nbsp;7244&nbsp;</span>		this.trigger('eventDrop',&nbsp;el[0],&nbsp;event,&nbsp;dateDelta,&nbsp;undoFunc,&nbsp;ev,&nbsp;{});&nbsp;//&nbsp;{}&nbsp;=&nbsp;jqui&nbsp;dummy<a name="line_7244"></a></li>
<li id="line_7245" class="odd"><span class="lineNumber">&nbsp;7245&nbsp;</span>	},<a name="line_7245"></a></li>
<li id="line_7246" class="even"><span class="lineNumber">&nbsp;7246&nbsp;</span><a name="line_7246"></a></li>
<li id="line_7247" class="odd"><span class="lineNumber">&nbsp;7247&nbsp;</span><a name="line_7247"></a></li>
<li id="line_7248" class="even"><span class="lineNumber">&nbsp;7248&nbsp;</span>	/*&nbsp;External&nbsp;Element&nbsp;Drag-n-Drop<a name="line_7248"></a></li>
<li id="line_7249" class="odd"><span class="lineNumber">&nbsp;7249&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_7249"></a></li>
<li id="line_7250" class="even"><span class="lineNumber">&nbsp;7250&nbsp;</span><a name="line_7250"></a></li>
<li id="line_7251" class="odd"><span class="lineNumber">&nbsp;7251&nbsp;</span><a name="line_7251"></a></li>
<li id="line_7252" class="even"><span class="lineNumber">&nbsp;7252&nbsp;</span>	//&nbsp;Must&nbsp;be&nbsp;called&nbsp;when&nbsp;an&nbsp;external&nbsp;element,&nbsp;via&nbsp;jQuery&nbsp;UI,&nbsp;has&nbsp;been&nbsp;dropped&nbsp;onto&nbsp;the&nbsp;calendar.<a name="line_7252"></a></li>
<li id="line_7253" class="odd"><span class="lineNumber">&nbsp;7253&nbsp;</span>	//&nbsp;`meta`&nbsp;is&nbsp;the&nbsp;parsed&nbsp;data&nbsp;that&nbsp;has&nbsp;been&nbsp;embedded&nbsp;into&nbsp;the&nbsp;dragging&nbsp;event.<a name="line_7253"></a></li>
<li id="line_7254" class="even"><span class="lineNumber">&nbsp;7254&nbsp;</span>	//&nbsp;`dropLocation`&nbsp;is&nbsp;an&nbsp;object&nbsp;that&nbsp;contains&nbsp;the&nbsp;new&nbsp;start/end/allDay&nbsp;values&nbsp;for&nbsp;the&nbsp;event.<a name="line_7254"></a></li>
<li id="line_7255" class="odd"><span class="lineNumber">&nbsp;7255&nbsp;</span>	reportExternalDrop:&nbsp;function(meta,&nbsp;dropLocation,&nbsp;el,&nbsp;ev,&nbsp;ui)&nbsp;{<a name="line_7255"></a></li>
<li id="line_7256" class="even"><span class="lineNumber">&nbsp;7256&nbsp;</span>		var&nbsp;eventProps&nbsp;=&nbsp;meta.eventProps;<a name="line_7256"></a></li>
<li id="line_7257" class="odd"><span class="lineNumber">&nbsp;7257&nbsp;</span>		var&nbsp;eventInput;<a name="line_7257"></a></li>
<li id="line_7258" class="even"><span class="lineNumber">&nbsp;7258&nbsp;</span>		var&nbsp;event;<a name="line_7258"></a></li>
<li id="line_7259" class="odd"><span class="lineNumber">&nbsp;7259&nbsp;</span><a name="line_7259"></a></li>
<li id="line_7260" class="even"><span class="lineNumber">&nbsp;7260&nbsp;</span>		//&nbsp;Try&nbsp;to&nbsp;build&nbsp;an&nbsp;event&nbsp;object&nbsp;and&nbsp;render&nbsp;it.&nbsp;TODO:&nbsp;decouple&nbsp;the&nbsp;two<a name="line_7260"></a></li>
<li id="line_7261" class="odd"><span class="lineNumber">&nbsp;7261&nbsp;</span>		if&nbsp;(eventProps)&nbsp;{<a name="line_7261"></a></li>
<li id="line_7262" class="even"><span class="lineNumber">&nbsp;7262&nbsp;</span>			eventInput&nbsp;=&nbsp;$.extend({},&nbsp;eventProps,&nbsp;dropLocation);<a name="line_7262"></a></li>
<li id="line_7263" class="odd"><span class="lineNumber">&nbsp;7263&nbsp;</span>			event&nbsp;=&nbsp;this.calendar.renderEvent(eventInput,&nbsp;meta.stick)[0];&nbsp;//&nbsp;renderEvent&nbsp;returns&nbsp;an&nbsp;array<a name="line_7263"></a></li>
<li id="line_7264" class="even"><span class="lineNumber">&nbsp;7264&nbsp;</span>		}<a name="line_7264"></a></li>
<li id="line_7265" class="odd"><span class="lineNumber">&nbsp;7265&nbsp;</span><a name="line_7265"></a></li>
<li id="line_7266" class="even"><span class="lineNumber">&nbsp;7266&nbsp;</span>		this.triggerExternalDrop(event,&nbsp;dropLocation,&nbsp;el,&nbsp;ev,&nbsp;ui);<a name="line_7266"></a></li>
<li id="line_7267" class="odd"><span class="lineNumber">&nbsp;7267&nbsp;</span>	},<a name="line_7267"></a></li>
<li id="line_7268" class="even"><span class="lineNumber">&nbsp;7268&nbsp;</span><a name="line_7268"></a></li>
<li id="line_7269" class="odd"><span class="lineNumber">&nbsp;7269&nbsp;</span><a name="line_7269"></a></li>
<li id="line_7270" class="even"><span class="lineNumber">&nbsp;7270&nbsp;</span>	//&nbsp;Triggers&nbsp;external-drop&nbsp;handlers&nbsp;that&nbsp;have&nbsp;subscribed&nbsp;via&nbsp;the&nbsp;API<a name="line_7270"></a></li>
<li id="line_7271" class="odd"><span class="lineNumber">&nbsp;7271&nbsp;</span>	triggerExternalDrop:&nbsp;function(event,&nbsp;dropLocation,&nbsp;el,&nbsp;ev,&nbsp;ui)&nbsp;{<a name="line_7271"></a></li>
<li id="line_7272" class="even"><span class="lineNumber">&nbsp;7272&nbsp;</span><a name="line_7272"></a></li>
<li id="line_7273" class="odd"><span class="lineNumber">&nbsp;7273&nbsp;</span>		//&nbsp;trigger&nbsp;'drop'&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;element&nbsp;represents&nbsp;an&nbsp;event<a name="line_7273"></a></li>
<li id="line_7274" class="even"><span class="lineNumber">&nbsp;7274&nbsp;</span>		this.trigger('drop',&nbsp;el[0],&nbsp;dropLocation.start,&nbsp;ev,&nbsp;ui);<a name="line_7274"></a></li>
<li id="line_7275" class="odd"><span class="lineNumber">&nbsp;7275&nbsp;</span><a name="line_7275"></a></li>
<li id="line_7276" class="even"><span class="lineNumber">&nbsp;7276&nbsp;</span>		if&nbsp;(event)&nbsp;{<a name="line_7276"></a></li>
<li id="line_7277" class="odd"><span class="lineNumber">&nbsp;7277&nbsp;</span>			this.trigger('eventReceive',&nbsp;null,&nbsp;event);&nbsp;//&nbsp;signal&nbsp;an&nbsp;external&nbsp;event&nbsp;landed<a name="line_7277"></a></li>
<li id="line_7278" class="even"><span class="lineNumber">&nbsp;7278&nbsp;</span>		}<a name="line_7278"></a></li>
<li id="line_7279" class="odd"><span class="lineNumber">&nbsp;7279&nbsp;</span>	},<a name="line_7279"></a></li>
<li id="line_7280" class="even"><span class="lineNumber">&nbsp;7280&nbsp;</span><a name="line_7280"></a></li>
<li id="line_7281" class="odd"><span class="lineNumber">&nbsp;7281&nbsp;</span><a name="line_7281"></a></li>
<li id="line_7282" class="even"><span class="lineNumber">&nbsp;7282&nbsp;</span>	/*&nbsp;Drag-n-Drop&nbsp;Rendering&nbsp;(for&nbsp;both&nbsp;events&nbsp;and&nbsp;external&nbsp;elements)<a name="line_7282"></a></li>
<li id="line_7283" class="odd"><span class="lineNumber">&nbsp;7283&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_7283"></a></li>
<li id="line_7284" class="even"><span class="lineNumber">&nbsp;7284&nbsp;</span><a name="line_7284"></a></li>
<li id="line_7285" class="odd"><span class="lineNumber">&nbsp;7285&nbsp;</span><a name="line_7285"></a></li>
<li id="line_7286" class="even"><span class="lineNumber">&nbsp;7286&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;a&nbsp;event&nbsp;or&nbsp;external-element&nbsp;drag&nbsp;over&nbsp;the&nbsp;given&nbsp;drop&nbsp;zone.<a name="line_7286"></a></li>
<li id="line_7287" class="odd"><span class="lineNumber">&nbsp;7287&nbsp;</span>	//&nbsp;If&nbsp;an&nbsp;external-element,&nbsp;seg&nbsp;will&nbsp;be&nbsp;`null`<a name="line_7287"></a></li>
<li id="line_7288" class="even"><span class="lineNumber">&nbsp;7288&nbsp;</span>	renderDrag:&nbsp;function(dropLocation,&nbsp;seg)&nbsp;{<a name="line_7288"></a></li>
<li id="line_7289" class="odd"><span class="lineNumber">&nbsp;7289&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_7289"></a></li>
<li id="line_7290" class="even"><span class="lineNumber">&nbsp;7290&nbsp;</span>	},<a name="line_7290"></a></li>
<li id="line_7291" class="odd"><span class="lineNumber">&nbsp;7291&nbsp;</span><a name="line_7291"></a></li>
<li id="line_7292" class="even"><span class="lineNumber">&nbsp;7292&nbsp;</span><a name="line_7292"></a></li>
<li id="line_7293" class="odd"><span class="lineNumber">&nbsp;7293&nbsp;</span>	//&nbsp;Unrenders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;an&nbsp;event&nbsp;or&nbsp;external-element&nbsp;being&nbsp;dragged.<a name="line_7293"></a></li>
<li id="line_7294" class="even"><span class="lineNumber">&nbsp;7294&nbsp;</span>	unrenderDrag:&nbsp;function()&nbsp;{<a name="line_7294"></a></li>
<li id="line_7295" class="odd"><span class="lineNumber">&nbsp;7295&nbsp;</span>		//&nbsp;subclasses&nbsp;must&nbsp;implement<a name="line_7295"></a></li>
<li id="line_7296" class="even"><span class="lineNumber">&nbsp;7296&nbsp;</span>	},<a name="line_7296"></a></li>
<li id="line_7297" class="odd"><span class="lineNumber">&nbsp;7297&nbsp;</span><a name="line_7297"></a></li>
<li id="line_7298" class="even"><span class="lineNumber">&nbsp;7298&nbsp;</span><a name="line_7298"></a></li>
<li id="line_7299" class="odd"><span class="lineNumber">&nbsp;7299&nbsp;</span>	/*&nbsp;Event&nbsp;Resizing<a name="line_7299"></a></li>
<li id="line_7300" class="even"><span class="lineNumber">&nbsp;7300&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_7300"></a></li>
<li id="line_7301" class="odd"><span class="lineNumber">&nbsp;7301&nbsp;</span><a name="line_7301"></a></li>
<li id="line_7302" class="even"><span class="lineNumber">&nbsp;7302&nbsp;</span><a name="line_7302"></a></li>
<li id="line_7303" class="odd"><span class="lineNumber">&nbsp;7303&nbsp;</span>	//&nbsp;Computes&nbsp;if&nbsp;the&nbsp;given&nbsp;event&nbsp;is&nbsp;allowed&nbsp;to&nbsp;be&nbsp;resized&nbsp;from&nbsp;its&nbsp;starting&nbsp;edge<a name="line_7303"></a></li>
<li id="line_7304" class="even"><span class="lineNumber">&nbsp;7304&nbsp;</span>	isEventResizableFromStart:&nbsp;function(event)&nbsp;{<a name="line_7304"></a></li>
<li id="line_7305" class="odd"><span class="lineNumber">&nbsp;7305&nbsp;</span>		return&nbsp;this.opt('eventResizableFromStart')&nbsp;&amp;&amp;&nbsp;this.isEventResizable(event);<a name="line_7305"></a></li>
<li id="line_7306" class="even"><span class="lineNumber">&nbsp;7306&nbsp;</span>	},<a name="line_7306"></a></li>
<li id="line_7307" class="odd"><span class="lineNumber">&nbsp;7307&nbsp;</span><a name="line_7307"></a></li>
<li id="line_7308" class="even"><span class="lineNumber">&nbsp;7308&nbsp;</span><a name="line_7308"></a></li>
<li id="line_7309" class="odd"><span class="lineNumber">&nbsp;7309&nbsp;</span>	//&nbsp;Computes&nbsp;if&nbsp;the&nbsp;given&nbsp;event&nbsp;is&nbsp;allowed&nbsp;to&nbsp;be&nbsp;resized&nbsp;from&nbsp;its&nbsp;ending&nbsp;edge<a name="line_7309"></a></li>
<li id="line_7310" class="even"><span class="lineNumber">&nbsp;7310&nbsp;</span>	isEventResizableFromEnd:&nbsp;function(event)&nbsp;{<a name="line_7310"></a></li>
<li id="line_7311" class="odd"><span class="lineNumber">&nbsp;7311&nbsp;</span>		return&nbsp;this.isEventResizable(event);<a name="line_7311"></a></li>
<li id="line_7312" class="even"><span class="lineNumber">&nbsp;7312&nbsp;</span>	},<a name="line_7312"></a></li>
<li id="line_7313" class="odd"><span class="lineNumber">&nbsp;7313&nbsp;</span><a name="line_7313"></a></li>
<li id="line_7314" class="even"><span class="lineNumber">&nbsp;7314&nbsp;</span><a name="line_7314"></a></li>
<li id="line_7315" class="odd"><span class="lineNumber">&nbsp;7315&nbsp;</span>	//&nbsp;Computes&nbsp;if&nbsp;the&nbsp;given&nbsp;event&nbsp;is&nbsp;allowed&nbsp;to&nbsp;be&nbsp;resized&nbsp;by&nbsp;the&nbsp;user&nbsp;at&nbsp;all<a name="line_7315"></a></li>
<li id="line_7316" class="even"><span class="lineNumber">&nbsp;7316&nbsp;</span>	isEventResizable:&nbsp;function(event)&nbsp;{<a name="line_7316"></a></li>
<li id="line_7317" class="odd"><span class="lineNumber">&nbsp;7317&nbsp;</span>		var&nbsp;source&nbsp;=&nbsp;event.source&nbsp;||&nbsp;{};<a name="line_7317"></a></li>
<li id="line_7318" class="even"><span class="lineNumber">&nbsp;7318&nbsp;</span><a name="line_7318"></a></li>
<li id="line_7319" class="odd"><span class="lineNumber">&nbsp;7319&nbsp;</span>		return&nbsp;firstDefined(<a name="line_7319"></a></li>
<li id="line_7320" class="even"><span class="lineNumber">&nbsp;7320&nbsp;</span>			event.durationEditable,<a name="line_7320"></a></li>
<li id="line_7321" class="odd"><span class="lineNumber">&nbsp;7321&nbsp;</span>			source.durationEditable,<a name="line_7321"></a></li>
<li id="line_7322" class="even"><span class="lineNumber">&nbsp;7322&nbsp;</span>			this.opt('eventDurationEditable'),<a name="line_7322"></a></li>
<li id="line_7323" class="odd"><span class="lineNumber">&nbsp;7323&nbsp;</span>			event.editable,<a name="line_7323"></a></li>
<li id="line_7324" class="even"><span class="lineNumber">&nbsp;7324&nbsp;</span>			source.editable,<a name="line_7324"></a></li>
<li id="line_7325" class="odd"><span class="lineNumber">&nbsp;7325&nbsp;</span>			this.opt('editable')<a name="line_7325"></a></li>
<li id="line_7326" class="even"><span class="lineNumber">&nbsp;7326&nbsp;</span>		);<a name="line_7326"></a></li>
<li id="line_7327" class="odd"><span class="lineNumber">&nbsp;7327&nbsp;</span>	},<a name="line_7327"></a></li>
<li id="line_7328" class="even"><span class="lineNumber">&nbsp;7328&nbsp;</span><a name="line_7328"></a></li>
<li id="line_7329" class="odd"><span class="lineNumber">&nbsp;7329&nbsp;</span><a name="line_7329"></a></li>
<li id="line_7330" class="even"><span class="lineNumber">&nbsp;7330&nbsp;</span>	//&nbsp;Must&nbsp;be&nbsp;called&nbsp;when&nbsp;an&nbsp;event&nbsp;in&nbsp;the&nbsp;view&nbsp;has&nbsp;been&nbsp;resized&nbsp;to&nbsp;a&nbsp;new&nbsp;length<a name="line_7330"></a></li>
<li id="line_7331" class="odd"><span class="lineNumber">&nbsp;7331&nbsp;</span>	reportEventResize:&nbsp;function(event,&nbsp;resizeLocation,&nbsp;largeUnit,&nbsp;el,&nbsp;ev)&nbsp;{<a name="line_7331"></a></li>
<li id="line_7332" class="even"><span class="lineNumber">&nbsp;7332&nbsp;</span>		var&nbsp;calendar&nbsp;=&nbsp;this.calendar;<a name="line_7332"></a></li>
<li id="line_7333" class="odd"><span class="lineNumber">&nbsp;7333&nbsp;</span>		var&nbsp;mutateResult&nbsp;=&nbsp;calendar.mutateEvent(event,&nbsp;resizeLocation,&nbsp;largeUnit);<a name="line_7333"></a></li>
<li id="line_7334" class="even"><span class="lineNumber">&nbsp;7334&nbsp;</span>		var&nbsp;undoFunc&nbsp;=&nbsp;function()&nbsp;{<a name="line_7334"></a></li>
<li id="line_7335" class="odd"><span class="lineNumber">&nbsp;7335&nbsp;</span>			mutateResult.undo();<a name="line_7335"></a></li>
<li id="line_7336" class="even"><span class="lineNumber">&nbsp;7336&nbsp;</span>			calendar.reportEventChange();<a name="line_7336"></a></li>
<li id="line_7337" class="odd"><span class="lineNumber">&nbsp;7337&nbsp;</span>		};<a name="line_7337"></a></li>
<li id="line_7338" class="even"><span class="lineNumber">&nbsp;7338&nbsp;</span><a name="line_7338"></a></li>
<li id="line_7339" class="odd"><span class="lineNumber">&nbsp;7339&nbsp;</span>		this.triggerEventResize(event,&nbsp;mutateResult.durationDelta,&nbsp;undoFunc,&nbsp;el,&nbsp;ev);<a name="line_7339"></a></li>
<li id="line_7340" class="even"><span class="lineNumber">&nbsp;7340&nbsp;</span>		calendar.reportEventChange();&nbsp;//&nbsp;will&nbsp;rerender&nbsp;events<a name="line_7340"></a></li>
<li id="line_7341" class="odd"><span class="lineNumber">&nbsp;7341&nbsp;</span>	},<a name="line_7341"></a></li>
<li id="line_7342" class="even"><span class="lineNumber">&nbsp;7342&nbsp;</span><a name="line_7342"></a></li>
<li id="line_7343" class="odd"><span class="lineNumber">&nbsp;7343&nbsp;</span><a name="line_7343"></a></li>
<li id="line_7344" class="even"><span class="lineNumber">&nbsp;7344&nbsp;</span>	//&nbsp;Triggers&nbsp;event-resize&nbsp;handlers&nbsp;that&nbsp;have&nbsp;subscribed&nbsp;via&nbsp;the&nbsp;API<a name="line_7344"></a></li>
<li id="line_7345" class="odd"><span class="lineNumber">&nbsp;7345&nbsp;</span>	triggerEventResize:&nbsp;function(event,&nbsp;durationDelta,&nbsp;undoFunc,&nbsp;el,&nbsp;ev)&nbsp;{<a name="line_7345"></a></li>
<li id="line_7346" class="even"><span class="lineNumber">&nbsp;7346&nbsp;</span>		this.trigger('eventResize',&nbsp;el[0],&nbsp;event,&nbsp;durationDelta,&nbsp;undoFunc,&nbsp;ev,&nbsp;{});&nbsp;//&nbsp;{}&nbsp;=&nbsp;jqui&nbsp;dummy<a name="line_7346"></a></li>
<li id="line_7347" class="odd"><span class="lineNumber">&nbsp;7347&nbsp;</span>	},<a name="line_7347"></a></li>
<li id="line_7348" class="even"><span class="lineNumber">&nbsp;7348&nbsp;</span><a name="line_7348"></a></li>
<li id="line_7349" class="odd"><span class="lineNumber">&nbsp;7349&nbsp;</span><a name="line_7349"></a></li>
<li id="line_7350" class="even"><span class="lineNumber">&nbsp;7350&nbsp;</span>	/*&nbsp;Selection<a name="line_7350"></a></li>
<li id="line_7351" class="odd"><span class="lineNumber">&nbsp;7351&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_7351"></a></li>
<li id="line_7352" class="even"><span class="lineNumber">&nbsp;7352&nbsp;</span><a name="line_7352"></a></li>
<li id="line_7353" class="odd"><span class="lineNumber">&nbsp;7353&nbsp;</span><a name="line_7353"></a></li>
<li id="line_7354" class="even"><span class="lineNumber">&nbsp;7354&nbsp;</span>	//&nbsp;Selects&nbsp;a&nbsp;date&nbsp;range&nbsp;on&nbsp;the&nbsp;view.&nbsp;`start`&nbsp;and&nbsp;`end`&nbsp;are&nbsp;both&nbsp;Moments.<a name="line_7354"></a></li>
<li id="line_7355" class="odd"><span class="lineNumber">&nbsp;7355&nbsp;</span>	//&nbsp;`ev`&nbsp;is&nbsp;the&nbsp;native&nbsp;mouse&nbsp;event&nbsp;that&nbsp;begin&nbsp;the&nbsp;interaction.<a name="line_7355"></a></li>
<li id="line_7356" class="even"><span class="lineNumber">&nbsp;7356&nbsp;</span>	select:&nbsp;function(range,&nbsp;ev)&nbsp;{<a name="line_7356"></a></li>
<li id="line_7357" class="odd"><span class="lineNumber">&nbsp;7357&nbsp;</span>		this.unselect(ev);<a name="line_7357"></a></li>
<li id="line_7358" class="even"><span class="lineNumber">&nbsp;7358&nbsp;</span>		this.renderSelection(range);<a name="line_7358"></a></li>
<li id="line_7359" class="odd"><span class="lineNumber">&nbsp;7359&nbsp;</span>		this.reportSelection(range,&nbsp;ev);<a name="line_7359"></a></li>
<li id="line_7360" class="even"><span class="lineNumber">&nbsp;7360&nbsp;</span>	},<a name="line_7360"></a></li>
<li id="line_7361" class="odd"><span class="lineNumber">&nbsp;7361&nbsp;</span><a name="line_7361"></a></li>
<li id="line_7362" class="even"><span class="lineNumber">&nbsp;7362&nbsp;</span><a name="line_7362"></a></li>
<li id="line_7363" class="odd"><span class="lineNumber">&nbsp;7363&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;the&nbsp;selection<a name="line_7363"></a></li>
<li id="line_7364" class="even"><span class="lineNumber">&nbsp;7364&nbsp;</span>	renderSelection:&nbsp;function(range)&nbsp;{<a name="line_7364"></a></li>
<li id="line_7365" class="odd"><span class="lineNumber">&nbsp;7365&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_7365"></a></li>
<li id="line_7366" class="even"><span class="lineNumber">&nbsp;7366&nbsp;</span>	},<a name="line_7366"></a></li>
<li id="line_7367" class="odd"><span class="lineNumber">&nbsp;7367&nbsp;</span><a name="line_7367"></a></li>
<li id="line_7368" class="even"><span class="lineNumber">&nbsp;7368&nbsp;</span><a name="line_7368"></a></li>
<li id="line_7369" class="odd"><span class="lineNumber">&nbsp;7369&nbsp;</span>	//&nbsp;Called&nbsp;when&nbsp;a&nbsp;new&nbsp;selection&nbsp;is&nbsp;made.&nbsp;Updates&nbsp;internal&nbsp;state&nbsp;and&nbsp;triggers&nbsp;handlers.<a name="line_7369"></a></li>
<li id="line_7370" class="even"><span class="lineNumber">&nbsp;7370&nbsp;</span>	reportSelection:&nbsp;function(range,&nbsp;ev)&nbsp;{<a name="line_7370"></a></li>
<li id="line_7371" class="odd"><span class="lineNumber">&nbsp;7371&nbsp;</span>		this.isSelected&nbsp;=&nbsp;true;<a name="line_7371"></a></li>
<li id="line_7372" class="even"><span class="lineNumber">&nbsp;7372&nbsp;</span>		this.triggerSelect(range,&nbsp;ev);<a name="line_7372"></a></li>
<li id="line_7373" class="odd"><span class="lineNumber">&nbsp;7373&nbsp;</span>	},<a name="line_7373"></a></li>
<li id="line_7374" class="even"><span class="lineNumber">&nbsp;7374&nbsp;</span><a name="line_7374"></a></li>
<li id="line_7375" class="odd"><span class="lineNumber">&nbsp;7375&nbsp;</span><a name="line_7375"></a></li>
<li id="line_7376" class="even"><span class="lineNumber">&nbsp;7376&nbsp;</span>	//&nbsp;Triggers&nbsp;handlers&nbsp;to&nbsp;'select'<a name="line_7376"></a></li>
<li id="line_7377" class="odd"><span class="lineNumber">&nbsp;7377&nbsp;</span>	triggerSelect:&nbsp;function(range,&nbsp;ev)&nbsp;{<a name="line_7377"></a></li>
<li id="line_7378" class="even"><span class="lineNumber">&nbsp;7378&nbsp;</span>		this.trigger('select',&nbsp;null,&nbsp;range.start,&nbsp;range.end,&nbsp;ev);<a name="line_7378"></a></li>
<li id="line_7379" class="odd"><span class="lineNumber">&nbsp;7379&nbsp;</span>	},<a name="line_7379"></a></li>
<li id="line_7380" class="even"><span class="lineNumber">&nbsp;7380&nbsp;</span><a name="line_7380"></a></li>
<li id="line_7381" class="odd"><span class="lineNumber">&nbsp;7381&nbsp;</span><a name="line_7381"></a></li>
<li id="line_7382" class="even"><span class="lineNumber">&nbsp;7382&nbsp;</span>	//&nbsp;Undoes&nbsp;a&nbsp;selection.&nbsp;updates&nbsp;in&nbsp;the&nbsp;internal&nbsp;state&nbsp;and&nbsp;triggers&nbsp;handlers.<a name="line_7382"></a></li>
<li id="line_7383" class="odd"><span class="lineNumber">&nbsp;7383&nbsp;</span>	//&nbsp;`ev`&nbsp;is&nbsp;the&nbsp;native&nbsp;mouse&nbsp;event&nbsp;that&nbsp;began&nbsp;the&nbsp;interaction.<a name="line_7383"></a></li>
<li id="line_7384" class="even"><span class="lineNumber">&nbsp;7384&nbsp;</span>	unselect:&nbsp;function(ev)&nbsp;{<a name="line_7384"></a></li>
<li id="line_7385" class="odd"><span class="lineNumber">&nbsp;7385&nbsp;</span>		if&nbsp;(this.isSelected)&nbsp;{<a name="line_7385"></a></li>
<li id="line_7386" class="even"><span class="lineNumber">&nbsp;7386&nbsp;</span>			this.isSelected&nbsp;=&nbsp;false;<a name="line_7386"></a></li>
<li id="line_7387" class="odd"><span class="lineNumber">&nbsp;7387&nbsp;</span>			if&nbsp;(this.destroySelection)&nbsp;{<a name="line_7387"></a></li>
<li id="line_7388" class="even"><span class="lineNumber">&nbsp;7388&nbsp;</span>				this.destroySelection();&nbsp;//&nbsp;TODO:&nbsp;deprecate<a name="line_7388"></a></li>
<li id="line_7389" class="odd"><span class="lineNumber">&nbsp;7389&nbsp;</span>			}<a name="line_7389"></a></li>
<li id="line_7390" class="even"><span class="lineNumber">&nbsp;7390&nbsp;</span>			this.unrenderSelection();<a name="line_7390"></a></li>
<li id="line_7391" class="odd"><span class="lineNumber">&nbsp;7391&nbsp;</span>			this.trigger('unselect',&nbsp;null,&nbsp;ev);<a name="line_7391"></a></li>
<li id="line_7392" class="even"><span class="lineNumber">&nbsp;7392&nbsp;</span>		}<a name="line_7392"></a></li>
<li id="line_7393" class="odd"><span class="lineNumber">&nbsp;7393&nbsp;</span>	},<a name="line_7393"></a></li>
<li id="line_7394" class="even"><span class="lineNumber">&nbsp;7394&nbsp;</span><a name="line_7394"></a></li>
<li id="line_7395" class="odd"><span class="lineNumber">&nbsp;7395&nbsp;</span><a name="line_7395"></a></li>
<li id="line_7396" class="even"><span class="lineNumber">&nbsp;7396&nbsp;</span>	//&nbsp;Unrenders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;selection<a name="line_7396"></a></li>
<li id="line_7397" class="odd"><span class="lineNumber">&nbsp;7397&nbsp;</span>	unrenderSelection:&nbsp;function()&nbsp;{<a name="line_7397"></a></li>
<li id="line_7398" class="even"><span class="lineNumber">&nbsp;7398&nbsp;</span>		//&nbsp;subclasses&nbsp;should&nbsp;implement<a name="line_7398"></a></li>
<li id="line_7399" class="odd"><span class="lineNumber">&nbsp;7399&nbsp;</span>	},<a name="line_7399"></a></li>
<li id="line_7400" class="even"><span class="lineNumber">&nbsp;7400&nbsp;</span><a name="line_7400"></a></li>
<li id="line_7401" class="odd"><span class="lineNumber">&nbsp;7401&nbsp;</span><a name="line_7401"></a></li>
<li id="line_7402" class="even"><span class="lineNumber">&nbsp;7402&nbsp;</span>	//&nbsp;Handler&nbsp;for&nbsp;unselecting&nbsp;when&nbsp;the&nbsp;user&nbsp;clicks&nbsp;something&nbsp;and&nbsp;the&nbsp;'unselectAuto'&nbsp;setting&nbsp;is&nbsp;on<a name="line_7402"></a></li>
<li id="line_7403" class="odd"><span class="lineNumber">&nbsp;7403&nbsp;</span>	documentMousedown:&nbsp;function(ev)&nbsp;{<a name="line_7403"></a></li>
<li id="line_7404" class="even"><span class="lineNumber">&nbsp;7404&nbsp;</span>		var&nbsp;ignore;<a name="line_7404"></a></li>
<li id="line_7405" class="odd"><span class="lineNumber">&nbsp;7405&nbsp;</span><a name="line_7405"></a></li>
<li id="line_7406" class="even"><span class="lineNumber">&nbsp;7406&nbsp;</span>		//&nbsp;is&nbsp;there&nbsp;a&nbsp;selection,&nbsp;and&nbsp;has&nbsp;the&nbsp;user&nbsp;made&nbsp;a&nbsp;proper&nbsp;left&nbsp;click?<a name="line_7406"></a></li>
<li id="line_7407" class="odd"><span class="lineNumber">&nbsp;7407&nbsp;</span>		if&nbsp;(this.isSelected&nbsp;&amp;&amp;&nbsp;this.opt('unselectAuto')&nbsp;&amp;&amp;&nbsp;isPrimaryMouseButton(ev))&nbsp;{<a name="line_7407"></a></li>
<li id="line_7408" class="even"><span class="lineNumber">&nbsp;7408&nbsp;</span><a name="line_7408"></a></li>
<li id="line_7409" class="odd"><span class="lineNumber">&nbsp;7409&nbsp;</span>			//&nbsp;only&nbsp;unselect&nbsp;if&nbsp;the&nbsp;clicked&nbsp;element&nbsp;is&nbsp;not&nbsp;identical&nbsp;to&nbsp;or&nbsp;inside&nbsp;of&nbsp;an&nbsp;'unselectCancel'&nbsp;element<a name="line_7409"></a></li>
<li id="line_7410" class="even"><span class="lineNumber">&nbsp;7410&nbsp;</span>			ignore&nbsp;=&nbsp;this.opt('unselectCancel');<a name="line_7410"></a></li>
<li id="line_7411" class="odd"><span class="lineNumber">&nbsp;7411&nbsp;</span>			if&nbsp;(!ignore&nbsp;||&nbsp;!$(ev.target).closest(ignore).length)&nbsp;{<a name="line_7411"></a></li>
<li id="line_7412" class="even"><span class="lineNumber">&nbsp;7412&nbsp;</span>				this.unselect(ev);<a name="line_7412"></a></li>
<li id="line_7413" class="odd"><span class="lineNumber">&nbsp;7413&nbsp;</span>			}<a name="line_7413"></a></li>
<li id="line_7414" class="even"><span class="lineNumber">&nbsp;7414&nbsp;</span>		}<a name="line_7414"></a></li>
<li id="line_7415" class="odd"><span class="lineNumber">&nbsp;7415&nbsp;</span>	},<a name="line_7415"></a></li>
<li id="line_7416" class="even"><span class="lineNumber">&nbsp;7416&nbsp;</span><a name="line_7416"></a></li>
<li id="line_7417" class="odd"><span class="lineNumber">&nbsp;7417&nbsp;</span><a name="line_7417"></a></li>
<li id="line_7418" class="even"><span class="lineNumber">&nbsp;7418&nbsp;</span>	/*&nbsp;Day&nbsp;Click<a name="line_7418"></a></li>
<li id="line_7419" class="odd"><span class="lineNumber">&nbsp;7419&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_7419"></a></li>
<li id="line_7420" class="even"><span class="lineNumber">&nbsp;7420&nbsp;</span><a name="line_7420"></a></li>
<li id="line_7421" class="odd"><span class="lineNumber">&nbsp;7421&nbsp;</span><a name="line_7421"></a></li>
<li id="line_7422" class="even"><span class="lineNumber">&nbsp;7422&nbsp;</span>	//&nbsp;Triggers&nbsp;handlers&nbsp;to&nbsp;'dayClick'<a name="line_7422"></a></li>
<li id="line_7423" class="odd"><span class="lineNumber">&nbsp;7423&nbsp;</span>	triggerDayClick:&nbsp;function(cell,&nbsp;dayEl,&nbsp;ev)&nbsp;{<a name="line_7423"></a></li>
<li id="line_7424" class="even"><span class="lineNumber">&nbsp;7424&nbsp;</span>		this.trigger('dayClick',&nbsp;dayEl,&nbsp;cell.start,&nbsp;ev);<a name="line_7424"></a></li>
<li id="line_7425" class="odd"><span class="lineNumber">&nbsp;7425&nbsp;</span>	},<a name="line_7425"></a></li>
<li id="line_7426" class="even"><span class="lineNumber">&nbsp;7426&nbsp;</span><a name="line_7426"></a></li>
<li id="line_7427" class="odd"><span class="lineNumber">&nbsp;7427&nbsp;</span><a name="line_7427"></a></li>
<li id="line_7428" class="even"><span class="lineNumber">&nbsp;7428&nbsp;</span>	/*&nbsp;Date&nbsp;Utils<a name="line_7428"></a></li>
<li id="line_7429" class="odd"><span class="lineNumber">&nbsp;7429&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_7429"></a></li>
<li id="line_7430" class="even"><span class="lineNumber">&nbsp;7430&nbsp;</span><a name="line_7430"></a></li>
<li id="line_7431" class="odd"><span class="lineNumber">&nbsp;7431&nbsp;</span><a name="line_7431"></a></li>
<li id="line_7432" class="even"><span class="lineNumber">&nbsp;7432&nbsp;</span>	//&nbsp;Initializes&nbsp;internal&nbsp;variables&nbsp;related&nbsp;to&nbsp;calculating&nbsp;hidden&nbsp;days-of-week<a name="line_7432"></a></li>
<li id="line_7433" class="odd"><span class="lineNumber">&nbsp;7433&nbsp;</span>	initHiddenDays:&nbsp;function()&nbsp;{<a name="line_7433"></a></li>
<li id="line_7434" class="even"><span class="lineNumber">&nbsp;7434&nbsp;</span>		var&nbsp;hiddenDays&nbsp;=&nbsp;this.opt('hiddenDays')&nbsp;||&nbsp;[];&nbsp;//&nbsp;array&nbsp;of&nbsp;day-of-week&nbsp;indices&nbsp;that&nbsp;are&nbsp;hidden<a name="line_7434"></a></li>
<li id="line_7435" class="odd"><span class="lineNumber">&nbsp;7435&nbsp;</span>		var&nbsp;isHiddenDayHash&nbsp;=&nbsp;[];&nbsp;//&nbsp;is&nbsp;the&nbsp;day-of-week&nbsp;hidden?&nbsp;(hash&nbsp;with&nbsp;day-of-week-index&nbsp;-&gt;&nbsp;bool)<a name="line_7435"></a></li>
<li id="line_7436" class="even"><span class="lineNumber">&nbsp;7436&nbsp;</span>		var&nbsp;dayCnt&nbsp;=&nbsp;0;<a name="line_7436"></a></li>
<li id="line_7437" class="odd"><span class="lineNumber">&nbsp;7437&nbsp;</span>		var&nbsp;i;<a name="line_7437"></a></li>
<li id="line_7438" class="even"><span class="lineNumber">&nbsp;7438&nbsp;</span><a name="line_7438"></a></li>
<li id="line_7439" class="odd"><span class="lineNumber">&nbsp;7439&nbsp;</span>		if&nbsp;(this.opt('weekends')&nbsp;===&nbsp;false)&nbsp;{<a name="line_7439"></a></li>
<li id="line_7440" class="even"><span class="lineNumber">&nbsp;7440&nbsp;</span>			hiddenDays.push(0,&nbsp;6);&nbsp;//&nbsp;0=sunday,&nbsp;6=saturday<a name="line_7440"></a></li>
<li id="line_7441" class="odd"><span class="lineNumber">&nbsp;7441&nbsp;</span>		}<a name="line_7441"></a></li>
<li id="line_7442" class="even"><span class="lineNumber">&nbsp;7442&nbsp;</span><a name="line_7442"></a></li>
<li id="line_7443" class="odd"><span class="lineNumber">&nbsp;7443&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;7;&nbsp;i++)&nbsp;{<a name="line_7443"></a></li>
<li id="line_7444" class="even"><span class="lineNumber">&nbsp;7444&nbsp;</span>			if&nbsp;(<a name="line_7444"></a></li>
<li id="line_7445" class="odd"><span class="lineNumber">&nbsp;7445&nbsp;</span>				!(isHiddenDayHash[i]&nbsp;=&nbsp;$.inArray(i,&nbsp;hiddenDays)&nbsp;!==&nbsp;-1)<a name="line_7445"></a></li>
<li id="line_7446" class="even"><span class="lineNumber">&nbsp;7446&nbsp;</span>			)&nbsp;{<a name="line_7446"></a></li>
<li id="line_7447" class="odd"><span class="lineNumber">&nbsp;7447&nbsp;</span>				dayCnt++;<a name="line_7447"></a></li>
<li id="line_7448" class="even"><span class="lineNumber">&nbsp;7448&nbsp;</span>			}<a name="line_7448"></a></li>
<li id="line_7449" class="odd"><span class="lineNumber">&nbsp;7449&nbsp;</span>		}<a name="line_7449"></a></li>
<li id="line_7450" class="even"><span class="lineNumber">&nbsp;7450&nbsp;</span><a name="line_7450"></a></li>
<li id="line_7451" class="odd"><span class="lineNumber">&nbsp;7451&nbsp;</span>		if&nbsp;(!dayCnt)&nbsp;{<a name="line_7451"></a></li>
<li id="line_7452" class="even"><span class="lineNumber">&nbsp;7452&nbsp;</span>			throw&nbsp;'invalid&nbsp;hiddenDays';&nbsp;//&nbsp;all&nbsp;days&nbsp;were&nbsp;hidden?&nbsp;bad.<a name="line_7452"></a></li>
<li id="line_7453" class="odd"><span class="lineNumber">&nbsp;7453&nbsp;</span>		}<a name="line_7453"></a></li>
<li id="line_7454" class="even"><span class="lineNumber">&nbsp;7454&nbsp;</span><a name="line_7454"></a></li>
<li id="line_7455" class="odd"><span class="lineNumber">&nbsp;7455&nbsp;</span>		this.isHiddenDayHash&nbsp;=&nbsp;isHiddenDayHash;<a name="line_7455"></a></li>
<li id="line_7456" class="even"><span class="lineNumber">&nbsp;7456&nbsp;</span>	},<a name="line_7456"></a></li>
<li id="line_7457" class="odd"><span class="lineNumber">&nbsp;7457&nbsp;</span><a name="line_7457"></a></li>
<li id="line_7458" class="even"><span class="lineNumber">&nbsp;7458&nbsp;</span><a name="line_7458"></a></li>
<li id="line_7459" class="odd"><span class="lineNumber">&nbsp;7459&nbsp;</span>	//&nbsp;Is&nbsp;the&nbsp;current&nbsp;day&nbsp;hidden?<a name="line_7459"></a></li>
<li id="line_7460" class="even"><span class="lineNumber">&nbsp;7460&nbsp;</span>	//&nbsp;`day`&nbsp;is&nbsp;a&nbsp;day-of-week&nbsp;index&nbsp;(0-6),&nbsp;or&nbsp;a&nbsp;Moment<a name="line_7460"></a></li>
<li id="line_7461" class="odd"><span class="lineNumber">&nbsp;7461&nbsp;</span>	isHiddenDay:&nbsp;function(day)&nbsp;{<a name="line_7461"></a></li>
<li id="line_7462" class="even"><span class="lineNumber">&nbsp;7462&nbsp;</span>		if&nbsp;(moment.isMoment(day))&nbsp;{<a name="line_7462"></a></li>
<li id="line_7463" class="odd"><span class="lineNumber">&nbsp;7463&nbsp;</span>			day&nbsp;=&nbsp;day.day();<a name="line_7463"></a></li>
<li id="line_7464" class="even"><span class="lineNumber">&nbsp;7464&nbsp;</span>		}<a name="line_7464"></a></li>
<li id="line_7465" class="odd"><span class="lineNumber">&nbsp;7465&nbsp;</span>		return&nbsp;this.isHiddenDayHash[day];<a name="line_7465"></a></li>
<li id="line_7466" class="even"><span class="lineNumber">&nbsp;7466&nbsp;</span>	},<a name="line_7466"></a></li>
<li id="line_7467" class="odd"><span class="lineNumber">&nbsp;7467&nbsp;</span><a name="line_7467"></a></li>
<li id="line_7468" class="even"><span class="lineNumber">&nbsp;7468&nbsp;</span><a name="line_7468"></a></li>
<li id="line_7469" class="odd"><span class="lineNumber">&nbsp;7469&nbsp;</span>	//&nbsp;Incrementing&nbsp;the&nbsp;current&nbsp;day&nbsp;until&nbsp;it&nbsp;is&nbsp;no&nbsp;longer&nbsp;a&nbsp;hidden&nbsp;day,&nbsp;returning&nbsp;a&nbsp;copy.<a name="line_7469"></a></li>
<li id="line_7470" class="even"><span class="lineNumber">&nbsp;7470&nbsp;</span>	//&nbsp;If&nbsp;the&nbsp;initial&nbsp;value&nbsp;of&nbsp;`date`&nbsp;is&nbsp;not&nbsp;a&nbsp;hidden&nbsp;day,&nbsp;don't&nbsp;do&nbsp;anything.<a name="line_7470"></a></li>
<li id="line_7471" class="odd"><span class="lineNumber">&nbsp;7471&nbsp;</span>	//&nbsp;Pass&nbsp;`isExclusive`&nbsp;as&nbsp;`true`&nbsp;if&nbsp;you&nbsp;are&nbsp;dealing&nbsp;with&nbsp;an&nbsp;end&nbsp;date.<a name="line_7471"></a></li>
<li id="line_7472" class="even"><span class="lineNumber">&nbsp;7472&nbsp;</span>	//&nbsp;`inc`&nbsp;defaults&nbsp;to&nbsp;`1`&nbsp;(increment&nbsp;one&nbsp;day&nbsp;forward&nbsp;each&nbsp;time)<a name="line_7472"></a></li>
<li id="line_7473" class="odd"><span class="lineNumber">&nbsp;7473&nbsp;</span>	skipHiddenDays:&nbsp;function(date,&nbsp;inc,&nbsp;isExclusive)&nbsp;{<a name="line_7473"></a></li>
<li id="line_7474" class="even"><span class="lineNumber">&nbsp;7474&nbsp;</span>		var&nbsp;out&nbsp;=&nbsp;date.clone();<a name="line_7474"></a></li>
<li id="line_7475" class="odd"><span class="lineNumber">&nbsp;7475&nbsp;</span>		inc&nbsp;=&nbsp;inc&nbsp;||&nbsp;1;<a name="line_7475"></a></li>
<li id="line_7476" class="even"><span class="lineNumber">&nbsp;7476&nbsp;</span>		while&nbsp;(<a name="line_7476"></a></li>
<li id="line_7477" class="odd"><span class="lineNumber">&nbsp;7477&nbsp;</span>			this.isHiddenDayHash[(out.day()&nbsp;+&nbsp;(isExclusive&nbsp;?&nbsp;inc&nbsp;:&nbsp;0)&nbsp;+&nbsp;7)&nbsp;%&nbsp;7]<a name="line_7477"></a></li>
<li id="line_7478" class="even"><span class="lineNumber">&nbsp;7478&nbsp;</span>		)&nbsp;{<a name="line_7478"></a></li>
<li id="line_7479" class="odd"><span class="lineNumber">&nbsp;7479&nbsp;</span>			out.add(inc,&nbsp;'days');<a name="line_7479"></a></li>
<li id="line_7480" class="even"><span class="lineNumber">&nbsp;7480&nbsp;</span>		}<a name="line_7480"></a></li>
<li id="line_7481" class="odd"><span class="lineNumber">&nbsp;7481&nbsp;</span>		return&nbsp;out;<a name="line_7481"></a></li>
<li id="line_7482" class="even"><span class="lineNumber">&nbsp;7482&nbsp;</span>	},<a name="line_7482"></a></li>
<li id="line_7483" class="odd"><span class="lineNumber">&nbsp;7483&nbsp;</span><a name="line_7483"></a></li>
<li id="line_7484" class="even"><span class="lineNumber">&nbsp;7484&nbsp;</span><a name="line_7484"></a></li>
<li id="line_7485" class="odd"><span class="lineNumber">&nbsp;7485&nbsp;</span>	//&nbsp;Returns&nbsp;the&nbsp;date&nbsp;range&nbsp;of&nbsp;the&nbsp;full&nbsp;days&nbsp;the&nbsp;given&nbsp;range&nbsp;visually&nbsp;appears&nbsp;to&nbsp;occupy.<a name="line_7485"></a></li>
<li id="line_7486" class="even"><span class="lineNumber">&nbsp;7486&nbsp;</span>	//&nbsp;Returns&nbsp;a&nbsp;new&nbsp;range&nbsp;object.<a name="line_7486"></a></li>
<li id="line_7487" class="odd"><span class="lineNumber">&nbsp;7487&nbsp;</span>	computeDayRange:&nbsp;function(range)&nbsp;{<a name="line_7487"></a></li>
<li id="line_7488" class="even"><span class="lineNumber">&nbsp;7488&nbsp;</span>		var&nbsp;startDay&nbsp;=&nbsp;range.start.clone().stripTime();&nbsp;//&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;day&nbsp;the&nbsp;range&nbsp;starts<a name="line_7488"></a></li>
<li id="line_7489" class="odd"><span class="lineNumber">&nbsp;7489&nbsp;</span>		var&nbsp;end&nbsp;=&nbsp;range.end;<a name="line_7489"></a></li>
<li id="line_7490" class="even"><span class="lineNumber">&nbsp;7490&nbsp;</span>		var&nbsp;endDay&nbsp;=&nbsp;null;<a name="line_7490"></a></li>
<li id="line_7491" class="odd"><span class="lineNumber">&nbsp;7491&nbsp;</span>		var&nbsp;endTimeMS;<a name="line_7491"></a></li>
<li id="line_7492" class="even"><span class="lineNumber">&nbsp;7492&nbsp;</span><a name="line_7492"></a></li>
<li id="line_7493" class="odd"><span class="lineNumber">&nbsp;7493&nbsp;</span>		if&nbsp;(end)&nbsp;{<a name="line_7493"></a></li>
<li id="line_7494" class="even"><span class="lineNumber">&nbsp;7494&nbsp;</span>			endDay&nbsp;=&nbsp;end.clone().stripTime();&nbsp;//&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;day&nbsp;the&nbsp;range&nbsp;exclusively&nbsp;ends<a name="line_7494"></a></li>
<li id="line_7495" class="odd"><span class="lineNumber">&nbsp;7495&nbsp;</span>			endTimeMS&nbsp;=&nbsp;+end.time();&nbsp;//&nbsp;#&nbsp;of&nbsp;milliseconds&nbsp;into&nbsp;`endDay`<a name="line_7495"></a></li>
<li id="line_7496" class="even"><span class="lineNumber">&nbsp;7496&nbsp;</span><a name="line_7496"></a></li>
<li id="line_7497" class="odd"><span class="lineNumber">&nbsp;7497&nbsp;</span>			//&nbsp;If&nbsp;the&nbsp;end&nbsp;time&nbsp;is&nbsp;actually&nbsp;inclusively&nbsp;part&nbsp;of&nbsp;the&nbsp;next&nbsp;day&nbsp;and&nbsp;is&nbsp;equal&nbsp;to&nbsp;or<a name="line_7497"></a></li>
<li id="line_7498" class="even"><span class="lineNumber">&nbsp;7498&nbsp;</span>			//&nbsp;beyond&nbsp;the&nbsp;next&nbsp;day&nbsp;threshold,&nbsp;adjust&nbsp;the&nbsp;end&nbsp;to&nbsp;be&nbsp;the&nbsp;exclusive&nbsp;end&nbsp;of&nbsp;`endDay`.<a name="line_7498"></a></li>
<li id="line_7499" class="odd"><span class="lineNumber">&nbsp;7499&nbsp;</span>			//&nbsp;Otherwise,&nbsp;leaving&nbsp;it&nbsp;as&nbsp;inclusive&nbsp;will&nbsp;cause&nbsp;it&nbsp;to&nbsp;exclude&nbsp;`endDay`.<a name="line_7499"></a></li>
<li id="line_7500" class="even"><span class="lineNumber">&nbsp;7500&nbsp;</span>			if&nbsp;(endTimeMS&nbsp;&amp;&amp;&nbsp;endTimeMS&nbsp;&gt;=&nbsp;this.nextDayThreshold)&nbsp;{<a name="line_7500"></a></li>
<li id="line_7501" class="odd"><span class="lineNumber">&nbsp;7501&nbsp;</span>				endDay.add(1,&nbsp;'days');<a name="line_7501"></a></li>
<li id="line_7502" class="even"><span class="lineNumber">&nbsp;7502&nbsp;</span>			}<a name="line_7502"></a></li>
<li id="line_7503" class="odd"><span class="lineNumber">&nbsp;7503&nbsp;</span>		}<a name="line_7503"></a></li>
<li id="line_7504" class="even"><span class="lineNumber">&nbsp;7504&nbsp;</span><a name="line_7504"></a></li>
<li id="line_7505" class="odd"><span class="lineNumber">&nbsp;7505&nbsp;</span>		//&nbsp;If&nbsp;no&nbsp;end&nbsp;was&nbsp;specified,&nbsp;or&nbsp;if&nbsp;it&nbsp;is&nbsp;within&nbsp;`startDay`&nbsp;but&nbsp;not&nbsp;past&nbsp;nextDayThreshold,<a name="line_7505"></a></li>
<li id="line_7506" class="even"><span class="lineNumber">&nbsp;7506&nbsp;</span>		//&nbsp;assign&nbsp;the&nbsp;default&nbsp;duration&nbsp;of&nbsp;one&nbsp;day.<a name="line_7506"></a></li>
<li id="line_7507" class="odd"><span class="lineNumber">&nbsp;7507&nbsp;</span>		if&nbsp;(!end&nbsp;||&nbsp;endDay&nbsp;&lt;=&nbsp;startDay)&nbsp;{<a name="line_7507"></a></li>
<li id="line_7508" class="even"><span class="lineNumber">&nbsp;7508&nbsp;</span>			endDay&nbsp;=&nbsp;startDay.clone().add(1,&nbsp;'days');<a name="line_7508"></a></li>
<li id="line_7509" class="odd"><span class="lineNumber">&nbsp;7509&nbsp;</span>		}<a name="line_7509"></a></li>
<li id="line_7510" class="even"><span class="lineNumber">&nbsp;7510&nbsp;</span><a name="line_7510"></a></li>
<li id="line_7511" class="odd"><span class="lineNumber">&nbsp;7511&nbsp;</span>		return&nbsp;{&nbsp;start:&nbsp;startDay,&nbsp;end:&nbsp;endDay&nbsp;};<a name="line_7511"></a></li>
<li id="line_7512" class="even"><span class="lineNumber">&nbsp;7512&nbsp;</span>	},<a name="line_7512"></a></li>
<li id="line_7513" class="odd"><span class="lineNumber">&nbsp;7513&nbsp;</span><a name="line_7513"></a></li>
<li id="line_7514" class="even"><span class="lineNumber">&nbsp;7514&nbsp;</span><a name="line_7514"></a></li>
<li id="line_7515" class="odd"><span class="lineNumber">&nbsp;7515&nbsp;</span>	//&nbsp;Does&nbsp;the&nbsp;given&nbsp;event&nbsp;visually&nbsp;appear&nbsp;to&nbsp;occupy&nbsp;more&nbsp;than&nbsp;one&nbsp;day?<a name="line_7515"></a></li>
<li id="line_7516" class="even"><span class="lineNumber">&nbsp;7516&nbsp;</span>	isMultiDayEvent:&nbsp;function(event)&nbsp;{<a name="line_7516"></a></li>
<li id="line_7517" class="odd"><span class="lineNumber">&nbsp;7517&nbsp;</span>		var&nbsp;range&nbsp;=&nbsp;this.computeDayRange(event);&nbsp;//&nbsp;event&nbsp;is&nbsp;range-ish<a name="line_7517"></a></li>
<li id="line_7518" class="even"><span class="lineNumber">&nbsp;7518&nbsp;</span><a name="line_7518"></a></li>
<li id="line_7519" class="odd"><span class="lineNumber">&nbsp;7519&nbsp;</span>		return&nbsp;range.end.diff(range.start,&nbsp;'days')&nbsp;&gt;&nbsp;1;<a name="line_7519"></a></li>
<li id="line_7520" class="even"><span class="lineNumber">&nbsp;7520&nbsp;</span>	}<a name="line_7520"></a></li>
<li id="line_7521" class="odd"><span class="lineNumber">&nbsp;7521&nbsp;</span><a name="line_7521"></a></li>
<li id="line_7522" class="even"><span class="lineNumber">&nbsp;7522&nbsp;</span>});<a name="line_7522"></a></li>
<li id="line_7523" class="odd"><span class="lineNumber">&nbsp;7523&nbsp;</span><a name="line_7523"></a></li>
<li id="line_7524" class="even"><span class="lineNumber">&nbsp;7524&nbsp;</span>;;<a name="line_7524"></a></li>
<li id="line_7525" class="odd"><span class="lineNumber">&nbsp;7525&nbsp;</span><a name="line_7525"></a></li>
<li id="line_7526" class="even"><span class="lineNumber">&nbsp;7526&nbsp;</span>var&nbsp;Calendar&nbsp;=&nbsp;fc.Calendar&nbsp;=&nbsp;Class.extend({<a name="line_7526"></a></li>
<li id="line_7527" class="odd"><span class="lineNumber">&nbsp;7527&nbsp;</span><a name="line_7527"></a></li>
<li id="line_7528" class="even"><span class="lineNumber">&nbsp;7528&nbsp;</span>	dirDefaults:&nbsp;null,&nbsp;//&nbsp;option&nbsp;defaults&nbsp;related&nbsp;to&nbsp;LTR&nbsp;or&nbsp;RTL<a name="line_7528"></a></li>
<li id="line_7529" class="odd"><span class="lineNumber">&nbsp;7529&nbsp;</span>	langDefaults:&nbsp;null,&nbsp;//&nbsp;option&nbsp;defaults&nbsp;related&nbsp;to&nbsp;current&nbsp;locale<a name="line_7529"></a></li>
<li id="line_7530" class="even"><span class="lineNumber">&nbsp;7530&nbsp;</span>	overrides:&nbsp;null,&nbsp;//&nbsp;option&nbsp;overrides&nbsp;given&nbsp;to&nbsp;the&nbsp;fullCalendar&nbsp;constructor<a name="line_7530"></a></li>
<li id="line_7531" class="odd"><span class="lineNumber">&nbsp;7531&nbsp;</span>	options:&nbsp;null,&nbsp;//&nbsp;all&nbsp;defaults&nbsp;combined&nbsp;with&nbsp;overrides<a name="line_7531"></a></li>
<li id="line_7532" class="even"><span class="lineNumber">&nbsp;7532&nbsp;</span>	viewSpecCache:&nbsp;null,&nbsp;//&nbsp;cache&nbsp;of&nbsp;view&nbsp;definitions<a name="line_7532"></a></li>
<li id="line_7533" class="odd"><span class="lineNumber">&nbsp;7533&nbsp;</span>	view:&nbsp;null,&nbsp;//&nbsp;current&nbsp;View&nbsp;object<a name="line_7533"></a></li>
<li id="line_7534" class="even"><span class="lineNumber">&nbsp;7534&nbsp;</span>	header:&nbsp;null,<a name="line_7534"></a></li>
<li id="line_7535" class="odd"><span class="lineNumber">&nbsp;7535&nbsp;</span>	loadingLevel:&nbsp;0,&nbsp;//&nbsp;number&nbsp;of&nbsp;simultaneous&nbsp;loading&nbsp;tasks<a name="line_7535"></a></li>
<li id="line_7536" class="even"><span class="lineNumber">&nbsp;7536&nbsp;</span><a name="line_7536"></a></li>
<li id="line_7537" class="odd"><span class="lineNumber">&nbsp;7537&nbsp;</span><a name="line_7537"></a></li>
<li id="line_7538" class="even"><span class="lineNumber">&nbsp;7538&nbsp;</span>	//&nbsp;a&nbsp;lot&nbsp;of&nbsp;this&nbsp;class'&nbsp;OOP&nbsp;logic&nbsp;is&nbsp;scoped&nbsp;within&nbsp;this&nbsp;constructor&nbsp;function,<a name="line_7538"></a></li>
<li id="line_7539" class="odd"><span class="lineNumber">&nbsp;7539&nbsp;</span>	//&nbsp;but&nbsp;in&nbsp;the&nbsp;future,&nbsp;write&nbsp;individual&nbsp;methods&nbsp;on&nbsp;the&nbsp;prototype.<a name="line_7539"></a></li>
<li id="line_7540" class="even"><span class="lineNumber">&nbsp;7540&nbsp;</span>	constructor:&nbsp;Calendar_constructor,<a name="line_7540"></a></li>
<li id="line_7541" class="odd"><span class="lineNumber">&nbsp;7541&nbsp;</span><a name="line_7541"></a></li>
<li id="line_7542" class="even"><span class="lineNumber">&nbsp;7542&nbsp;</span><a name="line_7542"></a></li>
<li id="line_7543" class="odd"><span class="lineNumber">&nbsp;7543&nbsp;</span>	//&nbsp;Subclasses&nbsp;can&nbsp;override&nbsp;this&nbsp;for&nbsp;initialization&nbsp;logic&nbsp;after&nbsp;the&nbsp;constructor&nbsp;has&nbsp;been&nbsp;called<a name="line_7543"></a></li>
<li id="line_7544" class="even"><span class="lineNumber">&nbsp;7544&nbsp;</span>	initialize:&nbsp;function()&nbsp;{<a name="line_7544"></a></li>
<li id="line_7545" class="odd"><span class="lineNumber">&nbsp;7545&nbsp;</span>	},<a name="line_7545"></a></li>
<li id="line_7546" class="even"><span class="lineNumber">&nbsp;7546&nbsp;</span><a name="line_7546"></a></li>
<li id="line_7547" class="odd"><span class="lineNumber">&nbsp;7547&nbsp;</span><a name="line_7547"></a></li>
<li id="line_7548" class="even"><span class="lineNumber">&nbsp;7548&nbsp;</span>	//&nbsp;Initializes&nbsp;`this.options`&nbsp;and&nbsp;other&nbsp;important&nbsp;options-related&nbsp;objects<a name="line_7548"></a></li>
<li id="line_7549" class="odd"><span class="lineNumber">&nbsp;7549&nbsp;</span>	initOptions:&nbsp;function(overrides)&nbsp;{<a name="line_7549"></a></li>
<li id="line_7550" class="even"><span class="lineNumber">&nbsp;7550&nbsp;</span>		var&nbsp;lang,&nbsp;langDefaults;<a name="line_7550"></a></li>
<li id="line_7551" class="odd"><span class="lineNumber">&nbsp;7551&nbsp;</span>		var&nbsp;isRTL,&nbsp;dirDefaults;<a name="line_7551"></a></li>
<li id="line_7552" class="even"><span class="lineNumber">&nbsp;7552&nbsp;</span><a name="line_7552"></a></li>
<li id="line_7553" class="odd"><span class="lineNumber">&nbsp;7553&nbsp;</span>		//&nbsp;converts&nbsp;legacy&nbsp;options&nbsp;into&nbsp;non-legacy&nbsp;ones.<a name="line_7553"></a></li>
<li id="line_7554" class="even"><span class="lineNumber">&nbsp;7554&nbsp;</span>		//&nbsp;in&nbsp;the&nbsp;future,&nbsp;when&nbsp;this&nbsp;is&nbsp;removed,&nbsp;don't&nbsp;use&nbsp;`overrides`&nbsp;reference.&nbsp;make&nbsp;a&nbsp;copy.<a name="line_7554"></a></li>
<li id="line_7555" class="odd"><span class="lineNumber">&nbsp;7555&nbsp;</span>		overrides&nbsp;=&nbsp;massageOverrides(overrides);<a name="line_7555"></a></li>
<li id="line_7556" class="even"><span class="lineNumber">&nbsp;7556&nbsp;</span><a name="line_7556"></a></li>
<li id="line_7557" class="odd"><span class="lineNumber">&nbsp;7557&nbsp;</span>		lang&nbsp;=&nbsp;overrides.lang;<a name="line_7557"></a></li>
<li id="line_7558" class="even"><span class="lineNumber">&nbsp;7558&nbsp;</span>		langDefaults&nbsp;=&nbsp;langOptionHash[lang];<a name="line_7558"></a></li>
<li id="line_7559" class="odd"><span class="lineNumber">&nbsp;7559&nbsp;</span>		if&nbsp;(!langDefaults)&nbsp;{<a name="line_7559"></a></li>
<li id="line_7560" class="even"><span class="lineNumber">&nbsp;7560&nbsp;</span>			lang&nbsp;=&nbsp;Calendar.defaults.lang;<a name="line_7560"></a></li>
<li id="line_7561" class="odd"><span class="lineNumber">&nbsp;7561&nbsp;</span>			langDefaults&nbsp;=&nbsp;langOptionHash[lang]&nbsp;||&nbsp;{};<a name="line_7561"></a></li>
<li id="line_7562" class="even"><span class="lineNumber">&nbsp;7562&nbsp;</span>		}<a name="line_7562"></a></li>
<li id="line_7563" class="odd"><span class="lineNumber">&nbsp;7563&nbsp;</span><a name="line_7563"></a></li>
<li id="line_7564" class="even"><span class="lineNumber">&nbsp;7564&nbsp;</span>		isRTL&nbsp;=&nbsp;firstDefined(<a name="line_7564"></a></li>
<li id="line_7565" class="odd"><span class="lineNumber">&nbsp;7565&nbsp;</span>			overrides.isRTL,<a name="line_7565"></a></li>
<li id="line_7566" class="even"><span class="lineNumber">&nbsp;7566&nbsp;</span>			langDefaults.isRTL,<a name="line_7566"></a></li>
<li id="line_7567" class="odd"><span class="lineNumber">&nbsp;7567&nbsp;</span>			Calendar.defaults.isRTL<a name="line_7567"></a></li>
<li id="line_7568" class="even"><span class="lineNumber">&nbsp;7568&nbsp;</span>		);<a name="line_7568"></a></li>
<li id="line_7569" class="odd"><span class="lineNumber">&nbsp;7569&nbsp;</span>		dirDefaults&nbsp;=&nbsp;isRTL&nbsp;?&nbsp;Calendar.rtlDefaults&nbsp;:&nbsp;{};<a name="line_7569"></a></li>
<li id="line_7570" class="even"><span class="lineNumber">&nbsp;7570&nbsp;</span><a name="line_7570"></a></li>
<li id="line_7571" class="odd"><span class="lineNumber">&nbsp;7571&nbsp;</span>		this.dirDefaults&nbsp;=&nbsp;dirDefaults;<a name="line_7571"></a></li>
<li id="line_7572" class="even"><span class="lineNumber">&nbsp;7572&nbsp;</span>		this.langDefaults&nbsp;=&nbsp;langDefaults;<a name="line_7572"></a></li>
<li id="line_7573" class="odd"><span class="lineNumber">&nbsp;7573&nbsp;</span>		this.overrides&nbsp;=&nbsp;overrides;<a name="line_7573"></a></li>
<li id="line_7574" class="even"><span class="lineNumber">&nbsp;7574&nbsp;</span>		this.options&nbsp;=&nbsp;mergeOptions([&nbsp;//&nbsp;merge&nbsp;defaults&nbsp;and&nbsp;overrides.&nbsp;lowest&nbsp;to&nbsp;highest&nbsp;precedence<a name="line_7574"></a></li>
<li id="line_7575" class="odd"><span class="lineNumber">&nbsp;7575&nbsp;</span>			Calendar.defaults,&nbsp;//&nbsp;global&nbsp;defaults<a name="line_7575"></a></li>
<li id="line_7576" class="even"><span class="lineNumber">&nbsp;7576&nbsp;</span>			dirDefaults,<a name="line_7576"></a></li>
<li id="line_7577" class="odd"><span class="lineNumber">&nbsp;7577&nbsp;</span>			langDefaults,<a name="line_7577"></a></li>
<li id="line_7578" class="even"><span class="lineNumber">&nbsp;7578&nbsp;</span>			overrides<a name="line_7578"></a></li>
<li id="line_7579" class="odd"><span class="lineNumber">&nbsp;7579&nbsp;</span>		]);<a name="line_7579"></a></li>
<li id="line_7580" class="even"><span class="lineNumber">&nbsp;7580&nbsp;</span>		populateInstanceComputableOptions(this.options);<a name="line_7580"></a></li>
<li id="line_7581" class="odd"><span class="lineNumber">&nbsp;7581&nbsp;</span><a name="line_7581"></a></li>
<li id="line_7582" class="even"><span class="lineNumber">&nbsp;7582&nbsp;</span>		this.viewSpecCache&nbsp;=&nbsp;{};&nbsp;//&nbsp;somewhat&nbsp;unrelated<a name="line_7582"></a></li>
<li id="line_7583" class="odd"><span class="lineNumber">&nbsp;7583&nbsp;</span>	},<a name="line_7583"></a></li>
<li id="line_7584" class="even"><span class="lineNumber">&nbsp;7584&nbsp;</span><a name="line_7584"></a></li>
<li id="line_7585" class="odd"><span class="lineNumber">&nbsp;7585&nbsp;</span><a name="line_7585"></a></li>
<li id="line_7586" class="even"><span class="lineNumber">&nbsp;7586&nbsp;</span>	//&nbsp;Gets&nbsp;information&nbsp;about&nbsp;how&nbsp;to&nbsp;create&nbsp;a&nbsp;view.&nbsp;Will&nbsp;use&nbsp;a&nbsp;cache.<a name="line_7586"></a></li>
<li id="line_7587" class="odd"><span class="lineNumber">&nbsp;7587&nbsp;</span>	getViewSpec:&nbsp;function(viewType)&nbsp;{<a name="line_7587"></a></li>
<li id="line_7588" class="even"><span class="lineNumber">&nbsp;7588&nbsp;</span>		var&nbsp;cache&nbsp;=&nbsp;this.viewSpecCache;<a name="line_7588"></a></li>
<li id="line_7589" class="odd"><span class="lineNumber">&nbsp;7589&nbsp;</span><a name="line_7589"></a></li>
<li id="line_7590" class="even"><span class="lineNumber">&nbsp;7590&nbsp;</span>		return&nbsp;cache[viewType]&nbsp;||&nbsp;(cache[viewType]&nbsp;=&nbsp;this.buildViewSpec(viewType));<a name="line_7590"></a></li>
<li id="line_7591" class="odd"><span class="lineNumber">&nbsp;7591&nbsp;</span>	},<a name="line_7591"></a></li>
<li id="line_7592" class="even"><span class="lineNumber">&nbsp;7592&nbsp;</span><a name="line_7592"></a></li>
<li id="line_7593" class="odd"><span class="lineNumber">&nbsp;7593&nbsp;</span><a name="line_7593"></a></li>
<li id="line_7594" class="even"><span class="lineNumber">&nbsp;7594&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;duration&nbsp;singular&nbsp;unit,&nbsp;like&nbsp;"week"&nbsp;or&nbsp;"day",&nbsp;finds&nbsp;a&nbsp;matching&nbsp;view&nbsp;spec.<a name="line_7594"></a></li>
<li id="line_7595" class="odd"><span class="lineNumber">&nbsp;7595&nbsp;</span>	//&nbsp;Preference&nbsp;is&nbsp;given&nbsp;to&nbsp;views&nbsp;that&nbsp;have&nbsp;corresponding&nbsp;buttons.<a name="line_7595"></a></li>
<li id="line_7596" class="even"><span class="lineNumber">&nbsp;7596&nbsp;</span>	getUnitViewSpec:&nbsp;function(unit)&nbsp;{<a name="line_7596"></a></li>
<li id="line_7597" class="odd"><span class="lineNumber">&nbsp;7597&nbsp;</span>		var&nbsp;viewTypes;<a name="line_7597"></a></li>
<li id="line_7598" class="even"><span class="lineNumber">&nbsp;7598&nbsp;</span>		var&nbsp;i;<a name="line_7598"></a></li>
<li id="line_7599" class="odd"><span class="lineNumber">&nbsp;7599&nbsp;</span>		var&nbsp;spec;<a name="line_7599"></a></li>
<li id="line_7600" class="even"><span class="lineNumber">&nbsp;7600&nbsp;</span><a name="line_7600"></a></li>
<li id="line_7601" class="odd"><span class="lineNumber">&nbsp;7601&nbsp;</span>		if&nbsp;($.inArray(unit,&nbsp;intervalUnits)&nbsp;!=&nbsp;-1)&nbsp;{<a name="line_7601"></a></li>
<li id="line_7602" class="even"><span class="lineNumber">&nbsp;7602&nbsp;</span><a name="line_7602"></a></li>
<li id="line_7603" class="odd"><span class="lineNumber">&nbsp;7603&nbsp;</span>			//&nbsp;put&nbsp;views&nbsp;that&nbsp;have&nbsp;buttons&nbsp;first.&nbsp;there&nbsp;will&nbsp;be&nbsp;duplicates,&nbsp;but&nbsp;oh&nbsp;well<a name="line_7603"></a></li>
<li id="line_7604" class="even"><span class="lineNumber">&nbsp;7604&nbsp;</span>			viewTypes&nbsp;=&nbsp;this.header.getViewsWithButtons();<a name="line_7604"></a></li>
<li id="line_7605" class="odd"><span class="lineNumber">&nbsp;7605&nbsp;</span>			$.each(fc.views,&nbsp;function(viewType)&nbsp;{&nbsp;//&nbsp;all&nbsp;views<a name="line_7605"></a></li>
<li id="line_7606" class="even"><span class="lineNumber">&nbsp;7606&nbsp;</span>				viewTypes.push(viewType);<a name="line_7606"></a></li>
<li id="line_7607" class="odd"><span class="lineNumber">&nbsp;7607&nbsp;</span>			});<a name="line_7607"></a></li>
<li id="line_7608" class="even"><span class="lineNumber">&nbsp;7608&nbsp;</span><a name="line_7608"></a></li>
<li id="line_7609" class="odd"><span class="lineNumber">&nbsp;7609&nbsp;</span>			for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;viewTypes.length;&nbsp;i++)&nbsp;{<a name="line_7609"></a></li>
<li id="line_7610" class="even"><span class="lineNumber">&nbsp;7610&nbsp;</span>				spec&nbsp;=&nbsp;this.getViewSpec(viewTypes[i]);<a name="line_7610"></a></li>
<li id="line_7611" class="odd"><span class="lineNumber">&nbsp;7611&nbsp;</span>				if&nbsp;(spec)&nbsp;{<a name="line_7611"></a></li>
<li id="line_7612" class="even"><span class="lineNumber">&nbsp;7612&nbsp;</span>					if&nbsp;(spec.singleUnit&nbsp;==&nbsp;unit)&nbsp;{<a name="line_7612"></a></li>
<li id="line_7613" class="odd"><span class="lineNumber">&nbsp;7613&nbsp;</span>						return&nbsp;spec;<a name="line_7613"></a></li>
<li id="line_7614" class="even"><span class="lineNumber">&nbsp;7614&nbsp;</span>					}<a name="line_7614"></a></li>
<li id="line_7615" class="odd"><span class="lineNumber">&nbsp;7615&nbsp;</span>				}<a name="line_7615"></a></li>
<li id="line_7616" class="even"><span class="lineNumber">&nbsp;7616&nbsp;</span>			}<a name="line_7616"></a></li>
<li id="line_7617" class="odd"><span class="lineNumber">&nbsp;7617&nbsp;</span>		}<a name="line_7617"></a></li>
<li id="line_7618" class="even"><span class="lineNumber">&nbsp;7618&nbsp;</span>	},<a name="line_7618"></a></li>
<li id="line_7619" class="odd"><span class="lineNumber">&nbsp;7619&nbsp;</span><a name="line_7619"></a></li>
<li id="line_7620" class="even"><span class="lineNumber">&nbsp;7620&nbsp;</span><a name="line_7620"></a></li>
<li id="line_7621" class="odd"><span class="lineNumber">&nbsp;7621&nbsp;</span>	//&nbsp;Builds&nbsp;an&nbsp;object&nbsp;with&nbsp;information&nbsp;on&nbsp;how&nbsp;to&nbsp;create&nbsp;a&nbsp;given&nbsp;view<a name="line_7621"></a></li>
<li id="line_7622" class="even"><span class="lineNumber">&nbsp;7622&nbsp;</span>	buildViewSpec:&nbsp;function(requestedViewType)&nbsp;{<a name="line_7622"></a></li>
<li id="line_7623" class="odd"><span class="lineNumber">&nbsp;7623&nbsp;</span>		var&nbsp;viewOverrides&nbsp;=&nbsp;this.overrides.views&nbsp;||&nbsp;{};<a name="line_7623"></a></li>
<li id="line_7624" class="even"><span class="lineNumber">&nbsp;7624&nbsp;</span>		var&nbsp;specChain&nbsp;=&nbsp;[];&nbsp;//&nbsp;for&nbsp;the&nbsp;view.&nbsp;lowest&nbsp;to&nbsp;highest&nbsp;priority<a name="line_7624"></a></li>
<li id="line_7625" class="odd"><span class="lineNumber">&nbsp;7625&nbsp;</span>		var&nbsp;defaultsChain&nbsp;=&nbsp;[];&nbsp;//&nbsp;for&nbsp;the&nbsp;view.&nbsp;lowest&nbsp;to&nbsp;highest&nbsp;priority<a name="line_7625"></a></li>
<li id="line_7626" class="even"><span class="lineNumber">&nbsp;7626&nbsp;</span>		var&nbsp;overridesChain&nbsp;=&nbsp;[];&nbsp;//&nbsp;for&nbsp;the&nbsp;view.&nbsp;lowest&nbsp;to&nbsp;highest&nbsp;priority<a name="line_7626"></a></li>
<li id="line_7627" class="odd"><span class="lineNumber">&nbsp;7627&nbsp;</span>		var&nbsp;viewType&nbsp;=&nbsp;requestedViewType;<a name="line_7627"></a></li>
<li id="line_7628" class="even"><span class="lineNumber">&nbsp;7628&nbsp;</span>		var&nbsp;spec;&nbsp;//&nbsp;for&nbsp;the&nbsp;view<a name="line_7628"></a></li>
<li id="line_7629" class="odd"><span class="lineNumber">&nbsp;7629&nbsp;</span>		var&nbsp;overrides;&nbsp;//&nbsp;for&nbsp;the&nbsp;view<a name="line_7629"></a></li>
<li id="line_7630" class="even"><span class="lineNumber">&nbsp;7630&nbsp;</span>		var&nbsp;duration;<a name="line_7630"></a></li>
<li id="line_7631" class="odd"><span class="lineNumber">&nbsp;7631&nbsp;</span>		var&nbsp;unit;<a name="line_7631"></a></li>
<li id="line_7632" class="even"><span class="lineNumber">&nbsp;7632&nbsp;</span><a name="line_7632"></a></li>
<li id="line_7633" class="odd"><span class="lineNumber">&nbsp;7633&nbsp;</span>		//&nbsp;iterate&nbsp;from&nbsp;the&nbsp;specific&nbsp;view&nbsp;definition&nbsp;to&nbsp;a&nbsp;more&nbsp;general&nbsp;one&nbsp;until&nbsp;we&nbsp;hit&nbsp;an&nbsp;actual&nbsp;View&nbsp;class<a name="line_7633"></a></li>
<li id="line_7634" class="even"><span class="lineNumber">&nbsp;7634&nbsp;</span>		while&nbsp;(viewType)&nbsp;{<a name="line_7634"></a></li>
<li id="line_7635" class="odd"><span class="lineNumber">&nbsp;7635&nbsp;</span>			spec&nbsp;=&nbsp;fcViews[viewType];<a name="line_7635"></a></li>
<li id="line_7636" class="even"><span class="lineNumber">&nbsp;7636&nbsp;</span>			overrides&nbsp;=&nbsp;viewOverrides[viewType];<a name="line_7636"></a></li>
<li id="line_7637" class="odd"><span class="lineNumber">&nbsp;7637&nbsp;</span>			viewType&nbsp;=&nbsp;null;&nbsp;//&nbsp;clear.&nbsp;might&nbsp;repopulate&nbsp;for&nbsp;another&nbsp;iteration<a name="line_7637"></a></li>
<li id="line_7638" class="even"><span class="lineNumber">&nbsp;7638&nbsp;</span><a name="line_7638"></a></li>
<li id="line_7639" class="odd"><span class="lineNumber">&nbsp;7639&nbsp;</span>			if&nbsp;(typeof&nbsp;spec&nbsp;===&nbsp;'function')&nbsp;{&nbsp;//&nbsp;TODO:&nbsp;deprecate<a name="line_7639"></a></li>
<li id="line_7640" class="even"><span class="lineNumber">&nbsp;7640&nbsp;</span>				spec&nbsp;=&nbsp;{&nbsp;'class':&nbsp;spec&nbsp;};<a name="line_7640"></a></li>
<li id="line_7641" class="odd"><span class="lineNumber">&nbsp;7641&nbsp;</span>			}<a name="line_7641"></a></li>
<li id="line_7642" class="even"><span class="lineNumber">&nbsp;7642&nbsp;</span><a name="line_7642"></a></li>
<li id="line_7643" class="odd"><span class="lineNumber">&nbsp;7643&nbsp;</span>			if&nbsp;(spec)&nbsp;{<a name="line_7643"></a></li>
<li id="line_7644" class="even"><span class="lineNumber">&nbsp;7644&nbsp;</span>				specChain.unshift(spec);<a name="line_7644"></a></li>
<li id="line_7645" class="odd"><span class="lineNumber">&nbsp;7645&nbsp;</span>				defaultsChain.unshift(spec.defaults&nbsp;||&nbsp;{});<a name="line_7645"></a></li>
<li id="line_7646" class="even"><span class="lineNumber">&nbsp;7646&nbsp;</span>				duration&nbsp;=&nbsp;duration&nbsp;||&nbsp;spec.duration;<a name="line_7646"></a></li>
<li id="line_7647" class="odd"><span class="lineNumber">&nbsp;7647&nbsp;</span>				viewType&nbsp;=&nbsp;viewType&nbsp;||&nbsp;spec.type;<a name="line_7647"></a></li>
<li id="line_7648" class="even"><span class="lineNumber">&nbsp;7648&nbsp;</span>			}<a name="line_7648"></a></li>
<li id="line_7649" class="odd"><span class="lineNumber">&nbsp;7649&nbsp;</span><a name="line_7649"></a></li>
<li id="line_7650" class="even"><span class="lineNumber">&nbsp;7650&nbsp;</span>			if&nbsp;(overrides)&nbsp;{<a name="line_7650"></a></li>
<li id="line_7651" class="odd"><span class="lineNumber">&nbsp;7651&nbsp;</span>				overridesChain.unshift(overrides);&nbsp;//&nbsp;view-specific&nbsp;option&nbsp;hashes&nbsp;have&nbsp;options&nbsp;at&nbsp;zero-level<a name="line_7651"></a></li>
<li id="line_7652" class="even"><span class="lineNumber">&nbsp;7652&nbsp;</span>				duration&nbsp;=&nbsp;duration&nbsp;||&nbsp;overrides.duration;<a name="line_7652"></a></li>
<li id="line_7653" class="odd"><span class="lineNumber">&nbsp;7653&nbsp;</span>				viewType&nbsp;=&nbsp;viewType&nbsp;||&nbsp;overrides.type;<a name="line_7653"></a></li>
<li id="line_7654" class="even"><span class="lineNumber">&nbsp;7654&nbsp;</span>			}<a name="line_7654"></a></li>
<li id="line_7655" class="odd"><span class="lineNumber">&nbsp;7655&nbsp;</span>		}<a name="line_7655"></a></li>
<li id="line_7656" class="even"><span class="lineNumber">&nbsp;7656&nbsp;</span><a name="line_7656"></a></li>
<li id="line_7657" class="odd"><span class="lineNumber">&nbsp;7657&nbsp;</span>		spec&nbsp;=&nbsp;mergeProps(specChain);<a name="line_7657"></a></li>
<li id="line_7658" class="even"><span class="lineNumber">&nbsp;7658&nbsp;</span>		spec.type&nbsp;=&nbsp;requestedViewType;<a name="line_7658"></a></li>
<li id="line_7659" class="odd"><span class="lineNumber">&nbsp;7659&nbsp;</span>		if&nbsp;(!spec['class'])&nbsp;{<a name="line_7659"></a></li>
<li id="line_7660" class="even"><span class="lineNumber">&nbsp;7660&nbsp;</span>			return&nbsp;false;<a name="line_7660"></a></li>
<li id="line_7661" class="odd"><span class="lineNumber">&nbsp;7661&nbsp;</span>		}<a name="line_7661"></a></li>
<li id="line_7662" class="even"><span class="lineNumber">&nbsp;7662&nbsp;</span><a name="line_7662"></a></li>
<li id="line_7663" class="odd"><span class="lineNumber">&nbsp;7663&nbsp;</span>		if&nbsp;(duration)&nbsp;{<a name="line_7663"></a></li>
<li id="line_7664" class="even"><span class="lineNumber">&nbsp;7664&nbsp;</span>			duration&nbsp;=&nbsp;moment.duration(duration);<a name="line_7664"></a></li>
<li id="line_7665" class="odd"><span class="lineNumber">&nbsp;7665&nbsp;</span>			if&nbsp;(duration.valueOf())&nbsp;{&nbsp;//&nbsp;valid?<a name="line_7665"></a></li>
<li id="line_7666" class="even"><span class="lineNumber">&nbsp;7666&nbsp;</span>				spec.duration&nbsp;=&nbsp;duration;<a name="line_7666"></a></li>
<li id="line_7667" class="odd"><span class="lineNumber">&nbsp;7667&nbsp;</span>				unit&nbsp;=&nbsp;computeIntervalUnit(duration);<a name="line_7667"></a></li>
<li id="line_7668" class="even"><span class="lineNumber">&nbsp;7668&nbsp;</span><a name="line_7668"></a></li>
<li id="line_7669" class="odd"><span class="lineNumber">&nbsp;7669&nbsp;</span>				//&nbsp;view&nbsp;is&nbsp;a&nbsp;single-unit&nbsp;duration,&nbsp;like&nbsp;"week"&nbsp;or&nbsp;"day"<a name="line_7669"></a></li>
<li id="line_7670" class="even"><span class="lineNumber">&nbsp;7670&nbsp;</span>				//&nbsp;incorporate&nbsp;options&nbsp;for&nbsp;this.&nbsp;lowest&nbsp;priority<a name="line_7670"></a></li>
<li id="line_7671" class="odd"><span class="lineNumber">&nbsp;7671&nbsp;</span>				if&nbsp;(duration.as(unit)&nbsp;===&nbsp;1)&nbsp;{<a name="line_7671"></a></li>
<li id="line_7672" class="even"><span class="lineNumber">&nbsp;7672&nbsp;</span>					spec.singleUnit&nbsp;=&nbsp;unit;<a name="line_7672"></a></li>
<li id="line_7673" class="odd"><span class="lineNumber">&nbsp;7673&nbsp;</span>					overridesChain.unshift(viewOverrides[unit]&nbsp;||&nbsp;{});<a name="line_7673"></a></li>
<li id="line_7674" class="even"><span class="lineNumber">&nbsp;7674&nbsp;</span>				}<a name="line_7674"></a></li>
<li id="line_7675" class="odd"><span class="lineNumber">&nbsp;7675&nbsp;</span>			}<a name="line_7675"></a></li>
<li id="line_7676" class="even"><span class="lineNumber">&nbsp;7676&nbsp;</span>		}<a name="line_7676"></a></li>
<li id="line_7677" class="odd"><span class="lineNumber">&nbsp;7677&nbsp;</span><a name="line_7677"></a></li>
<li id="line_7678" class="even"><span class="lineNumber">&nbsp;7678&nbsp;</span>		spec.defaults&nbsp;=&nbsp;mergeOptions(defaultsChain);<a name="line_7678"></a></li>
<li id="line_7679" class="odd"><span class="lineNumber">&nbsp;7679&nbsp;</span>		spec.overrides&nbsp;=&nbsp;mergeOptions(overridesChain);<a name="line_7679"></a></li>
<li id="line_7680" class="even"><span class="lineNumber">&nbsp;7680&nbsp;</span><a name="line_7680"></a></li>
<li id="line_7681" class="odd"><span class="lineNumber">&nbsp;7681&nbsp;</span>		this.buildViewSpecOptions(spec);<a name="line_7681"></a></li>
<li id="line_7682" class="even"><span class="lineNumber">&nbsp;7682&nbsp;</span>		this.buildViewSpecButtonText(spec,&nbsp;requestedViewType);<a name="line_7682"></a></li>
<li id="line_7683" class="odd"><span class="lineNumber">&nbsp;7683&nbsp;</span><a name="line_7683"></a></li>
<li id="line_7684" class="even"><span class="lineNumber">&nbsp;7684&nbsp;</span>		return&nbsp;spec;<a name="line_7684"></a></li>
<li id="line_7685" class="odd"><span class="lineNumber">&nbsp;7685&nbsp;</span>	},<a name="line_7685"></a></li>
<li id="line_7686" class="even"><span class="lineNumber">&nbsp;7686&nbsp;</span><a name="line_7686"></a></li>
<li id="line_7687" class="odd"><span class="lineNumber">&nbsp;7687&nbsp;</span><a name="line_7687"></a></li>
<li id="line_7688" class="even"><span class="lineNumber">&nbsp;7688&nbsp;</span>	//&nbsp;Builds&nbsp;and&nbsp;assigns&nbsp;a&nbsp;view&nbsp;spec's&nbsp;options&nbsp;object&nbsp;from&nbsp;its&nbsp;already-assigned&nbsp;defaults&nbsp;and&nbsp;overrides<a name="line_7688"></a></li>
<li id="line_7689" class="odd"><span class="lineNumber">&nbsp;7689&nbsp;</span>	buildViewSpecOptions:&nbsp;function(spec)&nbsp;{<a name="line_7689"></a></li>
<li id="line_7690" class="even"><span class="lineNumber">&nbsp;7690&nbsp;</span>		spec.options&nbsp;=&nbsp;mergeOptions([&nbsp;//&nbsp;lowest&nbsp;to&nbsp;highest&nbsp;priority<a name="line_7690"></a></li>
<li id="line_7691" class="odd"><span class="lineNumber">&nbsp;7691&nbsp;</span>			Calendar.defaults,&nbsp;//&nbsp;global&nbsp;defaults<a name="line_7691"></a></li>
<li id="line_7692" class="even"><span class="lineNumber">&nbsp;7692&nbsp;</span>			spec.defaults,&nbsp;//&nbsp;view's&nbsp;defaults&nbsp;(from&nbsp;ViewSubclass.defaults)<a name="line_7692"></a></li>
<li id="line_7693" class="odd"><span class="lineNumber">&nbsp;7693&nbsp;</span>			this.dirDefaults,<a name="line_7693"></a></li>
<li id="line_7694" class="even"><span class="lineNumber">&nbsp;7694&nbsp;</span>			this.langDefaults,&nbsp;//&nbsp;locale&nbsp;and&nbsp;dir&nbsp;take&nbsp;precedence&nbsp;over&nbsp;view's&nbsp;defaults!<a name="line_7694"></a></li>
<li id="line_7695" class="odd"><span class="lineNumber">&nbsp;7695&nbsp;</span>			this.overrides,&nbsp;//&nbsp;calendar's&nbsp;overrides&nbsp;(options&nbsp;given&nbsp;to&nbsp;constructor)<a name="line_7695"></a></li>
<li id="line_7696" class="even"><span class="lineNumber">&nbsp;7696&nbsp;</span>			spec.overrides&nbsp;//&nbsp;view's&nbsp;overrides&nbsp;(view-specific&nbsp;options)<a name="line_7696"></a></li>
<li id="line_7697" class="odd"><span class="lineNumber">&nbsp;7697&nbsp;</span>		]);<a name="line_7697"></a></li>
<li id="line_7698" class="even"><span class="lineNumber">&nbsp;7698&nbsp;</span>		populateInstanceComputableOptions(spec.options);<a name="line_7698"></a></li>
<li id="line_7699" class="odd"><span class="lineNumber">&nbsp;7699&nbsp;</span>	},<a name="line_7699"></a></li>
<li id="line_7700" class="even"><span class="lineNumber">&nbsp;7700&nbsp;</span><a name="line_7700"></a></li>
<li id="line_7701" class="odd"><span class="lineNumber">&nbsp;7701&nbsp;</span><a name="line_7701"></a></li>
<li id="line_7702" class="even"><span class="lineNumber">&nbsp;7702&nbsp;</span>	//&nbsp;Computes&nbsp;and&nbsp;assigns&nbsp;a&nbsp;view&nbsp;spec's&nbsp;buttonText-related&nbsp;options<a name="line_7702"></a></li>
<li id="line_7703" class="odd"><span class="lineNumber">&nbsp;7703&nbsp;</span>	buildViewSpecButtonText:&nbsp;function(spec,&nbsp;requestedViewType)&nbsp;{<a name="line_7703"></a></li>
<li id="line_7704" class="even"><span class="lineNumber">&nbsp;7704&nbsp;</span><a name="line_7704"></a></li>
<li id="line_7705" class="odd"><span class="lineNumber">&nbsp;7705&nbsp;</span>		//&nbsp;given&nbsp;an&nbsp;options&nbsp;object&nbsp;with&nbsp;a&nbsp;possible&nbsp;`buttonText`&nbsp;hash,&nbsp;lookup&nbsp;the&nbsp;buttonText&nbsp;for&nbsp;the<a name="line_7705"></a></li>
<li id="line_7706" class="even"><span class="lineNumber">&nbsp;7706&nbsp;</span>		//&nbsp;requested&nbsp;view,&nbsp;falling&nbsp;back&nbsp;to&nbsp;a&nbsp;generic&nbsp;unit&nbsp;entry&nbsp;like&nbsp;"week"&nbsp;or&nbsp;"day"<a name="line_7706"></a></li>
<li id="line_7707" class="odd"><span class="lineNumber">&nbsp;7707&nbsp;</span>		function&nbsp;queryButtonText(options)&nbsp;{<a name="line_7707"></a></li>
<li id="line_7708" class="even"><span class="lineNumber">&nbsp;7708&nbsp;</span>			var&nbsp;buttonText&nbsp;=&nbsp;options.buttonText&nbsp;||&nbsp;{};<a name="line_7708"></a></li>
<li id="line_7709" class="odd"><span class="lineNumber">&nbsp;7709&nbsp;</span>			return&nbsp;buttonText[requestedViewType]&nbsp;||<a name="line_7709"></a></li>
<li id="line_7710" class="even"><span class="lineNumber">&nbsp;7710&nbsp;</span>				(spec.singleUnit&nbsp;?&nbsp;buttonText[spec.singleUnit]&nbsp;:&nbsp;null);<a name="line_7710"></a></li>
<li id="line_7711" class="odd"><span class="lineNumber">&nbsp;7711&nbsp;</span>		}<a name="line_7711"></a></li>
<li id="line_7712" class="even"><span class="lineNumber">&nbsp;7712&nbsp;</span><a name="line_7712"></a></li>
<li id="line_7713" class="odd"><span class="lineNumber">&nbsp;7713&nbsp;</span>		//&nbsp;highest&nbsp;to&nbsp;lowest&nbsp;priority<a name="line_7713"></a></li>
<li id="line_7714" class="even"><span class="lineNumber">&nbsp;7714&nbsp;</span>		spec.buttonTextOverride&nbsp;=<a name="line_7714"></a></li>
<li id="line_7715" class="odd"><span class="lineNumber">&nbsp;7715&nbsp;</span>			queryButtonText(this.overrides)&nbsp;||&nbsp;//&nbsp;constructor-specified&nbsp;buttonText&nbsp;lookup&nbsp;hash&nbsp;takes&nbsp;precedence<a name="line_7715"></a></li>
<li id="line_7716" class="even"><span class="lineNumber">&nbsp;7716&nbsp;</span>			spec.overrides.buttonText;&nbsp;//&nbsp;`buttonText`&nbsp;for&nbsp;view-specific&nbsp;options&nbsp;is&nbsp;a&nbsp;string<a name="line_7716"></a></li>
<li id="line_7717" class="odd"><span class="lineNumber">&nbsp;7717&nbsp;</span><a name="line_7717"></a></li>
<li id="line_7718" class="even"><span class="lineNumber">&nbsp;7718&nbsp;</span>		//&nbsp;highest&nbsp;to&nbsp;lowest&nbsp;priority.&nbsp;mirrors&nbsp;buildViewSpecOptions<a name="line_7718"></a></li>
<li id="line_7719" class="odd"><span class="lineNumber">&nbsp;7719&nbsp;</span>		spec.buttonTextDefault&nbsp;=<a name="line_7719"></a></li>
<li id="line_7720" class="even"><span class="lineNumber">&nbsp;7720&nbsp;</span>			queryButtonText(this.langDefaults)&nbsp;||<a name="line_7720"></a></li>
<li id="line_7721" class="odd"><span class="lineNumber">&nbsp;7721&nbsp;</span>			queryButtonText(this.dirDefaults)&nbsp;||<a name="line_7721"></a></li>
<li id="line_7722" class="even"><span class="lineNumber">&nbsp;7722&nbsp;</span>			spec.defaults.buttonText&nbsp;||&nbsp;//&nbsp;a&nbsp;single&nbsp;string.&nbsp;from&nbsp;ViewSubclass.defaults<a name="line_7722"></a></li>
<li id="line_7723" class="odd"><span class="lineNumber">&nbsp;7723&nbsp;</span>			queryButtonText(Calendar.defaults)&nbsp;||<a name="line_7723"></a></li>
<li id="line_7724" class="even"><span class="lineNumber">&nbsp;7724&nbsp;</span>			(spec.duration&nbsp;?&nbsp;this.humanizeDuration(spec.duration)&nbsp;:&nbsp;null)&nbsp;||&nbsp;//&nbsp;like&nbsp;"3&nbsp;days"<a name="line_7724"></a></li>
<li id="line_7725" class="odd"><span class="lineNumber">&nbsp;7725&nbsp;</span>			requestedViewType;&nbsp;//&nbsp;fall&nbsp;back&nbsp;to&nbsp;given&nbsp;view&nbsp;name<a name="line_7725"></a></li>
<li id="line_7726" class="even"><span class="lineNumber">&nbsp;7726&nbsp;</span>	},<a name="line_7726"></a></li>
<li id="line_7727" class="odd"><span class="lineNumber">&nbsp;7727&nbsp;</span><a name="line_7727"></a></li>
<li id="line_7728" class="even"><span class="lineNumber">&nbsp;7728&nbsp;</span><a name="line_7728"></a></li>
<li id="line_7729" class="odd"><span class="lineNumber">&nbsp;7729&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;view&nbsp;name&nbsp;for&nbsp;a&nbsp;custom&nbsp;view&nbsp;or&nbsp;a&nbsp;standard&nbsp;view,&nbsp;creates&nbsp;a&nbsp;ready-to-go&nbsp;View&nbsp;object<a name="line_7729"></a></li>
<li id="line_7730" class="even"><span class="lineNumber">&nbsp;7730&nbsp;</span>	instantiateView:&nbsp;function(viewType)&nbsp;{<a name="line_7730"></a></li>
<li id="line_7731" class="odd"><span class="lineNumber">&nbsp;7731&nbsp;</span>		var&nbsp;spec&nbsp;=&nbsp;this.getViewSpec(viewType);<a name="line_7731"></a></li>
<li id="line_7732" class="even"><span class="lineNumber">&nbsp;7732&nbsp;</span><a name="line_7732"></a></li>
<li id="line_7733" class="odd"><span class="lineNumber">&nbsp;7733&nbsp;</span>		return&nbsp;new&nbsp;spec['class'](this,&nbsp;viewType,&nbsp;spec.options,&nbsp;spec.duration);<a name="line_7733"></a></li>
<li id="line_7734" class="even"><span class="lineNumber">&nbsp;7734&nbsp;</span>	},<a name="line_7734"></a></li>
<li id="line_7735" class="odd"><span class="lineNumber">&nbsp;7735&nbsp;</span><a name="line_7735"></a></li>
<li id="line_7736" class="even"><span class="lineNumber">&nbsp;7736&nbsp;</span><a name="line_7736"></a></li>
<li id="line_7737" class="odd"><span class="lineNumber">&nbsp;7737&nbsp;</span>	//&nbsp;Returns&nbsp;a&nbsp;boolean&nbsp;about&nbsp;whether&nbsp;the&nbsp;view&nbsp;is&nbsp;okay&nbsp;to&nbsp;instantiate&nbsp;at&nbsp;some&nbsp;point<a name="line_7737"></a></li>
<li id="line_7738" class="even"><span class="lineNumber">&nbsp;7738&nbsp;</span>	isValidViewType:&nbsp;function(viewType)&nbsp;{<a name="line_7738"></a></li>
<li id="line_7739" class="odd"><span class="lineNumber">&nbsp;7739&nbsp;</span>		return&nbsp;Boolean(this.getViewSpec(viewType));<a name="line_7739"></a></li>
<li id="line_7740" class="even"><span class="lineNumber">&nbsp;7740&nbsp;</span>	},<a name="line_7740"></a></li>
<li id="line_7741" class="odd"><span class="lineNumber">&nbsp;7741&nbsp;</span><a name="line_7741"></a></li>
<li id="line_7742" class="even"><span class="lineNumber">&nbsp;7742&nbsp;</span><a name="line_7742"></a></li>
<li id="line_7743" class="odd"><span class="lineNumber">&nbsp;7743&nbsp;</span>	//&nbsp;Should&nbsp;be&nbsp;called&nbsp;when&nbsp;any&nbsp;type&nbsp;of&nbsp;async&nbsp;data&nbsp;fetching&nbsp;begins<a name="line_7743"></a></li>
<li id="line_7744" class="even"><span class="lineNumber">&nbsp;7744&nbsp;</span>	pushLoading:&nbsp;function()&nbsp;{<a name="line_7744"></a></li>
<li id="line_7745" class="odd"><span class="lineNumber">&nbsp;7745&nbsp;</span>		if&nbsp;(!(this.loadingLevel++))&nbsp;{<a name="line_7745"></a></li>
<li id="line_7746" class="even"><span class="lineNumber">&nbsp;7746&nbsp;</span>			this.trigger('loading',&nbsp;null,&nbsp;true,&nbsp;this.view);<a name="line_7746"></a></li>
<li id="line_7747" class="odd"><span class="lineNumber">&nbsp;7747&nbsp;</span>		}<a name="line_7747"></a></li>
<li id="line_7748" class="even"><span class="lineNumber">&nbsp;7748&nbsp;</span>	},<a name="line_7748"></a></li>
<li id="line_7749" class="odd"><span class="lineNumber">&nbsp;7749&nbsp;</span><a name="line_7749"></a></li>
<li id="line_7750" class="even"><span class="lineNumber">&nbsp;7750&nbsp;</span><a name="line_7750"></a></li>
<li id="line_7751" class="odd"><span class="lineNumber">&nbsp;7751&nbsp;</span>	//&nbsp;Should&nbsp;be&nbsp;called&nbsp;when&nbsp;any&nbsp;type&nbsp;of&nbsp;async&nbsp;data&nbsp;fetching&nbsp;completes<a name="line_7751"></a></li>
<li id="line_7752" class="even"><span class="lineNumber">&nbsp;7752&nbsp;</span>	popLoading:&nbsp;function()&nbsp;{<a name="line_7752"></a></li>
<li id="line_7753" class="odd"><span class="lineNumber">&nbsp;7753&nbsp;</span>		if&nbsp;(!(--this.loadingLevel))&nbsp;{<a name="line_7753"></a></li>
<li id="line_7754" class="even"><span class="lineNumber">&nbsp;7754&nbsp;</span>			this.trigger('loading',&nbsp;null,&nbsp;false,&nbsp;this.view);<a name="line_7754"></a></li>
<li id="line_7755" class="odd"><span class="lineNumber">&nbsp;7755&nbsp;</span>		}<a name="line_7755"></a></li>
<li id="line_7756" class="even"><span class="lineNumber">&nbsp;7756&nbsp;</span>	},<a name="line_7756"></a></li>
<li id="line_7757" class="odd"><span class="lineNumber">&nbsp;7757&nbsp;</span><a name="line_7757"></a></li>
<li id="line_7758" class="even"><span class="lineNumber">&nbsp;7758&nbsp;</span><a name="line_7758"></a></li>
<li id="line_7759" class="odd"><span class="lineNumber">&nbsp;7759&nbsp;</span>	//&nbsp;Given&nbsp;arguments&nbsp;to&nbsp;the&nbsp;select&nbsp;method&nbsp;in&nbsp;the&nbsp;API,&nbsp;returns&nbsp;a&nbsp;range<a name="line_7759"></a></li>
<li id="line_7760" class="even"><span class="lineNumber">&nbsp;7760&nbsp;</span>	buildSelectRange:&nbsp;function(start,&nbsp;end)&nbsp;{<a name="line_7760"></a></li>
<li id="line_7761" class="odd"><span class="lineNumber">&nbsp;7761&nbsp;</span><a name="line_7761"></a></li>
<li id="line_7762" class="even"><span class="lineNumber">&nbsp;7762&nbsp;</span>		start&nbsp;=&nbsp;this.moment(start);<a name="line_7762"></a></li>
<li id="line_7763" class="odd"><span class="lineNumber">&nbsp;7763&nbsp;</span>		if&nbsp;(end)&nbsp;{<a name="line_7763"></a></li>
<li id="line_7764" class="even"><span class="lineNumber">&nbsp;7764&nbsp;</span>			end&nbsp;=&nbsp;this.moment(end);<a name="line_7764"></a></li>
<li id="line_7765" class="odd"><span class="lineNumber">&nbsp;7765&nbsp;</span>		}<a name="line_7765"></a></li>
<li id="line_7766" class="even"><span class="lineNumber">&nbsp;7766&nbsp;</span>		else&nbsp;if&nbsp;(start.hasTime())&nbsp;{<a name="line_7766"></a></li>
<li id="line_7767" class="odd"><span class="lineNumber">&nbsp;7767&nbsp;</span>			end&nbsp;=&nbsp;start.clone().add(this.defaultTimedEventDuration);<a name="line_7767"></a></li>
<li id="line_7768" class="even"><span class="lineNumber">&nbsp;7768&nbsp;</span>		}<a name="line_7768"></a></li>
<li id="line_7769" class="odd"><span class="lineNumber">&nbsp;7769&nbsp;</span>		else&nbsp;{<a name="line_7769"></a></li>
<li id="line_7770" class="even"><span class="lineNumber">&nbsp;7770&nbsp;</span>			end&nbsp;=&nbsp;start.clone().add(this.defaultAllDayEventDuration);<a name="line_7770"></a></li>
<li id="line_7771" class="odd"><span class="lineNumber">&nbsp;7771&nbsp;</span>		}<a name="line_7771"></a></li>
<li id="line_7772" class="even"><span class="lineNumber">&nbsp;7772&nbsp;</span><a name="line_7772"></a></li>
<li id="line_7773" class="odd"><span class="lineNumber">&nbsp;7773&nbsp;</span>		return&nbsp;{&nbsp;start:&nbsp;start,&nbsp;end:&nbsp;end&nbsp;};<a name="line_7773"></a></li>
<li id="line_7774" class="even"><span class="lineNumber">&nbsp;7774&nbsp;</span>	}<a name="line_7774"></a></li>
<li id="line_7775" class="odd"><span class="lineNumber">&nbsp;7775&nbsp;</span><a name="line_7775"></a></li>
<li id="line_7776" class="even"><span class="lineNumber">&nbsp;7776&nbsp;</span>});<a name="line_7776"></a></li>
<li id="line_7777" class="odd"><span class="lineNumber">&nbsp;7777&nbsp;</span><a name="line_7777"></a></li>
<li id="line_7778" class="even"><span class="lineNumber">&nbsp;7778&nbsp;</span><a name="line_7778"></a></li>
<li id="line_7779" class="odd"><span class="lineNumber">&nbsp;7779&nbsp;</span>function&nbsp;Calendar_constructor(element,&nbsp;overrides)&nbsp;{<a name="line_7779"></a></li>
<li id="line_7780" class="even"><span class="lineNumber">&nbsp;7780&nbsp;</span>	var&nbsp;t&nbsp;=&nbsp;this;<a name="line_7780"></a></li>
<li id="line_7781" class="odd"><span class="lineNumber">&nbsp;7781&nbsp;</span><a name="line_7781"></a></li>
<li id="line_7782" class="even"><span class="lineNumber">&nbsp;7782&nbsp;</span><a name="line_7782"></a></li>
<li id="line_7783" class="odd"><span class="lineNumber">&nbsp;7783&nbsp;</span>	t.initOptions(overrides&nbsp;||&nbsp;{});<a name="line_7783"></a></li>
<li id="line_7784" class="even"><span class="lineNumber">&nbsp;7784&nbsp;</span>	var&nbsp;options&nbsp;=&nbsp;this.options;<a name="line_7784"></a></li>
<li id="line_7785" class="odd"><span class="lineNumber">&nbsp;7785&nbsp;</span><a name="line_7785"></a></li>
<li id="line_7786" class="even"><span class="lineNumber">&nbsp;7786&nbsp;</span>	<a name="line_7786"></a></li>
<li id="line_7787" class="odd"><span class="lineNumber">&nbsp;7787&nbsp;</span>	//&nbsp;Exports<a name="line_7787"></a></li>
<li id="line_7788" class="even"><span class="lineNumber">&nbsp;7788&nbsp;</span>	//&nbsp;-----------------------------------------------------------------------------------<a name="line_7788"></a></li>
<li id="line_7789" class="odd"><span class="lineNumber">&nbsp;7789&nbsp;</span><a name="line_7789"></a></li>
<li id="line_7790" class="even"><span class="lineNumber">&nbsp;7790&nbsp;</span>	t.render&nbsp;=&nbsp;render;<a name="line_7790"></a></li>
<li id="line_7791" class="odd"><span class="lineNumber">&nbsp;7791&nbsp;</span>	t.destroy&nbsp;=&nbsp;destroy;<a name="line_7791"></a></li>
<li id="line_7792" class="even"><span class="lineNumber">&nbsp;7792&nbsp;</span>	t.refetchEvents&nbsp;=&nbsp;refetchEvents;<a name="line_7792"></a></li>
<li id="line_7793" class="odd"><span class="lineNumber">&nbsp;7793&nbsp;</span>	t.reportEvents&nbsp;=&nbsp;reportEvents;<a name="line_7793"></a></li>
<li id="line_7794" class="even"><span class="lineNumber">&nbsp;7794&nbsp;</span>	t.reportEventChange&nbsp;=&nbsp;reportEventChange;<a name="line_7794"></a></li>
<li id="line_7795" class="odd"><span class="lineNumber">&nbsp;7795&nbsp;</span>	t.rerenderEvents&nbsp;=&nbsp;renderEvents;&nbsp;//&nbsp;`renderEvents`&nbsp;serves&nbsp;as&nbsp;a&nbsp;rerender.&nbsp;an&nbsp;API&nbsp;method<a name="line_7795"></a></li>
<li id="line_7796" class="even"><span class="lineNumber">&nbsp;7796&nbsp;</span>	t.changeView&nbsp;=&nbsp;renderView;&nbsp;//&nbsp;`renderView`&nbsp;will&nbsp;switch&nbsp;to&nbsp;another&nbsp;view<a name="line_7796"></a></li>
<li id="line_7797" class="odd"><span class="lineNumber">&nbsp;7797&nbsp;</span>	t.select&nbsp;=&nbsp;select;<a name="line_7797"></a></li>
<li id="line_7798" class="even"><span class="lineNumber">&nbsp;7798&nbsp;</span>	t.unselect&nbsp;=&nbsp;unselect;<a name="line_7798"></a></li>
<li id="line_7799" class="odd"><span class="lineNumber">&nbsp;7799&nbsp;</span>	t.prev&nbsp;=&nbsp;prev;<a name="line_7799"></a></li>
<li id="line_7800" class="even"><span class="lineNumber">&nbsp;7800&nbsp;</span>	t.next&nbsp;=&nbsp;next;<a name="line_7800"></a></li>
<li id="line_7801" class="odd"><span class="lineNumber">&nbsp;7801&nbsp;</span>	t.prevYear&nbsp;=&nbsp;prevYear;<a name="line_7801"></a></li>
<li id="line_7802" class="even"><span class="lineNumber">&nbsp;7802&nbsp;</span>	t.nextYear&nbsp;=&nbsp;nextYear;<a name="line_7802"></a></li>
<li id="line_7803" class="odd"><span class="lineNumber">&nbsp;7803&nbsp;</span>	t.today&nbsp;=&nbsp;today;<a name="line_7803"></a></li>
<li id="line_7804" class="even"><span class="lineNumber">&nbsp;7804&nbsp;</span>	t.gotoDate&nbsp;=&nbsp;gotoDate;<a name="line_7804"></a></li>
<li id="line_7805" class="odd"><span class="lineNumber">&nbsp;7805&nbsp;</span>	t.incrementDate&nbsp;=&nbsp;incrementDate;<a name="line_7805"></a></li>
<li id="line_7806" class="even"><span class="lineNumber">&nbsp;7806&nbsp;</span>	t.zoomTo&nbsp;=&nbsp;zoomTo;<a name="line_7806"></a></li>
<li id="line_7807" class="odd"><span class="lineNumber">&nbsp;7807&nbsp;</span>	t.getDate&nbsp;=&nbsp;getDate;<a name="line_7807"></a></li>
<li id="line_7808" class="even"><span class="lineNumber">&nbsp;7808&nbsp;</span>	t.getCalendar&nbsp;=&nbsp;getCalendar;<a name="line_7808"></a></li>
<li id="line_7809" class="odd"><span class="lineNumber">&nbsp;7809&nbsp;</span>	t.getView&nbsp;=&nbsp;getView;<a name="line_7809"></a></li>
<li id="line_7810" class="even"><span class="lineNumber">&nbsp;7810&nbsp;</span>	t.option&nbsp;=&nbsp;option;<a name="line_7810"></a></li>
<li id="line_7811" class="odd"><span class="lineNumber">&nbsp;7811&nbsp;</span>	t.trigger&nbsp;=&nbsp;trigger;<a name="line_7811"></a></li>
<li id="line_7812" class="even"><span class="lineNumber">&nbsp;7812&nbsp;</span><a name="line_7812"></a></li>
<li id="line_7813" class="odd"><span class="lineNumber">&nbsp;7813&nbsp;</span><a name="line_7813"></a></li>
<li id="line_7814" class="even"><span class="lineNumber">&nbsp;7814&nbsp;</span><a name="line_7814"></a></li>
<li id="line_7815" class="odd"><span class="lineNumber">&nbsp;7815&nbsp;</span>	//&nbsp;Language-data&nbsp;Internals<a name="line_7815"></a></li>
<li id="line_7816" class="even"><span class="lineNumber">&nbsp;7816&nbsp;</span>	//&nbsp;-----------------------------------------------------------------------------------<a name="line_7816"></a></li>
<li id="line_7817" class="odd"><span class="lineNumber">&nbsp;7817&nbsp;</span>	//&nbsp;Apply&nbsp;overrides&nbsp;to&nbsp;the&nbsp;current&nbsp;language's&nbsp;data<a name="line_7817"></a></li>
<li id="line_7818" class="even"><span class="lineNumber">&nbsp;7818&nbsp;</span><a name="line_7818"></a></li>
<li id="line_7819" class="odd"><span class="lineNumber">&nbsp;7819&nbsp;</span><a name="line_7819"></a></li>
<li id="line_7820" class="even"><span class="lineNumber">&nbsp;7820&nbsp;</span>	var&nbsp;localeData&nbsp;=&nbsp;createObject(&nbsp;//&nbsp;make&nbsp;a&nbsp;cheap&nbsp;copy<a name="line_7820"></a></li>
<li id="line_7821" class="odd"><span class="lineNumber">&nbsp;7821&nbsp;</span>		getMomentLocaleData(options.lang)&nbsp;//&nbsp;will&nbsp;fall&nbsp;back&nbsp;to&nbsp;en<a name="line_7821"></a></li>
<li id="line_7822" class="even"><span class="lineNumber">&nbsp;7822&nbsp;</span>	);<a name="line_7822"></a></li>
<li id="line_7823" class="odd"><span class="lineNumber">&nbsp;7823&nbsp;</span><a name="line_7823"></a></li>
<li id="line_7824" class="even"><span class="lineNumber">&nbsp;7824&nbsp;</span>	if&nbsp;(options.monthNames)&nbsp;{<a name="line_7824"></a></li>
<li id="line_7825" class="odd"><span class="lineNumber">&nbsp;7825&nbsp;</span>		localeData._months&nbsp;=&nbsp;options.monthNames;<a name="line_7825"></a></li>
<li id="line_7826" class="even"><span class="lineNumber">&nbsp;7826&nbsp;</span>	}<a name="line_7826"></a></li>
<li id="line_7827" class="odd"><span class="lineNumber">&nbsp;7827&nbsp;</span>	if&nbsp;(options.monthNamesShort)&nbsp;{<a name="line_7827"></a></li>
<li id="line_7828" class="even"><span class="lineNumber">&nbsp;7828&nbsp;</span>		localeData._monthsShort&nbsp;=&nbsp;options.monthNamesShort;<a name="line_7828"></a></li>
<li id="line_7829" class="odd"><span class="lineNumber">&nbsp;7829&nbsp;</span>	}<a name="line_7829"></a></li>
<li id="line_7830" class="even"><span class="lineNumber">&nbsp;7830&nbsp;</span>	if&nbsp;(options.dayNames)&nbsp;{<a name="line_7830"></a></li>
<li id="line_7831" class="odd"><span class="lineNumber">&nbsp;7831&nbsp;</span>		localeData._weekdays&nbsp;=&nbsp;options.dayNames;<a name="line_7831"></a></li>
<li id="line_7832" class="even"><span class="lineNumber">&nbsp;7832&nbsp;</span>	}<a name="line_7832"></a></li>
<li id="line_7833" class="odd"><span class="lineNumber">&nbsp;7833&nbsp;</span>	if&nbsp;(options.dayNamesShort)&nbsp;{<a name="line_7833"></a></li>
<li id="line_7834" class="even"><span class="lineNumber">&nbsp;7834&nbsp;</span>		localeData._weekdaysShort&nbsp;=&nbsp;options.dayNamesShort;<a name="line_7834"></a></li>
<li id="line_7835" class="odd"><span class="lineNumber">&nbsp;7835&nbsp;</span>	}<a name="line_7835"></a></li>
<li id="line_7836" class="even"><span class="lineNumber">&nbsp;7836&nbsp;</span>	if&nbsp;(options.firstDay&nbsp;!=&nbsp;null)&nbsp;{<a name="line_7836"></a></li>
<li id="line_7837" class="odd"><span class="lineNumber">&nbsp;7837&nbsp;</span>		var&nbsp;_week&nbsp;=&nbsp;createObject(localeData._week);&nbsp;//&nbsp;_week:&nbsp;{&nbsp;dow:&nbsp;#&nbsp;}<a name="line_7837"></a></li>
<li id="line_7838" class="even"><span class="lineNumber">&nbsp;7838&nbsp;</span>		_week.dow&nbsp;=&nbsp;options.firstDay;<a name="line_7838"></a></li>
<li id="line_7839" class="odd"><span class="lineNumber">&nbsp;7839&nbsp;</span>		localeData._week&nbsp;=&nbsp;_week;<a name="line_7839"></a></li>
<li id="line_7840" class="even"><span class="lineNumber">&nbsp;7840&nbsp;</span>	}<a name="line_7840"></a></li>
<li id="line_7841" class="odd"><span class="lineNumber">&nbsp;7841&nbsp;</span><a name="line_7841"></a></li>
<li id="line_7842" class="even"><span class="lineNumber">&nbsp;7842&nbsp;</span>	//&nbsp;assign&nbsp;a&nbsp;normalized&nbsp;value,&nbsp;to&nbsp;be&nbsp;used&nbsp;by&nbsp;our&nbsp;.week()&nbsp;moment&nbsp;extension<a name="line_7842"></a></li>
<li id="line_7843" class="odd"><span class="lineNumber">&nbsp;7843&nbsp;</span>	localeData._fullCalendar_weekCalc&nbsp;=&nbsp;(function(weekCalc)&nbsp;{<a name="line_7843"></a></li>
<li id="line_7844" class="even"><span class="lineNumber">&nbsp;7844&nbsp;</span>		if&nbsp;(typeof&nbsp;weekCalc&nbsp;===&nbsp;'function')&nbsp;{<a name="line_7844"></a></li>
<li id="line_7845" class="odd"><span class="lineNumber">&nbsp;7845&nbsp;</span>			return&nbsp;weekCalc;<a name="line_7845"></a></li>
<li id="line_7846" class="even"><span class="lineNumber">&nbsp;7846&nbsp;</span>		}<a name="line_7846"></a></li>
<li id="line_7847" class="odd"><span class="lineNumber">&nbsp;7847&nbsp;</span>		else&nbsp;if&nbsp;(weekCalc&nbsp;===&nbsp;'local')&nbsp;{<a name="line_7847"></a></li>
<li id="line_7848" class="even"><span class="lineNumber">&nbsp;7848&nbsp;</span>			return&nbsp;weekCalc;<a name="line_7848"></a></li>
<li id="line_7849" class="odd"><span class="lineNumber">&nbsp;7849&nbsp;</span>		}<a name="line_7849"></a></li>
<li id="line_7850" class="even"><span class="lineNumber">&nbsp;7850&nbsp;</span>		else&nbsp;if&nbsp;(weekCalc&nbsp;===&nbsp;'iso'&nbsp;||&nbsp;weekCalc&nbsp;===&nbsp;'ISO')&nbsp;{<a name="line_7850"></a></li>
<li id="line_7851" class="odd"><span class="lineNumber">&nbsp;7851&nbsp;</span>			return&nbsp;'ISO';<a name="line_7851"></a></li>
<li id="line_7852" class="even"><span class="lineNumber">&nbsp;7852&nbsp;</span>		}<a name="line_7852"></a></li>
<li id="line_7853" class="odd"><span class="lineNumber">&nbsp;7853&nbsp;</span>	})(options.weekNumberCalculation);<a name="line_7853"></a></li>
<li id="line_7854" class="even"><span class="lineNumber">&nbsp;7854&nbsp;</span><a name="line_7854"></a></li>
<li id="line_7855" class="odd"><span class="lineNumber">&nbsp;7855&nbsp;</span><a name="line_7855"></a></li>
<li id="line_7856" class="even"><span class="lineNumber">&nbsp;7856&nbsp;</span><a name="line_7856"></a></li>
<li id="line_7857" class="odd"><span class="lineNumber">&nbsp;7857&nbsp;</span>	//&nbsp;Calendar-specific&nbsp;Date&nbsp;Utilities<a name="line_7857"></a></li>
<li id="line_7858" class="even"><span class="lineNumber">&nbsp;7858&nbsp;</span>	//&nbsp;-----------------------------------------------------------------------------------<a name="line_7858"></a></li>
<li id="line_7859" class="odd"><span class="lineNumber">&nbsp;7859&nbsp;</span><a name="line_7859"></a></li>
<li id="line_7860" class="even"><span class="lineNumber">&nbsp;7860&nbsp;</span><a name="line_7860"></a></li>
<li id="line_7861" class="odd"><span class="lineNumber">&nbsp;7861&nbsp;</span>	t.defaultAllDayEventDuration&nbsp;=&nbsp;moment.duration(options.defaultAllDayEventDuration);<a name="line_7861"></a></li>
<li id="line_7862" class="even"><span class="lineNumber">&nbsp;7862&nbsp;</span>	t.defaultTimedEventDuration&nbsp;=&nbsp;moment.duration(options.defaultTimedEventDuration);<a name="line_7862"></a></li>
<li id="line_7863" class="odd"><span class="lineNumber">&nbsp;7863&nbsp;</span><a name="line_7863"></a></li>
<li id="line_7864" class="even"><span class="lineNumber">&nbsp;7864&nbsp;</span><a name="line_7864"></a></li>
<li id="line_7865" class="odd"><span class="lineNumber">&nbsp;7865&nbsp;</span>	//&nbsp;Builds&nbsp;a&nbsp;moment&nbsp;using&nbsp;the&nbsp;settings&nbsp;of&nbsp;the&nbsp;current&nbsp;calendar:&nbsp;timezone&nbsp;and&nbsp;language.<a name="line_7865"></a></li>
<li id="line_7866" class="even"><span class="lineNumber">&nbsp;7866&nbsp;</span>	//&nbsp;Accepts&nbsp;anything&nbsp;the&nbsp;vanilla&nbsp;moment()&nbsp;constructor&nbsp;accepts.<a name="line_7866"></a></li>
<li id="line_7867" class="odd"><span class="lineNumber">&nbsp;7867&nbsp;</span>	t.moment&nbsp;=&nbsp;function()&nbsp;{<a name="line_7867"></a></li>
<li id="line_7868" class="even"><span class="lineNumber">&nbsp;7868&nbsp;</span>		var&nbsp;mom;<a name="line_7868"></a></li>
<li id="line_7869" class="odd"><span class="lineNumber">&nbsp;7869&nbsp;</span><a name="line_7869"></a></li>
<li id="line_7870" class="even"><span class="lineNumber">&nbsp;7870&nbsp;</span>		if&nbsp;(options.timezone&nbsp;===&nbsp;'local')&nbsp;{<a name="line_7870"></a></li>
<li id="line_7871" class="odd"><span class="lineNumber">&nbsp;7871&nbsp;</span>			mom&nbsp;=&nbsp;fc.moment.apply(null,&nbsp;arguments);<a name="line_7871"></a></li>
<li id="line_7872" class="even"><span class="lineNumber">&nbsp;7872&nbsp;</span><a name="line_7872"></a></li>
<li id="line_7873" class="odd"><span class="lineNumber">&nbsp;7873&nbsp;</span>			//&nbsp;Force&nbsp;the&nbsp;moment&nbsp;to&nbsp;be&nbsp;local,&nbsp;because&nbsp;fc.moment&nbsp;doesn't&nbsp;guarantee&nbsp;it.<a name="line_7873"></a></li>
<li id="line_7874" class="even"><span class="lineNumber">&nbsp;7874&nbsp;</span>			if&nbsp;(mom.hasTime())&nbsp;{&nbsp;//&nbsp;don't&nbsp;give&nbsp;ambiguously-timed&nbsp;moments&nbsp;a&nbsp;local&nbsp;zone<a name="line_7874"></a></li>
<li id="line_7875" class="odd"><span class="lineNumber">&nbsp;7875&nbsp;</span>				mom.local();<a name="line_7875"></a></li>
<li id="line_7876" class="even"><span class="lineNumber">&nbsp;7876&nbsp;</span>			}<a name="line_7876"></a></li>
<li id="line_7877" class="odd"><span class="lineNumber">&nbsp;7877&nbsp;</span>		}<a name="line_7877"></a></li>
<li id="line_7878" class="even"><span class="lineNumber">&nbsp;7878&nbsp;</span>		else&nbsp;if&nbsp;(options.timezone&nbsp;===&nbsp;'UTC')&nbsp;{<a name="line_7878"></a></li>
<li id="line_7879" class="odd"><span class="lineNumber">&nbsp;7879&nbsp;</span>			mom&nbsp;=&nbsp;fc.moment.utc.apply(null,&nbsp;arguments);&nbsp;//&nbsp;process&nbsp;as&nbsp;UTC<a name="line_7879"></a></li>
<li id="line_7880" class="even"><span class="lineNumber">&nbsp;7880&nbsp;</span>		}<a name="line_7880"></a></li>
<li id="line_7881" class="odd"><span class="lineNumber">&nbsp;7881&nbsp;</span>		else&nbsp;{<a name="line_7881"></a></li>
<li id="line_7882" class="even"><span class="lineNumber">&nbsp;7882&nbsp;</span>			mom&nbsp;=&nbsp;fc.moment.parseZone.apply(null,&nbsp;arguments);&nbsp;//&nbsp;let&nbsp;the&nbsp;input&nbsp;decide&nbsp;the&nbsp;zone<a name="line_7882"></a></li>
<li id="line_7883" class="odd"><span class="lineNumber">&nbsp;7883&nbsp;</span>		}<a name="line_7883"></a></li>
<li id="line_7884" class="even"><span class="lineNumber">&nbsp;7884&nbsp;</span><a name="line_7884"></a></li>
<li id="line_7885" class="odd"><span class="lineNumber">&nbsp;7885&nbsp;</span>		if&nbsp;('_locale'&nbsp;in&nbsp;mom)&nbsp;{&nbsp;//&nbsp;moment&nbsp;2.8&nbsp;and&nbsp;above<a name="line_7885"></a></li>
<li id="line_7886" class="even"><span class="lineNumber">&nbsp;7886&nbsp;</span>			mom._locale&nbsp;=&nbsp;localeData;<a name="line_7886"></a></li>
<li id="line_7887" class="odd"><span class="lineNumber">&nbsp;7887&nbsp;</span>		}<a name="line_7887"></a></li>
<li id="line_7888" class="even"><span class="lineNumber">&nbsp;7888&nbsp;</span>		else&nbsp;{&nbsp;//&nbsp;pre-moment-2.8<a name="line_7888"></a></li>
<li id="line_7889" class="odd"><span class="lineNumber">&nbsp;7889&nbsp;</span>			mom._lang&nbsp;=&nbsp;localeData;<a name="line_7889"></a></li>
<li id="line_7890" class="even"><span class="lineNumber">&nbsp;7890&nbsp;</span>		}<a name="line_7890"></a></li>
<li id="line_7891" class="odd"><span class="lineNumber">&nbsp;7891&nbsp;</span><a name="line_7891"></a></li>
<li id="line_7892" class="even"><span class="lineNumber">&nbsp;7892&nbsp;</span>		return&nbsp;mom;<a name="line_7892"></a></li>
<li id="line_7893" class="odd"><span class="lineNumber">&nbsp;7893&nbsp;</span>	};<a name="line_7893"></a></li>
<li id="line_7894" class="even"><span class="lineNumber">&nbsp;7894&nbsp;</span><a name="line_7894"></a></li>
<li id="line_7895" class="odd"><span class="lineNumber">&nbsp;7895&nbsp;</span><a name="line_7895"></a></li>
<li id="line_7896" class="even"><span class="lineNumber">&nbsp;7896&nbsp;</span>	//&nbsp;Returns&nbsp;a&nbsp;boolean&nbsp;about&nbsp;whether&nbsp;or&nbsp;not&nbsp;the&nbsp;calendar&nbsp;knows&nbsp;how&nbsp;to&nbsp;calculate<a name="line_7896"></a></li>
<li id="line_7897" class="odd"><span class="lineNumber">&nbsp;7897&nbsp;</span>	//&nbsp;the&nbsp;timezone&nbsp;offset&nbsp;of&nbsp;arbitrary&nbsp;dates&nbsp;in&nbsp;the&nbsp;current&nbsp;timezone.<a name="line_7897"></a></li>
<li id="line_7898" class="even"><span class="lineNumber">&nbsp;7898&nbsp;</span>	t.getIsAmbigTimezone&nbsp;=&nbsp;function()&nbsp;{<a name="line_7898"></a></li>
<li id="line_7899" class="odd"><span class="lineNumber">&nbsp;7899&nbsp;</span>		return&nbsp;options.timezone&nbsp;!==&nbsp;'local'&nbsp;&amp;&amp;&nbsp;options.timezone&nbsp;!==&nbsp;'UTC';<a name="line_7899"></a></li>
<li id="line_7900" class="even"><span class="lineNumber">&nbsp;7900&nbsp;</span>	};<a name="line_7900"></a></li>
<li id="line_7901" class="odd"><span class="lineNumber">&nbsp;7901&nbsp;</span><a name="line_7901"></a></li>
<li id="line_7902" class="even"><span class="lineNumber">&nbsp;7902&nbsp;</span><a name="line_7902"></a></li>
<li id="line_7903" class="odd"><span class="lineNumber">&nbsp;7903&nbsp;</span>	//&nbsp;Returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;given&nbsp;date&nbsp;in&nbsp;the&nbsp;current&nbsp;timezone&nbsp;of&nbsp;it&nbsp;is&nbsp;ambiguously&nbsp;zoned.<a name="line_7903"></a></li>
<li id="line_7904" class="even"><span class="lineNumber">&nbsp;7904&nbsp;</span>	//&nbsp;This&nbsp;will&nbsp;also&nbsp;give&nbsp;the&nbsp;date&nbsp;an&nbsp;unambiguous&nbsp;time.<a name="line_7904"></a></li>
<li id="line_7905" class="odd"><span class="lineNumber">&nbsp;7905&nbsp;</span>	t.rezoneDate&nbsp;=&nbsp;function(date)&nbsp;{<a name="line_7905"></a></li>
<li id="line_7906" class="even"><span class="lineNumber">&nbsp;7906&nbsp;</span>		return&nbsp;t.moment(date.toArray());<a name="line_7906"></a></li>
<li id="line_7907" class="odd"><span class="lineNumber">&nbsp;7907&nbsp;</span>	};<a name="line_7907"></a></li>
<li id="line_7908" class="even"><span class="lineNumber">&nbsp;7908&nbsp;</span><a name="line_7908"></a></li>
<li id="line_7909" class="odd"><span class="lineNumber">&nbsp;7909&nbsp;</span><a name="line_7909"></a></li>
<li id="line_7910" class="even"><span class="lineNumber">&nbsp;7910&nbsp;</span>	//&nbsp;Returns&nbsp;a&nbsp;moment&nbsp;for&nbsp;the&nbsp;current&nbsp;date,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;client's&nbsp;computer,<a name="line_7910"></a></li>
<li id="line_7911" class="odd"><span class="lineNumber">&nbsp;7911&nbsp;</span>	//&nbsp;or&nbsp;overridden&nbsp;by&nbsp;the&nbsp;`now`&nbsp;option.<a name="line_7911"></a></li>
<li id="line_7912" class="even"><span class="lineNumber">&nbsp;7912&nbsp;</span>	t.getNow&nbsp;=&nbsp;function()&nbsp;{<a name="line_7912"></a></li>
<li id="line_7913" class="odd"><span class="lineNumber">&nbsp;7913&nbsp;</span>		var&nbsp;now&nbsp;=&nbsp;options.now;<a name="line_7913"></a></li>
<li id="line_7914" class="even"><span class="lineNumber">&nbsp;7914&nbsp;</span>		if&nbsp;(typeof&nbsp;now&nbsp;===&nbsp;'function')&nbsp;{<a name="line_7914"></a></li>
<li id="line_7915" class="odd"><span class="lineNumber">&nbsp;7915&nbsp;</span>			now&nbsp;=&nbsp;now();<a name="line_7915"></a></li>
<li id="line_7916" class="even"><span class="lineNumber">&nbsp;7916&nbsp;</span>		}<a name="line_7916"></a></li>
<li id="line_7917" class="odd"><span class="lineNumber">&nbsp;7917&nbsp;</span>		return&nbsp;t.moment(now);<a name="line_7917"></a></li>
<li id="line_7918" class="even"><span class="lineNumber">&nbsp;7918&nbsp;</span>	};<a name="line_7918"></a></li>
<li id="line_7919" class="odd"><span class="lineNumber">&nbsp;7919&nbsp;</span><a name="line_7919"></a></li>
<li id="line_7920" class="even"><span class="lineNumber">&nbsp;7920&nbsp;</span><a name="line_7920"></a></li>
<li id="line_7921" class="odd"><span class="lineNumber">&nbsp;7921&nbsp;</span>	//&nbsp;Get&nbsp;an&nbsp;event's&nbsp;normalized&nbsp;end&nbsp;date.&nbsp;If&nbsp;not&nbsp;present,&nbsp;calculate&nbsp;it&nbsp;from&nbsp;the&nbsp;defaults.<a name="line_7921"></a></li>
<li id="line_7922" class="even"><span class="lineNumber">&nbsp;7922&nbsp;</span>	t.getEventEnd&nbsp;=&nbsp;function(event)&nbsp;{<a name="line_7922"></a></li>
<li id="line_7923" class="odd"><span class="lineNumber">&nbsp;7923&nbsp;</span>		if&nbsp;(event.end)&nbsp;{<a name="line_7923"></a></li>
<li id="line_7924" class="even"><span class="lineNumber">&nbsp;7924&nbsp;</span>			return&nbsp;event.end.clone();<a name="line_7924"></a></li>
<li id="line_7925" class="odd"><span class="lineNumber">&nbsp;7925&nbsp;</span>		}<a name="line_7925"></a></li>
<li id="line_7926" class="even"><span class="lineNumber">&nbsp;7926&nbsp;</span>		else&nbsp;{<a name="line_7926"></a></li>
<li id="line_7927" class="odd"><span class="lineNumber">&nbsp;7927&nbsp;</span>			return&nbsp;t.getDefaultEventEnd(event.allDay,&nbsp;event.start);<a name="line_7927"></a></li>
<li id="line_7928" class="even"><span class="lineNumber">&nbsp;7928&nbsp;</span>		}<a name="line_7928"></a></li>
<li id="line_7929" class="odd"><span class="lineNumber">&nbsp;7929&nbsp;</span>	};<a name="line_7929"></a></li>
<li id="line_7930" class="even"><span class="lineNumber">&nbsp;7930&nbsp;</span><a name="line_7930"></a></li>
<li id="line_7931" class="odd"><span class="lineNumber">&nbsp;7931&nbsp;</span><a name="line_7931"></a></li>
<li id="line_7932" class="even"><span class="lineNumber">&nbsp;7932&nbsp;</span>	//&nbsp;Given&nbsp;an&nbsp;event's&nbsp;allDay&nbsp;status&nbsp;and&nbsp;start&nbsp;date,&nbsp;return&nbsp;swhat&nbsp;its&nbsp;fallback&nbsp;end&nbsp;date&nbsp;should&nbsp;be.<a name="line_7932"></a></li>
<li id="line_7933" class="odd"><span class="lineNumber">&nbsp;7933&nbsp;</span>	t.getDefaultEventEnd&nbsp;=&nbsp;function(allDay,&nbsp;start)&nbsp;{&nbsp;//&nbsp;TODO:&nbsp;rename&nbsp;to&nbsp;computeDefaultEventEnd<a name="line_7933"></a></li>
<li id="line_7934" class="even"><span class="lineNumber">&nbsp;7934&nbsp;</span>		var&nbsp;end&nbsp;=&nbsp;start.clone();<a name="line_7934"></a></li>
<li id="line_7935" class="odd"><span class="lineNumber">&nbsp;7935&nbsp;</span><a name="line_7935"></a></li>
<li id="line_7936" class="even"><span class="lineNumber">&nbsp;7936&nbsp;</span>		if&nbsp;(allDay)&nbsp;{<a name="line_7936"></a></li>
<li id="line_7937" class="odd"><span class="lineNumber">&nbsp;7937&nbsp;</span>			end.stripTime().add(t.defaultAllDayEventDuration);<a name="line_7937"></a></li>
<li id="line_7938" class="even"><span class="lineNumber">&nbsp;7938&nbsp;</span>		}<a name="line_7938"></a></li>
<li id="line_7939" class="odd"><span class="lineNumber">&nbsp;7939&nbsp;</span>		else&nbsp;{<a name="line_7939"></a></li>
<li id="line_7940" class="even"><span class="lineNumber">&nbsp;7940&nbsp;</span>			end.add(t.defaultTimedEventDuration);<a name="line_7940"></a></li>
<li id="line_7941" class="odd"><span class="lineNumber">&nbsp;7941&nbsp;</span>		}<a name="line_7941"></a></li>
<li id="line_7942" class="even"><span class="lineNumber">&nbsp;7942&nbsp;</span><a name="line_7942"></a></li>
<li id="line_7943" class="odd"><span class="lineNumber">&nbsp;7943&nbsp;</span>		if&nbsp;(t.getIsAmbigTimezone())&nbsp;{<a name="line_7943"></a></li>
<li id="line_7944" class="even"><span class="lineNumber">&nbsp;7944&nbsp;</span>			end.stripZone();&nbsp;//&nbsp;we&nbsp;don't&nbsp;know&nbsp;what&nbsp;the&nbsp;tzo&nbsp;should&nbsp;be<a name="line_7944"></a></li>
<li id="line_7945" class="odd"><span class="lineNumber">&nbsp;7945&nbsp;</span>		}<a name="line_7945"></a></li>
<li id="line_7946" class="even"><span class="lineNumber">&nbsp;7946&nbsp;</span><a name="line_7946"></a></li>
<li id="line_7947" class="odd"><span class="lineNumber">&nbsp;7947&nbsp;</span>		return&nbsp;end;<a name="line_7947"></a></li>
<li id="line_7948" class="even"><span class="lineNumber">&nbsp;7948&nbsp;</span>	};<a name="line_7948"></a></li>
<li id="line_7949" class="odd"><span class="lineNumber">&nbsp;7949&nbsp;</span><a name="line_7949"></a></li>
<li id="line_7950" class="even"><span class="lineNumber">&nbsp;7950&nbsp;</span><a name="line_7950"></a></li>
<li id="line_7951" class="odd"><span class="lineNumber">&nbsp;7951&nbsp;</span>	//&nbsp;Produces&nbsp;a&nbsp;human-readable&nbsp;string&nbsp;for&nbsp;the&nbsp;given&nbsp;duration.<a name="line_7951"></a></li>
<li id="line_7952" class="even"><span class="lineNumber">&nbsp;7952&nbsp;</span>	//&nbsp;Side-effect:&nbsp;changes&nbsp;the&nbsp;locale&nbsp;of&nbsp;the&nbsp;given&nbsp;duration.<a name="line_7952"></a></li>
<li id="line_7953" class="odd"><span class="lineNumber">&nbsp;7953&nbsp;</span>	t.humanizeDuration&nbsp;=&nbsp;function(duration)&nbsp;{<a name="line_7953"></a></li>
<li id="line_7954" class="even"><span class="lineNumber">&nbsp;7954&nbsp;</span>		return&nbsp;(duration.locale&nbsp;||&nbsp;duration.lang).call(duration,&nbsp;options.lang)&nbsp;//&nbsp;works&nbsp;moment-pre-2.8<a name="line_7954"></a></li>
<li id="line_7955" class="odd"><span class="lineNumber">&nbsp;7955&nbsp;</span>			.humanize();<a name="line_7955"></a></li>
<li id="line_7956" class="even"><span class="lineNumber">&nbsp;7956&nbsp;</span>	};<a name="line_7956"></a></li>
<li id="line_7957" class="odd"><span class="lineNumber">&nbsp;7957&nbsp;</span><a name="line_7957"></a></li>
<li id="line_7958" class="even"><span class="lineNumber">&nbsp;7958&nbsp;</span><a name="line_7958"></a></li>
<li id="line_7959" class="odd"><span class="lineNumber">&nbsp;7959&nbsp;</span>	<a name="line_7959"></a></li>
<li id="line_7960" class="even"><span class="lineNumber">&nbsp;7960&nbsp;</span>	//&nbsp;Imports<a name="line_7960"></a></li>
<li id="line_7961" class="odd"><span class="lineNumber">&nbsp;7961&nbsp;</span>	//&nbsp;-----------------------------------------------------------------------------------<a name="line_7961"></a></li>
<li id="line_7962" class="even"><span class="lineNumber">&nbsp;7962&nbsp;</span><a name="line_7962"></a></li>
<li id="line_7963" class="odd"><span class="lineNumber">&nbsp;7963&nbsp;</span><a name="line_7963"></a></li>
<li id="line_7964" class="even"><span class="lineNumber">&nbsp;7964&nbsp;</span>	EventManager.call(t,&nbsp;options);<a name="line_7964"></a></li>
<li id="line_7965" class="odd"><span class="lineNumber">&nbsp;7965&nbsp;</span>	var&nbsp;isFetchNeeded&nbsp;=&nbsp;t.isFetchNeeded;<a name="line_7965"></a></li>
<li id="line_7966" class="even"><span class="lineNumber">&nbsp;7966&nbsp;</span>	var&nbsp;fetchEvents&nbsp;=&nbsp;t.fetchEvents;<a name="line_7966"></a></li>
<li id="line_7967" class="odd"><span class="lineNumber">&nbsp;7967&nbsp;</span><a name="line_7967"></a></li>
<li id="line_7968" class="even"><span class="lineNumber">&nbsp;7968&nbsp;</span><a name="line_7968"></a></li>
<li id="line_7969" class="odd"><span class="lineNumber">&nbsp;7969&nbsp;</span><a name="line_7969"></a></li>
<li id="line_7970" class="even"><span class="lineNumber">&nbsp;7970&nbsp;</span>	//&nbsp;Locals<a name="line_7970"></a></li>
<li id="line_7971" class="odd"><span class="lineNumber">&nbsp;7971&nbsp;</span>	//&nbsp;-----------------------------------------------------------------------------------<a name="line_7971"></a></li>
<li id="line_7972" class="even"><span class="lineNumber">&nbsp;7972&nbsp;</span><a name="line_7972"></a></li>
<li id="line_7973" class="odd"><span class="lineNumber">&nbsp;7973&nbsp;</span><a name="line_7973"></a></li>
<li id="line_7974" class="even"><span class="lineNumber">&nbsp;7974&nbsp;</span>	var&nbsp;_element&nbsp;=&nbsp;element[0];<a name="line_7974"></a></li>
<li id="line_7975" class="odd"><span class="lineNumber">&nbsp;7975&nbsp;</span>	var&nbsp;header;<a name="line_7975"></a></li>
<li id="line_7976" class="even"><span class="lineNumber">&nbsp;7976&nbsp;</span>	var&nbsp;headerElement;<a name="line_7976"></a></li>
<li id="line_7977" class="odd"><span class="lineNumber">&nbsp;7977&nbsp;</span>	var&nbsp;content;<a name="line_7977"></a></li>
<li id="line_7978" class="even"><span class="lineNumber">&nbsp;7978&nbsp;</span>	var&nbsp;tm;&nbsp;//&nbsp;for&nbsp;making&nbsp;theme&nbsp;classes<a name="line_7978"></a></li>
<li id="line_7979" class="odd"><span class="lineNumber">&nbsp;7979&nbsp;</span>	var&nbsp;currentView;&nbsp;//&nbsp;NOTE:&nbsp;keep&nbsp;this&nbsp;in&nbsp;sync&nbsp;with&nbsp;this.view<a name="line_7979"></a></li>
<li id="line_7980" class="even"><span class="lineNumber">&nbsp;7980&nbsp;</span>	var&nbsp;viewsByType&nbsp;=&nbsp;{};&nbsp;//&nbsp;holds&nbsp;all&nbsp;instantiated&nbsp;view&nbsp;instances,&nbsp;current&nbsp;or&nbsp;not<a name="line_7980"></a></li>
<li id="line_7981" class="odd"><span class="lineNumber">&nbsp;7981&nbsp;</span>	var&nbsp;suggestedViewHeight;<a name="line_7981"></a></li>
<li id="line_7982" class="even"><span class="lineNumber">&nbsp;7982&nbsp;</span>	var&nbsp;windowResizeProxy;&nbsp;//&nbsp;wraps&nbsp;the&nbsp;windowResize&nbsp;function<a name="line_7982"></a></li>
<li id="line_7983" class="odd"><span class="lineNumber">&nbsp;7983&nbsp;</span>	var&nbsp;ignoreWindowResize&nbsp;=&nbsp;0;<a name="line_7983"></a></li>
<li id="line_7984" class="even"><span class="lineNumber">&nbsp;7984&nbsp;</span>	var&nbsp;date;<a name="line_7984"></a></li>
<li id="line_7985" class="odd"><span class="lineNumber">&nbsp;7985&nbsp;</span>	var&nbsp;events&nbsp;=&nbsp;[];<a name="line_7985"></a></li>
<li id="line_7986" class="even"><span class="lineNumber">&nbsp;7986&nbsp;</span>	<a name="line_7986"></a></li>
<li id="line_7987" class="odd"><span class="lineNumber">&nbsp;7987&nbsp;</span>	<a name="line_7987"></a></li>
<li id="line_7988" class="even"><span class="lineNumber">&nbsp;7988&nbsp;</span>	<a name="line_7988"></a></li>
<li id="line_7989" class="odd"><span class="lineNumber">&nbsp;7989&nbsp;</span>	//&nbsp;Main&nbsp;Rendering<a name="line_7989"></a></li>
<li id="line_7990" class="even"><span class="lineNumber">&nbsp;7990&nbsp;</span>	//&nbsp;-----------------------------------------------------------------------------------<a name="line_7990"></a></li>
<li id="line_7991" class="odd"><span class="lineNumber">&nbsp;7991&nbsp;</span><a name="line_7991"></a></li>
<li id="line_7992" class="even"><span class="lineNumber">&nbsp;7992&nbsp;</span><a name="line_7992"></a></li>
<li id="line_7993" class="odd"><span class="lineNumber">&nbsp;7993&nbsp;</span>	if&nbsp;(options.defaultDate&nbsp;!=&nbsp;null)&nbsp;{<a name="line_7993"></a></li>
<li id="line_7994" class="even"><span class="lineNumber">&nbsp;7994&nbsp;</span>		date&nbsp;=&nbsp;t.moment(options.defaultDate);<a name="line_7994"></a></li>
<li id="line_7995" class="odd"><span class="lineNumber">&nbsp;7995&nbsp;</span>	}<a name="line_7995"></a></li>
<li id="line_7996" class="even"><span class="lineNumber">&nbsp;7996&nbsp;</span>	else&nbsp;{<a name="line_7996"></a></li>
<li id="line_7997" class="odd"><span class="lineNumber">&nbsp;7997&nbsp;</span>		date&nbsp;=&nbsp;t.getNow();<a name="line_7997"></a></li>
<li id="line_7998" class="even"><span class="lineNumber">&nbsp;7998&nbsp;</span>	}<a name="line_7998"></a></li>
<li id="line_7999" class="odd"><span class="lineNumber">&nbsp;7999&nbsp;</span>	<a name="line_7999"></a></li>
<li id="line_8000" class="even"><span class="lineNumber">&nbsp;8000&nbsp;</span>	<a name="line_8000"></a></li>
<li id="line_8001" class="odd"><span class="lineNumber">&nbsp;8001&nbsp;</span>	function&nbsp;render()&nbsp;{<a name="line_8001"></a></li>
<li id="line_8002" class="even"><span class="lineNumber">&nbsp;8002&nbsp;</span>		if&nbsp;(!content)&nbsp;{<a name="line_8002"></a></li>
<li id="line_8003" class="odd"><span class="lineNumber">&nbsp;8003&nbsp;</span>			initialRender();<a name="line_8003"></a></li>
<li id="line_8004" class="even"><span class="lineNumber">&nbsp;8004&nbsp;</span>		}<a name="line_8004"></a></li>
<li id="line_8005" class="odd"><span class="lineNumber">&nbsp;8005&nbsp;</span>		else&nbsp;if&nbsp;(elementVisible())&nbsp;{<a name="line_8005"></a></li>
<li id="line_8006" class="even"><span class="lineNumber">&nbsp;8006&nbsp;</span>			//&nbsp;mainly&nbsp;for&nbsp;the&nbsp;public&nbsp;API<a name="line_8006"></a></li>
<li id="line_8007" class="odd"><span class="lineNumber">&nbsp;8007&nbsp;</span>			calcSize();<a name="line_8007"></a></li>
<li id="line_8008" class="even"><span class="lineNumber">&nbsp;8008&nbsp;</span>			renderView();<a name="line_8008"></a></li>
<li id="line_8009" class="odd"><span class="lineNumber">&nbsp;8009&nbsp;</span>		}<a name="line_8009"></a></li>
<li id="line_8010" class="even"><span class="lineNumber">&nbsp;8010&nbsp;</span>	}<a name="line_8010"></a></li>
<li id="line_8011" class="odd"><span class="lineNumber">&nbsp;8011&nbsp;</span>	<a name="line_8011"></a></li>
<li id="line_8012" class="even"><span class="lineNumber">&nbsp;8012&nbsp;</span>	<a name="line_8012"></a></li>
<li id="line_8013" class="odd"><span class="lineNumber">&nbsp;8013&nbsp;</span>	function&nbsp;initialRender()&nbsp;{<a name="line_8013"></a></li>
<li id="line_8014" class="even"><span class="lineNumber">&nbsp;8014&nbsp;</span>		tm&nbsp;=&nbsp;options.theme&nbsp;?&nbsp;'ui'&nbsp;:&nbsp;'fc';<a name="line_8014"></a></li>
<li id="line_8015" class="odd"><span class="lineNumber">&nbsp;8015&nbsp;</span>		element.addClass('fc');<a name="line_8015"></a></li>
<li id="line_8016" class="even"><span class="lineNumber">&nbsp;8016&nbsp;</span><a name="line_8016"></a></li>
<li id="line_8017" class="odd"><span class="lineNumber">&nbsp;8017&nbsp;</span>		if&nbsp;(options.isRTL)&nbsp;{<a name="line_8017"></a></li>
<li id="line_8018" class="even"><span class="lineNumber">&nbsp;8018&nbsp;</span>			element.addClass('fc-rtl');<a name="line_8018"></a></li>
<li id="line_8019" class="odd"><span class="lineNumber">&nbsp;8019&nbsp;</span>		}<a name="line_8019"></a></li>
<li id="line_8020" class="even"><span class="lineNumber">&nbsp;8020&nbsp;</span>		else&nbsp;{<a name="line_8020"></a></li>
<li id="line_8021" class="odd"><span class="lineNumber">&nbsp;8021&nbsp;</span>			element.addClass('fc-ltr');<a name="line_8021"></a></li>
<li id="line_8022" class="even"><span class="lineNumber">&nbsp;8022&nbsp;</span>		}<a name="line_8022"></a></li>
<li id="line_8023" class="odd"><span class="lineNumber">&nbsp;8023&nbsp;</span><a name="line_8023"></a></li>
<li id="line_8024" class="even"><span class="lineNumber">&nbsp;8024&nbsp;</span>		if&nbsp;(options.theme)&nbsp;{<a name="line_8024"></a></li>
<li id="line_8025" class="odd"><span class="lineNumber">&nbsp;8025&nbsp;</span>			element.addClass('ui-widget');<a name="line_8025"></a></li>
<li id="line_8026" class="even"><span class="lineNumber">&nbsp;8026&nbsp;</span>		}<a name="line_8026"></a></li>
<li id="line_8027" class="odd"><span class="lineNumber">&nbsp;8027&nbsp;</span>		else&nbsp;{<a name="line_8027"></a></li>
<li id="line_8028" class="even"><span class="lineNumber">&nbsp;8028&nbsp;</span>			element.addClass('fc-unthemed');<a name="line_8028"></a></li>
<li id="line_8029" class="odd"><span class="lineNumber">&nbsp;8029&nbsp;</span>		}<a name="line_8029"></a></li>
<li id="line_8030" class="even"><span class="lineNumber">&nbsp;8030&nbsp;</span><a name="line_8030"></a></li>
<li id="line_8031" class="odd"><span class="lineNumber">&nbsp;8031&nbsp;</span>		content&nbsp;=&nbsp;$("&lt;div&nbsp;class='fc-view-container'/&gt;").prependTo(element);<a name="line_8031"></a></li>
<li id="line_8032" class="even"><span class="lineNumber">&nbsp;8032&nbsp;</span><a name="line_8032"></a></li>
<li id="line_8033" class="odd"><span class="lineNumber">&nbsp;8033&nbsp;</span>		header&nbsp;=&nbsp;t.header&nbsp;=&nbsp;new&nbsp;Header(t,&nbsp;options);<a name="line_8033"></a></li>
<li id="line_8034" class="even"><span class="lineNumber">&nbsp;8034&nbsp;</span>		headerElement&nbsp;=&nbsp;header.render();<a name="line_8034"></a></li>
<li id="line_8035" class="odd"><span class="lineNumber">&nbsp;8035&nbsp;</span>		if&nbsp;(headerElement)&nbsp;{<a name="line_8035"></a></li>
<li id="line_8036" class="even"><span class="lineNumber">&nbsp;8036&nbsp;</span>			element.prepend(headerElement);<a name="line_8036"></a></li>
<li id="line_8037" class="odd"><span class="lineNumber">&nbsp;8037&nbsp;</span>		}<a name="line_8037"></a></li>
<li id="line_8038" class="even"><span class="lineNumber">&nbsp;8038&nbsp;</span><a name="line_8038"></a></li>
<li id="line_8039" class="odd"><span class="lineNumber">&nbsp;8039&nbsp;</span>		renderView(options.defaultView);<a name="line_8039"></a></li>
<li id="line_8040" class="even"><span class="lineNumber">&nbsp;8040&nbsp;</span><a name="line_8040"></a></li>
<li id="line_8041" class="odd"><span class="lineNumber">&nbsp;8041&nbsp;</span>		if&nbsp;(options.handleWindowResize)&nbsp;{<a name="line_8041"></a></li>
<li id="line_8042" class="even"><span class="lineNumber">&nbsp;8042&nbsp;</span>			windowResizeProxy&nbsp;=&nbsp;debounce(windowResize,&nbsp;options.windowResizeDelay);&nbsp;//&nbsp;prevents&nbsp;rapid&nbsp;calls<a name="line_8042"></a></li>
<li id="line_8043" class="odd"><span class="lineNumber">&nbsp;8043&nbsp;</span>			$(window).resize(windowResizeProxy);<a name="line_8043"></a></li>
<li id="line_8044" class="even"><span class="lineNumber">&nbsp;8044&nbsp;</span>		}<a name="line_8044"></a></li>
<li id="line_8045" class="odd"><span class="lineNumber">&nbsp;8045&nbsp;</span>	}<a name="line_8045"></a></li>
<li id="line_8046" class="even"><span class="lineNumber">&nbsp;8046&nbsp;</span>	<a name="line_8046"></a></li>
<li id="line_8047" class="odd"><span class="lineNumber">&nbsp;8047&nbsp;</span>	<a name="line_8047"></a></li>
<li id="line_8048" class="even"><span class="lineNumber">&nbsp;8048&nbsp;</span>	function&nbsp;destroy()&nbsp;{<a name="line_8048"></a></li>
<li id="line_8049" class="odd"><span class="lineNumber">&nbsp;8049&nbsp;</span><a name="line_8049"></a></li>
<li id="line_8050" class="even"><span class="lineNumber">&nbsp;8050&nbsp;</span>		if&nbsp;(currentView)&nbsp;{<a name="line_8050"></a></li>
<li id="line_8051" class="odd"><span class="lineNumber">&nbsp;8051&nbsp;</span>			currentView.removeElement();<a name="line_8051"></a></li>
<li id="line_8052" class="even"><span class="lineNumber">&nbsp;8052&nbsp;</span><a name="line_8052"></a></li>
<li id="line_8053" class="odd"><span class="lineNumber">&nbsp;8053&nbsp;</span>			//&nbsp;NOTE:&nbsp;don't&nbsp;null-out&nbsp;currentView/t.view&nbsp;in&nbsp;case&nbsp;API&nbsp;methods&nbsp;are&nbsp;called&nbsp;after&nbsp;destroy.<a name="line_8053"></a></li>
<li id="line_8054" class="even"><span class="lineNumber">&nbsp;8054&nbsp;</span>			//&nbsp;It&nbsp;is&nbsp;still&nbsp;the&nbsp;"current"&nbsp;view,&nbsp;just&nbsp;not&nbsp;rendered.<a name="line_8054"></a></li>
<li id="line_8055" class="odd"><span class="lineNumber">&nbsp;8055&nbsp;</span>		}<a name="line_8055"></a></li>
<li id="line_8056" class="even"><span class="lineNumber">&nbsp;8056&nbsp;</span><a name="line_8056"></a></li>
<li id="line_8057" class="odd"><span class="lineNumber">&nbsp;8057&nbsp;</span>		header.removeElement();<a name="line_8057"></a></li>
<li id="line_8058" class="even"><span class="lineNumber">&nbsp;8058&nbsp;</span>		content.remove();<a name="line_8058"></a></li>
<li id="line_8059" class="odd"><span class="lineNumber">&nbsp;8059&nbsp;</span>		element.removeClass('fc&nbsp;fc-ltr&nbsp;fc-rtl&nbsp;fc-unthemed&nbsp;ui-widget');<a name="line_8059"></a></li>
<li id="line_8060" class="even"><span class="lineNumber">&nbsp;8060&nbsp;</span><a name="line_8060"></a></li>
<li id="line_8061" class="odd"><span class="lineNumber">&nbsp;8061&nbsp;</span>		if&nbsp;(windowResizeProxy)&nbsp;{<a name="line_8061"></a></li>
<li id="line_8062" class="even"><span class="lineNumber">&nbsp;8062&nbsp;</span>			$(window).unbind('resize',&nbsp;windowResizeProxy);<a name="line_8062"></a></li>
<li id="line_8063" class="odd"><span class="lineNumber">&nbsp;8063&nbsp;</span>		}<a name="line_8063"></a></li>
<li id="line_8064" class="even"><span class="lineNumber">&nbsp;8064&nbsp;</span>	}<a name="line_8064"></a></li>
<li id="line_8065" class="odd"><span class="lineNumber">&nbsp;8065&nbsp;</span>	<a name="line_8065"></a></li>
<li id="line_8066" class="even"><span class="lineNumber">&nbsp;8066&nbsp;</span>	<a name="line_8066"></a></li>
<li id="line_8067" class="odd"><span class="lineNumber">&nbsp;8067&nbsp;</span>	function&nbsp;elementVisible()&nbsp;{<a name="line_8067"></a></li>
<li id="line_8068" class="even"><span class="lineNumber">&nbsp;8068&nbsp;</span>		return&nbsp;element.is(':visible');<a name="line_8068"></a></li>
<li id="line_8069" class="odd"><span class="lineNumber">&nbsp;8069&nbsp;</span>	}<a name="line_8069"></a></li>
<li id="line_8070" class="even"><span class="lineNumber">&nbsp;8070&nbsp;</span>	<a name="line_8070"></a></li>
<li id="line_8071" class="odd"><span class="lineNumber">&nbsp;8071&nbsp;</span>	<a name="line_8071"></a></li>
<li id="line_8072" class="even"><span class="lineNumber">&nbsp;8072&nbsp;</span><a name="line_8072"></a></li>
<li id="line_8073" class="odd"><span class="lineNumber">&nbsp;8073&nbsp;</span>	//&nbsp;View&nbsp;Rendering<a name="line_8073"></a></li>
<li id="line_8074" class="even"><span class="lineNumber">&nbsp;8074&nbsp;</span>	//&nbsp;-----------------------------------------------------------------------------------<a name="line_8074"></a></li>
<li id="line_8075" class="odd"><span class="lineNumber">&nbsp;8075&nbsp;</span><a name="line_8075"></a></li>
<li id="line_8076" class="even"><span class="lineNumber">&nbsp;8076&nbsp;</span><a name="line_8076"></a></li>
<li id="line_8077" class="odd"><span class="lineNumber">&nbsp;8077&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;view&nbsp;because&nbsp;of&nbsp;a&nbsp;date&nbsp;change,&nbsp;view-type&nbsp;change,&nbsp;or&nbsp;for&nbsp;the&nbsp;first&nbsp;time.<a name="line_8077"></a></li>
<li id="line_8078" class="even"><span class="lineNumber">&nbsp;8078&nbsp;</span>	//&nbsp;If&nbsp;not&nbsp;given&nbsp;a&nbsp;viewType,&nbsp;keep&nbsp;the&nbsp;current&nbsp;view&nbsp;but&nbsp;render&nbsp;different&nbsp;dates.<a name="line_8078"></a></li>
<li id="line_8079" class="odd"><span class="lineNumber">&nbsp;8079&nbsp;</span>	function&nbsp;renderView(viewType)&nbsp;{<a name="line_8079"></a></li>
<li id="line_8080" class="even"><span class="lineNumber">&nbsp;8080&nbsp;</span>		ignoreWindowResize++;<a name="line_8080"></a></li>
<li id="line_8081" class="odd"><span class="lineNumber">&nbsp;8081&nbsp;</span><a name="line_8081"></a></li>
<li id="line_8082" class="even"><span class="lineNumber">&nbsp;8082&nbsp;</span>		//&nbsp;if&nbsp;viewType&nbsp;is&nbsp;changing,&nbsp;remove&nbsp;the&nbsp;old&nbsp;view's&nbsp;rendering<a name="line_8082"></a></li>
<li id="line_8083" class="odd"><span class="lineNumber">&nbsp;8083&nbsp;</span>		if&nbsp;(currentView&nbsp;&amp;&amp;&nbsp;viewType&nbsp;&amp;&amp;&nbsp;currentView.type&nbsp;!==&nbsp;viewType)&nbsp;{<a name="line_8083"></a></li>
<li id="line_8084" class="even"><span class="lineNumber">&nbsp;8084&nbsp;</span>			header.deactivateButton(currentView.type);<a name="line_8084"></a></li>
<li id="line_8085" class="odd"><span class="lineNumber">&nbsp;8085&nbsp;</span>			freezeContentHeight();&nbsp;//&nbsp;prevent&nbsp;a&nbsp;scroll&nbsp;jump&nbsp;when&nbsp;view&nbsp;element&nbsp;is&nbsp;removed<a name="line_8085"></a></li>
<li id="line_8086" class="even"><span class="lineNumber">&nbsp;8086&nbsp;</span>			currentView.removeElement();<a name="line_8086"></a></li>
<li id="line_8087" class="odd"><span class="lineNumber">&nbsp;8087&nbsp;</span>			currentView&nbsp;=&nbsp;t.view&nbsp;=&nbsp;null;<a name="line_8087"></a></li>
<li id="line_8088" class="even"><span class="lineNumber">&nbsp;8088&nbsp;</span>		}<a name="line_8088"></a></li>
<li id="line_8089" class="odd"><span class="lineNumber">&nbsp;8089&nbsp;</span><a name="line_8089"></a></li>
<li id="line_8090" class="even"><span class="lineNumber">&nbsp;8090&nbsp;</span>		//&nbsp;if&nbsp;viewType&nbsp;changed,&nbsp;or&nbsp;the&nbsp;view&nbsp;was&nbsp;never&nbsp;created,&nbsp;create&nbsp;a&nbsp;fresh&nbsp;view<a name="line_8090"></a></li>
<li id="line_8091" class="odd"><span class="lineNumber">&nbsp;8091&nbsp;</span>		if&nbsp;(!currentView&nbsp;&amp;&amp;&nbsp;viewType)&nbsp;{<a name="line_8091"></a></li>
<li id="line_8092" class="even"><span class="lineNumber">&nbsp;8092&nbsp;</span>			currentView&nbsp;=&nbsp;t.view&nbsp;=<a name="line_8092"></a></li>
<li id="line_8093" class="odd"><span class="lineNumber">&nbsp;8093&nbsp;</span>				viewsByType[viewType]&nbsp;||<a name="line_8093"></a></li>
<li id="line_8094" class="even"><span class="lineNumber">&nbsp;8094&nbsp;</span>				(viewsByType[viewType]&nbsp;=&nbsp;t.instantiateView(viewType));<a name="line_8094"></a></li>
<li id="line_8095" class="odd"><span class="lineNumber">&nbsp;8095&nbsp;</span><a name="line_8095"></a></li>
<li id="line_8096" class="even"><span class="lineNumber">&nbsp;8096&nbsp;</span>			currentView.setElement(<a name="line_8096"></a></li>
<li id="line_8097" class="odd"><span class="lineNumber">&nbsp;8097&nbsp;</span>				$("&lt;div&nbsp;class='fc-view&nbsp;fc-"&nbsp;+&nbsp;viewType&nbsp;+&nbsp;"-view'&nbsp;/&gt;").appendTo(content)<a name="line_8097"></a></li>
<li id="line_8098" class="even"><span class="lineNumber">&nbsp;8098&nbsp;</span>			);<a name="line_8098"></a></li>
<li id="line_8099" class="odd"><span class="lineNumber">&nbsp;8099&nbsp;</span>			header.activateButton(viewType);<a name="line_8099"></a></li>
<li id="line_8100" class="even"><span class="lineNumber">&nbsp;8100&nbsp;</span>		}<a name="line_8100"></a></li>
<li id="line_8101" class="odd"><span class="lineNumber">&nbsp;8101&nbsp;</span><a name="line_8101"></a></li>
<li id="line_8102" class="even"><span class="lineNumber">&nbsp;8102&nbsp;</span>		if&nbsp;(currentView)&nbsp;{<a name="line_8102"></a></li>
<li id="line_8103" class="odd"><span class="lineNumber">&nbsp;8103&nbsp;</span><a name="line_8103"></a></li>
<li id="line_8104" class="even"><span class="lineNumber">&nbsp;8104&nbsp;</span>			//&nbsp;in&nbsp;case&nbsp;the&nbsp;view&nbsp;should&nbsp;render&nbsp;a&nbsp;period&nbsp;of&nbsp;time&nbsp;that&nbsp;is&nbsp;completely&nbsp;hidden<a name="line_8104"></a></li>
<li id="line_8105" class="odd"><span class="lineNumber">&nbsp;8105&nbsp;</span>			date&nbsp;=&nbsp;currentView.massageCurrentDate(date);<a name="line_8105"></a></li>
<li id="line_8106" class="even"><span class="lineNumber">&nbsp;8106&nbsp;</span><a name="line_8106"></a></li>
<li id="line_8107" class="odd"><span class="lineNumber">&nbsp;8107&nbsp;</span>			//&nbsp;render&nbsp;or&nbsp;rerender&nbsp;the&nbsp;view<a name="line_8107"></a></li>
<li id="line_8108" class="even"><span class="lineNumber">&nbsp;8108&nbsp;</span>			if&nbsp;(<a name="line_8108"></a></li>
<li id="line_8109" class="odd"><span class="lineNumber">&nbsp;8109&nbsp;</span>				!currentView.displaying&nbsp;||<a name="line_8109"></a></li>
<li id="line_8110" class="even"><span class="lineNumber">&nbsp;8110&nbsp;</span>				!date.isWithin(currentView.intervalStart,&nbsp;currentView.intervalEnd)&nbsp;//&nbsp;implicit&nbsp;date&nbsp;window&nbsp;change<a name="line_8110"></a></li>
<li id="line_8111" class="odd"><span class="lineNumber">&nbsp;8111&nbsp;</span>			)&nbsp;{<a name="line_8111"></a></li>
<li id="line_8112" class="even"><span class="lineNumber">&nbsp;8112&nbsp;</span>				if&nbsp;(elementVisible())&nbsp;{<a name="line_8112"></a></li>
<li id="line_8113" class="odd"><span class="lineNumber">&nbsp;8113&nbsp;</span><a name="line_8113"></a></li>
<li id="line_8114" class="even"><span class="lineNumber">&nbsp;8114&nbsp;</span>					freezeContentHeight();<a name="line_8114"></a></li>
<li id="line_8115" class="odd"><span class="lineNumber">&nbsp;8115&nbsp;</span>					currentView.display(date);<a name="line_8115"></a></li>
<li id="line_8116" class="even"><span class="lineNumber">&nbsp;8116&nbsp;</span>					unfreezeContentHeight();&nbsp;//&nbsp;immediately&nbsp;unfreeze&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;display&nbsp;is&nbsp;async<a name="line_8116"></a></li>
<li id="line_8117" class="odd"><span class="lineNumber">&nbsp;8117&nbsp;</span><a name="line_8117"></a></li>
<li id="line_8118" class="even"><span class="lineNumber">&nbsp;8118&nbsp;</span>					//&nbsp;need&nbsp;to&nbsp;do&nbsp;this&nbsp;after&nbsp;View::render,&nbsp;so&nbsp;dates&nbsp;are&nbsp;calculated<a name="line_8118"></a></li>
<li id="line_8119" class="odd"><span class="lineNumber">&nbsp;8119&nbsp;</span>					updateHeaderTitle();<a name="line_8119"></a></li>
<li id="line_8120" class="even"><span class="lineNumber">&nbsp;8120&nbsp;</span>					updateTodayButton();<a name="line_8120"></a></li>
<li id="line_8121" class="odd"><span class="lineNumber">&nbsp;8121&nbsp;</span><a name="line_8121"></a></li>
<li id="line_8122" class="even"><span class="lineNumber">&nbsp;8122&nbsp;</span>					getAndRenderEvents();<a name="line_8122"></a></li>
<li id="line_8123" class="odd"><span class="lineNumber">&nbsp;8123&nbsp;</span>				}<a name="line_8123"></a></li>
<li id="line_8124" class="even"><span class="lineNumber">&nbsp;8124&nbsp;</span>			}<a name="line_8124"></a></li>
<li id="line_8125" class="odd"><span class="lineNumber">&nbsp;8125&nbsp;</span>		}<a name="line_8125"></a></li>
<li id="line_8126" class="even"><span class="lineNumber">&nbsp;8126&nbsp;</span><a name="line_8126"></a></li>
<li id="line_8127" class="odd"><span class="lineNumber">&nbsp;8127&nbsp;</span>		unfreezeContentHeight();&nbsp;//&nbsp;undo&nbsp;any&nbsp;lone&nbsp;freezeContentHeight&nbsp;calls<a name="line_8127"></a></li>
<li id="line_8128" class="even"><span class="lineNumber">&nbsp;8128&nbsp;</span>		ignoreWindowResize--;<a name="line_8128"></a></li>
<li id="line_8129" class="odd"><span class="lineNumber">&nbsp;8129&nbsp;</span>	}<a name="line_8129"></a></li>
<li id="line_8130" class="even"><span class="lineNumber">&nbsp;8130&nbsp;</span><a name="line_8130"></a></li>
<li id="line_8131" class="odd"><span class="lineNumber">&nbsp;8131&nbsp;</span>	<a name="line_8131"></a></li>
<li id="line_8132" class="even"><span class="lineNumber">&nbsp;8132&nbsp;</span><a name="line_8132"></a></li>
<li id="line_8133" class="odd"><span class="lineNumber">&nbsp;8133&nbsp;</span>	//&nbsp;Resizing<a name="line_8133"></a></li>
<li id="line_8134" class="even"><span class="lineNumber">&nbsp;8134&nbsp;</span>	//&nbsp;-----------------------------------------------------------------------------------<a name="line_8134"></a></li>
<li id="line_8135" class="odd"><span class="lineNumber">&nbsp;8135&nbsp;</span><a name="line_8135"></a></li>
<li id="line_8136" class="even"><span class="lineNumber">&nbsp;8136&nbsp;</span><a name="line_8136"></a></li>
<li id="line_8137" class="odd"><span class="lineNumber">&nbsp;8137&nbsp;</span>	t.getSuggestedViewHeight&nbsp;=&nbsp;function()&nbsp;{<a name="line_8137"></a></li>
<li id="line_8138" class="even"><span class="lineNumber">&nbsp;8138&nbsp;</span>		if&nbsp;(suggestedViewHeight&nbsp;===&nbsp;undefined)&nbsp;{<a name="line_8138"></a></li>
<li id="line_8139" class="odd"><span class="lineNumber">&nbsp;8139&nbsp;</span>			calcSize();<a name="line_8139"></a></li>
<li id="line_8140" class="even"><span class="lineNumber">&nbsp;8140&nbsp;</span>		}<a name="line_8140"></a></li>
<li id="line_8141" class="odd"><span class="lineNumber">&nbsp;8141&nbsp;</span>		return&nbsp;suggestedViewHeight;<a name="line_8141"></a></li>
<li id="line_8142" class="even"><span class="lineNumber">&nbsp;8142&nbsp;</span>	};<a name="line_8142"></a></li>
<li id="line_8143" class="odd"><span class="lineNumber">&nbsp;8143&nbsp;</span><a name="line_8143"></a></li>
<li id="line_8144" class="even"><span class="lineNumber">&nbsp;8144&nbsp;</span><a name="line_8144"></a></li>
<li id="line_8145" class="odd"><span class="lineNumber">&nbsp;8145&nbsp;</span>	t.isHeightAuto&nbsp;=&nbsp;function()&nbsp;{<a name="line_8145"></a></li>
<li id="line_8146" class="even"><span class="lineNumber">&nbsp;8146&nbsp;</span>		return&nbsp;options.contentHeight&nbsp;===&nbsp;'auto'&nbsp;||&nbsp;options.height&nbsp;===&nbsp;'auto';<a name="line_8146"></a></li>
<li id="line_8147" class="odd"><span class="lineNumber">&nbsp;8147&nbsp;</span>	};<a name="line_8147"></a></li>
<li id="line_8148" class="even"><span class="lineNumber">&nbsp;8148&nbsp;</span>	<a name="line_8148"></a></li>
<li id="line_8149" class="odd"><span class="lineNumber">&nbsp;8149&nbsp;</span>	<a name="line_8149"></a></li>
<li id="line_8150" class="even"><span class="lineNumber">&nbsp;8150&nbsp;</span>	function&nbsp;updateSize(shouldRecalc)&nbsp;{<a name="line_8150"></a></li>
<li id="line_8151" class="odd"><span class="lineNumber">&nbsp;8151&nbsp;</span>		if&nbsp;(elementVisible())&nbsp;{<a name="line_8151"></a></li>
<li id="line_8152" class="even"><span class="lineNumber">&nbsp;8152&nbsp;</span><a name="line_8152"></a></li>
<li id="line_8153" class="odd"><span class="lineNumber">&nbsp;8153&nbsp;</span>			if&nbsp;(shouldRecalc)&nbsp;{<a name="line_8153"></a></li>
<li id="line_8154" class="even"><span class="lineNumber">&nbsp;8154&nbsp;</span>				_calcSize();<a name="line_8154"></a></li>
<li id="line_8155" class="odd"><span class="lineNumber">&nbsp;8155&nbsp;</span>			}<a name="line_8155"></a></li>
<li id="line_8156" class="even"><span class="lineNumber">&nbsp;8156&nbsp;</span><a name="line_8156"></a></li>
<li id="line_8157" class="odd"><span class="lineNumber">&nbsp;8157&nbsp;</span>			ignoreWindowResize++;<a name="line_8157"></a></li>
<li id="line_8158" class="even"><span class="lineNumber">&nbsp;8158&nbsp;</span>			currentView.updateSize(true);&nbsp;//&nbsp;isResize=true.&nbsp;will&nbsp;poll&nbsp;getSuggestedViewHeight()&nbsp;and&nbsp;isHeightAuto()<a name="line_8158"></a></li>
<li id="line_8159" class="odd"><span class="lineNumber">&nbsp;8159&nbsp;</span>			ignoreWindowResize--;<a name="line_8159"></a></li>
<li id="line_8160" class="even"><span class="lineNumber">&nbsp;8160&nbsp;</span><a name="line_8160"></a></li>
<li id="line_8161" class="odd"><span class="lineNumber">&nbsp;8161&nbsp;</span>			return&nbsp;true;&nbsp;//&nbsp;signal&nbsp;success<a name="line_8161"></a></li>
<li id="line_8162" class="even"><span class="lineNumber">&nbsp;8162&nbsp;</span>		}<a name="line_8162"></a></li>
<li id="line_8163" class="odd"><span class="lineNumber">&nbsp;8163&nbsp;</span>	}<a name="line_8163"></a></li>
<li id="line_8164" class="even"><span class="lineNumber">&nbsp;8164&nbsp;</span><a name="line_8164"></a></li>
<li id="line_8165" class="odd"><span class="lineNumber">&nbsp;8165&nbsp;</span><a name="line_8165"></a></li>
<li id="line_8166" class="even"><span class="lineNumber">&nbsp;8166&nbsp;</span>	function&nbsp;calcSize()&nbsp;{<a name="line_8166"></a></li>
<li id="line_8167" class="odd"><span class="lineNumber">&nbsp;8167&nbsp;</span>		if&nbsp;(elementVisible())&nbsp;{<a name="line_8167"></a></li>
<li id="line_8168" class="even"><span class="lineNumber">&nbsp;8168&nbsp;</span>			_calcSize();<a name="line_8168"></a></li>
<li id="line_8169" class="odd"><span class="lineNumber">&nbsp;8169&nbsp;</span>		}<a name="line_8169"></a></li>
<li id="line_8170" class="even"><span class="lineNumber">&nbsp;8170&nbsp;</span>	}<a name="line_8170"></a></li>
<li id="line_8171" class="odd"><span class="lineNumber">&nbsp;8171&nbsp;</span>	<a name="line_8171"></a></li>
<li id="line_8172" class="even"><span class="lineNumber">&nbsp;8172&nbsp;</span>	<a name="line_8172"></a></li>
<li id="line_8173" class="odd"><span class="lineNumber">&nbsp;8173&nbsp;</span>	function&nbsp;_calcSize()&nbsp;{&nbsp;//&nbsp;assumes&nbsp;elementVisible<a name="line_8173"></a></li>
<li id="line_8174" class="even"><span class="lineNumber">&nbsp;8174&nbsp;</span>		if&nbsp;(typeof&nbsp;options.contentHeight&nbsp;===&nbsp;'number')&nbsp;{&nbsp;//&nbsp;exists&nbsp;and&nbsp;not&nbsp;'auto'<a name="line_8174"></a></li>
<li id="line_8175" class="odd"><span class="lineNumber">&nbsp;8175&nbsp;</span>			suggestedViewHeight&nbsp;=&nbsp;options.contentHeight;<a name="line_8175"></a></li>
<li id="line_8176" class="even"><span class="lineNumber">&nbsp;8176&nbsp;</span>		}<a name="line_8176"></a></li>
<li id="line_8177" class="odd"><span class="lineNumber">&nbsp;8177&nbsp;</span>		else&nbsp;if&nbsp;(typeof&nbsp;options.height&nbsp;===&nbsp;'number')&nbsp;{&nbsp;//&nbsp;exists&nbsp;and&nbsp;not&nbsp;'auto'<a name="line_8177"></a></li>
<li id="line_8178" class="even"><span class="lineNumber">&nbsp;8178&nbsp;</span>			suggestedViewHeight&nbsp;=&nbsp;options.height&nbsp;-&nbsp;(headerElement&nbsp;?&nbsp;headerElement.outerHeight(true)&nbsp;:&nbsp;0);<a name="line_8178"></a></li>
<li id="line_8179" class="odd"><span class="lineNumber">&nbsp;8179&nbsp;</span>		}<a name="line_8179"></a></li>
<li id="line_8180" class="even"><span class="lineNumber">&nbsp;8180&nbsp;</span>		else&nbsp;{<a name="line_8180"></a></li>
<li id="line_8181" class="odd"><span class="lineNumber">&nbsp;8181&nbsp;</span>			suggestedViewHeight&nbsp;=&nbsp;Math.round(content.width()&nbsp;/&nbsp;Math.max(options.aspectRatio,&nbsp;.5));<a name="line_8181"></a></li>
<li id="line_8182" class="even"><span class="lineNumber">&nbsp;8182&nbsp;</span>		}<a name="line_8182"></a></li>
<li id="line_8183" class="odd"><span class="lineNumber">&nbsp;8183&nbsp;</span>	}<a name="line_8183"></a></li>
<li id="line_8184" class="even"><span class="lineNumber">&nbsp;8184&nbsp;</span>	<a name="line_8184"></a></li>
<li id="line_8185" class="odd"><span class="lineNumber">&nbsp;8185&nbsp;</span>	<a name="line_8185"></a></li>
<li id="line_8186" class="even"><span class="lineNumber">&nbsp;8186&nbsp;</span>	function&nbsp;windowResize(ev)&nbsp;{<a name="line_8186"></a></li>
<li id="line_8187" class="odd"><span class="lineNumber">&nbsp;8187&nbsp;</span>		if&nbsp;(<a name="line_8187"></a></li>
<li id="line_8188" class="even"><span class="lineNumber">&nbsp;8188&nbsp;</span>			!ignoreWindowResize&nbsp;&amp;&amp;<a name="line_8188"></a></li>
<li id="line_8189" class="odd"><span class="lineNumber">&nbsp;8189&nbsp;</span>			ev.target&nbsp;===&nbsp;window&nbsp;&amp;&amp;&nbsp;//&nbsp;so&nbsp;we&nbsp;don't&nbsp;process&nbsp;jqui&nbsp;"resize"&nbsp;events&nbsp;that&nbsp;have&nbsp;bubbled&nbsp;up<a name="line_8189"></a></li>
<li id="line_8190" class="even"><span class="lineNumber">&nbsp;8190&nbsp;</span>			currentView.start&nbsp;//&nbsp;view&nbsp;has&nbsp;already&nbsp;been&nbsp;rendered<a name="line_8190"></a></li>
<li id="line_8191" class="odd"><span class="lineNumber">&nbsp;8191&nbsp;</span>		)&nbsp;{<a name="line_8191"></a></li>
<li id="line_8192" class="even"><span class="lineNumber">&nbsp;8192&nbsp;</span>			if&nbsp;(updateSize(true))&nbsp;{<a name="line_8192"></a></li>
<li id="line_8193" class="odd"><span class="lineNumber">&nbsp;8193&nbsp;</span>				currentView.trigger('windowResize',&nbsp;_element);<a name="line_8193"></a></li>
<li id="line_8194" class="even"><span class="lineNumber">&nbsp;8194&nbsp;</span>			}<a name="line_8194"></a></li>
<li id="line_8195" class="odd"><span class="lineNumber">&nbsp;8195&nbsp;</span>		}<a name="line_8195"></a></li>
<li id="line_8196" class="even"><span class="lineNumber">&nbsp;8196&nbsp;</span>	}<a name="line_8196"></a></li>
<li id="line_8197" class="odd"><span class="lineNumber">&nbsp;8197&nbsp;</span>	<a name="line_8197"></a></li>
<li id="line_8198" class="even"><span class="lineNumber">&nbsp;8198&nbsp;</span>	<a name="line_8198"></a></li>
<li id="line_8199" class="odd"><span class="lineNumber">&nbsp;8199&nbsp;</span>	<a name="line_8199"></a></li>
<li id="line_8200" class="even"><span class="lineNumber">&nbsp;8200&nbsp;</span>	/*&nbsp;Event&nbsp;Fetching/Rendering<a name="line_8200"></a></li>
<li id="line_8201" class="odd"><span class="lineNumber">&nbsp;8201&nbsp;</span>	-----------------------------------------------------------------------------*/<a name="line_8201"></a></li>
<li id="line_8202" class="even"><span class="lineNumber">&nbsp;8202&nbsp;</span>	//&nbsp;TODO:&nbsp;going&nbsp;forward,&nbsp;most&nbsp;of&nbsp;this&nbsp;stuff&nbsp;should&nbsp;be&nbsp;directly&nbsp;handled&nbsp;by&nbsp;the&nbsp;view<a name="line_8202"></a></li>
<li id="line_8203" class="odd"><span class="lineNumber">&nbsp;8203&nbsp;</span><a name="line_8203"></a></li>
<li id="line_8204" class="even"><span class="lineNumber">&nbsp;8204&nbsp;</span><a name="line_8204"></a></li>
<li id="line_8205" class="odd"><span class="lineNumber">&nbsp;8205&nbsp;</span>	function&nbsp;refetchEvents()&nbsp;{&nbsp;//&nbsp;can&nbsp;be&nbsp;called&nbsp;as&nbsp;an&nbsp;API&nbsp;method<a name="line_8205"></a></li>
<li id="line_8206" class="even"><span class="lineNumber">&nbsp;8206&nbsp;</span>		destroyEvents();&nbsp;//&nbsp;so&nbsp;that&nbsp;events&nbsp;are&nbsp;cleared&nbsp;before&nbsp;user&nbsp;starts&nbsp;waiting&nbsp;for&nbsp;AJAX<a name="line_8206"></a></li>
<li id="line_8207" class="odd"><span class="lineNumber">&nbsp;8207&nbsp;</span>		fetchAndRenderEvents();<a name="line_8207"></a></li>
<li id="line_8208" class="even"><span class="lineNumber">&nbsp;8208&nbsp;</span>	}<a name="line_8208"></a></li>
<li id="line_8209" class="odd"><span class="lineNumber">&nbsp;8209&nbsp;</span><a name="line_8209"></a></li>
<li id="line_8210" class="even"><span class="lineNumber">&nbsp;8210&nbsp;</span><a name="line_8210"></a></li>
<li id="line_8211" class="odd"><span class="lineNumber">&nbsp;8211&nbsp;</span>	function&nbsp;renderEvents()&nbsp;{&nbsp;//&nbsp;destroys&nbsp;old&nbsp;events&nbsp;if&nbsp;previously&nbsp;rendered<a name="line_8211"></a></li>
<li id="line_8212" class="even"><span class="lineNumber">&nbsp;8212&nbsp;</span>		if&nbsp;(elementVisible())&nbsp;{<a name="line_8212"></a></li>
<li id="line_8213" class="odd"><span class="lineNumber">&nbsp;8213&nbsp;</span>			freezeContentHeight();<a name="line_8213"></a></li>
<li id="line_8214" class="even"><span class="lineNumber">&nbsp;8214&nbsp;</span>			currentView.displayEvents(events);<a name="line_8214"></a></li>
<li id="line_8215" class="odd"><span class="lineNumber">&nbsp;8215&nbsp;</span>			unfreezeContentHeight();<a name="line_8215"></a></li>
<li id="line_8216" class="even"><span class="lineNumber">&nbsp;8216&nbsp;</span>		}<a name="line_8216"></a></li>
<li id="line_8217" class="odd"><span class="lineNumber">&nbsp;8217&nbsp;</span>	}<a name="line_8217"></a></li>
<li id="line_8218" class="even"><span class="lineNumber">&nbsp;8218&nbsp;</span><a name="line_8218"></a></li>
<li id="line_8219" class="odd"><span class="lineNumber">&nbsp;8219&nbsp;</span><a name="line_8219"></a></li>
<li id="line_8220" class="even"><span class="lineNumber">&nbsp;8220&nbsp;</span>	function&nbsp;destroyEvents()&nbsp;{<a name="line_8220"></a></li>
<li id="line_8221" class="odd"><span class="lineNumber">&nbsp;8221&nbsp;</span>		freezeContentHeight();<a name="line_8221"></a></li>
<li id="line_8222" class="even"><span class="lineNumber">&nbsp;8222&nbsp;</span>		currentView.clearEvents();<a name="line_8222"></a></li>
<li id="line_8223" class="odd"><span class="lineNumber">&nbsp;8223&nbsp;</span>		unfreezeContentHeight();<a name="line_8223"></a></li>
<li id="line_8224" class="even"><span class="lineNumber">&nbsp;8224&nbsp;</span>	}<a name="line_8224"></a></li>
<li id="line_8225" class="odd"><span class="lineNumber">&nbsp;8225&nbsp;</span>	<a name="line_8225"></a></li>
<li id="line_8226" class="even"><span class="lineNumber">&nbsp;8226&nbsp;</span><a name="line_8226"></a></li>
<li id="line_8227" class="odd"><span class="lineNumber">&nbsp;8227&nbsp;</span>	function&nbsp;getAndRenderEvents()&nbsp;{<a name="line_8227"></a></li>
<li id="line_8228" class="even"><span class="lineNumber">&nbsp;8228&nbsp;</span>		if&nbsp;(!options.lazyFetching&nbsp;||&nbsp;isFetchNeeded(currentView.start,&nbsp;currentView.end))&nbsp;{<a name="line_8228"></a></li>
<li id="line_8229" class="odd"><span class="lineNumber">&nbsp;8229&nbsp;</span>			fetchAndRenderEvents();<a name="line_8229"></a></li>
<li id="line_8230" class="even"><span class="lineNumber">&nbsp;8230&nbsp;</span>		}<a name="line_8230"></a></li>
<li id="line_8231" class="odd"><span class="lineNumber">&nbsp;8231&nbsp;</span>		else&nbsp;{<a name="line_8231"></a></li>
<li id="line_8232" class="even"><span class="lineNumber">&nbsp;8232&nbsp;</span>			renderEvents();<a name="line_8232"></a></li>
<li id="line_8233" class="odd"><span class="lineNumber">&nbsp;8233&nbsp;</span>		}<a name="line_8233"></a></li>
<li id="line_8234" class="even"><span class="lineNumber">&nbsp;8234&nbsp;</span>	}<a name="line_8234"></a></li>
<li id="line_8235" class="odd"><span class="lineNumber">&nbsp;8235&nbsp;</span><a name="line_8235"></a></li>
<li id="line_8236" class="even"><span class="lineNumber">&nbsp;8236&nbsp;</span><a name="line_8236"></a></li>
<li id="line_8237" class="odd"><span class="lineNumber">&nbsp;8237&nbsp;</span>	function&nbsp;fetchAndRenderEvents()&nbsp;{<a name="line_8237"></a></li>
<li id="line_8238" class="even"><span class="lineNumber">&nbsp;8238&nbsp;</span>		fetchEvents(currentView.start,&nbsp;currentView.end);<a name="line_8238"></a></li>
<li id="line_8239" class="odd"><span class="lineNumber">&nbsp;8239&nbsp;</span>			//&nbsp;...&nbsp;will&nbsp;call&nbsp;reportEvents<a name="line_8239"></a></li>
<li id="line_8240" class="even"><span class="lineNumber">&nbsp;8240&nbsp;</span>			//&nbsp;...&nbsp;which&nbsp;will&nbsp;call&nbsp;renderEvents<a name="line_8240"></a></li>
<li id="line_8241" class="odd"><span class="lineNumber">&nbsp;8241&nbsp;</span>	}<a name="line_8241"></a></li>
<li id="line_8242" class="even"><span class="lineNumber">&nbsp;8242&nbsp;</span><a name="line_8242"></a></li>
<li id="line_8243" class="odd"><span class="lineNumber">&nbsp;8243&nbsp;</span>	<a name="line_8243"></a></li>
<li id="line_8244" class="even"><span class="lineNumber">&nbsp;8244&nbsp;</span>	//&nbsp;called&nbsp;when&nbsp;event&nbsp;data&nbsp;arrives<a name="line_8244"></a></li>
<li id="line_8245" class="odd"><span class="lineNumber">&nbsp;8245&nbsp;</span>	function&nbsp;reportEvents(_events)&nbsp;{<a name="line_8245"></a></li>
<li id="line_8246" class="even"><span class="lineNumber">&nbsp;8246&nbsp;</span>		events&nbsp;=&nbsp;_events;<a name="line_8246"></a></li>
<li id="line_8247" class="odd"><span class="lineNumber">&nbsp;8247&nbsp;</span>		renderEvents();<a name="line_8247"></a></li>
<li id="line_8248" class="even"><span class="lineNumber">&nbsp;8248&nbsp;</span>	}<a name="line_8248"></a></li>
<li id="line_8249" class="odd"><span class="lineNumber">&nbsp;8249&nbsp;</span><a name="line_8249"></a></li>
<li id="line_8250" class="even"><span class="lineNumber">&nbsp;8250&nbsp;</span><a name="line_8250"></a></li>
<li id="line_8251" class="odd"><span class="lineNumber">&nbsp;8251&nbsp;</span>	//&nbsp;called&nbsp;when&nbsp;a&nbsp;single&nbsp;event's&nbsp;data&nbsp;has&nbsp;been&nbsp;changed<a name="line_8251"></a></li>
<li id="line_8252" class="even"><span class="lineNumber">&nbsp;8252&nbsp;</span>	function&nbsp;reportEventChange()&nbsp;{<a name="line_8252"></a></li>
<li id="line_8253" class="odd"><span class="lineNumber">&nbsp;8253&nbsp;</span>		renderEvents();<a name="line_8253"></a></li>
<li id="line_8254" class="even"><span class="lineNumber">&nbsp;8254&nbsp;</span>	}<a name="line_8254"></a></li>
<li id="line_8255" class="odd"><span class="lineNumber">&nbsp;8255&nbsp;</span><a name="line_8255"></a></li>
<li id="line_8256" class="even"><span class="lineNumber">&nbsp;8256&nbsp;</span><a name="line_8256"></a></li>
<li id="line_8257" class="odd"><span class="lineNumber">&nbsp;8257&nbsp;</span><a name="line_8257"></a></li>
<li id="line_8258" class="even"><span class="lineNumber">&nbsp;8258&nbsp;</span>	/*&nbsp;Header&nbsp;Updating<a name="line_8258"></a></li>
<li id="line_8259" class="odd"><span class="lineNumber">&nbsp;8259&nbsp;</span>	-----------------------------------------------------------------------------*/<a name="line_8259"></a></li>
<li id="line_8260" class="even"><span class="lineNumber">&nbsp;8260&nbsp;</span><a name="line_8260"></a></li>
<li id="line_8261" class="odd"><span class="lineNumber">&nbsp;8261&nbsp;</span><a name="line_8261"></a></li>
<li id="line_8262" class="even"><span class="lineNumber">&nbsp;8262&nbsp;</span>	function&nbsp;updateHeaderTitle()&nbsp;{<a name="line_8262"></a></li>
<li id="line_8263" class="odd"><span class="lineNumber">&nbsp;8263&nbsp;</span>		header.updateTitle(currentView.title);<a name="line_8263"></a></li>
<li id="line_8264" class="even"><span class="lineNumber">&nbsp;8264&nbsp;</span>	}<a name="line_8264"></a></li>
<li id="line_8265" class="odd"><span class="lineNumber">&nbsp;8265&nbsp;</span><a name="line_8265"></a></li>
<li id="line_8266" class="even"><span class="lineNumber">&nbsp;8266&nbsp;</span><a name="line_8266"></a></li>
<li id="line_8267" class="odd"><span class="lineNumber">&nbsp;8267&nbsp;</span>	function&nbsp;updateTodayButton()&nbsp;{<a name="line_8267"></a></li>
<li id="line_8268" class="even"><span class="lineNumber">&nbsp;8268&nbsp;</span>		var&nbsp;now&nbsp;=&nbsp;t.getNow();<a name="line_8268"></a></li>
<li id="line_8269" class="odd"><span class="lineNumber">&nbsp;8269&nbsp;</span>		if&nbsp;(now.isWithin(currentView.intervalStart,&nbsp;currentView.intervalEnd))&nbsp;{<a name="line_8269"></a></li>
<li id="line_8270" class="even"><span class="lineNumber">&nbsp;8270&nbsp;</span>			header.disableButton('today');<a name="line_8270"></a></li>
<li id="line_8271" class="odd"><span class="lineNumber">&nbsp;8271&nbsp;</span>		}<a name="line_8271"></a></li>
<li id="line_8272" class="even"><span class="lineNumber">&nbsp;8272&nbsp;</span>		else&nbsp;{<a name="line_8272"></a></li>
<li id="line_8273" class="odd"><span class="lineNumber">&nbsp;8273&nbsp;</span>			header.enableButton('today');<a name="line_8273"></a></li>
<li id="line_8274" class="even"><span class="lineNumber">&nbsp;8274&nbsp;</span>		}<a name="line_8274"></a></li>
<li id="line_8275" class="odd"><span class="lineNumber">&nbsp;8275&nbsp;</span>	}<a name="line_8275"></a></li>
<li id="line_8276" class="even"><span class="lineNumber">&nbsp;8276&nbsp;</span>	<a name="line_8276"></a></li>
<li id="line_8277" class="odd"><span class="lineNumber">&nbsp;8277&nbsp;</span><a name="line_8277"></a></li>
<li id="line_8278" class="even"><span class="lineNumber">&nbsp;8278&nbsp;</span><a name="line_8278"></a></li>
<li id="line_8279" class="odd"><span class="lineNumber">&nbsp;8279&nbsp;</span>	/*&nbsp;Selection<a name="line_8279"></a></li>
<li id="line_8280" class="even"><span class="lineNumber">&nbsp;8280&nbsp;</span>	-----------------------------------------------------------------------------*/<a name="line_8280"></a></li>
<li id="line_8281" class="odd"><span class="lineNumber">&nbsp;8281&nbsp;</span>	<a name="line_8281"></a></li>
<li id="line_8282" class="even"><span class="lineNumber">&nbsp;8282&nbsp;</span><a name="line_8282"></a></li>
<li id="line_8283" class="odd"><span class="lineNumber">&nbsp;8283&nbsp;</span>	function&nbsp;select(start,&nbsp;end)&nbsp;{<a name="line_8283"></a></li>
<li id="line_8284" class="even"><span class="lineNumber">&nbsp;8284&nbsp;</span>		currentView.select(<a name="line_8284"></a></li>
<li id="line_8285" class="odd"><span class="lineNumber">&nbsp;8285&nbsp;</span>			t.buildSelectRange.apply(t,&nbsp;arguments)<a name="line_8285"></a></li>
<li id="line_8286" class="even"><span class="lineNumber">&nbsp;8286&nbsp;</span>		);<a name="line_8286"></a></li>
<li id="line_8287" class="odd"><span class="lineNumber">&nbsp;8287&nbsp;</span>	}<a name="line_8287"></a></li>
<li id="line_8288" class="even"><span class="lineNumber">&nbsp;8288&nbsp;</span>	<a name="line_8288"></a></li>
<li id="line_8289" class="odd"><span class="lineNumber">&nbsp;8289&nbsp;</span><a name="line_8289"></a></li>
<li id="line_8290" class="even"><span class="lineNumber">&nbsp;8290&nbsp;</span>	function&nbsp;unselect()&nbsp;{&nbsp;//&nbsp;safe&nbsp;to&nbsp;be&nbsp;called&nbsp;before&nbsp;renderView<a name="line_8290"></a></li>
<li id="line_8291" class="odd"><span class="lineNumber">&nbsp;8291&nbsp;</span>		if&nbsp;(currentView)&nbsp;{<a name="line_8291"></a></li>
<li id="line_8292" class="even"><span class="lineNumber">&nbsp;8292&nbsp;</span>			currentView.unselect();<a name="line_8292"></a></li>
<li id="line_8293" class="odd"><span class="lineNumber">&nbsp;8293&nbsp;</span>		}<a name="line_8293"></a></li>
<li id="line_8294" class="even"><span class="lineNumber">&nbsp;8294&nbsp;</span>	}<a name="line_8294"></a></li>
<li id="line_8295" class="odd"><span class="lineNumber">&nbsp;8295&nbsp;</span>	<a name="line_8295"></a></li>
<li id="line_8296" class="even"><span class="lineNumber">&nbsp;8296&nbsp;</span>	<a name="line_8296"></a></li>
<li id="line_8297" class="odd"><span class="lineNumber">&nbsp;8297&nbsp;</span>	<a name="line_8297"></a></li>
<li id="line_8298" class="even"><span class="lineNumber">&nbsp;8298&nbsp;</span>	/*&nbsp;Date<a name="line_8298"></a></li>
<li id="line_8299" class="odd"><span class="lineNumber">&nbsp;8299&nbsp;</span>	-----------------------------------------------------------------------------*/<a name="line_8299"></a></li>
<li id="line_8300" class="even"><span class="lineNumber">&nbsp;8300&nbsp;</span>	<a name="line_8300"></a></li>
<li id="line_8301" class="odd"><span class="lineNumber">&nbsp;8301&nbsp;</span>	<a name="line_8301"></a></li>
<li id="line_8302" class="even"><span class="lineNumber">&nbsp;8302&nbsp;</span>	function&nbsp;prev()&nbsp;{<a name="line_8302"></a></li>
<li id="line_8303" class="odd"><span class="lineNumber">&nbsp;8303&nbsp;</span>		date&nbsp;=&nbsp;currentView.computePrevDate(date);<a name="line_8303"></a></li>
<li id="line_8304" class="even"><span class="lineNumber">&nbsp;8304&nbsp;</span>		renderView();<a name="line_8304"></a></li>
<li id="line_8305" class="odd"><span class="lineNumber">&nbsp;8305&nbsp;</span>	}<a name="line_8305"></a></li>
<li id="line_8306" class="even"><span class="lineNumber">&nbsp;8306&nbsp;</span>	<a name="line_8306"></a></li>
<li id="line_8307" class="odd"><span class="lineNumber">&nbsp;8307&nbsp;</span>	<a name="line_8307"></a></li>
<li id="line_8308" class="even"><span class="lineNumber">&nbsp;8308&nbsp;</span>	function&nbsp;next()&nbsp;{<a name="line_8308"></a></li>
<li id="line_8309" class="odd"><span class="lineNumber">&nbsp;8309&nbsp;</span>		date&nbsp;=&nbsp;currentView.computeNextDate(date);<a name="line_8309"></a></li>
<li id="line_8310" class="even"><span class="lineNumber">&nbsp;8310&nbsp;</span>		renderView();<a name="line_8310"></a></li>
<li id="line_8311" class="odd"><span class="lineNumber">&nbsp;8311&nbsp;</span>	}<a name="line_8311"></a></li>
<li id="line_8312" class="even"><span class="lineNumber">&nbsp;8312&nbsp;</span>	<a name="line_8312"></a></li>
<li id="line_8313" class="odd"><span class="lineNumber">&nbsp;8313&nbsp;</span>	<a name="line_8313"></a></li>
<li id="line_8314" class="even"><span class="lineNumber">&nbsp;8314&nbsp;</span>	function&nbsp;prevYear()&nbsp;{<a name="line_8314"></a></li>
<li id="line_8315" class="odd"><span class="lineNumber">&nbsp;8315&nbsp;</span>		date.add(-1,&nbsp;'years');<a name="line_8315"></a></li>
<li id="line_8316" class="even"><span class="lineNumber">&nbsp;8316&nbsp;</span>		renderView();<a name="line_8316"></a></li>
<li id="line_8317" class="odd"><span class="lineNumber">&nbsp;8317&nbsp;</span>	}<a name="line_8317"></a></li>
<li id="line_8318" class="even"><span class="lineNumber">&nbsp;8318&nbsp;</span>	<a name="line_8318"></a></li>
<li id="line_8319" class="odd"><span class="lineNumber">&nbsp;8319&nbsp;</span>	<a name="line_8319"></a></li>
<li id="line_8320" class="even"><span class="lineNumber">&nbsp;8320&nbsp;</span>	function&nbsp;nextYear()&nbsp;{<a name="line_8320"></a></li>
<li id="line_8321" class="odd"><span class="lineNumber">&nbsp;8321&nbsp;</span>		date.add(1,&nbsp;'years');<a name="line_8321"></a></li>
<li id="line_8322" class="even"><span class="lineNumber">&nbsp;8322&nbsp;</span>		renderView();<a name="line_8322"></a></li>
<li id="line_8323" class="odd"><span class="lineNumber">&nbsp;8323&nbsp;</span>	}<a name="line_8323"></a></li>
<li id="line_8324" class="even"><span class="lineNumber">&nbsp;8324&nbsp;</span>	<a name="line_8324"></a></li>
<li id="line_8325" class="odd"><span class="lineNumber">&nbsp;8325&nbsp;</span>	<a name="line_8325"></a></li>
<li id="line_8326" class="even"><span class="lineNumber">&nbsp;8326&nbsp;</span>	function&nbsp;today()&nbsp;{<a name="line_8326"></a></li>
<li id="line_8327" class="odd"><span class="lineNumber">&nbsp;8327&nbsp;</span>		date&nbsp;=&nbsp;t.getNow();<a name="line_8327"></a></li>
<li id="line_8328" class="even"><span class="lineNumber">&nbsp;8328&nbsp;</span>		renderView();<a name="line_8328"></a></li>
<li id="line_8329" class="odd"><span class="lineNumber">&nbsp;8329&nbsp;</span>	}<a name="line_8329"></a></li>
<li id="line_8330" class="even"><span class="lineNumber">&nbsp;8330&nbsp;</span>	<a name="line_8330"></a></li>
<li id="line_8331" class="odd"><span class="lineNumber">&nbsp;8331&nbsp;</span>	<a name="line_8331"></a></li>
<li id="line_8332" class="even"><span class="lineNumber">&nbsp;8332&nbsp;</span>	function&nbsp;gotoDate(dateInput)&nbsp;{<a name="line_8332"></a></li>
<li id="line_8333" class="odd"><span class="lineNumber">&nbsp;8333&nbsp;</span>		date&nbsp;=&nbsp;t.moment(dateInput);<a name="line_8333"></a></li>
<li id="line_8334" class="even"><span class="lineNumber">&nbsp;8334&nbsp;</span>		renderView();<a name="line_8334"></a></li>
<li id="line_8335" class="odd"><span class="lineNumber">&nbsp;8335&nbsp;</span>	}<a name="line_8335"></a></li>
<li id="line_8336" class="even"><span class="lineNumber">&nbsp;8336&nbsp;</span>	<a name="line_8336"></a></li>
<li id="line_8337" class="odd"><span class="lineNumber">&nbsp;8337&nbsp;</span>	<a name="line_8337"></a></li>
<li id="line_8338" class="even"><span class="lineNumber">&nbsp;8338&nbsp;</span>	function&nbsp;incrementDate(delta)&nbsp;{<a name="line_8338"></a></li>
<li id="line_8339" class="odd"><span class="lineNumber">&nbsp;8339&nbsp;</span>		date.add(moment.duration(delta));<a name="line_8339"></a></li>
<li id="line_8340" class="even"><span class="lineNumber">&nbsp;8340&nbsp;</span>		renderView();<a name="line_8340"></a></li>
<li id="line_8341" class="odd"><span class="lineNumber">&nbsp;8341&nbsp;</span>	}<a name="line_8341"></a></li>
<li id="line_8342" class="even"><span class="lineNumber">&nbsp;8342&nbsp;</span><a name="line_8342"></a></li>
<li id="line_8343" class="odd"><span class="lineNumber">&nbsp;8343&nbsp;</span><a name="line_8343"></a></li>
<li id="line_8344" class="even"><span class="lineNumber">&nbsp;8344&nbsp;</span>	//&nbsp;Forces&nbsp;navigation&nbsp;to&nbsp;a&nbsp;view&nbsp;for&nbsp;the&nbsp;given&nbsp;date.<a name="line_8344"></a></li>
<li id="line_8345" class="odd"><span class="lineNumber">&nbsp;8345&nbsp;</span>	//&nbsp;`viewType`&nbsp;can&nbsp;be&nbsp;a&nbsp;specific&nbsp;view&nbsp;name&nbsp;or&nbsp;a&nbsp;generic&nbsp;one&nbsp;like&nbsp;"week"&nbsp;or&nbsp;"day".<a name="line_8345"></a></li>
<li id="line_8346" class="even"><span class="lineNumber">&nbsp;8346&nbsp;</span>	function&nbsp;zoomTo(newDate,&nbsp;viewType)&nbsp;{<a name="line_8346"></a></li>
<li id="line_8347" class="odd"><span class="lineNumber">&nbsp;8347&nbsp;</span>		var&nbsp;spec;<a name="line_8347"></a></li>
<li id="line_8348" class="even"><span class="lineNumber">&nbsp;8348&nbsp;</span><a name="line_8348"></a></li>
<li id="line_8349" class="odd"><span class="lineNumber">&nbsp;8349&nbsp;</span>		viewType&nbsp;=&nbsp;viewType&nbsp;||&nbsp;'day';&nbsp;//&nbsp;day&nbsp;is&nbsp;default&nbsp;zoom<a name="line_8349"></a></li>
<li id="line_8350" class="even"><span class="lineNumber">&nbsp;8350&nbsp;</span>		spec&nbsp;=&nbsp;t.getViewSpec(viewType)&nbsp;||&nbsp;t.getUnitViewSpec(viewType);<a name="line_8350"></a></li>
<li id="line_8351" class="odd"><span class="lineNumber">&nbsp;8351&nbsp;</span><a name="line_8351"></a></li>
<li id="line_8352" class="even"><span class="lineNumber">&nbsp;8352&nbsp;</span>		date&nbsp;=&nbsp;newDate;<a name="line_8352"></a></li>
<li id="line_8353" class="odd"><span class="lineNumber">&nbsp;8353&nbsp;</span>		renderView(spec&nbsp;?&nbsp;spec.type&nbsp;:&nbsp;null);<a name="line_8353"></a></li>
<li id="line_8354" class="even"><span class="lineNumber">&nbsp;8354&nbsp;</span>	}<a name="line_8354"></a></li>
<li id="line_8355" class="odd"><span class="lineNumber">&nbsp;8355&nbsp;</span>	<a name="line_8355"></a></li>
<li id="line_8356" class="even"><span class="lineNumber">&nbsp;8356&nbsp;</span>	<a name="line_8356"></a></li>
<li id="line_8357" class="odd"><span class="lineNumber">&nbsp;8357&nbsp;</span>	function&nbsp;getDate()&nbsp;{<a name="line_8357"></a></li>
<li id="line_8358" class="even"><span class="lineNumber">&nbsp;8358&nbsp;</span>		return&nbsp;date.clone();<a name="line_8358"></a></li>
<li id="line_8359" class="odd"><span class="lineNumber">&nbsp;8359&nbsp;</span>	}<a name="line_8359"></a></li>
<li id="line_8360" class="even"><span class="lineNumber">&nbsp;8360&nbsp;</span><a name="line_8360"></a></li>
<li id="line_8361" class="odd"><span class="lineNumber">&nbsp;8361&nbsp;</span><a name="line_8361"></a></li>
<li id="line_8362" class="even"><span class="lineNumber">&nbsp;8362&nbsp;</span><a name="line_8362"></a></li>
<li id="line_8363" class="odd"><span class="lineNumber">&nbsp;8363&nbsp;</span>	/*&nbsp;Height&nbsp;"Freezing"<a name="line_8363"></a></li>
<li id="line_8364" class="even"><span class="lineNumber">&nbsp;8364&nbsp;</span>	-----------------------------------------------------------------------------*/<a name="line_8364"></a></li>
<li id="line_8365" class="odd"><span class="lineNumber">&nbsp;8365&nbsp;</span>	//&nbsp;TODO:&nbsp;move&nbsp;this&nbsp;into&nbsp;the&nbsp;view<a name="line_8365"></a></li>
<li id="line_8366" class="even"><span class="lineNumber">&nbsp;8366&nbsp;</span><a name="line_8366"></a></li>
<li id="line_8367" class="odd"><span class="lineNumber">&nbsp;8367&nbsp;</span><a name="line_8367"></a></li>
<li id="line_8368" class="even"><span class="lineNumber">&nbsp;8368&nbsp;</span>	function&nbsp;freezeContentHeight()&nbsp;{<a name="line_8368"></a></li>
<li id="line_8369" class="odd"><span class="lineNumber">&nbsp;8369&nbsp;</span>		content.css({<a name="line_8369"></a></li>
<li id="line_8370" class="even"><span class="lineNumber">&nbsp;8370&nbsp;</span>			width:&nbsp;'100%',<a name="line_8370"></a></li>
<li id="line_8371" class="odd"><span class="lineNumber">&nbsp;8371&nbsp;</span>			height:&nbsp;content.height(),<a name="line_8371"></a></li>
<li id="line_8372" class="even"><span class="lineNumber">&nbsp;8372&nbsp;</span>			overflow:&nbsp;'hidden'<a name="line_8372"></a></li>
<li id="line_8373" class="odd"><span class="lineNumber">&nbsp;8373&nbsp;</span>		});<a name="line_8373"></a></li>
<li id="line_8374" class="even"><span class="lineNumber">&nbsp;8374&nbsp;</span>	}<a name="line_8374"></a></li>
<li id="line_8375" class="odd"><span class="lineNumber">&nbsp;8375&nbsp;</span><a name="line_8375"></a></li>
<li id="line_8376" class="even"><span class="lineNumber">&nbsp;8376&nbsp;</span><a name="line_8376"></a></li>
<li id="line_8377" class="odd"><span class="lineNumber">&nbsp;8377&nbsp;</span>	function&nbsp;unfreezeContentHeight()&nbsp;{<a name="line_8377"></a></li>
<li id="line_8378" class="even"><span class="lineNumber">&nbsp;8378&nbsp;</span>		content.css({<a name="line_8378"></a></li>
<li id="line_8379" class="odd"><span class="lineNumber">&nbsp;8379&nbsp;</span>			width:&nbsp;'',<a name="line_8379"></a></li>
<li id="line_8380" class="even"><span class="lineNumber">&nbsp;8380&nbsp;</span>			height:&nbsp;'',<a name="line_8380"></a></li>
<li id="line_8381" class="odd"><span class="lineNumber">&nbsp;8381&nbsp;</span>			overflow:&nbsp;''<a name="line_8381"></a></li>
<li id="line_8382" class="even"><span class="lineNumber">&nbsp;8382&nbsp;</span>		});<a name="line_8382"></a></li>
<li id="line_8383" class="odd"><span class="lineNumber">&nbsp;8383&nbsp;</span>	}<a name="line_8383"></a></li>
<li id="line_8384" class="even"><span class="lineNumber">&nbsp;8384&nbsp;</span>	<a name="line_8384"></a></li>
<li id="line_8385" class="odd"><span class="lineNumber">&nbsp;8385&nbsp;</span>	<a name="line_8385"></a></li>
<li id="line_8386" class="even"><span class="lineNumber">&nbsp;8386&nbsp;</span>	<a name="line_8386"></a></li>
<li id="line_8387" class="odd"><span class="lineNumber">&nbsp;8387&nbsp;</span>	/*&nbsp;Misc<a name="line_8387"></a></li>
<li id="line_8388" class="even"><span class="lineNumber">&nbsp;8388&nbsp;</span>	-----------------------------------------------------------------------------*/<a name="line_8388"></a></li>
<li id="line_8389" class="odd"><span class="lineNumber">&nbsp;8389&nbsp;</span>	<a name="line_8389"></a></li>
<li id="line_8390" class="even"><span class="lineNumber">&nbsp;8390&nbsp;</span><a name="line_8390"></a></li>
<li id="line_8391" class="odd"><span class="lineNumber">&nbsp;8391&nbsp;</span>	function&nbsp;getCalendar()&nbsp;{<a name="line_8391"></a></li>
<li id="line_8392" class="even"><span class="lineNumber">&nbsp;8392&nbsp;</span>		return&nbsp;t;<a name="line_8392"></a></li>
<li id="line_8393" class="odd"><span class="lineNumber">&nbsp;8393&nbsp;</span>	}<a name="line_8393"></a></li>
<li id="line_8394" class="even"><span class="lineNumber">&nbsp;8394&nbsp;</span><a name="line_8394"></a></li>
<li id="line_8395" class="odd"><span class="lineNumber">&nbsp;8395&nbsp;</span>	<a name="line_8395"></a></li>
<li id="line_8396" class="even"><span class="lineNumber">&nbsp;8396&nbsp;</span>	function&nbsp;getView()&nbsp;{<a name="line_8396"></a></li>
<li id="line_8397" class="odd"><span class="lineNumber">&nbsp;8397&nbsp;</span>		return&nbsp;currentView;<a name="line_8397"></a></li>
<li id="line_8398" class="even"><span class="lineNumber">&nbsp;8398&nbsp;</span>	}<a name="line_8398"></a></li>
<li id="line_8399" class="odd"><span class="lineNumber">&nbsp;8399&nbsp;</span>	<a name="line_8399"></a></li>
<li id="line_8400" class="even"><span class="lineNumber">&nbsp;8400&nbsp;</span>	<a name="line_8400"></a></li>
<li id="line_8401" class="odd"><span class="lineNumber">&nbsp;8401&nbsp;</span>	function&nbsp;option(name,&nbsp;value)&nbsp;{<a name="line_8401"></a></li>
<li id="line_8402" class="even"><span class="lineNumber">&nbsp;8402&nbsp;</span>		if&nbsp;(value&nbsp;===&nbsp;undefined)&nbsp;{<a name="line_8402"></a></li>
<li id="line_8403" class="odd"><span class="lineNumber">&nbsp;8403&nbsp;</span>			return&nbsp;options[name];<a name="line_8403"></a></li>
<li id="line_8404" class="even"><span class="lineNumber">&nbsp;8404&nbsp;</span>		}<a name="line_8404"></a></li>
<li id="line_8405" class="odd"><span class="lineNumber">&nbsp;8405&nbsp;</span>		if&nbsp;(name&nbsp;==&nbsp;'height'&nbsp;||&nbsp;name&nbsp;==&nbsp;'contentHeight'&nbsp;||&nbsp;name&nbsp;==&nbsp;'aspectRatio')&nbsp;{<a name="line_8405"></a></li>
<li id="line_8406" class="even"><span class="lineNumber">&nbsp;8406&nbsp;</span>			options[name]&nbsp;=&nbsp;value;<a name="line_8406"></a></li>
<li id="line_8407" class="odd"><span class="lineNumber">&nbsp;8407&nbsp;</span>			updateSize(true);&nbsp;//&nbsp;true&nbsp;=&nbsp;allow&nbsp;recalculation&nbsp;of&nbsp;height<a name="line_8407"></a></li>
<li id="line_8408" class="even"><span class="lineNumber">&nbsp;8408&nbsp;</span>		}<a name="line_8408"></a></li>
<li id="line_8409" class="odd"><span class="lineNumber">&nbsp;8409&nbsp;</span>	}<a name="line_8409"></a></li>
<li id="line_8410" class="even"><span class="lineNumber">&nbsp;8410&nbsp;</span>	<a name="line_8410"></a></li>
<li id="line_8411" class="odd"><span class="lineNumber">&nbsp;8411&nbsp;</span>	<a name="line_8411"></a></li>
<li id="line_8412" class="even"><span class="lineNumber">&nbsp;8412&nbsp;</span>	function&nbsp;trigger(name,&nbsp;thisObj)&nbsp;{<a name="line_8412"></a></li>
<li id="line_8413" class="odd"><span class="lineNumber">&nbsp;8413&nbsp;</span>		if&nbsp;(options[name])&nbsp;{<a name="line_8413"></a></li>
<li id="line_8414" class="even"><span class="lineNumber">&nbsp;8414&nbsp;</span>			return&nbsp;options[name].apply(<a name="line_8414"></a></li>
<li id="line_8415" class="odd"><span class="lineNumber">&nbsp;8415&nbsp;</span>				thisObj&nbsp;||&nbsp;_element,<a name="line_8415"></a></li>
<li id="line_8416" class="even"><span class="lineNumber">&nbsp;8416&nbsp;</span>				Array.prototype.slice.call(arguments,&nbsp;2)<a name="line_8416"></a></li>
<li id="line_8417" class="odd"><span class="lineNumber">&nbsp;8417&nbsp;</span>			);<a name="line_8417"></a></li>
<li id="line_8418" class="even"><span class="lineNumber">&nbsp;8418&nbsp;</span>		}<a name="line_8418"></a></li>
<li id="line_8419" class="odd"><span class="lineNumber">&nbsp;8419&nbsp;</span>	}<a name="line_8419"></a></li>
<li id="line_8420" class="even"><span class="lineNumber">&nbsp;8420&nbsp;</span><a name="line_8420"></a></li>
<li id="line_8421" class="odd"><span class="lineNumber">&nbsp;8421&nbsp;</span>	t.initialize();<a name="line_8421"></a></li>
<li id="line_8422" class="even"><span class="lineNumber">&nbsp;8422&nbsp;</span>}<a name="line_8422"></a></li>
<li id="line_8423" class="odd"><span class="lineNumber">&nbsp;8423&nbsp;</span><a name="line_8423"></a></li>
<li id="line_8424" class="even"><span class="lineNumber">&nbsp;8424&nbsp;</span>;;<a name="line_8424"></a></li>
<li id="line_8425" class="odd"><span class="lineNumber">&nbsp;8425&nbsp;</span><a name="line_8425"></a></li>
<li id="line_8426" class="even"><span class="lineNumber">&nbsp;8426&nbsp;</span>Calendar.defaults&nbsp;=&nbsp;{<a name="line_8426"></a></li>
<li id="line_8427" class="odd"><span class="lineNumber">&nbsp;8427&nbsp;</span><a name="line_8427"></a></li>
<li id="line_8428" class="even"><span class="lineNumber">&nbsp;8428&nbsp;</span>	titleRangeSeparator:&nbsp;'&nbsp;\u2014&nbsp;',&nbsp;//&nbsp;emphasized&nbsp;dash<a name="line_8428"></a></li>
<li id="line_8429" class="odd"><span class="lineNumber">&nbsp;8429&nbsp;</span>	monthYearFormat:&nbsp;'MMMM&nbsp;YYYY',&nbsp;//&nbsp;required&nbsp;for&nbsp;en.&nbsp;other&nbsp;languages&nbsp;rely&nbsp;on&nbsp;datepicker&nbsp;computable&nbsp;option<a name="line_8429"></a></li>
<li id="line_8430" class="even"><span class="lineNumber">&nbsp;8430&nbsp;</span><a name="line_8430"></a></li>
<li id="line_8431" class="odd"><span class="lineNumber">&nbsp;8431&nbsp;</span>	defaultTimedEventDuration:&nbsp;'02:00:00',<a name="line_8431"></a></li>
<li id="line_8432" class="even"><span class="lineNumber">&nbsp;8432&nbsp;</span>	defaultAllDayEventDuration:&nbsp;{&nbsp;days:&nbsp;1&nbsp;},<a name="line_8432"></a></li>
<li id="line_8433" class="odd"><span class="lineNumber">&nbsp;8433&nbsp;</span>	forceEventDuration:&nbsp;false,<a name="line_8433"></a></li>
<li id="line_8434" class="even"><span class="lineNumber">&nbsp;8434&nbsp;</span>	nextDayThreshold:&nbsp;'09:00:00',&nbsp;//&nbsp;9am<a name="line_8434"></a></li>
<li id="line_8435" class="odd"><span class="lineNumber">&nbsp;8435&nbsp;</span><a name="line_8435"></a></li>
<li id="line_8436" class="even"><span class="lineNumber">&nbsp;8436&nbsp;</span>	//&nbsp;display<a name="line_8436"></a></li>
<li id="line_8437" class="odd"><span class="lineNumber">&nbsp;8437&nbsp;</span>	defaultView:&nbsp;'month',<a name="line_8437"></a></li>
<li id="line_8438" class="even"><span class="lineNumber">&nbsp;8438&nbsp;</span>	aspectRatio:&nbsp;1.35,<a name="line_8438"></a></li>
<li id="line_8439" class="odd"><span class="lineNumber">&nbsp;8439&nbsp;</span>	header:&nbsp;{<a name="line_8439"></a></li>
<li id="line_8440" class="even"><span class="lineNumber">&nbsp;8440&nbsp;</span>		left:&nbsp;'title',<a name="line_8440"></a></li>
<li id="line_8441" class="odd"><span class="lineNumber">&nbsp;8441&nbsp;</span>		center:&nbsp;'',<a name="line_8441"></a></li>
<li id="line_8442" class="even"><span class="lineNumber">&nbsp;8442&nbsp;</span>		right:&nbsp;'today&nbsp;prev,next'<a name="line_8442"></a></li>
<li id="line_8443" class="odd"><span class="lineNumber">&nbsp;8443&nbsp;</span>	},<a name="line_8443"></a></li>
<li id="line_8444" class="even"><span class="lineNumber">&nbsp;8444&nbsp;</span>	weekends:&nbsp;true,<a name="line_8444"></a></li>
<li id="line_8445" class="odd"><span class="lineNumber">&nbsp;8445&nbsp;</span>	weekNumbers:&nbsp;false,<a name="line_8445"></a></li>
<li id="line_8446" class="even"><span class="lineNumber">&nbsp;8446&nbsp;</span><a name="line_8446"></a></li>
<li id="line_8447" class="odd"><span class="lineNumber">&nbsp;8447&nbsp;</span>	weekNumberTitle:&nbsp;'W',<a name="line_8447"></a></li>
<li id="line_8448" class="even"><span class="lineNumber">&nbsp;8448&nbsp;</span>	weekNumberCalculation:&nbsp;'local',<a name="line_8448"></a></li>
<li id="line_8449" class="odd"><span class="lineNumber">&nbsp;8449&nbsp;</span>	<a name="line_8449"></a></li>
<li id="line_8450" class="even"><span class="lineNumber">&nbsp;8450&nbsp;</span>	//editable:&nbsp;false,<a name="line_8450"></a></li>
<li id="line_8451" class="odd"><span class="lineNumber">&nbsp;8451&nbsp;</span><a name="line_8451"></a></li>
<li id="line_8452" class="even"><span class="lineNumber">&nbsp;8452&nbsp;</span>	scrollTime:&nbsp;'06:00:00',<a name="line_8452"></a></li>
<li id="line_8453" class="odd"><span class="lineNumber">&nbsp;8453&nbsp;</span>	<a name="line_8453"></a></li>
<li id="line_8454" class="even"><span class="lineNumber">&nbsp;8454&nbsp;</span>	//&nbsp;event&nbsp;ajax<a name="line_8454"></a></li>
<li id="line_8455" class="odd"><span class="lineNumber">&nbsp;8455&nbsp;</span>	lazyFetching:&nbsp;true,<a name="line_8455"></a></li>
<li id="line_8456" class="even"><span class="lineNumber">&nbsp;8456&nbsp;</span>	startParam:&nbsp;'start',<a name="line_8456"></a></li>
<li id="line_8457" class="odd"><span class="lineNumber">&nbsp;8457&nbsp;</span>	endParam:&nbsp;'end',<a name="line_8457"></a></li>
<li id="line_8458" class="even"><span class="lineNumber">&nbsp;8458&nbsp;</span>	timezoneParam:&nbsp;'timezone',<a name="line_8458"></a></li>
<li id="line_8459" class="odd"><span class="lineNumber">&nbsp;8459&nbsp;</span><a name="line_8459"></a></li>
<li id="line_8460" class="even"><span class="lineNumber">&nbsp;8460&nbsp;</span>	timezone:&nbsp;false,<a name="line_8460"></a></li>
<li id="line_8461" class="odd"><span class="lineNumber">&nbsp;8461&nbsp;</span><a name="line_8461"></a></li>
<li id="line_8462" class="even"><span class="lineNumber">&nbsp;8462&nbsp;</span>	//allDayDefault:&nbsp;undefined,<a name="line_8462"></a></li>
<li id="line_8463" class="odd"><span class="lineNumber">&nbsp;8463&nbsp;</span><a name="line_8463"></a></li>
<li id="line_8464" class="even"><span class="lineNumber">&nbsp;8464&nbsp;</span>	//&nbsp;locale<a name="line_8464"></a></li>
<li id="line_8465" class="odd"><span class="lineNumber">&nbsp;8465&nbsp;</span>	isRTL:&nbsp;false,<a name="line_8465"></a></li>
<li id="line_8466" class="even"><span class="lineNumber">&nbsp;8466&nbsp;</span>	buttonText:&nbsp;{<a name="line_8466"></a></li>
<li id="line_8467" class="odd"><span class="lineNumber">&nbsp;8467&nbsp;</span>		prev:&nbsp;"prev",<a name="line_8467"></a></li>
<li id="line_8468" class="even"><span class="lineNumber">&nbsp;8468&nbsp;</span>		next:&nbsp;"next",<a name="line_8468"></a></li>
<li id="line_8469" class="odd"><span class="lineNumber">&nbsp;8469&nbsp;</span>		prevYear:&nbsp;"prev&nbsp;year",<a name="line_8469"></a></li>
<li id="line_8470" class="even"><span class="lineNumber">&nbsp;8470&nbsp;</span>		nextYear:&nbsp;"next&nbsp;year",<a name="line_8470"></a></li>
<li id="line_8471" class="odd"><span class="lineNumber">&nbsp;8471&nbsp;</span>		year:&nbsp;'year',&nbsp;//&nbsp;TODO:&nbsp;locale&nbsp;files&nbsp;need&nbsp;to&nbsp;specify&nbsp;this<a name="line_8471"></a></li>
<li id="line_8472" class="even"><span class="lineNumber">&nbsp;8472&nbsp;</span>		today:&nbsp;'today',<a name="line_8472"></a></li>
<li id="line_8473" class="odd"><span class="lineNumber">&nbsp;8473&nbsp;</span>		month:&nbsp;'month',<a name="line_8473"></a></li>
<li id="line_8474" class="even"><span class="lineNumber">&nbsp;8474&nbsp;</span>		week:&nbsp;'week',<a name="line_8474"></a></li>
<li id="line_8475" class="odd"><span class="lineNumber">&nbsp;8475&nbsp;</span>		day:&nbsp;'day'<a name="line_8475"></a></li>
<li id="line_8476" class="even"><span class="lineNumber">&nbsp;8476&nbsp;</span>	},<a name="line_8476"></a></li>
<li id="line_8477" class="odd"><span class="lineNumber">&nbsp;8477&nbsp;</span><a name="line_8477"></a></li>
<li id="line_8478" class="even"><span class="lineNumber">&nbsp;8478&nbsp;</span>	buttonIcons:&nbsp;{<a name="line_8478"></a></li>
<li id="line_8479" class="odd"><span class="lineNumber">&nbsp;8479&nbsp;</span>		prev:&nbsp;'left-single-arrow',<a name="line_8479"></a></li>
<li id="line_8480" class="even"><span class="lineNumber">&nbsp;8480&nbsp;</span>		next:&nbsp;'right-single-arrow',<a name="line_8480"></a></li>
<li id="line_8481" class="odd"><span class="lineNumber">&nbsp;8481&nbsp;</span>		prevYear:&nbsp;'left-double-arrow',<a name="line_8481"></a></li>
<li id="line_8482" class="even"><span class="lineNumber">&nbsp;8482&nbsp;</span>		nextYear:&nbsp;'right-double-arrow'<a name="line_8482"></a></li>
<li id="line_8483" class="odd"><span class="lineNumber">&nbsp;8483&nbsp;</span>	},<a name="line_8483"></a></li>
<li id="line_8484" class="even"><span class="lineNumber">&nbsp;8484&nbsp;</span>	<a name="line_8484"></a></li>
<li id="line_8485" class="odd"><span class="lineNumber">&nbsp;8485&nbsp;</span>	//&nbsp;jquery-ui&nbsp;theming<a name="line_8485"></a></li>
<li id="line_8486" class="even"><span class="lineNumber">&nbsp;8486&nbsp;</span>	theme:&nbsp;false,<a name="line_8486"></a></li>
<li id="line_8487" class="odd"><span class="lineNumber">&nbsp;8487&nbsp;</span>	themeButtonIcons:&nbsp;{<a name="line_8487"></a></li>
<li id="line_8488" class="even"><span class="lineNumber">&nbsp;8488&nbsp;</span>		prev:&nbsp;'circle-triangle-w',<a name="line_8488"></a></li>
<li id="line_8489" class="odd"><span class="lineNumber">&nbsp;8489&nbsp;</span>		next:&nbsp;'circle-triangle-e',<a name="line_8489"></a></li>
<li id="line_8490" class="even"><span class="lineNumber">&nbsp;8490&nbsp;</span>		prevYear:&nbsp;'seek-prev',<a name="line_8490"></a></li>
<li id="line_8491" class="odd"><span class="lineNumber">&nbsp;8491&nbsp;</span>		nextYear:&nbsp;'seek-next'<a name="line_8491"></a></li>
<li id="line_8492" class="even"><span class="lineNumber">&nbsp;8492&nbsp;</span>	},<a name="line_8492"></a></li>
<li id="line_8493" class="odd"><span class="lineNumber">&nbsp;8493&nbsp;</span><a name="line_8493"></a></li>
<li id="line_8494" class="even"><span class="lineNumber">&nbsp;8494&nbsp;</span>	//eventResizableFromStart:&nbsp;false,<a name="line_8494"></a></li>
<li id="line_8495" class="odd"><span class="lineNumber">&nbsp;8495&nbsp;</span>	dragOpacity:&nbsp;.75,<a name="line_8495"></a></li>
<li id="line_8496" class="even"><span class="lineNumber">&nbsp;8496&nbsp;</span>	dragRevertDuration:&nbsp;500,<a name="line_8496"></a></li>
<li id="line_8497" class="odd"><span class="lineNumber">&nbsp;8497&nbsp;</span>	dragScroll:&nbsp;true,<a name="line_8497"></a></li>
<li id="line_8498" class="even"><span class="lineNumber">&nbsp;8498&nbsp;</span>	<a name="line_8498"></a></li>
<li id="line_8499" class="odd"><span class="lineNumber">&nbsp;8499&nbsp;</span>	//selectable:&nbsp;false,<a name="line_8499"></a></li>
<li id="line_8500" class="even"><span class="lineNumber">&nbsp;8500&nbsp;</span>	unselectAuto:&nbsp;true,<a name="line_8500"></a></li>
<li id="line_8501" class="odd"><span class="lineNumber">&nbsp;8501&nbsp;</span>	<a name="line_8501"></a></li>
<li id="line_8502" class="even"><span class="lineNumber">&nbsp;8502&nbsp;</span>	dropAccept:&nbsp;'*',<a name="line_8502"></a></li>
<li id="line_8503" class="odd"><span class="lineNumber">&nbsp;8503&nbsp;</span><a name="line_8503"></a></li>
<li id="line_8504" class="even"><span class="lineNumber">&nbsp;8504&nbsp;</span>	eventLimit:&nbsp;false,<a name="line_8504"></a></li>
<li id="line_8505" class="odd"><span class="lineNumber">&nbsp;8505&nbsp;</span>	eventLimitText:&nbsp;'more',<a name="line_8505"></a></li>
<li id="line_8506" class="even"><span class="lineNumber">&nbsp;8506&nbsp;</span>	eventLimitClick:&nbsp;'popover',<a name="line_8506"></a></li>
<li id="line_8507" class="odd"><span class="lineNumber">&nbsp;8507&nbsp;</span>	dayPopoverFormat:&nbsp;'LL',<a name="line_8507"></a></li>
<li id="line_8508" class="even"><span class="lineNumber">&nbsp;8508&nbsp;</span>	<a name="line_8508"></a></li>
<li id="line_8509" class="odd"><span class="lineNumber">&nbsp;8509&nbsp;</span>	handleWindowResize:&nbsp;true,<a name="line_8509"></a></li>
<li id="line_8510" class="even"><span class="lineNumber">&nbsp;8510&nbsp;</span>	windowResizeDelay:&nbsp;200&nbsp;//&nbsp;milliseconds&nbsp;before&nbsp;an&nbsp;updateSize&nbsp;happens<a name="line_8510"></a></li>
<li id="line_8511" class="odd"><span class="lineNumber">&nbsp;8511&nbsp;</span>	<a name="line_8511"></a></li>
<li id="line_8512" class="even"><span class="lineNumber">&nbsp;8512&nbsp;</span>};<a name="line_8512"></a></li>
<li id="line_8513" class="odd"><span class="lineNumber">&nbsp;8513&nbsp;</span><a name="line_8513"></a></li>
<li id="line_8514" class="even"><span class="lineNumber">&nbsp;8514&nbsp;</span><a name="line_8514"></a></li>
<li id="line_8515" class="odd"><span class="lineNumber">&nbsp;8515&nbsp;</span>Calendar.englishDefaults&nbsp;=&nbsp;{&nbsp;//&nbsp;used&nbsp;by&nbsp;lang.js<a name="line_8515"></a></li>
<li id="line_8516" class="even"><span class="lineNumber">&nbsp;8516&nbsp;</span>	dayPopoverFormat:&nbsp;'dddd,&nbsp;MMMM&nbsp;D'<a name="line_8516"></a></li>
<li id="line_8517" class="odd"><span class="lineNumber">&nbsp;8517&nbsp;</span>};<a name="line_8517"></a></li>
<li id="line_8518" class="even"><span class="lineNumber">&nbsp;8518&nbsp;</span><a name="line_8518"></a></li>
<li id="line_8519" class="odd"><span class="lineNumber">&nbsp;8519&nbsp;</span><a name="line_8519"></a></li>
<li id="line_8520" class="even"><span class="lineNumber">&nbsp;8520&nbsp;</span>Calendar.rtlDefaults&nbsp;=&nbsp;{&nbsp;//&nbsp;right-to-left&nbsp;defaults<a name="line_8520"></a></li>
<li id="line_8521" class="odd"><span class="lineNumber">&nbsp;8521&nbsp;</span>	header:&nbsp;{&nbsp;//&nbsp;TODO:&nbsp;smarter&nbsp;solution&nbsp;(first/center/last&nbsp;?)<a name="line_8521"></a></li>
<li id="line_8522" class="even"><span class="lineNumber">&nbsp;8522&nbsp;</span>		left:&nbsp;'next,prev&nbsp;today',<a name="line_8522"></a></li>
<li id="line_8523" class="odd"><span class="lineNumber">&nbsp;8523&nbsp;</span>		center:&nbsp;'',<a name="line_8523"></a></li>
<li id="line_8524" class="even"><span class="lineNumber">&nbsp;8524&nbsp;</span>		right:&nbsp;'title'<a name="line_8524"></a></li>
<li id="line_8525" class="odd"><span class="lineNumber">&nbsp;8525&nbsp;</span>	},<a name="line_8525"></a></li>
<li id="line_8526" class="even"><span class="lineNumber">&nbsp;8526&nbsp;</span>	buttonIcons:&nbsp;{<a name="line_8526"></a></li>
<li id="line_8527" class="odd"><span class="lineNumber">&nbsp;8527&nbsp;</span>		prev:&nbsp;'right-single-arrow',<a name="line_8527"></a></li>
<li id="line_8528" class="even"><span class="lineNumber">&nbsp;8528&nbsp;</span>		next:&nbsp;'left-single-arrow',<a name="line_8528"></a></li>
<li id="line_8529" class="odd"><span class="lineNumber">&nbsp;8529&nbsp;</span>		prevYear:&nbsp;'right-double-arrow',<a name="line_8529"></a></li>
<li id="line_8530" class="even"><span class="lineNumber">&nbsp;8530&nbsp;</span>		nextYear:&nbsp;'left-double-arrow'<a name="line_8530"></a></li>
<li id="line_8531" class="odd"><span class="lineNumber">&nbsp;8531&nbsp;</span>	},<a name="line_8531"></a></li>
<li id="line_8532" class="even"><span class="lineNumber">&nbsp;8532&nbsp;</span>	themeButtonIcons:&nbsp;{<a name="line_8532"></a></li>
<li id="line_8533" class="odd"><span class="lineNumber">&nbsp;8533&nbsp;</span>		prev:&nbsp;'circle-triangle-e',<a name="line_8533"></a></li>
<li id="line_8534" class="even"><span class="lineNumber">&nbsp;8534&nbsp;</span>		next:&nbsp;'circle-triangle-w',<a name="line_8534"></a></li>
<li id="line_8535" class="odd"><span class="lineNumber">&nbsp;8535&nbsp;</span>		nextYear:&nbsp;'seek-prev',<a name="line_8535"></a></li>
<li id="line_8536" class="even"><span class="lineNumber">&nbsp;8536&nbsp;</span>		prevYear:&nbsp;'seek-next'<a name="line_8536"></a></li>
<li id="line_8537" class="odd"><span class="lineNumber">&nbsp;8537&nbsp;</span>	}<a name="line_8537"></a></li>
<li id="line_8538" class="even"><span class="lineNumber">&nbsp;8538&nbsp;</span>};<a name="line_8538"></a></li>
<li id="line_8539" class="odd"><span class="lineNumber">&nbsp;8539&nbsp;</span><a name="line_8539"></a></li>
<li id="line_8540" class="even"><span class="lineNumber">&nbsp;8540&nbsp;</span>;;<a name="line_8540"></a></li>
<li id="line_8541" class="odd"><span class="lineNumber">&nbsp;8541&nbsp;</span><a name="line_8541"></a></li>
<li id="line_8542" class="even"><span class="lineNumber">&nbsp;8542&nbsp;</span>var&nbsp;langOptionHash&nbsp;=&nbsp;fc.langs&nbsp;=&nbsp;{};&nbsp;//&nbsp;initialize&nbsp;and&nbsp;expose<a name="line_8542"></a></li>
<li id="line_8543" class="odd"><span class="lineNumber">&nbsp;8543&nbsp;</span><a name="line_8543"></a></li>
<li id="line_8544" class="even"><span class="lineNumber">&nbsp;8544&nbsp;</span><a name="line_8544"></a></li>
<li id="line_8545" class="odd"><span class="lineNumber">&nbsp;8545&nbsp;</span>//&nbsp;TODO:&nbsp;document&nbsp;the&nbsp;structure&nbsp;and&nbsp;ordering&nbsp;of&nbsp;a&nbsp;FullCalendar&nbsp;lang&nbsp;file<a name="line_8545"></a></li>
<li id="line_8546" class="even"><span class="lineNumber">&nbsp;8546&nbsp;</span>//&nbsp;TODO:&nbsp;rename&nbsp;everything&nbsp;"lang"&nbsp;to&nbsp;"locale",&nbsp;like&nbsp;what&nbsp;the&nbsp;moment&nbsp;project&nbsp;did<a name="line_8546"></a></li>
<li id="line_8547" class="odd"><span class="lineNumber">&nbsp;8547&nbsp;</span><a name="line_8547"></a></li>
<li id="line_8548" class="even"><span class="lineNumber">&nbsp;8548&nbsp;</span><a name="line_8548"></a></li>
<li id="line_8549" class="odd"><span class="lineNumber">&nbsp;8549&nbsp;</span>//&nbsp;Initialize&nbsp;jQuery&nbsp;UI&nbsp;datepicker&nbsp;translations&nbsp;while&nbsp;using&nbsp;some&nbsp;of&nbsp;the&nbsp;translations<a name="line_8549"></a></li>
<li id="line_8550" class="even"><span class="lineNumber">&nbsp;8550&nbsp;</span>//&nbsp;Will&nbsp;set&nbsp;this&nbsp;as&nbsp;the&nbsp;default&nbsp;language&nbsp;for&nbsp;datepicker.<a name="line_8550"></a></li>
<li id="line_8551" class="odd"><span class="lineNumber">&nbsp;8551&nbsp;</span>fc.datepickerLang&nbsp;=&nbsp;function(langCode,&nbsp;dpLangCode,&nbsp;dpOptions)&nbsp;{<a name="line_8551"></a></li>
<li id="line_8552" class="even"><span class="lineNumber">&nbsp;8552&nbsp;</span><a name="line_8552"></a></li>
<li id="line_8553" class="odd"><span class="lineNumber">&nbsp;8553&nbsp;</span>	//&nbsp;get&nbsp;the&nbsp;FullCalendar&nbsp;internal&nbsp;option&nbsp;hash&nbsp;for&nbsp;this&nbsp;language.&nbsp;create&nbsp;if&nbsp;necessary<a name="line_8553"></a></li>
<li id="line_8554" class="even"><span class="lineNumber">&nbsp;8554&nbsp;</span>	var&nbsp;fcOptions&nbsp;=&nbsp;langOptionHash[langCode]&nbsp;||&nbsp;(langOptionHash[langCode]&nbsp;=&nbsp;{});<a name="line_8554"></a></li>
<li id="line_8555" class="odd"><span class="lineNumber">&nbsp;8555&nbsp;</span><a name="line_8555"></a></li>
<li id="line_8556" class="even"><span class="lineNumber">&nbsp;8556&nbsp;</span>	//&nbsp;transfer&nbsp;some&nbsp;simple&nbsp;options&nbsp;from&nbsp;datepicker&nbsp;to&nbsp;fc<a name="line_8556"></a></li>
<li id="line_8557" class="odd"><span class="lineNumber">&nbsp;8557&nbsp;</span>	fcOptions.isRTL&nbsp;=&nbsp;dpOptions.isRTL;<a name="line_8557"></a></li>
<li id="line_8558" class="even"><span class="lineNumber">&nbsp;8558&nbsp;</span>	fcOptions.weekNumberTitle&nbsp;=&nbsp;dpOptions.weekHeader;<a name="line_8558"></a></li>
<li id="line_8559" class="odd"><span class="lineNumber">&nbsp;8559&nbsp;</span><a name="line_8559"></a></li>
<li id="line_8560" class="even"><span class="lineNumber">&nbsp;8560&nbsp;</span>	//&nbsp;compute&nbsp;some&nbsp;more&nbsp;complex&nbsp;options&nbsp;from&nbsp;datepicker<a name="line_8560"></a></li>
<li id="line_8561" class="odd"><span class="lineNumber">&nbsp;8561&nbsp;</span>	$.each(dpComputableOptions,&nbsp;function(name,&nbsp;func)&nbsp;{<a name="line_8561"></a></li>
<li id="line_8562" class="even"><span class="lineNumber">&nbsp;8562&nbsp;</span>		fcOptions[name]&nbsp;=&nbsp;func(dpOptions);<a name="line_8562"></a></li>
<li id="line_8563" class="odd"><span class="lineNumber">&nbsp;8563&nbsp;</span>	});<a name="line_8563"></a></li>
<li id="line_8564" class="even"><span class="lineNumber">&nbsp;8564&nbsp;</span><a name="line_8564"></a></li>
<li id="line_8565" class="odd"><span class="lineNumber">&nbsp;8565&nbsp;</span>	//&nbsp;is&nbsp;jQuery&nbsp;UI&nbsp;Datepicker&nbsp;is&nbsp;on&nbsp;the&nbsp;page?<a name="line_8565"></a></li>
<li id="line_8566" class="even"><span class="lineNumber">&nbsp;8566&nbsp;</span>	if&nbsp;($.datepicker)&nbsp;{<a name="line_8566"></a></li>
<li id="line_8567" class="odd"><span class="lineNumber">&nbsp;8567&nbsp;</span><a name="line_8567"></a></li>
<li id="line_8568" class="even"><span class="lineNumber">&nbsp;8568&nbsp;</span>		//&nbsp;Register&nbsp;the&nbsp;language&nbsp;data.<a name="line_8568"></a></li>
<li id="line_8569" class="odd"><span class="lineNumber">&nbsp;8569&nbsp;</span>		//&nbsp;FullCalendar&nbsp;and&nbsp;MomentJS&nbsp;use&nbsp;language&nbsp;codes&nbsp;like&nbsp;"pt-br"&nbsp;but&nbsp;Datepicker<a name="line_8569"></a></li>
<li id="line_8570" class="even"><span class="lineNumber">&nbsp;8570&nbsp;</span>		//&nbsp;does&nbsp;it&nbsp;like&nbsp;"pt-BR"&nbsp;or&nbsp;if&nbsp;it&nbsp;doesn't&nbsp;have&nbsp;the&nbsp;language,&nbsp;maybe&nbsp;just&nbsp;"pt".<a name="line_8570"></a></li>
<li id="line_8571" class="odd"><span class="lineNumber">&nbsp;8571&nbsp;</span>		//&nbsp;Make&nbsp;an&nbsp;alias&nbsp;so&nbsp;the&nbsp;language&nbsp;can&nbsp;be&nbsp;referenced&nbsp;either&nbsp;way.<a name="line_8571"></a></li>
<li id="line_8572" class="even"><span class="lineNumber">&nbsp;8572&nbsp;</span>		$.datepicker.regional[dpLangCode]&nbsp;=<a name="line_8572"></a></li>
<li id="line_8573" class="odd"><span class="lineNumber">&nbsp;8573&nbsp;</span>			$.datepicker.regional[langCode]&nbsp;=&nbsp;//&nbsp;alias<a name="line_8573"></a></li>
<li id="line_8574" class="even"><span class="lineNumber">&nbsp;8574&nbsp;</span>				dpOptions;<a name="line_8574"></a></li>
<li id="line_8575" class="odd"><span class="lineNumber">&nbsp;8575&nbsp;</span><a name="line_8575"></a></li>
<li id="line_8576" class="even"><span class="lineNumber">&nbsp;8576&nbsp;</span>		//&nbsp;Alias&nbsp;'en'&nbsp;to&nbsp;the&nbsp;default&nbsp;language&nbsp;data.&nbsp;Do&nbsp;this&nbsp;every&nbsp;time.<a name="line_8576"></a></li>
<li id="line_8577" class="odd"><span class="lineNumber">&nbsp;8577&nbsp;</span>		$.datepicker.regional.en&nbsp;=&nbsp;$.datepicker.regional[''];<a name="line_8577"></a></li>
<li id="line_8578" class="even"><span class="lineNumber">&nbsp;8578&nbsp;</span><a name="line_8578"></a></li>
<li id="line_8579" class="odd"><span class="lineNumber">&nbsp;8579&nbsp;</span>		//&nbsp;Set&nbsp;as&nbsp;Datepicker's&nbsp;global&nbsp;defaults.<a name="line_8579"></a></li>
<li id="line_8580" class="even"><span class="lineNumber">&nbsp;8580&nbsp;</span>		$.datepicker.setDefaults(dpOptions);<a name="line_8580"></a></li>
<li id="line_8581" class="odd"><span class="lineNumber">&nbsp;8581&nbsp;</span>	}<a name="line_8581"></a></li>
<li id="line_8582" class="even"><span class="lineNumber">&nbsp;8582&nbsp;</span>};<a name="line_8582"></a></li>
<li id="line_8583" class="odd"><span class="lineNumber">&nbsp;8583&nbsp;</span><a name="line_8583"></a></li>
<li id="line_8584" class="even"><span class="lineNumber">&nbsp;8584&nbsp;</span><a name="line_8584"></a></li>
<li id="line_8585" class="odd"><span class="lineNumber">&nbsp;8585&nbsp;</span>//&nbsp;Sets&nbsp;FullCalendar-specific&nbsp;translations.&nbsp;Will&nbsp;set&nbsp;the&nbsp;language&nbsp;as&nbsp;the&nbsp;global&nbsp;default.<a name="line_8585"></a></li>
<li id="line_8586" class="even"><span class="lineNumber">&nbsp;8586&nbsp;</span>fc.lang&nbsp;=&nbsp;function(langCode,&nbsp;newFcOptions)&nbsp;{<a name="line_8586"></a></li>
<li id="line_8587" class="odd"><span class="lineNumber">&nbsp;8587&nbsp;</span>	var&nbsp;fcOptions;<a name="line_8587"></a></li>
<li id="line_8588" class="even"><span class="lineNumber">&nbsp;8588&nbsp;</span>	var&nbsp;momOptions;<a name="line_8588"></a></li>
<li id="line_8589" class="odd"><span class="lineNumber">&nbsp;8589&nbsp;</span><a name="line_8589"></a></li>
<li id="line_8590" class="even"><span class="lineNumber">&nbsp;8590&nbsp;</span>	//&nbsp;get&nbsp;the&nbsp;FullCalendar&nbsp;internal&nbsp;option&nbsp;hash&nbsp;for&nbsp;this&nbsp;language.&nbsp;create&nbsp;if&nbsp;necessary<a name="line_8590"></a></li>
<li id="line_8591" class="odd"><span class="lineNumber">&nbsp;8591&nbsp;</span>	fcOptions&nbsp;=&nbsp;langOptionHash[langCode]&nbsp;||&nbsp;(langOptionHash[langCode]&nbsp;=&nbsp;{});<a name="line_8591"></a></li>
<li id="line_8592" class="even"><span class="lineNumber">&nbsp;8592&nbsp;</span><a name="line_8592"></a></li>
<li id="line_8593" class="odd"><span class="lineNumber">&nbsp;8593&nbsp;</span>	//&nbsp;provided&nbsp;new&nbsp;options&nbsp;for&nbsp;this&nbsp;language?&nbsp;merge&nbsp;them&nbsp;in<a name="line_8593"></a></li>
<li id="line_8594" class="even"><span class="lineNumber">&nbsp;8594&nbsp;</span>	if&nbsp;(newFcOptions)&nbsp;{<a name="line_8594"></a></li>
<li id="line_8595" class="odd"><span class="lineNumber">&nbsp;8595&nbsp;</span>		fcOptions&nbsp;=&nbsp;langOptionHash[langCode]&nbsp;=&nbsp;mergeOptions([&nbsp;fcOptions,&nbsp;newFcOptions&nbsp;]);<a name="line_8595"></a></li>
<li id="line_8596" class="even"><span class="lineNumber">&nbsp;8596&nbsp;</span>	}<a name="line_8596"></a></li>
<li id="line_8597" class="odd"><span class="lineNumber">&nbsp;8597&nbsp;</span><a name="line_8597"></a></li>
<li id="line_8598" class="even"><span class="lineNumber">&nbsp;8598&nbsp;</span>	//&nbsp;compute&nbsp;language&nbsp;options&nbsp;that&nbsp;weren't&nbsp;defined.<a name="line_8598"></a></li>
<li id="line_8599" class="odd"><span class="lineNumber">&nbsp;8599&nbsp;</span>	//&nbsp;always&nbsp;do&nbsp;this.&nbsp;newFcOptions&nbsp;can&nbsp;be&nbsp;undefined&nbsp;when&nbsp;initializing&nbsp;from&nbsp;i18n&nbsp;file,<a name="line_8599"></a></li>
<li id="line_8600" class="even"><span class="lineNumber">&nbsp;8600&nbsp;</span>	//&nbsp;so&nbsp;no&nbsp;way&nbsp;to&nbsp;tell&nbsp;if&nbsp;this&nbsp;is&nbsp;an&nbsp;initialization&nbsp;or&nbsp;a&nbsp;default-setting.<a name="line_8600"></a></li>
<li id="line_8601" class="odd"><span class="lineNumber">&nbsp;8601&nbsp;</span>	momOptions&nbsp;=&nbsp;getMomentLocaleData(langCode);&nbsp;//&nbsp;will&nbsp;fall&nbsp;back&nbsp;to&nbsp;en<a name="line_8601"></a></li>
<li id="line_8602" class="even"><span class="lineNumber">&nbsp;8602&nbsp;</span>	$.each(momComputableOptions,&nbsp;function(name,&nbsp;func)&nbsp;{<a name="line_8602"></a></li>
<li id="line_8603" class="odd"><span class="lineNumber">&nbsp;8603&nbsp;</span>		if&nbsp;(fcOptions[name]&nbsp;==&nbsp;null)&nbsp;{<a name="line_8603"></a></li>
<li id="line_8604" class="even"><span class="lineNumber">&nbsp;8604&nbsp;</span>			fcOptions[name]&nbsp;=&nbsp;func(momOptions,&nbsp;fcOptions);<a name="line_8604"></a></li>
<li id="line_8605" class="odd"><span class="lineNumber">&nbsp;8605&nbsp;</span>		}<a name="line_8605"></a></li>
<li id="line_8606" class="even"><span class="lineNumber">&nbsp;8606&nbsp;</span>	});<a name="line_8606"></a></li>
<li id="line_8607" class="odd"><span class="lineNumber">&nbsp;8607&nbsp;</span><a name="line_8607"></a></li>
<li id="line_8608" class="even"><span class="lineNumber">&nbsp;8608&nbsp;</span>	//&nbsp;set&nbsp;it&nbsp;as&nbsp;the&nbsp;default&nbsp;language&nbsp;for&nbsp;FullCalendar<a name="line_8608"></a></li>
<li id="line_8609" class="odd"><span class="lineNumber">&nbsp;8609&nbsp;</span>	Calendar.defaults.lang&nbsp;=&nbsp;langCode;<a name="line_8609"></a></li>
<li id="line_8610" class="even"><span class="lineNumber">&nbsp;8610&nbsp;</span>};<a name="line_8610"></a></li>
<li id="line_8611" class="odd"><span class="lineNumber">&nbsp;8611&nbsp;</span><a name="line_8611"></a></li>
<li id="line_8612" class="even"><span class="lineNumber">&nbsp;8612&nbsp;</span><a name="line_8612"></a></li>
<li id="line_8613" class="odd"><span class="lineNumber">&nbsp;8613&nbsp;</span>//&nbsp;NOTE:&nbsp;can't&nbsp;guarantee&nbsp;any&nbsp;of&nbsp;these&nbsp;computations&nbsp;will&nbsp;run&nbsp;because&nbsp;not&nbsp;every&nbsp;language&nbsp;has&nbsp;datepicker<a name="line_8613"></a></li>
<li id="line_8614" class="even"><span class="lineNumber">&nbsp;8614&nbsp;</span>//&nbsp;configs,&nbsp;so&nbsp;make&nbsp;sure&nbsp;there&nbsp;are&nbsp;English&nbsp;fallbacks&nbsp;for&nbsp;these&nbsp;in&nbsp;the&nbsp;defaults&nbsp;file.<a name="line_8614"></a></li>
<li id="line_8615" class="odd"><span class="lineNumber">&nbsp;8615&nbsp;</span>var&nbsp;dpComputableOptions&nbsp;=&nbsp;{<a name="line_8615"></a></li>
<li id="line_8616" class="even"><span class="lineNumber">&nbsp;8616&nbsp;</span><a name="line_8616"></a></li>
<li id="line_8617" class="odd"><span class="lineNumber">&nbsp;8617&nbsp;</span>	buttonText:&nbsp;function(dpOptions)&nbsp;{<a name="line_8617"></a></li>
<li id="line_8618" class="even"><span class="lineNumber">&nbsp;8618&nbsp;</span>		return&nbsp;{<a name="line_8618"></a></li>
<li id="line_8619" class="odd"><span class="lineNumber">&nbsp;8619&nbsp;</span>			//&nbsp;the&nbsp;translations&nbsp;sometimes&nbsp;wrongly&nbsp;contain&nbsp;HTML&nbsp;entities<a name="line_8619"></a></li>
<li id="line_8620" class="even"><span class="lineNumber">&nbsp;8620&nbsp;</span>			prev:&nbsp;stripHtmlEntities(dpOptions.prevText),<a name="line_8620"></a></li>
<li id="line_8621" class="odd"><span class="lineNumber">&nbsp;8621&nbsp;</span>			next:&nbsp;stripHtmlEntities(dpOptions.nextText),<a name="line_8621"></a></li>
<li id="line_8622" class="even"><span class="lineNumber">&nbsp;8622&nbsp;</span>			today:&nbsp;stripHtmlEntities(dpOptions.currentText)<a name="line_8622"></a></li>
<li id="line_8623" class="odd"><span class="lineNumber">&nbsp;8623&nbsp;</span>		};<a name="line_8623"></a></li>
<li id="line_8624" class="even"><span class="lineNumber">&nbsp;8624&nbsp;</span>	},<a name="line_8624"></a></li>
<li id="line_8625" class="odd"><span class="lineNumber">&nbsp;8625&nbsp;</span><a name="line_8625"></a></li>
<li id="line_8626" class="even"><span class="lineNumber">&nbsp;8626&nbsp;</span>	//&nbsp;Produces&nbsp;format&nbsp;strings&nbsp;like&nbsp;"MMMM&nbsp;YYYY"&nbsp;-&gt;&nbsp;"September&nbsp;2014"<a name="line_8626"></a></li>
<li id="line_8627" class="odd"><span class="lineNumber">&nbsp;8627&nbsp;</span>	monthYearFormat:&nbsp;function(dpOptions)&nbsp;{<a name="line_8627"></a></li>
<li id="line_8628" class="even"><span class="lineNumber">&nbsp;8628&nbsp;</span>		return&nbsp;dpOptions.showMonthAfterYear&nbsp;?<a name="line_8628"></a></li>
<li id="line_8629" class="odd"><span class="lineNumber">&nbsp;8629&nbsp;</span>			'YYYY['&nbsp;+&nbsp;dpOptions.yearSuffix&nbsp;+&nbsp;']&nbsp;MMMM'&nbsp;:<a name="line_8629"></a></li>
<li id="line_8630" class="even"><span class="lineNumber">&nbsp;8630&nbsp;</span>			'MMMM&nbsp;YYYY['&nbsp;+&nbsp;dpOptions.yearSuffix&nbsp;+&nbsp;']';<a name="line_8630"></a></li>
<li id="line_8631" class="odd"><span class="lineNumber">&nbsp;8631&nbsp;</span>	}<a name="line_8631"></a></li>
<li id="line_8632" class="even"><span class="lineNumber">&nbsp;8632&nbsp;</span><a name="line_8632"></a></li>
<li id="line_8633" class="odd"><span class="lineNumber">&nbsp;8633&nbsp;</span>};<a name="line_8633"></a></li>
<li id="line_8634" class="even"><span class="lineNumber">&nbsp;8634&nbsp;</span><a name="line_8634"></a></li>
<li id="line_8635" class="odd"><span class="lineNumber">&nbsp;8635&nbsp;</span>var&nbsp;momComputableOptions&nbsp;=&nbsp;{<a name="line_8635"></a></li>
<li id="line_8636" class="even"><span class="lineNumber">&nbsp;8636&nbsp;</span><a name="line_8636"></a></li>
<li id="line_8637" class="odd"><span class="lineNumber">&nbsp;8637&nbsp;</span>	//&nbsp;Produces&nbsp;format&nbsp;strings&nbsp;like&nbsp;"ddd&nbsp;M/D"&nbsp;-&gt;&nbsp;"Fri&nbsp;9/15"<a name="line_8637"></a></li>
<li id="line_8638" class="even"><span class="lineNumber">&nbsp;8638&nbsp;</span>	dayOfMonthFormat:&nbsp;function(momOptions,&nbsp;fcOptions)&nbsp;{<a name="line_8638"></a></li>
<li id="line_8639" class="odd"><span class="lineNumber">&nbsp;8639&nbsp;</span>		var&nbsp;format&nbsp;=&nbsp;momOptions.longDateFormat('l');&nbsp;//&nbsp;for&nbsp;the&nbsp;format&nbsp;like&nbsp;"M/D/YYYY"<a name="line_8639"></a></li>
<li id="line_8640" class="even"><span class="lineNumber">&nbsp;8640&nbsp;</span><a name="line_8640"></a></li>
<li id="line_8641" class="odd"><span class="lineNumber">&nbsp;8641&nbsp;</span>		//&nbsp;strip&nbsp;the&nbsp;year&nbsp;off&nbsp;the&nbsp;edge,&nbsp;as&nbsp;well&nbsp;as&nbsp;other&nbsp;misc&nbsp;non-whitespace&nbsp;chars<a name="line_8641"></a></li>
<li id="line_8642" class="even"><span class="lineNumber">&nbsp;8642&nbsp;</span>		format&nbsp;=&nbsp;format.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,&nbsp;'');<a name="line_8642"></a></li>
<li id="line_8643" class="odd"><span class="lineNumber">&nbsp;8643&nbsp;</span><a name="line_8643"></a></li>
<li id="line_8644" class="even"><span class="lineNumber">&nbsp;8644&nbsp;</span>		if&nbsp;(fcOptions.isRTL)&nbsp;{<a name="line_8644"></a></li>
<li id="line_8645" class="odd"><span class="lineNumber">&nbsp;8645&nbsp;</span>			format&nbsp;+=&nbsp;'&nbsp;ddd';&nbsp;//&nbsp;for&nbsp;RTL,&nbsp;add&nbsp;day-of-week&nbsp;to&nbsp;end<a name="line_8645"></a></li>
<li id="line_8646" class="even"><span class="lineNumber">&nbsp;8646&nbsp;</span>		}<a name="line_8646"></a></li>
<li id="line_8647" class="odd"><span class="lineNumber">&nbsp;8647&nbsp;</span>		else&nbsp;{<a name="line_8647"></a></li>
<li id="line_8648" class="even"><span class="lineNumber">&nbsp;8648&nbsp;</span>			format&nbsp;=&nbsp;'ddd&nbsp;'&nbsp;+&nbsp;format;&nbsp;//&nbsp;for&nbsp;LTR,&nbsp;add&nbsp;day-of-week&nbsp;to&nbsp;beginning<a name="line_8648"></a></li>
<li id="line_8649" class="odd"><span class="lineNumber">&nbsp;8649&nbsp;</span>		}<a name="line_8649"></a></li>
<li id="line_8650" class="even"><span class="lineNumber">&nbsp;8650&nbsp;</span>		return&nbsp;format;<a name="line_8650"></a></li>
<li id="line_8651" class="odd"><span class="lineNumber">&nbsp;8651&nbsp;</span>	},<a name="line_8651"></a></li>
<li id="line_8652" class="even"><span class="lineNumber">&nbsp;8652&nbsp;</span><a name="line_8652"></a></li>
<li id="line_8653" class="odd"><span class="lineNumber">&nbsp;8653&nbsp;</span>	//&nbsp;Produces&nbsp;format&nbsp;strings&nbsp;like&nbsp;"h:mma"&nbsp;-&gt;&nbsp;"6:00pm"<a name="line_8653"></a></li>
<li id="line_8654" class="even"><span class="lineNumber">&nbsp;8654&nbsp;</span>	mediumTimeFormat:&nbsp;function(momOptions)&nbsp;{&nbsp;//&nbsp;can't&nbsp;be&nbsp;called&nbsp;`timeFormat`&nbsp;because&nbsp;collides&nbsp;with&nbsp;option<a name="line_8654"></a></li>
<li id="line_8655" class="odd"><span class="lineNumber">&nbsp;8655&nbsp;</span>		return&nbsp;momOptions.longDateFormat('LT')<a name="line_8655"></a></li>
<li id="line_8656" class="even"><span class="lineNumber">&nbsp;8656&nbsp;</span>			.replace(/\s*a$/i,&nbsp;'a');&nbsp;//&nbsp;convert&nbsp;AM/PM/am/pm&nbsp;to&nbsp;lowercase.&nbsp;remove&nbsp;any&nbsp;spaces&nbsp;beforehand<a name="line_8656"></a></li>
<li id="line_8657" class="odd"><span class="lineNumber">&nbsp;8657&nbsp;</span>	},<a name="line_8657"></a></li>
<li id="line_8658" class="even"><span class="lineNumber">&nbsp;8658&nbsp;</span><a name="line_8658"></a></li>
<li id="line_8659" class="odd"><span class="lineNumber">&nbsp;8659&nbsp;</span>	//&nbsp;Produces&nbsp;format&nbsp;strings&nbsp;like&nbsp;"h(:mm)a"&nbsp;-&gt;&nbsp;"6pm"&nbsp;/&nbsp;"6:30pm"<a name="line_8659"></a></li>
<li id="line_8660" class="even"><span class="lineNumber">&nbsp;8660&nbsp;</span>	smallTimeFormat:&nbsp;function(momOptions)&nbsp;{<a name="line_8660"></a></li>
<li id="line_8661" class="odd"><span class="lineNumber">&nbsp;8661&nbsp;</span>		return&nbsp;momOptions.longDateFormat('LT')<a name="line_8661"></a></li>
<li id="line_8662" class="even"><span class="lineNumber">&nbsp;8662&nbsp;</span>			.replace(':mm',&nbsp;'(:mm)')<a name="line_8662"></a></li>
<li id="line_8663" class="odd"><span class="lineNumber">&nbsp;8663&nbsp;</span>			.replace(/(\Wmm)$/,&nbsp;'($1)')&nbsp;//&nbsp;like&nbsp;above,&nbsp;but&nbsp;for&nbsp;foreign&nbsp;langs<a name="line_8663"></a></li>
<li id="line_8664" class="even"><span class="lineNumber">&nbsp;8664&nbsp;</span>			.replace(/\s*a$/i,&nbsp;'a');&nbsp;//&nbsp;convert&nbsp;AM/PM/am/pm&nbsp;to&nbsp;lowercase.&nbsp;remove&nbsp;any&nbsp;spaces&nbsp;beforehand<a name="line_8664"></a></li>
<li id="line_8665" class="odd"><span class="lineNumber">&nbsp;8665&nbsp;</span>	},<a name="line_8665"></a></li>
<li id="line_8666" class="even"><span class="lineNumber">&nbsp;8666&nbsp;</span><a name="line_8666"></a></li>
<li id="line_8667" class="odd"><span class="lineNumber">&nbsp;8667&nbsp;</span>	//&nbsp;Produces&nbsp;format&nbsp;strings&nbsp;like&nbsp;"h(:mm)t"&nbsp;-&gt;&nbsp;"6p"&nbsp;/&nbsp;"6:30p"<a name="line_8667"></a></li>
<li id="line_8668" class="even"><span class="lineNumber">&nbsp;8668&nbsp;</span>	extraSmallTimeFormat:&nbsp;function(momOptions)&nbsp;{<a name="line_8668"></a></li>
<li id="line_8669" class="odd"><span class="lineNumber">&nbsp;8669&nbsp;</span>		return&nbsp;momOptions.longDateFormat('LT')<a name="line_8669"></a></li>
<li id="line_8670" class="even"><span class="lineNumber">&nbsp;8670&nbsp;</span>			.replace(':mm',&nbsp;'(:mm)')<a name="line_8670"></a></li>
<li id="line_8671" class="odd"><span class="lineNumber">&nbsp;8671&nbsp;</span>			.replace(/(\Wmm)$/,&nbsp;'($1)')&nbsp;//&nbsp;like&nbsp;above,&nbsp;but&nbsp;for&nbsp;foreign&nbsp;langs<a name="line_8671"></a></li>
<li id="line_8672" class="even"><span class="lineNumber">&nbsp;8672&nbsp;</span>			.replace(/\s*a$/i,&nbsp;'t');&nbsp;//&nbsp;convert&nbsp;to&nbsp;AM/PM/am/pm&nbsp;to&nbsp;lowercase&nbsp;one-letter.&nbsp;remove&nbsp;any&nbsp;spaces&nbsp;beforehand<a name="line_8672"></a></li>
<li id="line_8673" class="odd"><span class="lineNumber">&nbsp;8673&nbsp;</span>	},<a name="line_8673"></a></li>
<li id="line_8674" class="even"><span class="lineNumber">&nbsp;8674&nbsp;</span><a name="line_8674"></a></li>
<li id="line_8675" class="odd"><span class="lineNumber">&nbsp;8675&nbsp;</span>	//&nbsp;Produces&nbsp;format&nbsp;strings&nbsp;like&nbsp;"ha"&nbsp;/&nbsp;"H"&nbsp;-&gt;&nbsp;"6pm"&nbsp;/&nbsp;"18"<a name="line_8675"></a></li>
<li id="line_8676" class="even"><span class="lineNumber">&nbsp;8676&nbsp;</span>	hourFormat:&nbsp;function(momOptions)&nbsp;{<a name="line_8676"></a></li>
<li id="line_8677" class="odd"><span class="lineNumber">&nbsp;8677&nbsp;</span>		return&nbsp;momOptions.longDateFormat('LT')<a name="line_8677"></a></li>
<li id="line_8678" class="even"><span class="lineNumber">&nbsp;8678&nbsp;</span>			.replace(':mm',&nbsp;'')<a name="line_8678"></a></li>
<li id="line_8679" class="odd"><span class="lineNumber">&nbsp;8679&nbsp;</span>			.replace(/(\Wmm)$/,&nbsp;'')&nbsp;//&nbsp;like&nbsp;above,&nbsp;but&nbsp;for&nbsp;foreign&nbsp;langs<a name="line_8679"></a></li>
<li id="line_8680" class="even"><span class="lineNumber">&nbsp;8680&nbsp;</span>			.replace(/\s*a$/i,&nbsp;'a');&nbsp;//&nbsp;convert&nbsp;AM/PM/am/pm&nbsp;to&nbsp;lowercase.&nbsp;remove&nbsp;any&nbsp;spaces&nbsp;beforehand<a name="line_8680"></a></li>
<li id="line_8681" class="odd"><span class="lineNumber">&nbsp;8681&nbsp;</span>	},<a name="line_8681"></a></li>
<li id="line_8682" class="even"><span class="lineNumber">&nbsp;8682&nbsp;</span><a name="line_8682"></a></li>
<li id="line_8683" class="odd"><span class="lineNumber">&nbsp;8683&nbsp;</span>	//&nbsp;Produces&nbsp;format&nbsp;strings&nbsp;like&nbsp;"h:mm"&nbsp;-&gt;&nbsp;"6:30"&nbsp;(with&nbsp;no&nbsp;AM/PM)<a name="line_8683"></a></li>
<li id="line_8684" class="even"><span class="lineNumber">&nbsp;8684&nbsp;</span>	noMeridiemTimeFormat:&nbsp;function(momOptions)&nbsp;{<a name="line_8684"></a></li>
<li id="line_8685" class="odd"><span class="lineNumber">&nbsp;8685&nbsp;</span>		return&nbsp;momOptions.longDateFormat('LT')<a name="line_8685"></a></li>
<li id="line_8686" class="even"><span class="lineNumber">&nbsp;8686&nbsp;</span>			.replace(/\s*a$/i,&nbsp;'');&nbsp;//&nbsp;remove&nbsp;trailing&nbsp;AM/PM<a name="line_8686"></a></li>
<li id="line_8687" class="odd"><span class="lineNumber">&nbsp;8687&nbsp;</span>	}<a name="line_8687"></a></li>
<li id="line_8688" class="even"><span class="lineNumber">&nbsp;8688&nbsp;</span><a name="line_8688"></a></li>
<li id="line_8689" class="odd"><span class="lineNumber">&nbsp;8689&nbsp;</span>};<a name="line_8689"></a></li>
<li id="line_8690" class="even"><span class="lineNumber">&nbsp;8690&nbsp;</span><a name="line_8690"></a></li>
<li id="line_8691" class="odd"><span class="lineNumber">&nbsp;8691&nbsp;</span><a name="line_8691"></a></li>
<li id="line_8692" class="even"><span class="lineNumber">&nbsp;8692&nbsp;</span>//&nbsp;options&nbsp;that&nbsp;should&nbsp;be&nbsp;computed&nbsp;off&nbsp;live&nbsp;calendar&nbsp;options&nbsp;(considers&nbsp;override&nbsp;options)<a name="line_8692"></a></li>
<li id="line_8693" class="odd"><span class="lineNumber">&nbsp;8693&nbsp;</span>var&nbsp;instanceComputableOptions&nbsp;=&nbsp;{&nbsp;//&nbsp;TODO:&nbsp;best&nbsp;place&nbsp;for&nbsp;this?&nbsp;related&nbsp;to&nbsp;lang?<a name="line_8693"></a></li>
<li id="line_8694" class="even"><span class="lineNumber">&nbsp;8694&nbsp;</span><a name="line_8694"></a></li>
<li id="line_8695" class="odd"><span class="lineNumber">&nbsp;8695&nbsp;</span>	//&nbsp;Produces&nbsp;format&nbsp;strings&nbsp;for&nbsp;results&nbsp;like&nbsp;"Mo&nbsp;16"<a name="line_8695"></a></li>
<li id="line_8696" class="even"><span class="lineNumber">&nbsp;8696&nbsp;</span>	smallDayDateFormat:&nbsp;function(options)&nbsp;{<a name="line_8696"></a></li>
<li id="line_8697" class="odd"><span class="lineNumber">&nbsp;8697&nbsp;</span>		return&nbsp;options.isRTL&nbsp;?<a name="line_8697"></a></li>
<li id="line_8698" class="even"><span class="lineNumber">&nbsp;8698&nbsp;</span>			'D&nbsp;dd'&nbsp;:<a name="line_8698"></a></li>
<li id="line_8699" class="odd"><span class="lineNumber">&nbsp;8699&nbsp;</span>			'dd&nbsp;D';<a name="line_8699"></a></li>
<li id="line_8700" class="even"><span class="lineNumber">&nbsp;8700&nbsp;</span>	},<a name="line_8700"></a></li>
<li id="line_8701" class="odd"><span class="lineNumber">&nbsp;8701&nbsp;</span><a name="line_8701"></a></li>
<li id="line_8702" class="even"><span class="lineNumber">&nbsp;8702&nbsp;</span>	//&nbsp;Produces&nbsp;format&nbsp;strings&nbsp;for&nbsp;results&nbsp;like&nbsp;"Wk&nbsp;5"<a name="line_8702"></a></li>
<li id="line_8703" class="odd"><span class="lineNumber">&nbsp;8703&nbsp;</span>	weekFormat:&nbsp;function(options)&nbsp;{<a name="line_8703"></a></li>
<li id="line_8704" class="even"><span class="lineNumber">&nbsp;8704&nbsp;</span>		return&nbsp;options.isRTL&nbsp;?<a name="line_8704"></a></li>
<li id="line_8705" class="odd"><span class="lineNumber">&nbsp;8705&nbsp;</span>			'w[&nbsp;'&nbsp;+&nbsp;options.weekNumberTitle&nbsp;+&nbsp;']'&nbsp;:<a name="line_8705"></a></li>
<li id="line_8706" class="even"><span class="lineNumber">&nbsp;8706&nbsp;</span>			'['&nbsp;+&nbsp;options.weekNumberTitle&nbsp;+&nbsp;'&nbsp;]w';<a name="line_8706"></a></li>
<li id="line_8707" class="odd"><span class="lineNumber">&nbsp;8707&nbsp;</span>	},<a name="line_8707"></a></li>
<li id="line_8708" class="even"><span class="lineNumber">&nbsp;8708&nbsp;</span><a name="line_8708"></a></li>
<li id="line_8709" class="odd"><span class="lineNumber">&nbsp;8709&nbsp;</span>	//&nbsp;Produces&nbsp;format&nbsp;strings&nbsp;for&nbsp;results&nbsp;like&nbsp;"Wk5"<a name="line_8709"></a></li>
<li id="line_8710" class="even"><span class="lineNumber">&nbsp;8710&nbsp;</span>	smallWeekFormat:&nbsp;function(options)&nbsp;{<a name="line_8710"></a></li>
<li id="line_8711" class="odd"><span class="lineNumber">&nbsp;8711&nbsp;</span>		return&nbsp;options.isRTL&nbsp;?<a name="line_8711"></a></li>
<li id="line_8712" class="even"><span class="lineNumber">&nbsp;8712&nbsp;</span>			'w['&nbsp;+&nbsp;options.weekNumberTitle&nbsp;+&nbsp;']'&nbsp;:<a name="line_8712"></a></li>
<li id="line_8713" class="odd"><span class="lineNumber">&nbsp;8713&nbsp;</span>			'['&nbsp;+&nbsp;options.weekNumberTitle&nbsp;+&nbsp;']w';<a name="line_8713"></a></li>
<li id="line_8714" class="even"><span class="lineNumber">&nbsp;8714&nbsp;</span>	}<a name="line_8714"></a></li>
<li id="line_8715" class="odd"><span class="lineNumber">&nbsp;8715&nbsp;</span><a name="line_8715"></a></li>
<li id="line_8716" class="even"><span class="lineNumber">&nbsp;8716&nbsp;</span>};<a name="line_8716"></a></li>
<li id="line_8717" class="odd"><span class="lineNumber">&nbsp;8717&nbsp;</span><a name="line_8717"></a></li>
<li id="line_8718" class="even"><span class="lineNumber">&nbsp;8718&nbsp;</span>function&nbsp;populateInstanceComputableOptions(options)&nbsp;{<a name="line_8718"></a></li>
<li id="line_8719" class="odd"><span class="lineNumber">&nbsp;8719&nbsp;</span>	$.each(instanceComputableOptions,&nbsp;function(name,&nbsp;func)&nbsp;{<a name="line_8719"></a></li>
<li id="line_8720" class="even"><span class="lineNumber">&nbsp;8720&nbsp;</span>		if&nbsp;(options[name]&nbsp;==&nbsp;null)&nbsp;{<a name="line_8720"></a></li>
<li id="line_8721" class="odd"><span class="lineNumber">&nbsp;8721&nbsp;</span>			options[name]&nbsp;=&nbsp;func(options);<a name="line_8721"></a></li>
<li id="line_8722" class="even"><span class="lineNumber">&nbsp;8722&nbsp;</span>		}<a name="line_8722"></a></li>
<li id="line_8723" class="odd"><span class="lineNumber">&nbsp;8723&nbsp;</span>	});<a name="line_8723"></a></li>
<li id="line_8724" class="even"><span class="lineNumber">&nbsp;8724&nbsp;</span>}<a name="line_8724"></a></li>
<li id="line_8725" class="odd"><span class="lineNumber">&nbsp;8725&nbsp;</span><a name="line_8725"></a></li>
<li id="line_8726" class="even"><span class="lineNumber">&nbsp;8726&nbsp;</span><a name="line_8726"></a></li>
<li id="line_8727" class="odd"><span class="lineNumber">&nbsp;8727&nbsp;</span>//&nbsp;Returns&nbsp;moment's&nbsp;internal&nbsp;locale&nbsp;data.&nbsp;If&nbsp;doesn't&nbsp;exist,&nbsp;returns&nbsp;English.<a name="line_8727"></a></li>
<li id="line_8728" class="even"><span class="lineNumber">&nbsp;8728&nbsp;</span>//&nbsp;Works&nbsp;with&nbsp;moment-pre-2.8<a name="line_8728"></a></li>
<li id="line_8729" class="odd"><span class="lineNumber">&nbsp;8729&nbsp;</span>function&nbsp;getMomentLocaleData(langCode)&nbsp;{<a name="line_8729"></a></li>
<li id="line_8730" class="even"><span class="lineNumber">&nbsp;8730&nbsp;</span>	var&nbsp;func&nbsp;=&nbsp;moment.localeData&nbsp;||&nbsp;moment.langData;<a name="line_8730"></a></li>
<li id="line_8731" class="odd"><span class="lineNumber">&nbsp;8731&nbsp;</span>	return&nbsp;func.call(moment,&nbsp;langCode)&nbsp;||<a name="line_8731"></a></li>
<li id="line_8732" class="even"><span class="lineNumber">&nbsp;8732&nbsp;</span>		func.call(moment,&nbsp;'en');&nbsp;//&nbsp;the&nbsp;newer&nbsp;localData&nbsp;could&nbsp;return&nbsp;null,&nbsp;so&nbsp;fall&nbsp;back&nbsp;to&nbsp;en<a name="line_8732"></a></li>
<li id="line_8733" class="odd"><span class="lineNumber">&nbsp;8733&nbsp;</span>}<a name="line_8733"></a></li>
<li id="line_8734" class="even"><span class="lineNumber">&nbsp;8734&nbsp;</span><a name="line_8734"></a></li>
<li id="line_8735" class="odd"><span class="lineNumber">&nbsp;8735&nbsp;</span><a name="line_8735"></a></li>
<li id="line_8736" class="even"><span class="lineNumber">&nbsp;8736&nbsp;</span>//&nbsp;Initialize&nbsp;English&nbsp;by&nbsp;forcing&nbsp;computation&nbsp;of&nbsp;moment-derived&nbsp;options.<a name="line_8736"></a></li>
<li id="line_8737" class="odd"><span class="lineNumber">&nbsp;8737&nbsp;</span>//&nbsp;Also,&nbsp;sets&nbsp;it&nbsp;as&nbsp;the&nbsp;default.<a name="line_8737"></a></li>
<li id="line_8738" class="even"><span class="lineNumber">&nbsp;8738&nbsp;</span>fc.lang('en',&nbsp;Calendar.englishDefaults);<a name="line_8738"></a></li>
<li id="line_8739" class="odd"><span class="lineNumber">&nbsp;8739&nbsp;</span><a name="line_8739"></a></li>
<li id="line_8740" class="even"><span class="lineNumber">&nbsp;8740&nbsp;</span>;;<a name="line_8740"></a></li>
<li id="line_8741" class="odd"><span class="lineNumber">&nbsp;8741&nbsp;</span><a name="line_8741"></a></li>
<li id="line_8742" class="even"><span class="lineNumber">&nbsp;8742&nbsp;</span>/*&nbsp;Top&nbsp;toolbar&nbsp;area&nbsp;with&nbsp;buttons&nbsp;and&nbsp;title<a name="line_8742"></a></li>
<li id="line_8743" class="odd"><span class="lineNumber">&nbsp;8743&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_8743"></a></li>
<li id="line_8744" class="even"><span class="lineNumber">&nbsp;8744&nbsp;</span>//&nbsp;TODO:&nbsp;rename&nbsp;all&nbsp;header-related&nbsp;things&nbsp;to&nbsp;"toolbar"<a name="line_8744"></a></li>
<li id="line_8745" class="odd"><span class="lineNumber">&nbsp;8745&nbsp;</span><a name="line_8745"></a></li>
<li id="line_8746" class="even"><span class="lineNumber">&nbsp;8746&nbsp;</span>function&nbsp;Header(calendar,&nbsp;options)&nbsp;{<a name="line_8746"></a></li>
<li id="line_8747" class="odd"><span class="lineNumber">&nbsp;8747&nbsp;</span>	var&nbsp;t&nbsp;=&nbsp;this;<a name="line_8747"></a></li>
<li id="line_8748" class="even"><span class="lineNumber">&nbsp;8748&nbsp;</span>	<a name="line_8748"></a></li>
<li id="line_8749" class="odd"><span class="lineNumber">&nbsp;8749&nbsp;</span>	//&nbsp;exports<a name="line_8749"></a></li>
<li id="line_8750" class="even"><span class="lineNumber">&nbsp;8750&nbsp;</span>	t.render&nbsp;=&nbsp;render;<a name="line_8750"></a></li>
<li id="line_8751" class="odd"><span class="lineNumber">&nbsp;8751&nbsp;</span>	t.removeElement&nbsp;=&nbsp;removeElement;<a name="line_8751"></a></li>
<li id="line_8752" class="even"><span class="lineNumber">&nbsp;8752&nbsp;</span>	t.updateTitle&nbsp;=&nbsp;updateTitle;<a name="line_8752"></a></li>
<li id="line_8753" class="odd"><span class="lineNumber">&nbsp;8753&nbsp;</span>	t.activateButton&nbsp;=&nbsp;activateButton;<a name="line_8753"></a></li>
<li id="line_8754" class="even"><span class="lineNumber">&nbsp;8754&nbsp;</span>	t.deactivateButton&nbsp;=&nbsp;deactivateButton;<a name="line_8754"></a></li>
<li id="line_8755" class="odd"><span class="lineNumber">&nbsp;8755&nbsp;</span>	t.disableButton&nbsp;=&nbsp;disableButton;<a name="line_8755"></a></li>
<li id="line_8756" class="even"><span class="lineNumber">&nbsp;8756&nbsp;</span>	t.enableButton&nbsp;=&nbsp;enableButton;<a name="line_8756"></a></li>
<li id="line_8757" class="odd"><span class="lineNumber">&nbsp;8757&nbsp;</span>	t.getViewsWithButtons&nbsp;=&nbsp;getViewsWithButtons;<a name="line_8757"></a></li>
<li id="line_8758" class="even"><span class="lineNumber">&nbsp;8758&nbsp;</span>	<a name="line_8758"></a></li>
<li id="line_8759" class="odd"><span class="lineNumber">&nbsp;8759&nbsp;</span>	//&nbsp;locals<a name="line_8759"></a></li>
<li id="line_8760" class="even"><span class="lineNumber">&nbsp;8760&nbsp;</span>	var&nbsp;el&nbsp;=&nbsp;$();<a name="line_8760"></a></li>
<li id="line_8761" class="odd"><span class="lineNumber">&nbsp;8761&nbsp;</span>	var&nbsp;viewsWithButtons&nbsp;=&nbsp;[];<a name="line_8761"></a></li>
<li id="line_8762" class="even"><span class="lineNumber">&nbsp;8762&nbsp;</span>	var&nbsp;tm;<a name="line_8762"></a></li>
<li id="line_8763" class="odd"><span class="lineNumber">&nbsp;8763&nbsp;</span><a name="line_8763"></a></li>
<li id="line_8764" class="even"><span class="lineNumber">&nbsp;8764&nbsp;</span><a name="line_8764"></a></li>
<li id="line_8765" class="odd"><span class="lineNumber">&nbsp;8765&nbsp;</span>	function&nbsp;render()&nbsp;{<a name="line_8765"></a></li>
<li id="line_8766" class="even"><span class="lineNumber">&nbsp;8766&nbsp;</span>		var&nbsp;sections&nbsp;=&nbsp;options.header;<a name="line_8766"></a></li>
<li id="line_8767" class="odd"><span class="lineNumber">&nbsp;8767&nbsp;</span><a name="line_8767"></a></li>
<li id="line_8768" class="even"><span class="lineNumber">&nbsp;8768&nbsp;</span>		tm&nbsp;=&nbsp;options.theme&nbsp;?&nbsp;'ui'&nbsp;:&nbsp;'fc';<a name="line_8768"></a></li>
<li id="line_8769" class="odd"><span class="lineNumber">&nbsp;8769&nbsp;</span><a name="line_8769"></a></li>
<li id="line_8770" class="even"><span class="lineNumber">&nbsp;8770&nbsp;</span>		if&nbsp;(sections)&nbsp;{<a name="line_8770"></a></li>
<li id="line_8771" class="odd"><span class="lineNumber">&nbsp;8771&nbsp;</span>			el&nbsp;=&nbsp;$("&lt;div&nbsp;class='fc-toolbar'/&gt;")<a name="line_8771"></a></li>
<li id="line_8772" class="even"><span class="lineNumber">&nbsp;8772&nbsp;</span>				.append(renderSection('left'))<a name="line_8772"></a></li>
<li id="line_8773" class="odd"><span class="lineNumber">&nbsp;8773&nbsp;</span>				.append(renderSection('right'))<a name="line_8773"></a></li>
<li id="line_8774" class="even"><span class="lineNumber">&nbsp;8774&nbsp;</span>				.append(renderSection('center'))<a name="line_8774"></a></li>
<li id="line_8775" class="odd"><span class="lineNumber">&nbsp;8775&nbsp;</span>				.append('&lt;div&nbsp;class="fc-clear"/&gt;');<a name="line_8775"></a></li>
<li id="line_8776" class="even"><span class="lineNumber">&nbsp;8776&nbsp;</span><a name="line_8776"></a></li>
<li id="line_8777" class="odd"><span class="lineNumber">&nbsp;8777&nbsp;</span>			return&nbsp;el;<a name="line_8777"></a></li>
<li id="line_8778" class="even"><span class="lineNumber">&nbsp;8778&nbsp;</span>		}<a name="line_8778"></a></li>
<li id="line_8779" class="odd"><span class="lineNumber">&nbsp;8779&nbsp;</span>	}<a name="line_8779"></a></li>
<li id="line_8780" class="even"><span class="lineNumber">&nbsp;8780&nbsp;</span>	<a name="line_8780"></a></li>
<li id="line_8781" class="odd"><span class="lineNumber">&nbsp;8781&nbsp;</span>	<a name="line_8781"></a></li>
<li id="line_8782" class="even"><span class="lineNumber">&nbsp;8782&nbsp;</span>	function&nbsp;removeElement()&nbsp;{<a name="line_8782"></a></li>
<li id="line_8783" class="odd"><span class="lineNumber">&nbsp;8783&nbsp;</span>		el.remove();<a name="line_8783"></a></li>
<li id="line_8784" class="even"><span class="lineNumber">&nbsp;8784&nbsp;</span>		el&nbsp;=&nbsp;$();<a name="line_8784"></a></li>
<li id="line_8785" class="odd"><span class="lineNumber">&nbsp;8785&nbsp;</span>	}<a name="line_8785"></a></li>
<li id="line_8786" class="even"><span class="lineNumber">&nbsp;8786&nbsp;</span>	<a name="line_8786"></a></li>
<li id="line_8787" class="odd"><span class="lineNumber">&nbsp;8787&nbsp;</span>	<a name="line_8787"></a></li>
<li id="line_8788" class="even"><span class="lineNumber">&nbsp;8788&nbsp;</span>	function&nbsp;renderSection(position)&nbsp;{<a name="line_8788"></a></li>
<li id="line_8789" class="odd"><span class="lineNumber">&nbsp;8789&nbsp;</span>		var&nbsp;sectionEl&nbsp;=&nbsp;$('&lt;div&nbsp;class="fc-'&nbsp;+&nbsp;position&nbsp;+&nbsp;'"/&gt;');<a name="line_8789"></a></li>
<li id="line_8790" class="even"><span class="lineNumber">&nbsp;8790&nbsp;</span>		var&nbsp;buttonStr&nbsp;=&nbsp;options.header[position];<a name="line_8790"></a></li>
<li id="line_8791" class="odd"><span class="lineNumber">&nbsp;8791&nbsp;</span><a name="line_8791"></a></li>
<li id="line_8792" class="even"><span class="lineNumber">&nbsp;8792&nbsp;</span>		if&nbsp;(buttonStr)&nbsp;{<a name="line_8792"></a></li>
<li id="line_8793" class="odd"><span class="lineNumber">&nbsp;8793&nbsp;</span>			$.each(buttonStr.split('&nbsp;'),&nbsp;function(i)&nbsp;{<a name="line_8793"></a></li>
<li id="line_8794" class="even"><span class="lineNumber">&nbsp;8794&nbsp;</span>				var&nbsp;groupChildren&nbsp;=&nbsp;$();<a name="line_8794"></a></li>
<li id="line_8795" class="odd"><span class="lineNumber">&nbsp;8795&nbsp;</span>				var&nbsp;isOnlyButtons&nbsp;=&nbsp;true;<a name="line_8795"></a></li>
<li id="line_8796" class="even"><span class="lineNumber">&nbsp;8796&nbsp;</span>				var&nbsp;groupEl;<a name="line_8796"></a></li>
<li id="line_8797" class="odd"><span class="lineNumber">&nbsp;8797&nbsp;</span><a name="line_8797"></a></li>
<li id="line_8798" class="even"><span class="lineNumber">&nbsp;8798&nbsp;</span>				$.each(this.split(','),&nbsp;function(j,&nbsp;buttonName)&nbsp;{<a name="line_8798"></a></li>
<li id="line_8799" class="odd"><span class="lineNumber">&nbsp;8799&nbsp;</span>					var&nbsp;viewSpec;<a name="line_8799"></a></li>
<li id="line_8800" class="even"><span class="lineNumber">&nbsp;8800&nbsp;</span>					var&nbsp;buttonClick;<a name="line_8800"></a></li>
<li id="line_8801" class="odd"><span class="lineNumber">&nbsp;8801&nbsp;</span>					var&nbsp;overrideText;&nbsp;//&nbsp;text&nbsp;explicitly&nbsp;set&nbsp;by&nbsp;calendar's&nbsp;constructor&nbsp;options.&nbsp;overcomes&nbsp;icons<a name="line_8801"></a></li>
<li id="line_8802" class="even"><span class="lineNumber">&nbsp;8802&nbsp;</span>					var&nbsp;defaultText;<a name="line_8802"></a></li>
<li id="line_8803" class="odd"><span class="lineNumber">&nbsp;8803&nbsp;</span>					var&nbsp;themeIcon;<a name="line_8803"></a></li>
<li id="line_8804" class="even"><span class="lineNumber">&nbsp;8804&nbsp;</span>					var&nbsp;normalIcon;<a name="line_8804"></a></li>
<li id="line_8805" class="odd"><span class="lineNumber">&nbsp;8805&nbsp;</span>					var&nbsp;innerHtml;<a name="line_8805"></a></li>
<li id="line_8806" class="even"><span class="lineNumber">&nbsp;8806&nbsp;</span>					var&nbsp;classes;<a name="line_8806"></a></li>
<li id="line_8807" class="odd"><span class="lineNumber">&nbsp;8807&nbsp;</span>					var&nbsp;button;<a name="line_8807"></a></li>
<li id="line_8808" class="even"><span class="lineNumber">&nbsp;8808&nbsp;</span><a name="line_8808"></a></li>
<li id="line_8809" class="odd"><span class="lineNumber">&nbsp;8809&nbsp;</span>					if&nbsp;(buttonName&nbsp;==&nbsp;'title')&nbsp;{<a name="line_8809"></a></li>
<li id="line_8810" class="even"><span class="lineNumber">&nbsp;8810&nbsp;</span>						groupChildren&nbsp;=&nbsp;groupChildren.add($('&lt;h2&gt;&amp;nbsp;&lt;/h2&gt;'));&nbsp;//&nbsp;we&nbsp;always&nbsp;want&nbsp;it&nbsp;to&nbsp;take&nbsp;up&nbsp;height<a name="line_8810"></a></li>
<li id="line_8811" class="odd"><span class="lineNumber">&nbsp;8811&nbsp;</span>						isOnlyButtons&nbsp;=&nbsp;false;<a name="line_8811"></a></li>
<li id="line_8812" class="even"><span class="lineNumber">&nbsp;8812&nbsp;</span>					}<a name="line_8812"></a></li>
<li id="line_8813" class="odd"><span class="lineNumber">&nbsp;8813&nbsp;</span>					else&nbsp;{<a name="line_8813"></a></li>
<li id="line_8814" class="even"><span class="lineNumber">&nbsp;8814&nbsp;</span>						viewSpec&nbsp;=&nbsp;calendar.getViewSpec(buttonName);<a name="line_8814"></a></li>
<li id="line_8815" class="odd"><span class="lineNumber">&nbsp;8815&nbsp;</span><a name="line_8815"></a></li>
<li id="line_8816" class="even"><span class="lineNumber">&nbsp;8816&nbsp;</span>						if&nbsp;(viewSpec)&nbsp;{<a name="line_8816"></a></li>
<li id="line_8817" class="odd"><span class="lineNumber">&nbsp;8817&nbsp;</span>							buttonClick&nbsp;=&nbsp;function()&nbsp;{<a name="line_8817"></a></li>
<li id="line_8818" class="even"><span class="lineNumber">&nbsp;8818&nbsp;</span>								calendar.changeView(buttonName);<a name="line_8818"></a></li>
<li id="line_8819" class="odd"><span class="lineNumber">&nbsp;8819&nbsp;</span>							};<a name="line_8819"></a></li>
<li id="line_8820" class="even"><span class="lineNumber">&nbsp;8820&nbsp;</span>							viewsWithButtons.push(buttonName);<a name="line_8820"></a></li>
<li id="line_8821" class="odd"><span class="lineNumber">&nbsp;8821&nbsp;</span>							overrideText&nbsp;=&nbsp;viewSpec.buttonTextOverride;<a name="line_8821"></a></li>
<li id="line_8822" class="even"><span class="lineNumber">&nbsp;8822&nbsp;</span>							defaultText&nbsp;=&nbsp;viewSpec.buttonTextDefault;<a name="line_8822"></a></li>
<li id="line_8823" class="odd"><span class="lineNumber">&nbsp;8823&nbsp;</span>						}<a name="line_8823"></a></li>
<li id="line_8824" class="even"><span class="lineNumber">&nbsp;8824&nbsp;</span>						else&nbsp;if&nbsp;(calendar[buttonName])&nbsp;{&nbsp;//&nbsp;a&nbsp;calendar&nbsp;method<a name="line_8824"></a></li>
<li id="line_8825" class="odd"><span class="lineNumber">&nbsp;8825&nbsp;</span>							buttonClick&nbsp;=&nbsp;function()&nbsp;{<a name="line_8825"></a></li>
<li id="line_8826" class="even"><span class="lineNumber">&nbsp;8826&nbsp;</span>								calendar[buttonName]();<a name="line_8826"></a></li>
<li id="line_8827" class="odd"><span class="lineNumber">&nbsp;8827&nbsp;</span>							};<a name="line_8827"></a></li>
<li id="line_8828" class="even"><span class="lineNumber">&nbsp;8828&nbsp;</span>							overrideText&nbsp;=&nbsp;(calendar.overrides.buttonText&nbsp;||&nbsp;{})[buttonName];<a name="line_8828"></a></li>
<li id="line_8829" class="odd"><span class="lineNumber">&nbsp;8829&nbsp;</span>							defaultText&nbsp;=&nbsp;options.buttonText[buttonName];&nbsp;//&nbsp;everything&nbsp;else&nbsp;is&nbsp;considered&nbsp;default<a name="line_8829"></a></li>
<li id="line_8830" class="even"><span class="lineNumber">&nbsp;8830&nbsp;</span>						}<a name="line_8830"></a></li>
<li id="line_8831" class="odd"><span class="lineNumber">&nbsp;8831&nbsp;</span><a name="line_8831"></a></li>
<li id="line_8832" class="even"><span class="lineNumber">&nbsp;8832&nbsp;</span>						if&nbsp;(buttonClick)&nbsp;{<a name="line_8832"></a></li>
<li id="line_8833" class="odd"><span class="lineNumber">&nbsp;8833&nbsp;</span><a name="line_8833"></a></li>
<li id="line_8834" class="even"><span class="lineNumber">&nbsp;8834&nbsp;</span>							themeIcon&nbsp;=&nbsp;options.themeButtonIcons[buttonName];<a name="line_8834"></a></li>
<li id="line_8835" class="odd"><span class="lineNumber">&nbsp;8835&nbsp;</span>							normalIcon&nbsp;=&nbsp;options.buttonIcons[buttonName];<a name="line_8835"></a></li>
<li id="line_8836" class="even"><span class="lineNumber">&nbsp;8836&nbsp;</span><a name="line_8836"></a></li>
<li id="line_8837" class="odd"><span class="lineNumber">&nbsp;8837&nbsp;</span>							if&nbsp;(overrideText)&nbsp;{<a name="line_8837"></a></li>
<li id="line_8838" class="even"><span class="lineNumber">&nbsp;8838&nbsp;</span>								innerHtml&nbsp;=&nbsp;htmlEscape(overrideText);<a name="line_8838"></a></li>
<li id="line_8839" class="odd"><span class="lineNumber">&nbsp;8839&nbsp;</span>							}<a name="line_8839"></a></li>
<li id="line_8840" class="even"><span class="lineNumber">&nbsp;8840&nbsp;</span>							else&nbsp;if&nbsp;(themeIcon&nbsp;&amp;&amp;&nbsp;options.theme)&nbsp;{<a name="line_8840"></a></li>
<li id="line_8841" class="odd"><span class="lineNumber">&nbsp;8841&nbsp;</span>								innerHtml&nbsp;=&nbsp;"&lt;span&nbsp;class='ui-icon&nbsp;ui-icon-"&nbsp;+&nbsp;themeIcon&nbsp;+&nbsp;"'&gt;&lt;/span&gt;";<a name="line_8841"></a></li>
<li id="line_8842" class="even"><span class="lineNumber">&nbsp;8842&nbsp;</span>							}<a name="line_8842"></a></li>
<li id="line_8843" class="odd"><span class="lineNumber">&nbsp;8843&nbsp;</span>							else&nbsp;if&nbsp;(normalIcon&nbsp;&amp;&amp;&nbsp;!options.theme)&nbsp;{<a name="line_8843"></a></li>
<li id="line_8844" class="even"><span class="lineNumber">&nbsp;8844&nbsp;</span>								innerHtml&nbsp;=&nbsp;"&lt;span&nbsp;class='fc-icon&nbsp;fc-icon-"&nbsp;+&nbsp;normalIcon&nbsp;+&nbsp;"'&gt;&lt;/span&gt;";<a name="line_8844"></a></li>
<li id="line_8845" class="odd"><span class="lineNumber">&nbsp;8845&nbsp;</span>							}<a name="line_8845"></a></li>
<li id="line_8846" class="even"><span class="lineNumber">&nbsp;8846&nbsp;</span>							else&nbsp;{<a name="line_8846"></a></li>
<li id="line_8847" class="odd"><span class="lineNumber">&nbsp;8847&nbsp;</span>								innerHtml&nbsp;=&nbsp;htmlEscape(defaultText);<a name="line_8847"></a></li>
<li id="line_8848" class="even"><span class="lineNumber">&nbsp;8848&nbsp;</span>							}<a name="line_8848"></a></li>
<li id="line_8849" class="odd"><span class="lineNumber">&nbsp;8849&nbsp;</span><a name="line_8849"></a></li>
<li id="line_8850" class="even"><span class="lineNumber">&nbsp;8850&nbsp;</span>							classes&nbsp;=&nbsp;[<a name="line_8850"></a></li>
<li id="line_8851" class="odd"><span class="lineNumber">&nbsp;8851&nbsp;</span>								'fc-'&nbsp;+&nbsp;buttonName&nbsp;+&nbsp;'-button',<a name="line_8851"></a></li>
<li id="line_8852" class="even"><span class="lineNumber">&nbsp;8852&nbsp;</span>								tm&nbsp;+&nbsp;'-button',<a name="line_8852"></a></li>
<li id="line_8853" class="odd"><span class="lineNumber">&nbsp;8853&nbsp;</span>								tm&nbsp;+&nbsp;'-state-default'<a name="line_8853"></a></li>
<li id="line_8854" class="even"><span class="lineNumber">&nbsp;8854&nbsp;</span>							];<a name="line_8854"></a></li>
<li id="line_8855" class="odd"><span class="lineNumber">&nbsp;8855&nbsp;</span><a name="line_8855"></a></li>
<li id="line_8856" class="even"><span class="lineNumber">&nbsp;8856&nbsp;</span>							button&nbsp;=&nbsp;$(&nbsp;//&nbsp;type="button"&nbsp;so&nbsp;that&nbsp;it&nbsp;doesn't&nbsp;submit&nbsp;a&nbsp;form<a name="line_8856"></a></li>
<li id="line_8857" class="odd"><span class="lineNumber">&nbsp;8857&nbsp;</span>								'&lt;button&nbsp;type="button"&nbsp;class="'&nbsp;+&nbsp;classes.join('&nbsp;')&nbsp;+&nbsp;'"&gt;'&nbsp;+<a name="line_8857"></a></li>
<li id="line_8858" class="even"><span class="lineNumber">&nbsp;8858&nbsp;</span>									innerHtml&nbsp;+<a name="line_8858"></a></li>
<li id="line_8859" class="odd"><span class="lineNumber">&nbsp;8859&nbsp;</span>								'&lt;/button&gt;'<a name="line_8859"></a></li>
<li id="line_8860" class="even"><span class="lineNumber">&nbsp;8860&nbsp;</span>								)<a name="line_8860"></a></li>
<li id="line_8861" class="odd"><span class="lineNumber">&nbsp;8861&nbsp;</span>								.click(function()&nbsp;{<a name="line_8861"></a></li>
<li id="line_8862" class="even"><span class="lineNumber">&nbsp;8862&nbsp;</span>									//&nbsp;don't&nbsp;process&nbsp;clicks&nbsp;for&nbsp;disabled&nbsp;buttons<a name="line_8862"></a></li>
<li id="line_8863" class="odd"><span class="lineNumber">&nbsp;8863&nbsp;</span>									if&nbsp;(!button.hasClass(tm&nbsp;+&nbsp;'-state-disabled'))&nbsp;{<a name="line_8863"></a></li>
<li id="line_8864" class="even"><span class="lineNumber">&nbsp;8864&nbsp;</span><a name="line_8864"></a></li>
<li id="line_8865" class="odd"><span class="lineNumber">&nbsp;8865&nbsp;</span>										buttonClick();<a name="line_8865"></a></li>
<li id="line_8866" class="even"><span class="lineNumber">&nbsp;8866&nbsp;</span><a name="line_8866"></a></li>
<li id="line_8867" class="odd"><span class="lineNumber">&nbsp;8867&nbsp;</span>										//&nbsp;after&nbsp;the&nbsp;click&nbsp;action,&nbsp;if&nbsp;the&nbsp;button&nbsp;becomes&nbsp;the&nbsp;"active"&nbsp;tab,&nbsp;or&nbsp;disabled,<a name="line_8867"></a></li>
<li id="line_8868" class="even"><span class="lineNumber">&nbsp;8868&nbsp;</span>										//&nbsp;it&nbsp;should&nbsp;never&nbsp;have&nbsp;a&nbsp;hover&nbsp;class,&nbsp;so&nbsp;remove&nbsp;it&nbsp;now.<a name="line_8868"></a></li>
<li id="line_8869" class="odd"><span class="lineNumber">&nbsp;8869&nbsp;</span>										if&nbsp;(<a name="line_8869"></a></li>
<li id="line_8870" class="even"><span class="lineNumber">&nbsp;8870&nbsp;</span>											button.hasClass(tm&nbsp;+&nbsp;'-state-active')&nbsp;||<a name="line_8870"></a></li>
<li id="line_8871" class="odd"><span class="lineNumber">&nbsp;8871&nbsp;</span>											button.hasClass(tm&nbsp;+&nbsp;'-state-disabled')<a name="line_8871"></a></li>
<li id="line_8872" class="even"><span class="lineNumber">&nbsp;8872&nbsp;</span>										)&nbsp;{<a name="line_8872"></a></li>
<li id="line_8873" class="odd"><span class="lineNumber">&nbsp;8873&nbsp;</span>											button.removeClass(tm&nbsp;+&nbsp;'-state-hover');<a name="line_8873"></a></li>
<li id="line_8874" class="even"><span class="lineNumber">&nbsp;8874&nbsp;</span>										}<a name="line_8874"></a></li>
<li id="line_8875" class="odd"><span class="lineNumber">&nbsp;8875&nbsp;</span>									}<a name="line_8875"></a></li>
<li id="line_8876" class="even"><span class="lineNumber">&nbsp;8876&nbsp;</span>								})<a name="line_8876"></a></li>
<li id="line_8877" class="odd"><span class="lineNumber">&nbsp;8877&nbsp;</span>								.mousedown(function()&nbsp;{<a name="line_8877"></a></li>
<li id="line_8878" class="even"><span class="lineNumber">&nbsp;8878&nbsp;</span>									//&nbsp;the&nbsp;*down*&nbsp;effect&nbsp;(mouse&nbsp;pressed&nbsp;in).<a name="line_8878"></a></li>
<li id="line_8879" class="odd"><span class="lineNumber">&nbsp;8879&nbsp;</span>									//&nbsp;only&nbsp;on&nbsp;buttons&nbsp;that&nbsp;are&nbsp;not&nbsp;the&nbsp;"active"&nbsp;tab,&nbsp;or&nbsp;disabled<a name="line_8879"></a></li>
<li id="line_8880" class="even"><span class="lineNumber">&nbsp;8880&nbsp;</span>									button<a name="line_8880"></a></li>
<li id="line_8881" class="odd"><span class="lineNumber">&nbsp;8881&nbsp;</span>										.not('.'&nbsp;+&nbsp;tm&nbsp;+&nbsp;'-state-active')<a name="line_8881"></a></li>
<li id="line_8882" class="even"><span class="lineNumber">&nbsp;8882&nbsp;</span>										.not('.'&nbsp;+&nbsp;tm&nbsp;+&nbsp;'-state-disabled')<a name="line_8882"></a></li>
<li id="line_8883" class="odd"><span class="lineNumber">&nbsp;8883&nbsp;</span>										.addClass(tm&nbsp;+&nbsp;'-state-down');<a name="line_8883"></a></li>
<li id="line_8884" class="even"><span class="lineNumber">&nbsp;8884&nbsp;</span>								})<a name="line_8884"></a></li>
<li id="line_8885" class="odd"><span class="lineNumber">&nbsp;8885&nbsp;</span>								.mouseup(function()&nbsp;{<a name="line_8885"></a></li>
<li id="line_8886" class="even"><span class="lineNumber">&nbsp;8886&nbsp;</span>									//&nbsp;undo&nbsp;the&nbsp;*down*&nbsp;effect<a name="line_8886"></a></li>
<li id="line_8887" class="odd"><span class="lineNumber">&nbsp;8887&nbsp;</span>									button.removeClass(tm&nbsp;+&nbsp;'-state-down');<a name="line_8887"></a></li>
<li id="line_8888" class="even"><span class="lineNumber">&nbsp;8888&nbsp;</span>								})<a name="line_8888"></a></li>
<li id="line_8889" class="odd"><span class="lineNumber">&nbsp;8889&nbsp;</span>								.hover(<a name="line_8889"></a></li>
<li id="line_8890" class="even"><span class="lineNumber">&nbsp;8890&nbsp;</span>									function()&nbsp;{<a name="line_8890"></a></li>
<li id="line_8891" class="odd"><span class="lineNumber">&nbsp;8891&nbsp;</span>										//&nbsp;the&nbsp;*hover*&nbsp;effect.<a name="line_8891"></a></li>
<li id="line_8892" class="even"><span class="lineNumber">&nbsp;8892&nbsp;</span>										//&nbsp;only&nbsp;on&nbsp;buttons&nbsp;that&nbsp;are&nbsp;not&nbsp;the&nbsp;"active"&nbsp;tab,&nbsp;or&nbsp;disabled<a name="line_8892"></a></li>
<li id="line_8893" class="odd"><span class="lineNumber">&nbsp;8893&nbsp;</span>										button<a name="line_8893"></a></li>
<li id="line_8894" class="even"><span class="lineNumber">&nbsp;8894&nbsp;</span>											.not('.'&nbsp;+&nbsp;tm&nbsp;+&nbsp;'-state-active')<a name="line_8894"></a></li>
<li id="line_8895" class="odd"><span class="lineNumber">&nbsp;8895&nbsp;</span>											.not('.'&nbsp;+&nbsp;tm&nbsp;+&nbsp;'-state-disabled')<a name="line_8895"></a></li>
<li id="line_8896" class="even"><span class="lineNumber">&nbsp;8896&nbsp;</span>											.addClass(tm&nbsp;+&nbsp;'-state-hover');<a name="line_8896"></a></li>
<li id="line_8897" class="odd"><span class="lineNumber">&nbsp;8897&nbsp;</span>									},<a name="line_8897"></a></li>
<li id="line_8898" class="even"><span class="lineNumber">&nbsp;8898&nbsp;</span>									function()&nbsp;{<a name="line_8898"></a></li>
<li id="line_8899" class="odd"><span class="lineNumber">&nbsp;8899&nbsp;</span>										//&nbsp;undo&nbsp;the&nbsp;*hover*&nbsp;effect<a name="line_8899"></a></li>
<li id="line_8900" class="even"><span class="lineNumber">&nbsp;8900&nbsp;</span>										button<a name="line_8900"></a></li>
<li id="line_8901" class="odd"><span class="lineNumber">&nbsp;8901&nbsp;</span>											.removeClass(tm&nbsp;+&nbsp;'-state-hover')<a name="line_8901"></a></li>
<li id="line_8902" class="even"><span class="lineNumber">&nbsp;8902&nbsp;</span>											.removeClass(tm&nbsp;+&nbsp;'-state-down');&nbsp;//&nbsp;if&nbsp;mouseleave&nbsp;happens&nbsp;before&nbsp;mouseup<a name="line_8902"></a></li>
<li id="line_8903" class="odd"><span class="lineNumber">&nbsp;8903&nbsp;</span>									}<a name="line_8903"></a></li>
<li id="line_8904" class="even"><span class="lineNumber">&nbsp;8904&nbsp;</span>								);<a name="line_8904"></a></li>
<li id="line_8905" class="odd"><span class="lineNumber">&nbsp;8905&nbsp;</span><a name="line_8905"></a></li>
<li id="line_8906" class="even"><span class="lineNumber">&nbsp;8906&nbsp;</span>							groupChildren&nbsp;=&nbsp;groupChildren.add(button);<a name="line_8906"></a></li>
<li id="line_8907" class="odd"><span class="lineNumber">&nbsp;8907&nbsp;</span>						}<a name="line_8907"></a></li>
<li id="line_8908" class="even"><span class="lineNumber">&nbsp;8908&nbsp;</span>					}<a name="line_8908"></a></li>
<li id="line_8909" class="odd"><span class="lineNumber">&nbsp;8909&nbsp;</span>				});<a name="line_8909"></a></li>
<li id="line_8910" class="even"><span class="lineNumber">&nbsp;8910&nbsp;</span><a name="line_8910"></a></li>
<li id="line_8911" class="odd"><span class="lineNumber">&nbsp;8911&nbsp;</span>				if&nbsp;(isOnlyButtons)&nbsp;{<a name="line_8911"></a></li>
<li id="line_8912" class="even"><span class="lineNumber">&nbsp;8912&nbsp;</span>					groupChildren<a name="line_8912"></a></li>
<li id="line_8913" class="odd"><span class="lineNumber">&nbsp;8913&nbsp;</span>						.first().addClass(tm&nbsp;+&nbsp;'-corner-left').end()<a name="line_8913"></a></li>
<li id="line_8914" class="even"><span class="lineNumber">&nbsp;8914&nbsp;</span>						.last().addClass(tm&nbsp;+&nbsp;'-corner-right').end();<a name="line_8914"></a></li>
<li id="line_8915" class="odd"><span class="lineNumber">&nbsp;8915&nbsp;</span>				}<a name="line_8915"></a></li>
<li id="line_8916" class="even"><span class="lineNumber">&nbsp;8916&nbsp;</span><a name="line_8916"></a></li>
<li id="line_8917" class="odd"><span class="lineNumber">&nbsp;8917&nbsp;</span>				if&nbsp;(groupChildren.length&nbsp;&gt;&nbsp;1)&nbsp;{<a name="line_8917"></a></li>
<li id="line_8918" class="even"><span class="lineNumber">&nbsp;8918&nbsp;</span>					groupEl&nbsp;=&nbsp;$('&lt;div/&gt;');<a name="line_8918"></a></li>
<li id="line_8919" class="odd"><span class="lineNumber">&nbsp;8919&nbsp;</span>					if&nbsp;(isOnlyButtons)&nbsp;{<a name="line_8919"></a></li>
<li id="line_8920" class="even"><span class="lineNumber">&nbsp;8920&nbsp;</span>						groupEl.addClass('fc-button-group');<a name="line_8920"></a></li>
<li id="line_8921" class="odd"><span class="lineNumber">&nbsp;8921&nbsp;</span>					}<a name="line_8921"></a></li>
<li id="line_8922" class="even"><span class="lineNumber">&nbsp;8922&nbsp;</span>					groupEl.append(groupChildren);<a name="line_8922"></a></li>
<li id="line_8923" class="odd"><span class="lineNumber">&nbsp;8923&nbsp;</span>					sectionEl.append(groupEl);<a name="line_8923"></a></li>
<li id="line_8924" class="even"><span class="lineNumber">&nbsp;8924&nbsp;</span>				}<a name="line_8924"></a></li>
<li id="line_8925" class="odd"><span class="lineNumber">&nbsp;8925&nbsp;</span>				else&nbsp;{<a name="line_8925"></a></li>
<li id="line_8926" class="even"><span class="lineNumber">&nbsp;8926&nbsp;</span>					sectionEl.append(groupChildren);&nbsp;//&nbsp;1&nbsp;or&nbsp;0&nbsp;children<a name="line_8926"></a></li>
<li id="line_8927" class="odd"><span class="lineNumber">&nbsp;8927&nbsp;</span>				}<a name="line_8927"></a></li>
<li id="line_8928" class="even"><span class="lineNumber">&nbsp;8928&nbsp;</span>			});<a name="line_8928"></a></li>
<li id="line_8929" class="odd"><span class="lineNumber">&nbsp;8929&nbsp;</span>		}<a name="line_8929"></a></li>
<li id="line_8930" class="even"><span class="lineNumber">&nbsp;8930&nbsp;</span><a name="line_8930"></a></li>
<li id="line_8931" class="odd"><span class="lineNumber">&nbsp;8931&nbsp;</span>		return&nbsp;sectionEl;<a name="line_8931"></a></li>
<li id="line_8932" class="even"><span class="lineNumber">&nbsp;8932&nbsp;</span>	}<a name="line_8932"></a></li>
<li id="line_8933" class="odd"><span class="lineNumber">&nbsp;8933&nbsp;</span>	<a name="line_8933"></a></li>
<li id="line_8934" class="even"><span class="lineNumber">&nbsp;8934&nbsp;</span>	<a name="line_8934"></a></li>
<li id="line_8935" class="odd"><span class="lineNumber">&nbsp;8935&nbsp;</span>	function&nbsp;updateTitle(text)&nbsp;{<a name="line_8935"></a></li>
<li id="line_8936" class="even"><span class="lineNumber">&nbsp;8936&nbsp;</span>		el.find('h2').text(text);<a name="line_8936"></a></li>
<li id="line_8937" class="odd"><span class="lineNumber">&nbsp;8937&nbsp;</span>	}<a name="line_8937"></a></li>
<li id="line_8938" class="even"><span class="lineNumber">&nbsp;8938&nbsp;</span>	<a name="line_8938"></a></li>
<li id="line_8939" class="odd"><span class="lineNumber">&nbsp;8939&nbsp;</span>	<a name="line_8939"></a></li>
<li id="line_8940" class="even"><span class="lineNumber">&nbsp;8940&nbsp;</span>	function&nbsp;activateButton(buttonName)&nbsp;{<a name="line_8940"></a></li>
<li id="line_8941" class="odd"><span class="lineNumber">&nbsp;8941&nbsp;</span>		el.find('.fc-'&nbsp;+&nbsp;buttonName&nbsp;+&nbsp;'-button')<a name="line_8941"></a></li>
<li id="line_8942" class="even"><span class="lineNumber">&nbsp;8942&nbsp;</span>			.addClass(tm&nbsp;+&nbsp;'-state-active');<a name="line_8942"></a></li>
<li id="line_8943" class="odd"><span class="lineNumber">&nbsp;8943&nbsp;</span>	}<a name="line_8943"></a></li>
<li id="line_8944" class="even"><span class="lineNumber">&nbsp;8944&nbsp;</span>	<a name="line_8944"></a></li>
<li id="line_8945" class="odd"><span class="lineNumber">&nbsp;8945&nbsp;</span>	<a name="line_8945"></a></li>
<li id="line_8946" class="even"><span class="lineNumber">&nbsp;8946&nbsp;</span>	function&nbsp;deactivateButton(buttonName)&nbsp;{<a name="line_8946"></a></li>
<li id="line_8947" class="odd"><span class="lineNumber">&nbsp;8947&nbsp;</span>		el.find('.fc-'&nbsp;+&nbsp;buttonName&nbsp;+&nbsp;'-button')<a name="line_8947"></a></li>
<li id="line_8948" class="even"><span class="lineNumber">&nbsp;8948&nbsp;</span>			.removeClass(tm&nbsp;+&nbsp;'-state-active');<a name="line_8948"></a></li>
<li id="line_8949" class="odd"><span class="lineNumber">&nbsp;8949&nbsp;</span>	}<a name="line_8949"></a></li>
<li id="line_8950" class="even"><span class="lineNumber">&nbsp;8950&nbsp;</span>	<a name="line_8950"></a></li>
<li id="line_8951" class="odd"><span class="lineNumber">&nbsp;8951&nbsp;</span>	<a name="line_8951"></a></li>
<li id="line_8952" class="even"><span class="lineNumber">&nbsp;8952&nbsp;</span>	function&nbsp;disableButton(buttonName)&nbsp;{<a name="line_8952"></a></li>
<li id="line_8953" class="odd"><span class="lineNumber">&nbsp;8953&nbsp;</span>		el.find('.fc-'&nbsp;+&nbsp;buttonName&nbsp;+&nbsp;'-button')<a name="line_8953"></a></li>
<li id="line_8954" class="even"><span class="lineNumber">&nbsp;8954&nbsp;</span>			.attr('disabled',&nbsp;'disabled')<a name="line_8954"></a></li>
<li id="line_8955" class="odd"><span class="lineNumber">&nbsp;8955&nbsp;</span>			.addClass(tm&nbsp;+&nbsp;'-state-disabled');<a name="line_8955"></a></li>
<li id="line_8956" class="even"><span class="lineNumber">&nbsp;8956&nbsp;</span>	}<a name="line_8956"></a></li>
<li id="line_8957" class="odd"><span class="lineNumber">&nbsp;8957&nbsp;</span>	<a name="line_8957"></a></li>
<li id="line_8958" class="even"><span class="lineNumber">&nbsp;8958&nbsp;</span>	<a name="line_8958"></a></li>
<li id="line_8959" class="odd"><span class="lineNumber">&nbsp;8959&nbsp;</span>	function&nbsp;enableButton(buttonName)&nbsp;{<a name="line_8959"></a></li>
<li id="line_8960" class="even"><span class="lineNumber">&nbsp;8960&nbsp;</span>		el.find('.fc-'&nbsp;+&nbsp;buttonName&nbsp;+&nbsp;'-button')<a name="line_8960"></a></li>
<li id="line_8961" class="odd"><span class="lineNumber">&nbsp;8961&nbsp;</span>			.removeAttr('disabled')<a name="line_8961"></a></li>
<li id="line_8962" class="even"><span class="lineNumber">&nbsp;8962&nbsp;</span>			.removeClass(tm&nbsp;+&nbsp;'-state-disabled');<a name="line_8962"></a></li>
<li id="line_8963" class="odd"><span class="lineNumber">&nbsp;8963&nbsp;</span>	}<a name="line_8963"></a></li>
<li id="line_8964" class="even"><span class="lineNumber">&nbsp;8964&nbsp;</span><a name="line_8964"></a></li>
<li id="line_8965" class="odd"><span class="lineNumber">&nbsp;8965&nbsp;</span><a name="line_8965"></a></li>
<li id="line_8966" class="even"><span class="lineNumber">&nbsp;8966&nbsp;</span>	function&nbsp;getViewsWithButtons()&nbsp;{<a name="line_8966"></a></li>
<li id="line_8967" class="odd"><span class="lineNumber">&nbsp;8967&nbsp;</span>		return&nbsp;viewsWithButtons;<a name="line_8967"></a></li>
<li id="line_8968" class="even"><span class="lineNumber">&nbsp;8968&nbsp;</span>	}<a name="line_8968"></a></li>
<li id="line_8969" class="odd"><span class="lineNumber">&nbsp;8969&nbsp;</span><a name="line_8969"></a></li>
<li id="line_8970" class="even"><span class="lineNumber">&nbsp;8970&nbsp;</span>}<a name="line_8970"></a></li>
<li id="line_8971" class="odd"><span class="lineNumber">&nbsp;8971&nbsp;</span><a name="line_8971"></a></li>
<li id="line_8972" class="even"><span class="lineNumber">&nbsp;8972&nbsp;</span>;;<a name="line_8972"></a></li>
<li id="line_8973" class="odd"><span class="lineNumber">&nbsp;8973&nbsp;</span><a name="line_8973"></a></li>
<li id="line_8974" class="even"><span class="lineNumber">&nbsp;8974&nbsp;</span>fc.sourceNormalizers&nbsp;=&nbsp;[];<a name="line_8974"></a></li>
<li id="line_8975" class="odd"><span class="lineNumber">&nbsp;8975&nbsp;</span>fc.sourceFetchers&nbsp;=&nbsp;[];<a name="line_8975"></a></li>
<li id="line_8976" class="even"><span class="lineNumber">&nbsp;8976&nbsp;</span><a name="line_8976"></a></li>
<li id="line_8977" class="odd"><span class="lineNumber">&nbsp;8977&nbsp;</span>var&nbsp;ajaxDefaults&nbsp;=&nbsp;{<a name="line_8977"></a></li>
<li id="line_8978" class="even"><span class="lineNumber">&nbsp;8978&nbsp;</span>	dataType:&nbsp;'json',<a name="line_8978"></a></li>
<li id="line_8979" class="odd"><span class="lineNumber">&nbsp;8979&nbsp;</span>	cache:&nbsp;false<a name="line_8979"></a></li>
<li id="line_8980" class="even"><span class="lineNumber">&nbsp;8980&nbsp;</span>};<a name="line_8980"></a></li>
<li id="line_8981" class="odd"><span class="lineNumber">&nbsp;8981&nbsp;</span><a name="line_8981"></a></li>
<li id="line_8982" class="even"><span class="lineNumber">&nbsp;8982&nbsp;</span>var&nbsp;eventGUID&nbsp;=&nbsp;1;<a name="line_8982"></a></li>
<li id="line_8983" class="odd"><span class="lineNumber">&nbsp;8983&nbsp;</span><a name="line_8983"></a></li>
<li id="line_8984" class="even"><span class="lineNumber">&nbsp;8984&nbsp;</span><a name="line_8984"></a></li>
<li id="line_8985" class="odd"><span class="lineNumber">&nbsp;8985&nbsp;</span>function&nbsp;EventManager(options)&nbsp;{&nbsp;//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;a&nbsp;calendar<a name="line_8985"></a></li>
<li id="line_8986" class="even"><span class="lineNumber">&nbsp;8986&nbsp;</span>	var&nbsp;t&nbsp;=&nbsp;this;<a name="line_8986"></a></li>
<li id="line_8987" class="odd"><span class="lineNumber">&nbsp;8987&nbsp;</span>	<a name="line_8987"></a></li>
<li id="line_8988" class="even"><span class="lineNumber">&nbsp;8988&nbsp;</span>	<a name="line_8988"></a></li>
<li id="line_8989" class="odd"><span class="lineNumber">&nbsp;8989&nbsp;</span>	//&nbsp;exports<a name="line_8989"></a></li>
<li id="line_8990" class="even"><span class="lineNumber">&nbsp;8990&nbsp;</span>	t.isFetchNeeded&nbsp;=&nbsp;isFetchNeeded;<a name="line_8990"></a></li>
<li id="line_8991" class="odd"><span class="lineNumber">&nbsp;8991&nbsp;</span>	t.fetchEvents&nbsp;=&nbsp;fetchEvents;<a name="line_8991"></a></li>
<li id="line_8992" class="even"><span class="lineNumber">&nbsp;8992&nbsp;</span>	t.addEventSource&nbsp;=&nbsp;addEventSource;<a name="line_8992"></a></li>
<li id="line_8993" class="odd"><span class="lineNumber">&nbsp;8993&nbsp;</span>	t.removeEventSource&nbsp;=&nbsp;removeEventSource;<a name="line_8993"></a></li>
<li id="line_8994" class="even"><span class="lineNumber">&nbsp;8994&nbsp;</span>	t.updateEvent&nbsp;=&nbsp;updateEvent;<a name="line_8994"></a></li>
<li id="line_8995" class="odd"><span class="lineNumber">&nbsp;8995&nbsp;</span>	t.renderEvent&nbsp;=&nbsp;renderEvent;<a name="line_8995"></a></li>
<li id="line_8996" class="even"><span class="lineNumber">&nbsp;8996&nbsp;</span>	t.removeEvents&nbsp;=&nbsp;removeEvents;<a name="line_8996"></a></li>
<li id="line_8997" class="odd"><span class="lineNumber">&nbsp;8997&nbsp;</span>	t.clientEvents&nbsp;=&nbsp;clientEvents;<a name="line_8997"></a></li>
<li id="line_8998" class="even"><span class="lineNumber">&nbsp;8998&nbsp;</span>	t.mutateEvent&nbsp;=&nbsp;mutateEvent;<a name="line_8998"></a></li>
<li id="line_8999" class="odd"><span class="lineNumber">&nbsp;8999&nbsp;</span>	t.normalizeEventRange&nbsp;=&nbsp;normalizeEventRange;<a name="line_8999"></a></li>
<li id="line_9000" class="even"><span class="lineNumber">&nbsp;9000&nbsp;</span>	t.normalizeEventRangeTimes&nbsp;=&nbsp;normalizeEventRangeTimes;<a name="line_9000"></a></li>
<li id="line_9001" class="odd"><span class="lineNumber">&nbsp;9001&nbsp;</span>	t.ensureVisibleEventRange&nbsp;=&nbsp;ensureVisibleEventRange;<a name="line_9001"></a></li>
<li id="line_9002" class="even"><span class="lineNumber">&nbsp;9002&nbsp;</span>	<a name="line_9002"></a></li>
<li id="line_9003" class="odd"><span class="lineNumber">&nbsp;9003&nbsp;</span>	<a name="line_9003"></a></li>
<li id="line_9004" class="even"><span class="lineNumber">&nbsp;9004&nbsp;</span>	//&nbsp;imports<a name="line_9004"></a></li>
<li id="line_9005" class="odd"><span class="lineNumber">&nbsp;9005&nbsp;</span>	var&nbsp;reportEvents&nbsp;=&nbsp;t.reportEvents;<a name="line_9005"></a></li>
<li id="line_9006" class="even"><span class="lineNumber">&nbsp;9006&nbsp;</span>	<a name="line_9006"></a></li>
<li id="line_9007" class="odd"><span class="lineNumber">&nbsp;9007&nbsp;</span>	<a name="line_9007"></a></li>
<li id="line_9008" class="even"><span class="lineNumber">&nbsp;9008&nbsp;</span>	//&nbsp;locals<a name="line_9008"></a></li>
<li id="line_9009" class="odd"><span class="lineNumber">&nbsp;9009&nbsp;</span>	var&nbsp;stickySource&nbsp;=&nbsp;{&nbsp;events:&nbsp;[]&nbsp;};<a name="line_9009"></a></li>
<li id="line_9010" class="even"><span class="lineNumber">&nbsp;9010&nbsp;</span>	var&nbsp;sources&nbsp;=&nbsp;[&nbsp;stickySource&nbsp;];<a name="line_9010"></a></li>
<li id="line_9011" class="odd"><span class="lineNumber">&nbsp;9011&nbsp;</span>	var&nbsp;rangeStart,&nbsp;rangeEnd;<a name="line_9011"></a></li>
<li id="line_9012" class="even"><span class="lineNumber">&nbsp;9012&nbsp;</span>	var&nbsp;currentFetchID&nbsp;=&nbsp;0;<a name="line_9012"></a></li>
<li id="line_9013" class="odd"><span class="lineNumber">&nbsp;9013&nbsp;</span>	var&nbsp;pendingSourceCnt&nbsp;=&nbsp;0;<a name="line_9013"></a></li>
<li id="line_9014" class="even"><span class="lineNumber">&nbsp;9014&nbsp;</span>	var&nbsp;cache&nbsp;=&nbsp;[];&nbsp;//&nbsp;holds&nbsp;events&nbsp;that&nbsp;have&nbsp;already&nbsp;been&nbsp;expanded<a name="line_9014"></a></li>
<li id="line_9015" class="odd"><span class="lineNumber">&nbsp;9015&nbsp;</span><a name="line_9015"></a></li>
<li id="line_9016" class="even"><span class="lineNumber">&nbsp;9016&nbsp;</span><a name="line_9016"></a></li>
<li id="line_9017" class="odd"><span class="lineNumber">&nbsp;9017&nbsp;</span>	$.each(<a name="line_9017"></a></li>
<li id="line_9018" class="even"><span class="lineNumber">&nbsp;9018&nbsp;</span>		(options.events&nbsp;?&nbsp;[&nbsp;options.events&nbsp;]&nbsp;:&nbsp;[]).concat(options.eventSources&nbsp;||&nbsp;[]),<a name="line_9018"></a></li>
<li id="line_9019" class="odd"><span class="lineNumber">&nbsp;9019&nbsp;</span>		function(i,&nbsp;sourceInput)&nbsp;{<a name="line_9019"></a></li>
<li id="line_9020" class="even"><span class="lineNumber">&nbsp;9020&nbsp;</span>			var&nbsp;source&nbsp;=&nbsp;buildEventSource(sourceInput);<a name="line_9020"></a></li>
<li id="line_9021" class="odd"><span class="lineNumber">&nbsp;9021&nbsp;</span>			if&nbsp;(source)&nbsp;{<a name="line_9021"></a></li>
<li id="line_9022" class="even"><span class="lineNumber">&nbsp;9022&nbsp;</span>				sources.push(source);<a name="line_9022"></a></li>
<li id="line_9023" class="odd"><span class="lineNumber">&nbsp;9023&nbsp;</span>			}<a name="line_9023"></a></li>
<li id="line_9024" class="even"><span class="lineNumber">&nbsp;9024&nbsp;</span>		}<a name="line_9024"></a></li>
<li id="line_9025" class="odd"><span class="lineNumber">&nbsp;9025&nbsp;</span>	);<a name="line_9025"></a></li>
<li id="line_9026" class="even"><span class="lineNumber">&nbsp;9026&nbsp;</span>	<a name="line_9026"></a></li>
<li id="line_9027" class="odd"><span class="lineNumber">&nbsp;9027&nbsp;</span>	<a name="line_9027"></a></li>
<li id="line_9028" class="even"><span class="lineNumber">&nbsp;9028&nbsp;</span>	<a name="line_9028"></a></li>
<li id="line_9029" class="odd"><span class="lineNumber">&nbsp;9029&nbsp;</span>	/*&nbsp;Fetching<a name="line_9029"></a></li>
<li id="line_9030" class="even"><span class="lineNumber">&nbsp;9030&nbsp;</span>	-----------------------------------------------------------------------------*/<a name="line_9030"></a></li>
<li id="line_9031" class="odd"><span class="lineNumber">&nbsp;9031&nbsp;</span>	<a name="line_9031"></a></li>
<li id="line_9032" class="even"><span class="lineNumber">&nbsp;9032&nbsp;</span>	<a name="line_9032"></a></li>
<li id="line_9033" class="odd"><span class="lineNumber">&nbsp;9033&nbsp;</span>	function&nbsp;isFetchNeeded(start,&nbsp;end)&nbsp;{<a name="line_9033"></a></li>
<li id="line_9034" class="even"><span class="lineNumber">&nbsp;9034&nbsp;</span>		return&nbsp;!rangeStart&nbsp;||&nbsp;//&nbsp;nothing&nbsp;has&nbsp;been&nbsp;fetched&nbsp;yet?<a name="line_9034"></a></li>
<li id="line_9035" class="odd"><span class="lineNumber">&nbsp;9035&nbsp;</span>			//&nbsp;or,&nbsp;a&nbsp;part&nbsp;of&nbsp;the&nbsp;new&nbsp;range&nbsp;is&nbsp;outside&nbsp;of&nbsp;the&nbsp;old&nbsp;range?&nbsp;(after&nbsp;normalizing)<a name="line_9035"></a></li>
<li id="line_9036" class="even"><span class="lineNumber">&nbsp;9036&nbsp;</span>			start.clone().stripZone()&nbsp;&lt;&nbsp;rangeStart.clone().stripZone()&nbsp;||<a name="line_9036"></a></li>
<li id="line_9037" class="odd"><span class="lineNumber">&nbsp;9037&nbsp;</span>			end.clone().stripZone()&nbsp;&gt;&nbsp;rangeEnd.clone().stripZone();<a name="line_9037"></a></li>
<li id="line_9038" class="even"><span class="lineNumber">&nbsp;9038&nbsp;</span>	}<a name="line_9038"></a></li>
<li id="line_9039" class="odd"><span class="lineNumber">&nbsp;9039&nbsp;</span>	<a name="line_9039"></a></li>
<li id="line_9040" class="even"><span class="lineNumber">&nbsp;9040&nbsp;</span>	<a name="line_9040"></a></li>
<li id="line_9041" class="odd"><span class="lineNumber">&nbsp;9041&nbsp;</span>	function&nbsp;fetchEvents(start,&nbsp;end)&nbsp;{<a name="line_9041"></a></li>
<li id="line_9042" class="even"><span class="lineNumber">&nbsp;9042&nbsp;</span>		rangeStart&nbsp;=&nbsp;start;<a name="line_9042"></a></li>
<li id="line_9043" class="odd"><span class="lineNumber">&nbsp;9043&nbsp;</span>		rangeEnd&nbsp;=&nbsp;end;<a name="line_9043"></a></li>
<li id="line_9044" class="even"><span class="lineNumber">&nbsp;9044&nbsp;</span>		cache&nbsp;=&nbsp;[];<a name="line_9044"></a></li>
<li id="line_9045" class="odd"><span class="lineNumber">&nbsp;9045&nbsp;</span>		var&nbsp;fetchID&nbsp;=&nbsp;++currentFetchID;<a name="line_9045"></a></li>
<li id="line_9046" class="even"><span class="lineNumber">&nbsp;9046&nbsp;</span>		var&nbsp;len&nbsp;=&nbsp;sources.length;<a name="line_9046"></a></li>
<li id="line_9047" class="odd"><span class="lineNumber">&nbsp;9047&nbsp;</span>		pendingSourceCnt&nbsp;=&nbsp;len;<a name="line_9047"></a></li>
<li id="line_9048" class="even"><span class="lineNumber">&nbsp;9048&nbsp;</span>		for&nbsp;(var&nbsp;i=0;&nbsp;i&lt;len;&nbsp;i++)&nbsp;{<a name="line_9048"></a></li>
<li id="line_9049" class="odd"><span class="lineNumber">&nbsp;9049&nbsp;</span>			fetchEventSource(sources[i],&nbsp;fetchID);<a name="line_9049"></a></li>
<li id="line_9050" class="even"><span class="lineNumber">&nbsp;9050&nbsp;</span>		}<a name="line_9050"></a></li>
<li id="line_9051" class="odd"><span class="lineNumber">&nbsp;9051&nbsp;</span>	}<a name="line_9051"></a></li>
<li id="line_9052" class="even"><span class="lineNumber">&nbsp;9052&nbsp;</span>	<a name="line_9052"></a></li>
<li id="line_9053" class="odd"><span class="lineNumber">&nbsp;9053&nbsp;</span>	<a name="line_9053"></a></li>
<li id="line_9054" class="even"><span class="lineNumber">&nbsp;9054&nbsp;</span>	function&nbsp;fetchEventSource(source,&nbsp;fetchID)&nbsp;{<a name="line_9054"></a></li>
<li id="line_9055" class="odd"><span class="lineNumber">&nbsp;9055&nbsp;</span>		_fetchEventSource(source,&nbsp;function(eventInputs)&nbsp;{<a name="line_9055"></a></li>
<li id="line_9056" class="even"><span class="lineNumber">&nbsp;9056&nbsp;</span>			var&nbsp;isArraySource&nbsp;=&nbsp;$.isArray(source.events);<a name="line_9056"></a></li>
<li id="line_9057" class="odd"><span class="lineNumber">&nbsp;9057&nbsp;</span>			var&nbsp;i,&nbsp;eventInput;<a name="line_9057"></a></li>
<li id="line_9058" class="even"><span class="lineNumber">&nbsp;9058&nbsp;</span>			var&nbsp;abstractEvent;<a name="line_9058"></a></li>
<li id="line_9059" class="odd"><span class="lineNumber">&nbsp;9059&nbsp;</span><a name="line_9059"></a></li>
<li id="line_9060" class="even"><span class="lineNumber">&nbsp;9060&nbsp;</span>			if&nbsp;(fetchID&nbsp;==&nbsp;currentFetchID)&nbsp;{<a name="line_9060"></a></li>
<li id="line_9061" class="odd"><span class="lineNumber">&nbsp;9061&nbsp;</span><a name="line_9061"></a></li>
<li id="line_9062" class="even"><span class="lineNumber">&nbsp;9062&nbsp;</span>				if&nbsp;(eventInputs)&nbsp;{<a name="line_9062"></a></li>
<li id="line_9063" class="odd"><span class="lineNumber">&nbsp;9063&nbsp;</span>					for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;eventInputs.length;&nbsp;i++)&nbsp;{<a name="line_9063"></a></li>
<li id="line_9064" class="even"><span class="lineNumber">&nbsp;9064&nbsp;</span>						eventInput&nbsp;=&nbsp;eventInputs[i];<a name="line_9064"></a></li>
<li id="line_9065" class="odd"><span class="lineNumber">&nbsp;9065&nbsp;</span><a name="line_9065"></a></li>
<li id="line_9066" class="even"><span class="lineNumber">&nbsp;9066&nbsp;</span>						if&nbsp;(isArraySource)&nbsp;{&nbsp;//&nbsp;array&nbsp;sources&nbsp;have&nbsp;already&nbsp;been&nbsp;convert&nbsp;to&nbsp;Event&nbsp;Objects<a name="line_9066"></a></li>
<li id="line_9067" class="odd"><span class="lineNumber">&nbsp;9067&nbsp;</span>							abstractEvent&nbsp;=&nbsp;eventInput;<a name="line_9067"></a></li>
<li id="line_9068" class="even"><span class="lineNumber">&nbsp;9068&nbsp;</span>						}<a name="line_9068"></a></li>
<li id="line_9069" class="odd"><span class="lineNumber">&nbsp;9069&nbsp;</span>						else&nbsp;{<a name="line_9069"></a></li>
<li id="line_9070" class="even"><span class="lineNumber">&nbsp;9070&nbsp;</span>							abstractEvent&nbsp;=&nbsp;buildEventFromInput(eventInput,&nbsp;source);<a name="line_9070"></a></li>
<li id="line_9071" class="odd"><span class="lineNumber">&nbsp;9071&nbsp;</span>						}<a name="line_9071"></a></li>
<li id="line_9072" class="even"><span class="lineNumber">&nbsp;9072&nbsp;</span><a name="line_9072"></a></li>
<li id="line_9073" class="odd"><span class="lineNumber">&nbsp;9073&nbsp;</span>						if&nbsp;(abstractEvent)&nbsp;{&nbsp;//&nbsp;not&nbsp;false&nbsp;(an&nbsp;invalid&nbsp;event)<a name="line_9073"></a></li>
<li id="line_9074" class="even"><span class="lineNumber">&nbsp;9074&nbsp;</span>							cache.push.apply(<a name="line_9074"></a></li>
<li id="line_9075" class="odd"><span class="lineNumber">&nbsp;9075&nbsp;</span>								cache,<a name="line_9075"></a></li>
<li id="line_9076" class="even"><span class="lineNumber">&nbsp;9076&nbsp;</span>								expandEvent(abstractEvent)&nbsp;//&nbsp;add&nbsp;individual&nbsp;expanded&nbsp;events&nbsp;to&nbsp;the&nbsp;cache<a name="line_9076"></a></li>
<li id="line_9077" class="odd"><span class="lineNumber">&nbsp;9077&nbsp;</span>							);<a name="line_9077"></a></li>
<li id="line_9078" class="even"><span class="lineNumber">&nbsp;9078&nbsp;</span>						}<a name="line_9078"></a></li>
<li id="line_9079" class="odd"><span class="lineNumber">&nbsp;9079&nbsp;</span>					}<a name="line_9079"></a></li>
<li id="line_9080" class="even"><span class="lineNumber">&nbsp;9080&nbsp;</span>				}<a name="line_9080"></a></li>
<li id="line_9081" class="odd"><span class="lineNumber">&nbsp;9081&nbsp;</span><a name="line_9081"></a></li>
<li id="line_9082" class="even"><span class="lineNumber">&nbsp;9082&nbsp;</span>				pendingSourceCnt--;<a name="line_9082"></a></li>
<li id="line_9083" class="odd"><span class="lineNumber">&nbsp;9083&nbsp;</span>				if&nbsp;(!pendingSourceCnt)&nbsp;{<a name="line_9083"></a></li>
<li id="line_9084" class="even"><span class="lineNumber">&nbsp;9084&nbsp;</span>					reportEvents(cache);<a name="line_9084"></a></li>
<li id="line_9085" class="odd"><span class="lineNumber">&nbsp;9085&nbsp;</span>				}<a name="line_9085"></a></li>
<li id="line_9086" class="even"><span class="lineNumber">&nbsp;9086&nbsp;</span>			}<a name="line_9086"></a></li>
<li id="line_9087" class="odd"><span class="lineNumber">&nbsp;9087&nbsp;</span>		});<a name="line_9087"></a></li>
<li id="line_9088" class="even"><span class="lineNumber">&nbsp;9088&nbsp;</span>	}<a name="line_9088"></a></li>
<li id="line_9089" class="odd"><span class="lineNumber">&nbsp;9089&nbsp;</span>	<a name="line_9089"></a></li>
<li id="line_9090" class="even"><span class="lineNumber">&nbsp;9090&nbsp;</span>	<a name="line_9090"></a></li>
<li id="line_9091" class="odd"><span class="lineNumber">&nbsp;9091&nbsp;</span>	function&nbsp;_fetchEventSource(source,&nbsp;callback)&nbsp;{<a name="line_9091"></a></li>
<li id="line_9092" class="even"><span class="lineNumber">&nbsp;9092&nbsp;</span>		var&nbsp;i;<a name="line_9092"></a></li>
<li id="line_9093" class="odd"><span class="lineNumber">&nbsp;9093&nbsp;</span>		var&nbsp;fetchers&nbsp;=&nbsp;fc.sourceFetchers;<a name="line_9093"></a></li>
<li id="line_9094" class="even"><span class="lineNumber">&nbsp;9094&nbsp;</span>		var&nbsp;res;<a name="line_9094"></a></li>
<li id="line_9095" class="odd"><span class="lineNumber">&nbsp;9095&nbsp;</span><a name="line_9095"></a></li>
<li id="line_9096" class="even"><span class="lineNumber">&nbsp;9096&nbsp;</span>		for&nbsp;(i=0;&nbsp;i&lt;fetchers.length;&nbsp;i++)&nbsp;{<a name="line_9096"></a></li>
<li id="line_9097" class="odd"><span class="lineNumber">&nbsp;9097&nbsp;</span>			res&nbsp;=&nbsp;fetchers[i].call(<a name="line_9097"></a></li>
<li id="line_9098" class="even"><span class="lineNumber">&nbsp;9098&nbsp;</span>				t,&nbsp;//&nbsp;this,&nbsp;the&nbsp;Calendar&nbsp;object<a name="line_9098"></a></li>
<li id="line_9099" class="odd"><span class="lineNumber">&nbsp;9099&nbsp;</span>				source,<a name="line_9099"></a></li>
<li id="line_9100" class="even"><span class="lineNumber">&nbsp;9100&nbsp;</span>				rangeStart.clone(),<a name="line_9100"></a></li>
<li id="line_9101" class="odd"><span class="lineNumber">&nbsp;9101&nbsp;</span>				rangeEnd.clone(),<a name="line_9101"></a></li>
<li id="line_9102" class="even"><span class="lineNumber">&nbsp;9102&nbsp;</span>				options.timezone,<a name="line_9102"></a></li>
<li id="line_9103" class="odd"><span class="lineNumber">&nbsp;9103&nbsp;</span>				callback<a name="line_9103"></a></li>
<li id="line_9104" class="even"><span class="lineNumber">&nbsp;9104&nbsp;</span>			);<a name="line_9104"></a></li>
<li id="line_9105" class="odd"><span class="lineNumber">&nbsp;9105&nbsp;</span><a name="line_9105"></a></li>
<li id="line_9106" class="even"><span class="lineNumber">&nbsp;9106&nbsp;</span>			if&nbsp;(res&nbsp;===&nbsp;true)&nbsp;{<a name="line_9106"></a></li>
<li id="line_9107" class="odd"><span class="lineNumber">&nbsp;9107&nbsp;</span>				//&nbsp;the&nbsp;fetcher&nbsp;is&nbsp;in&nbsp;charge.&nbsp;made&nbsp;its&nbsp;own&nbsp;async&nbsp;request<a name="line_9107"></a></li>
<li id="line_9108" class="even"><span class="lineNumber">&nbsp;9108&nbsp;</span>				return;<a name="line_9108"></a></li>
<li id="line_9109" class="odd"><span class="lineNumber">&nbsp;9109&nbsp;</span>			}<a name="line_9109"></a></li>
<li id="line_9110" class="even"><span class="lineNumber">&nbsp;9110&nbsp;</span>			else&nbsp;if&nbsp;(typeof&nbsp;res&nbsp;==&nbsp;'object')&nbsp;{<a name="line_9110"></a></li>
<li id="line_9111" class="odd"><span class="lineNumber">&nbsp;9111&nbsp;</span>				//&nbsp;the&nbsp;fetcher&nbsp;returned&nbsp;a&nbsp;new&nbsp;source.&nbsp;process&nbsp;it<a name="line_9111"></a></li>
<li id="line_9112" class="even"><span class="lineNumber">&nbsp;9112&nbsp;</span>				_fetchEventSource(res,&nbsp;callback);<a name="line_9112"></a></li>
<li id="line_9113" class="odd"><span class="lineNumber">&nbsp;9113&nbsp;</span>				return;<a name="line_9113"></a></li>
<li id="line_9114" class="even"><span class="lineNumber">&nbsp;9114&nbsp;</span>			}<a name="line_9114"></a></li>
<li id="line_9115" class="odd"><span class="lineNumber">&nbsp;9115&nbsp;</span>		}<a name="line_9115"></a></li>
<li id="line_9116" class="even"><span class="lineNumber">&nbsp;9116&nbsp;</span><a name="line_9116"></a></li>
<li id="line_9117" class="odd"><span class="lineNumber">&nbsp;9117&nbsp;</span>		var&nbsp;events&nbsp;=&nbsp;source.events;<a name="line_9117"></a></li>
<li id="line_9118" class="even"><span class="lineNumber">&nbsp;9118&nbsp;</span>		if&nbsp;(events)&nbsp;{<a name="line_9118"></a></li>
<li id="line_9119" class="odd"><span class="lineNumber">&nbsp;9119&nbsp;</span>			if&nbsp;($.isFunction(events))&nbsp;{<a name="line_9119"></a></li>
<li id="line_9120" class="even"><span class="lineNumber">&nbsp;9120&nbsp;</span>				t.pushLoading();<a name="line_9120"></a></li>
<li id="line_9121" class="odd"><span class="lineNumber">&nbsp;9121&nbsp;</span>				events.call(<a name="line_9121"></a></li>
<li id="line_9122" class="even"><span class="lineNumber">&nbsp;9122&nbsp;</span>					t,&nbsp;//&nbsp;this,&nbsp;the&nbsp;Calendar&nbsp;object<a name="line_9122"></a></li>
<li id="line_9123" class="odd"><span class="lineNumber">&nbsp;9123&nbsp;</span>					rangeStart.clone(),<a name="line_9123"></a></li>
<li id="line_9124" class="even"><span class="lineNumber">&nbsp;9124&nbsp;</span>					rangeEnd.clone(),<a name="line_9124"></a></li>
<li id="line_9125" class="odd"><span class="lineNumber">&nbsp;9125&nbsp;</span>					options.timezone,<a name="line_9125"></a></li>
<li id="line_9126" class="even"><span class="lineNumber">&nbsp;9126&nbsp;</span>					function(events)&nbsp;{<a name="line_9126"></a></li>
<li id="line_9127" class="odd"><span class="lineNumber">&nbsp;9127&nbsp;</span>						callback(events);<a name="line_9127"></a></li>
<li id="line_9128" class="even"><span class="lineNumber">&nbsp;9128&nbsp;</span>						t.popLoading();<a name="line_9128"></a></li>
<li id="line_9129" class="odd"><span class="lineNumber">&nbsp;9129&nbsp;</span>					}<a name="line_9129"></a></li>
<li id="line_9130" class="even"><span class="lineNumber">&nbsp;9130&nbsp;</span>				);<a name="line_9130"></a></li>
<li id="line_9131" class="odd"><span class="lineNumber">&nbsp;9131&nbsp;</span>			}<a name="line_9131"></a></li>
<li id="line_9132" class="even"><span class="lineNumber">&nbsp;9132&nbsp;</span>			else&nbsp;if&nbsp;($.isArray(events))&nbsp;{<a name="line_9132"></a></li>
<li id="line_9133" class="odd"><span class="lineNumber">&nbsp;9133&nbsp;</span>				callback(events);<a name="line_9133"></a></li>
<li id="line_9134" class="even"><span class="lineNumber">&nbsp;9134&nbsp;</span>			}<a name="line_9134"></a></li>
<li id="line_9135" class="odd"><span class="lineNumber">&nbsp;9135&nbsp;</span>			else&nbsp;{<a name="line_9135"></a></li>
<li id="line_9136" class="even"><span class="lineNumber">&nbsp;9136&nbsp;</span>				callback();<a name="line_9136"></a></li>
<li id="line_9137" class="odd"><span class="lineNumber">&nbsp;9137&nbsp;</span>			}<a name="line_9137"></a></li>
<li id="line_9138" class="even"><span class="lineNumber">&nbsp;9138&nbsp;</span>		}else{<a name="line_9138"></a></li>
<li id="line_9139" class="odd"><span class="lineNumber">&nbsp;9139&nbsp;</span>			var&nbsp;url&nbsp;=&nbsp;source.url;<a name="line_9139"></a></li>
<li id="line_9140" class="even"><span class="lineNumber">&nbsp;9140&nbsp;</span>			if&nbsp;(url)&nbsp;{<a name="line_9140"></a></li>
<li id="line_9141" class="odd"><span class="lineNumber">&nbsp;9141&nbsp;</span>				var&nbsp;success&nbsp;=&nbsp;source.success;<a name="line_9141"></a></li>
<li id="line_9142" class="even"><span class="lineNumber">&nbsp;9142&nbsp;</span>				var&nbsp;error&nbsp;=&nbsp;source.error;<a name="line_9142"></a></li>
<li id="line_9143" class="odd"><span class="lineNumber">&nbsp;9143&nbsp;</span>				var&nbsp;complete&nbsp;=&nbsp;source.complete;<a name="line_9143"></a></li>
<li id="line_9144" class="even"><span class="lineNumber">&nbsp;9144&nbsp;</span><a name="line_9144"></a></li>
<li id="line_9145" class="odd"><span class="lineNumber">&nbsp;9145&nbsp;</span>				//&nbsp;retrieve&nbsp;any&nbsp;outbound&nbsp;GET/POST&nbsp;$.ajax&nbsp;data&nbsp;from&nbsp;the&nbsp;options<a name="line_9145"></a></li>
<li id="line_9146" class="even"><span class="lineNumber">&nbsp;9146&nbsp;</span>				var&nbsp;customData;<a name="line_9146"></a></li>
<li id="line_9147" class="odd"><span class="lineNumber">&nbsp;9147&nbsp;</span>				if&nbsp;($.isFunction(source.data))&nbsp;{<a name="line_9147"></a></li>
<li id="line_9148" class="even"><span class="lineNumber">&nbsp;9148&nbsp;</span>					//&nbsp;supplied&nbsp;as&nbsp;a&nbsp;function&nbsp;that&nbsp;returns&nbsp;a&nbsp;key/value&nbsp;object<a name="line_9148"></a></li>
<li id="line_9149" class="odd"><span class="lineNumber">&nbsp;9149&nbsp;</span>					customData&nbsp;=&nbsp;source.data();<a name="line_9149"></a></li>
<li id="line_9150" class="even"><span class="lineNumber">&nbsp;9150&nbsp;</span>				}<a name="line_9150"></a></li>
<li id="line_9151" class="odd"><span class="lineNumber">&nbsp;9151&nbsp;</span>				else&nbsp;{<a name="line_9151"></a></li>
<li id="line_9152" class="even"><span class="lineNumber">&nbsp;9152&nbsp;</span>					//&nbsp;supplied&nbsp;as&nbsp;a&nbsp;straight&nbsp;key/value&nbsp;object<a name="line_9152"></a></li>
<li id="line_9153" class="odd"><span class="lineNumber">&nbsp;9153&nbsp;</span>					customData&nbsp;=&nbsp;source.data;<a name="line_9153"></a></li>
<li id="line_9154" class="even"><span class="lineNumber">&nbsp;9154&nbsp;</span>				}<a name="line_9154"></a></li>
<li id="line_9155" class="odd"><span class="lineNumber">&nbsp;9155&nbsp;</span><a name="line_9155"></a></li>
<li id="line_9156" class="even"><span class="lineNumber">&nbsp;9156&nbsp;</span>				//&nbsp;use&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;custom&nbsp;data&nbsp;so&nbsp;we&nbsp;can&nbsp;modify&nbsp;the&nbsp;parameters<a name="line_9156"></a></li>
<li id="line_9157" class="odd"><span class="lineNumber">&nbsp;9157&nbsp;</span>				//&nbsp;and&nbsp;not&nbsp;affect&nbsp;the&nbsp;passed-in&nbsp;object.<a name="line_9157"></a></li>
<li id="line_9158" class="even"><span class="lineNumber">&nbsp;9158&nbsp;</span>				var&nbsp;data&nbsp;=&nbsp;$.extend({},&nbsp;customData&nbsp;||&nbsp;{});<a name="line_9158"></a></li>
<li id="line_9159" class="odd"><span class="lineNumber">&nbsp;9159&nbsp;</span><a name="line_9159"></a></li>
<li id="line_9160" class="even"><span class="lineNumber">&nbsp;9160&nbsp;</span>				var&nbsp;startParam&nbsp;=&nbsp;firstDefined(source.startParam,&nbsp;options.startParam);<a name="line_9160"></a></li>
<li id="line_9161" class="odd"><span class="lineNumber">&nbsp;9161&nbsp;</span>				var&nbsp;endParam&nbsp;=&nbsp;firstDefined(source.endParam,&nbsp;options.endParam);<a name="line_9161"></a></li>
<li id="line_9162" class="even"><span class="lineNumber">&nbsp;9162&nbsp;</span>				var&nbsp;timezoneParam&nbsp;=&nbsp;firstDefined(source.timezoneParam,&nbsp;options.timezoneParam);<a name="line_9162"></a></li>
<li id="line_9163" class="odd"><span class="lineNumber">&nbsp;9163&nbsp;</span><a name="line_9163"></a></li>
<li id="line_9164" class="even"><span class="lineNumber">&nbsp;9164&nbsp;</span>				if&nbsp;(startParam)&nbsp;{<a name="line_9164"></a></li>
<li id="line_9165" class="odd"><span class="lineNumber">&nbsp;9165&nbsp;</span>					data[startParam]&nbsp;=&nbsp;rangeStart.format();<a name="line_9165"></a></li>
<li id="line_9166" class="even"><span class="lineNumber">&nbsp;9166&nbsp;</span>				}<a name="line_9166"></a></li>
<li id="line_9167" class="odd"><span class="lineNumber">&nbsp;9167&nbsp;</span>				if&nbsp;(endParam)&nbsp;{<a name="line_9167"></a></li>
<li id="line_9168" class="even"><span class="lineNumber">&nbsp;9168&nbsp;</span>					data[endParam]&nbsp;=&nbsp;rangeEnd.format();<a name="line_9168"></a></li>
<li id="line_9169" class="odd"><span class="lineNumber">&nbsp;9169&nbsp;</span>				}<a name="line_9169"></a></li>
<li id="line_9170" class="even"><span class="lineNumber">&nbsp;9170&nbsp;</span>				if&nbsp;(options.timezone&nbsp;&amp;&amp;&nbsp;options.timezone&nbsp;!=&nbsp;'local')&nbsp;{<a name="line_9170"></a></li>
<li id="line_9171" class="odd"><span class="lineNumber">&nbsp;9171&nbsp;</span>					data[timezoneParam]&nbsp;=&nbsp;options.timezone;<a name="line_9171"></a></li>
<li id="line_9172" class="even"><span class="lineNumber">&nbsp;9172&nbsp;</span>				}<a name="line_9172"></a></li>
<li id="line_9173" class="odd"><span class="lineNumber">&nbsp;9173&nbsp;</span><a name="line_9173"></a></li>
<li id="line_9174" class="even"><span class="lineNumber">&nbsp;9174&nbsp;</span>				t.pushLoading();<a name="line_9174"></a></li>
<li id="line_9175" class="odd"><span class="lineNumber">&nbsp;9175&nbsp;</span>				$.ajax($.extend({},&nbsp;ajaxDefaults,&nbsp;source,&nbsp;{<a name="line_9175"></a></li>
<li id="line_9176" class="even"><span class="lineNumber">&nbsp;9176&nbsp;</span>					data:&nbsp;data,<a name="line_9176"></a></li>
<li id="line_9177" class="odd"><span class="lineNumber">&nbsp;9177&nbsp;</span>					success:&nbsp;function(events)&nbsp;{<a name="line_9177"></a></li>
<li id="line_9178" class="even"><span class="lineNumber">&nbsp;9178&nbsp;</span>						events&nbsp;=&nbsp;events&nbsp;||&nbsp;[];<a name="line_9178"></a></li>
<li id="line_9179" class="odd"><span class="lineNumber">&nbsp;9179&nbsp;</span>						var&nbsp;res&nbsp;=&nbsp;applyAll(success,&nbsp;this,&nbsp;arguments);<a name="line_9179"></a></li>
<li id="line_9180" class="even"><span class="lineNumber">&nbsp;9180&nbsp;</span>						if&nbsp;($.isArray(res))&nbsp;{<a name="line_9180"></a></li>
<li id="line_9181" class="odd"><span class="lineNumber">&nbsp;9181&nbsp;</span>							events&nbsp;=&nbsp;res;<a name="line_9181"></a></li>
<li id="line_9182" class="even"><span class="lineNumber">&nbsp;9182&nbsp;</span>						}<a name="line_9182"></a></li>
<li id="line_9183" class="odd"><span class="lineNumber">&nbsp;9183&nbsp;</span>						callback(events);<a name="line_9183"></a></li>
<li id="line_9184" class="even"><span class="lineNumber">&nbsp;9184&nbsp;</span>					},<a name="line_9184"></a></li>
<li id="line_9185" class="odd"><span class="lineNumber">&nbsp;9185&nbsp;</span>					error:&nbsp;function()&nbsp;{<a name="line_9185"></a></li>
<li id="line_9186" class="even"><span class="lineNumber">&nbsp;9186&nbsp;</span>						applyAll(error,&nbsp;this,&nbsp;arguments);<a name="line_9186"></a></li>
<li id="line_9187" class="odd"><span class="lineNumber">&nbsp;9187&nbsp;</span>						callback();<a name="line_9187"></a></li>
<li id="line_9188" class="even"><span class="lineNumber">&nbsp;9188&nbsp;</span>					},<a name="line_9188"></a></li>
<li id="line_9189" class="odd"><span class="lineNumber">&nbsp;9189&nbsp;</span>					complete:&nbsp;function()&nbsp;{<a name="line_9189"></a></li>
<li id="line_9190" class="even"><span class="lineNumber">&nbsp;9190&nbsp;</span>						applyAll(complete,&nbsp;this,&nbsp;arguments);<a name="line_9190"></a></li>
<li id="line_9191" class="odd"><span class="lineNumber">&nbsp;9191&nbsp;</span>						t.popLoading();<a name="line_9191"></a></li>
<li id="line_9192" class="even"><span class="lineNumber">&nbsp;9192&nbsp;</span>					}<a name="line_9192"></a></li>
<li id="line_9193" class="odd"><span class="lineNumber">&nbsp;9193&nbsp;</span>				}));<a name="line_9193"></a></li>
<li id="line_9194" class="even"><span class="lineNumber">&nbsp;9194&nbsp;</span>			}else{<a name="line_9194"></a></li>
<li id="line_9195" class="odd"><span class="lineNumber">&nbsp;9195&nbsp;</span>				callback();<a name="line_9195"></a></li>
<li id="line_9196" class="even"><span class="lineNumber">&nbsp;9196&nbsp;</span>			}<a name="line_9196"></a></li>
<li id="line_9197" class="odd"><span class="lineNumber">&nbsp;9197&nbsp;</span>		}<a name="line_9197"></a></li>
<li id="line_9198" class="even"><span class="lineNumber">&nbsp;9198&nbsp;</span>	}<a name="line_9198"></a></li>
<li id="line_9199" class="odd"><span class="lineNumber">&nbsp;9199&nbsp;</span>	<a name="line_9199"></a></li>
<li id="line_9200" class="even"><span class="lineNumber">&nbsp;9200&nbsp;</span>	<a name="line_9200"></a></li>
<li id="line_9201" class="odd"><span class="lineNumber">&nbsp;9201&nbsp;</span>	<a name="line_9201"></a></li>
<li id="line_9202" class="even"><span class="lineNumber">&nbsp;9202&nbsp;</span>	/*&nbsp;Sources<a name="line_9202"></a></li>
<li id="line_9203" class="odd"><span class="lineNumber">&nbsp;9203&nbsp;</span>	-----------------------------------------------------------------------------*/<a name="line_9203"></a></li>
<li id="line_9204" class="even"><span class="lineNumber">&nbsp;9204&nbsp;</span>	<a name="line_9204"></a></li>
<li id="line_9205" class="odd"><span class="lineNumber">&nbsp;9205&nbsp;</span><a name="line_9205"></a></li>
<li id="line_9206" class="even"><span class="lineNumber">&nbsp;9206&nbsp;</span>	function&nbsp;addEventSource(sourceInput)&nbsp;{<a name="line_9206"></a></li>
<li id="line_9207" class="odd"><span class="lineNumber">&nbsp;9207&nbsp;</span>		var&nbsp;source&nbsp;=&nbsp;buildEventSource(sourceInput);<a name="line_9207"></a></li>
<li id="line_9208" class="even"><span class="lineNumber">&nbsp;9208&nbsp;</span>		if&nbsp;(source)&nbsp;{<a name="line_9208"></a></li>
<li id="line_9209" class="odd"><span class="lineNumber">&nbsp;9209&nbsp;</span>			sources.push(source);<a name="line_9209"></a></li>
<li id="line_9210" class="even"><span class="lineNumber">&nbsp;9210&nbsp;</span>			pendingSourceCnt++;<a name="line_9210"></a></li>
<li id="line_9211" class="odd"><span class="lineNumber">&nbsp;9211&nbsp;</span>			fetchEventSource(source,&nbsp;currentFetchID);&nbsp;//&nbsp;will&nbsp;eventually&nbsp;call&nbsp;reportEvents<a name="line_9211"></a></li>
<li id="line_9212" class="even"><span class="lineNumber">&nbsp;9212&nbsp;</span>		}<a name="line_9212"></a></li>
<li id="line_9213" class="odd"><span class="lineNumber">&nbsp;9213&nbsp;</span>	}<a name="line_9213"></a></li>
<li id="line_9214" class="even"><span class="lineNumber">&nbsp;9214&nbsp;</span><a name="line_9214"></a></li>
<li id="line_9215" class="odd"><span class="lineNumber">&nbsp;9215&nbsp;</span><a name="line_9215"></a></li>
<li id="line_9216" class="even"><span class="lineNumber">&nbsp;9216&nbsp;</span>	function&nbsp;buildEventSource(sourceInput)&nbsp;{&nbsp;//&nbsp;will&nbsp;return&nbsp;undefined&nbsp;if&nbsp;invalid&nbsp;source<a name="line_9216"></a></li>
<li id="line_9217" class="odd"><span class="lineNumber">&nbsp;9217&nbsp;</span>		var&nbsp;normalizers&nbsp;=&nbsp;fc.sourceNormalizers;<a name="line_9217"></a></li>
<li id="line_9218" class="even"><span class="lineNumber">&nbsp;9218&nbsp;</span>		var&nbsp;source;<a name="line_9218"></a></li>
<li id="line_9219" class="odd"><span class="lineNumber">&nbsp;9219&nbsp;</span>		var&nbsp;i;<a name="line_9219"></a></li>
<li id="line_9220" class="even"><span class="lineNumber">&nbsp;9220&nbsp;</span><a name="line_9220"></a></li>
<li id="line_9221" class="odd"><span class="lineNumber">&nbsp;9221&nbsp;</span>		if&nbsp;($.isFunction(sourceInput)&nbsp;||&nbsp;$.isArray(sourceInput))&nbsp;{<a name="line_9221"></a></li>
<li id="line_9222" class="even"><span class="lineNumber">&nbsp;9222&nbsp;</span>			source&nbsp;=&nbsp;{&nbsp;events:&nbsp;sourceInput&nbsp;};<a name="line_9222"></a></li>
<li id="line_9223" class="odd"><span class="lineNumber">&nbsp;9223&nbsp;</span>		}<a name="line_9223"></a></li>
<li id="line_9224" class="even"><span class="lineNumber">&nbsp;9224&nbsp;</span>		else&nbsp;if&nbsp;(typeof&nbsp;sourceInput&nbsp;===&nbsp;'string')&nbsp;{<a name="line_9224"></a></li>
<li id="line_9225" class="odd"><span class="lineNumber">&nbsp;9225&nbsp;</span>			source&nbsp;=&nbsp;{&nbsp;url:&nbsp;sourceInput&nbsp;};<a name="line_9225"></a></li>
<li id="line_9226" class="even"><span class="lineNumber">&nbsp;9226&nbsp;</span>		}<a name="line_9226"></a></li>
<li id="line_9227" class="odd"><span class="lineNumber">&nbsp;9227&nbsp;</span>		else&nbsp;if&nbsp;(typeof&nbsp;sourceInput&nbsp;===&nbsp;'object')&nbsp;{<a name="line_9227"></a></li>
<li id="line_9228" class="even"><span class="lineNumber">&nbsp;9228&nbsp;</span>			source&nbsp;=&nbsp;$.extend({},&nbsp;sourceInput);&nbsp;//&nbsp;shallow&nbsp;copy<a name="line_9228"></a></li>
<li id="line_9229" class="odd"><span class="lineNumber">&nbsp;9229&nbsp;</span>		}<a name="line_9229"></a></li>
<li id="line_9230" class="even"><span class="lineNumber">&nbsp;9230&nbsp;</span><a name="line_9230"></a></li>
<li id="line_9231" class="odd"><span class="lineNumber">&nbsp;9231&nbsp;</span>		if&nbsp;(source)&nbsp;{<a name="line_9231"></a></li>
<li id="line_9232" class="even"><span class="lineNumber">&nbsp;9232&nbsp;</span><a name="line_9232"></a></li>
<li id="line_9233" class="odd"><span class="lineNumber">&nbsp;9233&nbsp;</span>			//&nbsp;TODO:&nbsp;repeat&nbsp;code,&nbsp;same&nbsp;code&nbsp;for&nbsp;event&nbsp;classNames<a name="line_9233"></a></li>
<li id="line_9234" class="even"><span class="lineNumber">&nbsp;9234&nbsp;</span>			if&nbsp;(source.className)&nbsp;{<a name="line_9234"></a></li>
<li id="line_9235" class="odd"><span class="lineNumber">&nbsp;9235&nbsp;</span>				if&nbsp;(typeof&nbsp;source.className&nbsp;===&nbsp;'string')&nbsp;{<a name="line_9235"></a></li>
<li id="line_9236" class="even"><span class="lineNumber">&nbsp;9236&nbsp;</span>					source.className&nbsp;=&nbsp;source.className.split(/\s+/);<a name="line_9236"></a></li>
<li id="line_9237" class="odd"><span class="lineNumber">&nbsp;9237&nbsp;</span>				}<a name="line_9237"></a></li>
<li id="line_9238" class="even"><span class="lineNumber">&nbsp;9238&nbsp;</span>				//&nbsp;otherwise,&nbsp;assumed&nbsp;to&nbsp;be&nbsp;an&nbsp;array<a name="line_9238"></a></li>
<li id="line_9239" class="odd"><span class="lineNumber">&nbsp;9239&nbsp;</span>			}<a name="line_9239"></a></li>
<li id="line_9240" class="even"><span class="lineNumber">&nbsp;9240&nbsp;</span>			else&nbsp;{<a name="line_9240"></a></li>
<li id="line_9241" class="odd"><span class="lineNumber">&nbsp;9241&nbsp;</span>				source.className&nbsp;=&nbsp;[];<a name="line_9241"></a></li>
<li id="line_9242" class="even"><span class="lineNumber">&nbsp;9242&nbsp;</span>			}<a name="line_9242"></a></li>
<li id="line_9243" class="odd"><span class="lineNumber">&nbsp;9243&nbsp;</span><a name="line_9243"></a></li>
<li id="line_9244" class="even"><span class="lineNumber">&nbsp;9244&nbsp;</span>			//&nbsp;for&nbsp;array&nbsp;sources,&nbsp;we&nbsp;convert&nbsp;to&nbsp;standard&nbsp;Event&nbsp;Objects&nbsp;up&nbsp;front<a name="line_9244"></a></li>
<li id="line_9245" class="odd"><span class="lineNumber">&nbsp;9245&nbsp;</span>			if&nbsp;($.isArray(source.events))&nbsp;{<a name="line_9245"></a></li>
<li id="line_9246" class="even"><span class="lineNumber">&nbsp;9246&nbsp;</span>				source.origArray&nbsp;=&nbsp;source.events;&nbsp;//&nbsp;for&nbsp;removeEventSource<a name="line_9246"></a></li>
<li id="line_9247" class="odd"><span class="lineNumber">&nbsp;9247&nbsp;</span>				source.events&nbsp;=&nbsp;$.map(source.events,&nbsp;function(eventInput)&nbsp;{<a name="line_9247"></a></li>
<li id="line_9248" class="even"><span class="lineNumber">&nbsp;9248&nbsp;</span>					return&nbsp;buildEventFromInput(eventInput,&nbsp;source);<a name="line_9248"></a></li>
<li id="line_9249" class="odd"><span class="lineNumber">&nbsp;9249&nbsp;</span>				});<a name="line_9249"></a></li>
<li id="line_9250" class="even"><span class="lineNumber">&nbsp;9250&nbsp;</span>			}<a name="line_9250"></a></li>
<li id="line_9251" class="odd"><span class="lineNumber">&nbsp;9251&nbsp;</span><a name="line_9251"></a></li>
<li id="line_9252" class="even"><span class="lineNumber">&nbsp;9252&nbsp;</span>			for&nbsp;(i=0;&nbsp;i&lt;normalizers.length;&nbsp;i++)&nbsp;{<a name="line_9252"></a></li>
<li id="line_9253" class="odd"><span class="lineNumber">&nbsp;9253&nbsp;</span>				normalizers[i].call(t,&nbsp;source);<a name="line_9253"></a></li>
<li id="line_9254" class="even"><span class="lineNumber">&nbsp;9254&nbsp;</span>			}<a name="line_9254"></a></li>
<li id="line_9255" class="odd"><span class="lineNumber">&nbsp;9255&nbsp;</span><a name="line_9255"></a></li>
<li id="line_9256" class="even"><span class="lineNumber">&nbsp;9256&nbsp;</span>			return&nbsp;source;<a name="line_9256"></a></li>
<li id="line_9257" class="odd"><span class="lineNumber">&nbsp;9257&nbsp;</span>		}<a name="line_9257"></a></li>
<li id="line_9258" class="even"><span class="lineNumber">&nbsp;9258&nbsp;</span>	}<a name="line_9258"></a></li>
<li id="line_9259" class="odd"><span class="lineNumber">&nbsp;9259&nbsp;</span><a name="line_9259"></a></li>
<li id="line_9260" class="even"><span class="lineNumber">&nbsp;9260&nbsp;</span><a name="line_9260"></a></li>
<li id="line_9261" class="odd"><span class="lineNumber">&nbsp;9261&nbsp;</span>	function&nbsp;removeEventSource(source)&nbsp;{<a name="line_9261"></a></li>
<li id="line_9262" class="even"><span class="lineNumber">&nbsp;9262&nbsp;</span>		sources&nbsp;=&nbsp;$.grep(sources,&nbsp;function(src)&nbsp;{<a name="line_9262"></a></li>
<li id="line_9263" class="odd"><span class="lineNumber">&nbsp;9263&nbsp;</span>			return&nbsp;!isSourcesEqual(src,&nbsp;source);<a name="line_9263"></a></li>
<li id="line_9264" class="even"><span class="lineNumber">&nbsp;9264&nbsp;</span>		});<a name="line_9264"></a></li>
<li id="line_9265" class="odd"><span class="lineNumber">&nbsp;9265&nbsp;</span>		//&nbsp;remove&nbsp;all&nbsp;client&nbsp;events&nbsp;from&nbsp;that&nbsp;source<a name="line_9265"></a></li>
<li id="line_9266" class="even"><span class="lineNumber">&nbsp;9266&nbsp;</span>		cache&nbsp;=&nbsp;$.grep(cache,&nbsp;function(e)&nbsp;{<a name="line_9266"></a></li>
<li id="line_9267" class="odd"><span class="lineNumber">&nbsp;9267&nbsp;</span>			return&nbsp;!isSourcesEqual(e.source,&nbsp;source);<a name="line_9267"></a></li>
<li id="line_9268" class="even"><span class="lineNumber">&nbsp;9268&nbsp;</span>		});<a name="line_9268"></a></li>
<li id="line_9269" class="odd"><span class="lineNumber">&nbsp;9269&nbsp;</span>		reportEvents(cache);<a name="line_9269"></a></li>
<li id="line_9270" class="even"><span class="lineNumber">&nbsp;9270&nbsp;</span>	}<a name="line_9270"></a></li>
<li id="line_9271" class="odd"><span class="lineNumber">&nbsp;9271&nbsp;</span><a name="line_9271"></a></li>
<li id="line_9272" class="even"><span class="lineNumber">&nbsp;9272&nbsp;</span><a name="line_9272"></a></li>
<li id="line_9273" class="odd"><span class="lineNumber">&nbsp;9273&nbsp;</span>	function&nbsp;isSourcesEqual(source1,&nbsp;source2)&nbsp;{<a name="line_9273"></a></li>
<li id="line_9274" class="even"><span class="lineNumber">&nbsp;9274&nbsp;</span>		return&nbsp;source1&nbsp;&amp;&amp;&nbsp;source2&nbsp;&amp;&amp;&nbsp;getSourcePrimitive(source1)&nbsp;==&nbsp;getSourcePrimitive(source2);<a name="line_9274"></a></li>
<li id="line_9275" class="odd"><span class="lineNumber">&nbsp;9275&nbsp;</span>	}<a name="line_9275"></a></li>
<li id="line_9276" class="even"><span class="lineNumber">&nbsp;9276&nbsp;</span><a name="line_9276"></a></li>
<li id="line_9277" class="odd"><span class="lineNumber">&nbsp;9277&nbsp;</span><a name="line_9277"></a></li>
<li id="line_9278" class="even"><span class="lineNumber">&nbsp;9278&nbsp;</span>	function&nbsp;getSourcePrimitive(source)&nbsp;{<a name="line_9278"></a></li>
<li id="line_9279" class="odd"><span class="lineNumber">&nbsp;9279&nbsp;</span>		return&nbsp;(<a name="line_9279"></a></li>
<li id="line_9280" class="even"><span class="lineNumber">&nbsp;9280&nbsp;</span>			(typeof&nbsp;source&nbsp;===&nbsp;'object')&nbsp;?&nbsp;//&nbsp;a&nbsp;normalized&nbsp;event&nbsp;source?<a name="line_9280"></a></li>
<li id="line_9281" class="odd"><span class="lineNumber">&nbsp;9281&nbsp;</span>				(source.origArray&nbsp;||&nbsp;source.googleCalendarId&nbsp;||&nbsp;source.url&nbsp;||&nbsp;source.events)&nbsp;:&nbsp;//&nbsp;get&nbsp;the&nbsp;primitive<a name="line_9281"></a></li>
<li id="line_9282" class="even"><span class="lineNumber">&nbsp;9282&nbsp;</span>				null<a name="line_9282"></a></li>
<li id="line_9283" class="odd"><span class="lineNumber">&nbsp;9283&nbsp;</span>		)&nbsp;||<a name="line_9283"></a></li>
<li id="line_9284" class="even"><span class="lineNumber">&nbsp;9284&nbsp;</span>		source;&nbsp;//&nbsp;the&nbsp;given&nbsp;argument&nbsp;*is*&nbsp;the&nbsp;primitive<a name="line_9284"></a></li>
<li id="line_9285" class="odd"><span class="lineNumber">&nbsp;9285&nbsp;</span>	}<a name="line_9285"></a></li>
<li id="line_9286" class="even"><span class="lineNumber">&nbsp;9286&nbsp;</span>	<a name="line_9286"></a></li>
<li id="line_9287" class="odd"><span class="lineNumber">&nbsp;9287&nbsp;</span>	<a name="line_9287"></a></li>
<li id="line_9288" class="even"><span class="lineNumber">&nbsp;9288&nbsp;</span>	<a name="line_9288"></a></li>
<li id="line_9289" class="odd"><span class="lineNumber">&nbsp;9289&nbsp;</span>	/*&nbsp;Manipulation<a name="line_9289"></a></li>
<li id="line_9290" class="even"><span class="lineNumber">&nbsp;9290&nbsp;</span>	-----------------------------------------------------------------------------*/<a name="line_9290"></a></li>
<li id="line_9291" class="odd"><span class="lineNumber">&nbsp;9291&nbsp;</span><a name="line_9291"></a></li>
<li id="line_9292" class="even"><span class="lineNumber">&nbsp;9292&nbsp;</span><a name="line_9292"></a></li>
<li id="line_9293" class="odd"><span class="lineNumber">&nbsp;9293&nbsp;</span>	//&nbsp;Only&nbsp;ever&nbsp;called&nbsp;from&nbsp;the&nbsp;externally-facing&nbsp;API<a name="line_9293"></a></li>
<li id="line_9294" class="even"><span class="lineNumber">&nbsp;9294&nbsp;</span>	function&nbsp;updateEvent(event)&nbsp;{<a name="line_9294"></a></li>
<li id="line_9295" class="odd"><span class="lineNumber">&nbsp;9295&nbsp;</span><a name="line_9295"></a></li>
<li id="line_9296" class="even"><span class="lineNumber">&nbsp;9296&nbsp;</span>		//&nbsp;massage&nbsp;start/end&nbsp;values,&nbsp;even&nbsp;if&nbsp;date&nbsp;string&nbsp;values<a name="line_9296"></a></li>
<li id="line_9297" class="odd"><span class="lineNumber">&nbsp;9297&nbsp;</span>		event.start&nbsp;=&nbsp;t.moment(event.start);<a name="line_9297"></a></li>
<li id="line_9298" class="even"><span class="lineNumber">&nbsp;9298&nbsp;</span>		if&nbsp;(event.end)&nbsp;{<a name="line_9298"></a></li>
<li id="line_9299" class="odd"><span class="lineNumber">&nbsp;9299&nbsp;</span>			event.end&nbsp;=&nbsp;t.moment(event.end);<a name="line_9299"></a></li>
<li id="line_9300" class="even"><span class="lineNumber">&nbsp;9300&nbsp;</span>		}<a name="line_9300"></a></li>
<li id="line_9301" class="odd"><span class="lineNumber">&nbsp;9301&nbsp;</span>		else&nbsp;{<a name="line_9301"></a></li>
<li id="line_9302" class="even"><span class="lineNumber">&nbsp;9302&nbsp;</span>			event.end&nbsp;=&nbsp;null;<a name="line_9302"></a></li>
<li id="line_9303" class="odd"><span class="lineNumber">&nbsp;9303&nbsp;</span>		}<a name="line_9303"></a></li>
<li id="line_9304" class="even"><span class="lineNumber">&nbsp;9304&nbsp;</span><a name="line_9304"></a></li>
<li id="line_9305" class="odd"><span class="lineNumber">&nbsp;9305&nbsp;</span>		mutateEvent(event,&nbsp;getMiscEventProps(event));&nbsp;//&nbsp;will&nbsp;handle&nbsp;start/end/allDay&nbsp;normalization<a name="line_9305"></a></li>
<li id="line_9306" class="even"><span class="lineNumber">&nbsp;9306&nbsp;</span>		reportEvents(cache);&nbsp;//&nbsp;reports&nbsp;event&nbsp;modifications&nbsp;(so&nbsp;we&nbsp;can&nbsp;redraw)<a name="line_9306"></a></li>
<li id="line_9307" class="odd"><span class="lineNumber">&nbsp;9307&nbsp;</span>	}<a name="line_9307"></a></li>
<li id="line_9308" class="even"><span class="lineNumber">&nbsp;9308&nbsp;</span><a name="line_9308"></a></li>
<li id="line_9309" class="odd"><span class="lineNumber">&nbsp;9309&nbsp;</span><a name="line_9309"></a></li>
<li id="line_9310" class="even"><span class="lineNumber">&nbsp;9310&nbsp;</span>	//&nbsp;Returns&nbsp;a&nbsp;hash&nbsp;of&nbsp;misc&nbsp;event&nbsp;properties&nbsp;that&nbsp;should&nbsp;be&nbsp;copied&nbsp;over&nbsp;to&nbsp;related&nbsp;events.<a name="line_9310"></a></li>
<li id="line_9311" class="odd"><span class="lineNumber">&nbsp;9311&nbsp;</span>	function&nbsp;getMiscEventProps(event)&nbsp;{<a name="line_9311"></a></li>
<li id="line_9312" class="even"><span class="lineNumber">&nbsp;9312&nbsp;</span>		var&nbsp;props&nbsp;=&nbsp;{};<a name="line_9312"></a></li>
<li id="line_9313" class="odd"><span class="lineNumber">&nbsp;9313&nbsp;</span><a name="line_9313"></a></li>
<li id="line_9314" class="even"><span class="lineNumber">&nbsp;9314&nbsp;</span>		$.each(event,&nbsp;function(name,&nbsp;val)&nbsp;{<a name="line_9314"></a></li>
<li id="line_9315" class="odd"><span class="lineNumber">&nbsp;9315&nbsp;</span>			if&nbsp;(isMiscEventPropName(name))&nbsp;{<a name="line_9315"></a></li>
<li id="line_9316" class="even"><span class="lineNumber">&nbsp;9316&nbsp;</span>				if&nbsp;(val&nbsp;!==&nbsp;undefined&nbsp;&amp;&amp;&nbsp;isAtomic(val))&nbsp;{&nbsp;//&nbsp;a&nbsp;defined&nbsp;non-object<a name="line_9316"></a></li>
<li id="line_9317" class="odd"><span class="lineNumber">&nbsp;9317&nbsp;</span>					props[name]&nbsp;=&nbsp;val;<a name="line_9317"></a></li>
<li id="line_9318" class="even"><span class="lineNumber">&nbsp;9318&nbsp;</span>				}<a name="line_9318"></a></li>
<li id="line_9319" class="odd"><span class="lineNumber">&nbsp;9319&nbsp;</span>			}<a name="line_9319"></a></li>
<li id="line_9320" class="even"><span class="lineNumber">&nbsp;9320&nbsp;</span>		});<a name="line_9320"></a></li>
<li id="line_9321" class="odd"><span class="lineNumber">&nbsp;9321&nbsp;</span><a name="line_9321"></a></li>
<li id="line_9322" class="even"><span class="lineNumber">&nbsp;9322&nbsp;</span>		return&nbsp;props;<a name="line_9322"></a></li>
<li id="line_9323" class="odd"><span class="lineNumber">&nbsp;9323&nbsp;</span>	}<a name="line_9323"></a></li>
<li id="line_9324" class="even"><span class="lineNumber">&nbsp;9324&nbsp;</span><a name="line_9324"></a></li>
<li id="line_9325" class="odd"><span class="lineNumber">&nbsp;9325&nbsp;</span>	//&nbsp;non-date-related,&nbsp;non-id-related,&nbsp;non-secret<a name="line_9325"></a></li>
<li id="line_9326" class="even"><span class="lineNumber">&nbsp;9326&nbsp;</span>	function&nbsp;isMiscEventPropName(name)&nbsp;{<a name="line_9326"></a></li>
<li id="line_9327" class="odd"><span class="lineNumber">&nbsp;9327&nbsp;</span>		return&nbsp;!/^_|^(id|allDay|start|end)$/.test(name);<a name="line_9327"></a></li>
<li id="line_9328" class="even"><span class="lineNumber">&nbsp;9328&nbsp;</span>	}<a name="line_9328"></a></li>
<li id="line_9329" class="odd"><span class="lineNumber">&nbsp;9329&nbsp;</span><a name="line_9329"></a></li>
<li id="line_9330" class="even"><span class="lineNumber">&nbsp;9330&nbsp;</span>	<a name="line_9330"></a></li>
<li id="line_9331" class="odd"><span class="lineNumber">&nbsp;9331&nbsp;</span>	//&nbsp;returns&nbsp;the&nbsp;expanded&nbsp;events&nbsp;that&nbsp;were&nbsp;created<a name="line_9331"></a></li>
<li id="line_9332" class="even"><span class="lineNumber">&nbsp;9332&nbsp;</span>	function&nbsp;renderEvent(eventInput,&nbsp;stick)&nbsp;{<a name="line_9332"></a></li>
<li id="line_9333" class="odd"><span class="lineNumber">&nbsp;9333&nbsp;</span>		var&nbsp;abstractEvent&nbsp;=&nbsp;buildEventFromInput(eventInput);<a name="line_9333"></a></li>
<li id="line_9334" class="even"><span class="lineNumber">&nbsp;9334&nbsp;</span>		var&nbsp;events;<a name="line_9334"></a></li>
<li id="line_9335" class="odd"><span class="lineNumber">&nbsp;9335&nbsp;</span>		var&nbsp;i,&nbsp;event;<a name="line_9335"></a></li>
<li id="line_9336" class="even"><span class="lineNumber">&nbsp;9336&nbsp;</span><a name="line_9336"></a></li>
<li id="line_9337" class="odd"><span class="lineNumber">&nbsp;9337&nbsp;</span>		if&nbsp;(abstractEvent)&nbsp;{&nbsp;//&nbsp;not&nbsp;false&nbsp;(a&nbsp;valid&nbsp;input)<a name="line_9337"></a></li>
<li id="line_9338" class="even"><span class="lineNumber">&nbsp;9338&nbsp;</span>			events&nbsp;=&nbsp;expandEvent(abstractEvent);<a name="line_9338"></a></li>
<li id="line_9339" class="odd"><span class="lineNumber">&nbsp;9339&nbsp;</span><a name="line_9339"></a></li>
<li id="line_9340" class="even"><span class="lineNumber">&nbsp;9340&nbsp;</span>			for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;events.length;&nbsp;i++)&nbsp;{<a name="line_9340"></a></li>
<li id="line_9341" class="odd"><span class="lineNumber">&nbsp;9341&nbsp;</span>				event&nbsp;=&nbsp;events[i];<a name="line_9341"></a></li>
<li id="line_9342" class="even"><span class="lineNumber">&nbsp;9342&nbsp;</span><a name="line_9342"></a></li>
<li id="line_9343" class="odd"><span class="lineNumber">&nbsp;9343&nbsp;</span>				if&nbsp;(!event.source)&nbsp;{<a name="line_9343"></a></li>
<li id="line_9344" class="even"><span class="lineNumber">&nbsp;9344&nbsp;</span>					if&nbsp;(stick)&nbsp;{<a name="line_9344"></a></li>
<li id="line_9345" class="odd"><span class="lineNumber">&nbsp;9345&nbsp;</span>						stickySource.events.push(event);<a name="line_9345"></a></li>
<li id="line_9346" class="even"><span class="lineNumber">&nbsp;9346&nbsp;</span>						event.source&nbsp;=&nbsp;stickySource;<a name="line_9346"></a></li>
<li id="line_9347" class="odd"><span class="lineNumber">&nbsp;9347&nbsp;</span>					}<a name="line_9347"></a></li>
<li id="line_9348" class="even"><span class="lineNumber">&nbsp;9348&nbsp;</span>					cache.push(event);<a name="line_9348"></a></li>
<li id="line_9349" class="odd"><span class="lineNumber">&nbsp;9349&nbsp;</span>				}<a name="line_9349"></a></li>
<li id="line_9350" class="even"><span class="lineNumber">&nbsp;9350&nbsp;</span>			}<a name="line_9350"></a></li>
<li id="line_9351" class="odd"><span class="lineNumber">&nbsp;9351&nbsp;</span><a name="line_9351"></a></li>
<li id="line_9352" class="even"><span class="lineNumber">&nbsp;9352&nbsp;</span>			reportEvents(cache);<a name="line_9352"></a></li>
<li id="line_9353" class="odd"><span class="lineNumber">&nbsp;9353&nbsp;</span><a name="line_9353"></a></li>
<li id="line_9354" class="even"><span class="lineNumber">&nbsp;9354&nbsp;</span>			return&nbsp;events;<a name="line_9354"></a></li>
<li id="line_9355" class="odd"><span class="lineNumber">&nbsp;9355&nbsp;</span>		}<a name="line_9355"></a></li>
<li id="line_9356" class="even"><span class="lineNumber">&nbsp;9356&nbsp;</span><a name="line_9356"></a></li>
<li id="line_9357" class="odd"><span class="lineNumber">&nbsp;9357&nbsp;</span>		return&nbsp;[];<a name="line_9357"></a></li>
<li id="line_9358" class="even"><span class="lineNumber">&nbsp;9358&nbsp;</span>	}<a name="line_9358"></a></li>
<li id="line_9359" class="odd"><span class="lineNumber">&nbsp;9359&nbsp;</span>	<a name="line_9359"></a></li>
<li id="line_9360" class="even"><span class="lineNumber">&nbsp;9360&nbsp;</span>	<a name="line_9360"></a></li>
<li id="line_9361" class="odd"><span class="lineNumber">&nbsp;9361&nbsp;</span>	function&nbsp;removeEvents(filter)&nbsp;{<a name="line_9361"></a></li>
<li id="line_9362" class="even"><span class="lineNumber">&nbsp;9362&nbsp;</span>		var&nbsp;eventID;<a name="line_9362"></a></li>
<li id="line_9363" class="odd"><span class="lineNumber">&nbsp;9363&nbsp;</span>		var&nbsp;i;<a name="line_9363"></a></li>
<li id="line_9364" class="even"><span class="lineNumber">&nbsp;9364&nbsp;</span><a name="line_9364"></a></li>
<li id="line_9365" class="odd"><span class="lineNumber">&nbsp;9365&nbsp;</span>		if&nbsp;(filter&nbsp;==&nbsp;null)&nbsp;{&nbsp;//&nbsp;null&nbsp;or&nbsp;undefined.&nbsp;remove&nbsp;all&nbsp;events<a name="line_9365"></a></li>
<li id="line_9366" class="even"><span class="lineNumber">&nbsp;9366&nbsp;</span>			filter&nbsp;=&nbsp;function()&nbsp;{&nbsp;return&nbsp;true;&nbsp;};&nbsp;//&nbsp;will&nbsp;always&nbsp;match<a name="line_9366"></a></li>
<li id="line_9367" class="odd"><span class="lineNumber">&nbsp;9367&nbsp;</span>		}<a name="line_9367"></a></li>
<li id="line_9368" class="even"><span class="lineNumber">&nbsp;9368&nbsp;</span>		else&nbsp;if&nbsp;(!$.isFunction(filter))&nbsp;{&nbsp;//&nbsp;an&nbsp;event&nbsp;ID<a name="line_9368"></a></li>
<li id="line_9369" class="odd"><span class="lineNumber">&nbsp;9369&nbsp;</span>			eventID&nbsp;=&nbsp;filter&nbsp;+&nbsp;'';<a name="line_9369"></a></li>
<li id="line_9370" class="even"><span class="lineNumber">&nbsp;9370&nbsp;</span>			filter&nbsp;=&nbsp;function(event)&nbsp;{<a name="line_9370"></a></li>
<li id="line_9371" class="odd"><span class="lineNumber">&nbsp;9371&nbsp;</span>				return&nbsp;event._id&nbsp;==&nbsp;eventID;<a name="line_9371"></a></li>
<li id="line_9372" class="even"><span class="lineNumber">&nbsp;9372&nbsp;</span>			};<a name="line_9372"></a></li>
<li id="line_9373" class="odd"><span class="lineNumber">&nbsp;9373&nbsp;</span>		}<a name="line_9373"></a></li>
<li id="line_9374" class="even"><span class="lineNumber">&nbsp;9374&nbsp;</span><a name="line_9374"></a></li>
<li id="line_9375" class="odd"><span class="lineNumber">&nbsp;9375&nbsp;</span>		//&nbsp;Purge&nbsp;event(s)&nbsp;from&nbsp;our&nbsp;local&nbsp;cache<a name="line_9375"></a></li>
<li id="line_9376" class="even"><span class="lineNumber">&nbsp;9376&nbsp;</span>		cache&nbsp;=&nbsp;$.grep(cache,&nbsp;filter,&nbsp;true);&nbsp;//&nbsp;inverse=true<a name="line_9376"></a></li>
<li id="line_9377" class="odd"><span class="lineNumber">&nbsp;9377&nbsp;</span><a name="line_9377"></a></li>
<li id="line_9378" class="even"><span class="lineNumber">&nbsp;9378&nbsp;</span>		//&nbsp;Remove&nbsp;events&nbsp;from&nbsp;array&nbsp;sources.<a name="line_9378"></a></li>
<li id="line_9379" class="odd"><span class="lineNumber">&nbsp;9379&nbsp;</span>		//&nbsp;This&nbsp;works&nbsp;because&nbsp;they&nbsp;have&nbsp;been&nbsp;converted&nbsp;to&nbsp;official&nbsp;Event&nbsp;Objects&nbsp;up&nbsp;front.<a name="line_9379"></a></li>
<li id="line_9380" class="even"><span class="lineNumber">&nbsp;9380&nbsp;</span>		//&nbsp;(and&nbsp;as&nbsp;a&nbsp;result,&nbsp;event._id&nbsp;has&nbsp;been&nbsp;calculated).<a name="line_9380"></a></li>
<li id="line_9381" class="odd"><span class="lineNumber">&nbsp;9381&nbsp;</span>		for&nbsp;(i=0;&nbsp;i&lt;sources.length;&nbsp;i++)&nbsp;{<a name="line_9381"></a></li>
<li id="line_9382" class="even"><span class="lineNumber">&nbsp;9382&nbsp;</span>			if&nbsp;($.isArray(sources[i].events))&nbsp;{<a name="line_9382"></a></li>
<li id="line_9383" class="odd"><span class="lineNumber">&nbsp;9383&nbsp;</span>				sources[i].events&nbsp;=&nbsp;$.grep(sources[i].events,&nbsp;filter,&nbsp;true);<a name="line_9383"></a></li>
<li id="line_9384" class="even"><span class="lineNumber">&nbsp;9384&nbsp;</span>			}<a name="line_9384"></a></li>
<li id="line_9385" class="odd"><span class="lineNumber">&nbsp;9385&nbsp;</span>		}<a name="line_9385"></a></li>
<li id="line_9386" class="even"><span class="lineNumber">&nbsp;9386&nbsp;</span><a name="line_9386"></a></li>
<li id="line_9387" class="odd"><span class="lineNumber">&nbsp;9387&nbsp;</span>		reportEvents(cache);<a name="line_9387"></a></li>
<li id="line_9388" class="even"><span class="lineNumber">&nbsp;9388&nbsp;</span>	}<a name="line_9388"></a></li>
<li id="line_9389" class="odd"><span class="lineNumber">&nbsp;9389&nbsp;</span>	<a name="line_9389"></a></li>
<li id="line_9390" class="even"><span class="lineNumber">&nbsp;9390&nbsp;</span>	<a name="line_9390"></a></li>
<li id="line_9391" class="odd"><span class="lineNumber">&nbsp;9391&nbsp;</span>	function&nbsp;clientEvents(filter)&nbsp;{<a name="line_9391"></a></li>
<li id="line_9392" class="even"><span class="lineNumber">&nbsp;9392&nbsp;</span>		if&nbsp;($.isFunction(filter))&nbsp;{<a name="line_9392"></a></li>
<li id="line_9393" class="odd"><span class="lineNumber">&nbsp;9393&nbsp;</span>			return&nbsp;$.grep(cache,&nbsp;filter);<a name="line_9393"></a></li>
<li id="line_9394" class="even"><span class="lineNumber">&nbsp;9394&nbsp;</span>		}<a name="line_9394"></a></li>
<li id="line_9395" class="odd"><span class="lineNumber">&nbsp;9395&nbsp;</span>		else&nbsp;if&nbsp;(filter&nbsp;!=&nbsp;null)&nbsp;{&nbsp;//&nbsp;not&nbsp;null,&nbsp;not&nbsp;undefined.&nbsp;an&nbsp;event&nbsp;ID<a name="line_9395"></a></li>
<li id="line_9396" class="even"><span class="lineNumber">&nbsp;9396&nbsp;</span>			filter&nbsp;+=&nbsp;'';<a name="line_9396"></a></li>
<li id="line_9397" class="odd"><span class="lineNumber">&nbsp;9397&nbsp;</span>			return&nbsp;$.grep(cache,&nbsp;function(e)&nbsp;{<a name="line_9397"></a></li>
<li id="line_9398" class="even"><span class="lineNumber">&nbsp;9398&nbsp;</span>				return&nbsp;e._id&nbsp;==&nbsp;filter;<a name="line_9398"></a></li>
<li id="line_9399" class="odd"><span class="lineNumber">&nbsp;9399&nbsp;</span>			});<a name="line_9399"></a></li>
<li id="line_9400" class="even"><span class="lineNumber">&nbsp;9400&nbsp;</span>		}<a name="line_9400"></a></li>
<li id="line_9401" class="odd"><span class="lineNumber">&nbsp;9401&nbsp;</span>		return&nbsp;cache;&nbsp;//&nbsp;else,&nbsp;return&nbsp;all<a name="line_9401"></a></li>
<li id="line_9402" class="even"><span class="lineNumber">&nbsp;9402&nbsp;</span>	}<a name="line_9402"></a></li>
<li id="line_9403" class="odd"><span class="lineNumber">&nbsp;9403&nbsp;</span>	<a name="line_9403"></a></li>
<li id="line_9404" class="even"><span class="lineNumber">&nbsp;9404&nbsp;</span>	<a name="line_9404"></a></li>
<li id="line_9405" class="odd"><span class="lineNumber">&nbsp;9405&nbsp;</span>	<a name="line_9405"></a></li>
<li id="line_9406" class="even"><span class="lineNumber">&nbsp;9406&nbsp;</span>	/*&nbsp;Event&nbsp;Normalization<a name="line_9406"></a></li>
<li id="line_9407" class="odd"><span class="lineNumber">&nbsp;9407&nbsp;</span>	-----------------------------------------------------------------------------*/<a name="line_9407"></a></li>
<li id="line_9408" class="even"><span class="lineNumber">&nbsp;9408&nbsp;</span><a name="line_9408"></a></li>
<li id="line_9409" class="odd"><span class="lineNumber">&nbsp;9409&nbsp;</span><a name="line_9409"></a></li>
<li id="line_9410" class="even"><span class="lineNumber">&nbsp;9410&nbsp;</span>	//&nbsp;Given&nbsp;a&nbsp;raw&nbsp;object&nbsp;with&nbsp;key/value&nbsp;properties,&nbsp;returns&nbsp;an&nbsp;"abstract"&nbsp;Event&nbsp;object.<a name="line_9410"></a></li>
<li id="line_9411" class="odd"><span class="lineNumber">&nbsp;9411&nbsp;</span>	//&nbsp;An&nbsp;"abstract"&nbsp;event&nbsp;is&nbsp;an&nbsp;event&nbsp;that,&nbsp;if&nbsp;recurring,&nbsp;will&nbsp;not&nbsp;have&nbsp;been&nbsp;expanded&nbsp;yet.<a name="line_9411"></a></li>
<li id="line_9412" class="even"><span class="lineNumber">&nbsp;9412&nbsp;</span>	//&nbsp;Will&nbsp;return&nbsp;`false`&nbsp;when&nbsp;input&nbsp;is&nbsp;invalid.<a name="line_9412"></a></li>
<li id="line_9413" class="odd"><span class="lineNumber">&nbsp;9413&nbsp;</span>	//&nbsp;`source`&nbsp;is&nbsp;optional<a name="line_9413"></a></li>
<li id="line_9414" class="even"><span class="lineNumber">&nbsp;9414&nbsp;</span>	function&nbsp;buildEventFromInput(input,&nbsp;source)&nbsp;{<a name="line_9414"></a></li>
<li id="line_9415" class="odd"><span class="lineNumber">&nbsp;9415&nbsp;</span>		var&nbsp;out&nbsp;=&nbsp;{};<a name="line_9415"></a></li>
<li id="line_9416" class="even"><span class="lineNumber">&nbsp;9416&nbsp;</span>		var&nbsp;start,&nbsp;end;<a name="line_9416"></a></li>
<li id="line_9417" class="odd"><span class="lineNumber">&nbsp;9417&nbsp;</span>		var&nbsp;allDay;<a name="line_9417"></a></li>
<li id="line_9418" class="even"><span class="lineNumber">&nbsp;9418&nbsp;</span><a name="line_9418"></a></li>
<li id="line_9419" class="odd"><span class="lineNumber">&nbsp;9419&nbsp;</span>		if&nbsp;(options.eventDataTransform)&nbsp;{<a name="line_9419"></a></li>
<li id="line_9420" class="even"><span class="lineNumber">&nbsp;9420&nbsp;</span>			input&nbsp;=&nbsp;options.eventDataTransform(input);<a name="line_9420"></a></li>
<li id="line_9421" class="odd"><span class="lineNumber">&nbsp;9421&nbsp;</span>		}<a name="line_9421"></a></li>
<li id="line_9422" class="even"><span class="lineNumber">&nbsp;9422&nbsp;</span>		if&nbsp;(source&nbsp;&amp;&amp;&nbsp;source.eventDataTransform)&nbsp;{<a name="line_9422"></a></li>
<li id="line_9423" class="odd"><span class="lineNumber">&nbsp;9423&nbsp;</span>			input&nbsp;=&nbsp;source.eventDataTransform(input);<a name="line_9423"></a></li>
<li id="line_9424" class="even"><span class="lineNumber">&nbsp;9424&nbsp;</span>		}<a name="line_9424"></a></li>
<li id="line_9425" class="odd"><span class="lineNumber">&nbsp;9425&nbsp;</span><a name="line_9425"></a></li>
<li id="line_9426" class="even"><span class="lineNumber">&nbsp;9426&nbsp;</span>		//&nbsp;Copy&nbsp;all&nbsp;properties&nbsp;over&nbsp;to&nbsp;the&nbsp;resulting&nbsp;object.<a name="line_9426"></a></li>
<li id="line_9427" class="odd"><span class="lineNumber">&nbsp;9427&nbsp;</span>		//&nbsp;The&nbsp;special-case&nbsp;properties&nbsp;will&nbsp;be&nbsp;copied&nbsp;over&nbsp;afterwards.<a name="line_9427"></a></li>
<li id="line_9428" class="even"><span class="lineNumber">&nbsp;9428&nbsp;</span>		$.extend(out,&nbsp;input);<a name="line_9428"></a></li>
<li id="line_9429" class="odd"><span class="lineNumber">&nbsp;9429&nbsp;</span><a name="line_9429"></a></li>
<li id="line_9430" class="even"><span class="lineNumber">&nbsp;9430&nbsp;</span>		if&nbsp;(source)&nbsp;{<a name="line_9430"></a></li>
<li id="line_9431" class="odd"><span class="lineNumber">&nbsp;9431&nbsp;</span>			out.source&nbsp;=&nbsp;source;<a name="line_9431"></a></li>
<li id="line_9432" class="even"><span class="lineNumber">&nbsp;9432&nbsp;</span>		}<a name="line_9432"></a></li>
<li id="line_9433" class="odd"><span class="lineNumber">&nbsp;9433&nbsp;</span><a name="line_9433"></a></li>
<li id="line_9434" class="even"><span class="lineNumber">&nbsp;9434&nbsp;</span>		out._id&nbsp;=&nbsp;input._id&nbsp;||&nbsp;(input.id&nbsp;===&nbsp;undefined&nbsp;?&nbsp;'_fc'&nbsp;+&nbsp;eventGUID++&nbsp;:&nbsp;input.id&nbsp;+&nbsp;'');<a name="line_9434"></a></li>
<li id="line_9435" class="odd"><span class="lineNumber">&nbsp;9435&nbsp;</span><a name="line_9435"></a></li>
<li id="line_9436" class="even"><span class="lineNumber">&nbsp;9436&nbsp;</span>		if&nbsp;(input.className)&nbsp;{<a name="line_9436"></a></li>
<li id="line_9437" class="odd"><span class="lineNumber">&nbsp;9437&nbsp;</span>			if&nbsp;(typeof&nbsp;input.className&nbsp;==&nbsp;'string')&nbsp;{<a name="line_9437"></a></li>
<li id="line_9438" class="even"><span class="lineNumber">&nbsp;9438&nbsp;</span>				out.className&nbsp;=&nbsp;input.className.split(/\s+/);<a name="line_9438"></a></li>
<li id="line_9439" class="odd"><span class="lineNumber">&nbsp;9439&nbsp;</span>			}<a name="line_9439"></a></li>
<li id="line_9440" class="even"><span class="lineNumber">&nbsp;9440&nbsp;</span>			else&nbsp;{&nbsp;//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;an&nbsp;array<a name="line_9440"></a></li>
<li id="line_9441" class="odd"><span class="lineNumber">&nbsp;9441&nbsp;</span>				out.className&nbsp;=&nbsp;input.className;<a name="line_9441"></a></li>
<li id="line_9442" class="even"><span class="lineNumber">&nbsp;9442&nbsp;</span>			}<a name="line_9442"></a></li>
<li id="line_9443" class="odd"><span class="lineNumber">&nbsp;9443&nbsp;</span>		}<a name="line_9443"></a></li>
<li id="line_9444" class="even"><span class="lineNumber">&nbsp;9444&nbsp;</span>		else&nbsp;{<a name="line_9444"></a></li>
<li id="line_9445" class="odd"><span class="lineNumber">&nbsp;9445&nbsp;</span>			out.className&nbsp;=&nbsp;[];<a name="line_9445"></a></li>
<li id="line_9446" class="even"><span class="lineNumber">&nbsp;9446&nbsp;</span>		}<a name="line_9446"></a></li>
<li id="line_9447" class="odd"><span class="lineNumber">&nbsp;9447&nbsp;</span><a name="line_9447"></a></li>
<li id="line_9448" class="even"><span class="lineNumber">&nbsp;9448&nbsp;</span>		start&nbsp;=&nbsp;input.start&nbsp;||&nbsp;input.date;&nbsp;//&nbsp;"date"&nbsp;is&nbsp;an&nbsp;alias&nbsp;for&nbsp;"start"<a name="line_9448"></a></li>
<li id="line_9449" class="odd"><span class="lineNumber">&nbsp;9449&nbsp;</span>		end&nbsp;=&nbsp;input.end;<a name="line_9449"></a></li>
<li id="line_9450" class="even"><span class="lineNumber">&nbsp;9450&nbsp;</span><a name="line_9450"></a></li>
<li id="line_9451" class="odd"><span class="lineNumber">&nbsp;9451&nbsp;</span>		//&nbsp;parse&nbsp;as&nbsp;a&nbsp;time&nbsp;(Duration)&nbsp;if&nbsp;applicable<a name="line_9451"></a></li>
<li id="line_9452" class="even"><span class="lineNumber">&nbsp;9452&nbsp;</span>		if&nbsp;(isTimeString(start))&nbsp;{<a name="line_9452"></a></li>
<li id="line_9453" class="odd"><span class="lineNumber">&nbsp;9453&nbsp;</span>			start&nbsp;=&nbsp;moment.duration(start);<a name="line_9453"></a></li>
<li id="line_9454" class="even"><span class="lineNumber">&nbsp;9454&nbsp;</span>		}<a name="line_9454"></a></li>
<li id="line_9455" class="odd"><span class="lineNumber">&nbsp;9455&nbsp;</span>		if&nbsp;(isTimeString(end))&nbsp;{<a name="line_9455"></a></li>
<li id="line_9456" class="even"><span class="lineNumber">&nbsp;9456&nbsp;</span>			end&nbsp;=&nbsp;moment.duration(end);<a name="line_9456"></a></li>
<li id="line_9457" class="odd"><span class="lineNumber">&nbsp;9457&nbsp;</span>		}<a name="line_9457"></a></li>
<li id="line_9458" class="even"><span class="lineNumber">&nbsp;9458&nbsp;</span><a name="line_9458"></a></li>
<li id="line_9459" class="odd"><span class="lineNumber">&nbsp;9459&nbsp;</span>		if&nbsp;(input.dow&nbsp;||&nbsp;moment.isDuration(start)&nbsp;||&nbsp;moment.isDuration(end))&nbsp;{<a name="line_9459"></a></li>
<li id="line_9460" class="even"><span class="lineNumber">&nbsp;9460&nbsp;</span><a name="line_9460"></a></li>
<li id="line_9461" class="odd"><span class="lineNumber">&nbsp;9461&nbsp;</span>			//&nbsp;the&nbsp;event&nbsp;is&nbsp;"abstract"&nbsp;(recurring)&nbsp;so&nbsp;don't&nbsp;calculate&nbsp;exact&nbsp;start/end&nbsp;dates&nbsp;just&nbsp;yet<a name="line_9461"></a></li>
<li id="line_9462" class="even"><span class="lineNumber">&nbsp;9462&nbsp;</span>			out.start&nbsp;=&nbsp;start&nbsp;?&nbsp;moment.duration(start)&nbsp;:&nbsp;null;&nbsp;//&nbsp;will&nbsp;be&nbsp;a&nbsp;Duration&nbsp;or&nbsp;null<a name="line_9462"></a></li>
<li id="line_9463" class="odd"><span class="lineNumber">&nbsp;9463&nbsp;</span>			out.end&nbsp;=&nbsp;end&nbsp;?&nbsp;moment.duration(end)&nbsp;:&nbsp;null;&nbsp;//&nbsp;will&nbsp;be&nbsp;a&nbsp;Duration&nbsp;or&nbsp;null<a name="line_9463"></a></li>
<li id="line_9464" class="even"><span class="lineNumber">&nbsp;9464&nbsp;</span>			out._recurring&nbsp;=&nbsp;true;&nbsp;//&nbsp;our&nbsp;internal&nbsp;marker<a name="line_9464"></a></li>
<li id="line_9465" class="odd"><span class="lineNumber">&nbsp;9465&nbsp;</span>		}<a name="line_9465"></a></li>
<li id="line_9466" class="even"><span class="lineNumber">&nbsp;9466&nbsp;</span>		else&nbsp;{<a name="line_9466"></a></li>
<li id="line_9467" class="odd"><span class="lineNumber">&nbsp;9467&nbsp;</span><a name="line_9467"></a></li>
<li id="line_9468" class="even"><span class="lineNumber">&nbsp;9468&nbsp;</span>			if&nbsp;(start)&nbsp;{<a name="line_9468"></a></li>
<li id="line_9469" class="odd"><span class="lineNumber">&nbsp;9469&nbsp;</span>				start&nbsp;=&nbsp;t.moment(start);<a name="line_9469"></a></li>
<li id="line_9470" class="even"><span class="lineNumber">&nbsp;9470&nbsp;</span>				if&nbsp;(!start.isValid())&nbsp;{<a name="line_9470"></a></li>
<li id="line_9471" class="odd"><span class="lineNumber">&nbsp;9471&nbsp;</span>					return&nbsp;false;<a name="line_9471"></a></li>
<li id="line_9472" class="even"><span class="lineNumber">&nbsp;9472&nbsp;</span>				}<a name="line_9472"></a></li>
<li id="line_9473" class="odd"><span class="lineNumber">&nbsp;9473&nbsp;</span>			}<a name="line_9473"></a></li>
<li id="line_9474" class="even"><span class="lineNumber">&nbsp;9474&nbsp;</span><a name="line_9474"></a></li>
<li id="line_9475" class="odd"><span class="lineNumber">&nbsp;9475&nbsp;</span>			if&nbsp;(end)&nbsp;{<a name="line_9475"></a></li>
<li id="line_9476" class="even"><span class="lineNumber">&nbsp;9476&nbsp;</span>				end&nbsp;=&nbsp;t.moment(end);<a name="line_9476"></a></li>
<li id="line_9477" class="odd"><span class="lineNumber">&nbsp;9477&nbsp;</span>				if&nbsp;(!end.isValid())&nbsp;{<a name="line_9477"></a></li>
<li id="line_9478" class="even"><span class="lineNumber">&nbsp;9478&nbsp;</span>					end&nbsp;=&nbsp;null;&nbsp;//&nbsp;let&nbsp;defaults&nbsp;take&nbsp;over<a name="line_9478"></a></li>
<li id="line_9479" class="odd"><span class="lineNumber">&nbsp;9479&nbsp;</span>				}<a name="line_9479"></a></li>
<li id="line_9480" class="even"><span class="lineNumber">&nbsp;9480&nbsp;</span>			}<a name="line_9480"></a></li>
<li id="line_9481" class="odd"><span class="lineNumber">&nbsp;9481&nbsp;</span><a name="line_9481"></a></li>
<li id="line_9482" class="even"><span class="lineNumber">&nbsp;9482&nbsp;</span>			allDay&nbsp;=&nbsp;input.allDay;<a name="line_9482"></a></li>
<li id="line_9483" class="odd"><span class="lineNumber">&nbsp;9483&nbsp;</span>			if&nbsp;(allDay&nbsp;===&nbsp;undefined)&nbsp;{&nbsp;//&nbsp;still&nbsp;undefined?&nbsp;fallback&nbsp;to&nbsp;default<a name="line_9483"></a></li>
<li id="line_9484" class="even"><span class="lineNumber">&nbsp;9484&nbsp;</span>				allDay&nbsp;=&nbsp;firstDefined(<a name="line_9484"></a></li>
<li id="line_9485" class="odd"><span class="lineNumber">&nbsp;9485&nbsp;</span>					source&nbsp;?&nbsp;source.allDayDefault&nbsp;:&nbsp;undefined,<a name="line_9485"></a></li>
<li id="line_9486" class="even"><span class="lineNumber">&nbsp;9486&nbsp;</span>					options.allDayDefault<a name="line_9486"></a></li>
<li id="line_9487" class="odd"><span class="lineNumber">&nbsp;9487&nbsp;</span>				);<a name="line_9487"></a></li>
<li id="line_9488" class="even"><span class="lineNumber">&nbsp;9488&nbsp;</span>				//&nbsp;still&nbsp;undefined?&nbsp;normalizeEventRange&nbsp;will&nbsp;calculate&nbsp;it<a name="line_9488"></a></li>
<li id="line_9489" class="odd"><span class="lineNumber">&nbsp;9489&nbsp;</span>			}<a name="line_9489"></a></li>
<li id="line_9490" class="even"><span class="lineNumber">&nbsp;9490&nbsp;</span><a name="line_9490"></a></li>
<li id="line_9491" class="odd"><span class="lineNumber">&nbsp;9491&nbsp;</span>			assignDatesToEvent(start,&nbsp;end,&nbsp;allDay,&nbsp;out);<a name="line_9491"></a></li>
<li id="line_9492" class="even"><span class="lineNumber">&nbsp;9492&nbsp;</span>		}<a name="line_9492"></a></li>
<li id="line_9493" class="odd"><span class="lineNumber">&nbsp;9493&nbsp;</span><a name="line_9493"></a></li>
<li id="line_9494" class="even"><span class="lineNumber">&nbsp;9494&nbsp;</span>		return&nbsp;out;<a name="line_9494"></a></li>
<li id="line_9495" class="odd"><span class="lineNumber">&nbsp;9495&nbsp;</span>	}<a name="line_9495"></a></li>
<li id="line_9496" class="even"><span class="lineNumber">&nbsp;9496&nbsp;</span><a name="line_9496"></a></li>
<li id="line_9497" class="odd"><span class="lineNumber">&nbsp;9497&nbsp;</span><a name="line_9497"></a></li>
<li id="line_9498" class="even"><span class="lineNumber">&nbsp;9498&nbsp;</span>	//&nbsp;Normalizes&nbsp;and&nbsp;assigns&nbsp;the&nbsp;given&nbsp;dates&nbsp;to&nbsp;the&nbsp;given&nbsp;partially-formed&nbsp;event&nbsp;object.<a name="line_9498"></a></li>
<li id="line_9499" class="odd"><span class="lineNumber">&nbsp;9499&nbsp;</span>	//&nbsp;NOTE:&nbsp;mutates&nbsp;the&nbsp;given&nbsp;start/end&nbsp;moments.&nbsp;does&nbsp;not&nbsp;make&nbsp;a&nbsp;copy.<a name="line_9499"></a></li>
<li id="line_9500" class="even"><span class="lineNumber">&nbsp;9500&nbsp;</span>	function&nbsp;assignDatesToEvent(start,&nbsp;end,&nbsp;allDay,&nbsp;event)&nbsp;{<a name="line_9500"></a></li>
<li id="line_9501" class="odd"><span class="lineNumber">&nbsp;9501&nbsp;</span>		event.start&nbsp;=&nbsp;start;<a name="line_9501"></a></li>
<li id="line_9502" class="even"><span class="lineNumber">&nbsp;9502&nbsp;</span>		event.end&nbsp;=&nbsp;end;<a name="line_9502"></a></li>
<li id="line_9503" class="odd"><span class="lineNumber">&nbsp;9503&nbsp;</span>		event.allDay&nbsp;=&nbsp;allDay;<a name="line_9503"></a></li>
<li id="line_9504" class="even"><span class="lineNumber">&nbsp;9504&nbsp;</span>		normalizeEventRange(event);<a name="line_9504"></a></li>
<li id="line_9505" class="odd"><span class="lineNumber">&nbsp;9505&nbsp;</span>		backupEventDates(event);<a name="line_9505"></a></li>
<li id="line_9506" class="even"><span class="lineNumber">&nbsp;9506&nbsp;</span>	}<a name="line_9506"></a></li>
<li id="line_9507" class="odd"><span class="lineNumber">&nbsp;9507&nbsp;</span><a name="line_9507"></a></li>
<li id="line_9508" class="even"><span class="lineNumber">&nbsp;9508&nbsp;</span><a name="line_9508"></a></li>
<li id="line_9509" class="odd"><span class="lineNumber">&nbsp;9509&nbsp;</span>	//&nbsp;Ensures&nbsp;proper&nbsp;values&nbsp;for&nbsp;allDay/start/end.&nbsp;Accepts&nbsp;an&nbsp;Event&nbsp;object,&nbsp;or&nbsp;a&nbsp;plain&nbsp;object&nbsp;with&nbsp;event-ish&nbsp;properties.<a name="line_9509"></a></li>
<li id="line_9510" class="even"><span class="lineNumber">&nbsp;9510&nbsp;</span>	//&nbsp;NOTE:&nbsp;Will&nbsp;modify&nbsp;the&nbsp;given&nbsp;object.<a name="line_9510"></a></li>
<li id="line_9511" class="odd"><span class="lineNumber">&nbsp;9511&nbsp;</span>	function&nbsp;normalizeEventRange(props)&nbsp;{<a name="line_9511"></a></li>
<li id="line_9512" class="even"><span class="lineNumber">&nbsp;9512&nbsp;</span><a name="line_9512"></a></li>
<li id="line_9513" class="odd"><span class="lineNumber">&nbsp;9513&nbsp;</span>		normalizeEventRangeTimes(props);<a name="line_9513"></a></li>
<li id="line_9514" class="even"><span class="lineNumber">&nbsp;9514&nbsp;</span><a name="line_9514"></a></li>
<li id="line_9515" class="odd"><span class="lineNumber">&nbsp;9515&nbsp;</span>		if&nbsp;(props.end&nbsp;&amp;&amp;&nbsp;!props.end.isAfter(props.start))&nbsp;{<a name="line_9515"></a></li>
<li id="line_9516" class="even"><span class="lineNumber">&nbsp;9516&nbsp;</span>			props.end&nbsp;=&nbsp;null;<a name="line_9516"></a></li>
<li id="line_9517" class="odd"><span class="lineNumber">&nbsp;9517&nbsp;</span>		}<a name="line_9517"></a></li>
<li id="line_9518" class="even"><span class="lineNumber">&nbsp;9518&nbsp;</span><a name="line_9518"></a></li>
<li id="line_9519" class="odd"><span class="lineNumber">&nbsp;9519&nbsp;</span>		if&nbsp;(!props.end)&nbsp;{<a name="line_9519"></a></li>
<li id="line_9520" class="even"><span class="lineNumber">&nbsp;9520&nbsp;</span>			if&nbsp;(options.forceEventDuration)&nbsp;{<a name="line_9520"></a></li>
<li id="line_9521" class="odd"><span class="lineNumber">&nbsp;9521&nbsp;</span>				props.end&nbsp;=&nbsp;t.getDefaultEventEnd(props.allDay,&nbsp;props.start);<a name="line_9521"></a></li>
<li id="line_9522" class="even"><span class="lineNumber">&nbsp;9522&nbsp;</span>			}<a name="line_9522"></a></li>
<li id="line_9523" class="odd"><span class="lineNumber">&nbsp;9523&nbsp;</span>			else&nbsp;{<a name="line_9523"></a></li>
<li id="line_9524" class="even"><span class="lineNumber">&nbsp;9524&nbsp;</span>				props.end&nbsp;=&nbsp;null;<a name="line_9524"></a></li>
<li id="line_9525" class="odd"><span class="lineNumber">&nbsp;9525&nbsp;</span>			}<a name="line_9525"></a></li>
<li id="line_9526" class="even"><span class="lineNumber">&nbsp;9526&nbsp;</span>		}<a name="line_9526"></a></li>
<li id="line_9527" class="odd"><span class="lineNumber">&nbsp;9527&nbsp;</span>	}<a name="line_9527"></a></li>
<li id="line_9528" class="even"><span class="lineNumber">&nbsp;9528&nbsp;</span><a name="line_9528"></a></li>
<li id="line_9529" class="odd"><span class="lineNumber">&nbsp;9529&nbsp;</span><a name="line_9529"></a></li>
<li id="line_9530" class="even"><span class="lineNumber">&nbsp;9530&nbsp;</span>	//&nbsp;Ensures&nbsp;the&nbsp;allDay&nbsp;property&nbsp;exists&nbsp;and&nbsp;the&nbsp;timeliness&nbsp;of&nbsp;the&nbsp;start/end&nbsp;dates&nbsp;are&nbsp;consistent<a name="line_9530"></a></li>
<li id="line_9531" class="odd"><span class="lineNumber">&nbsp;9531&nbsp;</span>	function&nbsp;normalizeEventRangeTimes(range)&nbsp;{<a name="line_9531"></a></li>
<li id="line_9532" class="even"><span class="lineNumber">&nbsp;9532&nbsp;</span>		if&nbsp;(range.allDay&nbsp;==&nbsp;null)&nbsp;{<a name="line_9532"></a></li>
<li id="line_9533" class="odd"><span class="lineNumber">&nbsp;9533&nbsp;</span>			range.allDay&nbsp;=&nbsp;!(range.start.hasTime()&nbsp;||&nbsp;(range.end&nbsp;&amp;&amp;&nbsp;range.end.hasTime()));<a name="line_9533"></a></li>
<li id="line_9534" class="even"><span class="lineNumber">&nbsp;9534&nbsp;</span>		}<a name="line_9534"></a></li>
<li id="line_9535" class="odd"><span class="lineNumber">&nbsp;9535&nbsp;</span><a name="line_9535"></a></li>
<li id="line_9536" class="even"><span class="lineNumber">&nbsp;9536&nbsp;</span>		if&nbsp;(range.allDay)&nbsp;{<a name="line_9536"></a></li>
<li id="line_9537" class="odd"><span class="lineNumber">&nbsp;9537&nbsp;</span>			range.start.stripTime();<a name="line_9537"></a></li>
<li id="line_9538" class="even"><span class="lineNumber">&nbsp;9538&nbsp;</span>			if&nbsp;(range.end)&nbsp;{<a name="line_9538"></a></li>
<li id="line_9539" class="odd"><span class="lineNumber">&nbsp;9539&nbsp;</span>				//&nbsp;TODO:&nbsp;consider&nbsp;nextDayThreshold&nbsp;here?&nbsp;If&nbsp;so,&nbsp;will&nbsp;require&nbsp;a&nbsp;lot&nbsp;of&nbsp;testing&nbsp;and&nbsp;adjustment<a name="line_9539"></a></li>
<li id="line_9540" class="even"><span class="lineNumber">&nbsp;9540&nbsp;</span>				range.end.stripTime();<a name="line_9540"></a></li>
<li id="line_9541" class="odd"><span class="lineNumber">&nbsp;9541&nbsp;</span>			}<a name="line_9541"></a></li>
<li id="line_9542" class="even"><span class="lineNumber">&nbsp;9542&nbsp;</span>		}<a name="line_9542"></a></li>
<li id="line_9543" class="odd"><span class="lineNumber">&nbsp;9543&nbsp;</span>		else&nbsp;{<a name="line_9543"></a></li>
<li id="line_9544" class="even"><span class="lineNumber">&nbsp;9544&nbsp;</span>			if&nbsp;(!range.start.hasTime())&nbsp;{<a name="line_9544"></a></li>
<li id="line_9545" class="odd"><span class="lineNumber">&nbsp;9545&nbsp;</span>				range.start&nbsp;=&nbsp;t.rezoneDate(range.start);&nbsp;//&nbsp;will&nbsp;assign&nbsp;a&nbsp;00:00&nbsp;time<a name="line_9545"></a></li>
<li id="line_9546" class="even"><span class="lineNumber">&nbsp;9546&nbsp;</span>			}<a name="line_9546"></a></li>
<li id="line_9547" class="odd"><span class="lineNumber">&nbsp;9547&nbsp;</span>			if&nbsp;(range.end&nbsp;&amp;&amp;&nbsp;!range.end.hasTime())&nbsp;{<a name="line_9547"></a></li>
<li id="line_9548" class="even"><span class="lineNumber">&nbsp;9548&nbsp;</span>				range.end&nbsp;=&nbsp;t.rezoneDate(range.end);&nbsp;//&nbsp;will&nbsp;assign&nbsp;a&nbsp;00:00&nbsp;time<a name="line_9548"></a></li>
<li id="line_9549" class="odd"><span class="lineNumber">&nbsp;9549&nbsp;</span>			}<a name="line_9549"></a></li>
<li id="line_9550" class="even"><span class="lineNumber">&nbsp;9550&nbsp;</span>		}<a name="line_9550"></a></li>
<li id="line_9551" class="odd"><span class="lineNumber">&nbsp;9551&nbsp;</span>	}<a name="line_9551"></a></li>
<li id="line_9552" class="even"><span class="lineNumber">&nbsp;9552&nbsp;</span><a name="line_9552"></a></li>
<li id="line_9553" class="odd"><span class="lineNumber">&nbsp;9553&nbsp;</span><a name="line_9553"></a></li>
<li id="line_9554" class="even"><span class="lineNumber">&nbsp;9554&nbsp;</span>	//&nbsp;If&nbsp;`range`&nbsp;is&nbsp;a&nbsp;proper&nbsp;range&nbsp;with&nbsp;a&nbsp;start&nbsp;and&nbsp;end,&nbsp;returns&nbsp;the&nbsp;original&nbsp;object.<a name="line_9554"></a></li>
<li id="line_9555" class="odd"><span class="lineNumber">&nbsp;9555&nbsp;</span>	//&nbsp;If&nbsp;missing&nbsp;an&nbsp;end,&nbsp;computes&nbsp;a&nbsp;new&nbsp;range&nbsp;with&nbsp;an&nbsp;end,&nbsp;computing&nbsp;it&nbsp;as&nbsp;if&nbsp;it&nbsp;were&nbsp;an&nbsp;event.<a name="line_9555"></a></li>
<li id="line_9556" class="even"><span class="lineNumber">&nbsp;9556&nbsp;</span>	//&nbsp;TODO:&nbsp;make&nbsp;this&nbsp;a&nbsp;part&nbsp;of&nbsp;the&nbsp;event&nbsp;-&gt;&nbsp;eventRange&nbsp;system<a name="line_9556"></a></li>
<li id="line_9557" class="odd"><span class="lineNumber">&nbsp;9557&nbsp;</span>	function&nbsp;ensureVisibleEventRange(range)&nbsp;{<a name="line_9557"></a></li>
<li id="line_9558" class="even"><span class="lineNumber">&nbsp;9558&nbsp;</span>		var&nbsp;allDay;<a name="line_9558"></a></li>
<li id="line_9559" class="odd"><span class="lineNumber">&nbsp;9559&nbsp;</span><a name="line_9559"></a></li>
<li id="line_9560" class="even"><span class="lineNumber">&nbsp;9560&nbsp;</span>		if&nbsp;(!range.end)&nbsp;{<a name="line_9560"></a></li>
<li id="line_9561" class="odd"><span class="lineNumber">&nbsp;9561&nbsp;</span><a name="line_9561"></a></li>
<li id="line_9562" class="even"><span class="lineNumber">&nbsp;9562&nbsp;</span>			allDay&nbsp;=&nbsp;range.allDay;&nbsp;//&nbsp;range&nbsp;might&nbsp;be&nbsp;more&nbsp;event-ish&nbsp;than&nbsp;we&nbsp;think<a name="line_9562"></a></li>
<li id="line_9563" class="odd"><span class="lineNumber">&nbsp;9563&nbsp;</span>			if&nbsp;(allDay&nbsp;==&nbsp;null)&nbsp;{<a name="line_9563"></a></li>
<li id="line_9564" class="even"><span class="lineNumber">&nbsp;9564&nbsp;</span>				allDay&nbsp;=&nbsp;!range.start.hasTime();<a name="line_9564"></a></li>
<li id="line_9565" class="odd"><span class="lineNumber">&nbsp;9565&nbsp;</span>			}<a name="line_9565"></a></li>
<li id="line_9566" class="even"><span class="lineNumber">&nbsp;9566&nbsp;</span><a name="line_9566"></a></li>
<li id="line_9567" class="odd"><span class="lineNumber">&nbsp;9567&nbsp;</span>			range&nbsp;=&nbsp;$.extend({},&nbsp;range);&nbsp;//&nbsp;make&nbsp;a&nbsp;copy,&nbsp;copying&nbsp;over&nbsp;other&nbsp;misc&nbsp;properties<a name="line_9567"></a></li>
<li id="line_9568" class="even"><span class="lineNumber">&nbsp;9568&nbsp;</span>			range.end&nbsp;=&nbsp;t.getDefaultEventEnd(allDay,&nbsp;range.start);<a name="line_9568"></a></li>
<li id="line_9569" class="odd"><span class="lineNumber">&nbsp;9569&nbsp;</span>		}<a name="line_9569"></a></li>
<li id="line_9570" class="even"><span class="lineNumber">&nbsp;9570&nbsp;</span>		return&nbsp;range;<a name="line_9570"></a></li>
<li id="line_9571" class="odd"><span class="lineNumber">&nbsp;9571&nbsp;</span>	}<a name="line_9571"></a></li>
<li id="line_9572" class="even"><span class="lineNumber">&nbsp;9572&nbsp;</span><a name="line_9572"></a></li>
<li id="line_9573" class="odd"><span class="lineNumber">&nbsp;9573&nbsp;</span><a name="line_9573"></a></li>
<li id="line_9574" class="even"><span class="lineNumber">&nbsp;9574&nbsp;</span>	//&nbsp;If&nbsp;the&nbsp;given&nbsp;event&nbsp;is&nbsp;a&nbsp;recurring&nbsp;event,&nbsp;break&nbsp;it&nbsp;down&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;individual&nbsp;instances.<a name="line_9574"></a></li>
<li id="line_9575" class="odd"><span class="lineNumber">&nbsp;9575&nbsp;</span>	//&nbsp;If&nbsp;not&nbsp;a&nbsp;recurring&nbsp;event,&nbsp;return&nbsp;an&nbsp;array&nbsp;with&nbsp;the&nbsp;single&nbsp;original&nbsp;event.<a name="line_9575"></a></li>
<li id="line_9576" class="even"><span class="lineNumber">&nbsp;9576&nbsp;</span>	//&nbsp;If&nbsp;given&nbsp;a&nbsp;falsy&nbsp;input&nbsp;(probably&nbsp;because&nbsp;of&nbsp;a&nbsp;failed&nbsp;buildEventFromInput&nbsp;call),&nbsp;returns&nbsp;an&nbsp;empty&nbsp;array.<a name="line_9576"></a></li>
<li id="line_9577" class="odd"><span class="lineNumber">&nbsp;9577&nbsp;</span>	//&nbsp;HACK:&nbsp;can&nbsp;override&nbsp;the&nbsp;recurring&nbsp;window&nbsp;by&nbsp;providing&nbsp;custom&nbsp;rangeStart/rangeEnd&nbsp;(for&nbsp;businessHours).<a name="line_9577"></a></li>
<li id="line_9578" class="even"><span class="lineNumber">&nbsp;9578&nbsp;</span>	function&nbsp;expandEvent(abstractEvent,&nbsp;_rangeStart,&nbsp;_rangeEnd)&nbsp;{<a name="line_9578"></a></li>
<li id="line_9579" class="odd"><span class="lineNumber">&nbsp;9579&nbsp;</span>		var&nbsp;events&nbsp;=&nbsp;[];<a name="line_9579"></a></li>
<li id="line_9580" class="even"><span class="lineNumber">&nbsp;9580&nbsp;</span>		var&nbsp;dowHash;<a name="line_9580"></a></li>
<li id="line_9581" class="odd"><span class="lineNumber">&nbsp;9581&nbsp;</span>		var&nbsp;dow;<a name="line_9581"></a></li>
<li id="line_9582" class="even"><span class="lineNumber">&nbsp;9582&nbsp;</span>		var&nbsp;i;<a name="line_9582"></a></li>
<li id="line_9583" class="odd"><span class="lineNumber">&nbsp;9583&nbsp;</span>		var&nbsp;date;<a name="line_9583"></a></li>
<li id="line_9584" class="even"><span class="lineNumber">&nbsp;9584&nbsp;</span>		var&nbsp;startTime,&nbsp;endTime;<a name="line_9584"></a></li>
<li id="line_9585" class="odd"><span class="lineNumber">&nbsp;9585&nbsp;</span>		var&nbsp;start,&nbsp;end;<a name="line_9585"></a></li>
<li id="line_9586" class="even"><span class="lineNumber">&nbsp;9586&nbsp;</span>		var&nbsp;event;<a name="line_9586"></a></li>
<li id="line_9587" class="odd"><span class="lineNumber">&nbsp;9587&nbsp;</span><a name="line_9587"></a></li>
<li id="line_9588" class="even"><span class="lineNumber">&nbsp;9588&nbsp;</span>		_rangeStart&nbsp;=&nbsp;_rangeStart&nbsp;||&nbsp;rangeStart;<a name="line_9588"></a></li>
<li id="line_9589" class="odd"><span class="lineNumber">&nbsp;9589&nbsp;</span>		_rangeEnd&nbsp;=&nbsp;_rangeEnd&nbsp;||&nbsp;rangeEnd;<a name="line_9589"></a></li>
<li id="line_9590" class="even"><span class="lineNumber">&nbsp;9590&nbsp;</span><a name="line_9590"></a></li>
<li id="line_9591" class="odd"><span class="lineNumber">&nbsp;9591&nbsp;</span>		if&nbsp;(abstractEvent)&nbsp;{<a name="line_9591"></a></li>
<li id="line_9592" class="even"><span class="lineNumber">&nbsp;9592&nbsp;</span>			if&nbsp;(abstractEvent._recurring)&nbsp;{<a name="line_9592"></a></li>
<li id="line_9593" class="odd"><span class="lineNumber">&nbsp;9593&nbsp;</span><a name="line_9593"></a></li>
<li id="line_9594" class="even"><span class="lineNumber">&nbsp;9594&nbsp;</span>				//&nbsp;make&nbsp;a&nbsp;boolean&nbsp;hash&nbsp;as&nbsp;to&nbsp;whether&nbsp;the&nbsp;event&nbsp;occurs&nbsp;on&nbsp;each&nbsp;day-of-week<a name="line_9594"></a></li>
<li id="line_9595" class="odd"><span class="lineNumber">&nbsp;9595&nbsp;</span>				if&nbsp;((dow&nbsp;=&nbsp;abstractEvent.dow))&nbsp;{<a name="line_9595"></a></li>
<li id="line_9596" class="even"><span class="lineNumber">&nbsp;9596&nbsp;</span>					dowHash&nbsp;=&nbsp;{};<a name="line_9596"></a></li>
<li id="line_9597" class="odd"><span class="lineNumber">&nbsp;9597&nbsp;</span>					for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;dow.length;&nbsp;i++)&nbsp;{<a name="line_9597"></a></li>
<li id="line_9598" class="even"><span class="lineNumber">&nbsp;9598&nbsp;</span>						dowHash[dow[i]]&nbsp;=&nbsp;true;<a name="line_9598"></a></li>
<li id="line_9599" class="odd"><span class="lineNumber">&nbsp;9599&nbsp;</span>					}<a name="line_9599"></a></li>
<li id="line_9600" class="even"><span class="lineNumber">&nbsp;9600&nbsp;</span>				}<a name="line_9600"></a></li>
<li id="line_9601" class="odd"><span class="lineNumber">&nbsp;9601&nbsp;</span><a name="line_9601"></a></li>
<li id="line_9602" class="even"><span class="lineNumber">&nbsp;9602&nbsp;</span>				//&nbsp;iterate&nbsp;through&nbsp;every&nbsp;day&nbsp;in&nbsp;the&nbsp;current&nbsp;range<a name="line_9602"></a></li>
<li id="line_9603" class="odd"><span class="lineNumber">&nbsp;9603&nbsp;</span>				date&nbsp;=&nbsp;_rangeStart.clone().stripTime();&nbsp;//&nbsp;holds&nbsp;the&nbsp;date&nbsp;of&nbsp;the&nbsp;current&nbsp;day<a name="line_9603"></a></li>
<li id="line_9604" class="even"><span class="lineNumber">&nbsp;9604&nbsp;</span>				while&nbsp;(date.isBefore(_rangeEnd))&nbsp;{<a name="line_9604"></a></li>
<li id="line_9605" class="odd"><span class="lineNumber">&nbsp;9605&nbsp;</span><a name="line_9605"></a></li>
<li id="line_9606" class="even"><span class="lineNumber">&nbsp;9606&nbsp;</span>					if&nbsp;(!dowHash&nbsp;||&nbsp;dowHash[date.day()])&nbsp;{&nbsp;//&nbsp;if&nbsp;everyday,&nbsp;or&nbsp;this&nbsp;particular&nbsp;day-of-week<a name="line_9606"></a></li>
<li id="line_9607" class="odd"><span class="lineNumber">&nbsp;9607&nbsp;</span><a name="line_9607"></a></li>
<li id="line_9608" class="even"><span class="lineNumber">&nbsp;9608&nbsp;</span>						startTime&nbsp;=&nbsp;abstractEvent.start;&nbsp;//&nbsp;the&nbsp;stored&nbsp;start&nbsp;and&nbsp;end&nbsp;properties&nbsp;are&nbsp;times&nbsp;(Durations)<a name="line_9608"></a></li>
<li id="line_9609" class="odd"><span class="lineNumber">&nbsp;9609&nbsp;</span>						endTime&nbsp;=&nbsp;abstractEvent.end;&nbsp;//&nbsp;"<a name="line_9609"></a></li>
<li id="line_9610" class="even"><span class="lineNumber">&nbsp;9610&nbsp;</span>						start&nbsp;=&nbsp;date.clone();<a name="line_9610"></a></li>
<li id="line_9611" class="odd"><span class="lineNumber">&nbsp;9611&nbsp;</span>						end&nbsp;=&nbsp;null;<a name="line_9611"></a></li>
<li id="line_9612" class="even"><span class="lineNumber">&nbsp;9612&nbsp;</span><a name="line_9612"></a></li>
<li id="line_9613" class="odd"><span class="lineNumber">&nbsp;9613&nbsp;</span>						if&nbsp;(startTime)&nbsp;{<a name="line_9613"></a></li>
<li id="line_9614" class="even"><span class="lineNumber">&nbsp;9614&nbsp;</span>							start&nbsp;=&nbsp;start.time(startTime);<a name="line_9614"></a></li>
<li id="line_9615" class="odd"><span class="lineNumber">&nbsp;9615&nbsp;</span>						}<a name="line_9615"></a></li>
<li id="line_9616" class="even"><span class="lineNumber">&nbsp;9616&nbsp;</span>						if&nbsp;(endTime)&nbsp;{<a name="line_9616"></a></li>
<li id="line_9617" class="odd"><span class="lineNumber">&nbsp;9617&nbsp;</span>							end&nbsp;=&nbsp;date.clone().time(endTime);<a name="line_9617"></a></li>
<li id="line_9618" class="even"><span class="lineNumber">&nbsp;9618&nbsp;</span>						}<a name="line_9618"></a></li>
<li id="line_9619" class="odd"><span class="lineNumber">&nbsp;9619&nbsp;</span><a name="line_9619"></a></li>
<li id="line_9620" class="even"><span class="lineNumber">&nbsp;9620&nbsp;</span>						event&nbsp;=&nbsp;$.extend({},&nbsp;abstractEvent);&nbsp;//&nbsp;make&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;original<a name="line_9620"></a></li>
<li id="line_9621" class="odd"><span class="lineNumber">&nbsp;9621&nbsp;</span>						assignDatesToEvent(<a name="line_9621"></a></li>
<li id="line_9622" class="even"><span class="lineNumber">&nbsp;9622&nbsp;</span>							start,&nbsp;end,<a name="line_9622"></a></li>
<li id="line_9623" class="odd"><span class="lineNumber">&nbsp;9623&nbsp;</span>							!startTime&nbsp;&amp;&amp;&nbsp;!endTime,&nbsp;//&nbsp;allDay?<a name="line_9623"></a></li>
<li id="line_9624" class="even"><span class="lineNumber">&nbsp;9624&nbsp;</span>							event<a name="line_9624"></a></li>
<li id="line_9625" class="odd"><span class="lineNumber">&nbsp;9625&nbsp;</span>						);<a name="line_9625"></a></li>
<li id="line_9626" class="even"><span class="lineNumber">&nbsp;9626&nbsp;</span>						events.push(event);<a name="line_9626"></a></li>
<li id="line_9627" class="odd"><span class="lineNumber">&nbsp;9627&nbsp;</span>					}<a name="line_9627"></a></li>
<li id="line_9628" class="even"><span class="lineNumber">&nbsp;9628&nbsp;</span><a name="line_9628"></a></li>
<li id="line_9629" class="odd"><span class="lineNumber">&nbsp;9629&nbsp;</span>					date.add(1,&nbsp;'days');<a name="line_9629"></a></li>
<li id="line_9630" class="even"><span class="lineNumber">&nbsp;9630&nbsp;</span>				}<a name="line_9630"></a></li>
<li id="line_9631" class="odd"><span class="lineNumber">&nbsp;9631&nbsp;</span>			}<a name="line_9631"></a></li>
<li id="line_9632" class="even"><span class="lineNumber">&nbsp;9632&nbsp;</span>			else&nbsp;{<a name="line_9632"></a></li>
<li id="line_9633" class="odd"><span class="lineNumber">&nbsp;9633&nbsp;</span>				events.push(abstractEvent);&nbsp;//&nbsp;return&nbsp;the&nbsp;original&nbsp;event.&nbsp;will&nbsp;be&nbsp;a&nbsp;one-item&nbsp;array<a name="line_9633"></a></li>
<li id="line_9634" class="even"><span class="lineNumber">&nbsp;9634&nbsp;</span>			}<a name="line_9634"></a></li>
<li id="line_9635" class="odd"><span class="lineNumber">&nbsp;9635&nbsp;</span>		}<a name="line_9635"></a></li>
<li id="line_9636" class="even"><span class="lineNumber">&nbsp;9636&nbsp;</span><a name="line_9636"></a></li>
<li id="line_9637" class="odd"><span class="lineNumber">&nbsp;9637&nbsp;</span>		return&nbsp;events;<a name="line_9637"></a></li>
<li id="line_9638" class="even"><span class="lineNumber">&nbsp;9638&nbsp;</span>	}<a name="line_9638"></a></li>
<li id="line_9639" class="odd"><span class="lineNumber">&nbsp;9639&nbsp;</span><a name="line_9639"></a></li>
<li id="line_9640" class="even"><span class="lineNumber">&nbsp;9640&nbsp;</span><a name="line_9640"></a></li>
<li id="line_9641" class="odd"><span class="lineNumber">&nbsp;9641&nbsp;</span><a name="line_9641"></a></li>
<li id="line_9642" class="even"><span class="lineNumber">&nbsp;9642&nbsp;</span>	/*&nbsp;Event&nbsp;Modification&nbsp;Math<a name="line_9642"></a></li>
<li id="line_9643" class="odd"><span class="lineNumber">&nbsp;9643&nbsp;</span>	-----------------------------------------------------------------------------------------*/<a name="line_9643"></a></li>
<li id="line_9644" class="even"><span class="lineNumber">&nbsp;9644&nbsp;</span><a name="line_9644"></a></li>
<li id="line_9645" class="odd"><span class="lineNumber">&nbsp;9645&nbsp;</span><a name="line_9645"></a></li>
<li id="line_9646" class="even"><span class="lineNumber">&nbsp;9646&nbsp;</span>	//&nbsp;Modifies&nbsp;an&nbsp;event&nbsp;and&nbsp;all&nbsp;related&nbsp;events&nbsp;by&nbsp;applying&nbsp;the&nbsp;given&nbsp;properties.<a name="line_9646"></a></li>
<li id="line_9647" class="odd"><span class="lineNumber">&nbsp;9647&nbsp;</span>	//&nbsp;Special&nbsp;date-diffing&nbsp;logic&nbsp;is&nbsp;used&nbsp;for&nbsp;manipulation&nbsp;of&nbsp;dates.<a name="line_9647"></a></li>
<li id="line_9648" class="even"><span class="lineNumber">&nbsp;9648&nbsp;</span>	//&nbsp;If&nbsp;`props`&nbsp;does&nbsp;not&nbsp;contain&nbsp;start/end&nbsp;dates,&nbsp;the&nbsp;updated&nbsp;values&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;the&nbsp;event's&nbsp;current&nbsp;start/end.<a name="line_9648"></a></li>
<li id="line_9649" class="odd"><span class="lineNumber">&nbsp;9649&nbsp;</span>	//&nbsp;All&nbsp;date&nbsp;comparisons&nbsp;are&nbsp;done&nbsp;against&nbsp;the&nbsp;event's&nbsp;pristine&nbsp;_start&nbsp;and&nbsp;_end&nbsp;dates.<a name="line_9649"></a></li>
<li id="line_9650" class="even"><span class="lineNumber">&nbsp;9650&nbsp;</span>	//&nbsp;Returns&nbsp;an&nbsp;object&nbsp;with&nbsp;delta&nbsp;information&nbsp;and&nbsp;a&nbsp;function&nbsp;to&nbsp;undo&nbsp;all&nbsp;operations.<a name="line_9650"></a></li>
<li id="line_9651" class="odd"><span class="lineNumber">&nbsp;9651&nbsp;</span>	//&nbsp;For&nbsp;making&nbsp;computations&nbsp;in&nbsp;a&nbsp;granularity&nbsp;greater&nbsp;than&nbsp;day/time,&nbsp;specify&nbsp;largeUnit.<a name="line_9651"></a></li>
<li id="line_9652" class="even"><span class="lineNumber">&nbsp;9652&nbsp;</span>	//&nbsp;NOTE:&nbsp;The&nbsp;given&nbsp;`newProps`&nbsp;might&nbsp;be&nbsp;mutated&nbsp;for&nbsp;normalization&nbsp;purposes.<a name="line_9652"></a></li>
<li id="line_9653" class="odd"><span class="lineNumber">&nbsp;9653&nbsp;</span>	function&nbsp;mutateEvent(event,&nbsp;newProps,&nbsp;largeUnit)&nbsp;{<a name="line_9653"></a></li>
<li id="line_9654" class="even"><span class="lineNumber">&nbsp;9654&nbsp;</span>		var&nbsp;miscProps&nbsp;=&nbsp;{};<a name="line_9654"></a></li>
<li id="line_9655" class="odd"><span class="lineNumber">&nbsp;9655&nbsp;</span>		var&nbsp;oldProps;<a name="line_9655"></a></li>
<li id="line_9656" class="even"><span class="lineNumber">&nbsp;9656&nbsp;</span>		var&nbsp;clearEnd;<a name="line_9656"></a></li>
<li id="line_9657" class="odd"><span class="lineNumber">&nbsp;9657&nbsp;</span>		var&nbsp;startDelta;<a name="line_9657"></a></li>
<li id="line_9658" class="even"><span class="lineNumber">&nbsp;9658&nbsp;</span>		var&nbsp;endDelta;<a name="line_9658"></a></li>
<li id="line_9659" class="odd"><span class="lineNumber">&nbsp;9659&nbsp;</span>		var&nbsp;durationDelta;<a name="line_9659"></a></li>
<li id="line_9660" class="even"><span class="lineNumber">&nbsp;9660&nbsp;</span>		var&nbsp;undoFunc;<a name="line_9660"></a></li>
<li id="line_9661" class="odd"><span class="lineNumber">&nbsp;9661&nbsp;</span><a name="line_9661"></a></li>
<li id="line_9662" class="even"><span class="lineNumber">&nbsp;9662&nbsp;</span>		//&nbsp;diffs&nbsp;the&nbsp;dates&nbsp;in&nbsp;the&nbsp;appropriate&nbsp;way,&nbsp;returning&nbsp;a&nbsp;duration<a name="line_9662"></a></li>
<li id="line_9663" class="odd"><span class="lineNumber">&nbsp;9663&nbsp;</span>		function&nbsp;diffDates(date1,&nbsp;date0)&nbsp;{&nbsp;//&nbsp;date1&nbsp;-&nbsp;date0<a name="line_9663"></a></li>
<li id="line_9664" class="even"><span class="lineNumber">&nbsp;9664&nbsp;</span>			if&nbsp;(largeUnit)&nbsp;{<a name="line_9664"></a></li>
<li id="line_9665" class="odd"><span class="lineNumber">&nbsp;9665&nbsp;</span>				return&nbsp;diffByUnit(date1,&nbsp;date0,&nbsp;largeUnit);<a name="line_9665"></a></li>
<li id="line_9666" class="even"><span class="lineNumber">&nbsp;9666&nbsp;</span>			}<a name="line_9666"></a></li>
<li id="line_9667" class="odd"><span class="lineNumber">&nbsp;9667&nbsp;</span>			else&nbsp;if&nbsp;(newProps.allDay)&nbsp;{<a name="line_9667"></a></li>
<li id="line_9668" class="even"><span class="lineNumber">&nbsp;9668&nbsp;</span>				return&nbsp;diffDay(date1,&nbsp;date0);<a name="line_9668"></a></li>
<li id="line_9669" class="odd"><span class="lineNumber">&nbsp;9669&nbsp;</span>			}<a name="line_9669"></a></li>
<li id="line_9670" class="even"><span class="lineNumber">&nbsp;9670&nbsp;</span>			else&nbsp;{<a name="line_9670"></a></li>
<li id="line_9671" class="odd"><span class="lineNumber">&nbsp;9671&nbsp;</span>				return&nbsp;diffDayTime(date1,&nbsp;date0);<a name="line_9671"></a></li>
<li id="line_9672" class="even"><span class="lineNumber">&nbsp;9672&nbsp;</span>			}<a name="line_9672"></a></li>
<li id="line_9673" class="odd"><span class="lineNumber">&nbsp;9673&nbsp;</span>		}<a name="line_9673"></a></li>
<li id="line_9674" class="even"><span class="lineNumber">&nbsp;9674&nbsp;</span><a name="line_9674"></a></li>
<li id="line_9675" class="odd"><span class="lineNumber">&nbsp;9675&nbsp;</span>		newProps&nbsp;=&nbsp;newProps&nbsp;||&nbsp;{};<a name="line_9675"></a></li>
<li id="line_9676" class="even"><span class="lineNumber">&nbsp;9676&nbsp;</span><a name="line_9676"></a></li>
<li id="line_9677" class="odd"><span class="lineNumber">&nbsp;9677&nbsp;</span>		//&nbsp;normalize&nbsp;new&nbsp;date-related&nbsp;properties<a name="line_9677"></a></li>
<li id="line_9678" class="even"><span class="lineNumber">&nbsp;9678&nbsp;</span>		if&nbsp;(!newProps.start)&nbsp;{<a name="line_9678"></a></li>
<li id="line_9679" class="odd"><span class="lineNumber">&nbsp;9679&nbsp;</span>			newProps.start&nbsp;=&nbsp;event.start.clone();<a name="line_9679"></a></li>
<li id="line_9680" class="even"><span class="lineNumber">&nbsp;9680&nbsp;</span>		}<a name="line_9680"></a></li>
<li id="line_9681" class="odd"><span class="lineNumber">&nbsp;9681&nbsp;</span>		if&nbsp;(newProps.end&nbsp;===&nbsp;undefined)&nbsp;{<a name="line_9681"></a></li>
<li id="line_9682" class="even"><span class="lineNumber">&nbsp;9682&nbsp;</span>			newProps.end&nbsp;=&nbsp;event.end&nbsp;?&nbsp;event.end.clone()&nbsp;:&nbsp;null;<a name="line_9682"></a></li>
<li id="line_9683" class="odd"><span class="lineNumber">&nbsp;9683&nbsp;</span>		}<a name="line_9683"></a></li>
<li id="line_9684" class="even"><span class="lineNumber">&nbsp;9684&nbsp;</span>		if&nbsp;(newProps.allDay&nbsp;==&nbsp;null)&nbsp;{&nbsp;//&nbsp;is&nbsp;null&nbsp;or&nbsp;undefined?<a name="line_9684"></a></li>
<li id="line_9685" class="odd"><span class="lineNumber">&nbsp;9685&nbsp;</span>			newProps.allDay&nbsp;=&nbsp;event.allDay;<a name="line_9685"></a></li>
<li id="line_9686" class="even"><span class="lineNumber">&nbsp;9686&nbsp;</span>		}<a name="line_9686"></a></li>
<li id="line_9687" class="odd"><span class="lineNumber">&nbsp;9687&nbsp;</span>		normalizeEventRange(newProps);<a name="line_9687"></a></li>
<li id="line_9688" class="even"><span class="lineNumber">&nbsp;9688&nbsp;</span><a name="line_9688"></a></li>
<li id="line_9689" class="odd"><span class="lineNumber">&nbsp;9689&nbsp;</span>		//&nbsp;create&nbsp;normalized&nbsp;versions&nbsp;of&nbsp;the&nbsp;original&nbsp;props&nbsp;to&nbsp;compare&nbsp;against<a name="line_9689"></a></li>
<li id="line_9690" class="even"><span class="lineNumber">&nbsp;9690&nbsp;</span>		//&nbsp;need&nbsp;a&nbsp;real&nbsp;end&nbsp;value,&nbsp;for&nbsp;diffing<a name="line_9690"></a></li>
<li id="line_9691" class="odd"><span class="lineNumber">&nbsp;9691&nbsp;</span>		oldProps&nbsp;=&nbsp;{<a name="line_9691"></a></li>
<li id="line_9692" class="even"><span class="lineNumber">&nbsp;9692&nbsp;</span>			start:&nbsp;event._start.clone(),<a name="line_9692"></a></li>
<li id="line_9693" class="odd"><span class="lineNumber">&nbsp;9693&nbsp;</span>			end:&nbsp;event._end&nbsp;?&nbsp;event._end.clone()&nbsp;:&nbsp;t.getDefaultEventEnd(event._allDay,&nbsp;event._start),<a name="line_9693"></a></li>
<li id="line_9694" class="even"><span class="lineNumber">&nbsp;9694&nbsp;</span>			allDay:&nbsp;newProps.allDay&nbsp;//&nbsp;normalize&nbsp;the&nbsp;dates&nbsp;in&nbsp;the&nbsp;same&nbsp;regard&nbsp;as&nbsp;the&nbsp;new&nbsp;properties<a name="line_9694"></a></li>
<li id="line_9695" class="odd"><span class="lineNumber">&nbsp;9695&nbsp;</span>		};<a name="line_9695"></a></li>
<li id="line_9696" class="even"><span class="lineNumber">&nbsp;9696&nbsp;</span>		normalizeEventRange(oldProps);<a name="line_9696"></a></li>
<li id="line_9697" class="odd"><span class="lineNumber">&nbsp;9697&nbsp;</span><a name="line_9697"></a></li>
<li id="line_9698" class="even"><span class="lineNumber">&nbsp;9698&nbsp;</span>		//&nbsp;need&nbsp;to&nbsp;clear&nbsp;the&nbsp;end&nbsp;date&nbsp;if&nbsp;explicitly&nbsp;changed&nbsp;to&nbsp;null<a name="line_9698"></a></li>
<li id="line_9699" class="odd"><span class="lineNumber">&nbsp;9699&nbsp;</span>		clearEnd&nbsp;=&nbsp;event._end&nbsp;!==&nbsp;null&nbsp;&amp;&amp;&nbsp;newProps.end&nbsp;===&nbsp;null;<a name="line_9699"></a></li>
<li id="line_9700" class="even"><span class="lineNumber">&nbsp;9700&nbsp;</span><a name="line_9700"></a></li>
<li id="line_9701" class="odd"><span class="lineNumber">&nbsp;9701&nbsp;</span>		//&nbsp;compute&nbsp;the&nbsp;delta&nbsp;for&nbsp;moving&nbsp;the&nbsp;start&nbsp;date<a name="line_9701"></a></li>
<li id="line_9702" class="even"><span class="lineNumber">&nbsp;9702&nbsp;</span>		startDelta&nbsp;=&nbsp;diffDates(newProps.start,&nbsp;oldProps.start);<a name="line_9702"></a></li>
<li id="line_9703" class="odd"><span class="lineNumber">&nbsp;9703&nbsp;</span><a name="line_9703"></a></li>
<li id="line_9704" class="even"><span class="lineNumber">&nbsp;9704&nbsp;</span>		//&nbsp;compute&nbsp;the&nbsp;delta&nbsp;for&nbsp;moving&nbsp;the&nbsp;end&nbsp;date<a name="line_9704"></a></li>
<li id="line_9705" class="odd"><span class="lineNumber">&nbsp;9705&nbsp;</span>		if&nbsp;(newProps.end)&nbsp;{<a name="line_9705"></a></li>
<li id="line_9706" class="even"><span class="lineNumber">&nbsp;9706&nbsp;</span>			endDelta&nbsp;=&nbsp;diffDates(newProps.end,&nbsp;oldProps.end);<a name="line_9706"></a></li>
<li id="line_9707" class="odd"><span class="lineNumber">&nbsp;9707&nbsp;</span>			durationDelta&nbsp;=&nbsp;endDelta.subtract(startDelta);<a name="line_9707"></a></li>
<li id="line_9708" class="even"><span class="lineNumber">&nbsp;9708&nbsp;</span>		}<a name="line_9708"></a></li>
<li id="line_9709" class="odd"><span class="lineNumber">&nbsp;9709&nbsp;</span>		else&nbsp;{<a name="line_9709"></a></li>
<li id="line_9710" class="even"><span class="lineNumber">&nbsp;9710&nbsp;</span>			durationDelta&nbsp;=&nbsp;null;<a name="line_9710"></a></li>
<li id="line_9711" class="odd"><span class="lineNumber">&nbsp;9711&nbsp;</span>		}<a name="line_9711"></a></li>
<li id="line_9712" class="even"><span class="lineNumber">&nbsp;9712&nbsp;</span><a name="line_9712"></a></li>
<li id="line_9713" class="odd"><span class="lineNumber">&nbsp;9713&nbsp;</span>		//&nbsp;gather&nbsp;all&nbsp;non-date-related&nbsp;properties<a name="line_9713"></a></li>
<li id="line_9714" class="even"><span class="lineNumber">&nbsp;9714&nbsp;</span>		$.each(newProps,&nbsp;function(name,&nbsp;val)&nbsp;{<a name="line_9714"></a></li>
<li id="line_9715" class="odd"><span class="lineNumber">&nbsp;9715&nbsp;</span>			if&nbsp;(isMiscEventPropName(name))&nbsp;{<a name="line_9715"></a></li>
<li id="line_9716" class="even"><span class="lineNumber">&nbsp;9716&nbsp;</span>				if&nbsp;(val&nbsp;!==&nbsp;undefined)&nbsp;{<a name="line_9716"></a></li>
<li id="line_9717" class="odd"><span class="lineNumber">&nbsp;9717&nbsp;</span>					miscProps[name]&nbsp;=&nbsp;val;<a name="line_9717"></a></li>
<li id="line_9718" class="even"><span class="lineNumber">&nbsp;9718&nbsp;</span>				}<a name="line_9718"></a></li>
<li id="line_9719" class="odd"><span class="lineNumber">&nbsp;9719&nbsp;</span>			}<a name="line_9719"></a></li>
<li id="line_9720" class="even"><span class="lineNumber">&nbsp;9720&nbsp;</span>		});<a name="line_9720"></a></li>
<li id="line_9721" class="odd"><span class="lineNumber">&nbsp;9721&nbsp;</span><a name="line_9721"></a></li>
<li id="line_9722" class="even"><span class="lineNumber">&nbsp;9722&nbsp;</span>		//&nbsp;apply&nbsp;the&nbsp;operations&nbsp;to&nbsp;the&nbsp;event&nbsp;and&nbsp;all&nbsp;related&nbsp;events<a name="line_9722"></a></li>
<li id="line_9723" class="odd"><span class="lineNumber">&nbsp;9723&nbsp;</span>		undoFunc&nbsp;=&nbsp;mutateEvents(<a name="line_9723"></a></li>
<li id="line_9724" class="even"><span class="lineNumber">&nbsp;9724&nbsp;</span>			clientEvents(event._id),&nbsp;//&nbsp;get&nbsp;events&nbsp;with&nbsp;this&nbsp;ID<a name="line_9724"></a></li>
<li id="line_9725" class="odd"><span class="lineNumber">&nbsp;9725&nbsp;</span>			clearEnd,<a name="line_9725"></a></li>
<li id="line_9726" class="even"><span class="lineNumber">&nbsp;9726&nbsp;</span>			newProps.allDay,<a name="line_9726"></a></li>
<li id="line_9727" class="odd"><span class="lineNumber">&nbsp;9727&nbsp;</span>			startDelta,<a name="line_9727"></a></li>
<li id="line_9728" class="even"><span class="lineNumber">&nbsp;9728&nbsp;</span>			durationDelta,<a name="line_9728"></a></li>
<li id="line_9729" class="odd"><span class="lineNumber">&nbsp;9729&nbsp;</span>			miscProps<a name="line_9729"></a></li>
<li id="line_9730" class="even"><span class="lineNumber">&nbsp;9730&nbsp;</span>		);<a name="line_9730"></a></li>
<li id="line_9731" class="odd"><span class="lineNumber">&nbsp;9731&nbsp;</span><a name="line_9731"></a></li>
<li id="line_9732" class="even"><span class="lineNumber">&nbsp;9732&nbsp;</span>		return&nbsp;{<a name="line_9732"></a></li>
<li id="line_9733" class="odd"><span class="lineNumber">&nbsp;9733&nbsp;</span>			dateDelta:&nbsp;startDelta,<a name="line_9733"></a></li>
<li id="line_9734" class="even"><span class="lineNumber">&nbsp;9734&nbsp;</span>			durationDelta:&nbsp;durationDelta,<a name="line_9734"></a></li>
<li id="line_9735" class="odd"><span class="lineNumber">&nbsp;9735&nbsp;</span>			undo:&nbsp;undoFunc<a name="line_9735"></a></li>
<li id="line_9736" class="even"><span class="lineNumber">&nbsp;9736&nbsp;</span>		};<a name="line_9736"></a></li>
<li id="line_9737" class="odd"><span class="lineNumber">&nbsp;9737&nbsp;</span>	}<a name="line_9737"></a></li>
<li id="line_9738" class="even"><span class="lineNumber">&nbsp;9738&nbsp;</span><a name="line_9738"></a></li>
<li id="line_9739" class="odd"><span class="lineNumber">&nbsp;9739&nbsp;</span><a name="line_9739"></a></li>
<li id="line_9740" class="even"><span class="lineNumber">&nbsp;9740&nbsp;</span>	//&nbsp;Modifies&nbsp;an&nbsp;array&nbsp;of&nbsp;events&nbsp;in&nbsp;the&nbsp;following&nbsp;ways&nbsp;(operations&nbsp;are&nbsp;in&nbsp;order):<a name="line_9740"></a></li>
<li id="line_9741" class="odd"><span class="lineNumber">&nbsp;9741&nbsp;</span>	//&nbsp;-&nbsp;clear&nbsp;the&nbsp;event's&nbsp;`end`<a name="line_9741"></a></li>
<li id="line_9742" class="even"><span class="lineNumber">&nbsp;9742&nbsp;</span>	//&nbsp;-&nbsp;convert&nbsp;the&nbsp;event&nbsp;to&nbsp;allDay<a name="line_9742"></a></li>
<li id="line_9743" class="odd"><span class="lineNumber">&nbsp;9743&nbsp;</span>	//&nbsp;-&nbsp;add&nbsp;`dateDelta`&nbsp;to&nbsp;the&nbsp;start&nbsp;and&nbsp;end<a name="line_9743"></a></li>
<li id="line_9744" class="even"><span class="lineNumber">&nbsp;9744&nbsp;</span>	//&nbsp;-&nbsp;add&nbsp;`durationDelta`&nbsp;to&nbsp;the&nbsp;event's&nbsp;duration<a name="line_9744"></a></li>
<li id="line_9745" class="odd"><span class="lineNumber">&nbsp;9745&nbsp;</span>	//&nbsp;-&nbsp;assign&nbsp;`miscProps`&nbsp;to&nbsp;the&nbsp;event<a name="line_9745"></a></li>
<li id="line_9746" class="even"><span class="lineNumber">&nbsp;9746&nbsp;</span>	//<a name="line_9746"></a></li>
<li id="line_9747" class="odd"><span class="lineNumber">&nbsp;9747&nbsp;</span>	//&nbsp;Returns&nbsp;a&nbsp;function&nbsp;that&nbsp;can&nbsp;be&nbsp;called&nbsp;to&nbsp;undo&nbsp;all&nbsp;the&nbsp;operations.<a name="line_9747"></a></li>
<li id="line_9748" class="even"><span class="lineNumber">&nbsp;9748&nbsp;</span>	//<a name="line_9748"></a></li>
<li id="line_9749" class="odd"><span class="lineNumber">&nbsp;9749&nbsp;</span>	//&nbsp;TODO:&nbsp;don't&nbsp;use&nbsp;so&nbsp;many&nbsp;closures.&nbsp;possible&nbsp;memory&nbsp;issues&nbsp;when&nbsp;lots&nbsp;of&nbsp;events&nbsp;with&nbsp;same&nbsp;ID.<a name="line_9749"></a></li>
<li id="line_9750" class="even"><span class="lineNumber">&nbsp;9750&nbsp;</span>	//<a name="line_9750"></a></li>
<li id="line_9751" class="odd"><span class="lineNumber">&nbsp;9751&nbsp;</span>	function&nbsp;mutateEvents(events,&nbsp;clearEnd,&nbsp;allDay,&nbsp;dateDelta,&nbsp;durationDelta,&nbsp;miscProps)&nbsp;{<a name="line_9751"></a></li>
<li id="line_9752" class="even"><span class="lineNumber">&nbsp;9752&nbsp;</span>		var&nbsp;isAmbigTimezone&nbsp;=&nbsp;t.getIsAmbigTimezone();<a name="line_9752"></a></li>
<li id="line_9753" class="odd"><span class="lineNumber">&nbsp;9753&nbsp;</span>		var&nbsp;undoFunctions&nbsp;=&nbsp;[];<a name="line_9753"></a></li>
<li id="line_9754" class="even"><span class="lineNumber">&nbsp;9754&nbsp;</span><a name="line_9754"></a></li>
<li id="line_9755" class="odd"><span class="lineNumber">&nbsp;9755&nbsp;</span>		//&nbsp;normalize&nbsp;zero-length&nbsp;deltas&nbsp;to&nbsp;be&nbsp;null<a name="line_9755"></a></li>
<li id="line_9756" class="even"><span class="lineNumber">&nbsp;9756&nbsp;</span>		if&nbsp;(dateDelta&nbsp;&amp;&amp;&nbsp;!dateDelta.valueOf())&nbsp;{&nbsp;dateDelta&nbsp;=&nbsp;null;&nbsp;}<a name="line_9756"></a></li>
<li id="line_9757" class="odd"><span class="lineNumber">&nbsp;9757&nbsp;</span>		if&nbsp;(durationDelta&nbsp;&amp;&amp;&nbsp;!durationDelta.valueOf())&nbsp;{&nbsp;durationDelta&nbsp;=&nbsp;null;&nbsp;}<a name="line_9757"></a></li>
<li id="line_9758" class="even"><span class="lineNumber">&nbsp;9758&nbsp;</span><a name="line_9758"></a></li>
<li id="line_9759" class="odd"><span class="lineNumber">&nbsp;9759&nbsp;</span>		$.each(events,&nbsp;function(i,&nbsp;event)&nbsp;{<a name="line_9759"></a></li>
<li id="line_9760" class="even"><span class="lineNumber">&nbsp;9760&nbsp;</span>			var&nbsp;oldProps;<a name="line_9760"></a></li>
<li id="line_9761" class="odd"><span class="lineNumber">&nbsp;9761&nbsp;</span>			var&nbsp;newProps;<a name="line_9761"></a></li>
<li id="line_9762" class="even"><span class="lineNumber">&nbsp;9762&nbsp;</span><a name="line_9762"></a></li>
<li id="line_9763" class="odd"><span class="lineNumber">&nbsp;9763&nbsp;</span>			//&nbsp;build&nbsp;an&nbsp;object&nbsp;holding&nbsp;all&nbsp;the&nbsp;old&nbsp;values,&nbsp;both&nbsp;date-related&nbsp;and&nbsp;misc.<a name="line_9763"></a></li>
<li id="line_9764" class="even"><span class="lineNumber">&nbsp;9764&nbsp;</span>			//&nbsp;for&nbsp;the&nbsp;undo&nbsp;function.<a name="line_9764"></a></li>
<li id="line_9765" class="odd"><span class="lineNumber">&nbsp;9765&nbsp;</span>			oldProps&nbsp;=&nbsp;{<a name="line_9765"></a></li>
<li id="line_9766" class="even"><span class="lineNumber">&nbsp;9766&nbsp;</span>				start:&nbsp;event.start.clone(),<a name="line_9766"></a></li>
<li id="line_9767" class="odd"><span class="lineNumber">&nbsp;9767&nbsp;</span>				end:&nbsp;event.end&nbsp;?&nbsp;event.end.clone()&nbsp;:&nbsp;null,<a name="line_9767"></a></li>
<li id="line_9768" class="even"><span class="lineNumber">&nbsp;9768&nbsp;</span>				allDay:&nbsp;event.allDay<a name="line_9768"></a></li>
<li id="line_9769" class="odd"><span class="lineNumber">&nbsp;9769&nbsp;</span>			};<a name="line_9769"></a></li>
<li id="line_9770" class="even"><span class="lineNumber">&nbsp;9770&nbsp;</span>			$.each(miscProps,&nbsp;function(name)&nbsp;{<a name="line_9770"></a></li>
<li id="line_9771" class="odd"><span class="lineNumber">&nbsp;9771&nbsp;</span>				oldProps[name]&nbsp;=&nbsp;event[name];<a name="line_9771"></a></li>
<li id="line_9772" class="even"><span class="lineNumber">&nbsp;9772&nbsp;</span>			});<a name="line_9772"></a></li>
<li id="line_9773" class="odd"><span class="lineNumber">&nbsp;9773&nbsp;</span><a name="line_9773"></a></li>
<li id="line_9774" class="even"><span class="lineNumber">&nbsp;9774&nbsp;</span>			//&nbsp;new&nbsp;date-related&nbsp;properties.&nbsp;work&nbsp;off&nbsp;the&nbsp;original&nbsp;date&nbsp;snapshot.<a name="line_9774"></a></li>
<li id="line_9775" class="odd"><span class="lineNumber">&nbsp;9775&nbsp;</span>			//&nbsp;ok&nbsp;to&nbsp;use&nbsp;references&nbsp;because&nbsp;they&nbsp;will&nbsp;be&nbsp;thrown&nbsp;away&nbsp;when&nbsp;backupEventDates&nbsp;is&nbsp;called.<a name="line_9775"></a></li>
<li id="line_9776" class="even"><span class="lineNumber">&nbsp;9776&nbsp;</span>			newProps&nbsp;=&nbsp;{<a name="line_9776"></a></li>
<li id="line_9777" class="odd"><span class="lineNumber">&nbsp;9777&nbsp;</span>				start:&nbsp;event._start,<a name="line_9777"></a></li>
<li id="line_9778" class="even"><span class="lineNumber">&nbsp;9778&nbsp;</span>				end:&nbsp;event._end,<a name="line_9778"></a></li>
<li id="line_9779" class="odd"><span class="lineNumber">&nbsp;9779&nbsp;</span>				allDay:&nbsp;allDay&nbsp;//&nbsp;normalize&nbsp;the&nbsp;dates&nbsp;in&nbsp;the&nbsp;same&nbsp;regard&nbsp;as&nbsp;the&nbsp;new&nbsp;properties<a name="line_9779"></a></li>
<li id="line_9780" class="even"><span class="lineNumber">&nbsp;9780&nbsp;</span>			};<a name="line_9780"></a></li>
<li id="line_9781" class="odd"><span class="lineNumber">&nbsp;9781&nbsp;</span>			normalizeEventRange(newProps);&nbsp;//&nbsp;massages&nbsp;start/end/allDay<a name="line_9781"></a></li>
<li id="line_9782" class="even"><span class="lineNumber">&nbsp;9782&nbsp;</span><a name="line_9782"></a></li>
<li id="line_9783" class="odd"><span class="lineNumber">&nbsp;9783&nbsp;</span>			//&nbsp;strip&nbsp;or&nbsp;ensure&nbsp;the&nbsp;end&nbsp;date<a name="line_9783"></a></li>
<li id="line_9784" class="even"><span class="lineNumber">&nbsp;9784&nbsp;</span>			if&nbsp;(clearEnd)&nbsp;{<a name="line_9784"></a></li>
<li id="line_9785" class="odd"><span class="lineNumber">&nbsp;9785&nbsp;</span>				newProps.end&nbsp;=&nbsp;null;<a name="line_9785"></a></li>
<li id="line_9786" class="even"><span class="lineNumber">&nbsp;9786&nbsp;</span>			}<a name="line_9786"></a></li>
<li id="line_9787" class="odd"><span class="lineNumber">&nbsp;9787&nbsp;</span>			else&nbsp;if&nbsp;(durationDelta&nbsp;&amp;&amp;&nbsp;!newProps.end)&nbsp;{&nbsp;//&nbsp;the&nbsp;duration&nbsp;translation&nbsp;requires&nbsp;an&nbsp;end&nbsp;date<a name="line_9787"></a></li>
<li id="line_9788" class="even"><span class="lineNumber">&nbsp;9788&nbsp;</span>				newProps.end&nbsp;=&nbsp;t.getDefaultEventEnd(newProps.allDay,&nbsp;newProps.start);<a name="line_9788"></a></li>
<li id="line_9789" class="odd"><span class="lineNumber">&nbsp;9789&nbsp;</span>			}<a name="line_9789"></a></li>
<li id="line_9790" class="even"><span class="lineNumber">&nbsp;9790&nbsp;</span><a name="line_9790"></a></li>
<li id="line_9791" class="odd"><span class="lineNumber">&nbsp;9791&nbsp;</span>			if&nbsp;(dateDelta)&nbsp;{<a name="line_9791"></a></li>
<li id="line_9792" class="even"><span class="lineNumber">&nbsp;9792&nbsp;</span>				newProps.start.add(dateDelta);<a name="line_9792"></a></li>
<li id="line_9793" class="odd"><span class="lineNumber">&nbsp;9793&nbsp;</span>				if&nbsp;(newProps.end)&nbsp;{<a name="line_9793"></a></li>
<li id="line_9794" class="even"><span class="lineNumber">&nbsp;9794&nbsp;</span>					newProps.end.add(dateDelta);<a name="line_9794"></a></li>
<li id="line_9795" class="odd"><span class="lineNumber">&nbsp;9795&nbsp;</span>				}<a name="line_9795"></a></li>
<li id="line_9796" class="even"><span class="lineNumber">&nbsp;9796&nbsp;</span>			}<a name="line_9796"></a></li>
<li id="line_9797" class="odd"><span class="lineNumber">&nbsp;9797&nbsp;</span><a name="line_9797"></a></li>
<li id="line_9798" class="even"><span class="lineNumber">&nbsp;9798&nbsp;</span>			if&nbsp;(durationDelta)&nbsp;{<a name="line_9798"></a></li>
<li id="line_9799" class="odd"><span class="lineNumber">&nbsp;9799&nbsp;</span>				newProps.end.add(durationDelta);&nbsp;//&nbsp;end&nbsp;already&nbsp;ensured&nbsp;above<a name="line_9799"></a></li>
<li id="line_9800" class="even"><span class="lineNumber">&nbsp;9800&nbsp;</span>			}<a name="line_9800"></a></li>
<li id="line_9801" class="odd"><span class="lineNumber">&nbsp;9801&nbsp;</span><a name="line_9801"></a></li>
<li id="line_9802" class="even"><span class="lineNumber">&nbsp;9802&nbsp;</span>			//&nbsp;if&nbsp;the&nbsp;dates&nbsp;have&nbsp;changed,&nbsp;and&nbsp;we&nbsp;know&nbsp;it&nbsp;is&nbsp;impossible&nbsp;to&nbsp;recompute&nbsp;the<a name="line_9802"></a></li>
<li id="line_9803" class="odd"><span class="lineNumber">&nbsp;9803&nbsp;</span>			//&nbsp;timezone&nbsp;offsets,&nbsp;strip&nbsp;the&nbsp;zone.<a name="line_9803"></a></li>
<li id="line_9804" class="even"><span class="lineNumber">&nbsp;9804&nbsp;</span>			if&nbsp;(<a name="line_9804"></a></li>
<li id="line_9805" class="odd"><span class="lineNumber">&nbsp;9805&nbsp;</span>				isAmbigTimezone&nbsp;&amp;&amp;<a name="line_9805"></a></li>
<li id="line_9806" class="even"><span class="lineNumber">&nbsp;9806&nbsp;</span>				!newProps.allDay&nbsp;&amp;&amp;<a name="line_9806"></a></li>
<li id="line_9807" class="odd"><span class="lineNumber">&nbsp;9807&nbsp;</span>				(dateDelta&nbsp;||&nbsp;durationDelta)<a name="line_9807"></a></li>
<li id="line_9808" class="even"><span class="lineNumber">&nbsp;9808&nbsp;</span>			)&nbsp;{<a name="line_9808"></a></li>
<li id="line_9809" class="odd"><span class="lineNumber">&nbsp;9809&nbsp;</span>				newProps.start.stripZone();<a name="line_9809"></a></li>
<li id="line_9810" class="even"><span class="lineNumber">&nbsp;9810&nbsp;</span>				if&nbsp;(newProps.end)&nbsp;{<a name="line_9810"></a></li>
<li id="line_9811" class="odd"><span class="lineNumber">&nbsp;9811&nbsp;</span>					newProps.end.stripZone();<a name="line_9811"></a></li>
<li id="line_9812" class="even"><span class="lineNumber">&nbsp;9812&nbsp;</span>				}<a name="line_9812"></a></li>
<li id="line_9813" class="odd"><span class="lineNumber">&nbsp;9813&nbsp;</span>			}<a name="line_9813"></a></li>
<li id="line_9814" class="even"><span class="lineNumber">&nbsp;9814&nbsp;</span><a name="line_9814"></a></li>
<li id="line_9815" class="odd"><span class="lineNumber">&nbsp;9815&nbsp;</span>			$.extend(event,&nbsp;miscProps,&nbsp;newProps);&nbsp;//&nbsp;copy&nbsp;over&nbsp;misc&nbsp;props,&nbsp;then&nbsp;date-related&nbsp;props<a name="line_9815"></a></li>
<li id="line_9816" class="even"><span class="lineNumber">&nbsp;9816&nbsp;</span>			backupEventDates(event);&nbsp;//&nbsp;regenerate&nbsp;internal&nbsp;_start/_end/_allDay<a name="line_9816"></a></li>
<li id="line_9817" class="odd"><span class="lineNumber">&nbsp;9817&nbsp;</span><a name="line_9817"></a></li>
<li id="line_9818" class="even"><span class="lineNumber">&nbsp;9818&nbsp;</span>			undoFunctions.push(function()&nbsp;{<a name="line_9818"></a></li>
<li id="line_9819" class="odd"><span class="lineNumber">&nbsp;9819&nbsp;</span>				$.extend(event,&nbsp;oldProps);<a name="line_9819"></a></li>
<li id="line_9820" class="even"><span class="lineNumber">&nbsp;9820&nbsp;</span>				backupEventDates(event);&nbsp;//&nbsp;regenerate&nbsp;internal&nbsp;_start/_end/_allDay<a name="line_9820"></a></li>
<li id="line_9821" class="odd"><span class="lineNumber">&nbsp;9821&nbsp;</span>			});<a name="line_9821"></a></li>
<li id="line_9822" class="even"><span class="lineNumber">&nbsp;9822&nbsp;</span>		});<a name="line_9822"></a></li>
<li id="line_9823" class="odd"><span class="lineNumber">&nbsp;9823&nbsp;</span><a name="line_9823"></a></li>
<li id="line_9824" class="even"><span class="lineNumber">&nbsp;9824&nbsp;</span>		return&nbsp;function()&nbsp;{<a name="line_9824"></a></li>
<li id="line_9825" class="odd"><span class="lineNumber">&nbsp;9825&nbsp;</span>			for&nbsp;(var&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;undoFunctions.length;&nbsp;i++)&nbsp;{<a name="line_9825"></a></li>
<li id="line_9826" class="even"><span class="lineNumber">&nbsp;9826&nbsp;</span>				undoFunctions[i]();<a name="line_9826"></a></li>
<li id="line_9827" class="odd"><span class="lineNumber">&nbsp;9827&nbsp;</span>			}<a name="line_9827"></a></li>
<li id="line_9828" class="even"><span class="lineNumber">&nbsp;9828&nbsp;</span>		};<a name="line_9828"></a></li>
<li id="line_9829" class="odd"><span class="lineNumber">&nbsp;9829&nbsp;</span>	}<a name="line_9829"></a></li>
<li id="line_9830" class="even"><span class="lineNumber">&nbsp;9830&nbsp;</span><a name="line_9830"></a></li>
<li id="line_9831" class="odd"><span class="lineNumber">&nbsp;9831&nbsp;</span><a name="line_9831"></a></li>
<li id="line_9832" class="even"><span class="lineNumber">&nbsp;9832&nbsp;</span>	/*&nbsp;Business&nbsp;Hours<a name="line_9832"></a></li>
<li id="line_9833" class="odd"><span class="lineNumber">&nbsp;9833&nbsp;</span>	-----------------------------------------------------------------------------------------*/<a name="line_9833"></a></li>
<li id="line_9834" class="even"><span class="lineNumber">&nbsp;9834&nbsp;</span><a name="line_9834"></a></li>
<li id="line_9835" class="odd"><span class="lineNumber">&nbsp;9835&nbsp;</span>	t.getBusinessHoursEvents&nbsp;=&nbsp;getBusinessHoursEvents;<a name="line_9835"></a></li>
<li id="line_9836" class="even"><span class="lineNumber">&nbsp;9836&nbsp;</span><a name="line_9836"></a></li>
<li id="line_9837" class="odd"><span class="lineNumber">&nbsp;9837&nbsp;</span><a name="line_9837"></a></li>
<li id="line_9838" class="even"><span class="lineNumber">&nbsp;9838&nbsp;</span>	//&nbsp;Returns&nbsp;an&nbsp;array&nbsp;of&nbsp;events&nbsp;as&nbsp;to&nbsp;when&nbsp;the&nbsp;business&nbsp;hours&nbsp;occur&nbsp;in&nbsp;the&nbsp;given&nbsp;view.<a name="line_9838"></a></li>
<li id="line_9839" class="odd"><span class="lineNumber">&nbsp;9839&nbsp;</span>	//&nbsp;Abuse&nbsp;of&nbsp;our&nbsp;event&nbsp;system&nbsp;:(<a name="line_9839"></a></li>
<li id="line_9840" class="even"><span class="lineNumber">&nbsp;9840&nbsp;</span>	function&nbsp;getBusinessHoursEvents(wholeDay)&nbsp;{<a name="line_9840"></a></li>
<li id="line_9841" class="odd"><span class="lineNumber">&nbsp;9841&nbsp;</span>		var&nbsp;optionVal&nbsp;=&nbsp;options.businessHours;<a name="line_9841"></a></li>
<li id="line_9842" class="even"><span class="lineNumber">&nbsp;9842&nbsp;</span>		var&nbsp;defaultVal&nbsp;=&nbsp;{<a name="line_9842"></a></li>
<li id="line_9843" class="odd"><span class="lineNumber">&nbsp;9843&nbsp;</span>			className:&nbsp;'fc-nonbusiness',<a name="line_9843"></a></li>
<li id="line_9844" class="even"><span class="lineNumber">&nbsp;9844&nbsp;</span>			start:&nbsp;'09:00',<a name="line_9844"></a></li>
<li id="line_9845" class="odd"><span class="lineNumber">&nbsp;9845&nbsp;</span>			end:&nbsp;'17:00',<a name="line_9845"></a></li>
<li id="line_9846" class="even"><span class="lineNumber">&nbsp;9846&nbsp;</span>			dow:&nbsp;[&nbsp;1,&nbsp;2,&nbsp;3,&nbsp;4,&nbsp;5&nbsp;],&nbsp;//&nbsp;monday&nbsp;-&nbsp;friday<a name="line_9846"></a></li>
<li id="line_9847" class="odd"><span class="lineNumber">&nbsp;9847&nbsp;</span>			rendering:&nbsp;'inverse-background'<a name="line_9847"></a></li>
<li id="line_9848" class="even"><span class="lineNumber">&nbsp;9848&nbsp;</span>		};<a name="line_9848"></a></li>
<li id="line_9849" class="odd"><span class="lineNumber">&nbsp;9849&nbsp;</span>		var&nbsp;view&nbsp;=&nbsp;t.getView();<a name="line_9849"></a></li>
<li id="line_9850" class="even"><span class="lineNumber">&nbsp;9850&nbsp;</span>		var&nbsp;eventInput;<a name="line_9850"></a></li>
<li id="line_9851" class="odd"><span class="lineNumber">&nbsp;9851&nbsp;</span><a name="line_9851"></a></li>
<li id="line_9852" class="even"><span class="lineNumber">&nbsp;9852&nbsp;</span>		if&nbsp;(optionVal)&nbsp;{&nbsp;//&nbsp;`true`&nbsp;(which&nbsp;means&nbsp;"use&nbsp;the&nbsp;defaults")&nbsp;or&nbsp;an&nbsp;override&nbsp;object<a name="line_9852"></a></li>
<li id="line_9853" class="odd"><span class="lineNumber">&nbsp;9853&nbsp;</span>			eventInput&nbsp;=&nbsp;$.extend(<a name="line_9853"></a></li>
<li id="line_9854" class="even"><span class="lineNumber">&nbsp;9854&nbsp;</span>				{},&nbsp;//&nbsp;copy&nbsp;to&nbsp;a&nbsp;new&nbsp;object&nbsp;in&nbsp;either&nbsp;case<a name="line_9854"></a></li>
<li id="line_9855" class="odd"><span class="lineNumber">&nbsp;9855&nbsp;</span>				defaultVal,<a name="line_9855"></a></li>
<li id="line_9856" class="even"><span class="lineNumber">&nbsp;9856&nbsp;</span>				typeof&nbsp;optionVal&nbsp;===&nbsp;'object'&nbsp;?&nbsp;optionVal&nbsp;:&nbsp;{}&nbsp;//&nbsp;override&nbsp;the&nbsp;defaults<a name="line_9856"></a></li>
<li id="line_9857" class="odd"><span class="lineNumber">&nbsp;9857&nbsp;</span>			);<a name="line_9857"></a></li>
<li id="line_9858" class="even"><span class="lineNumber">&nbsp;9858&nbsp;</span>		}<a name="line_9858"></a></li>
<li id="line_9859" class="odd"><span class="lineNumber">&nbsp;9859&nbsp;</span><a name="line_9859"></a></li>
<li id="line_9860" class="even"><span class="lineNumber">&nbsp;9860&nbsp;</span>		if&nbsp;(eventInput)&nbsp;{<a name="line_9860"></a></li>
<li id="line_9861" class="odd"><span class="lineNumber">&nbsp;9861&nbsp;</span><a name="line_9861"></a></li>
<li id="line_9862" class="even"><span class="lineNumber">&nbsp;9862&nbsp;</span>			//&nbsp;if&nbsp;a&nbsp;whole-day&nbsp;series&nbsp;is&nbsp;requested,&nbsp;clear&nbsp;the&nbsp;start/end&nbsp;times<a name="line_9862"></a></li>
<li id="line_9863" class="odd"><span class="lineNumber">&nbsp;9863&nbsp;</span>			if&nbsp;(wholeDay)&nbsp;{<a name="line_9863"></a></li>
<li id="line_9864" class="even"><span class="lineNumber">&nbsp;9864&nbsp;</span>				eventInput.start&nbsp;=&nbsp;null;<a name="line_9864"></a></li>
<li id="line_9865" class="odd"><span class="lineNumber">&nbsp;9865&nbsp;</span>				eventInput.end&nbsp;=&nbsp;null;<a name="line_9865"></a></li>
<li id="line_9866" class="even"><span class="lineNumber">&nbsp;9866&nbsp;</span>			}<a name="line_9866"></a></li>
<li id="line_9867" class="odd"><span class="lineNumber">&nbsp;9867&nbsp;</span><a name="line_9867"></a></li>
<li id="line_9868" class="even"><span class="lineNumber">&nbsp;9868&nbsp;</span>			return&nbsp;expandEvent(<a name="line_9868"></a></li>
<li id="line_9869" class="odd"><span class="lineNumber">&nbsp;9869&nbsp;</span>				buildEventFromInput(eventInput),<a name="line_9869"></a></li>
<li id="line_9870" class="even"><span class="lineNumber">&nbsp;9870&nbsp;</span>				view.start,<a name="line_9870"></a></li>
<li id="line_9871" class="odd"><span class="lineNumber">&nbsp;9871&nbsp;</span>				view.end<a name="line_9871"></a></li>
<li id="line_9872" class="even"><span class="lineNumber">&nbsp;9872&nbsp;</span>			);<a name="line_9872"></a></li>
<li id="line_9873" class="odd"><span class="lineNumber">&nbsp;9873&nbsp;</span>		}<a name="line_9873"></a></li>
<li id="line_9874" class="even"><span class="lineNumber">&nbsp;9874&nbsp;</span><a name="line_9874"></a></li>
<li id="line_9875" class="odd"><span class="lineNumber">&nbsp;9875&nbsp;</span>		return&nbsp;[];<a name="line_9875"></a></li>
<li id="line_9876" class="even"><span class="lineNumber">&nbsp;9876&nbsp;</span>	}<a name="line_9876"></a></li>
<li id="line_9877" class="odd"><span class="lineNumber">&nbsp;9877&nbsp;</span><a name="line_9877"></a></li>
<li id="line_9878" class="even"><span class="lineNumber">&nbsp;9878&nbsp;</span><a name="line_9878"></a></li>
<li id="line_9879" class="odd"><span class="lineNumber">&nbsp;9879&nbsp;</span>	/*&nbsp;Overlapping&nbsp;/&nbsp;Constraining<a name="line_9879"></a></li>
<li id="line_9880" class="even"><span class="lineNumber">&nbsp;9880&nbsp;</span>	-----------------------------------------------------------------------------------------*/<a name="line_9880"></a></li>
<li id="line_9881" class="odd"><span class="lineNumber">&nbsp;9881&nbsp;</span><a name="line_9881"></a></li>
<li id="line_9882" class="even"><span class="lineNumber">&nbsp;9882&nbsp;</span>	t.isEventRangeAllowed&nbsp;=&nbsp;isEventRangeAllowed;<a name="line_9882"></a></li>
<li id="line_9883" class="odd"><span class="lineNumber">&nbsp;9883&nbsp;</span>	t.isSelectionRangeAllowed&nbsp;=&nbsp;isSelectionRangeAllowed;<a name="line_9883"></a></li>
<li id="line_9884" class="even"><span class="lineNumber">&nbsp;9884&nbsp;</span>	t.isExternalDropRangeAllowed&nbsp;=&nbsp;isExternalDropRangeAllowed;<a name="line_9884"></a></li>
<li id="line_9885" class="odd"><span class="lineNumber">&nbsp;9885&nbsp;</span><a name="line_9885"></a></li>
<li id="line_9886" class="even"><span class="lineNumber">&nbsp;9886&nbsp;</span><a name="line_9886"></a></li>
<li id="line_9887" class="odd"><span class="lineNumber">&nbsp;9887&nbsp;</span>	function&nbsp;isEventRangeAllowed(range,&nbsp;event)&nbsp;{<a name="line_9887"></a></li>
<li id="line_9888" class="even"><span class="lineNumber">&nbsp;9888&nbsp;</span>		var&nbsp;source&nbsp;=&nbsp;event.source&nbsp;||&nbsp;{};<a name="line_9888"></a></li>
<li id="line_9889" class="odd"><span class="lineNumber">&nbsp;9889&nbsp;</span>		var&nbsp;constraint&nbsp;=&nbsp;firstDefined(<a name="line_9889"></a></li>
<li id="line_9890" class="even"><span class="lineNumber">&nbsp;9890&nbsp;</span>			event.constraint,<a name="line_9890"></a></li>
<li id="line_9891" class="odd"><span class="lineNumber">&nbsp;9891&nbsp;</span>			source.constraint,<a name="line_9891"></a></li>
<li id="line_9892" class="even"><span class="lineNumber">&nbsp;9892&nbsp;</span>			options.eventConstraint<a name="line_9892"></a></li>
<li id="line_9893" class="odd"><span class="lineNumber">&nbsp;9893&nbsp;</span>		);<a name="line_9893"></a></li>
<li id="line_9894" class="even"><span class="lineNumber">&nbsp;9894&nbsp;</span>		var&nbsp;overlap&nbsp;=&nbsp;firstDefined(<a name="line_9894"></a></li>
<li id="line_9895" class="odd"><span class="lineNumber">&nbsp;9895&nbsp;</span>			event.overlap,<a name="line_9895"></a></li>
<li id="line_9896" class="even"><span class="lineNumber">&nbsp;9896&nbsp;</span>			source.overlap,<a name="line_9896"></a></li>
<li id="line_9897" class="odd"><span class="lineNumber">&nbsp;9897&nbsp;</span>			options.eventOverlap<a name="line_9897"></a></li>
<li id="line_9898" class="even"><span class="lineNumber">&nbsp;9898&nbsp;</span>		);<a name="line_9898"></a></li>
<li id="line_9899" class="odd"><span class="lineNumber">&nbsp;9899&nbsp;</span><a name="line_9899"></a></li>
<li id="line_9900" class="even"><span class="lineNumber">&nbsp;9900&nbsp;</span>		range&nbsp;=&nbsp;ensureVisibleEventRange(range);&nbsp;//&nbsp;ensure&nbsp;a&nbsp;proper&nbsp;range&nbsp;with&nbsp;an&nbsp;end&nbsp;for&nbsp;isRangeAllowed<a name="line_9900"></a></li>
<li id="line_9901" class="odd"><span class="lineNumber">&nbsp;9901&nbsp;</span><a name="line_9901"></a></li>
<li id="line_9902" class="even"><span class="lineNumber">&nbsp;9902&nbsp;</span>		return&nbsp;isRangeAllowed(range,&nbsp;constraint,&nbsp;overlap,&nbsp;event);<a name="line_9902"></a></li>
<li id="line_9903" class="odd"><span class="lineNumber">&nbsp;9903&nbsp;</span>	}<a name="line_9903"></a></li>
<li id="line_9904" class="even"><span class="lineNumber">&nbsp;9904&nbsp;</span><a name="line_9904"></a></li>
<li id="line_9905" class="odd"><span class="lineNumber">&nbsp;9905&nbsp;</span><a name="line_9905"></a></li>
<li id="line_9906" class="even"><span class="lineNumber">&nbsp;9906&nbsp;</span>	function&nbsp;isSelectionRangeAllowed(range)&nbsp;{<a name="line_9906"></a></li>
<li id="line_9907" class="odd"><span class="lineNumber">&nbsp;9907&nbsp;</span>		return&nbsp;isRangeAllowed(range,&nbsp;options.selectConstraint,&nbsp;options.selectOverlap);<a name="line_9907"></a></li>
<li id="line_9908" class="even"><span class="lineNumber">&nbsp;9908&nbsp;</span>	}<a name="line_9908"></a></li>
<li id="line_9909" class="odd"><span class="lineNumber">&nbsp;9909&nbsp;</span><a name="line_9909"></a></li>
<li id="line_9910" class="even"><span class="lineNumber">&nbsp;9910&nbsp;</span><a name="line_9910"></a></li>
<li id="line_9911" class="odd"><span class="lineNumber">&nbsp;9911&nbsp;</span>	//&nbsp;when&nbsp;`eventProps`&nbsp;is&nbsp;defined,&nbsp;consider&nbsp;this&nbsp;an&nbsp;event.<a name="line_9911"></a></li>
<li id="line_9912" class="even"><span class="lineNumber">&nbsp;9912&nbsp;</span>	//&nbsp;`eventProps`&nbsp;can&nbsp;contain&nbsp;misc&nbsp;non-date-related&nbsp;info&nbsp;about&nbsp;the&nbsp;event.<a name="line_9912"></a></li>
<li id="line_9913" class="odd"><span class="lineNumber">&nbsp;9913&nbsp;</span>	function&nbsp;isExternalDropRangeAllowed(range,&nbsp;eventProps)&nbsp;{<a name="line_9913"></a></li>
<li id="line_9914" class="even"><span class="lineNumber">&nbsp;9914&nbsp;</span>		var&nbsp;eventInput;<a name="line_9914"></a></li>
<li id="line_9915" class="odd"><span class="lineNumber">&nbsp;9915&nbsp;</span>		var&nbsp;event;<a name="line_9915"></a></li>
<li id="line_9916" class="even"><span class="lineNumber">&nbsp;9916&nbsp;</span><a name="line_9916"></a></li>
<li id="line_9917" class="odd"><span class="lineNumber">&nbsp;9917&nbsp;</span>		//&nbsp;note:&nbsp;very&nbsp;similar&nbsp;logic&nbsp;is&nbsp;in&nbsp;View's&nbsp;reportExternalDrop<a name="line_9917"></a></li>
<li id="line_9918" class="even"><span class="lineNumber">&nbsp;9918&nbsp;</span>		if&nbsp;(eventProps)&nbsp;{<a name="line_9918"></a></li>
<li id="line_9919" class="odd"><span class="lineNumber">&nbsp;9919&nbsp;</span>			eventInput&nbsp;=&nbsp;$.extend({},&nbsp;eventProps,&nbsp;range);<a name="line_9919"></a></li>
<li id="line_9920" class="even"><span class="lineNumber">&nbsp;9920&nbsp;</span>			event&nbsp;=&nbsp;expandEvent(buildEventFromInput(eventInput))[0];<a name="line_9920"></a></li>
<li id="line_9921" class="odd"><span class="lineNumber">&nbsp;9921&nbsp;</span>		}<a name="line_9921"></a></li>
<li id="line_9922" class="even"><span class="lineNumber">&nbsp;9922&nbsp;</span><a name="line_9922"></a></li>
<li id="line_9923" class="odd"><span class="lineNumber">&nbsp;9923&nbsp;</span>		if&nbsp;(event)&nbsp;{<a name="line_9923"></a></li>
<li id="line_9924" class="even"><span class="lineNumber">&nbsp;9924&nbsp;</span>			return&nbsp;isEventRangeAllowed(range,&nbsp;event);<a name="line_9924"></a></li>
<li id="line_9925" class="odd"><span class="lineNumber">&nbsp;9925&nbsp;</span>		}<a name="line_9925"></a></li>
<li id="line_9926" class="even"><span class="lineNumber">&nbsp;9926&nbsp;</span>		else&nbsp;{&nbsp;//&nbsp;treat&nbsp;it&nbsp;as&nbsp;a&nbsp;selection<a name="line_9926"></a></li>
<li id="line_9927" class="odd"><span class="lineNumber">&nbsp;9927&nbsp;</span><a name="line_9927"></a></li>
<li id="line_9928" class="even"><span class="lineNumber">&nbsp;9928&nbsp;</span>			range&nbsp;=&nbsp;ensureVisibleEventRange(range);&nbsp;//&nbsp;ensure&nbsp;a&nbsp;proper&nbsp;range&nbsp;with&nbsp;an&nbsp;end&nbsp;for&nbsp;isSelectionRangeAllowed<a name="line_9928"></a></li>
<li id="line_9929" class="odd"><span class="lineNumber">&nbsp;9929&nbsp;</span><a name="line_9929"></a></li>
<li id="line_9930" class="even"><span class="lineNumber">&nbsp;9930&nbsp;</span>			return&nbsp;isSelectionRangeAllowed(range);<a name="line_9930"></a></li>
<li id="line_9931" class="odd"><span class="lineNumber">&nbsp;9931&nbsp;</span>		}<a name="line_9931"></a></li>
<li id="line_9932" class="even"><span class="lineNumber">&nbsp;9932&nbsp;</span>	}<a name="line_9932"></a></li>
<li id="line_9933" class="odd"><span class="lineNumber">&nbsp;9933&nbsp;</span><a name="line_9933"></a></li>
<li id="line_9934" class="even"><span class="lineNumber">&nbsp;9934&nbsp;</span><a name="line_9934"></a></li>
<li id="line_9935" class="odd"><span class="lineNumber">&nbsp;9935&nbsp;</span>	//&nbsp;Returns&nbsp;true&nbsp;if&nbsp;the&nbsp;given&nbsp;range&nbsp;(caused&nbsp;by&nbsp;an&nbsp;event&nbsp;drop/resize&nbsp;or&nbsp;a&nbsp;selection)&nbsp;is&nbsp;allowed&nbsp;to&nbsp;exist<a name="line_9935"></a></li>
<li id="line_9936" class="even"><span class="lineNumber">&nbsp;9936&nbsp;</span>	//&nbsp;according&nbsp;to&nbsp;the&nbsp;constraint/overlap&nbsp;settings.<a name="line_9936"></a></li>
<li id="line_9937" class="odd"><span class="lineNumber">&nbsp;9937&nbsp;</span>	//&nbsp;`event`&nbsp;is&nbsp;not&nbsp;required&nbsp;if&nbsp;checking&nbsp;a&nbsp;selection.<a name="line_9937"></a></li>
<li id="line_9938" class="even"><span class="lineNumber">&nbsp;9938&nbsp;</span>	function&nbsp;isRangeAllowed(range,&nbsp;constraint,&nbsp;overlap,&nbsp;event)&nbsp;{<a name="line_9938"></a></li>
<li id="line_9939" class="odd"><span class="lineNumber">&nbsp;9939&nbsp;</span>		var&nbsp;constraintEvents;<a name="line_9939"></a></li>
<li id="line_9940" class="even"><span class="lineNumber">&nbsp;9940&nbsp;</span>		var&nbsp;anyContainment;<a name="line_9940"></a></li>
<li id="line_9941" class="odd"><span class="lineNumber">&nbsp;9941&nbsp;</span>		var&nbsp;peerEvents;<a name="line_9941"></a></li>
<li id="line_9942" class="even"><span class="lineNumber">&nbsp;9942&nbsp;</span>		var&nbsp;i,&nbsp;peerEvent;<a name="line_9942"></a></li>
<li id="line_9943" class="odd"><span class="lineNumber">&nbsp;9943&nbsp;</span>		var&nbsp;peerOverlap;<a name="line_9943"></a></li>
<li id="line_9944" class="even"><span class="lineNumber">&nbsp;9944&nbsp;</span><a name="line_9944"></a></li>
<li id="line_9945" class="odd"><span class="lineNumber">&nbsp;9945&nbsp;</span>		//&nbsp;normalize.&nbsp;fyi,&nbsp;we're&nbsp;normalizing&nbsp;in&nbsp;too&nbsp;many&nbsp;places&nbsp;:(<a name="line_9945"></a></li>
<li id="line_9946" class="even"><span class="lineNumber">&nbsp;9946&nbsp;</span>		range&nbsp;=&nbsp;$.extend({},&nbsp;range);&nbsp;//&nbsp;copy&nbsp;all&nbsp;properties&nbsp;in&nbsp;case&nbsp;there&nbsp;are&nbsp;misc&nbsp;non-date&nbsp;properties<a name="line_9946"></a></li>
<li id="line_9947" class="odd"><span class="lineNumber">&nbsp;9947&nbsp;</span>		range.start&nbsp;=&nbsp;range.start.clone().stripZone();<a name="line_9947"></a></li>
<li id="line_9948" class="even"><span class="lineNumber">&nbsp;9948&nbsp;</span>		range.end&nbsp;=&nbsp;range.end.clone().stripZone();<a name="line_9948"></a></li>
<li id="line_9949" class="odd"><span class="lineNumber">&nbsp;9949&nbsp;</span><a name="line_9949"></a></li>
<li id="line_9950" class="even"><span class="lineNumber">&nbsp;9950&nbsp;</span>		//&nbsp;the&nbsp;range&nbsp;must&nbsp;be&nbsp;fully&nbsp;contained&nbsp;by&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;produced&nbsp;constraint&nbsp;events<a name="line_9950"></a></li>
<li id="line_9951" class="odd"><span class="lineNumber">&nbsp;9951&nbsp;</span>		if&nbsp;(constraint&nbsp;!=&nbsp;null)&nbsp;{<a name="line_9951"></a></li>
<li id="line_9952" class="even"><span class="lineNumber">&nbsp;9952&nbsp;</span><a name="line_9952"></a></li>
<li id="line_9953" class="odd"><span class="lineNumber">&nbsp;9953&nbsp;</span>			//&nbsp;not&nbsp;treated&nbsp;as&nbsp;an&nbsp;event!&nbsp;intermediate&nbsp;data&nbsp;structure<a name="line_9953"></a></li>
<li id="line_9954" class="even"><span class="lineNumber">&nbsp;9954&nbsp;</span>			//&nbsp;TODO:&nbsp;use&nbsp;ranges&nbsp;in&nbsp;the&nbsp;future<a name="line_9954"></a></li>
<li id="line_9955" class="odd"><span class="lineNumber">&nbsp;9955&nbsp;</span>			constraintEvents&nbsp;=&nbsp;constraintToEvents(constraint);<a name="line_9955"></a></li>
<li id="line_9956" class="even"><span class="lineNumber">&nbsp;9956&nbsp;</span><a name="line_9956"></a></li>
<li id="line_9957" class="odd"><span class="lineNumber">&nbsp;9957&nbsp;</span>			anyContainment&nbsp;=&nbsp;false;<a name="line_9957"></a></li>
<li id="line_9958" class="even"><span class="lineNumber">&nbsp;9958&nbsp;</span>			for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;constraintEvents.length;&nbsp;i++)&nbsp;{<a name="line_9958"></a></li>
<li id="line_9959" class="odd"><span class="lineNumber">&nbsp;9959&nbsp;</span>				if&nbsp;(eventContainsRange(constraintEvents[i],&nbsp;range))&nbsp;{<a name="line_9959"></a></li>
<li id="line_9960" class="even"><span class="lineNumber">&nbsp;9960&nbsp;</span>					anyContainment&nbsp;=&nbsp;true;<a name="line_9960"></a></li>
<li id="line_9961" class="odd"><span class="lineNumber">&nbsp;9961&nbsp;</span>					break;<a name="line_9961"></a></li>
<li id="line_9962" class="even"><span class="lineNumber">&nbsp;9962&nbsp;</span>				}<a name="line_9962"></a></li>
<li id="line_9963" class="odd"><span class="lineNumber">&nbsp;9963&nbsp;</span>			}<a name="line_9963"></a></li>
<li id="line_9964" class="even"><span class="lineNumber">&nbsp;9964&nbsp;</span><a name="line_9964"></a></li>
<li id="line_9965" class="odd"><span class="lineNumber">&nbsp;9965&nbsp;</span>			if&nbsp;(!anyContainment)&nbsp;{<a name="line_9965"></a></li>
<li id="line_9966" class="even"><span class="lineNumber">&nbsp;9966&nbsp;</span>				return&nbsp;false;<a name="line_9966"></a></li>
<li id="line_9967" class="odd"><span class="lineNumber">&nbsp;9967&nbsp;</span>			}<a name="line_9967"></a></li>
<li id="line_9968" class="even"><span class="lineNumber">&nbsp;9968&nbsp;</span>		}<a name="line_9968"></a></li>
<li id="line_9969" class="odd"><span class="lineNumber">&nbsp;9969&nbsp;</span><a name="line_9969"></a></li>
<li id="line_9970" class="even"><span class="lineNumber">&nbsp;9970&nbsp;</span>		peerEvents&nbsp;=&nbsp;t.getPeerEvents(event,&nbsp;range);<a name="line_9970"></a></li>
<li id="line_9971" class="odd"><span class="lineNumber">&nbsp;9971&nbsp;</span><a name="line_9971"></a></li>
<li id="line_9972" class="even"><span class="lineNumber">&nbsp;9972&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;peerEvents.length;&nbsp;i++)&nbsp;&nbsp;{<a name="line_9972"></a></li>
<li id="line_9973" class="odd"><span class="lineNumber">&nbsp;9973&nbsp;</span>			peerEvent&nbsp;=&nbsp;peerEvents[i];<a name="line_9973"></a></li>
<li id="line_9974" class="even"><span class="lineNumber">&nbsp;9974&nbsp;</span><a name="line_9974"></a></li>
<li id="line_9975" class="odd"><span class="lineNumber">&nbsp;9975&nbsp;</span>			//&nbsp;there&nbsp;needs&nbsp;to&nbsp;be&nbsp;an&nbsp;actual&nbsp;intersection&nbsp;before&nbsp;disallowing&nbsp;anything<a name="line_9975"></a></li>
<li id="line_9976" class="even"><span class="lineNumber">&nbsp;9976&nbsp;</span>			if&nbsp;(eventIntersectsRange(peerEvent,&nbsp;range))&nbsp;{<a name="line_9976"></a></li>
<li id="line_9977" class="odd"><span class="lineNumber">&nbsp;9977&nbsp;</span><a name="line_9977"></a></li>
<li id="line_9978" class="even"><span class="lineNumber">&nbsp;9978&nbsp;</span>				//&nbsp;evaluate&nbsp;overlap&nbsp;for&nbsp;the&nbsp;given&nbsp;range&nbsp;and&nbsp;short-circuit&nbsp;if&nbsp;necessary<a name="line_9978"></a></li>
<li id="line_9979" class="odd"><span class="lineNumber">&nbsp;9979&nbsp;</span>				if&nbsp;(overlap&nbsp;===&nbsp;false)&nbsp;{<a name="line_9979"></a></li>
<li id="line_9980" class="even"><span class="lineNumber">&nbsp;9980&nbsp;</span>					return&nbsp;false;<a name="line_9980"></a></li>
<li id="line_9981" class="odd"><span class="lineNumber">&nbsp;9981&nbsp;</span>				}<a name="line_9981"></a></li>
<li id="line_9982" class="even"><span class="lineNumber">&nbsp;9982&nbsp;</span>				//&nbsp;if&nbsp;the&nbsp;event's&nbsp;overlap&nbsp;is&nbsp;a&nbsp;test&nbsp;function,&nbsp;pass&nbsp;the&nbsp;peer&nbsp;event&nbsp;in&nbsp;question&nbsp;as&nbsp;the&nbsp;first&nbsp;param<a name="line_9982"></a></li>
<li id="line_9983" class="odd"><span class="lineNumber">&nbsp;9983&nbsp;</span>				else&nbsp;if&nbsp;(typeof&nbsp;overlap&nbsp;===&nbsp;'function'&nbsp;&amp;&amp;&nbsp;!overlap(peerEvent,&nbsp;event))&nbsp;{<a name="line_9983"></a></li>
<li id="line_9984" class="even"><span class="lineNumber">&nbsp;9984&nbsp;</span>					return&nbsp;false;<a name="line_9984"></a></li>
<li id="line_9985" class="odd"><span class="lineNumber">&nbsp;9985&nbsp;</span>				}<a name="line_9985"></a></li>
<li id="line_9986" class="even"><span class="lineNumber">&nbsp;9986&nbsp;</span><a name="line_9986"></a></li>
<li id="line_9987" class="odd"><span class="lineNumber">&nbsp;9987&nbsp;</span>				//&nbsp;if&nbsp;we&nbsp;are&nbsp;computing&nbsp;if&nbsp;the&nbsp;given&nbsp;range&nbsp;is&nbsp;allowable&nbsp;for&nbsp;an&nbsp;event,&nbsp;consider&nbsp;the&nbsp;other&nbsp;event's<a name="line_9987"></a></li>
<li id="line_9988" class="even"><span class="lineNumber">&nbsp;9988&nbsp;</span>				//&nbsp;EventObject-specific&nbsp;or&nbsp;Source-specific&nbsp;`overlap`&nbsp;property<a name="line_9988"></a></li>
<li id="line_9989" class="odd"><span class="lineNumber">&nbsp;9989&nbsp;</span>				if&nbsp;(event)&nbsp;{<a name="line_9989"></a></li>
<li id="line_9990" class="even"><span class="lineNumber">&nbsp;9990&nbsp;</span>					peerOverlap&nbsp;=&nbsp;firstDefined(<a name="line_9990"></a></li>
<li id="line_9991" class="odd"><span class="lineNumber">&nbsp;9991&nbsp;</span>						peerEvent.overlap,<a name="line_9991"></a></li>
<li id="line_9992" class="even"><span class="lineNumber">&nbsp;9992&nbsp;</span>						(peerEvent.source&nbsp;||&nbsp;{}).overlap<a name="line_9992"></a></li>
<li id="line_9993" class="odd"><span class="lineNumber">&nbsp;9993&nbsp;</span>						//&nbsp;we&nbsp;already&nbsp;considered&nbsp;the&nbsp;global&nbsp;`eventOverlap`<a name="line_9993"></a></li>
<li id="line_9994" class="even"><span class="lineNumber">&nbsp;9994&nbsp;</span>					);<a name="line_9994"></a></li>
<li id="line_9995" class="odd"><span class="lineNumber">&nbsp;9995&nbsp;</span>					if&nbsp;(peerOverlap&nbsp;===&nbsp;false)&nbsp;{<a name="line_9995"></a></li>
<li id="line_9996" class="even"><span class="lineNumber">&nbsp;9996&nbsp;</span>						return&nbsp;false;<a name="line_9996"></a></li>
<li id="line_9997" class="odd"><span class="lineNumber">&nbsp;9997&nbsp;</span>					}<a name="line_9997"></a></li>
<li id="line_9998" class="even"><span class="lineNumber">&nbsp;9998&nbsp;</span>					//&nbsp;if&nbsp;the&nbsp;peer&nbsp;event's&nbsp;overlap&nbsp;is&nbsp;a&nbsp;test&nbsp;function,&nbsp;pass&nbsp;the&nbsp;subject&nbsp;event&nbsp;as&nbsp;the&nbsp;first&nbsp;param<a name="line_9998"></a></li>
<li id="line_9999" class="odd"><span class="lineNumber">&nbsp;9999&nbsp;</span>					if&nbsp;(typeof&nbsp;peerOverlap&nbsp;===&nbsp;'function'&nbsp;&amp;&amp;&nbsp;!peerOverlap(event,&nbsp;peerEvent))&nbsp;{<a name="line_9999"></a></li>
<li id="line_10000" class="even"><span class="lineNumber">10000&nbsp;</span>						return&nbsp;false;<a name="line_10000"></a></li>
<li id="line_10001" class="odd"><span class="lineNumber">10001&nbsp;</span>					}<a name="line_10001"></a></li>
<li id="line_10002" class="even"><span class="lineNumber">10002&nbsp;</span>				}<a name="line_10002"></a></li>
<li id="line_10003" class="odd"><span class="lineNumber">10003&nbsp;</span>			}<a name="line_10003"></a></li>
<li id="line_10004" class="even"><span class="lineNumber">10004&nbsp;</span>		}<a name="line_10004"></a></li>
<li id="line_10005" class="odd"><span class="lineNumber">10005&nbsp;</span><a name="line_10005"></a></li>
<li id="line_10006" class="even"><span class="lineNumber">10006&nbsp;</span>		return&nbsp;true;<a name="line_10006"></a></li>
<li id="line_10007" class="odd"><span class="lineNumber">10007&nbsp;</span>	}<a name="line_10007"></a></li>
<li id="line_10008" class="even"><span class="lineNumber">10008&nbsp;</span><a name="line_10008"></a></li>
<li id="line_10009" class="odd"><span class="lineNumber">10009&nbsp;</span><a name="line_10009"></a></li>
<li id="line_10010" class="even"><span class="lineNumber">10010&nbsp;</span>	//&nbsp;Given&nbsp;an&nbsp;event&nbsp;input&nbsp;from&nbsp;the&nbsp;API,&nbsp;produces&nbsp;an&nbsp;array&nbsp;of&nbsp;event&nbsp;objects.&nbsp;Possible&nbsp;event&nbsp;inputs:<a name="line_10010"></a></li>
<li id="line_10011" class="odd"><span class="lineNumber">10011&nbsp;</span>	//&nbsp;'businessHours'<a name="line_10011"></a></li>
<li id="line_10012" class="even"><span class="lineNumber">10012&nbsp;</span>	//&nbsp;An&nbsp;event&nbsp;ID&nbsp;(number&nbsp;or&nbsp;string)<a name="line_10012"></a></li>
<li id="line_10013" class="odd"><span class="lineNumber">10013&nbsp;</span>	//&nbsp;An&nbsp;object&nbsp;with&nbsp;specific&nbsp;start/end&nbsp;dates&nbsp;or&nbsp;a&nbsp;recurring&nbsp;event&nbsp;(like&nbsp;what&nbsp;businessHours&nbsp;accepts)<a name="line_10013"></a></li>
<li id="line_10014" class="even"><span class="lineNumber">10014&nbsp;</span>	function&nbsp;constraintToEvents(constraintInput)&nbsp;{<a name="line_10014"></a></li>
<li id="line_10015" class="odd"><span class="lineNumber">10015&nbsp;</span><a name="line_10015"></a></li>
<li id="line_10016" class="even"><span class="lineNumber">10016&nbsp;</span>		if&nbsp;(constraintInput&nbsp;===&nbsp;'businessHours')&nbsp;{<a name="line_10016"></a></li>
<li id="line_10017" class="odd"><span class="lineNumber">10017&nbsp;</span>			return&nbsp;getBusinessHoursEvents();<a name="line_10017"></a></li>
<li id="line_10018" class="even"><span class="lineNumber">10018&nbsp;</span>		}<a name="line_10018"></a></li>
<li id="line_10019" class="odd"><span class="lineNumber">10019&nbsp;</span><a name="line_10019"></a></li>
<li id="line_10020" class="even"><span class="lineNumber">10020&nbsp;</span>		if&nbsp;(typeof&nbsp;constraintInput&nbsp;===&nbsp;'object')&nbsp;{<a name="line_10020"></a></li>
<li id="line_10021" class="odd"><span class="lineNumber">10021&nbsp;</span>			return&nbsp;expandEvent(buildEventFromInput(constraintInput));<a name="line_10021"></a></li>
<li id="line_10022" class="even"><span class="lineNumber">10022&nbsp;</span>		}<a name="line_10022"></a></li>
<li id="line_10023" class="odd"><span class="lineNumber">10023&nbsp;</span><a name="line_10023"></a></li>
<li id="line_10024" class="even"><span class="lineNumber">10024&nbsp;</span>		return&nbsp;clientEvents(constraintInput);&nbsp;//&nbsp;probably&nbsp;an&nbsp;ID<a name="line_10024"></a></li>
<li id="line_10025" class="odd"><span class="lineNumber">10025&nbsp;</span>	}<a name="line_10025"></a></li>
<li id="line_10026" class="even"><span class="lineNumber">10026&nbsp;</span><a name="line_10026"></a></li>
<li id="line_10027" class="odd"><span class="lineNumber">10027&nbsp;</span><a name="line_10027"></a></li>
<li id="line_10028" class="even"><span class="lineNumber">10028&nbsp;</span>	//&nbsp;Does&nbsp;the&nbsp;event's&nbsp;date&nbsp;range&nbsp;fully&nbsp;contain&nbsp;the&nbsp;given&nbsp;range?<a name="line_10028"></a></li>
<li id="line_10029" class="odd"><span class="lineNumber">10029&nbsp;</span>	//&nbsp;start/end&nbsp;already&nbsp;assumed&nbsp;to&nbsp;have&nbsp;stripped&nbsp;zones&nbsp;:(<a name="line_10029"></a></li>
<li id="line_10030" class="even"><span class="lineNumber">10030&nbsp;</span>	function&nbsp;eventContainsRange(event,&nbsp;range)&nbsp;{<a name="line_10030"></a></li>
<li id="line_10031" class="odd"><span class="lineNumber">10031&nbsp;</span>		var&nbsp;eventStart&nbsp;=&nbsp;event.start.clone().stripZone();<a name="line_10031"></a></li>
<li id="line_10032" class="even"><span class="lineNumber">10032&nbsp;</span>		var&nbsp;eventEnd&nbsp;=&nbsp;t.getEventEnd(event).stripZone();<a name="line_10032"></a></li>
<li id="line_10033" class="odd"><span class="lineNumber">10033&nbsp;</span><a name="line_10033"></a></li>
<li id="line_10034" class="even"><span class="lineNumber">10034&nbsp;</span>		return&nbsp;range.start&nbsp;&gt;=&nbsp;eventStart&nbsp;&amp;&amp;&nbsp;range.end&nbsp;&lt;=&nbsp;eventEnd;<a name="line_10034"></a></li>
<li id="line_10035" class="odd"><span class="lineNumber">10035&nbsp;</span>	}<a name="line_10035"></a></li>
<li id="line_10036" class="even"><span class="lineNumber">10036&nbsp;</span><a name="line_10036"></a></li>
<li id="line_10037" class="odd"><span class="lineNumber">10037&nbsp;</span><a name="line_10037"></a></li>
<li id="line_10038" class="even"><span class="lineNumber">10038&nbsp;</span>	//&nbsp;Does&nbsp;the&nbsp;event's&nbsp;date&nbsp;range&nbsp;intersect&nbsp;with&nbsp;the&nbsp;given&nbsp;range?<a name="line_10038"></a></li>
<li id="line_10039" class="odd"><span class="lineNumber">10039&nbsp;</span>	//&nbsp;start/end&nbsp;already&nbsp;assumed&nbsp;to&nbsp;have&nbsp;stripped&nbsp;zones&nbsp;:(<a name="line_10039"></a></li>
<li id="line_10040" class="even"><span class="lineNumber">10040&nbsp;</span>	function&nbsp;eventIntersectsRange(event,&nbsp;range)&nbsp;{<a name="line_10040"></a></li>
<li id="line_10041" class="odd"><span class="lineNumber">10041&nbsp;</span>		var&nbsp;eventStart&nbsp;=&nbsp;event.start.clone().stripZone();<a name="line_10041"></a></li>
<li id="line_10042" class="even"><span class="lineNumber">10042&nbsp;</span>		var&nbsp;eventEnd&nbsp;=&nbsp;t.getEventEnd(event).stripZone();<a name="line_10042"></a></li>
<li id="line_10043" class="odd"><span class="lineNumber">10043&nbsp;</span><a name="line_10043"></a></li>
<li id="line_10044" class="even"><span class="lineNumber">10044&nbsp;</span>		return&nbsp;range.start&nbsp;&lt;&nbsp;eventEnd&nbsp;&amp;&amp;&nbsp;range.end&nbsp;&gt;&nbsp;eventStart;<a name="line_10044"></a></li>
<li id="line_10045" class="odd"><span class="lineNumber">10045&nbsp;</span>	}<a name="line_10045"></a></li>
<li id="line_10046" class="even"><span class="lineNumber">10046&nbsp;</span><a name="line_10046"></a></li>
<li id="line_10047" class="odd"><span class="lineNumber">10047&nbsp;</span><a name="line_10047"></a></li>
<li id="line_10048" class="even"><span class="lineNumber">10048&nbsp;</span>	t.getEventCache&nbsp;=&nbsp;function()&nbsp;{<a name="line_10048"></a></li>
<li id="line_10049" class="odd"><span class="lineNumber">10049&nbsp;</span>		return&nbsp;cache;<a name="line_10049"></a></li>
<li id="line_10050" class="even"><span class="lineNumber">10050&nbsp;</span>	};<a name="line_10050"></a></li>
<li id="line_10051" class="odd"><span class="lineNumber">10051&nbsp;</span><a name="line_10051"></a></li>
<li id="line_10052" class="even"><span class="lineNumber">10052&nbsp;</span>}<a name="line_10052"></a></li>
<li id="line_10053" class="odd"><span class="lineNumber">10053&nbsp;</span><a name="line_10053"></a></li>
<li id="line_10054" class="even"><span class="lineNumber">10054&nbsp;</span><a name="line_10054"></a></li>
<li id="line_10055" class="odd"><span class="lineNumber">10055&nbsp;</span>//&nbsp;Returns&nbsp;a&nbsp;list&nbsp;of&nbsp;events&nbsp;that&nbsp;the&nbsp;given&nbsp;event&nbsp;should&nbsp;be&nbsp;compared&nbsp;against&nbsp;when&nbsp;being&nbsp;considered&nbsp;for&nbsp;a&nbsp;move&nbsp;to<a name="line_10055"></a></li>
<li id="line_10056" class="even"><span class="lineNumber">10056&nbsp;</span>//&nbsp;the&nbsp;specified&nbsp;range.&nbsp;Attached&nbsp;to&nbsp;the&nbsp;Calendar's&nbsp;prototype&nbsp;because&nbsp;EventManager&nbsp;is&nbsp;a&nbsp;mixin&nbsp;for&nbsp;a&nbsp;Calendar.<a name="line_10056"></a></li>
<li id="line_10057" class="odd"><span class="lineNumber">10057&nbsp;</span>Calendar.prototype.getPeerEvents&nbsp;=&nbsp;function(event,&nbsp;range)&nbsp;{<a name="line_10057"></a></li>
<li id="line_10058" class="even"><span class="lineNumber">10058&nbsp;</span>	var&nbsp;cache&nbsp;=&nbsp;this.getEventCache();<a name="line_10058"></a></li>
<li id="line_10059" class="odd"><span class="lineNumber">10059&nbsp;</span>	var&nbsp;peerEvents&nbsp;=&nbsp;[];<a name="line_10059"></a></li>
<li id="line_10060" class="even"><span class="lineNumber">10060&nbsp;</span>	var&nbsp;i,&nbsp;otherEvent;<a name="line_10060"></a></li>
<li id="line_10061" class="odd"><span class="lineNumber">10061&nbsp;</span><a name="line_10061"></a></li>
<li id="line_10062" class="even"><span class="lineNumber">10062&nbsp;</span>	for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;cache.length;&nbsp;i++)&nbsp;{<a name="line_10062"></a></li>
<li id="line_10063" class="odd"><span class="lineNumber">10063&nbsp;</span>		otherEvent&nbsp;=&nbsp;cache[i];<a name="line_10063"></a></li>
<li id="line_10064" class="even"><span class="lineNumber">10064&nbsp;</span>		if&nbsp;(<a name="line_10064"></a></li>
<li id="line_10065" class="odd"><span class="lineNumber">10065&nbsp;</span>			!event&nbsp;||<a name="line_10065"></a></li>
<li id="line_10066" class="even"><span class="lineNumber">10066&nbsp;</span>			event._id&nbsp;!==&nbsp;otherEvent._id&nbsp;//&nbsp;don't&nbsp;compare&nbsp;the&nbsp;event&nbsp;to&nbsp;itself&nbsp;or&nbsp;other&nbsp;related&nbsp;[repeating]&nbsp;events<a name="line_10066"></a></li>
<li id="line_10067" class="odd"><span class="lineNumber">10067&nbsp;</span>		)&nbsp;{<a name="line_10067"></a></li>
<li id="line_10068" class="even"><span class="lineNumber">10068&nbsp;</span>			peerEvents.push(otherEvent);<a name="line_10068"></a></li>
<li id="line_10069" class="odd"><span class="lineNumber">10069&nbsp;</span>		}<a name="line_10069"></a></li>
<li id="line_10070" class="even"><span class="lineNumber">10070&nbsp;</span>	}<a name="line_10070"></a></li>
<li id="line_10071" class="odd"><span class="lineNumber">10071&nbsp;</span><a name="line_10071"></a></li>
<li id="line_10072" class="even"><span class="lineNumber">10072&nbsp;</span>	return&nbsp;peerEvents;<a name="line_10072"></a></li>
<li id="line_10073" class="odd"><span class="lineNumber">10073&nbsp;</span>};<a name="line_10073"></a></li>
<li id="line_10074" class="even"><span class="lineNumber">10074&nbsp;</span><a name="line_10074"></a></li>
<li id="line_10075" class="odd"><span class="lineNumber">10075&nbsp;</span><a name="line_10075"></a></li>
<li id="line_10076" class="even"><span class="lineNumber">10076&nbsp;</span>//&nbsp;updates&nbsp;the&nbsp;"backup"&nbsp;properties,&nbsp;which&nbsp;are&nbsp;preserved&nbsp;in&nbsp;order&nbsp;to&nbsp;compute&nbsp;diffs&nbsp;later&nbsp;on.<a name="line_10076"></a></li>
<li id="line_10077" class="odd"><span class="lineNumber">10077&nbsp;</span>function&nbsp;backupEventDates(event)&nbsp;{<a name="line_10077"></a></li>
<li id="line_10078" class="even"><span class="lineNumber">10078&nbsp;</span>	event._allDay&nbsp;=&nbsp;event.allDay;<a name="line_10078"></a></li>
<li id="line_10079" class="odd"><span class="lineNumber">10079&nbsp;</span>	event._start&nbsp;=&nbsp;event.start.clone();<a name="line_10079"></a></li>
<li id="line_10080" class="even"><span class="lineNumber">10080&nbsp;</span>	event._end&nbsp;=&nbsp;event.end&nbsp;?&nbsp;event.end.clone()&nbsp;:&nbsp;null;<a name="line_10080"></a></li>
<li id="line_10081" class="odd"><span class="lineNumber">10081&nbsp;</span>}<a name="line_10081"></a></li>
<li id="line_10082" class="even"><span class="lineNumber">10082&nbsp;</span><a name="line_10082"></a></li>
<li id="line_10083" class="odd"><span class="lineNumber">10083&nbsp;</span>;;<a name="line_10083"></a></li>
<li id="line_10084" class="even"><span class="lineNumber">10084&nbsp;</span><a name="line_10084"></a></li>
<li id="line_10085" class="odd"><span class="lineNumber">10085&nbsp;</span>/*&nbsp;An&nbsp;abstract&nbsp;class&nbsp;for&nbsp;the&nbsp;"basic"&nbsp;views,&nbsp;as&nbsp;well&nbsp;as&nbsp;month&nbsp;view.&nbsp;Renders&nbsp;one&nbsp;or&nbsp;more&nbsp;rows&nbsp;of&nbsp;day&nbsp;cells.<a name="line_10085"></a></li>
<li id="line_10086" class="even"><span class="lineNumber">10086&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_10086"></a></li>
<li id="line_10087" class="odd"><span class="lineNumber">10087&nbsp;</span>//&nbsp;It&nbsp;is&nbsp;a&nbsp;manager&nbsp;for&nbsp;a&nbsp;DayGrid&nbsp;subcomponent,&nbsp;which&nbsp;does&nbsp;most&nbsp;of&nbsp;the&nbsp;heavy&nbsp;lifting.<a name="line_10087"></a></li>
<li id="line_10088" class="even"><span class="lineNumber">10088&nbsp;</span>//&nbsp;It&nbsp;is&nbsp;responsible&nbsp;for&nbsp;managing&nbsp;width/height.<a name="line_10088"></a></li>
<li id="line_10089" class="odd"><span class="lineNumber">10089&nbsp;</span><a name="line_10089"></a></li>
<li id="line_10090" class="even"><span class="lineNumber">10090&nbsp;</span>var&nbsp;BasicView&nbsp;=&nbsp;View.extend({<a name="line_10090"></a></li>
<li id="line_10091" class="odd"><span class="lineNumber">10091&nbsp;</span><a name="line_10091"></a></li>
<li id="line_10092" class="even"><span class="lineNumber">10092&nbsp;</span>	dayGrid:&nbsp;null,&nbsp;//&nbsp;the&nbsp;main&nbsp;subcomponent&nbsp;that&nbsp;does&nbsp;most&nbsp;of&nbsp;the&nbsp;heavy&nbsp;lifting<a name="line_10092"></a></li>
<li id="line_10093" class="odd"><span class="lineNumber">10093&nbsp;</span><a name="line_10093"></a></li>
<li id="line_10094" class="even"><span class="lineNumber">10094&nbsp;</span>	dayNumbersVisible:&nbsp;false,&nbsp;//&nbsp;display&nbsp;day&nbsp;numbers&nbsp;on&nbsp;each&nbsp;day&nbsp;cell?<a name="line_10094"></a></li>
<li id="line_10095" class="odd"><span class="lineNumber">10095&nbsp;</span>	weekNumbersVisible:&nbsp;false,&nbsp;//&nbsp;display&nbsp;week&nbsp;numbers&nbsp;along&nbsp;the&nbsp;side?<a name="line_10095"></a></li>
<li id="line_10096" class="even"><span class="lineNumber">10096&nbsp;</span><a name="line_10096"></a></li>
<li id="line_10097" class="odd"><span class="lineNumber">10097&nbsp;</span>	weekNumberWidth:&nbsp;null,&nbsp;//&nbsp;width&nbsp;of&nbsp;all&nbsp;the&nbsp;week-number&nbsp;cells&nbsp;running&nbsp;down&nbsp;the&nbsp;side<a name="line_10097"></a></li>
<li id="line_10098" class="even"><span class="lineNumber">10098&nbsp;</span><a name="line_10098"></a></li>
<li id="line_10099" class="odd"><span class="lineNumber">10099&nbsp;</span>	headRowEl:&nbsp;null,&nbsp;//&nbsp;the&nbsp;fake&nbsp;row&nbsp;element&nbsp;of&nbsp;the&nbsp;day-of-week&nbsp;header<a name="line_10099"></a></li>
<li id="line_10100" class="even"><span class="lineNumber">10100&nbsp;</span><a name="line_10100"></a></li>
<li id="line_10101" class="odd"><span class="lineNumber">10101&nbsp;</span><a name="line_10101"></a></li>
<li id="line_10102" class="even"><span class="lineNumber">10102&nbsp;</span>	initialize:&nbsp;function()&nbsp;{<a name="line_10102"></a></li>
<li id="line_10103" class="odd"><span class="lineNumber">10103&nbsp;</span>		this.dayGrid&nbsp;=&nbsp;new&nbsp;DayGrid(this);<a name="line_10103"></a></li>
<li id="line_10104" class="even"><span class="lineNumber">10104&nbsp;</span>		this.coordMap&nbsp;=&nbsp;this.dayGrid.coordMap;&nbsp;//&nbsp;the&nbsp;view's&nbsp;date-to-cell&nbsp;mapping&nbsp;is&nbsp;identical&nbsp;to&nbsp;the&nbsp;subcomponent's<a name="line_10104"></a></li>
<li id="line_10105" class="odd"><span class="lineNumber">10105&nbsp;</span>	},<a name="line_10105"></a></li>
<li id="line_10106" class="even"><span class="lineNumber">10106&nbsp;</span><a name="line_10106"></a></li>
<li id="line_10107" class="odd"><span class="lineNumber">10107&nbsp;</span><a name="line_10107"></a></li>
<li id="line_10108" class="even"><span class="lineNumber">10108&nbsp;</span>	//&nbsp;Sets&nbsp;the&nbsp;display&nbsp;range&nbsp;and&nbsp;computes&nbsp;all&nbsp;necessary&nbsp;dates<a name="line_10108"></a></li>
<li id="line_10109" class="odd"><span class="lineNumber">10109&nbsp;</span>	setRange:&nbsp;function(range)&nbsp;{<a name="line_10109"></a></li>
<li id="line_10110" class="even"><span class="lineNumber">10110&nbsp;</span>		View.prototype.setRange.call(this,&nbsp;range);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-method<a name="line_10110"></a></li>
<li id="line_10111" class="odd"><span class="lineNumber">10111&nbsp;</span><a name="line_10111"></a></li>
<li id="line_10112" class="even"><span class="lineNumber">10112&nbsp;</span>		this.dayGrid.breakOnWeeks&nbsp;=&nbsp;/year|month|week/.test(this.intervalUnit);&nbsp;//&nbsp;do&nbsp;before&nbsp;setRange<a name="line_10112"></a></li>
<li id="line_10113" class="odd"><span class="lineNumber">10113&nbsp;</span>		this.dayGrid.setRange(range);<a name="line_10113"></a></li>
<li id="line_10114" class="even"><span class="lineNumber">10114&nbsp;</span>	},<a name="line_10114"></a></li>
<li id="line_10115" class="odd"><span class="lineNumber">10115&nbsp;</span><a name="line_10115"></a></li>
<li id="line_10116" class="even"><span class="lineNumber">10116&nbsp;</span><a name="line_10116"></a></li>
<li id="line_10117" class="odd"><span class="lineNumber">10117&nbsp;</span>	//&nbsp;Compute&nbsp;the&nbsp;value&nbsp;to&nbsp;feed&nbsp;into&nbsp;setRange.&nbsp;Overrides&nbsp;superclass.<a name="line_10117"></a></li>
<li id="line_10118" class="even"><span class="lineNumber">10118&nbsp;</span>	computeRange:&nbsp;function(date)&nbsp;{<a name="line_10118"></a></li>
<li id="line_10119" class="odd"><span class="lineNumber">10119&nbsp;</span>		var&nbsp;range&nbsp;=&nbsp;View.prototype.computeRange.call(this,&nbsp;date);&nbsp;//&nbsp;get&nbsp;value&nbsp;from&nbsp;the&nbsp;super-method<a name="line_10119"></a></li>
<li id="line_10120" class="even"><span class="lineNumber">10120&nbsp;</span><a name="line_10120"></a></li>
<li id="line_10121" class="odd"><span class="lineNumber">10121&nbsp;</span>		//&nbsp;year&nbsp;and&nbsp;month&nbsp;views&nbsp;should&nbsp;be&nbsp;aligned&nbsp;with&nbsp;weeks.&nbsp;this&nbsp;is&nbsp;already&nbsp;done&nbsp;for&nbsp;week<a name="line_10121"></a></li>
<li id="line_10122" class="even"><span class="lineNumber">10122&nbsp;</span>		if&nbsp;(/year|month/.test(range.intervalUnit))&nbsp;{<a name="line_10122"></a></li>
<li id="line_10123" class="odd"><span class="lineNumber">10123&nbsp;</span>			range.start.startOf('week');<a name="line_10123"></a></li>
<li id="line_10124" class="even"><span class="lineNumber">10124&nbsp;</span>			range.start&nbsp;=&nbsp;this.skipHiddenDays(range.start);<a name="line_10124"></a></li>
<li id="line_10125" class="odd"><span class="lineNumber">10125&nbsp;</span><a name="line_10125"></a></li>
<li id="line_10126" class="even"><span class="lineNumber">10126&nbsp;</span>			//&nbsp;make&nbsp;end-of-week&nbsp;if&nbsp;not&nbsp;already<a name="line_10126"></a></li>
<li id="line_10127" class="odd"><span class="lineNumber">10127&nbsp;</span>			if&nbsp;(range.end.weekday())&nbsp;{<a name="line_10127"></a></li>
<li id="line_10128" class="even"><span class="lineNumber">10128&nbsp;</span>				range.end.add(1,&nbsp;'week').startOf('week');<a name="line_10128"></a></li>
<li id="line_10129" class="odd"><span class="lineNumber">10129&nbsp;</span>				range.end&nbsp;=&nbsp;this.skipHiddenDays(range.end,&nbsp;-1,&nbsp;true);&nbsp;//&nbsp;exclusively&nbsp;move&nbsp;backwards<a name="line_10129"></a></li>
<li id="line_10130" class="even"><span class="lineNumber">10130&nbsp;</span>			}<a name="line_10130"></a></li>
<li id="line_10131" class="odd"><span class="lineNumber">10131&nbsp;</span>		}<a name="line_10131"></a></li>
<li id="line_10132" class="even"><span class="lineNumber">10132&nbsp;</span><a name="line_10132"></a></li>
<li id="line_10133" class="odd"><span class="lineNumber">10133&nbsp;</span>		return&nbsp;range;<a name="line_10133"></a></li>
<li id="line_10134" class="even"><span class="lineNumber">10134&nbsp;</span>	},<a name="line_10134"></a></li>
<li id="line_10135" class="odd"><span class="lineNumber">10135&nbsp;</span><a name="line_10135"></a></li>
<li id="line_10136" class="even"><span class="lineNumber">10136&nbsp;</span><a name="line_10136"></a></li>
<li id="line_10137" class="odd"><span class="lineNumber">10137&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;view&nbsp;into&nbsp;`this.el`,&nbsp;which&nbsp;should&nbsp;already&nbsp;be&nbsp;assigned<a name="line_10137"></a></li>
<li id="line_10138" class="even"><span class="lineNumber">10138&nbsp;</span>	renderDates:&nbsp;function()&nbsp;{<a name="line_10138"></a></li>
<li id="line_10139" class="odd"><span class="lineNumber">10139&nbsp;</span><a name="line_10139"></a></li>
<li id="line_10140" class="even"><span class="lineNumber">10140&nbsp;</span>		this.dayNumbersVisible&nbsp;=&nbsp;this.dayGrid.rowCnt&nbsp;&gt;&nbsp;1;&nbsp;//&nbsp;TODO:&nbsp;make&nbsp;grid&nbsp;responsible<a name="line_10140"></a></li>
<li id="line_10141" class="odd"><span class="lineNumber">10141&nbsp;</span>		this.weekNumbersVisible&nbsp;=&nbsp;this.opt('weekNumbers');<a name="line_10141"></a></li>
<li id="line_10142" class="even"><span class="lineNumber">10142&nbsp;</span>		this.dayGrid.numbersVisible&nbsp;=&nbsp;this.dayNumbersVisible&nbsp;||&nbsp;this.weekNumbersVisible;<a name="line_10142"></a></li>
<li id="line_10143" class="odd"><span class="lineNumber">10143&nbsp;</span><a name="line_10143"></a></li>
<li id="line_10144" class="even"><span class="lineNumber">10144&nbsp;</span>		this.el.addClass('fc-basic-view').html(this.renderHtml());<a name="line_10144"></a></li>
<li id="line_10145" class="odd"><span class="lineNumber">10145&nbsp;</span><a name="line_10145"></a></li>
<li id="line_10146" class="even"><span class="lineNumber">10146&nbsp;</span>		this.headRowEl&nbsp;=&nbsp;this.el.find('thead&nbsp;.fc-row');<a name="line_10146"></a></li>
<li id="line_10147" class="odd"><span class="lineNumber">10147&nbsp;</span><a name="line_10147"></a></li>
<li id="line_10148" class="even"><span class="lineNumber">10148&nbsp;</span>		this.scrollerEl&nbsp;=&nbsp;this.el.find('.fc-day-grid-container');<a name="line_10148"></a></li>
<li id="line_10149" class="odd"><span class="lineNumber">10149&nbsp;</span>		this.dayGrid.coordMap.containerEl&nbsp;=&nbsp;this.scrollerEl;&nbsp;//&nbsp;constrain&nbsp;clicks/etc&nbsp;to&nbsp;the&nbsp;dimensions&nbsp;of&nbsp;the&nbsp;scroller<a name="line_10149"></a></li>
<li id="line_10150" class="even"><span class="lineNumber">10150&nbsp;</span><a name="line_10150"></a></li>
<li id="line_10151" class="odd"><span class="lineNumber">10151&nbsp;</span>		this.dayGrid.setElement(this.el.find('.fc-day-grid'));<a name="line_10151"></a></li>
<li id="line_10152" class="even"><span class="lineNumber">10152&nbsp;</span>		this.dayGrid.renderDates(this.hasRigidRows());<a name="line_10152"></a></li>
<li id="line_10153" class="odd"><span class="lineNumber">10153&nbsp;</span>	},<a name="line_10153"></a></li>
<li id="line_10154" class="even"><span class="lineNumber">10154&nbsp;</span><a name="line_10154"></a></li>
<li id="line_10155" class="odd"><span class="lineNumber">10155&nbsp;</span><a name="line_10155"></a></li>
<li id="line_10156" class="even"><span class="lineNumber">10156&nbsp;</span>	//&nbsp;Unrenders&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;view.&nbsp;Since&nbsp;we&nbsp;haven't&nbsp;separated&nbsp;skeleton&nbsp;rendering&nbsp;from&nbsp;date&nbsp;rendering,<a name="line_10156"></a></li>
<li id="line_10157" class="odd"><span class="lineNumber">10157&nbsp;</span>	//&nbsp;always&nbsp;completely&nbsp;kill&nbsp;the&nbsp;dayGrid's&nbsp;rendering.<a name="line_10157"></a></li>
<li id="line_10158" class="even"><span class="lineNumber">10158&nbsp;</span>	unrenderDates:&nbsp;function()&nbsp;{<a name="line_10158"></a></li>
<li id="line_10159" class="odd"><span class="lineNumber">10159&nbsp;</span>		this.dayGrid.unrenderDates();<a name="line_10159"></a></li>
<li id="line_10160" class="even"><span class="lineNumber">10160&nbsp;</span>		this.dayGrid.removeElement();<a name="line_10160"></a></li>
<li id="line_10161" class="odd"><span class="lineNumber">10161&nbsp;</span>	},<a name="line_10161"></a></li>
<li id="line_10162" class="even"><span class="lineNumber">10162&nbsp;</span><a name="line_10162"></a></li>
<li id="line_10163" class="odd"><span class="lineNumber">10163&nbsp;</span><a name="line_10163"></a></li>
<li id="line_10164" class="even"><span class="lineNumber">10164&nbsp;</span>	renderBusinessHours:&nbsp;function()&nbsp;{<a name="line_10164"></a></li>
<li id="line_10165" class="odd"><span class="lineNumber">10165&nbsp;</span>		this.dayGrid.renderBusinessHours();<a name="line_10165"></a></li>
<li id="line_10166" class="even"><span class="lineNumber">10166&nbsp;</span>	},<a name="line_10166"></a></li>
<li id="line_10167" class="odd"><span class="lineNumber">10167&nbsp;</span><a name="line_10167"></a></li>
<li id="line_10168" class="even"><span class="lineNumber">10168&nbsp;</span><a name="line_10168"></a></li>
<li id="line_10169" class="odd"><span class="lineNumber">10169&nbsp;</span>	//&nbsp;Builds&nbsp;the&nbsp;HTML&nbsp;skeleton&nbsp;for&nbsp;the&nbsp;view.<a name="line_10169"></a></li>
<li id="line_10170" class="even"><span class="lineNumber">10170&nbsp;</span>	//&nbsp;The&nbsp;day-grid&nbsp;component&nbsp;will&nbsp;render&nbsp;inside&nbsp;of&nbsp;a&nbsp;container&nbsp;defined&nbsp;by&nbsp;this&nbsp;HTML.<a name="line_10170"></a></li>
<li id="line_10171" class="odd"><span class="lineNumber">10171&nbsp;</span>	renderHtml:&nbsp;function()&nbsp;{<a name="line_10171"></a></li>
<li id="line_10172" class="even"><span class="lineNumber">10172&nbsp;</span>		return&nbsp;''&nbsp;+<a name="line_10172"></a></li>
<li id="line_10173" class="odd"><span class="lineNumber">10173&nbsp;</span>			'&lt;table&gt;'&nbsp;+<a name="line_10173"></a></li>
<li id="line_10174" class="even"><span class="lineNumber">10174&nbsp;</span>				'&lt;thead&nbsp;class="fc-head"&gt;'&nbsp;+<a name="line_10174"></a></li>
<li id="line_10175" class="odd"><span class="lineNumber">10175&nbsp;</span>					'&lt;tr&gt;'&nbsp;+<a name="line_10175"></a></li>
<li id="line_10176" class="even"><span class="lineNumber">10176&nbsp;</span>						'&lt;td&nbsp;class="'&nbsp;+&nbsp;this.widgetHeaderClass&nbsp;+&nbsp;'"&gt;'&nbsp;+<a name="line_10176"></a></li>
<li id="line_10177" class="odd"><span class="lineNumber">10177&nbsp;</span>							this.dayGrid.headHtml()&nbsp;+&nbsp;//&nbsp;render&nbsp;the&nbsp;day-of-week&nbsp;headers<a name="line_10177"></a></li>
<li id="line_10178" class="even"><span class="lineNumber">10178&nbsp;</span>						'&lt;/td&gt;'&nbsp;+<a name="line_10178"></a></li>
<li id="line_10179" class="odd"><span class="lineNumber">10179&nbsp;</span>					'&lt;/tr&gt;'&nbsp;+<a name="line_10179"></a></li>
<li id="line_10180" class="even"><span class="lineNumber">10180&nbsp;</span>				'&lt;/thead&gt;'&nbsp;+<a name="line_10180"></a></li>
<li id="line_10181" class="odd"><span class="lineNumber">10181&nbsp;</span>				'&lt;tbody&nbsp;class="fc-body"&gt;'&nbsp;+<a name="line_10181"></a></li>
<li id="line_10182" class="even"><span class="lineNumber">10182&nbsp;</span>					'&lt;tr&gt;'&nbsp;+<a name="line_10182"></a></li>
<li id="line_10183" class="odd"><span class="lineNumber">10183&nbsp;</span>						'&lt;td&nbsp;class="'&nbsp;+&nbsp;this.widgetContentClass&nbsp;+&nbsp;'"&gt;'&nbsp;+<a name="line_10183"></a></li>
<li id="line_10184" class="even"><span class="lineNumber">10184&nbsp;</span>							'&lt;div&nbsp;class="fc-day-grid-container"&gt;'&nbsp;+<a name="line_10184"></a></li>
<li id="line_10185" class="odd"><span class="lineNumber">10185&nbsp;</span>								'&lt;div&nbsp;class="fc-day-grid"/&gt;'&nbsp;+<a name="line_10185"></a></li>
<li id="line_10186" class="even"><span class="lineNumber">10186&nbsp;</span>							'&lt;/div&gt;'&nbsp;+<a name="line_10186"></a></li>
<li id="line_10187" class="odd"><span class="lineNumber">10187&nbsp;</span>						'&lt;/td&gt;'&nbsp;+<a name="line_10187"></a></li>
<li id="line_10188" class="even"><span class="lineNumber">10188&nbsp;</span>					'&lt;/tr&gt;'&nbsp;+<a name="line_10188"></a></li>
<li id="line_10189" class="odd"><span class="lineNumber">10189&nbsp;</span>				'&lt;/tbody&gt;'&nbsp;+<a name="line_10189"></a></li>
<li id="line_10190" class="even"><span class="lineNumber">10190&nbsp;</span>			'&lt;/table&gt;';<a name="line_10190"></a></li>
<li id="line_10191" class="odd"><span class="lineNumber">10191&nbsp;</span>	},<a name="line_10191"></a></li>
<li id="line_10192" class="even"><span class="lineNumber">10192&nbsp;</span><a name="line_10192"></a></li>
<li id="line_10193" class="odd"><span class="lineNumber">10193&nbsp;</span><a name="line_10193"></a></li>
<li id="line_10194" class="even"><span class="lineNumber">10194&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;that&nbsp;will&nbsp;go&nbsp;before&nbsp;the&nbsp;day-of&nbsp;week&nbsp;header&nbsp;cells.<a name="line_10194"></a></li>
<li id="line_10195" class="odd"><span class="lineNumber">10195&nbsp;</span>	//&nbsp;Queried&nbsp;by&nbsp;the&nbsp;DayGrid&nbsp;subcomponent&nbsp;when&nbsp;generating&nbsp;rows.&nbsp;Ordering&nbsp;depends&nbsp;on&nbsp;isRTL.<a name="line_10195"></a></li>
<li id="line_10196" class="even"><span class="lineNumber">10196&nbsp;</span>	headIntroHtml:&nbsp;function()&nbsp;{<a name="line_10196"></a></li>
<li id="line_10197" class="odd"><span class="lineNumber">10197&nbsp;</span>		if&nbsp;(this.weekNumbersVisible)&nbsp;{<a name="line_10197"></a></li>
<li id="line_10198" class="even"><span class="lineNumber">10198&nbsp;</span>			return&nbsp;''&nbsp;+<a name="line_10198"></a></li>
<li id="line_10199" class="odd"><span class="lineNumber">10199&nbsp;</span>				'&lt;th&nbsp;class="fc-week-number&nbsp;'&nbsp;+&nbsp;this.widgetHeaderClass&nbsp;+&nbsp;'"&nbsp;'&nbsp;+&nbsp;this.weekNumberStyleAttr()&nbsp;+&nbsp;'&gt;'&nbsp;+<a name="line_10199"></a></li>
<li id="line_10200" class="even"><span class="lineNumber">10200&nbsp;</span>					'&lt;span&gt;'&nbsp;+&nbsp;//&nbsp;needed&nbsp;for&nbsp;matchCellWidths<a name="line_10200"></a></li>
<li id="line_10201" class="odd"><span class="lineNumber">10201&nbsp;</span>						htmlEscape(this.opt('weekNumberTitle'))&nbsp;+<a name="line_10201"></a></li>
<li id="line_10202" class="even"><span class="lineNumber">10202&nbsp;</span>					'&lt;/span&gt;'&nbsp;+<a name="line_10202"></a></li>
<li id="line_10203" class="odd"><span class="lineNumber">10203&nbsp;</span>				'&lt;/th&gt;';<a name="line_10203"></a></li>
<li id="line_10204" class="even"><span class="lineNumber">10204&nbsp;</span>		}<a name="line_10204"></a></li>
<li id="line_10205" class="odd"><span class="lineNumber">10205&nbsp;</span>	},<a name="line_10205"></a></li>
<li id="line_10206" class="even"><span class="lineNumber">10206&nbsp;</span><a name="line_10206"></a></li>
<li id="line_10207" class="odd"><span class="lineNumber">10207&nbsp;</span><a name="line_10207"></a></li>
<li id="line_10208" class="even"><span class="lineNumber">10208&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;that&nbsp;will&nbsp;go&nbsp;before&nbsp;content-skeleton&nbsp;cells&nbsp;that&nbsp;display&nbsp;the&nbsp;day/week&nbsp;numbers.<a name="line_10208"></a></li>
<li id="line_10209" class="odd"><span class="lineNumber">10209&nbsp;</span>	//&nbsp;Queried&nbsp;by&nbsp;the&nbsp;DayGrid&nbsp;subcomponent.&nbsp;Ordering&nbsp;depends&nbsp;on&nbsp;isRTL.<a name="line_10209"></a></li>
<li id="line_10210" class="even"><span class="lineNumber">10210&nbsp;</span>	numberIntroHtml:&nbsp;function(row)&nbsp;{<a name="line_10210"></a></li>
<li id="line_10211" class="odd"><span class="lineNumber">10211&nbsp;</span>		if&nbsp;(this.weekNumbersVisible)&nbsp;{<a name="line_10211"></a></li>
<li id="line_10212" class="even"><span class="lineNumber">10212&nbsp;</span>			return&nbsp;''&nbsp;+<a name="line_10212"></a></li>
<li id="line_10213" class="odd"><span class="lineNumber">10213&nbsp;</span>				'&lt;td&nbsp;class="fc-week-number"&nbsp;'&nbsp;+&nbsp;this.weekNumberStyleAttr()&nbsp;+&nbsp;'&gt;'&nbsp;+<a name="line_10213"></a></li>
<li id="line_10214" class="even"><span class="lineNumber">10214&nbsp;</span>					'&lt;span&gt;'&nbsp;+&nbsp;//&nbsp;needed&nbsp;for&nbsp;matchCellWidths<a name="line_10214"></a></li>
<li id="line_10215" class="odd"><span class="lineNumber">10215&nbsp;</span>						this.dayGrid.getCell(row,&nbsp;0).start.format('w')&nbsp;+<a name="line_10215"></a></li>
<li id="line_10216" class="even"><span class="lineNumber">10216&nbsp;</span>					'&lt;/span&gt;'&nbsp;+<a name="line_10216"></a></li>
<li id="line_10217" class="odd"><span class="lineNumber">10217&nbsp;</span>				'&lt;/td&gt;';<a name="line_10217"></a></li>
<li id="line_10218" class="even"><span class="lineNumber">10218&nbsp;</span>		}<a name="line_10218"></a></li>
<li id="line_10219" class="odd"><span class="lineNumber">10219&nbsp;</span>	},<a name="line_10219"></a></li>
<li id="line_10220" class="even"><span class="lineNumber">10220&nbsp;</span><a name="line_10220"></a></li>
<li id="line_10221" class="odd"><span class="lineNumber">10221&nbsp;</span><a name="line_10221"></a></li>
<li id="line_10222" class="even"><span class="lineNumber">10222&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;that&nbsp;goes&nbsp;before&nbsp;the&nbsp;day&nbsp;bg&nbsp;cells&nbsp;for&nbsp;each&nbsp;day-row.<a name="line_10222"></a></li>
<li id="line_10223" class="odd"><span class="lineNumber">10223&nbsp;</span>	//&nbsp;Queried&nbsp;by&nbsp;the&nbsp;DayGrid&nbsp;subcomponent.&nbsp;Ordering&nbsp;depends&nbsp;on&nbsp;isRTL.<a name="line_10223"></a></li>
<li id="line_10224" class="even"><span class="lineNumber">10224&nbsp;</span>	dayIntroHtml:&nbsp;function()&nbsp;{<a name="line_10224"></a></li>
<li id="line_10225" class="odd"><span class="lineNumber">10225&nbsp;</span>		if&nbsp;(this.weekNumbersVisible)&nbsp;{<a name="line_10225"></a></li>
<li id="line_10226" class="even"><span class="lineNumber">10226&nbsp;</span>			return&nbsp;'&lt;td&nbsp;class="fc-week-number&nbsp;'&nbsp;+&nbsp;this.widgetContentClass&nbsp;+&nbsp;'"&nbsp;'&nbsp;+<a name="line_10226"></a></li>
<li id="line_10227" class="odd"><span class="lineNumber">10227&nbsp;</span>				this.weekNumberStyleAttr()&nbsp;+&nbsp;'&gt;&lt;/td&gt;';<a name="line_10227"></a></li>
<li id="line_10228" class="even"><span class="lineNumber">10228&nbsp;</span>		}<a name="line_10228"></a></li>
<li id="line_10229" class="odd"><span class="lineNumber">10229&nbsp;</span>	},<a name="line_10229"></a></li>
<li id="line_10230" class="even"><span class="lineNumber">10230&nbsp;</span><a name="line_10230"></a></li>
<li id="line_10231" class="odd"><span class="lineNumber">10231&nbsp;</span><a name="line_10231"></a></li>
<li id="line_10232" class="even"><span class="lineNumber">10232&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;that&nbsp;goes&nbsp;before&nbsp;every&nbsp;other&nbsp;type&nbsp;of&nbsp;row&nbsp;generated&nbsp;by&nbsp;DayGrid.&nbsp;Ordering&nbsp;depends&nbsp;on&nbsp;isRTL.<a name="line_10232"></a></li>
<li id="line_10233" class="odd"><span class="lineNumber">10233&nbsp;</span>	//&nbsp;Affects&nbsp;helper-skeleton&nbsp;and&nbsp;highlight-skeleton&nbsp;rows.<a name="line_10233"></a></li>
<li id="line_10234" class="even"><span class="lineNumber">10234&nbsp;</span>	introHtml:&nbsp;function()&nbsp;{<a name="line_10234"></a></li>
<li id="line_10235" class="odd"><span class="lineNumber">10235&nbsp;</span>		if&nbsp;(this.weekNumbersVisible)&nbsp;{<a name="line_10235"></a></li>
<li id="line_10236" class="even"><span class="lineNumber">10236&nbsp;</span>			return&nbsp;'&lt;td&nbsp;class="fc-week-number"&nbsp;'&nbsp;+&nbsp;this.weekNumberStyleAttr()&nbsp;+&nbsp;'&gt;&lt;/td&gt;';<a name="line_10236"></a></li>
<li id="line_10237" class="odd"><span class="lineNumber">10237&nbsp;</span>		}<a name="line_10237"></a></li>
<li id="line_10238" class="even"><span class="lineNumber">10238&nbsp;</span>	},<a name="line_10238"></a></li>
<li id="line_10239" class="odd"><span class="lineNumber">10239&nbsp;</span><a name="line_10239"></a></li>
<li id="line_10240" class="even"><span class="lineNumber">10240&nbsp;</span><a name="line_10240"></a></li>
<li id="line_10241" class="odd"><span class="lineNumber">10241&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;for&nbsp;the&nbsp;&lt;td&gt;s&nbsp;of&nbsp;the&nbsp;"number"&nbsp;row&nbsp;in&nbsp;the&nbsp;DayGrid's&nbsp;content&nbsp;skeleton.<a name="line_10241"></a></li>
<li id="line_10242" class="even"><span class="lineNumber">10242&nbsp;</span>	//&nbsp;The&nbsp;number&nbsp;row&nbsp;will&nbsp;only&nbsp;exist&nbsp;if&nbsp;either&nbsp;day&nbsp;numbers&nbsp;or&nbsp;week&nbsp;numbers&nbsp;are&nbsp;turned&nbsp;on.<a name="line_10242"></a></li>
<li id="line_10243" class="odd"><span class="lineNumber">10243&nbsp;</span>	numberCellHtml:&nbsp;function(cell)&nbsp;{<a name="line_10243"></a></li>
<li id="line_10244" class="even"><span class="lineNumber">10244&nbsp;</span>		var&nbsp;date&nbsp;=&nbsp;cell.start;<a name="line_10244"></a></li>
<li id="line_10245" class="odd"><span class="lineNumber">10245&nbsp;</span>		var&nbsp;classes;<a name="line_10245"></a></li>
<li id="line_10246" class="even"><span class="lineNumber">10246&nbsp;</span><a name="line_10246"></a></li>
<li id="line_10247" class="odd"><span class="lineNumber">10247&nbsp;</span>		if&nbsp;(!this.dayNumbersVisible)&nbsp;{&nbsp;//&nbsp;if&nbsp;there&nbsp;are&nbsp;week&nbsp;numbers&nbsp;but&nbsp;not&nbsp;day&nbsp;numbers<a name="line_10247"></a></li>
<li id="line_10248" class="even"><span class="lineNumber">10248&nbsp;</span>			return&nbsp;'&lt;td/&gt;';&nbsp;//&nbsp;&nbsp;will&nbsp;create&nbsp;an&nbsp;empty&nbsp;space&nbsp;above&nbsp;events&nbsp;:(<a name="line_10248"></a></li>
<li id="line_10249" class="odd"><span class="lineNumber">10249&nbsp;</span>		}<a name="line_10249"></a></li>
<li id="line_10250" class="even"><span class="lineNumber">10250&nbsp;</span><a name="line_10250"></a></li>
<li id="line_10251" class="odd"><span class="lineNumber">10251&nbsp;</span>		classes&nbsp;=&nbsp;this.dayGrid.getDayClasses(date);<a name="line_10251"></a></li>
<li id="line_10252" class="even"><span class="lineNumber">10252&nbsp;</span>		classes.unshift('fc-day-number');<a name="line_10252"></a></li>
<li id="line_10253" class="odd"><span class="lineNumber">10253&nbsp;</span><a name="line_10253"></a></li>
<li id="line_10254" class="even"><span class="lineNumber">10254&nbsp;</span>		return&nbsp;''&nbsp;+<a name="line_10254"></a></li>
<li id="line_10255" class="odd"><span class="lineNumber">10255&nbsp;</span>			'&lt;td&nbsp;class="'&nbsp;+&nbsp;classes.join('&nbsp;')&nbsp;+&nbsp;'"&nbsp;data-date="'&nbsp;+&nbsp;date.format()&nbsp;+&nbsp;'"&gt;'&nbsp;+<a name="line_10255"></a></li>
<li id="line_10256" class="even"><span class="lineNumber">10256&nbsp;</span>				date.date()&nbsp;+<a name="line_10256"></a></li>
<li id="line_10257" class="odd"><span class="lineNumber">10257&nbsp;</span>			'&lt;/td&gt;';<a name="line_10257"></a></li>
<li id="line_10258" class="even"><span class="lineNumber">10258&nbsp;</span>	},<a name="line_10258"></a></li>
<li id="line_10259" class="odd"><span class="lineNumber">10259&nbsp;</span><a name="line_10259"></a></li>
<li id="line_10260" class="even"><span class="lineNumber">10260&nbsp;</span><a name="line_10260"></a></li>
<li id="line_10261" class="odd"><span class="lineNumber">10261&nbsp;</span>	//&nbsp;Generates&nbsp;an&nbsp;HTML&nbsp;attribute&nbsp;string&nbsp;for&nbsp;setting&nbsp;the&nbsp;width&nbsp;of&nbsp;the&nbsp;week&nbsp;number&nbsp;column,&nbsp;if&nbsp;it&nbsp;is&nbsp;known<a name="line_10261"></a></li>
<li id="line_10262" class="even"><span class="lineNumber">10262&nbsp;</span>	weekNumberStyleAttr:&nbsp;function()&nbsp;{<a name="line_10262"></a></li>
<li id="line_10263" class="odd"><span class="lineNumber">10263&nbsp;</span>		if&nbsp;(this.weekNumberWidth&nbsp;!==&nbsp;null)&nbsp;{<a name="line_10263"></a></li>
<li id="line_10264" class="even"><span class="lineNumber">10264&nbsp;</span>			return&nbsp;'style="width:'&nbsp;+&nbsp;this.weekNumberWidth&nbsp;+&nbsp;'px"';<a name="line_10264"></a></li>
<li id="line_10265" class="odd"><span class="lineNumber">10265&nbsp;</span>		}<a name="line_10265"></a></li>
<li id="line_10266" class="even"><span class="lineNumber">10266&nbsp;</span>		return&nbsp;'';<a name="line_10266"></a></li>
<li id="line_10267" class="odd"><span class="lineNumber">10267&nbsp;</span>	},<a name="line_10267"></a></li>
<li id="line_10268" class="even"><span class="lineNumber">10268&nbsp;</span><a name="line_10268"></a></li>
<li id="line_10269" class="odd"><span class="lineNumber">10269&nbsp;</span><a name="line_10269"></a></li>
<li id="line_10270" class="even"><span class="lineNumber">10270&nbsp;</span>	//&nbsp;Determines&nbsp;whether&nbsp;each&nbsp;row&nbsp;should&nbsp;have&nbsp;a&nbsp;constant&nbsp;height<a name="line_10270"></a></li>
<li id="line_10271" class="odd"><span class="lineNumber">10271&nbsp;</span>	hasRigidRows:&nbsp;function()&nbsp;{<a name="line_10271"></a></li>
<li id="line_10272" class="even"><span class="lineNumber">10272&nbsp;</span>		var&nbsp;eventLimit&nbsp;=&nbsp;this.opt('eventLimit');<a name="line_10272"></a></li>
<li id="line_10273" class="odd"><span class="lineNumber">10273&nbsp;</span>		return&nbsp;eventLimit&nbsp;&amp;&amp;&nbsp;typeof&nbsp;eventLimit&nbsp;!==&nbsp;'number';<a name="line_10273"></a></li>
<li id="line_10274" class="even"><span class="lineNumber">10274&nbsp;</span>	},<a name="line_10274"></a></li>
<li id="line_10275" class="odd"><span class="lineNumber">10275&nbsp;</span><a name="line_10275"></a></li>
<li id="line_10276" class="even"><span class="lineNumber">10276&nbsp;</span><a name="line_10276"></a></li>
<li id="line_10277" class="odd"><span class="lineNumber">10277&nbsp;</span>	/*&nbsp;Dimensions<a name="line_10277"></a></li>
<li id="line_10278" class="even"><span class="lineNumber">10278&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_10278"></a></li>
<li id="line_10279" class="odd"><span class="lineNumber">10279&nbsp;</span><a name="line_10279"></a></li>
<li id="line_10280" class="even"><span class="lineNumber">10280&nbsp;</span><a name="line_10280"></a></li>
<li id="line_10281" class="odd"><span class="lineNumber">10281&nbsp;</span>	//&nbsp;Refreshes&nbsp;the&nbsp;horizontal&nbsp;dimensions&nbsp;of&nbsp;the&nbsp;view<a name="line_10281"></a></li>
<li id="line_10282" class="even"><span class="lineNumber">10282&nbsp;</span>	updateWidth:&nbsp;function()&nbsp;{<a name="line_10282"></a></li>
<li id="line_10283" class="odd"><span class="lineNumber">10283&nbsp;</span>		if&nbsp;(this.weekNumbersVisible)&nbsp;{<a name="line_10283"></a></li>
<li id="line_10284" class="even"><span class="lineNumber">10284&nbsp;</span>			//&nbsp;Make&nbsp;sure&nbsp;all&nbsp;week&nbsp;number&nbsp;cells&nbsp;running&nbsp;down&nbsp;the&nbsp;side&nbsp;have&nbsp;the&nbsp;same&nbsp;width.<a name="line_10284"></a></li>
<li id="line_10285" class="odd"><span class="lineNumber">10285&nbsp;</span>			//&nbsp;Record&nbsp;the&nbsp;width&nbsp;for&nbsp;cells&nbsp;created&nbsp;later.<a name="line_10285"></a></li>
<li id="line_10286" class="even"><span class="lineNumber">10286&nbsp;</span>			this.weekNumberWidth&nbsp;=&nbsp;matchCellWidths(<a name="line_10286"></a></li>
<li id="line_10287" class="odd"><span class="lineNumber">10287&nbsp;</span>				this.el.find('.fc-week-number')<a name="line_10287"></a></li>
<li id="line_10288" class="even"><span class="lineNumber">10288&nbsp;</span>			);<a name="line_10288"></a></li>
<li id="line_10289" class="odd"><span class="lineNumber">10289&nbsp;</span>		}<a name="line_10289"></a></li>
<li id="line_10290" class="even"><span class="lineNumber">10290&nbsp;</span>	},<a name="line_10290"></a></li>
<li id="line_10291" class="odd"><span class="lineNumber">10291&nbsp;</span><a name="line_10291"></a></li>
<li id="line_10292" class="even"><span class="lineNumber">10292&nbsp;</span><a name="line_10292"></a></li>
<li id="line_10293" class="odd"><span class="lineNumber">10293&nbsp;</span>	//&nbsp;Adjusts&nbsp;the&nbsp;vertical&nbsp;dimensions&nbsp;of&nbsp;the&nbsp;view&nbsp;to&nbsp;the&nbsp;specified&nbsp;values<a name="line_10293"></a></li>
<li id="line_10294" class="even"><span class="lineNumber">10294&nbsp;</span>	setHeight:&nbsp;function(totalHeight,&nbsp;isAuto)&nbsp;{<a name="line_10294"></a></li>
<li id="line_10295" class="odd"><span class="lineNumber">10295&nbsp;</span>		var&nbsp;eventLimit&nbsp;=&nbsp;this.opt('eventLimit');<a name="line_10295"></a></li>
<li id="line_10296" class="even"><span class="lineNumber">10296&nbsp;</span>		var&nbsp;scrollerHeight;<a name="line_10296"></a></li>
<li id="line_10297" class="odd"><span class="lineNumber">10297&nbsp;</span><a name="line_10297"></a></li>
<li id="line_10298" class="even"><span class="lineNumber">10298&nbsp;</span>		//&nbsp;reset&nbsp;all&nbsp;heights&nbsp;to&nbsp;be&nbsp;natural<a name="line_10298"></a></li>
<li id="line_10299" class="odd"><span class="lineNumber">10299&nbsp;</span>		unsetScroller(this.scrollerEl);<a name="line_10299"></a></li>
<li id="line_10300" class="even"><span class="lineNumber">10300&nbsp;</span>		uncompensateScroll(this.headRowEl);<a name="line_10300"></a></li>
<li id="line_10301" class="odd"><span class="lineNumber">10301&nbsp;</span><a name="line_10301"></a></li>
<li id="line_10302" class="even"><span class="lineNumber">10302&nbsp;</span>		this.dayGrid.removeSegPopover();&nbsp;//&nbsp;kill&nbsp;the&nbsp;"more"&nbsp;popover&nbsp;if&nbsp;displayed<a name="line_10302"></a></li>
<li id="line_10303" class="odd"><span class="lineNumber">10303&nbsp;</span><a name="line_10303"></a></li>
<li id="line_10304" class="even"><span class="lineNumber">10304&nbsp;</span>		//&nbsp;is&nbsp;the&nbsp;event&nbsp;limit&nbsp;a&nbsp;constant&nbsp;level&nbsp;number?<a name="line_10304"></a></li>
<li id="line_10305" class="odd"><span class="lineNumber">10305&nbsp;</span>		if&nbsp;(eventLimit&nbsp;&amp;&amp;&nbsp;typeof&nbsp;eventLimit&nbsp;===&nbsp;'number')&nbsp;{<a name="line_10305"></a></li>
<li id="line_10306" class="even"><span class="lineNumber">10306&nbsp;</span>			this.dayGrid.limitRows(eventLimit);&nbsp;//&nbsp;limit&nbsp;the&nbsp;levels&nbsp;first&nbsp;so&nbsp;the&nbsp;height&nbsp;can&nbsp;redistribute&nbsp;after<a name="line_10306"></a></li>
<li id="line_10307" class="odd"><span class="lineNumber">10307&nbsp;</span>		}<a name="line_10307"></a></li>
<li id="line_10308" class="even"><span class="lineNumber">10308&nbsp;</span><a name="line_10308"></a></li>
<li id="line_10309" class="odd"><span class="lineNumber">10309&nbsp;</span>		scrollerHeight&nbsp;=&nbsp;this.computeScrollerHeight(totalHeight);<a name="line_10309"></a></li>
<li id="line_10310" class="even"><span class="lineNumber">10310&nbsp;</span>		this.setGridHeight(scrollerHeight,&nbsp;isAuto);<a name="line_10310"></a></li>
<li id="line_10311" class="odd"><span class="lineNumber">10311&nbsp;</span><a name="line_10311"></a></li>
<li id="line_10312" class="even"><span class="lineNumber">10312&nbsp;</span>		//&nbsp;is&nbsp;the&nbsp;event&nbsp;limit&nbsp;dynamically&nbsp;calculated?<a name="line_10312"></a></li>
<li id="line_10313" class="odd"><span class="lineNumber">10313&nbsp;</span>		if&nbsp;(eventLimit&nbsp;&amp;&amp;&nbsp;typeof&nbsp;eventLimit&nbsp;!==&nbsp;'number')&nbsp;{<a name="line_10313"></a></li>
<li id="line_10314" class="even"><span class="lineNumber">10314&nbsp;</span>			this.dayGrid.limitRows(eventLimit);&nbsp;//&nbsp;limit&nbsp;the&nbsp;levels&nbsp;after&nbsp;the&nbsp;grid's&nbsp;row&nbsp;heights&nbsp;have&nbsp;been&nbsp;set<a name="line_10314"></a></li>
<li id="line_10315" class="odd"><span class="lineNumber">10315&nbsp;</span>		}<a name="line_10315"></a></li>
<li id="line_10316" class="even"><span class="lineNumber">10316&nbsp;</span><a name="line_10316"></a></li>
<li id="line_10317" class="odd"><span class="lineNumber">10317&nbsp;</span>		if&nbsp;(!isAuto&nbsp;&amp;&amp;&nbsp;setPotentialScroller(this.scrollerEl,&nbsp;scrollerHeight))&nbsp;{&nbsp;//&nbsp;using&nbsp;scrollbars?<a name="line_10317"></a></li>
<li id="line_10318" class="even"><span class="lineNumber">10318&nbsp;</span><a name="line_10318"></a></li>
<li id="line_10319" class="odd"><span class="lineNumber">10319&nbsp;</span>			compensateScroll(this.headRowEl,&nbsp;getScrollbarWidths(this.scrollerEl));<a name="line_10319"></a></li>
<li id="line_10320" class="even"><span class="lineNumber">10320&nbsp;</span><a name="line_10320"></a></li>
<li id="line_10321" class="odd"><span class="lineNumber">10321&nbsp;</span>			//&nbsp;doing&nbsp;the&nbsp;scrollbar&nbsp;compensation&nbsp;might&nbsp;have&nbsp;created&nbsp;text&nbsp;overflow&nbsp;which&nbsp;created&nbsp;more&nbsp;height.&nbsp;redo<a name="line_10321"></a></li>
<li id="line_10322" class="even"><span class="lineNumber">10322&nbsp;</span>			scrollerHeight&nbsp;=&nbsp;this.computeScrollerHeight(totalHeight);<a name="line_10322"></a></li>
<li id="line_10323" class="odd"><span class="lineNumber">10323&nbsp;</span>			this.scrollerEl.height(scrollerHeight);<a name="line_10323"></a></li>
<li id="line_10324" class="even"><span class="lineNumber">10324&nbsp;</span>		}<a name="line_10324"></a></li>
<li id="line_10325" class="odd"><span class="lineNumber">10325&nbsp;</span>	},<a name="line_10325"></a></li>
<li id="line_10326" class="even"><span class="lineNumber">10326&nbsp;</span><a name="line_10326"></a></li>
<li id="line_10327" class="odd"><span class="lineNumber">10327&nbsp;</span><a name="line_10327"></a></li>
<li id="line_10328" class="even"><span class="lineNumber">10328&nbsp;</span>	//&nbsp;Sets&nbsp;the&nbsp;height&nbsp;of&nbsp;just&nbsp;the&nbsp;DayGrid&nbsp;component&nbsp;in&nbsp;this&nbsp;view<a name="line_10328"></a></li>
<li id="line_10329" class="odd"><span class="lineNumber">10329&nbsp;</span>	setGridHeight:&nbsp;function(height,&nbsp;isAuto)&nbsp;{<a name="line_10329"></a></li>
<li id="line_10330" class="even"><span class="lineNumber">10330&nbsp;</span>		if&nbsp;(isAuto)&nbsp;{<a name="line_10330"></a></li>
<li id="line_10331" class="odd"><span class="lineNumber">10331&nbsp;</span>			undistributeHeight(this.dayGrid.rowEls);&nbsp;//&nbsp;let&nbsp;the&nbsp;rows&nbsp;be&nbsp;their&nbsp;natural&nbsp;height&nbsp;with&nbsp;no&nbsp;expanding<a name="line_10331"></a></li>
<li id="line_10332" class="even"><span class="lineNumber">10332&nbsp;</span>		}<a name="line_10332"></a></li>
<li id="line_10333" class="odd"><span class="lineNumber">10333&nbsp;</span>		else&nbsp;{<a name="line_10333"></a></li>
<li id="line_10334" class="even"><span class="lineNumber">10334&nbsp;</span>			distributeHeight(this.dayGrid.rowEls,&nbsp;height,&nbsp;true);&nbsp;//&nbsp;true&nbsp;=&nbsp;compensate&nbsp;for&nbsp;height-hogging&nbsp;rows<a name="line_10334"></a></li>
<li id="line_10335" class="odd"><span class="lineNumber">10335&nbsp;</span>		}<a name="line_10335"></a></li>
<li id="line_10336" class="even"><span class="lineNumber">10336&nbsp;</span>	},<a name="line_10336"></a></li>
<li id="line_10337" class="odd"><span class="lineNumber">10337&nbsp;</span><a name="line_10337"></a></li>
<li id="line_10338" class="even"><span class="lineNumber">10338&nbsp;</span><a name="line_10338"></a></li>
<li id="line_10339" class="odd"><span class="lineNumber">10339&nbsp;</span>	/*&nbsp;Events<a name="line_10339"></a></li>
<li id="line_10340" class="even"><span class="lineNumber">10340&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_10340"></a></li>
<li id="line_10341" class="odd"><span class="lineNumber">10341&nbsp;</span><a name="line_10341"></a></li>
<li id="line_10342" class="even"><span class="lineNumber">10342&nbsp;</span><a name="line_10342"></a></li>
<li id="line_10343" class="odd"><span class="lineNumber">10343&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;given&nbsp;events&nbsp;onto&nbsp;the&nbsp;view&nbsp;and&nbsp;populates&nbsp;the&nbsp;segments&nbsp;array<a name="line_10343"></a></li>
<li id="line_10344" class="even"><span class="lineNumber">10344&nbsp;</span>	renderEvents:&nbsp;function(events)&nbsp;{<a name="line_10344"></a></li>
<li id="line_10345" class="odd"><span class="lineNumber">10345&nbsp;</span>		this.dayGrid.renderEvents(events);<a name="line_10345"></a></li>
<li id="line_10346" class="even"><span class="lineNumber">10346&nbsp;</span><a name="line_10346"></a></li>
<li id="line_10347" class="odd"><span class="lineNumber">10347&nbsp;</span>		this.updateHeight();&nbsp;//&nbsp;must&nbsp;compensate&nbsp;for&nbsp;events&nbsp;that&nbsp;overflow&nbsp;the&nbsp;row<a name="line_10347"></a></li>
<li id="line_10348" class="even"><span class="lineNumber">10348&nbsp;</span>	},<a name="line_10348"></a></li>
<li id="line_10349" class="odd"><span class="lineNumber">10349&nbsp;</span><a name="line_10349"></a></li>
<li id="line_10350" class="even"><span class="lineNumber">10350&nbsp;</span><a name="line_10350"></a></li>
<li id="line_10351" class="odd"><span class="lineNumber">10351&nbsp;</span>	//&nbsp;Retrieves&nbsp;all&nbsp;segment&nbsp;objects&nbsp;that&nbsp;are&nbsp;rendered&nbsp;in&nbsp;the&nbsp;view<a name="line_10351"></a></li>
<li id="line_10352" class="even"><span class="lineNumber">10352&nbsp;</span>	getEventSegs:&nbsp;function()&nbsp;{<a name="line_10352"></a></li>
<li id="line_10353" class="odd"><span class="lineNumber">10353&nbsp;</span>		return&nbsp;this.dayGrid.getEventSegs();<a name="line_10353"></a></li>
<li id="line_10354" class="even"><span class="lineNumber">10354&nbsp;</span>	},<a name="line_10354"></a></li>
<li id="line_10355" class="odd"><span class="lineNumber">10355&nbsp;</span><a name="line_10355"></a></li>
<li id="line_10356" class="even"><span class="lineNumber">10356&nbsp;</span><a name="line_10356"></a></li>
<li id="line_10357" class="odd"><span class="lineNumber">10357&nbsp;</span>	//&nbsp;Unrenders&nbsp;all&nbsp;event&nbsp;elements&nbsp;and&nbsp;clears&nbsp;internal&nbsp;segment&nbsp;data<a name="line_10357"></a></li>
<li id="line_10358" class="even"><span class="lineNumber">10358&nbsp;</span>	unrenderEvents:&nbsp;function()&nbsp;{<a name="line_10358"></a></li>
<li id="line_10359" class="odd"><span class="lineNumber">10359&nbsp;</span>		this.dayGrid.unrenderEvents();<a name="line_10359"></a></li>
<li id="line_10360" class="even"><span class="lineNumber">10360&nbsp;</span><a name="line_10360"></a></li>
<li id="line_10361" class="odd"><span class="lineNumber">10361&nbsp;</span>		//&nbsp;we&nbsp;DON'T&nbsp;need&nbsp;to&nbsp;call&nbsp;updateHeight()&nbsp;because:<a name="line_10361"></a></li>
<li id="line_10362" class="even"><span class="lineNumber">10362&nbsp;</span>		//&nbsp;A)&nbsp;a&nbsp;renderEvents()&nbsp;call&nbsp;always&nbsp;happens&nbsp;after&nbsp;this,&nbsp;which&nbsp;will&nbsp;eventually&nbsp;call&nbsp;updateHeight()<a name="line_10362"></a></li>
<li id="line_10363" class="odd"><span class="lineNumber">10363&nbsp;</span>		//&nbsp;B)&nbsp;in&nbsp;IE8,&nbsp;this&nbsp;causes&nbsp;a&nbsp;flash&nbsp;whenever&nbsp;events&nbsp;are&nbsp;rerendered<a name="line_10363"></a></li>
<li id="line_10364" class="even"><span class="lineNumber">10364&nbsp;</span>	},<a name="line_10364"></a></li>
<li id="line_10365" class="odd"><span class="lineNumber">10365&nbsp;</span><a name="line_10365"></a></li>
<li id="line_10366" class="even"><span class="lineNumber">10366&nbsp;</span><a name="line_10366"></a></li>
<li id="line_10367" class="odd"><span class="lineNumber">10367&nbsp;</span>	/*&nbsp;Dragging&nbsp;(for&nbsp;both&nbsp;events&nbsp;and&nbsp;external&nbsp;elements)<a name="line_10367"></a></li>
<li id="line_10368" class="even"><span class="lineNumber">10368&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_10368"></a></li>
<li id="line_10369" class="odd"><span class="lineNumber">10369&nbsp;</span><a name="line_10369"></a></li>
<li id="line_10370" class="even"><span class="lineNumber">10370&nbsp;</span><a name="line_10370"></a></li>
<li id="line_10371" class="odd"><span class="lineNumber">10371&nbsp;</span>	//&nbsp;A&nbsp;returned&nbsp;value&nbsp;of&nbsp;`true`&nbsp;signals&nbsp;that&nbsp;a&nbsp;mock&nbsp;"helper"&nbsp;event&nbsp;has&nbsp;been&nbsp;rendered.<a name="line_10371"></a></li>
<li id="line_10372" class="even"><span class="lineNumber">10372&nbsp;</span>	renderDrag:&nbsp;function(dropLocation,&nbsp;seg)&nbsp;{<a name="line_10372"></a></li>
<li id="line_10373" class="odd"><span class="lineNumber">10373&nbsp;</span>		return&nbsp;this.dayGrid.renderDrag(dropLocation,&nbsp;seg);<a name="line_10373"></a></li>
<li id="line_10374" class="even"><span class="lineNumber">10374&nbsp;</span>	},<a name="line_10374"></a></li>
<li id="line_10375" class="odd"><span class="lineNumber">10375&nbsp;</span><a name="line_10375"></a></li>
<li id="line_10376" class="even"><span class="lineNumber">10376&nbsp;</span><a name="line_10376"></a></li>
<li id="line_10377" class="odd"><span class="lineNumber">10377&nbsp;</span>	unrenderDrag:&nbsp;function()&nbsp;{<a name="line_10377"></a></li>
<li id="line_10378" class="even"><span class="lineNumber">10378&nbsp;</span>		this.dayGrid.unrenderDrag();<a name="line_10378"></a></li>
<li id="line_10379" class="odd"><span class="lineNumber">10379&nbsp;</span>	},<a name="line_10379"></a></li>
<li id="line_10380" class="even"><span class="lineNumber">10380&nbsp;</span><a name="line_10380"></a></li>
<li id="line_10381" class="odd"><span class="lineNumber">10381&nbsp;</span><a name="line_10381"></a></li>
<li id="line_10382" class="even"><span class="lineNumber">10382&nbsp;</span>	/*&nbsp;Selection<a name="line_10382"></a></li>
<li id="line_10383" class="odd"><span class="lineNumber">10383&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_10383"></a></li>
<li id="line_10384" class="even"><span class="lineNumber">10384&nbsp;</span><a name="line_10384"></a></li>
<li id="line_10385" class="odd"><span class="lineNumber">10385&nbsp;</span><a name="line_10385"></a></li>
<li id="line_10386" class="even"><span class="lineNumber">10386&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;a&nbsp;selection<a name="line_10386"></a></li>
<li id="line_10387" class="odd"><span class="lineNumber">10387&nbsp;</span>	renderSelection:&nbsp;function(range)&nbsp;{<a name="line_10387"></a></li>
<li id="line_10388" class="even"><span class="lineNumber">10388&nbsp;</span>		this.dayGrid.renderSelection(range);<a name="line_10388"></a></li>
<li id="line_10389" class="odd"><span class="lineNumber">10389&nbsp;</span>	},<a name="line_10389"></a></li>
<li id="line_10390" class="even"><span class="lineNumber">10390&nbsp;</span><a name="line_10390"></a></li>
<li id="line_10391" class="odd"><span class="lineNumber">10391&nbsp;</span><a name="line_10391"></a></li>
<li id="line_10392" class="even"><span class="lineNumber">10392&nbsp;</span>	//&nbsp;Unrenders&nbsp;a&nbsp;visual&nbsp;indications&nbsp;of&nbsp;a&nbsp;selection<a name="line_10392"></a></li>
<li id="line_10393" class="odd"><span class="lineNumber">10393&nbsp;</span>	unrenderSelection:&nbsp;function()&nbsp;{<a name="line_10393"></a></li>
<li id="line_10394" class="even"><span class="lineNumber">10394&nbsp;</span>		this.dayGrid.unrenderSelection();<a name="line_10394"></a></li>
<li id="line_10395" class="odd"><span class="lineNumber">10395&nbsp;</span>	}<a name="line_10395"></a></li>
<li id="line_10396" class="even"><span class="lineNumber">10396&nbsp;</span><a name="line_10396"></a></li>
<li id="line_10397" class="odd"><span class="lineNumber">10397&nbsp;</span>});<a name="line_10397"></a></li>
<li id="line_10398" class="even"><span class="lineNumber">10398&nbsp;</span><a name="line_10398"></a></li>
<li id="line_10399" class="odd"><span class="lineNumber">10399&nbsp;</span>;;<a name="line_10399"></a></li>
<li id="line_10400" class="even"><span class="lineNumber">10400&nbsp;</span><a name="line_10400"></a></li>
<li id="line_10401" class="odd"><span class="lineNumber">10401&nbsp;</span>/*&nbsp;A&nbsp;month&nbsp;view&nbsp;with&nbsp;day&nbsp;cells&nbsp;running&nbsp;in&nbsp;rows&nbsp;(one-per-week)&nbsp;and&nbsp;columns<a name="line_10401"></a></li>
<li id="line_10402" class="even"><span class="lineNumber">10402&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_10402"></a></li>
<li id="line_10403" class="odd"><span class="lineNumber">10403&nbsp;</span><a name="line_10403"></a></li>
<li id="line_10404" class="even"><span class="lineNumber">10404&nbsp;</span>var&nbsp;MonthView&nbsp;=&nbsp;BasicView.extend({<a name="line_10404"></a></li>
<li id="line_10405" class="odd"><span class="lineNumber">10405&nbsp;</span><a name="line_10405"></a></li>
<li id="line_10406" class="even"><span class="lineNumber">10406&nbsp;</span>	//&nbsp;Produces&nbsp;information&nbsp;about&nbsp;what&nbsp;range&nbsp;to&nbsp;display<a name="line_10406"></a></li>
<li id="line_10407" class="odd"><span class="lineNumber">10407&nbsp;</span>	computeRange:&nbsp;function(date)&nbsp;{<a name="line_10407"></a></li>
<li id="line_10408" class="even"><span class="lineNumber">10408&nbsp;</span>		var&nbsp;range&nbsp;=&nbsp;BasicView.prototype.computeRange.call(this,&nbsp;date);&nbsp;//&nbsp;get&nbsp;value&nbsp;from&nbsp;super-method<a name="line_10408"></a></li>
<li id="line_10409" class="odd"><span class="lineNumber">10409&nbsp;</span>		var&nbsp;rowCnt;<a name="line_10409"></a></li>
<li id="line_10410" class="even"><span class="lineNumber">10410&nbsp;</span><a name="line_10410"></a></li>
<li id="line_10411" class="odd"><span class="lineNumber">10411&nbsp;</span>		//&nbsp;ensure&nbsp;6&nbsp;weeks<a name="line_10411"></a></li>
<li id="line_10412" class="even"><span class="lineNumber">10412&nbsp;</span>		if&nbsp;(this.isFixedWeeks())&nbsp;{<a name="line_10412"></a></li>
<li id="line_10413" class="odd"><span class="lineNumber">10413&nbsp;</span>			rowCnt&nbsp;=&nbsp;Math.ceil(range.end.diff(range.start,&nbsp;'weeks',&nbsp;true));&nbsp;//&nbsp;could&nbsp;be&nbsp;partial&nbsp;weeks&nbsp;due&nbsp;to&nbsp;hiddenDays<a name="line_10413"></a></li>
<li id="line_10414" class="even"><span class="lineNumber">10414&nbsp;</span>			range.end.add(6&nbsp;-&nbsp;rowCnt,&nbsp;'weeks');<a name="line_10414"></a></li>
<li id="line_10415" class="odd"><span class="lineNumber">10415&nbsp;</span>		}<a name="line_10415"></a></li>
<li id="line_10416" class="even"><span class="lineNumber">10416&nbsp;</span><a name="line_10416"></a></li>
<li id="line_10417" class="odd"><span class="lineNumber">10417&nbsp;</span>		return&nbsp;range;<a name="line_10417"></a></li>
<li id="line_10418" class="even"><span class="lineNumber">10418&nbsp;</span>	},<a name="line_10418"></a></li>
<li id="line_10419" class="odd"><span class="lineNumber">10419&nbsp;</span><a name="line_10419"></a></li>
<li id="line_10420" class="even"><span class="lineNumber">10420&nbsp;</span><a name="line_10420"></a></li>
<li id="line_10421" class="odd"><span class="lineNumber">10421&nbsp;</span>	//&nbsp;Overrides&nbsp;the&nbsp;default&nbsp;BasicView&nbsp;behavior&nbsp;to&nbsp;have&nbsp;special&nbsp;multi-week&nbsp;auto-height&nbsp;logic<a name="line_10421"></a></li>
<li id="line_10422" class="even"><span class="lineNumber">10422&nbsp;</span>	setGridHeight:&nbsp;function(height,&nbsp;isAuto)&nbsp;{<a name="line_10422"></a></li>
<li id="line_10423" class="odd"><span class="lineNumber">10423&nbsp;</span><a name="line_10423"></a></li>
<li id="line_10424" class="even"><span class="lineNumber">10424&nbsp;</span>		isAuto&nbsp;=&nbsp;isAuto&nbsp;||&nbsp;this.opt('weekMode')&nbsp;===&nbsp;'variable';&nbsp;//&nbsp;LEGACY:&nbsp;weekMode&nbsp;is&nbsp;deprecated<a name="line_10424"></a></li>
<li id="line_10425" class="odd"><span class="lineNumber">10425&nbsp;</span><a name="line_10425"></a></li>
<li id="line_10426" class="even"><span class="lineNumber">10426&nbsp;</span>		//&nbsp;if&nbsp;auto,&nbsp;make&nbsp;the&nbsp;height&nbsp;of&nbsp;each&nbsp;row&nbsp;the&nbsp;height&nbsp;that&nbsp;it&nbsp;would&nbsp;be&nbsp;if&nbsp;there&nbsp;were&nbsp;6&nbsp;weeks<a name="line_10426"></a></li>
<li id="line_10427" class="odd"><span class="lineNumber">10427&nbsp;</span>		if&nbsp;(isAuto)&nbsp;{<a name="line_10427"></a></li>
<li id="line_10428" class="even"><span class="lineNumber">10428&nbsp;</span>			height&nbsp;*=&nbsp;this.rowCnt&nbsp;/&nbsp;6;<a name="line_10428"></a></li>
<li id="line_10429" class="odd"><span class="lineNumber">10429&nbsp;</span>		}<a name="line_10429"></a></li>
<li id="line_10430" class="even"><span class="lineNumber">10430&nbsp;</span><a name="line_10430"></a></li>
<li id="line_10431" class="odd"><span class="lineNumber">10431&nbsp;</span>		distributeHeight(this.dayGrid.rowEls,&nbsp;height,&nbsp;!isAuto);&nbsp;//&nbsp;if&nbsp;auto,&nbsp;don't&nbsp;compensate&nbsp;for&nbsp;height-hogging&nbsp;rows<a name="line_10431"></a></li>
<li id="line_10432" class="even"><span class="lineNumber">10432&nbsp;</span>	},<a name="line_10432"></a></li>
<li id="line_10433" class="odd"><span class="lineNumber">10433&nbsp;</span><a name="line_10433"></a></li>
<li id="line_10434" class="even"><span class="lineNumber">10434&nbsp;</span><a name="line_10434"></a></li>
<li id="line_10435" class="odd"><span class="lineNumber">10435&nbsp;</span>	isFixedWeeks:&nbsp;function()&nbsp;{<a name="line_10435"></a></li>
<li id="line_10436" class="even"><span class="lineNumber">10436&nbsp;</span>		var&nbsp;weekMode&nbsp;=&nbsp;this.opt('weekMode');&nbsp;//&nbsp;LEGACY:&nbsp;weekMode&nbsp;is&nbsp;deprecated<a name="line_10436"></a></li>
<li id="line_10437" class="odd"><span class="lineNumber">10437&nbsp;</span>		if&nbsp;(weekMode)&nbsp;{<a name="line_10437"></a></li>
<li id="line_10438" class="even"><span class="lineNumber">10438&nbsp;</span>			return&nbsp;weekMode&nbsp;===&nbsp;'fixed';&nbsp;//&nbsp;if&nbsp;any&nbsp;other&nbsp;type&nbsp;of&nbsp;weekMode,&nbsp;assume&nbsp;NOT&nbsp;fixed<a name="line_10438"></a></li>
<li id="line_10439" class="odd"><span class="lineNumber">10439&nbsp;</span>		}<a name="line_10439"></a></li>
<li id="line_10440" class="even"><span class="lineNumber">10440&nbsp;</span><a name="line_10440"></a></li>
<li id="line_10441" class="odd"><span class="lineNumber">10441&nbsp;</span>		return&nbsp;this.opt('fixedWeekCount');<a name="line_10441"></a></li>
<li id="line_10442" class="even"><span class="lineNumber">10442&nbsp;</span>	}<a name="line_10442"></a></li>
<li id="line_10443" class="odd"><span class="lineNumber">10443&nbsp;</span><a name="line_10443"></a></li>
<li id="line_10444" class="even"><span class="lineNumber">10444&nbsp;</span>});<a name="line_10444"></a></li>
<li id="line_10445" class="odd"><span class="lineNumber">10445&nbsp;</span><a name="line_10445"></a></li>
<li id="line_10446" class="even"><span class="lineNumber">10446&nbsp;</span>;;<a name="line_10446"></a></li>
<li id="line_10447" class="odd"><span class="lineNumber">10447&nbsp;</span><a name="line_10447"></a></li>
<li id="line_10448" class="even"><span class="lineNumber">10448&nbsp;</span>fcViews.basic&nbsp;=&nbsp;{<a name="line_10448"></a></li>
<li id="line_10449" class="odd"><span class="lineNumber">10449&nbsp;</span>	'class':&nbsp;BasicView<a name="line_10449"></a></li>
<li id="line_10450" class="even"><span class="lineNumber">10450&nbsp;</span>};<a name="line_10450"></a></li>
<li id="line_10451" class="odd"><span class="lineNumber">10451&nbsp;</span><a name="line_10451"></a></li>
<li id="line_10452" class="even"><span class="lineNumber">10452&nbsp;</span>fcViews.basicDay&nbsp;=&nbsp;{<a name="line_10452"></a></li>
<li id="line_10453" class="odd"><span class="lineNumber">10453&nbsp;</span>	type:&nbsp;'basic',<a name="line_10453"></a></li>
<li id="line_10454" class="even"><span class="lineNumber">10454&nbsp;</span>	duration:&nbsp;{&nbsp;days:&nbsp;1&nbsp;}<a name="line_10454"></a></li>
<li id="line_10455" class="odd"><span class="lineNumber">10455&nbsp;</span>};<a name="line_10455"></a></li>
<li id="line_10456" class="even"><span class="lineNumber">10456&nbsp;</span><a name="line_10456"></a></li>
<li id="line_10457" class="odd"><span class="lineNumber">10457&nbsp;</span>fcViews.basicWeek&nbsp;=&nbsp;{<a name="line_10457"></a></li>
<li id="line_10458" class="even"><span class="lineNumber">10458&nbsp;</span>	type:&nbsp;'basic',<a name="line_10458"></a></li>
<li id="line_10459" class="odd"><span class="lineNumber">10459&nbsp;</span>	duration:&nbsp;{&nbsp;weeks:&nbsp;1&nbsp;}<a name="line_10459"></a></li>
<li id="line_10460" class="even"><span class="lineNumber">10460&nbsp;</span>};<a name="line_10460"></a></li>
<li id="line_10461" class="odd"><span class="lineNumber">10461&nbsp;</span><a name="line_10461"></a></li>
<li id="line_10462" class="even"><span class="lineNumber">10462&nbsp;</span>fcViews.month&nbsp;=&nbsp;{<a name="line_10462"></a></li>
<li id="line_10463" class="odd"><span class="lineNumber">10463&nbsp;</span>	'class':&nbsp;MonthView,<a name="line_10463"></a></li>
<li id="line_10464" class="even"><span class="lineNumber">10464&nbsp;</span>	duration:&nbsp;{&nbsp;months:&nbsp;1&nbsp;},&nbsp;//&nbsp;important&nbsp;for&nbsp;prev/next<a name="line_10464"></a></li>
<li id="line_10465" class="odd"><span class="lineNumber">10465&nbsp;</span>	defaults:&nbsp;{<a name="line_10465"></a></li>
<li id="line_10466" class="even"><span class="lineNumber">10466&nbsp;</span>		fixedWeekCount:&nbsp;true<a name="line_10466"></a></li>
<li id="line_10467" class="odd"><span class="lineNumber">10467&nbsp;</span>	}<a name="line_10467"></a></li>
<li id="line_10468" class="even"><span class="lineNumber">10468&nbsp;</span>};<a name="line_10468"></a></li>
<li id="line_10469" class="odd"><span class="lineNumber">10469&nbsp;</span>;;<a name="line_10469"></a></li>
<li id="line_10470" class="even"><span class="lineNumber">10470&nbsp;</span><a name="line_10470"></a></li>
<li id="line_10471" class="odd"><span class="lineNumber">10471&nbsp;</span>/*&nbsp;An&nbsp;abstract&nbsp;class&nbsp;for&nbsp;all&nbsp;agenda-related&nbsp;views.&nbsp;Displays&nbsp;one&nbsp;more&nbsp;columns&nbsp;with&nbsp;time&nbsp;slots&nbsp;running&nbsp;vertically.<a name="line_10471"></a></li>
<li id="line_10472" class="even"><span class="lineNumber">10472&nbsp;</span>----------------------------------------------------------------------------------------------------------------------*/<a name="line_10472"></a></li>
<li id="line_10473" class="odd"><span class="lineNumber">10473&nbsp;</span>//&nbsp;Is&nbsp;a&nbsp;manager&nbsp;for&nbsp;the&nbsp;TimeGrid&nbsp;subcomponent&nbsp;and&nbsp;possibly&nbsp;the&nbsp;DayGrid&nbsp;subcomponent&nbsp;(if&nbsp;allDaySlot&nbsp;is&nbsp;on).<a name="line_10473"></a></li>
<li id="line_10474" class="even"><span class="lineNumber">10474&nbsp;</span>//&nbsp;Responsible&nbsp;for&nbsp;managing&nbsp;width/height.<a name="line_10474"></a></li>
<li id="line_10475" class="odd"><span class="lineNumber">10475&nbsp;</span><a name="line_10475"></a></li>
<li id="line_10476" class="even"><span class="lineNumber">10476&nbsp;</span>var&nbsp;AgendaView&nbsp;=&nbsp;View.extend({<a name="line_10476"></a></li>
<li id="line_10477" class="odd"><span class="lineNumber">10477&nbsp;</span><a name="line_10477"></a></li>
<li id="line_10478" class="even"><span class="lineNumber">10478&nbsp;</span>	timeGrid:&nbsp;null,&nbsp;//&nbsp;the&nbsp;main&nbsp;time-grid&nbsp;subcomponent&nbsp;of&nbsp;this&nbsp;view<a name="line_10478"></a></li>
<li id="line_10479" class="odd"><span class="lineNumber">10479&nbsp;</span>	dayGrid:&nbsp;null,&nbsp;//&nbsp;the&nbsp;"all-day"&nbsp;subcomponent.&nbsp;if&nbsp;all-day&nbsp;is&nbsp;turned&nbsp;off,&nbsp;this&nbsp;will&nbsp;be&nbsp;null<a name="line_10479"></a></li>
<li id="line_10480" class="even"><span class="lineNumber">10480&nbsp;</span><a name="line_10480"></a></li>
<li id="line_10481" class="odd"><span class="lineNumber">10481&nbsp;</span>	axisWidth:&nbsp;null,&nbsp;//&nbsp;the&nbsp;width&nbsp;of&nbsp;the&nbsp;time&nbsp;axis&nbsp;running&nbsp;down&nbsp;the&nbsp;side<a name="line_10481"></a></li>
<li id="line_10482" class="even"><span class="lineNumber">10482&nbsp;</span><a name="line_10482"></a></li>
<li id="line_10483" class="odd"><span class="lineNumber">10483&nbsp;</span>	noScrollRowEls:&nbsp;null,&nbsp;//&nbsp;set&nbsp;of&nbsp;fake&nbsp;row&nbsp;elements&nbsp;that&nbsp;must&nbsp;compensate&nbsp;when&nbsp;scrollerEl&nbsp;has&nbsp;scrollbars<a name="line_10483"></a></li>
<li id="line_10484" class="even"><span class="lineNumber">10484&nbsp;</span><a name="line_10484"></a></li>
<li id="line_10485" class="odd"><span class="lineNumber">10485&nbsp;</span>	//&nbsp;when&nbsp;the&nbsp;time-grid&nbsp;isn't&nbsp;tall&nbsp;enough&nbsp;to&nbsp;occupy&nbsp;the&nbsp;given&nbsp;height,&nbsp;we&nbsp;render&nbsp;an&nbsp;&lt;hr&gt;&nbsp;underneath<a name="line_10485"></a></li>
<li id="line_10486" class="even"><span class="lineNumber">10486&nbsp;</span>	bottomRuleEl:&nbsp;null,<a name="line_10486"></a></li>
<li id="line_10487" class="odd"><span class="lineNumber">10487&nbsp;</span>	bottomRuleHeight:&nbsp;null,<a name="line_10487"></a></li>
<li id="line_10488" class="even"><span class="lineNumber">10488&nbsp;</span><a name="line_10488"></a></li>
<li id="line_10489" class="odd"><span class="lineNumber">10489&nbsp;</span><a name="line_10489"></a></li>
<li id="line_10490" class="even"><span class="lineNumber">10490&nbsp;</span>	initialize:&nbsp;function()&nbsp;{<a name="line_10490"></a></li>
<li id="line_10491" class="odd"><span class="lineNumber">10491&nbsp;</span>		this.timeGrid&nbsp;=&nbsp;new&nbsp;TimeGrid(this);<a name="line_10491"></a></li>
<li id="line_10492" class="even"><span class="lineNumber">10492&nbsp;</span><a name="line_10492"></a></li>
<li id="line_10493" class="odd"><span class="lineNumber">10493&nbsp;</span>		if&nbsp;(this.opt('allDaySlot'))&nbsp;{&nbsp;//&nbsp;should&nbsp;we&nbsp;display&nbsp;the&nbsp;"all-day"&nbsp;area?<a name="line_10493"></a></li>
<li id="line_10494" class="even"><span class="lineNumber">10494&nbsp;</span>			this.dayGrid&nbsp;=&nbsp;new&nbsp;DayGrid(this);&nbsp;//&nbsp;the&nbsp;all-day&nbsp;subcomponent&nbsp;of&nbsp;this&nbsp;view<a name="line_10494"></a></li>
<li id="line_10495" class="odd"><span class="lineNumber">10495&nbsp;</span><a name="line_10495"></a></li>
<li id="line_10496" class="even"><span class="lineNumber">10496&nbsp;</span>			//&nbsp;the&nbsp;coordinate&nbsp;grid&nbsp;will&nbsp;be&nbsp;a&nbsp;combination&nbsp;of&nbsp;both&nbsp;subcomponents'&nbsp;grids<a name="line_10496"></a></li>
<li id="line_10497" class="odd"><span class="lineNumber">10497&nbsp;</span>			this.coordMap&nbsp;=&nbsp;new&nbsp;ComboCoordMap([<a name="line_10497"></a></li>
<li id="line_10498" class="even"><span class="lineNumber">10498&nbsp;</span>				this.dayGrid.coordMap,<a name="line_10498"></a></li>
<li id="line_10499" class="odd"><span class="lineNumber">10499&nbsp;</span>				this.timeGrid.coordMap<a name="line_10499"></a></li>
<li id="line_10500" class="even"><span class="lineNumber">10500&nbsp;</span>			]);<a name="line_10500"></a></li>
<li id="line_10501" class="odd"><span class="lineNumber">10501&nbsp;</span>		}<a name="line_10501"></a></li>
<li id="line_10502" class="even"><span class="lineNumber">10502&nbsp;</span>		else&nbsp;{<a name="line_10502"></a></li>
<li id="line_10503" class="odd"><span class="lineNumber">10503&nbsp;</span>			this.coordMap&nbsp;=&nbsp;this.timeGrid.coordMap;<a name="line_10503"></a></li>
<li id="line_10504" class="even"><span class="lineNumber">10504&nbsp;</span>		}<a name="line_10504"></a></li>
<li id="line_10505" class="odd"><span class="lineNumber">10505&nbsp;</span>	},<a name="line_10505"></a></li>
<li id="line_10506" class="even"><span class="lineNumber">10506&nbsp;</span><a name="line_10506"></a></li>
<li id="line_10507" class="odd"><span class="lineNumber">10507&nbsp;</span><a name="line_10507"></a></li>
<li id="line_10508" class="even"><span class="lineNumber">10508&nbsp;</span>	/*&nbsp;Rendering<a name="line_10508"></a></li>
<li id="line_10509" class="odd"><span class="lineNumber">10509&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_10509"></a></li>
<li id="line_10510" class="even"><span class="lineNumber">10510&nbsp;</span><a name="line_10510"></a></li>
<li id="line_10511" class="odd"><span class="lineNumber">10511&nbsp;</span><a name="line_10511"></a></li>
<li id="line_10512" class="even"><span class="lineNumber">10512&nbsp;</span>	//&nbsp;Sets&nbsp;the&nbsp;display&nbsp;range&nbsp;and&nbsp;computes&nbsp;all&nbsp;necessary&nbsp;dates<a name="line_10512"></a></li>
<li id="line_10513" class="odd"><span class="lineNumber">10513&nbsp;</span>	setRange:&nbsp;function(range)&nbsp;{<a name="line_10513"></a></li>
<li id="line_10514" class="even"><span class="lineNumber">10514&nbsp;</span>		View.prototype.setRange.call(this,&nbsp;range);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-method<a name="line_10514"></a></li>
<li id="line_10515" class="odd"><span class="lineNumber">10515&nbsp;</span><a name="line_10515"></a></li>
<li id="line_10516" class="even"><span class="lineNumber">10516&nbsp;</span>		this.timeGrid.setRange(range);<a name="line_10516"></a></li>
<li id="line_10517" class="odd"><span class="lineNumber">10517&nbsp;</span>		if&nbsp;(this.dayGrid)&nbsp;{<a name="line_10517"></a></li>
<li id="line_10518" class="even"><span class="lineNumber">10518&nbsp;</span>			this.dayGrid.setRange(range);<a name="line_10518"></a></li>
<li id="line_10519" class="odd"><span class="lineNumber">10519&nbsp;</span>		}<a name="line_10519"></a></li>
<li id="line_10520" class="even"><span class="lineNumber">10520&nbsp;</span>	},<a name="line_10520"></a></li>
<li id="line_10521" class="odd"><span class="lineNumber">10521&nbsp;</span><a name="line_10521"></a></li>
<li id="line_10522" class="even"><span class="lineNumber">10522&nbsp;</span><a name="line_10522"></a></li>
<li id="line_10523" class="odd"><span class="lineNumber">10523&nbsp;</span>	//&nbsp;Renders&nbsp;the&nbsp;view&nbsp;into&nbsp;`this.el`,&nbsp;which&nbsp;has&nbsp;already&nbsp;been&nbsp;assigned<a name="line_10523"></a></li>
<li id="line_10524" class="even"><span class="lineNumber">10524&nbsp;</span>	renderDates:&nbsp;function()&nbsp;{<a name="line_10524"></a></li>
<li id="line_10525" class="odd"><span class="lineNumber">10525&nbsp;</span><a name="line_10525"></a></li>
<li id="line_10526" class="even"><span class="lineNumber">10526&nbsp;</span>		this.el.addClass('fc-agenda-view').html(this.renderHtml());<a name="line_10526"></a></li>
<li id="line_10527" class="odd"><span class="lineNumber">10527&nbsp;</span><a name="line_10527"></a></li>
<li id="line_10528" class="even"><span class="lineNumber">10528&nbsp;</span>		//&nbsp;the&nbsp;element&nbsp;that&nbsp;wraps&nbsp;the&nbsp;time-grid&nbsp;that&nbsp;will&nbsp;probably&nbsp;scroll<a name="line_10528"></a></li>
<li id="line_10529" class="odd"><span class="lineNumber">10529&nbsp;</span>		this.scrollerEl&nbsp;=&nbsp;this.el.find('.fc-time-grid-container');<a name="line_10529"></a></li>
<li id="line_10530" class="even"><span class="lineNumber">10530&nbsp;</span>		this.timeGrid.coordMap.containerEl&nbsp;=&nbsp;this.scrollerEl;&nbsp;//&nbsp;don't&nbsp;accept&nbsp;clicks/etc&nbsp;outside&nbsp;of&nbsp;this<a name="line_10530"></a></li>
<li id="line_10531" class="odd"><span class="lineNumber">10531&nbsp;</span><a name="line_10531"></a></li>
<li id="line_10532" class="even"><span class="lineNumber">10532&nbsp;</span>		this.timeGrid.setElement(this.el.find('.fc-time-grid'));<a name="line_10532"></a></li>
<li id="line_10533" class="odd"><span class="lineNumber">10533&nbsp;</span>		this.timeGrid.renderDates();<a name="line_10533"></a></li>
<li id="line_10534" class="even"><span class="lineNumber">10534&nbsp;</span><a name="line_10534"></a></li>
<li id="line_10535" class="odd"><span class="lineNumber">10535&nbsp;</span>		//&nbsp;the&nbsp;&lt;hr&gt;&nbsp;that&nbsp;sometimes&nbsp;displays&nbsp;under&nbsp;the&nbsp;time-grid<a name="line_10535"></a></li>
<li id="line_10536" class="even"><span class="lineNumber">10536&nbsp;</span>		this.bottomRuleEl&nbsp;=&nbsp;$('&lt;hr&nbsp;class="fc-divider&nbsp;'&nbsp;+&nbsp;this.widgetHeaderClass&nbsp;+&nbsp;'"/&gt;')<a name="line_10536"></a></li>
<li id="line_10537" class="odd"><span class="lineNumber">10537&nbsp;</span>			.appendTo(this.timeGrid.el);&nbsp;//&nbsp;inject&nbsp;it&nbsp;into&nbsp;the&nbsp;time-grid<a name="line_10537"></a></li>
<li id="line_10538" class="even"><span class="lineNumber">10538&nbsp;</span><a name="line_10538"></a></li>
<li id="line_10539" class="odd"><span class="lineNumber">10539&nbsp;</span>		if&nbsp;(this.dayGrid)&nbsp;{<a name="line_10539"></a></li>
<li id="line_10540" class="even"><span class="lineNumber">10540&nbsp;</span>			this.dayGrid.setElement(this.el.find('.fc-day-grid'));<a name="line_10540"></a></li>
<li id="line_10541" class="odd"><span class="lineNumber">10541&nbsp;</span>			this.dayGrid.renderDates();<a name="line_10541"></a></li>
<li id="line_10542" class="even"><span class="lineNumber">10542&nbsp;</span><a name="line_10542"></a></li>
<li id="line_10543" class="odd"><span class="lineNumber">10543&nbsp;</span>			//&nbsp;have&nbsp;the&nbsp;day-grid&nbsp;extend&nbsp;it's&nbsp;coordinate&nbsp;area&nbsp;over&nbsp;the&nbsp;&lt;hr&gt;&nbsp;dividing&nbsp;the&nbsp;two&nbsp;grids<a name="line_10543"></a></li>
<li id="line_10544" class="even"><span class="lineNumber">10544&nbsp;</span>			this.dayGrid.bottomCoordPadding&nbsp;=&nbsp;this.dayGrid.el.next('hr').outerHeight();<a name="line_10544"></a></li>
<li id="line_10545" class="odd"><span class="lineNumber">10545&nbsp;</span>		}<a name="line_10545"></a></li>
<li id="line_10546" class="even"><span class="lineNumber">10546&nbsp;</span><a name="line_10546"></a></li>
<li id="line_10547" class="odd"><span class="lineNumber">10547&nbsp;</span>		this.noScrollRowEls&nbsp;=&nbsp;this.el.find('.fc-row:not(.fc-scroller&nbsp;*)');&nbsp;//&nbsp;fake&nbsp;rows&nbsp;not&nbsp;within&nbsp;the&nbsp;scroller<a name="line_10547"></a></li>
<li id="line_10548" class="even"><span class="lineNumber">10548&nbsp;</span>	},<a name="line_10548"></a></li>
<li id="line_10549" class="odd"><span class="lineNumber">10549&nbsp;</span><a name="line_10549"></a></li>
<li id="line_10550" class="even"><span class="lineNumber">10550&nbsp;</span><a name="line_10550"></a></li>
<li id="line_10551" class="odd"><span class="lineNumber">10551&nbsp;</span>	//&nbsp;Unrenders&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;view.&nbsp;Since&nbsp;we&nbsp;haven't&nbsp;separated&nbsp;skeleton&nbsp;rendering&nbsp;from&nbsp;date&nbsp;rendering,<a name="line_10551"></a></li>
<li id="line_10552" class="even"><span class="lineNumber">10552&nbsp;</span>	//&nbsp;always&nbsp;completely&nbsp;kill&nbsp;each&nbsp;grid's&nbsp;rendering.<a name="line_10552"></a></li>
<li id="line_10553" class="odd"><span class="lineNumber">10553&nbsp;</span>	unrenderDates:&nbsp;function()&nbsp;{<a name="line_10553"></a></li>
<li id="line_10554" class="even"><span class="lineNumber">10554&nbsp;</span>		this.timeGrid.unrenderDates();<a name="line_10554"></a></li>
<li id="line_10555" class="odd"><span class="lineNumber">10555&nbsp;</span>		this.timeGrid.removeElement();<a name="line_10555"></a></li>
<li id="line_10556" class="even"><span class="lineNumber">10556&nbsp;</span><a name="line_10556"></a></li>
<li id="line_10557" class="odd"><span class="lineNumber">10557&nbsp;</span>		if&nbsp;(this.dayGrid)&nbsp;{<a name="line_10557"></a></li>
<li id="line_10558" class="even"><span class="lineNumber">10558&nbsp;</span>			this.dayGrid.unrenderDates();<a name="line_10558"></a></li>
<li id="line_10559" class="odd"><span class="lineNumber">10559&nbsp;</span>			this.dayGrid.removeElement();<a name="line_10559"></a></li>
<li id="line_10560" class="even"><span class="lineNumber">10560&nbsp;</span>		}<a name="line_10560"></a></li>
<li id="line_10561" class="odd"><span class="lineNumber">10561&nbsp;</span>	},<a name="line_10561"></a></li>
<li id="line_10562" class="even"><span class="lineNumber">10562&nbsp;</span><a name="line_10562"></a></li>
<li id="line_10563" class="odd"><span class="lineNumber">10563&nbsp;</span><a name="line_10563"></a></li>
<li id="line_10564" class="even"><span class="lineNumber">10564&nbsp;</span>	renderBusinessHours:&nbsp;function()&nbsp;{<a name="line_10564"></a></li>
<li id="line_10565" class="odd"><span class="lineNumber">10565&nbsp;</span>		this.timeGrid.renderBusinessHours();<a name="line_10565"></a></li>
<li id="line_10566" class="even"><span class="lineNumber">10566&nbsp;</span><a name="line_10566"></a></li>
<li id="line_10567" class="odd"><span class="lineNumber">10567&nbsp;</span>		if&nbsp;(this.dayGrid)&nbsp;{<a name="line_10567"></a></li>
<li id="line_10568" class="even"><span class="lineNumber">10568&nbsp;</span>			this.dayGrid.renderBusinessHours();<a name="line_10568"></a></li>
<li id="line_10569" class="odd"><span class="lineNumber">10569&nbsp;</span>		}<a name="line_10569"></a></li>
<li id="line_10570" class="even"><span class="lineNumber">10570&nbsp;</span>	},<a name="line_10570"></a></li>
<li id="line_10571" class="odd"><span class="lineNumber">10571&nbsp;</span><a name="line_10571"></a></li>
<li id="line_10572" class="even"><span class="lineNumber">10572&nbsp;</span><a name="line_10572"></a></li>
<li id="line_10573" class="odd"><span class="lineNumber">10573&nbsp;</span>	//&nbsp;Builds&nbsp;the&nbsp;HTML&nbsp;skeleton&nbsp;for&nbsp;the&nbsp;view.<a name="line_10573"></a></li>
<li id="line_10574" class="even"><span class="lineNumber">10574&nbsp;</span>	//&nbsp;The&nbsp;day-grid&nbsp;and&nbsp;time-grid&nbsp;components&nbsp;will&nbsp;render&nbsp;inside&nbsp;containers&nbsp;defined&nbsp;by&nbsp;this&nbsp;HTML.<a name="line_10574"></a></li>
<li id="line_10575" class="odd"><span class="lineNumber">10575&nbsp;</span>	renderHtml:&nbsp;function()&nbsp;{<a name="line_10575"></a></li>
<li id="line_10576" class="even"><span class="lineNumber">10576&nbsp;</span>		return&nbsp;''&nbsp;+<a name="line_10576"></a></li>
<li id="line_10577" class="odd"><span class="lineNumber">10577&nbsp;</span>			'&lt;table&gt;'&nbsp;+<a name="line_10577"></a></li>
<li id="line_10578" class="even"><span class="lineNumber">10578&nbsp;</span>				'&lt;thead&nbsp;class="fc-head"&gt;'&nbsp;+<a name="line_10578"></a></li>
<li id="line_10579" class="odd"><span class="lineNumber">10579&nbsp;</span>					'&lt;tr&gt;'&nbsp;+<a name="line_10579"></a></li>
<li id="line_10580" class="even"><span class="lineNumber">10580&nbsp;</span>						'&lt;td&nbsp;class="'&nbsp;+&nbsp;this.widgetHeaderClass&nbsp;+&nbsp;'"&gt;'&nbsp;+<a name="line_10580"></a></li>
<li id="line_10581" class="odd"><span class="lineNumber">10581&nbsp;</span>							this.timeGrid.headHtml()&nbsp;+&nbsp;//&nbsp;render&nbsp;the&nbsp;day-of-week&nbsp;headers<a name="line_10581"></a></li>
<li id="line_10582" class="even"><span class="lineNumber">10582&nbsp;</span>						'&lt;/td&gt;'&nbsp;+<a name="line_10582"></a></li>
<li id="line_10583" class="odd"><span class="lineNumber">10583&nbsp;</span>					'&lt;/tr&gt;'&nbsp;+<a name="line_10583"></a></li>
<li id="line_10584" class="even"><span class="lineNumber">10584&nbsp;</span>				'&lt;/thead&gt;'&nbsp;+<a name="line_10584"></a></li>
<li id="line_10585" class="odd"><span class="lineNumber">10585&nbsp;</span>				'&lt;tbody&nbsp;class="fc-body"&gt;'&nbsp;+<a name="line_10585"></a></li>
<li id="line_10586" class="even"><span class="lineNumber">10586&nbsp;</span>					'&lt;tr&gt;'&nbsp;+<a name="line_10586"></a></li>
<li id="line_10587" class="odd"><span class="lineNumber">10587&nbsp;</span>						'&lt;td&nbsp;class="'&nbsp;+&nbsp;this.widgetContentClass&nbsp;+&nbsp;'"&gt;'&nbsp;+<a name="line_10587"></a></li>
<li id="line_10588" class="even"><span class="lineNumber">10588&nbsp;</span>							(this.dayGrid&nbsp;?<a name="line_10588"></a></li>
<li id="line_10589" class="odd"><span class="lineNumber">10589&nbsp;</span>								'&lt;div&nbsp;class="fc-day-grid"/&gt;'&nbsp;+<a name="line_10589"></a></li>
<li id="line_10590" class="even"><span class="lineNumber">10590&nbsp;</span>								'&lt;hr&nbsp;class="fc-divider&nbsp;'&nbsp;+&nbsp;this.widgetHeaderClass&nbsp;+&nbsp;'"/&gt;'&nbsp;:<a name="line_10590"></a></li>
<li id="line_10591" class="odd"><span class="lineNumber">10591&nbsp;</span>								''<a name="line_10591"></a></li>
<li id="line_10592" class="even"><span class="lineNumber">10592&nbsp;</span>								)&nbsp;+<a name="line_10592"></a></li>
<li id="line_10593" class="odd"><span class="lineNumber">10593&nbsp;</span>							'&lt;div&nbsp;class="fc-time-grid-container"&gt;'&nbsp;+<a name="line_10593"></a></li>
<li id="line_10594" class="even"><span class="lineNumber">10594&nbsp;</span>								'&lt;div&nbsp;class="fc-time-grid"/&gt;'&nbsp;+<a name="line_10594"></a></li>
<li id="line_10595" class="odd"><span class="lineNumber">10595&nbsp;</span>							'&lt;/div&gt;'&nbsp;+<a name="line_10595"></a></li>
<li id="line_10596" class="even"><span class="lineNumber">10596&nbsp;</span>						'&lt;/td&gt;'&nbsp;+<a name="line_10596"></a></li>
<li id="line_10597" class="odd"><span class="lineNumber">10597&nbsp;</span>					'&lt;/tr&gt;'&nbsp;+<a name="line_10597"></a></li>
<li id="line_10598" class="even"><span class="lineNumber">10598&nbsp;</span>				'&lt;/tbody&gt;'&nbsp;+<a name="line_10598"></a></li>
<li id="line_10599" class="odd"><span class="lineNumber">10599&nbsp;</span>			'&lt;/table&gt;';<a name="line_10599"></a></li>
<li id="line_10600" class="even"><span class="lineNumber">10600&nbsp;</span>	},<a name="line_10600"></a></li>
<li id="line_10601" class="odd"><span class="lineNumber">10601&nbsp;</span><a name="line_10601"></a></li>
<li id="line_10602" class="even"><span class="lineNumber">10602&nbsp;</span><a name="line_10602"></a></li>
<li id="line_10603" class="odd"><span class="lineNumber">10603&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;that&nbsp;will&nbsp;go&nbsp;before&nbsp;the&nbsp;day-of&nbsp;week&nbsp;header&nbsp;cells.<a name="line_10603"></a></li>
<li id="line_10604" class="even"><span class="lineNumber">10604&nbsp;</span>	//&nbsp;Queried&nbsp;by&nbsp;the&nbsp;TimeGrid&nbsp;subcomponent&nbsp;when&nbsp;generating&nbsp;rows.&nbsp;Ordering&nbsp;depends&nbsp;on&nbsp;isRTL.<a name="line_10604"></a></li>
<li id="line_10605" class="odd"><span class="lineNumber">10605&nbsp;</span>	headIntroHtml:&nbsp;function()&nbsp;{<a name="line_10605"></a></li>
<li id="line_10606" class="even"><span class="lineNumber">10606&nbsp;</span>		var&nbsp;date;<a name="line_10606"></a></li>
<li id="line_10607" class="odd"><span class="lineNumber">10607&nbsp;</span>		var&nbsp;weekText;<a name="line_10607"></a></li>
<li id="line_10608" class="even"><span class="lineNumber">10608&nbsp;</span><a name="line_10608"></a></li>
<li id="line_10609" class="odd"><span class="lineNumber">10609&nbsp;</span>		if&nbsp;(this.opt('weekNumbers'))&nbsp;{<a name="line_10609"></a></li>
<li id="line_10610" class="even"><span class="lineNumber">10610&nbsp;</span>			date&nbsp;=&nbsp;this.timeGrid.getCell(0).start;<a name="line_10610"></a></li>
<li id="line_10611" class="odd"><span class="lineNumber">10611&nbsp;</span>			weekText&nbsp;=&nbsp;date.format(this.opt('smallWeekFormat'));<a name="line_10611"></a></li>
<li id="line_10612" class="even"><span class="lineNumber">10612&nbsp;</span><a name="line_10612"></a></li>
<li id="line_10613" class="odd"><span class="lineNumber">10613&nbsp;</span>			return&nbsp;''&nbsp;+<a name="line_10613"></a></li>
<li id="line_10614" class="even"><span class="lineNumber">10614&nbsp;</span>				'&lt;th&nbsp;class="fc-axis&nbsp;fc-week-number&nbsp;'&nbsp;+&nbsp;this.widgetHeaderClass&nbsp;+&nbsp;'"&nbsp;'&nbsp;+&nbsp;this.axisStyleAttr()&nbsp;+&nbsp;'&gt;'&nbsp;+<a name="line_10614"></a></li>
<li id="line_10615" class="odd"><span class="lineNumber">10615&nbsp;</span>					'&lt;span&gt;'&nbsp;+&nbsp;//&nbsp;needed&nbsp;for&nbsp;matchCellWidths<a name="line_10615"></a></li>
<li id="line_10616" class="even"><span class="lineNumber">10616&nbsp;</span>						htmlEscape(weekText)&nbsp;+<a name="line_10616"></a></li>
<li id="line_10617" class="odd"><span class="lineNumber">10617&nbsp;</span>					'&lt;/span&gt;'&nbsp;+<a name="line_10617"></a></li>
<li id="line_10618" class="even"><span class="lineNumber">10618&nbsp;</span>				'&lt;/th&gt;';<a name="line_10618"></a></li>
<li id="line_10619" class="odd"><span class="lineNumber">10619&nbsp;</span>		}<a name="line_10619"></a></li>
<li id="line_10620" class="even"><span class="lineNumber">10620&nbsp;</span>		else&nbsp;{<a name="line_10620"></a></li>
<li id="line_10621" class="odd"><span class="lineNumber">10621&nbsp;</span>			return&nbsp;'&lt;th&nbsp;class="fc-axis&nbsp;'&nbsp;+&nbsp;this.widgetHeaderClass&nbsp;+&nbsp;'"&nbsp;'&nbsp;+&nbsp;this.axisStyleAttr()&nbsp;+&nbsp;'&gt;&lt;/th&gt;';<a name="line_10621"></a></li>
<li id="line_10622" class="even"><span class="lineNumber">10622&nbsp;</span>		}<a name="line_10622"></a></li>
<li id="line_10623" class="odd"><span class="lineNumber">10623&nbsp;</span>	},<a name="line_10623"></a></li>
<li id="line_10624" class="even"><span class="lineNumber">10624&nbsp;</span><a name="line_10624"></a></li>
<li id="line_10625" class="odd"><span class="lineNumber">10625&nbsp;</span><a name="line_10625"></a></li>
<li id="line_10626" class="even"><span class="lineNumber">10626&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;that&nbsp;goes&nbsp;before&nbsp;the&nbsp;all-day&nbsp;cells.<a name="line_10626"></a></li>
<li id="line_10627" class="odd"><span class="lineNumber">10627&nbsp;</span>	//&nbsp;Queried&nbsp;by&nbsp;the&nbsp;DayGrid&nbsp;subcomponent&nbsp;when&nbsp;generating&nbsp;rows.&nbsp;Ordering&nbsp;depends&nbsp;on&nbsp;isRTL.<a name="line_10627"></a></li>
<li id="line_10628" class="even"><span class="lineNumber">10628&nbsp;</span>	dayIntroHtml:&nbsp;function()&nbsp;{<a name="line_10628"></a></li>
<li id="line_10629" class="odd"><span class="lineNumber">10629&nbsp;</span>		return&nbsp;''&nbsp;+<a name="line_10629"></a></li>
<li id="line_10630" class="even"><span class="lineNumber">10630&nbsp;</span>			'&lt;td&nbsp;class="fc-axis&nbsp;'&nbsp;+&nbsp;this.widgetContentClass&nbsp;+&nbsp;'"&nbsp;'&nbsp;+&nbsp;this.axisStyleAttr()&nbsp;+&nbsp;'&gt;'&nbsp;+<a name="line_10630"></a></li>
<li id="line_10631" class="odd"><span class="lineNumber">10631&nbsp;</span>				'&lt;span&gt;'&nbsp;+&nbsp;//&nbsp;needed&nbsp;for&nbsp;matchCellWidths<a name="line_10631"></a></li>
<li id="line_10632" class="even"><span class="lineNumber">10632&nbsp;</span>					(this.opt('allDayHtml')&nbsp;||&nbsp;htmlEscape(this.opt('allDayText')))&nbsp;+<a name="line_10632"></a></li>
<li id="line_10633" class="odd"><span class="lineNumber">10633&nbsp;</span>				'&lt;/span&gt;'&nbsp;+<a name="line_10633"></a></li>
<li id="line_10634" class="even"><span class="lineNumber">10634&nbsp;</span>			'&lt;/td&gt;';<a name="line_10634"></a></li>
<li id="line_10635" class="odd"><span class="lineNumber">10635&nbsp;</span>	},<a name="line_10635"></a></li>
<li id="line_10636" class="even"><span class="lineNumber">10636&nbsp;</span><a name="line_10636"></a></li>
<li id="line_10637" class="odd"><span class="lineNumber">10637&nbsp;</span><a name="line_10637"></a></li>
<li id="line_10638" class="even"><span class="lineNumber">10638&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;that&nbsp;goes&nbsp;before&nbsp;the&nbsp;bg&nbsp;of&nbsp;the&nbsp;TimeGrid&nbsp;slot&nbsp;area.&nbsp;Long&nbsp;vertical&nbsp;column.<a name="line_10638"></a></li>
<li id="line_10639" class="odd"><span class="lineNumber">10639&nbsp;</span>	slotBgIntroHtml:&nbsp;function()&nbsp;{<a name="line_10639"></a></li>
<li id="line_10640" class="even"><span class="lineNumber">10640&nbsp;</span>		return&nbsp;'&lt;td&nbsp;class="fc-axis&nbsp;'&nbsp;+&nbsp;this.widgetContentClass&nbsp;+&nbsp;'"&nbsp;'&nbsp;+&nbsp;this.axisStyleAttr()&nbsp;+&nbsp;'&gt;&lt;/td&gt;';<a name="line_10640"></a></li>
<li id="line_10641" class="odd"><span class="lineNumber">10641&nbsp;</span>	},<a name="line_10641"></a></li>
<li id="line_10642" class="even"><span class="lineNumber">10642&nbsp;</span><a name="line_10642"></a></li>
<li id="line_10643" class="odd"><span class="lineNumber">10643&nbsp;</span><a name="line_10643"></a></li>
<li id="line_10644" class="even"><span class="lineNumber">10644&nbsp;</span>	//&nbsp;Generates&nbsp;the&nbsp;HTML&nbsp;that&nbsp;goes&nbsp;before&nbsp;all&nbsp;other&nbsp;types&nbsp;of&nbsp;cells.<a name="line_10644"></a></li>
<li id="line_10645" class="odd"><span class="lineNumber">10645&nbsp;</span>	//&nbsp;Affects&nbsp;content-skeleton,&nbsp;helper-skeleton,&nbsp;highlight-skeleton&nbsp;for&nbsp;both&nbsp;the&nbsp;time-grid&nbsp;and&nbsp;day-grid.<a name="line_10645"></a></li>
<li id="line_10646" class="even"><span class="lineNumber">10646&nbsp;</span>	//&nbsp;Queried&nbsp;by&nbsp;the&nbsp;TimeGrid&nbsp;and&nbsp;DayGrid&nbsp;subcomponents&nbsp;when&nbsp;generating&nbsp;rows.&nbsp;Ordering&nbsp;depends&nbsp;on&nbsp;isRTL.<a name="line_10646"></a></li>
<li id="line_10647" class="odd"><span class="lineNumber">10647&nbsp;</span>	introHtml:&nbsp;function()&nbsp;{<a name="line_10647"></a></li>
<li id="line_10648" class="even"><span class="lineNumber">10648&nbsp;</span>		return&nbsp;'&lt;td&nbsp;class="fc-axis"&nbsp;'&nbsp;+&nbsp;this.axisStyleAttr()&nbsp;+&nbsp;'&gt;&lt;/td&gt;';<a name="line_10648"></a></li>
<li id="line_10649" class="odd"><span class="lineNumber">10649&nbsp;</span>	},<a name="line_10649"></a></li>
<li id="line_10650" class="even"><span class="lineNumber">10650&nbsp;</span><a name="line_10650"></a></li>
<li id="line_10651" class="odd"><span class="lineNumber">10651&nbsp;</span><a name="line_10651"></a></li>
<li id="line_10652" class="even"><span class="lineNumber">10652&nbsp;</span>	//&nbsp;Generates&nbsp;an&nbsp;HTML&nbsp;attribute&nbsp;string&nbsp;for&nbsp;setting&nbsp;the&nbsp;width&nbsp;of&nbsp;the&nbsp;axis,&nbsp;if&nbsp;it&nbsp;is&nbsp;known<a name="line_10652"></a></li>
<li id="line_10653" class="odd"><span class="lineNumber">10653&nbsp;</span>	axisStyleAttr:&nbsp;function()&nbsp;{<a name="line_10653"></a></li>
<li id="line_10654" class="even"><span class="lineNumber">10654&nbsp;</span>		if&nbsp;(this.axisWidth&nbsp;!==&nbsp;null)&nbsp;{<a name="line_10654"></a></li>
<li id="line_10655" class="odd"><span class="lineNumber">10655&nbsp;</span>			&nbsp;return&nbsp;'style="width:'&nbsp;+&nbsp;this.axisWidth&nbsp;+&nbsp;'px"';<a name="line_10655"></a></li>
<li id="line_10656" class="even"><span class="lineNumber">10656&nbsp;</span>		}<a name="line_10656"></a></li>
<li id="line_10657" class="odd"><span class="lineNumber">10657&nbsp;</span>		return&nbsp;'';<a name="line_10657"></a></li>
<li id="line_10658" class="even"><span class="lineNumber">10658&nbsp;</span>	},<a name="line_10658"></a></li>
<li id="line_10659" class="odd"><span class="lineNumber">10659&nbsp;</span><a name="line_10659"></a></li>
<li id="line_10660" class="even"><span class="lineNumber">10660&nbsp;</span><a name="line_10660"></a></li>
<li id="line_10661" class="odd"><span class="lineNumber">10661&nbsp;</span>	/*&nbsp;Dimensions<a name="line_10661"></a></li>
<li id="line_10662" class="even"><span class="lineNumber">10662&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_10662"></a></li>
<li id="line_10663" class="odd"><span class="lineNumber">10663&nbsp;</span><a name="line_10663"></a></li>
<li id="line_10664" class="even"><span class="lineNumber">10664&nbsp;</span><a name="line_10664"></a></li>
<li id="line_10665" class="odd"><span class="lineNumber">10665&nbsp;</span>	updateSize:&nbsp;function(isResize)&nbsp;{<a name="line_10665"></a></li>
<li id="line_10666" class="even"><span class="lineNumber">10666&nbsp;</span>		this.timeGrid.updateSize(isResize);<a name="line_10666"></a></li>
<li id="line_10667" class="odd"><span class="lineNumber">10667&nbsp;</span><a name="line_10667"></a></li>
<li id="line_10668" class="even"><span class="lineNumber">10668&nbsp;</span>		View.prototype.updateSize.call(this,&nbsp;isResize);&nbsp;//&nbsp;call&nbsp;the&nbsp;super-method<a name="line_10668"></a></li>
<li id="line_10669" class="odd"><span class="lineNumber">10669&nbsp;</span>	},<a name="line_10669"></a></li>
<li id="line_10670" class="even"><span class="lineNumber">10670&nbsp;</span><a name="line_10670"></a></li>
<li id="line_10671" class="odd"><span class="lineNumber">10671&nbsp;</span><a name="line_10671"></a></li>
<li id="line_10672" class="even"><span class="lineNumber">10672&nbsp;</span>	//&nbsp;Refreshes&nbsp;the&nbsp;horizontal&nbsp;dimensions&nbsp;of&nbsp;the&nbsp;view<a name="line_10672"></a></li>
<li id="line_10673" class="odd"><span class="lineNumber">10673&nbsp;</span>	updateWidth:&nbsp;function()&nbsp;{<a name="line_10673"></a></li>
<li id="line_10674" class="even"><span class="lineNumber">10674&nbsp;</span>		//&nbsp;make&nbsp;all&nbsp;axis&nbsp;cells&nbsp;line&nbsp;up,&nbsp;and&nbsp;record&nbsp;the&nbsp;width&nbsp;so&nbsp;newly&nbsp;created&nbsp;axis&nbsp;cells&nbsp;will&nbsp;have&nbsp;it<a name="line_10674"></a></li>
<li id="line_10675" class="odd"><span class="lineNumber">10675&nbsp;</span>		this.axisWidth&nbsp;=&nbsp;matchCellWidths(this.el.find('.fc-axis'));<a name="line_10675"></a></li>
<li id="line_10676" class="even"><span class="lineNumber">10676&nbsp;</span>	},<a name="line_10676"></a></li>
<li id="line_10677" class="odd"><span class="lineNumber">10677&nbsp;</span><a name="line_10677"></a></li>
<li id="line_10678" class="even"><span class="lineNumber">10678&nbsp;</span><a name="line_10678"></a></li>
<li id="line_10679" class="odd"><span class="lineNumber">10679&nbsp;</span>	//&nbsp;Adjusts&nbsp;the&nbsp;vertical&nbsp;dimensions&nbsp;of&nbsp;the&nbsp;view&nbsp;to&nbsp;the&nbsp;specified&nbsp;values<a name="line_10679"></a></li>
<li id="line_10680" class="even"><span class="lineNumber">10680&nbsp;</span>	setHeight:&nbsp;function(totalHeight,&nbsp;isAuto)&nbsp;{<a name="line_10680"></a></li>
<li id="line_10681" class="odd"><span class="lineNumber">10681&nbsp;</span>		var&nbsp;eventLimit;<a name="line_10681"></a></li>
<li id="line_10682" class="even"><span class="lineNumber">10682&nbsp;</span>		var&nbsp;scrollerHeight;<a name="line_10682"></a></li>
<li id="line_10683" class="odd"><span class="lineNumber">10683&nbsp;</span><a name="line_10683"></a></li>
<li id="line_10684" class="even"><span class="lineNumber">10684&nbsp;</span>		if&nbsp;(this.bottomRuleHeight&nbsp;===&nbsp;null)&nbsp;{<a name="line_10684"></a></li>
<li id="line_10685" class="odd"><span class="lineNumber">10685&nbsp;</span>			//&nbsp;calculate&nbsp;the&nbsp;height&nbsp;of&nbsp;the&nbsp;rule&nbsp;the&nbsp;very&nbsp;first&nbsp;time<a name="line_10685"></a></li>
<li id="line_10686" class="even"><span class="lineNumber">10686&nbsp;</span>			this.bottomRuleHeight&nbsp;=&nbsp;this.bottomRuleEl.outerHeight();<a name="line_10686"></a></li>
<li id="line_10687" class="odd"><span class="lineNumber">10687&nbsp;</span>		}<a name="line_10687"></a></li>
<li id="line_10688" class="even"><span class="lineNumber">10688&nbsp;</span>		this.bottomRuleEl.hide();&nbsp;//&nbsp;.show()&nbsp;will&nbsp;be&nbsp;called&nbsp;later&nbsp;if&nbsp;this&nbsp;&lt;hr&gt;&nbsp;is&nbsp;necessary<a name="line_10688"></a></li>
<li id="line_10689" class="odd"><span class="lineNumber">10689&nbsp;</span><a name="line_10689"></a></li>
<li id="line_10690" class="even"><span class="lineNumber">10690&nbsp;</span>		//&nbsp;reset&nbsp;all&nbsp;dimensions&nbsp;back&nbsp;to&nbsp;the&nbsp;original&nbsp;state<a name="line_10690"></a></li>
<li id="line_10691" class="odd"><span class="lineNumber">10691&nbsp;</span>		this.scrollerEl.css('overflow',&nbsp;'');<a name="line_10691"></a></li>
<li id="line_10692" class="even"><span class="lineNumber">10692&nbsp;</span>		unsetScroller(this.scrollerEl);<a name="line_10692"></a></li>
<li id="line_10693" class="odd"><span class="lineNumber">10693&nbsp;</span>		uncompensateScroll(this.noScrollRowEls);<a name="line_10693"></a></li>
<li id="line_10694" class="even"><span class="lineNumber">10694&nbsp;</span><a name="line_10694"></a></li>
<li id="line_10695" class="odd"><span class="lineNumber">10695&nbsp;</span>		//&nbsp;limit&nbsp;number&nbsp;of&nbsp;events&nbsp;in&nbsp;the&nbsp;all-day&nbsp;area<a name="line_10695"></a></li>
<li id="line_10696" class="even"><span class="lineNumber">10696&nbsp;</span>		if&nbsp;(this.dayGrid)&nbsp;{<a name="line_10696"></a></li>
<li id="line_10697" class="odd"><span class="lineNumber">10697&nbsp;</span>			this.dayGrid.removeSegPopover();&nbsp;//&nbsp;kill&nbsp;the&nbsp;"more"&nbsp;popover&nbsp;if&nbsp;displayed<a name="line_10697"></a></li>
<li id="line_10698" class="even"><span class="lineNumber">10698&nbsp;</span><a name="line_10698"></a></li>
<li id="line_10699" class="odd"><span class="lineNumber">10699&nbsp;</span>			eventLimit&nbsp;=&nbsp;this.opt('eventLimit');<a name="line_10699"></a></li>
<li id="line_10700" class="even"><span class="lineNumber">10700&nbsp;</span>			if&nbsp;(eventLimit&nbsp;&amp;&amp;&nbsp;typeof&nbsp;eventLimit&nbsp;!==&nbsp;'number')&nbsp;{<a name="line_10700"></a></li>
<li id="line_10701" class="odd"><span class="lineNumber">10701&nbsp;</span>				eventLimit&nbsp;=&nbsp;AGENDA_ALL_DAY_EVENT_LIMIT;&nbsp;//&nbsp;make&nbsp;sure&nbsp;"auto"&nbsp;goes&nbsp;to&nbsp;a&nbsp;real&nbsp;number<a name="line_10701"></a></li>
<li id="line_10702" class="even"><span class="lineNumber">10702&nbsp;</span>			}<a name="line_10702"></a></li>
<li id="line_10703" class="odd"><span class="lineNumber">10703&nbsp;</span>			if&nbsp;(eventLimit)&nbsp;{<a name="line_10703"></a></li>
<li id="line_10704" class="even"><span class="lineNumber">10704&nbsp;</span>				this.dayGrid.limitRows(eventLimit);<a name="line_10704"></a></li>
<li id="line_10705" class="odd"><span class="lineNumber">10705&nbsp;</span>			}<a name="line_10705"></a></li>
<li id="line_10706" class="even"><span class="lineNumber">10706&nbsp;</span>		}<a name="line_10706"></a></li>
<li id="line_10707" class="odd"><span class="lineNumber">10707&nbsp;</span><a name="line_10707"></a></li>
<li id="line_10708" class="even"><span class="lineNumber">10708&nbsp;</span>		if&nbsp;(!isAuto)&nbsp;{&nbsp;//&nbsp;should&nbsp;we&nbsp;force&nbsp;dimensions&nbsp;of&nbsp;the&nbsp;scroll&nbsp;container,&nbsp;or&nbsp;let&nbsp;the&nbsp;contents&nbsp;be&nbsp;natural&nbsp;height?<a name="line_10708"></a></li>
<li id="line_10709" class="odd"><span class="lineNumber">10709&nbsp;</span><a name="line_10709"></a></li>
<li id="line_10710" class="even"><span class="lineNumber">10710&nbsp;</span>			scrollerHeight&nbsp;=&nbsp;this.computeScrollerHeight(totalHeight);<a name="line_10710"></a></li>
<li id="line_10711" class="odd"><span class="lineNumber">10711&nbsp;</span>			if&nbsp;(setPotentialScroller(this.scrollerEl,&nbsp;scrollerHeight))&nbsp;{&nbsp;//&nbsp;using&nbsp;scrollbars?<a name="line_10711"></a></li>
<li id="line_10712" class="even"><span class="lineNumber">10712&nbsp;</span><a name="line_10712"></a></li>
<li id="line_10713" class="odd"><span class="lineNumber">10713&nbsp;</span>				//&nbsp;make&nbsp;the&nbsp;all-day&nbsp;and&nbsp;header&nbsp;rows&nbsp;lines&nbsp;up<a name="line_10713"></a></li>
<li id="line_10714" class="even"><span class="lineNumber">10714&nbsp;</span>				compensateScroll(this.noScrollRowEls,&nbsp;getScrollbarWidths(this.scrollerEl));<a name="line_10714"></a></li>
<li id="line_10715" class="odd"><span class="lineNumber">10715&nbsp;</span><a name="line_10715"></a></li>
<li id="line_10716" class="even"><span class="lineNumber">10716&nbsp;</span>				//&nbsp;the&nbsp;scrollbar&nbsp;compensation&nbsp;might&nbsp;have&nbsp;changed&nbsp;text&nbsp;flow,&nbsp;which&nbsp;might&nbsp;affect&nbsp;height,&nbsp;so&nbsp;recalculate<a name="line_10716"></a></li>
<li id="line_10717" class="odd"><span class="lineNumber">10717&nbsp;</span>				//&nbsp;and&nbsp;reapply&nbsp;the&nbsp;desired&nbsp;height&nbsp;to&nbsp;the&nbsp;scroller.<a name="line_10717"></a></li>
<li id="line_10718" class="even"><span class="lineNumber">10718&nbsp;</span>				scrollerHeight&nbsp;=&nbsp;this.computeScrollerHeight(totalHeight);<a name="line_10718"></a></li>
<li id="line_10719" class="odd"><span class="lineNumber">10719&nbsp;</span>				this.scrollerEl.height(scrollerHeight);<a name="line_10719"></a></li>
<li id="line_10720" class="even"><span class="lineNumber">10720&nbsp;</span>			}<a name="line_10720"></a></li>
<li id="line_10721" class="odd"><span class="lineNumber">10721&nbsp;</span>			else&nbsp;{&nbsp;//&nbsp;no&nbsp;scrollbars<a name="line_10721"></a></li>
<li id="line_10722" class="even"><span class="lineNumber">10722&nbsp;</span>				//&nbsp;still,&nbsp;force&nbsp;a&nbsp;height&nbsp;and&nbsp;display&nbsp;the&nbsp;bottom&nbsp;rule&nbsp;(marks&nbsp;the&nbsp;end&nbsp;of&nbsp;day)<a name="line_10722"></a></li>
<li id="line_10723" class="odd"><span class="lineNumber">10723&nbsp;</span>				this.scrollerEl.height(scrollerHeight).css('overflow',&nbsp;'hidden');&nbsp;//&nbsp;in&nbsp;case&nbsp;&lt;hr&gt;&nbsp;goes&nbsp;outside<a name="line_10723"></a></li>
<li id="line_10724" class="even"><span class="lineNumber">10724&nbsp;</span>				this.bottomRuleEl.show();<a name="line_10724"></a></li>
<li id="line_10725" class="odd"><span class="lineNumber">10725&nbsp;</span>			}<a name="line_10725"></a></li>
<li id="line_10726" class="even"><span class="lineNumber">10726&nbsp;</span>		}<a name="line_10726"></a></li>
<li id="line_10727" class="odd"><span class="lineNumber">10727&nbsp;</span>	},<a name="line_10727"></a></li>
<li id="line_10728" class="even"><span class="lineNumber">10728&nbsp;</span><a name="line_10728"></a></li>
<li id="line_10729" class="odd"><span class="lineNumber">10729&nbsp;</span><a name="line_10729"></a></li>
<li id="line_10730" class="even"><span class="lineNumber">10730&nbsp;</span>	//&nbsp;Computes&nbsp;the&nbsp;initial&nbsp;pre-configured&nbsp;scroll&nbsp;state&nbsp;prior&nbsp;to&nbsp;allowing&nbsp;the&nbsp;user&nbsp;to&nbsp;change&nbsp;it<a name="line_10730"></a></li>
<li id="line_10731" class="odd"><span class="lineNumber">10731&nbsp;</span>	computeInitialScroll:&nbsp;function()&nbsp;{<a name="line_10731"></a></li>
<li id="line_10732" class="even"><span class="lineNumber">10732&nbsp;</span>		var&nbsp;scrollTime&nbsp;=&nbsp;moment.duration(this.opt('scrollTime'));<a name="line_10732"></a></li>
<li id="line_10733" class="odd"><span class="lineNumber">10733&nbsp;</span>		var&nbsp;top&nbsp;=&nbsp;this.timeGrid.computeTimeTop(scrollTime);<a name="line_10733"></a></li>
<li id="line_10734" class="even"><span class="lineNumber">10734&nbsp;</span><a name="line_10734"></a></li>
<li id="line_10735" class="odd"><span class="lineNumber">10735&nbsp;</span>		//&nbsp;zoom&nbsp;can&nbsp;give&nbsp;weird&nbsp;floating-point&nbsp;values.&nbsp;rather&nbsp;scroll&nbsp;a&nbsp;little&nbsp;bit&nbsp;further<a name="line_10735"></a></li>
<li id="line_10736" class="even"><span class="lineNumber">10736&nbsp;</span>		top&nbsp;=&nbsp;Math.ceil(top);<a name="line_10736"></a></li>
<li id="line_10737" class="odd"><span class="lineNumber">10737&nbsp;</span><a name="line_10737"></a></li>
<li id="line_10738" class="even"><span class="lineNumber">10738&nbsp;</span>		if&nbsp;(top)&nbsp;{<a name="line_10738"></a></li>
<li id="line_10739" class="odd"><span class="lineNumber">10739&nbsp;</span>			top++;&nbsp;//&nbsp;to&nbsp;overcome&nbsp;top&nbsp;border&nbsp;that&nbsp;slots&nbsp;beyond&nbsp;the&nbsp;first&nbsp;have.&nbsp;looks&nbsp;better<a name="line_10739"></a></li>
<li id="line_10740" class="even"><span class="lineNumber">10740&nbsp;</span>		}<a name="line_10740"></a></li>
<li id="line_10741" class="odd"><span class="lineNumber">10741&nbsp;</span><a name="line_10741"></a></li>
<li id="line_10742" class="even"><span class="lineNumber">10742&nbsp;</span>		return&nbsp;top;<a name="line_10742"></a></li>
<li id="line_10743" class="odd"><span class="lineNumber">10743&nbsp;</span>	},<a name="line_10743"></a></li>
<li id="line_10744" class="even"><span class="lineNumber">10744&nbsp;</span><a name="line_10744"></a></li>
<li id="line_10745" class="odd"><span class="lineNumber">10745&nbsp;</span><a name="line_10745"></a></li>
<li id="line_10746" class="even"><span class="lineNumber">10746&nbsp;</span>	/*&nbsp;Events<a name="line_10746"></a></li>
<li id="line_10747" class="odd"><span class="lineNumber">10747&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_10747"></a></li>
<li id="line_10748" class="even"><span class="lineNumber">10748&nbsp;</span><a name="line_10748"></a></li>
<li id="line_10749" class="odd"><span class="lineNumber">10749&nbsp;</span><a name="line_10749"></a></li>
<li id="line_10750" class="even"><span class="lineNumber">10750&nbsp;</span>	//&nbsp;Renders&nbsp;events&nbsp;onto&nbsp;the&nbsp;view&nbsp;and&nbsp;populates&nbsp;the&nbsp;View's&nbsp;segment&nbsp;array<a name="line_10750"></a></li>
<li id="line_10751" class="odd"><span class="lineNumber">10751&nbsp;</span>	renderEvents:&nbsp;function(events)&nbsp;{<a name="line_10751"></a></li>
<li id="line_10752" class="even"><span class="lineNumber">10752&nbsp;</span>		var&nbsp;dayEvents&nbsp;=&nbsp;[];<a name="line_10752"></a></li>
<li id="line_10753" class="odd"><span class="lineNumber">10753&nbsp;</span>		var&nbsp;timedEvents&nbsp;=&nbsp;[];<a name="line_10753"></a></li>
<li id="line_10754" class="even"><span class="lineNumber">10754&nbsp;</span>		var&nbsp;daySegs&nbsp;=&nbsp;[];<a name="line_10754"></a></li>
<li id="line_10755" class="odd"><span class="lineNumber">10755&nbsp;</span>		var&nbsp;timedSegs;<a name="line_10755"></a></li>
<li id="line_10756" class="even"><span class="lineNumber">10756&nbsp;</span>		var&nbsp;i;<a name="line_10756"></a></li>
<li id="line_10757" class="odd"><span class="lineNumber">10757&nbsp;</span><a name="line_10757"></a></li>
<li id="line_10758" class="even"><span class="lineNumber">10758&nbsp;</span>		//&nbsp;separate&nbsp;the&nbsp;events&nbsp;into&nbsp;all-day&nbsp;and&nbsp;timed<a name="line_10758"></a></li>
<li id="line_10759" class="odd"><span class="lineNumber">10759&nbsp;</span>		for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;events.length;&nbsp;i++)&nbsp;{<a name="line_10759"></a></li>
<li id="line_10760" class="even"><span class="lineNumber">10760&nbsp;</span>			if&nbsp;(events[i].allDay)&nbsp;{<a name="line_10760"></a></li>
<li id="line_10761" class="odd"><span class="lineNumber">10761&nbsp;</span>				dayEvents.push(events[i]);<a name="line_10761"></a></li>
<li id="line_10762" class="even"><span class="lineNumber">10762&nbsp;</span>			}<a name="line_10762"></a></li>
<li id="line_10763" class="odd"><span class="lineNumber">10763&nbsp;</span>			else&nbsp;{<a name="line_10763"></a></li>
<li id="line_10764" class="even"><span class="lineNumber">10764&nbsp;</span>				timedEvents.push(events[i]);<a name="line_10764"></a></li>
<li id="line_10765" class="odd"><span class="lineNumber">10765&nbsp;</span>			}<a name="line_10765"></a></li>
<li id="line_10766" class="even"><span class="lineNumber">10766&nbsp;</span>		}<a name="line_10766"></a></li>
<li id="line_10767" class="odd"><span class="lineNumber">10767&nbsp;</span><a name="line_10767"></a></li>
<li id="line_10768" class="even"><span class="lineNumber">10768&nbsp;</span>		//&nbsp;render&nbsp;the&nbsp;events&nbsp;in&nbsp;the&nbsp;subcomponents<a name="line_10768"></a></li>
<li id="line_10769" class="odd"><span class="lineNumber">10769&nbsp;</span>		timedSegs&nbsp;=&nbsp;this.timeGrid.renderEvents(timedEvents);<a name="line_10769"></a></li>
<li id="line_10770" class="even"><span class="lineNumber">10770&nbsp;</span>		if&nbsp;(this.dayGrid)&nbsp;{<a name="line_10770"></a></li>
<li id="line_10771" class="odd"><span class="lineNumber">10771&nbsp;</span>			daySegs&nbsp;=&nbsp;this.dayGrid.renderEvents(dayEvents);<a name="line_10771"></a></li>
<li id="line_10772" class="even"><span class="lineNumber">10772&nbsp;</span>		}<a name="line_10772"></a></li>
<li id="line_10773" class="odd"><span class="lineNumber">10773&nbsp;</span><a name="line_10773"></a></li>
<li id="line_10774" class="even"><span class="lineNumber">10774&nbsp;</span>		//&nbsp;the&nbsp;all-day&nbsp;area&nbsp;is&nbsp;flexible&nbsp;and&nbsp;might&nbsp;have&nbsp;a&nbsp;lot&nbsp;of&nbsp;events,&nbsp;so&nbsp;shift&nbsp;the&nbsp;height<a name="line_10774"></a></li>
<li id="line_10775" class="odd"><span class="lineNumber">10775&nbsp;</span>		this.updateHeight();<a name="line_10775"></a></li>
<li id="line_10776" class="even"><span class="lineNumber">10776&nbsp;</span>	},<a name="line_10776"></a></li>
<li id="line_10777" class="odd"><span class="lineNumber">10777&nbsp;</span><a name="line_10777"></a></li>
<li id="line_10778" class="even"><span class="lineNumber">10778&nbsp;</span><a name="line_10778"></a></li>
<li id="line_10779" class="odd"><span class="lineNumber">10779&nbsp;</span>	//&nbsp;Retrieves&nbsp;all&nbsp;segment&nbsp;objects&nbsp;that&nbsp;are&nbsp;rendered&nbsp;in&nbsp;the&nbsp;view<a name="line_10779"></a></li>
<li id="line_10780" class="even"><span class="lineNumber">10780&nbsp;</span>	getEventSegs:&nbsp;function()&nbsp;{<a name="line_10780"></a></li>
<li id="line_10781" class="odd"><span class="lineNumber">10781&nbsp;</span>		return&nbsp;this.timeGrid.getEventSegs().concat(<a name="line_10781"></a></li>
<li id="line_10782" class="even"><span class="lineNumber">10782&nbsp;</span>			this.dayGrid&nbsp;?&nbsp;this.dayGrid.getEventSegs()&nbsp;:&nbsp;[]<a name="line_10782"></a></li>
<li id="line_10783" class="odd"><span class="lineNumber">10783&nbsp;</span>		);<a name="line_10783"></a></li>
<li id="line_10784" class="even"><span class="lineNumber">10784&nbsp;</span>	},<a name="line_10784"></a></li>
<li id="line_10785" class="odd"><span class="lineNumber">10785&nbsp;</span><a name="line_10785"></a></li>
<li id="line_10786" class="even"><span class="lineNumber">10786&nbsp;</span><a name="line_10786"></a></li>
<li id="line_10787" class="odd"><span class="lineNumber">10787&nbsp;</span>	//&nbsp;Unrenders&nbsp;all&nbsp;event&nbsp;elements&nbsp;and&nbsp;clears&nbsp;internal&nbsp;segment&nbsp;data<a name="line_10787"></a></li>
<li id="line_10788" class="even"><span class="lineNumber">10788&nbsp;</span>	unrenderEvents:&nbsp;function()&nbsp;{<a name="line_10788"></a></li>
<li id="line_10789" class="odd"><span class="lineNumber">10789&nbsp;</span><a name="line_10789"></a></li>
<li id="line_10790" class="even"><span class="lineNumber">10790&nbsp;</span>		//&nbsp;unrender&nbsp;the&nbsp;events&nbsp;in&nbsp;the&nbsp;subcomponents<a name="line_10790"></a></li>
<li id="line_10791" class="odd"><span class="lineNumber">10791&nbsp;</span>		this.timeGrid.unrenderEvents();<a name="line_10791"></a></li>
<li id="line_10792" class="even"><span class="lineNumber">10792&nbsp;</span>		if&nbsp;(this.dayGrid)&nbsp;{<a name="line_10792"></a></li>
<li id="line_10793" class="odd"><span class="lineNumber">10793&nbsp;</span>			this.dayGrid.unrenderEvents();<a name="line_10793"></a></li>
<li id="line_10794" class="even"><span class="lineNumber">10794&nbsp;</span>		}<a name="line_10794"></a></li>
<li id="line_10795" class="odd"><span class="lineNumber">10795&nbsp;</span><a name="line_10795"></a></li>
<li id="line_10796" class="even"><span class="lineNumber">10796&nbsp;</span>		//&nbsp;we&nbsp;DON'T&nbsp;need&nbsp;to&nbsp;call&nbsp;updateHeight()&nbsp;because:<a name="line_10796"></a></li>
<li id="line_10797" class="odd"><span class="lineNumber">10797&nbsp;</span>		//&nbsp;A)&nbsp;a&nbsp;renderEvents()&nbsp;call&nbsp;always&nbsp;happens&nbsp;after&nbsp;this,&nbsp;which&nbsp;will&nbsp;eventually&nbsp;call&nbsp;updateHeight()<a name="line_10797"></a></li>
<li id="line_10798" class="even"><span class="lineNumber">10798&nbsp;</span>		//&nbsp;B)&nbsp;in&nbsp;IE8,&nbsp;this&nbsp;causes&nbsp;a&nbsp;flash&nbsp;whenever&nbsp;events&nbsp;are&nbsp;rerendered<a name="line_10798"></a></li>
<li id="line_10799" class="odd"><span class="lineNumber">10799&nbsp;</span>	},<a name="line_10799"></a></li>
<li id="line_10800" class="even"><span class="lineNumber">10800&nbsp;</span><a name="line_10800"></a></li>
<li id="line_10801" class="odd"><span class="lineNumber">10801&nbsp;</span><a name="line_10801"></a></li>
<li id="line_10802" class="even"><span class="lineNumber">10802&nbsp;</span>	/*&nbsp;Dragging&nbsp;(for&nbsp;events&nbsp;and&nbsp;external&nbsp;elements)<a name="line_10802"></a></li>
<li id="line_10803" class="odd"><span class="lineNumber">10803&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_10803"></a></li>
<li id="line_10804" class="even"><span class="lineNumber">10804&nbsp;</span><a name="line_10804"></a></li>
<li id="line_10805" class="odd"><span class="lineNumber">10805&nbsp;</span><a name="line_10805"></a></li>
<li id="line_10806" class="even"><span class="lineNumber">10806&nbsp;</span>	//&nbsp;A&nbsp;returned&nbsp;value&nbsp;of&nbsp;`true`&nbsp;signals&nbsp;that&nbsp;a&nbsp;mock&nbsp;"helper"&nbsp;event&nbsp;has&nbsp;been&nbsp;rendered.<a name="line_10806"></a></li>
<li id="line_10807" class="odd"><span class="lineNumber">10807&nbsp;</span>	renderDrag:&nbsp;function(dropLocation,&nbsp;seg)&nbsp;{<a name="line_10807"></a></li>
<li id="line_10808" class="even"><span class="lineNumber">10808&nbsp;</span>		if&nbsp;(dropLocation.start.hasTime())&nbsp;{<a name="line_10808"></a></li>
<li id="line_10809" class="odd"><span class="lineNumber">10809&nbsp;</span>			return&nbsp;this.timeGrid.renderDrag(dropLocation,&nbsp;seg);<a name="line_10809"></a></li>
<li id="line_10810" class="even"><span class="lineNumber">10810&nbsp;</span>		}<a name="line_10810"></a></li>
<li id="line_10811" class="odd"><span class="lineNumber">10811&nbsp;</span>		else&nbsp;if&nbsp;(this.dayGrid)&nbsp;{<a name="line_10811"></a></li>
<li id="line_10812" class="even"><span class="lineNumber">10812&nbsp;</span>			return&nbsp;this.dayGrid.renderDrag(dropLocation,&nbsp;seg);<a name="line_10812"></a></li>
<li id="line_10813" class="odd"><span class="lineNumber">10813&nbsp;</span>		}<a name="line_10813"></a></li>
<li id="line_10814" class="even"><span class="lineNumber">10814&nbsp;</span>	},<a name="line_10814"></a></li>
<li id="line_10815" class="odd"><span class="lineNumber">10815&nbsp;</span><a name="line_10815"></a></li>
<li id="line_10816" class="even"><span class="lineNumber">10816&nbsp;</span><a name="line_10816"></a></li>
<li id="line_10817" class="odd"><span class="lineNumber">10817&nbsp;</span>	unrenderDrag:&nbsp;function()&nbsp;{<a name="line_10817"></a></li>
<li id="line_10818" class="even"><span class="lineNumber">10818&nbsp;</span>		this.timeGrid.unrenderDrag();<a name="line_10818"></a></li>
<li id="line_10819" class="odd"><span class="lineNumber">10819&nbsp;</span>		if&nbsp;(this.dayGrid)&nbsp;{<a name="line_10819"></a></li>
<li id="line_10820" class="even"><span class="lineNumber">10820&nbsp;</span>			this.dayGrid.unrenderDrag();<a name="line_10820"></a></li>
<li id="line_10821" class="odd"><span class="lineNumber">10821&nbsp;</span>		}<a name="line_10821"></a></li>
<li id="line_10822" class="even"><span class="lineNumber">10822&nbsp;</span>	},<a name="line_10822"></a></li>
<li id="line_10823" class="odd"><span class="lineNumber">10823&nbsp;</span><a name="line_10823"></a></li>
<li id="line_10824" class="even"><span class="lineNumber">10824&nbsp;</span><a name="line_10824"></a></li>
<li id="line_10825" class="odd"><span class="lineNumber">10825&nbsp;</span>	/*&nbsp;Selection<a name="line_10825"></a></li>
<li id="line_10826" class="even"><span class="lineNumber">10826&nbsp;</span>	------------------------------------------------------------------------------------------------------------------*/<a name="line_10826"></a></li>
<li id="line_10827" class="odd"><span class="lineNumber">10827&nbsp;</span><a name="line_10827"></a></li>
<li id="line_10828" class="even"><span class="lineNumber">10828&nbsp;</span><a name="line_10828"></a></li>
<li id="line_10829" class="odd"><span class="lineNumber">10829&nbsp;</span>	//&nbsp;Renders&nbsp;a&nbsp;visual&nbsp;indication&nbsp;of&nbsp;a&nbsp;selection<a name="line_10829"></a></li>
<li id="line_10830" class="even"><span class="lineNumber">10830&nbsp;</span>	renderSelection:&nbsp;function(range)&nbsp;{<a name="line_10830"></a></li>
<li id="line_10831" class="odd"><span class="lineNumber">10831&nbsp;</span>		if&nbsp;(range.start.hasTime()&nbsp;||&nbsp;range.end.hasTime())&nbsp;{<a name="line_10831"></a></li>
<li id="line_10832" class="even"><span class="lineNumber">10832&nbsp;</span>			this.timeGrid.renderSelection(range);<a name="line_10832"></a></li>
<li id="line_10833" class="odd"><span class="lineNumber">10833&nbsp;</span>		}<a name="line_10833"></a></li>
<li id="line_10834" class="even"><span class="lineNumber">10834&nbsp;</span>		else&nbsp;if&nbsp;(this.dayGrid)&nbsp;{<a name="line_10834"></a></li>
<li id="line_10835" class="odd"><span class="lineNumber">10835&nbsp;</span>			this.dayGrid.renderSelection(range);<a name="line_10835"></a></li>
<li id="line_10836" class="even"><span class="lineNumber">10836&nbsp;</span>		}<a name="line_10836"></a></li>
<li id="line_10837" class="odd"><span class="lineNumber">10837&nbsp;</span>	},<a name="line_10837"></a></li>
<li id="line_10838" class="even"><span class="lineNumber">10838&nbsp;</span><a name="line_10838"></a></li>
<li id="line_10839" class="odd"><span class="lineNumber">10839&nbsp;</span><a name="line_10839"></a></li>
<li id="line_10840" class="even"><span class="lineNumber">10840&nbsp;</span>	//&nbsp;Unrenders&nbsp;a&nbsp;visual&nbsp;indications&nbsp;of&nbsp;a&nbsp;selection<a name="line_10840"></a></li>
<li id="line_10841" class="odd"><span class="lineNumber">10841&nbsp;</span>	unrenderSelection:&nbsp;function()&nbsp;{<a name="line_10841"></a></li>
<li id="line_10842" class="even"><span class="lineNumber">10842&nbsp;</span>		this.timeGrid.unrenderSelection();<a name="line_10842"></a></li>
<li id="line_10843" class="odd"><span class="lineNumber">10843&nbsp;</span>		if&nbsp;(this.dayGrid)&nbsp;{<a name="line_10843"></a></li>
<li id="line_10844" class="even"><span class="lineNumber">10844&nbsp;</span>			this.dayGrid.unrenderSelection();<a name="line_10844"></a></li>
<li id="line_10845" class="odd"><span class="lineNumber">10845&nbsp;</span>		}<a name="line_10845"></a></li>
<li id="line_10846" class="even"><span class="lineNumber">10846&nbsp;</span>	}<a name="line_10846"></a></li>
<li id="line_10847" class="odd"><span class="lineNumber">10847&nbsp;</span><a name="line_10847"></a></li>
<li id="line_10848" class="even"><span class="lineNumber">10848&nbsp;</span>});<a name="line_10848"></a></li>
<li id="line_10849" class="odd"><span class="lineNumber">10849&nbsp;</span><a name="line_10849"></a></li>
<li id="line_10850" class="even"><span class="lineNumber">10850&nbsp;</span>;;<a name="line_10850"></a></li>
<li id="line_10851" class="odd"><span class="lineNumber">10851&nbsp;</span><a name="line_10851"></a></li>
<li id="line_10852" class="even"><span class="lineNumber">10852&nbsp;</span>var&nbsp;AGENDA_ALL_DAY_EVENT_LIMIT&nbsp;=&nbsp;5;<a name="line_10852"></a></li>
<li id="line_10853" class="odd"><span class="lineNumber">10853&nbsp;</span><a name="line_10853"></a></li>
<li id="line_10854" class="even"><span class="lineNumber">10854&nbsp;</span>fcViews.agenda&nbsp;=&nbsp;{<a name="line_10854"></a></li>
<li id="line_10855" class="odd"><span class="lineNumber">10855&nbsp;</span>	'class':&nbsp;AgendaView,<a name="line_10855"></a></li>
<li id="line_10856" class="even"><span class="lineNumber">10856&nbsp;</span>	defaults:&nbsp;{<a name="line_10856"></a></li>
<li id="line_10857" class="odd"><span class="lineNumber">10857&nbsp;</span>		allDaySlot:&nbsp;true,<a name="line_10857"></a></li>
<li id="line_10858" class="even"><span class="lineNumber">10858&nbsp;</span>		allDayText:&nbsp;'all-day',<a name="line_10858"></a></li>
<li id="line_10859" class="odd"><span class="lineNumber">10859&nbsp;</span>		slotDuration:&nbsp;'00:30:00',<a name="line_10859"></a></li>
<li id="line_10860" class="even"><span class="lineNumber">10860&nbsp;</span>		minTime:&nbsp;'00:00:00',<a name="line_10860"></a></li>
<li id="line_10861" class="odd"><span class="lineNumber">10861&nbsp;</span>		maxTime:&nbsp;'24:00:00',<a name="line_10861"></a></li>
<li id="line_10862" class="even"><span class="lineNumber">10862&nbsp;</span>		slotEventOverlap:&nbsp;true&nbsp;//&nbsp;a&nbsp;bad&nbsp;name.&nbsp;confused&nbsp;with&nbsp;overlap/constraint&nbsp;system<a name="line_10862"></a></li>
<li id="line_10863" class="odd"><span class="lineNumber">10863&nbsp;</span>	}<a name="line_10863"></a></li>
<li id="line_10864" class="even"><span class="lineNumber">10864&nbsp;</span>};<a name="line_10864"></a></li>
<li id="line_10865" class="odd"><span class="lineNumber">10865&nbsp;</span><a name="line_10865"></a></li>
<li id="line_10866" class="even"><span class="lineNumber">10866&nbsp;</span>fcViews.agendaDay&nbsp;=&nbsp;{<a name="line_10866"></a></li>
<li id="line_10867" class="odd"><span class="lineNumber">10867&nbsp;</span>	type:&nbsp;'agenda',<a name="line_10867"></a></li>
<li id="line_10868" class="even"><span class="lineNumber">10868&nbsp;</span>	duration:&nbsp;{&nbsp;days:&nbsp;1&nbsp;}<a name="line_10868"></a></li>
<li id="line_10869" class="odd"><span class="lineNumber">10869&nbsp;</span>};<a name="line_10869"></a></li>
<li id="line_10870" class="even"><span class="lineNumber">10870&nbsp;</span><a name="line_10870"></a></li>
<li id="line_10871" class="odd"><span class="lineNumber">10871&nbsp;</span>fcViews.agendaWeek&nbsp;=&nbsp;{<a name="line_10871"></a></li>
<li id="line_10872" class="even"><span class="lineNumber">10872&nbsp;</span>	type:&nbsp;'agenda',<a name="line_10872"></a></li>
<li id="line_10873" class="odd"><span class="lineNumber">10873&nbsp;</span>	duration:&nbsp;{&nbsp;weeks:&nbsp;1&nbsp;}<a name="line_10873"></a></li>
<li id="line_10874" class="even"><span class="lineNumber">10874&nbsp;</span>};<a name="line_10874"></a></li>
<li id="line_10875" class="odd"><span class="lineNumber">10875&nbsp;</span>;;<a name="line_10875"></a></li>
<li id="line_10876" class="even"><span class="lineNumber">10876&nbsp;</span><a name="line_10876"></a></li>
<li id="line_10877" class="odd"><span class="lineNumber">10877&nbsp;</span>return&nbsp;fc;&nbsp;//&nbsp;export&nbsp;for&nbsp;Node/CommonJS<a name="line_10877"></a></li>
<li id="line_10878" class="even"><span class="lineNumber">10878&nbsp;</span>});<a name="line_10878"></a></li></ol></div></body></html>
                    </div>
    </body>
</html>
